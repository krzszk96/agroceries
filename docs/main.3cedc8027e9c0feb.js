"use strict";(self.webpackChunkagroceries=self.webpackChunkagroceries||[]).push([[179],{2011:(pt,Re,U)=>{U.d(Re,{Dh:()=>me,GT:()=>ye,cc:()=>Me,hO:()=>Ge,on:()=>z,pX:()=>le,xv:()=>ve});var d=U(4650),re=U(127),L=U(5813);pt=U.hmd(pt);const pe=["ngOnDestroy"],le=(be,Je,it,ke={})=>new Proxy(be,{get:(Ce,Te)=>it.runOutsideAngular(()=>{var je;if(be[Te])return!(null===(je=ke?.spy)||void 0===je)&&je.get&&ke.spy.get(Te,be[Te]),be[Te];if(pe.indexOf(Te)>-1)return()=>{};const ze=Je.toPromise().then(q=>{const Ie=q&&q[Te];return"function"==typeof Ie?Ie.bind(q):Ie&&Ie.then?Ie.then(J=>it.run(()=>J)):it.run(()=>Ie)});return new Proxy(()=>{},{get:(q,Ie)=>ze[Ie],apply:(q,Ie,J)=>ze.then(oe=>{var se;const Ee=oe&&oe(...J);return!(null===(se=ke?.spy)||void 0===se)&&se.apply&&ke.spy.apply(Te,J,Ee),Ee})})})}),ye=(be,Je)=>{Je.forEach(it=>{Object.getOwnPropertyNames(it.prototype||it).forEach(ke=>{Object.defineProperty(be.prototype,ke,Object.getOwnPropertyDescriptor(it.prototype||it,ke))})})};class ae{constructor(Je){return Je}}const me=new d.OlP("angularfire2.app.options"),ve=new d.OlP("angularfire2.app.name");function z(be,Je,it){const Ce="object"==typeof it&&it||{};Ce.name=Ce.name||"string"==typeof it&&it||"[DEFAULT]";const je=re.Z.apps.filter(ze=>ze&&ze.name===Ce.name)[0]||Je.runOutsideAngular(()=>re.Z.initializeApp(be,Ce));try{JSON.stringify(be)!==JSON.stringify(je.options)&&G("error",`${je.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ae(je)}const G=(be,...Je)=>{(0,d.X6Q)()&&typeof console<"u"&&console[be](...Je)},ne={provide:ae,useFactory:z,deps:[me,d.R0b,[new d.FiY,ve]]};let Ge=(()=>{class be{constructor(it){re.Z.registerVersion("angularfire",L.q4.full,"core"),re.Z.registerVersion("angularfire",L.q4.full,"app-compat"),re.Z.registerVersion("angular",d.q4F.full,it.toString())}static initializeApp(it,ke){return{ngModule:be,providers:[{provide:me,useValue:it},{provide:ve,useValue:ke}]}}}return be.\u0275fac=function(it){return new(it||be)(d.LFG(d.Lbi))},be.\u0275mod=d.oAB({type:be}),be.\u0275inj=d.cJS({providers:[ne]}),be})();function Me(be,Je,it,ke,Ce){const[,Te,je]=globalThis.\u0275AngularfireInstanceCache.find(ze=>ze[0]===be)||[];if(Te)return function xe(be,Je){try{return be.toString()===Je.toString()}catch{return be===Je}}(Ce,je)||(ge("error",`${Je} was already initialized on the ${it} Firebase App with different settings.${$e?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ce,was:je})),Te;{const ze=ke();return globalThis.\u0275AngularfireInstanceCache.push([be,ze,Ce]),ze}}const $e=!!pt.hot,ge=(be,...Je)=>{(0,d.X6Q)()&&typeof console<"u"&&console[be](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(pt,Re,U)=>{U.d(Re,{q4:()=>Oc,iC:()=>xu,fc:()=>Pa,HU:()=>lp,vb:()=>Ko,JM:()=>Na});var d=U(4650),re=U(5867),L=U(5861),pe=U(9681),le=U(2090),ye=U(4859),ae=U(1877),me=U(8766);const ve="@firebase/installations",z="0.5.12",ne=`w:${z}`,Ge="FIS_v2",Je=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function it(D){return D instanceof le.ZR&&D.code.includes("request-failed")}function ke({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ce(D){return{token:D.token,requestStatus:2,expiresIn:oe(D.expiresIn),creationTime:Date.now()}}function Te(D,S){return je.apply(this,arguments)}function je(){return(je=(0,L.Z)(function*(D,S){const H=(yield S.json()).error;return Je.create("request-failed",{requestName:D,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function ze({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function q(D,{refreshToken:S}){const R=ze(D);return R.append("Authorization",function se(D){return`${Ge} ${D}`}(S)),R}function Ie(D){return J.apply(this,arguments)}function J(){return(J=(0,L.Z)(function*(D){const S=yield D();return S.status>=500&&S.status<600?D():S})).apply(this,arguments)}function oe(D){return Number(D.replace("s","000"))}function Ee(D,S){return fe.apply(this,arguments)}function fe(){return(fe=(0,L.Z)(function*({appConfig:D,heartbeatServiceProvider:S},{fid:R}){const H=ke(D),te=ze(D),ue=S.getImmediate({optional:!0});if(ue){const Dt=yield ue.getHeartbeatsHeader();Dt&&te.append("x-firebase-client",Dt)}const Ye={method:"POST",headers:te,body:JSON.stringify({fid:R,authVersion:Ge,appId:D.appId,sdkVersion:ne})},ht=yield Ie(()=>fetch(H,Ye));if(ht.ok){const Dt=yield ht.json();return{fid:Dt.fid||R,registrationStatus:2,refreshToken:Dt.refreshToken,authToken:Ce(Dt.authToken)}}throw yield Te("Create Installation",ht)})).apply(this,arguments)}function Fe(D){return new Promise(S=>{setTimeout(S,D)})}const Qt=/^[cdef][\w-]{21}$/;function Xe(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const R=function cn(D){return function vt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Qt.test(R)?R:""}catch{return""}}function Hn(D){return`${D.appName}!${D.appId}`}const mn=new Map;function nn(D,S){const R=Hn(D);zt(R,S),function ls(D,S){const R=function Rr(){return!hi&&"BroadcastChannel"in self&&(hi=new BroadcastChannel("[Firebase] FID Change"),hi.onmessage=D=>{zt(D.data.key,D.data.fid)}),hi}();R&&R.postMessage({key:D,fid:S}),function ei(){0===mn.size&&hi&&(hi.close(),hi=null)}()}(R,S)}function zt(D,S){const R=mn.get(D);if(R)for(const H of R)H(S)}let hi=null;const ti="firebase-installations-store";let Ui=null;function bt(){return Ui||(Ui=(0,me.X3)("firebase-installations-database",1,{upgrade:(D,S)=>{0===S&&D.createObjectStore(ti)}})),Ui}function ni(D,S){return jn.apply(this,arguments)}function jn(){return(jn=(0,L.Z)(function*(D,S){const R=Hn(D),te=(yield bt()).transaction(ti,"readwrite"),ue=te.objectStore(ti),Ae=yield ue.get(R);return yield ue.put(S,R),yield te.done,(!Ae||Ae.fid!==S.fid)&&nn(D,S.fid),S})).apply(this,arguments)}function $n(D){return cs.apply(this,arguments)}function cs(){return(cs=(0,L.Z)(function*(D){const S=Hn(D),H=(yield bt()).transaction(ti,"readwrite");yield H.objectStore(ti).delete(S),yield H.done})).apply(this,arguments)}function ds(D,S){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,L.Z)(function*(D,S){const R=Hn(D),te=(yield bt()).transaction(ti,"readwrite"),ue=te.objectStore(ti),Ae=yield ue.get(R),Ye=S(Ae);return void 0===Ye?yield ue.delete(R):yield ue.put(Ye,R),yield te.done,Ye&&(!Ae||Ae.fid!==Ye.fid)&&nn(D,Ye.fid),Ye})).apply(this,arguments)}function Yn(D){return fi.apply(this,arguments)}function fi(){return(fi=(0,L.Z)(function*(D){let S;const R=yield ds(D.appConfig,H=>{const te=To(H),ue=Xt(D,te);return S=ue.registrationPromise,ue.installationEntry});return""===R.fid?{installationEntry:yield S}:{installationEntry:R,registrationPromise:S}})).apply(this,arguments)}function To(D){return pi(D||{fid:Xe(),registrationStatus:0})}function Xt(D,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Je.create("app-offline"))};const R={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},H=function qe(D,S){return It.apply(this,arguments)}(D,R);return{installationEntry:R,registrationPromise:H}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Hr(D)}:{installationEntry:S}}function It(){return(It=(0,L.Z)(function*(D,S){try{const R=yield Ee(D,S);return ni(D.appConfig,R)}catch(R){throw it(R)&&409===R.customData.serverCode?yield $n(D.appConfig):yield ni(D.appConfig,{fid:S.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Hr(D){return ar.apply(this,arguments)}function ar(){return(ar=(0,L.Z)(function*(D){let S=yield Mt(D.appConfig);for(;1===S.registrationStatus;)yield Fe(100),S=yield Mt(D.appConfig);if(0===S.registrationStatus){const{installationEntry:R,registrationPromise:H}=yield Yn(D);return H||R}return S})).apply(this,arguments)}function Mt(D){return ds(D,S=>{if(!S)throw Je.create("installation-not-found");return pi(S)})}function pi(D){return function lr(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Bi(D,S){return an.apply(this,arguments)}function an(){return(an=(0,L.Z)(function*({appConfig:D,heartbeatServiceProvider:S},R){const H=ri(D,R),te=q(D,R),ue=S.getImmediate({optional:!0});if(ue){const Dt=yield ue.getHeartbeatsHeader();Dt&&te.append("x-firebase-client",Dt)}const Ye={method:"POST",headers:te,body:JSON.stringify({installation:{sdkVersion:ne,appId:D.appId}})},ht=yield Ie(()=>fetch(H,Ye));if(ht.ok)return Ce(yield ht.json());throw yield Te("Generate Auth Token",ht)})).apply(this,arguments)}function ri(D,{fid:S}){return`${ke(D)}/${S}/authTokens:generate`}function $(D){return W.apply(this,arguments)}function W(){return(W=(0,L.Z)(function*(D,S=!1){let R;const H=yield ds(D.appConfig,ue=>{if(!ft(ue))throw Je.create("not-registered");const Ae=ue.authToken;if(!S&&vn(Ae))return ue;if(1===Ae.requestStatus)return R=j(D,S),ue;{if(!navigator.onLine)throw Je.create("app-offline");const Ye=vr(ue);return R=Ne(D,Ye),Ye}});return R?yield R:H.authToken})).apply(this,arguments)}function j(D,S){return K.apply(this,arguments)}function K(){return(K=(0,L.Z)(function*(D,S){let R=yield Y(D.appConfig);for(;1===R.authToken.requestStatus;)yield Fe(100),R=yield Y(D.appConfig);const H=R.authToken;return 0===H.requestStatus?$(D,S):H})).apply(this,arguments)}function Y(D){return ds(D,S=>{if(!ft(S))throw Je.create("not-registered");return function jt(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Ne(D,S){return We.apply(this,arguments)}function We(){return(We=(0,L.Z)(function*(D,S){try{const R=yield Bi(D,S),H=Object.assign(Object.assign({},S),{authToken:R});return yield ni(D.appConfig,H),R}catch(R){if(!it(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const H=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield ni(D.appConfig,H)}else yield $n(D.appConfig);throw R}})).apply(this,arguments)}function ft(D){return void 0!==D&&2===D.registrationStatus}function vn(D){return 2===D.requestStatus&&!function en(D){const S=Date.now();return S<D.creationTime||D.creationTime+D.expiresIn<S+36e5}(D)}function vr(D){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:S})}function Dn(){return(Dn=(0,L.Z)(function*(D){const S=D,{installationEntry:R,registrationPromise:H}=yield Yn(S);return H?H.catch(console.error):$(S).catch(console.error),R.fid})).apply(this,arguments)}function Dr(){return(Dr=(0,L.Z)(function*(D,S=!1){const R=D;return yield jr(R),(yield $(R,S)).token})).apply(this,arguments)}function jr(D){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,L.Z)(function*(D){const{registrationPromise:S}=yield Yn(D);S&&(yield S)})).apply(this,arguments)}function Hi(D){return Je.create("missing-app-config-values",{valueName:D})}const Ft="installations",Sn=D=>{const S=D.getProvider("app").getImmediate(),R=function cl(D){if(!D||!D.options)throw Hi("App Configuration");if(!D.name)throw Hi("App Name");const S=["projectId","apiKey","appId"];for(const R of S)if(!D.options[R])throw Hi(R);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(S);return{app:S,appConfig:R,heartbeatServiceProvider:(0,pe._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},ha=D=>{const S=D.getProvider("app").getImmediate(),R=(0,pe._getProvider)(S,Ft).getImmediate();return{getId:()=>function $t(D){return Dn.apply(this,arguments)}(R),getToken:te=>function Qn(D){return Dr.apply(this,arguments)}(R,te)}};(function So(){(0,pe._registerComponent)(new ye.wA(Ft,Sn,"PUBLIC")),(0,pe._registerComponent)(new ye.wA("installations-internal",ha,"PRIVATE"))})(),(0,pe.registerVersion)(ve,z),(0,pe.registerVersion)(ve,z,"esm2017");const Xn="@firebase/remote-config",Tr=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Kf{constructor(S,R,H,te){this.client=S,this.storage=R,this.storageCache=H,this.logger=te}isCachedDataFresh(S,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-R,te=H<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${te}.`),te}fetch(S){var R=this;return(0,L.Z)(function*(){const[H,te]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(te&&R.isCachedDataFresh(S.cacheMaxAgeMillis,H))return te;S.eTag=te&&te.eTag;const ue=yield R.client.fetch(S),Ae=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Ae.push(R.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Ae),ue})()}}function Vd(D=navigator){return D.languages&&D.languages[0]||D.language}class eu{constructor(S,R,H,te,ue,Ae){this.firebaseInstallations=S,this.sdkVersion=R,this.namespace=H,this.projectId=te,this.apiKey=ue,this.appId=Ae}fetch(S){var R=this;return(0,L.Z)(function*(){var H,te,ue;const[Ae,Ye]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,At={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},lt={sdk_version:R.sdkVersion,app_instance_id:Ae,app_instance_id_token:Ye,app_id:R.appId,language_code:Vd()},mt={method:"POST",headers:At,body:JSON.stringify(lt)},fr=fetch(Dt,mt),Ml=new Promise((Zi,fs)=>{S.signal.addEventListener(()=>{const nh=new Error("The operation was aborted.");nh.name="AbortError",fs(nh)})});let Ii;try{yield Promise.race([fr,Ml]),Ii=yield fr}catch(Zi){let fs="fetch-client-network";throw"AbortError"===(null===(H=Zi)||void 0===H?void 0:H.name)&&(fs="fetch-timeout"),Tr.create(fs,{originalErrorMessage:null===(te=Zi)||void 0===te?void 0:te.message})}let Di=Ii.status;const La=Ii.headers.get("ETag")||void 0;let xl,Va;if(200===Ii.status){let Zi;try{Zi=yield Ii.json()}catch(fs){throw Tr.create("fetch-client-parse",{originalErrorMessage:null===(ue=fs)||void 0===ue?void 0:ue.message})}xl=Zi.entries,Va=Zi.state}if("INSTANCE_STATE_UNSPECIFIED"===Va?Di=500:"NO_CHANGE"===Va?Di=304:("NO_TEMPLATE"===Va||"EMPTY_CONFIG"===Va)&&(xl={}),304!==Di&&200!==Di)throw Tr.create("fetch-status",{httpStatus:Di});return{status:Di,eTag:La,config:xl}})()}}class pg{constructor(S,R){this.client=S,this.storage=R}fetch(S){var R=this;return(0,L.Z)(function*(){const H=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(S,H)})()}attemptFetch(S,{throttleEndTimeMillis:R,backoffCount:H}){var te=this;return(0,L.Z)(function*(){yield function Ao(D,S){return new Promise((R,H)=>{const te=Math.max(S-Date.now(),0),ue=setTimeout(R,te);D.addEventListener(()=>{clearTimeout(ue),H(Tr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,R);try{const ue=yield te.client.fetch(S);return yield te.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function gi(D){if(!(D instanceof le.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ue))throw ue;const Ae={throttleEndTimeMillis:Date.now()+(0,le.$s)(H),backoffCount:H+1};return yield te.storage.setThrottleMetadata(Ae),te.attemptFetch(S,Ae)}})()}}class Ud{constructor(S,R,H,te,ue){this.app=S,this._client=R,this._storageCache=H,this._storage=te,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function gc(D,S){var R;const H=D.target.error||void 0;return Tr.create(S,{originalErrorMessage:H&&(null===(R=H)||void 0===R?void 0:R.message)})}const to="app_namespace_store";class yg{constructor(S,R,H,te=function _g(){return new Promise((D,S)=>{var R;try{const H=indexedDB.open("firebase_remote_config",1);H.onerror=te=>{S(gc(te,"storage-open"))},H.onsuccess=te=>{D(te.target.result)},H.onupgradeneeded=te=>{0===te.oldVersion&&te.target.result.createObjectStore(to,{keyPath:"compositeKey"})}}catch(H){S(Tr.create("storage-open",{originalErrorMessage:null===(R=H)||void 0===R?void 0:R.message}))}})}()){this.appId=S,this.appName=R,this.namespace=H,this.openDbPromise=te}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var R=this;return(0,L.Z)(function*(){const H=yield R.openDbPromise;return new Promise((te,ue)=>{var Ae;const ht=H.transaction([to],"readonly").objectStore(to),Dt=R.createCompositeKey(S);try{const At=ht.get(Dt);At.onerror=lt=>{ue(gc(lt,"storage-get"))},At.onsuccess=lt=>{const mt=lt.target.result;te(mt?mt.value:void 0)}}catch(At){ue(Tr.create("storage-get",{originalErrorMessage:null===(Ae=At)||void 0===Ae?void 0:Ae.message}))}})})()}set(S,R){var H=this;return(0,L.Z)(function*(){const te=yield H.openDbPromise;return new Promise((ue,Ae)=>{var Ye;const Dt=te.transaction([to],"readwrite").objectStore(to),At=H.createCompositeKey(S);try{const lt=Dt.put({compositeKey:At,value:R});lt.onerror=mt=>{Ae(gc(mt,"storage-set"))},lt.onsuccess=()=>{ue()}}catch(lt){Ae(Tr.create("storage-set",{originalErrorMessage:null===(Ye=lt)||void 0===Ye?void 0:Ye.message}))}})})()}delete(S){var R=this;return(0,L.Z)(function*(){const H=yield R.openDbPromise;return new Promise((te,ue)=>{var Ae;const ht=H.transaction([to],"readwrite").objectStore(to),Dt=R.createCompositeKey(S);try{const At=ht.delete(Dt);At.onerror=lt=>{ue(gc(lt,"storage-delete"))},At.onsuccess=()=>{te()}}catch(At){ue(Tr.create("storage-delete",{originalErrorMessage:null===(Ae=At)||void 0===Ae?void 0:Ae.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class tu{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,L.Z)(function*(){const R=S.storage.getLastFetchStatus(),H=S.storage.getLastSuccessfulFetchTimestampMillis(),te=S.storage.getActiveConfig(),ue=yield R;ue&&(S.lastFetchStatus=ue);const Ae=yield H;Ae&&(S.lastSuccessfulFetchTimestampMillis=Ae);const Ye=yield te;Ye&&(S.activeConfig=Ye)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function nu(){return no.apply(this,arguments)}function no(){return(no=(0,L.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}!function Is(){(0,pe._registerComponent)(new ye.wA("remote-config",function D(S,{instanceIdentifier:R}){const H=S.getProvider("app").getImmediate(),te=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Tr.create("registration-window");if(!(0,le.hl)())throw Tr.create("indexed-db-unavailable");const{projectId:ue,apiKey:Ae,appId:Ye}=H.options;if(!ue)throw Tr.create("registration-project-id");if(!Ae)throw Tr.create("registration-api-key");if(!Ye)throw Tr.create("registration-app-id");const ht=new yg(Ye,H.name,R=R||"firebase"),Dt=new tu(ht),At=new ae.Yd(Xn);At.logLevel=ae.in.ERROR;const lt=new eu(te,pe.SDK_VERSION,R,ue,Ae,Ye),mt=new pg(lt,ht),fr=new Kf(mt,ht,Dt,At),Ml=new Ud(H,fr,Dt,ht,At);return function Wf(D){const S=(0,le.m9)(D);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Ml),Ml},"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)(Xn,"0.3.11"),(0,pe.registerVersion)(Xn,"0.3.11","esm2017")}();const _c="/firebase-messaging-sw.js",_i="/firebase-cloud-messaging-push-scope",ro="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yc="google.c.a.c_id",ml="google.c.a.c_l",gl="google.c.a.ts",Zf="google.c.a.e";var Mo=(()=>{return(D=Mo||(Mo={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Mo;var D})();function Cn(D){const S=new Uint8Array(D);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ru(D){const R=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(R),te=new Uint8Array(H.length);for(let ue=0;ue<H.length;++ue)te[ue]=H.charCodeAt(ue);return te}const iu="fcm_token_details_db",si="fcm_token_object_Store";function jd(D){return Bn.apply(this,arguments)}function Bn(){return Bn=(0,L.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(iu))return null;let S=null;return(yield(0,me.X3)(iu,5,{upgrade:(H=(0,L.Z)(function*(te,ue,Ae,Ye){var ht;if(ue<2||!te.objectStoreNames.contains(si))return;const Dt=Ye.objectStore(si),At=yield Dt.index("fcmSenderId").get(D);if(yield Dt.clear(),At)if(2===ue){const lt=At;if(!lt.auth||!lt.p256dh||!lt.endpoint)return;S={token:lt.fcmToken,createTime:null!==(ht=lt.createTime)&&void 0!==ht?ht:Date.now(),subscriptionOptions:{auth:lt.auth,p256dh:lt.p256dh,endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:"string"==typeof lt.vapidKey?lt.vapidKey:Cn(lt.vapidKey)}}}else if(3===ue){const lt=At;S={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:Cn(lt.auth),p256dh:Cn(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:Cn(lt.vapidKey)}}}else if(4===ue){const lt=At;S={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:Cn(lt.auth),p256dh:Cn(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:Cn(lt.vapidKey)}}}}),function(ue,Ae,Ye,ht){return H.apply(this,arguments)})})).close(),yield(0,me.Lj)(iu),yield(0,me.Lj)("fcm_vapid_details_db"),yield(0,me.Lj)("undefined"),$d(S)?S:null;var H}),Bn.apply(this,arguments)}function $d(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:S}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Jn="firebase-messaging-store";let su=null;function xo(){return su||(su=(0,me.X3)("firebase-messaging-database",1,{upgrade:(D,S)=>{0===S&&D.createObjectStore(Jn)}})),su}function io(D){return wr.apply(this,arguments)}function wr(){return(wr=(0,L.Z)(function*(D){const S=so(D),H=yield(yield xo()).transaction(Jn).objectStore(Jn).get(S);if(H)return H;{const te=yield jd(D.appConfig.senderId);if(te)return yield ko(D,te),te}})).apply(this,arguments)}function ko(D,S){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,L.Z)(function*(D,S){const R=so(D),te=(yield xo()).transaction(Jn,"readwrite");return yield te.objectStore(Jn).put(S,R),yield te.done,S})).apply(this,arguments)}function ya(D){return yi.apply(this,arguments)}function yi(){return(yi=(0,L.Z)(function*(D){const S=so(D),H=(yield xo()).transaction(Jn,"readwrite");yield H.objectStore(Jn).delete(S),yield H.done})).apply(this,arguments)}function so({appConfig:D}){return D.appId}const ot=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ou(D,S){return vc.apply(this,arguments)}function vc(){return(vc=(0,L.Z)(function*(D,S){var R;const H=yield lu(D),te=Vt(S),ue={method:"POST",headers:H,body:JSON.stringify(te)};let Ae;try{Ae=yield(yield fetch(va(D.appConfig),ue)).json()}catch(Ye){throw ot.create("token-subscribe-failed",{errorInfo:null===(R=Ye)||void 0===R?void 0:R.toString()})}if(Ae.error)throw ot.create("token-subscribe-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw ot.create("token-subscribe-no-token");return Ae.token})).apply(this,arguments)}function bc(D,S){return au.apply(this,arguments)}function au(){return(au=(0,L.Z)(function*(D,S){var R;const H=yield lu(D),te=Vt(S.subscriptionOptions),ue={method:"PATCH",headers:H,body:JSON.stringify(te)};let Ae;try{Ae=yield(yield fetch(`${va(D.appConfig)}/${S.token}`,ue)).json()}catch(Ye){throw ot.create("token-update-failed",{errorInfo:null===(R=Ye)||void 0===R?void 0:R.toString()})}if(Ae.error)throw ot.create("token-update-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw ot.create("token-update-no-token");return Ae.token})).apply(this,arguments)}function Ro(D,S){return No.apply(this,arguments)}function No(){return(No=(0,L.Z)(function*(D,S){var R;const te={method:"DELETE",headers:yield lu(D)};try{const Ae=yield(yield fetch(`${va(D.appConfig)}/${S}`,te)).json();if(Ae.error)throw ot.create("token-unsubscribe-failed",{errorInfo:Ae.error.message})}catch(ue){throw ot.create("token-unsubscribe-failed",{errorInfo:null===(R=ue)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function va({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function lu(D){return Se.apply(this,arguments)}function Se(){return(Se=(0,L.Z)(function*({appConfig:D,installations:S}){const R=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Vt({p256dh:D,auth:S,endpoint:R,vapidKey:H}){const te={web:{endpoint:R,auth:S,p256dh:D}};return H!==ro&&(te.web.applicationPubKey=H),te}const ba=6048e5;function Oo(D){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,L.Z)(function*(D){const S=yield uu(D.swRegistration,D.vapidKey),R={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:S.endpoint,auth:Cn(S.getKey("auth")),p256dh:Cn(S.getKey("p256dh"))},H=yield io(D.firebaseDependencies);if(H){if(Ts(H.subscriptionOptions,R))return Date.now()>=H.createTime+ba?vi(D,{token:H.token,createTime:Date.now(),subscriptionOptions:R}):H.token;try{yield Ro(D.firebaseDependencies,H.token)}catch(te){console.warn(te)}return Ea(D.firebaseDependencies,R)}return Ea(D.firebaseDependencies,R)})).apply(this,arguments)}function wa(D){return Po.apply(this,arguments)}function Po(){return(Po=(0,L.Z)(function*(D){const S=yield io(D.firebaseDependencies);S&&(yield Ro(D.firebaseDependencies,S.token),yield ya(D.firebaseDependencies));const R=yield D.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function vi(D,S){return bl.apply(this,arguments)}function bl(){return(bl=(0,L.Z)(function*(D,S){try{const R=yield bc(D.firebaseDependencies,S),H=Object.assign(Object.assign({},S),{token:R,createTime:Date.now()});return yield ko(D.firebaseDependencies,H),R}catch(R){throw yield wa(D),R}})).apply(this,arguments)}function Ea(D,S){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,L.Z)(function*(D,S){const H={token:yield ou(D,S),createTime:Date.now(),subscriptionOptions:S};return yield ko(D,H),H.token})).apply(this,arguments)}function uu(D,S){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,L.Z)(function*(D,S){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ru(S)})})).apply(this,arguments)}function Ts(D,S){return S.vapidKey===D.vapidKey&&S.endpoint===D.endpoint&&S.auth===D.auth&&S.p256dh===D.p256dh}function ur(D){const S={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Gi(D,S){if(!S.notification)return;D.notification={};const R=S.notification.title;R&&(D.notification.title=R);const H=S.notification.body;H&&(D.notification.body=H);const te=S.notification.image;te&&(D.notification.image=te)}(S,D),function wc(D,S){!S.data||(D.data=S.data)}(S,D),function Fo(D,S){var R,H,te,ue,Ae;if(!(S.fcmOptions||null!==(R=S.notification)&&void 0!==R&&R.click_action))return;D.fcmOptions={};const Ye=null!==(te=null===(H=S.fcmOptions)||void 0===H?void 0:H.link)&&void 0!==te?te:null===(ue=S.notification)||void 0===ue?void 0:ue.click_action;Ye&&(D.fcmOptions.link=Ye);const ht=null===(Ae=S.fcmOptions)||void 0===Ae?void 0:Ae.analytics_label;ht&&(D.fcmOptions.analyticsLabel=ht)}(S,D),S}function zi(D){return"object"==typeof D&&!!D&&yc in D}function zd(D,S){const R=[];for(let H=0;H<D.length;H++)R.push(D.charAt(H)),H<S.length&&R.push(S.charAt(H));return R.join("")}function Ia(D){return ot.create("missing-app-config-values",{valueName:D})}zd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),zd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Qf{constructor(S,R,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const te=function qd(D){if(!D||!D.options)throw Ia("App Configuration Object");if(!D.name)throw Ia("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:R}=D;for(const H of S)if(!R[H])throw Ia(H);return{appName:D.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:te,installations:R,analyticsProvider:H}}_delete(){return Promise.resolve()}}function Da(D){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,L.Z)(function*(D){var S;try{D.swRegistration=yield navigator.serviceWorker.register(_c,{scope:_i}),D.swRegistration.update().catch(()=>{})}catch(R){throw ot.create("failed-service-worker-registration",{browserErrorMessage:null===(S=R)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function cu(D,S){return wl.apply(this,arguments)}function wl(){return(wl=(0,L.Z)(function*(D,S){if(!S&&!D.swRegistration&&(yield Da(D)),S||!D.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw ot.create("invalid-sw-registration");D.swRegistration=S}})).apply(this,arguments)}function Ec(D,S){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,L.Z)(function*(D,S){S?D.vapidKey=S:D.vapidKey||(D.vapidKey=ro)})).apply(this,arguments)}function Cc(){return(Cc=(0,L.Z)(function*(D,S){if(!navigator)throw ot.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ot.create("permission-blocked");return yield Ec(D,S?.vapidKey),yield cu(D,S?.serviceWorkerRegistration),Oo(D)})).apply(this,arguments)}function du(D,S,R){return hu.apply(this,arguments)}function hu(){return(hu=(0,L.Z)(function*(D,S,R){const H=fu(S);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:R[yc],message_name:R[ml],message_time:R[gl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function fu(D){switch(D){case Mo.NOTIFICATION_CLICKED:return"notification_open";case Mo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ic(){return(Ic=(0,L.Z)(function*(D,S){const R=S.data;if(!R.isFirebaseMessaging)return;D.onMessageHandler&&R.messageType===Mo.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(ur(R)):D.onMessageHandler.next(ur(R)));const H=R.data;zi(H)&&"1"===H[Zf]&&(yield du(D,R.messageType,H))})).apply(this,arguments)}const mu="@firebase/messaging",Ss=D=>{const S=new Qf(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function pu(D,S){return Ic.apply(this,arguments)}(S,R)),S},dn=D=>{const S=D.getProvider("messaging").getImmediate();return{getToken:H=>function El(D,S){return Cc.apply(this,arguments)}(S,H)}};function Kd(){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,L.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Wd(){(0,pe._registerComponent)(new ye.wA("messaging",Ss,"PUBLIC")),(0,pe._registerComponent)(new ye.wA("messaging-internal",dn,"PRIVATE")),(0,pe.registerVersion)(mu,"0.9.16"),(0,pe.registerVersion)(mu,"0.9.16","esm2017")}();const Tc="analytics",Vo="firebase_id",Ma="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Uo="https://www.googletagmanager.com/gtag/js",cr=new ae.Yd("@firebase/analytics");function Qd(D){return Promise.all(D.map(S=>S.catch(R=>R)))}function vg(D,S){const R=document.createElement("script");R.src=`${Uo}?l=${D}&id=${S}`,R.async=!0,document.head.appendChild(R)}function tp(D,S,R,H,te,ue){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,L.Z)(function*(D,S,R,H,te,ue){const Ae=H[te];try{if(Ae)yield S[Ae];else{const ht=(yield Qd(R)).find(Dt=>Dt.measurementId===te);ht&&(yield S[ht.appId])}}catch(Ye){cr.error(Ye)}D("config",te,ue)})).apply(this,arguments)}function np(D,S,R,H,te){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,L.Z)(function*(D,S,R,H,te){try{let ue=[];if(te&&te.send_to){let Ae=te.send_to;Array.isArray(Ae)||(Ae=[Ae]);const Ye=yield Qd(R);for(const ht of Ae){const Dt=Ye.find(lt=>lt.measurementId===ht),At=Dt&&S[Dt.appId];if(!At){ue=[];break}ue.push(At)}}0===ue.length&&(ue=Object.values(S)),yield Promise.all(ue),D("event",H,te||{})}catch(ue){cr.error(ue)}})).apply(this,arguments)}function ip(){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(Uo))return S;return null}const qi=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Xd=new class Wi{constructor(S={},R=1e3){this.throttleMetadata=S,this.intervalMillis=R}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,R){this.throttleMetadata[S]=R}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function sp(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function tn(D){return As.apply(this,arguments)}function As(){return(As=(0,L.Z)(function*(D){var S;const{appId:R,apiKey:H}=D,te={method:"GET",headers:sp(H)},ue=Ma.replace("{app-id}",R),Ae=yield fetch(ue,te);if(200!==Ae.status&&304!==Ae.status){let Ye="";try{const ht=yield Ae.json();null!==(S=ht.error)&&void 0!==S&&S.message&&(Ye=ht.error.message)}catch{}throw qi.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:Ye})}return Ae.json()})).apply(this,arguments)}function He(D){return tr.apply(this,arguments)}function tr(){return(tr=(0,L.Z)(function*(D,S=Xd,R){const{appId:H,apiKey:te,measurementId:ue}=D.options;if(!H)throw qi.create("no-app-id");if(!te){if(ue)return{measurementId:ue,appId:H};throw qi.create("no-api-key")}const Ae=S.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Eu;return setTimeout((0,L.Z)(function*(){Ye.abort()}),void 0!==R?R:6e4),nr({appId:H,apiKey:te,measurementId:ue},Ae,Ye,S)})).apply(this,arguments)}function nr(D,S,R){return dr.apply(this,arguments)}function dr(){return(dr=(0,L.Z)(function*(D,{throttleEndTimeMillis:S,backoffCount:R},H,te=Xd){var ue,Ae;const{appId:Ye,measurementId:ht}=D;try{yield Il(H,S)}catch(Dt){if(ht)return cr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${null===(ue=Dt)||void 0===ue?void 0:ue.message}]`),{appId:Ye,measurementId:ht};throw Dt}try{const Dt=yield tn(D);return te.deleteThrottleMetadata(Ye),Dt}catch(Dt){const At=Dt;if(!wu(At)){if(te.deleteThrottleMetadata(Ye),ht)return cr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${At?.message}]`),{appId:Ye,measurementId:ht};throw Dt}const lt=503===Number(null===(Ae=At?.customData)||void 0===Ae?void 0:Ae.httpStatus)?(0,le.$s)(R,te.intervalMillis,30):(0,le.$s)(R,te.intervalMillis),mt={throttleEndTimeMillis:Date.now()+lt,backoffCount:R+1};return te.setThrottleMetadata(Ye,mt),cr.debug(`Calling attemptFetch again in ${lt} millis`),nr(D,mt,H,te)}})).apply(this,arguments)}function Il(D,S){return new Promise((R,H)=>{const te=Math.max(S-Date.now(),0),ue=setTimeout(R,te);D.addEventListener(()=>{clearTimeout(ue),H(qi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function wu(D){if(!(D instanceof le.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Eu{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Cu,bi;function jo(){return(jo=(0,L.Z)(function*(D,S,R,H,te){if(te&&te.global)D("event",R,H);else{const ue=yield S;D("event",R,Object.assign(Object.assign({},H),{send_to:ue}))}})).apply(this,arguments)}function Ac(D){bi=D}function Tu(D){Cu=D}function wi(){return $o.apply(this,arguments)}function $o(){return($o=(0,L.Z)(function*(){var D;if(!(0,le.hl)())return cr.warn(qi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(S){return cr.warn(qi.create("indexeddb-unavailable",{errorInfo:null===(D=S)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function xs(){return(xs=(0,L.Z)(function*(D,S,R,H,te,ue,Ae){var Ye;const ht=He(D);ht.then(fr=>{R[fr.measurementId]=fr.appId,D.options.measurementId&&fr.measurementId!==D.options.measurementId&&cr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${fr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fr=>cr.error(fr)),S.push(ht);const Dt=wi().then(fr=>{if(fr)return H.getId()}),[At,lt]=yield Promise.all([ht,Dt]);ip()||vg(ue,At.measurementId),bi&&(te("consent","default",bi),Ac(void 0)),te("js",new Date);const mt=null!==(Ye=Ae?.config)&&void 0!==Ye?Ye:{};return mt.origin="firebase",mt.update=!0,null!=lt&&(mt[Vo]=lt),te("config",At.measurementId,mt),Cu&&(te("set",Cu),Tu(void 0)),At.measurementId})).apply(this,arguments)}class hs{constructor(S){this.app=S}_delete(){return delete Gr[this.app.options.appId],Promise.resolve()}}let Gr={},Ei=[];const ks={};let Mc,bn,lo="dataLayer",Yt=!1;function zo(D,S,R){!function Er(){const D=[];if((0,le.ru)()&&D.push("This is a browser extension environment."),(0,le.zI)()||D.push("Cookies are not available."),D.length>0){const S=D.map((H,te)=>`(${te+1}) ${H}`).join(" "),R=qi.create("invalid-analytics-context",{errorInfo:S});cr.warn(R.message)}}();const H=D.options.appId;if(!H)throw qi.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw qi.create("no-api-key");cr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gr[H])throw qi.create("already-exists",{id:H});if(!Yt){!function bg(D){let S=[];Array.isArray(window[D])?S=window[D]:window[D]=S}(lo);const{wrappedGtag:ue,gtagCore:Ae}=function rp(D,S,R,H,te){let ue=function(...Ae){window[H].push(arguments)};return window[te]&&"function"==typeof window[te]&&(ue=window[te]),window[te]=function vu(D,S,R,H){function ue(){return(ue=(0,L.Z)(function*(Ae,Ye,ht){try{"event"===Ae?yield np(D,S,R,Ye,ht):"config"===Ae?yield tp(D,S,R,H,Ye,ht):"consent"===Ae?D("consent","update",ht):D("set",Ye)}catch(Dt){cr.error(Dt)}})).apply(this,arguments)}return function te(Ae,Ye,ht){return ue.apply(this,arguments)}}(ue,D,S,R),{gtagCore:ue,wrappedGtag:window[te]}}(Gr,Ei,ks,lo,"gtag");bn=ue,Mc=Ae,Yt=!0}return Gr[H]=function Go(D,S,R,H,te,ue,Ae){return xs.apply(this,arguments)}(D,Ei,ks,S,Mc,lo,R),new hs(D)}function ka(){return zr.apply(this,arguments)}function zr(){return(zr=(0,L.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const Jd="@firebase/analytics";!function _n(){(0,pe._registerComponent)(new ye.wA(Tc,(S,{options:R})=>zo(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,pe._registerComponent)(new ye.wA("analytics-internal",function D(S){try{const R=S.getProvider(Tc).getImmediate();return{logEvent:(H,te,ue)=>function Sl(D,S,R,H){D=(0,le.m9)(D),function Sc(D,S,R,H,te){return jo.apply(this,arguments)}(bn,Gr[D.app.options.appId],S,R,H).catch(te=>cr.error(te))}(R,H,te,ue)}}catch(R){throw qi.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,pe.registerVersion)(Jd,"0.8.0"),(0,pe.registerVersion)(Jd,"0.8.0","esm2017")}();var Su=U(4408),Or=U(7565);const Rs=new class Wo extends Or.v{}(class qo extends Su.o{constructor(S,R){super(S,R),this.scheduler=S,this.work=R}schedule(S,R=0){return R>0?super.schedule(S,R):(this.delay=R,this.state=S,this.scheduler.flush(this),this)}execute(S,R){return R>0||this.closed?super.execute(S,R):this._execute(S,R)}requestAsyncId(S,R,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(S,R,H):S.flush(this)}});var Nc=U(4986),Au=U(8505),Ns=U(5363),Pr=U(9468);const Oc=new d.GfV("7.4.1"),co="__angularfire_symbol__analyticsIsSupportedValue",eh="__angularfire_symbol__analyticsIsSupported",Ra="__angularfire_symbol__remoteConfigIsSupportedValue",Mu="__angularfire_symbol__remoteConfigIsSupported",Pc="__angularfire_symbol__messagingIsSupportedValue",Fc="__angularfire_symbol__messagingIsSupported";function Na(D,S,R){if(S){if(1===S.length)return S[0];const ue=S.filter(Ae=>Ae.app===R);if(1===ue.length)return ue[0]}return R.container.getProvider(D).getImmediate({optional:!0})}globalThis[eh]||(globalThis[eh]=ka().then(D=>globalThis[co]=D).catch(()=>globalThis[co]=!1)),globalThis[Fc]||(globalThis[Fc]=Kd().then(D=>globalThis[Pc]=D).catch(()=>globalThis[Pc]=!1)),globalThis[Mu]||(globalThis[Mu]=nu().then(D=>globalThis[Ra]=D).catch(()=>globalThis[Ra]=!1));const Ko=(D,S)=>{const R=S?[S]:(0,re.C6)(),H=[];return R.forEach(te=>{te.container.getProvider(D).instances.forEach(Ae=>{H.includes(Ae)||H.push(Ae)})}),H};function Ci(){}class Os{constructor(S,R=Rs){this.zone=S,this.delegate=R}now(){return this.delegate.now()}schedule(S,R,H){const te=this.zone;return this.delegate.schedule(function(Ae){te.runGuarded(()=>{S.apply(this,[Ae])})},R,H)}}class Oa{constructor(S){this.zone=S,this.task=null}call(S,R){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ci,{},Ci,Ci)),R.pipe((0,Au.b)({next:H,complete:H,error:H})).subscribe(S).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let lp=(()=>{class D{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Os(Zone.current)),this.insideAngular=R.run(()=>new Os(Zone.current,Nc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(R){return new(R||D)(d.LFG(d.R0b))},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Ps(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Pa(D){return D.pipe((0,Ns.Q)(Ps().outsideAngular))}function xu(D){return Ps(),function qn(D){return function(R){return(R=R.lift(new Oa(D.ngZone))).pipe((0,Pr.R)(D.outsideAngular),(0,Ns.Q)(D.insideAngular))}}(Ps())(D)}},2090:(pt,Re,U)=>{U.d(Re,{$s:()=>lr,BH:()=>Ge,DV:()=>Jt,Dv:()=>ds,G6:()=>ze,GJ:()=>nn,L:()=>me,LL:()=>fe,Mn:()=>Te,Pz:()=>Gt,Sg:()=>Me,UG:()=>ge,UI:()=>ls,US:()=>ye,Wj:()=>fi,Yr:()=>je,ZB:()=>G,ZR:()=>Ee,b$:()=>it,cI:()=>Qt,d:()=>ke,dS:()=>Xt,eu:()=>Ie,g5:()=>L,gK:()=>Vn,gQ:()=>Ui,h$:()=>ae,hl:()=>q,hu:()=>re,jU:()=>be,lb:()=>To,m9:()=>ri,ne:()=>bt,p$:()=>z,pd:()=>ti,r3:()=>Br,ru:()=>Je,tV:()=>ve,uI:()=>$e,ug:()=>qe,vZ:()=>hi,w1:()=>Ce,w9:()=>mn,xO:()=>us,xb:()=>zt,z$:()=>xe,zI:()=>J,zd:()=>Qs});const re=function($,W){if(!$)throw L(W)},L=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},pe=function($){const W=[];let j=0;for(let K=0;K<$.length;K++){let Y=$.charCodeAt(K);Y<128?W[j++]=Y:Y<2048?(W[j++]=Y>>6|192,W[j++]=63&Y|128):55296==(64512&Y)&&K+1<$.length&&56320==(64512&$.charCodeAt(K+1))?(Y=65536+((1023&Y)<<10)+(1023&$.charCodeAt(++K)),W[j++]=Y>>18|240,W[j++]=Y>>12&63|128,W[j++]=Y>>6&63|128,W[j++]=63&Y|128):(W[j++]=Y>>12|224,W[j++]=Y>>6&63|128,W[j++]=63&Y|128)}return W},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,W){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let Y=0;Y<$.length;Y+=3){const Ne=$[Y],We=Y+1<$.length,ft=We?$[Y+1]:0,vn=Y+2<$.length,en=vn?$[Y+2]:0;let $t=(15&ft)<<2|en>>6,Dn=63&en;vn||(Dn=64,We||($t=64)),K.push(j[Ne>>2],j[(3&Ne)<<4|ft>>4],j[$t],j[Dn])}return K.join("")},encodeString($,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa($):this.encodeByteArray(pe($),W)},decodeString($,W){return this.HAS_NATIVE_SUPPORT&&!W?atob($):function($){const W=[];let j=0,K=0;for(;j<$.length;){const Y=$[j++];if(Y<128)W[K++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Ne=$[j++];W[K++]=String.fromCharCode((31&Y)<<6|63&Ne)}else if(Y>239&&Y<365){const vn=((7&Y)<<18|(63&$[j++])<<12|(63&$[j++])<<6|63&$[j++])-65536;W[K++]=String.fromCharCode(55296+(vn>>10)),W[K++]=String.fromCharCode(56320+(1023&vn))}else{const Ne=$[j++],We=$[j++];W[K++]=String.fromCharCode((15&Y)<<12|(63&Ne)<<6|63&We)}}return W.join("")}(this.decodeStringToByteArray($,W))},decodeStringToByteArray($,W){this.init_();const j=W?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let Y=0;Y<$.length;){const Ne=j[$.charAt(Y++)],ft=Y<$.length?j[$.charAt(Y)]:0;++Y;const en=Y<$.length?j[$.charAt(Y)]:64;++Y;const jt=Y<$.length?j[$.charAt(Y)]:64;if(++Y,null==Ne||null==ft||null==en||null==jt)throw Error();K.push(Ne<<2|ft>>4),64!==en&&(K.push(ft<<4&240|en>>2),64!==jt&&K.push(en<<6&192|jt))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},ae=function($){const W=pe($);return ye.encodeByteArray(W,!0)},me=function($){return ae($).replace(/\./g,"")},ve=function($){try{return ye.decodeString($,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function z($){return G(void 0,$)}function G($,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return W}for(const j in W)!W.hasOwnProperty(j)||!ne(j)||($[j]=G($[j],W[j]));return $}function ne($){return"__proto__"!==$}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,j)=>{this.resolve=W,this.reject=j})}wrapCallback(W){return(j,K)=>{j?this.reject(j):this.resolve(K),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(j):W(j,K))}}}function Me($,W){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=W||"demo-project",Y=$.iat||0,Ne=$.sub||$.user_id;if(!Ne)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const We=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:Y,exp:Y+3600,auth_time:Y,sub:Ne,user_id:Ne,firebase:{sign_in_provider:"custom",identities:{}}},$);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(We)),""].join(".")}function xe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function $e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xe())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function be(){return"object"==typeof self&&self.self===self}function Je(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function it(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ke(){return xe().indexOf("Electron/")>=0}function Ce(){const $=xe();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Te(){return xe().indexOf("MSAppHost/")>=0}function je(){return!1}function ze(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){return"object"==typeof indexedDB}function Ie(){return new Promise(($,W)=>{try{let j=!0;const K="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(K);Y.onsuccess=()=>{Y.result.close(),j||self.indexedDB.deleteDatabase(K),$(!0)},Y.onupgradeneeded=()=>{j=!1},Y.onerror=()=>{var Ne;W((null===(Ne=Y.error)||void 0===Ne?void 0:Ne.message)||"")}}catch(j){W(j)}})}function J(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ee extends Error{constructor(W,j,K){super(j),this.code=W,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,Ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fe.prototype.create)}}class fe{constructor(W,j,K){this.service=W,this.serviceName=j,this.errors=K}create(W,...j){const K=j[0]||{},Y=`${this.service}/${W}`,Ne=this.errors[W],We=Ne?function Fe($,W){return $.replace(vt,(j,K)=>{const Y=W[K];return null!=Y?String(Y):`<${K}?>`})}(Ne,K):"Error";return new Ee(Y,`${this.serviceName}: ${We} (${Y}).`,K)}}const vt=/\{\$([^}]+)}/g;function Qt($){return JSON.parse($)}function Gt($){return JSON.stringify($)}const Xe=function($){let W={},j={},K={},Y="";try{const Ne=$.split(".");W=Qt(ve(Ne[0])||""),j=Qt(ve(Ne[1])||""),Y=Ne[2],K=j.d||{},delete j.d}catch{}return{header:W,claims:j,data:K,signature:Y}},mn=function($){const j=Xe($).claims;return!!j&&"object"==typeof j&&j.hasOwnProperty("iat")},nn=function($){const W=Xe($).claims;return"object"==typeof W&&!0===W.admin};function Br($,W){return Object.prototype.hasOwnProperty.call($,W)}function Jt($,W){if(Object.prototype.hasOwnProperty.call($,W))return $[W]}function zt($){for(const W in $)if(Object.prototype.hasOwnProperty.call($,W))return!1;return!0}function ls($,W,j){const K={};for(const Y in $)Object.prototype.hasOwnProperty.call($,Y)&&(K[Y]=W.call(j,$[Y],Y,$));return K}function hi($,W){if($===W)return!0;const j=Object.keys($),K=Object.keys(W);for(const Y of j){if(!K.includes(Y))return!1;const Ne=$[Y],We=W[Y];if(Rr(Ne)&&Rr(We)){if(!hi(Ne,We))return!1}else if(Ne!==We)return!1}for(const Y of K)if(!j.includes(Y))return!1;return!0}function Rr($){return null!==$&&"object"==typeof $}function us($){const W=[];for(const[j,K]of Object.entries($))Array.isArray(K)?K.forEach(Y=>{W.push(encodeURIComponent(j)+"="+encodeURIComponent(Y))}):W.push(encodeURIComponent(j)+"="+encodeURIComponent(K));return W.length?"&"+W.join("&"):""}function Qs($){const W={};return $.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[Y,Ne]=K.split("=");W[decodeURIComponent(Y)]=decodeURIComponent(Ne)}}),W}function ti($){const W=$.indexOf("?");if(!W)return"";const j=$.indexOf("#",W);return $.substring(W,j>0?j:void 0)}class Ui{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,j){j||(j=0);const K=this.W_;if("string"==typeof W)for(let jt=0;jt<16;jt++)K[jt]=W.charCodeAt(j)<<24|W.charCodeAt(j+1)<<16|W.charCodeAt(j+2)<<8|W.charCodeAt(j+3),j+=4;else for(let jt=0;jt<16;jt++)K[jt]=W[j]<<24|W[j+1]<<16|W[j+2]<<8|W[j+3],j+=4;for(let jt=16;jt<80;jt++){const $t=K[jt-3]^K[jt-8]^K[jt-14]^K[jt-16];K[jt]=4294967295&($t<<1|$t>>>31)}let en,vr,Y=this.chain_[0],Ne=this.chain_[1],We=this.chain_[2],ft=this.chain_[3],vn=this.chain_[4];for(let jt=0;jt<80;jt++){jt<40?jt<20?(en=ft^Ne&(We^ft),vr=1518500249):(en=Ne^We^ft,vr=1859775393):jt<60?(en=Ne&We|ft&(Ne|We),vr=2400959708):(en=Ne^We^ft,vr=3395469782);const $t=(Y<<5|Y>>>27)+en+vn+vr+K[jt]&4294967295;vn=ft,ft=We,We=4294967295&(Ne<<30|Ne>>>2),Ne=Y,Y=$t}this.chain_[0]=this.chain_[0]+Y&4294967295,this.chain_[1]=this.chain_[1]+Ne&4294967295,this.chain_[2]=this.chain_[2]+We&4294967295,this.chain_[3]=this.chain_[3]+ft&4294967295,this.chain_[4]=this.chain_[4]+vn&4294967295}update(W,j){if(null==W)return;void 0===j&&(j=W.length);const K=j-this.blockSize;let Y=0;const Ne=this.buf_;let We=this.inbuf_;for(;Y<j;){if(0===We)for(;Y<=K;)this.compress_(W,Y),Y+=this.blockSize;if("string"==typeof W){for(;Y<j;)if(Ne[We]=W.charCodeAt(Y),++We,++Y,We===this.blockSize){this.compress_(Ne),We=0;break}}else for(;Y<j;)if(Ne[We]=W[Y],++We,++Y,We===this.blockSize){this.compress_(Ne),We=0;break}}this.inbuf_=We,this.total_+=j}digest(){const W=[];let j=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Y=this.blockSize-1;Y>=56;Y--)this.buf_[Y]=255&j,j/=256;this.compress_(this.buf_);let K=0;for(let Y=0;Y<5;Y++)for(let Ne=24;Ne>=0;Ne-=8)W[K]=this.chain_[Y]>>Ne&255,++K;return W}}function bt($,W){const j=new ni($,W);return j.subscribe.bind(j)}class ni{constructor(W,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{W(this)}).catch(K=>{this.error(K)})}next(W){this.forEachObserver(j=>{j.next(W)})}error(W){this.forEachObserver(j=>{j.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,j,K){let Y;if(void 0===W&&void 0===j&&void 0===K)throw new Error("Missing Observer.");Y=function $n($,W){if("object"!=typeof $||null===$)return!1;for(const j of W)if(j in $&&"function"==typeof $[j])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:j,complete:K},void 0===Y.next&&(Y.next=cs),void 0===Y.error&&(Y.error=cs),void 0===Y.complete&&(Y.complete=cs);const Ne=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),Ne}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,W)}sendOne(W,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{j(this.observers[W])}catch(K){typeof console<"u"&&console.error&&console.error(K)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cs(){}const ds=function($,W,j,K){let Y;if(K<W?Y="at least "+W:K>j&&(Y=0===j?"none":"no more than "+j),Y)throw new Error($+" failed: Was called with "+K+(1===K?" argument.":" arguments.")+" Expects "+Y+".")};function Vn($,W){return`${$} failed: ${W} argument `}function fi($,W,j,K){if((!K||j)&&"function"!=typeof j)throw new Error(Vn($,W)+"must be a valid function.")}function To($,W,j,K){if((!K||j)&&("object"!=typeof j||null===j))throw new Error(Vn($,W)+"must be a valid context object.")}const Xt=function($){const W=[];let j=0;for(let K=0;K<$.length;K++){let Y=$.charCodeAt(K);if(Y>=55296&&Y<=56319){const Ne=Y-55296;K++,re(K<$.length,"Surrogate pair missing trail surrogate."),Y=65536+(Ne<<10)+($.charCodeAt(K)-56320)}Y<128?W[j++]=Y:Y<2048?(W[j++]=Y>>6|192,W[j++]=63&Y|128):Y<65536?(W[j++]=Y>>12|224,W[j++]=Y>>6&63|128,W[j++]=63&Y|128):(W[j++]=Y>>18|240,W[j++]=Y>>12&63|128,W[j++]=Y>>6&63|128,W[j++]=63&Y|128)}return W},qe=function($){let W=0;for(let j=0;j<$.length;j++){const K=$.charCodeAt(j);K<128?W++:K<2048?W+=2:K>=55296&&K<=56319?(W+=4,j++):W+=3}return W};function lr($,W=1e3,j=2){const K=W*Math.pow(j,$),Y=Math.round(.5*K*(Math.random()-.5)*2);return Math.min(144e5,K+Y)}function ri($){return $&&$._delegate?$._delegate:$}},4881:(pt,Re,U)=>{var d=U(4650);let re=null;function L(){return re}const ae=new d.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ve(){return(0,d.LFG)(G)}()},providedIn:"platform"}),n})();const z=new d.OlP("Location Initialized");let G=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ge(){return new G((0,d.LFG)(ae))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function $e(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function be(){const n=(0,d.LFG)(ae).location;return new it((0,d.LFG)(me),n&&n.origin||"")}()},providedIn:"root"}),n})();const Je=new d.OlP("appBaseHref");let it=(()=>{class n extends ge{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+$e(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const u=this.prepareExternalUrl(i+$e(o));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){const u=this.prepareExternalUrl(i+$e(o));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(me),d.LFG(Je,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ke=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let u=this.prepareExternalUrl(i+$e(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){let u=this.prepareExternalUrl(i+$e(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(me),d.LFG(Je,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=xe(ze(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+$e(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=$e,n.joinWithSlash=Me,n.stripTrailingSlash=xe,n.\u0275fac=function(t){return new(t||n)(d.LFG(ge))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Te(){return new Ce((0,d.LFG)(ge))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}let Xl=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class hl{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ji=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new hl(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===o?void 0:o);else if(null!==o){const h=r.get(o);r.move(h,u),Un(h,i)}});for(let i=0,o=r.length;i<o;i++){const h=r.get(i).context;h.index=i,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Un(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Un(n,e){n.context.$implicit=e.item}let br=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ii,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class ii{constructor(){this.$implicit=null,this.ngIf=null}}function fl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}class pl{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let eo=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),$i=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new pl(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(eo,9))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),Mo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Cn="browser";function jd(n){return"server"===n}let yl=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Jn((0,d.LFG)(ae),window)}),n})();class Jn{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function xo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const u=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=su(this.window.history)||su(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function su(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ds extends class ko extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){re||(re=n)}(new Ds)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function yi(){return ya=ya||document.querySelector("base"),ya?ya.getAttribute("href"):null}();return null==t?null:function vl(n){so=so||document.createElement("a"),so.setAttribute("href",n);const e=so.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ya=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ld(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let so,ya=null;const ot=new d.OlP("TRANSITION_ID"),vc=[{provide:d.ip1,useFactory:function ou(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[ot,ae,d.zs3],multi:!0}];let au=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ro=new d.OlP("EventManagerPlugins");let No=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const u=i[o];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ro),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class va{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let lu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends lu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const u=this._doc.createElement("style");u.textContent=o,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Vt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Vt))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Vt(n){L().remove(n)}const ba={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Oo=/%COMP%/g;function Ca(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ca(n,i,t):(i=i.replace(Oo,n),t.push(i))}return t}function uu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ts=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ur(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new zi(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new zd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ca(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(No),d.LFG(Se),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ur{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ba[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Fo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Fo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=ba[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ba[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,uu(r)):this.eventManager.addEventListener(e,t,uu(r))}}function Fo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class zi extends ur{constructor(e,t,r,i){super(e),this.component=r;const o=Ca(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function bl(n){return"_ngcontent-%COMP%".replace(Oo,n)}(i+"-"+r.id),this.hostAttr=function Ea(n){return"_nghost-%COMP%".replace(Oo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class zd extends ur{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Ca(i.id,i.styles,[]);for(let u=0;u<o.length;u++){const h=document.createElement("style");h.textContent=o[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let qd=(()=>{class n extends va{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ia=["alt","control","meta","shift"],Da={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ta={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},cu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wl=(()=>{class n extends va{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),u=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,o.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let u="";if(Ia.forEach(m=>{const y=r.indexOf(m);y>-1&&(r.splice(y,1),u+=m+".")}),u+=o,0!=r.length||0===o.length)return null;const h={};return h.domEventName=i,h.fullKey=u,h}static getEventFullKey(t){let r="",i=function Ec(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ta.hasOwnProperty(e)&&(e=Ta[e]))}return Da[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ia.forEach(o=>{o!=i&&cu[o](t)&&(r+=o+".")}),r+=i,r}static eventCallback(t,r,i){return o=>{n.getEventFullKey(o)===t&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ic=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:Cn},{provide:d.g9A,useValue:function du(){Ds.makeCurrent()},multi:!0},{provide:ae,useFactory:function fu(){return(0,d.RDi)(document),document},deps:[]}]),mu=new d.OlP(""),er=[{provide:d.rWj,useClass:class bc{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let o=i.length,u=!1;const h=function(m){u=u||m,o--,0==o&&r(u)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Ss=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function hu(){return new d.qLn},deps:[]},{provide:Ro,useClass:qd,multi:!0,deps:[ae,d.R0b,d.Lbi]},{provide:Ro,useClass:wl,multi:!0,deps:[ae]},{provide:Ts,useClass:Ts,deps:[No,Se,d.AFp]},{provide:d.FYo,useExisting:Ts},{provide:lu,useExisting:Se},{provide:Se,useClass:Se,deps:[ae]},{provide:No,useClass:No,deps:[Ro,d.R0b]},{provide:class wr{},useClass:au,deps:[]},[]];let dn=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:ot,useExisting:d.AFp},vc]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(mu,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Ss,...er],imports:[Mo,d.hGG]}),n})(),gu=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Xf(){return new gu((0,d.LFG)(ae))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let bu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):d.LFG(Xd),r},providedIn:"root"}),n})(),Xd=(()=>{class n extends bu{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new Error("unsafe value used in a script context");case d.q3G.URL:return(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Wi(n){return new Xd(n.get(ae))}(d.LFG(d.zs3)),r},providedIn:"root"}),n})();var tn=U(8996),As=U(7669);function He(...n){const e=(0,As.yG)(n);return(0,tn.D)(n,e)}var tr=U(7579);class nr extends tr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var dr=U(8306);const{isArray:Il}=Array,{getPrototypeOf:wu,prototype:Eu,keys:Cu}=Object;function Sc(n){if(1===n.length){const e=n[0];if(Il(e))return{args:e,keys:null};if(function jo(n){return n&&"object"==typeof n&&wu(n)===Eu}(e)){const t=Cu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ao=U(4671),at=U(4004);const{isArray:Iu}=Array;function Ms(n){return(0,at.U)(e=>function xa(n,e){return Iu(e)?n(...e):n(e)}(n,e))}function Dl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var An=U(5403),Du=U(9672);function bi(...n){const e=(0,As.yG)(n),t=(0,As.jO)(n),{args:r,keys:i}=Sc(n);if(0===r.length)return(0,tn.D)([],e);const o=new dr.y(function Ac(n,e,t=ao.y){return r=>{Tu(e,()=>{const{length:i}=n,o=new Array(i);let u=i,h=i;for(let m=0;m<i;m++)Tu(e,()=>{const y=(0,tn.D)(n[m],e);let C=!1;y.subscribe((0,An.x)(r,T=>{o[m]=T,C||(C=!0,h--),h||r.next(t(o.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Dl(i,u):ao.y));return t?o.pipe(Ms(t)):o}function Tu(n,e,t){n?(0,Du.f)(t,n,e):e()}var wi=U(576);function $o(n,e){const t=(0,wi.m)(n)?n:()=>n,r=i=>i.error(t());return new dr.y(e?i=>e.schedule(r,0,i):r)}const xs=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var hs=U(8189);function Ei(...n){return function Gr(){return(0,hs.J)(1)}()((0,tn.D)(n,(0,As.yG)(n)))}var ks=U(8421);function lo(n){return new dr.y(e=>{(0,ks.Xf)(n()).subscribe(e)})}var Nr=U(515),Mc=U(727),bn=U(4482);function Yt(){return(0,bn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,An.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class op extends dr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,bn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Mc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,An.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Mc.w0.EMPTY)}return e}refCount(){return Yt()(this)}}function Er(n,e){return(0,bn.e)((t,r)=>{let i=null,o=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe((0,An.x)(r,m=>{i?.unsubscribe();let y=0;const C=o++;(0,ks.Xf)(n(m,C)).subscribe(i=(0,An.x)(r,T=>r.next(e?e(m,T,C,y++):T),()=>{i=null,h()}))},()=>{u=!0,h()}))})}function zo(n){return n<=0?()=>Nr.E:(0,bn.e)((e,t)=>{let r=0;e.subscribe((0,An.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function uo(...n){const e=(0,As.yG)(n);return(0,bn.e)((t,r)=>{(e?Ei(n,t,e):Ei(n,t)).subscribe(r)})}function wg(n,e,t,r,i){return(o,u)=>{let h=t,m=e,y=0;o.subscribe((0,An.x)(u,C=>{const T=y++;m=h?n(m,C,T):(h=!0,C),r&&u.next(m)},i&&(()=>{h&&u.next(m),u.complete()})))}}function ka(n,e){return(0,bn.e)(wg(n,e,arguments.length>=2,!0))}function zr(n,e){return(0,bn.e)((t,r)=>{let i=0;t.subscribe((0,An.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ki(n){return(0,bn.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,An.x)(t,void 0,void 0,u=>{o=(0,ks.Xf)(n(u,Ki(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}var qr=U(5577);function Tl(n,e){return(0,wi.m)(e)?(0,qr.z)(n,e,1):(0,qr.z)(n,1)}function zn(n){return n<=0?()=>Nr.E:(0,bn.e)((e,t)=>{let r=[];e.subscribe((0,An.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function xc(n=Sl){return(0,bn.e)((e,t)=>{let r=!1;e.subscribe((0,An.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Sl(){return new xs}function kc(n){return(0,bn.e)((e,t)=>{let r=!1;e.subscribe((0,An.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Mn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zr((i,o)=>n(i,o,r)):ao.y,zo(1),t?kc(e):xc(()=>new xs))}var _n=U(8505);function qo(n){return(0,bn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Or{constructor(e,t){this.id=e,this.url=t}}class Wo extends Or{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rs extends Or{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Rc extends Or{constructor(e,t,r){super(e,t),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Nc extends Or{constructor(e,t,r){super(e,t),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Au extends Or{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ns extends Or{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pr extends Or{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Oc extends Or{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class co extends Or{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eh{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ra{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Mu{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pc{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fc{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Al{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ap{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Lt="primary";class Na{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ko(n){return new Na(n)}const Ci="Redirecting to ",Os="ngNavigationCancelingError";function Oa(n){const e=Error("NavigationCancelingError: "+(n||""));return e[Os]=!0,e}function Ps(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const u=r[o],h=n[o];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function rr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Pa(n[i],e[i]))return!1;return!0}function Pa(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function Fa(n){return Array.prototype.concat.apply([],n)}function xu(n){return n.length>0?n[n.length-1]:null}function hr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ho(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,tn.D)(Promise.resolve(n)):He(n)}const D=!1,R={exact:function Ae(n,e,t){if(!Ii(n.segments,e.segments)||!At(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ae(n.children[r],e.children[r],t))return!1;return!0},subset:ht},H={exact:function ue(n,e){return rr(n,e)},subset:function Ye(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Pa(n[t],e[t]))},ignored:()=>!0};function te(n,e,t){return R[t.paths](n.root,e.root,t.matrixParams)&&H[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ht(n,e,t){return Dt(n,e,e.segments,t)}function Dt(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ii(i,t)||e.hasChildren()||!At(i,t,r))}if(n.segments.length===t.length){if(!Ii(n.segments,t)||!At(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!ht(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Ii(n.segments,i)&&At(n.segments,i,r)&&n.children[Lt])&&Dt(n.children[Lt],e,o,r)}}function At(n,e,t){return e.every((r,i)=>H[t](n[i].parameters,r.parameters))}class lt{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ko(this.queryParams)),this._queryParamMap}toString(){return Va.serialize(this)}}class mt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,hr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zi(this)}}class fr{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ko(this.parameters)),this._parameterMap}toString(){return Vc(this)}}function Ii(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class La{}class xl{parse(e){const t=new Uc(e);return new lt(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${fs(e.root,!0)}`,r=function dE(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ku(t)}=${ku(i)}`).join("&"):`${ku(t)}=${ku(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Jy(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Va=new xl;function Zi(n){return n.segments.map(e=>Vc(e)).join("/")}function fs(n,e){if(!n.hasChildren())return Zi(n);if(e){const t=n.children[Lt]?fs(n.children[Lt],!1):"",r=[];return hr(n.children,(i,o)=>{o!==Lt&&r.push(`${o}:${fs(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Di(n,e){let t=[];return hr(n.children,(r,i)=>{i===Lt&&(t=t.concat(e(r,i)))}),hr(n.children,(r,i)=>{i!==Lt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Lt?[fs(n.children[Lt],!1)]:[`${i}:${fs(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${Zi(n)}/${t[0]}`:`${Zi(n)}/(${t.join("//")})`}}function nh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ku(n){return nh(n).replace(/%3B/gi,";")}function up(n){return nh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ua(n){return decodeURIComponent(n)}function cp(n){return Ua(n.replace(/\+/g,"%20"))}function Vc(n){return`${up(n.path)}${function Eg(n){return Object.keys(n).map(e=>`;${up(e)}=${up(n[e])}`).join("")}(n.parameters)}`}const Cg=/^[^\/()?;=#]+/;function dp(n){const e=n.match(Cg);return e?e[0]:""}const hp=/^[^=?&#]+/,Ig=/^[^&#]+/;class Uc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mt([],{}):new mt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new mt(e,t)),r}parseSegment(){const e=dp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,D);return this.capture(e),new fr(Ua(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=dp(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=dp(this.remaining);i&&(r=i,this.capture(r))}e[Ua(t)]=Ua(r)}parseQueryParam(e){const t=function ev(n){const e=n.match(hp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function rh(n){const e=n.match(Ig);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=cp(t),o=cp(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=dp(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,D);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Lt);const u=this.parseChildren();t[o]=1===Object.keys(u).length?u[Lt]:new mt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,D)}}class kl{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=fp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=fp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=pp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pp(e,this._root).map(t=>t.value)}}function fp(n,e){if(n===e.value)return e;for(const t of e.children){const r=fp(n,t);if(r)return r}return null}function pp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=pp(n,t);if(r.length)return r.unshift(e),r}return[]}class Ba{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Zo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Bc extends kl{constructor(e,t){super(e),this.snapshot=t,_p(this,e)}toString(){return this.snapshot.toString()}}function mp(n,e){const t=function Dg(n,e){const u=new ih([],{},{},"",{},Lt,e,null,n.root,-1,{});return new sh("",new Ba(u,[]))}(n,e),r=new nr([new fr("",{})]),i=new nr({}),o=new nr({}),u=new nr({}),h=new nr(""),m=new Rl(r,i,u,h,o,Lt,e,t.root);return m.snapshot=t.root,new Bc(new Ba(m,[]),t)}class Rl{constructor(e,t,r,i,o,u,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=u,this.component=h,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,at.U)(e=>Ko(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,at.U)(e=>Ko(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ha(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function gp(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ih{constructor(e,t,r,i,o,u,h,m,y,C,T,k){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=u,this.component=h,this.routeConfig=m,this._urlSegment=y,this._lastPathIndex=C,this._correctedLastPathIndex=k??C,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ko(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ko(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class sh extends kl{constructor(e,t){super(t),this.url=e,_p(this,t)}toString(){return yp(this._root)}}function _p(n,e){e.value._routerState=n,e.children.forEach(t=>_p(n,t))}function yp(n){const e=n.children.length>0?` { ${n.children.map(yp).join(", ")} } `:"";return`${n.value}${e}`}function Fs(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,rr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),rr(e.params,t.params)||n.params.next(t.params),function Lc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!rr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),rr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function fo(n,e){const t=rr(n.params,e.params)&&function Ml(n,e){return Ii(n,e)&&n.every((t,r)=>rr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||fo(n.parent,e.parent))}function Ru(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Tg(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ru(n,r,i);return Ru(n,r)})}(n,e,t);return new Ba(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const u=o.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>Ru(n,h)),u}}const r=function nv(n){return new Rl(new nr(n.url),new nr(n.params),new nr(n.queryParams),new nr(n.fragment),new nr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>Ru(n,o));return new Ba(r,i)}}function oh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ls(n){return"object"==typeof n&&null!=n&&n.outlets}function bp(n,e,t,r,i){let o={};if(r&&hr(r,(h,m)=>{o[m]=Array.isArray(h)?h.map(y=>`${y}`):`${h}`}),n===e)return new lt(t,o,i);const u=Sg(n,e,t);return new lt(u,o,i)}function Sg(n,e,t){const r={};return hr(n.children,(i,o)=>{r[o]=i===e?t:Sg(i,e,t)}),new mt(n.segments,r)}class ah{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&oh(r[0]))throw new d.vHH(4003,false);const i=r.find(Ls);if(i&&i!==xu(r))throw new d.vHH(4004,false)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Nu(n,e,t){if(n||(n=new mt([],{})),0===n.segments.length&&n.hasChildren())return $c(n,e,t);const r=function lh(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const u=n.segments[i],h=t[r];if(Ls(h))break;const m=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&y&&"object"==typeof y&&void 0===y.outlets){if(!sv(m,y,u))return o;r+=2}else{if(!sv(m,{},u))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new mt(n.segments.slice(0,r.pathIndex),{});return o.children[Lt]=new mt(n.segments.slice(r.pathIndex),n.children),$c(o,0,i)}return r.match&&0===i.length?new mt(n.segments,{}):r.match&&!n.hasChildren()?uh(n,e,t):r.match?$c(n,0,i):uh(n,e,t)}function $c(n,e,t){if(0===t.length)return new mt(n.segments,{});{const r=function ps(n){return Ls(n[0])?n[0].outlets:{[Lt]:n}}(t),i={};return hr(r,(o,u)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[u]=Nu(n.children[u],e,o))}),hr(n.children,(o,u)=>{void 0===r[u]&&(i[u]=o)}),new mt(n.segments,i)}}function uh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(Ls(o)){const m=fE(o.outlets);return new mt(r,m)}if(0===i&&oh(t[0])){r.push(new fr(n.segments[e].path,iv(t[0]))),i++;continue}const u=Ls(o)?o.outlets[Lt]:`${o}`,h=i<t.length-1?t[i+1]:null;u&&h&&oh(h)?(r.push(new fr(u,iv(h))),i+=2):(r.push(new fr(u,{})),i++)}return new mt(r,{})}function fE(n){const e={};return hr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=uh(new mt([],{}),0,t))}),e}function iv(n){const e={};return hr(n,(t,r)=>e[r]=`${t}`),e}function sv(n,e,t){return n==t.path&&rr(e,t.parameters)}class wp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ja,this.attachRef=null}}class ja{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new wp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}const $a=!1;let Ep=(()=>{class n{constructor(t,r,i,o,u){this.parentContexts=t,this.location=r,this.changeDetector=o,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,$a);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,$a);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,$a);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,$a);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new pE(t,h,i.injector);if(r&&function ch(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(u);this.activated=i.createComponent(y,i.length,m)}else this.activated=i.createComponent(u,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ja),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class pE{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Rl?this.route:e===ja?this.childContexts:this.parent.get(e,t)}}let dh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Ep],encapsulation:2}),n})();function Mg(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Dp(n){const e=n.children&&n.children.map(Dp),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=dh),t}function ms(n){return n.outlet||Lt}function Ga(n,e){const t=n.filter(r=>ms(r)===e);return t.push(...n.filter(r=>ms(r)!==e)),t}function Tp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class lv{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Fs(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Zo(t);e.children.forEach(o=>{const u=o.value.outlet;this.deactivateRoutes(o,i[u],r),delete i[u]}),hr(i,(o,u)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Zo(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Zo(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Zo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Al(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Pc(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(Fs(i),i===o)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),Fs(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=Tp(i.snapshot),m=h?.get(d._Vd)??null;u.attachRef=null,u.route=i,u.resolver=m,u.injector=h,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}function ph(n){return"function"==typeof n}function Nl(n){return n instanceof lt}const Gc=Symbol("INITIAL_VALUE");function Yo(){return Er(n=>bi(n.map(e=>e.pipe(zo(1),uo(Gc)))).pipe(ka((e,t)=>{let r=!1;return t.reduce((i,o,u)=>i!==Gc?i:(o===Gc&&(r=!0),r||!1!==o&&u!==t.length-1&&!Nl(o)?i:o),e)},Gc),zr(e=>e!==Gc),(0,at.U)(e=>Nl(e)?e:!0===e),zo(1)))}const Ou={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Wr(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ou}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Ps)(t,n,e);if(!i)return{...Ou};const o={};hr(i.posParams,(h,m)=>{o[m]=h.path});const u=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function za(n,e,t,r,i="corrected"){if(t.length>0&&function Sp(n,e,t){return t.some(r=>gh(n,e,r)&&ms(r)!==Lt)}(n,t,r)){const u=new mt(e,function Ng(n,e,t,r){const i={};i[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&ms(o)!==Lt){const u=new mt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[ms(o)]=u}return i}(n,e,r,new mt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function Ap(n,e,t){return t.some(r=>gh(n,e,r))}(n,t,r)){const u=new mt(n.segments,function Rg(n,e,t,r,i,o){const u={};for(const h of r)if(gh(n,t,h)&&!i[ms(h)]){const m=new mt([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===o?n.segments.length:e.length,u[ms(h)]=m}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new mt(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function gh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Mp(n,e,t,r){return!!(ms(n)===r||r!==Lt&&gh(e,t,n))&&("**"===n.path||Wr(e,n,t).matched)}function _h(n,e,t){return 0===e.length&&!n.children[t]}const Vs=!1;class zc{constructor(e){this.segmentGroup=e||null}}class Og{constructor(e){this.urlTree=e}}function Pu(n){return $o(new zc(n))}function Pg(n){return $o(new Og(n))}class yh{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=za(this.urlTree.root,[],[],this.config).segmentGroup,t=new mt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Lt).pipe((0,at.U)(o=>this.createUrlTree(In(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ki(o=>{if(o instanceof Og)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof zc?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Lt).pipe((0,at.U)(i=>this.createUrlTree(In(i),e.queryParams,e.fragment))).pipe(Ki(i=>{throw i instanceof zc?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,Vs)}createUrlTree(e,t,r){const i=e.segments.length>0?new mt([],{[Lt]:e}):e;return new lt(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,at.U)(o=>new mt([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,tn.D)(i).pipe(Tl(o=>{const u=r.children[o],h=Ga(t,o);return this.expandSegmentGroup(e,h,u,o).pipe((0,at.U)(m=>({segment:m,outlet:o})))}),ka((o,u)=>(o[u.outlet]=u.segment,o),{}),function Jd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zr((i,o)=>n(i,o,r)):ao.y,zn(1),t?kc(e):xc(()=>new xs))}())}expandSegment(e,t,r,i,o,u){return(0,tn.D)(r).pipe(Tl(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,o,u).pipe(Ki(y=>{if(y instanceof zc)return He(null);throw y}))),Mn(h=>!!h),Ki((h,m)=>{if(h instanceof xs||"EmptyError"===h.name)return _h(t,i,o)?He(new mt([],{})):Pu(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,o,u,h){return Mp(i,t,o,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u):Pu(t):Pu(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Pg(o):this.lineralizeSegments(r,o).pipe((0,qr.z)(u=>{const h=new mt(u,{});return this.expandSegment(e,h,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){const{matched:h,consumedSegments:m,remainingSegments:y,positionalParamSegments:C}=Wr(t,i,o);if(!h)return Pu(t);const T=this.applyRedirectCommands(m,i.redirectTo,C);return i.redirectTo.startsWith("/")?Pg(T):this.lineralizeSegments(i,T).pipe((0,qr.z)(k=>this.expandSegment(e,t,r,k.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){if("**"===r.path)return e=Mg(r,e),r.loadChildren?(r._loadedRoutes?He({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,at.U)(T=>(r._loadedRoutes=T.routes,r._loadedInjector=T.injector,new mt(i,{})))):He(new mt(i,{}));const{matched:u,consumedSegments:h,remainingSegments:m}=Wr(t,r,i);return u?(e=Mg(r,e),this.getChildConfig(e,r,i).pipe((0,qr.z)(C=>{const T=C.injector??e,k=C.routes,{segmentGroup:F,slicedSegments:B}=za(t,h,m,k),ee=new mt(F.segments,F.children);if(0===B.length&&ee.hasChildren())return this.expandChildren(T,k,ee).pipe((0,at.U)(nt=>new mt(h,nt)));if(0===k.length&&0===B.length)return He(new mt(h,{}));const de=ms(r)===o;return this.expandSegment(T,ee,k,B,de?Lt:o,!0).pipe((0,at.U)(Ke=>new mt(h.concat(Ke.segments),Ke.children)))}))):Pu(t)}getChildConfig(e,t,r){return t.children?He({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?He({routes:t._loadedRoutes,injector:t._loadedInjector}):this.runCanLoadGuards(e,t,r).pipe((0,qr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,_n.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function wn(n){return $o(Oa(Vs))}())):He({routes:[],injector:e})}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?He(i.map(u=>{const h=e.get(u);return ho(function cv(n){return n&&ph(n.canLoad)}(h)?h.canLoad(t,r):h(t,r))})).pipe(Yo(),(0,_n.b)(u=>{if(!Nl(u))return;const h=Oa(Ci+this.urlSerializer.serialize(u));throw h.url=u,h}),(0,at.U)(u=>!0===u)):He(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return He(r);if(i.numberOfChildren>1||!i.children[Lt])return $o(new d.vHH(4e3,Vs));i=i.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new lt(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return hr(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[o]=t[h]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let u={};return hr(t.children,(h,m)=>{u[m]=this.createSegmentGroup(e,h,r,i)}),new mt(o,u)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,Vs);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function In(n){const e={};for(const r of Object.keys(n.children)){const o=In(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function xp(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new mt(n.segments.concat(e.segments),e.children)}return n}(new mt(n.segments,e))}class Wc{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Kc{constructor(e,t){this.component=e,this.route=t}}function dv(n,e,t){const r=n._root;return Fu(r,e?e._root:null,t,[r.value])}function bh(n,e,t){return(Tp(e)??t).get(n)}function Fu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Zo(e);return n.children.forEach(u=>{(function hv(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&o.routeConfig===u.routeConfig){const m=function Lg(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ii(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ii(n.url,e.url)||!rr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fo(n,e)||!rr(n.queryParams,e.queryParams);default:return!fo(n,e)}}(u,o,o.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new Wc(r)):(o.data=u.data,o._resolvedData=u._resolvedData),Fu(n,e,o.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Kc(h.outlet.component,u))}else u&&v(e,h,i),i.canActivateChecks.push(new Wc(r)),Fu(n,null,o.component?h?h.children:null:t,r,i)})(u,o[u.value.outlet],t,r.concat([u.value]),i),delete o[u.value.outlet]}),hr(o,(u,h)=>v(u,t.getContext(h),i)),i}function v(n,e,t){const r=Zo(n),i=n.value;hr(r,(o,u)=>{v(o,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Kc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Et{}function _t(n){return new dr.y(e=>e.error(n))}class pr{constructor(e,t,r,i,o,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=u}recognize(){const e=za(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Lt);if(null===t)return null;const r=new ih([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ba(r,t),o=new sh(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(e){const t=e.value,r=Ha(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const o of Object.keys(t.children)){const u=t.children[o],h=Ga(e,o),m=this.processSegmentGroup(h,u,o);if(null===m)return null;r.push(...m)}const i=Eh(r);return function Lu(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const o of e){const u=this.processSegmentAgainstRoute(o,t,r,i);if(null!==u)return u}return _h(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Mp(e,t,r,i))return null;let o,u=[],h=[];if("**"===e.path){const F=r.length>0?xu(r).parameters:{},B=Rp(t)+r.length;o=new ih(r,F,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Vu(e),ms(e),e.component??e._loadedComponent??null,e,qa(t),B,Zc(e),B)}else{const F=Wr(t,e,r);if(!F.matched)return null;u=F.consumedSegments,h=F.remainingSegments;const B=Rp(t)+u.length;o=new ih(u,F.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Vu(e),ms(e),e.component??e._loadedComponent??null,e,qa(t),B,Zc(e),B)}const m=function wh(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:y,slicedSegments:C}=za(t,u,h,m.filter(F=>void 0===F.redirectTo),this.relativeLinkResolution);if(0===C.length&&y.hasChildren()){const F=this.processChildren(m,y);return null===F?null:[new Ba(o,F)]}if(0===m.length&&0===C.length)return[new Ba(o,[])];const T=ms(e)===i,k=this.processSegment(m,y,C,T?Lt:i);return null===k?null:[new Ba(o,k)]}}function kp(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Eh(n){const e=[],t=new Set;for(const r of n){if(!kp(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Eh(r.children);e.push(new Ba(r.value,i))}return e.filter(r=>!t.has(r))}function qa(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Rp(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Vu(n){return n.data||{}}function Zc(n){return n.resolve||{}}const Ih=Symbol("RouteTitle");function _E(n){return"string"==typeof n.title||null===n.title}function gv(n){return Er(e=>{const t=n(e);return t?(0,tn.D)(t).pipe((0,at.U)(()=>e)):He(e)})}class LS extends class FS{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ug=new d.OlP("ROUTES");let Np=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return He(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ho(t.loadComponent()).pipe((0,_n.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),qo(()=>{this.componentLoaders.delete(t)})),i=new op(r,()=>new tr.x).pipe(Yt());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return He({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,at.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,y,C=!1;Array.isArray(h)?y=h:(m=h.create(t).injector,y=Fa(m.get(Ug,[],d.XFs.Self|d.XFs.Optional)));return{routes:y.map(Dp),injector:m}}),qo(()=>{this.childrenLoaders.delete(r)})),u=new op(o,()=>new tr.x).pipe(Yt());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return ho(t()).pipe((0,qr.z)(r=>r instanceof d.YKP||Array.isArray(r)?He(r):(0,tn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class _v{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function VS(n){throw n}function wE(n,e,t){return e.parse("/")}const EE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Yc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Kr=(()=>{class n{constructor(t,r,i,o,u,h,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new tr.x,this.errorHandler=VS,this.malformedUriErrorHandler=wE,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>He(void 0),this.urlHandlingStrategy=new _v,this.routeReuseStrategy=new LS,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(Np),this.configLoader.onLoadEndListener=k=>this.triggerEvent(new Ra(k)),this.configLoader.onLoadStartListener=k=>this.triggerEvent(new eh(k)),this.ngModule=u.get(d.h0i),this.console=u.get(d.c2e);const T=u.get(d.R0b);this.isNgZoneEnabled=T instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function S(){return new lt(new mt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=mp(this.currentUrlTree,this.rootComponentType),this.transitions=new nr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(zr(i=>0!==i.id),(0,at.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Er(i=>{let o=!1,u=!1;return He(i).pipe((0,_n.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Er(h=>{const m=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return IE(h.source)&&(this.browserUrlTree=h.extractedUrl),He(h).pipe(Er(T=>{const k=this.transitions.getValue();return r.next(new Wo(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),k!==this.transitions.getValue()?Nr.E:Promise.resolve(T)}),function Qo(n,e,t,r){return Er(i=>function qc(n,e,t,r,i){return new yh(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,at.U)(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_n.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects}}),function Vg(n,e,t,r,i){return(0,qr.z)(o=>function Sr(n,e,t,r,i="emptyOnly",o="legacy"){try{const u=new pr(n,e,t,r,i,o).recognize();return null===u?_t(new Et):He(u)}catch(u){return _t(u)}}(n,e,o.urlAfterRedirects,t(o.urlAfterRedirects),r,i).pipe((0,at.U)(u=>({...o,targetSnapshot:u}))))}(this.rootComponentType,this.config,T=>this.serializeUrl(T),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_n.b)(T=>{if("eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const F=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(F,T)}this.browserUrlTree=T.urlAfterRedirects}const k=new Au(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(k)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:F,source:B,restoredState:ee,extras:de}=h,Ue=new Wo(k,this.serializeUrl(F),B,ee);r.next(Ue);const Ke=mp(F,this.rootComponentType).snapshot;return He({...h,targetSnapshot:Ke,urlAfterRedirects:F,extras:{...de,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),Nr.E}),(0,_n.b)(h=>{const m=new Ns(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,at.U)(h=>({...h,guards:dv(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function p(n,e){return(0,qr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:u}}=t;return 0===u.length&&0===o.length?He({...t,guardsResult:!0}):function _(n,e,t,r){return(0,tn.D)(n).pipe((0,qr.z)(i=>function Be(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?He(o.map(h=>{const m=bh(h,e,i);return ho(function mh(n){return n&&ph(n.canDeactivate)}(m)?m.canDeactivate(n,e,t,r):m(n,e,t,r)).pipe(Mn())})).pipe(Yo()):He(!0)}(i.component,i.route,t,e,r)),Mn(i=>!0!==i,!0))}(u,r,i,n).pipe((0,qr.z)(h=>h&&function uv(n){return"boolean"==typeof n}(h)?function w(n,e,t,r){return(0,tn.D)(e).pipe(Tl(i=>Ei(function O(n,e){return null!==n&&e&&e(new Mu(n)),He(!0)}(i.route.parent,r),function x(n,e){return null!==n&&e&&e(new Fc(n)),He(!0)}(i.route,r),function ce(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(u=>function vh(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>lo(()=>He(u.guards.map(m=>{const y=bh(m,u.node,t);return ho(function Ol(n){return n&&ph(n.canActivateChild)}(y)?y.canActivateChild(r,n):y(r,n)).pipe(Mn())})).pipe(Yo())));return He(o).pipe(Yo())}(n,i.path,t),function X(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return He(!0);const i=r.map(o=>lo(()=>{const u=bh(o,e,t);return ho(function kg(n){return n&&ph(n.canActivate)}(u)?u.canActivate(e,n):u(e,n)).pipe(Mn())}));return He(i).pipe(Yo())}(n,i.route,t))),Mn(i=>!0!==i,!0))}(r,o,n,e):He(h)),(0,at.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,_n.b)(h=>{if(Nl(h.guardsResult)){const y=Oa(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw y.url=h.guardsResult,y}const m=new Pr(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),zr(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),gv(h=>{if(h.guards.canActivateChecks.length)return He(h).pipe((0,_n.b)(m=>{const y=new Oc(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(y)}),Er(m=>{let y=!1;return He(m).pipe(function Uu(n,e){return(0,qr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return He(t);let o=0;return(0,tn.D)(i).pipe(Tl(u=>function pv(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!_E(i)&&(o[Ih]=i.title),function gE(n,e,t,r){const i=function OS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return He({});const o={};return(0,tn.D)(i).pipe((0,qr.z)(u=>function mv(n,e,t,r){const i=bh(n,e,r);return ho(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe(Mn(),(0,_n.b)(h=>{o[u]=h}))),zn(1),function Su(n){return(0,at.U)(()=>n)}(o),Ki(u=>u instanceof xs?Nr.E:$o(u)))}(o,n,e,r).pipe((0,at.U)(u=>(n._resolvedData=u,n.data=Ha(n,t).resolve,i&&_E(i)&&(n.data[Ih]=i.title),null)))}(u.route,r,n,e)),(0,_n.b)(()=>o++),zn(1),(0,qr.z)(u=>o===i.length?He(t):Nr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_n.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,_n.b)(m=>{const y=new co(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(y)}))}),gv(h=>{const m=y=>{const C=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,_n.b)(T=>{y.component=T}),(0,at.U)(()=>{})));for(const T of y.children)C.push(...m(T));return C};return bi(m(h.targetSnapshot.root)).pipe(kc(),zo(1))}),gv(()=>this.afterPreactivation()),(0,at.U)(h=>{const m=function tv(n,e,t){const r=Ru(n,e._root,t?t._root:void 0);return new Bc(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return{...h,targetRouterState:m}}),(0,_n.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,at.U)(r=>(new lv(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,_n.b)({next(){o=!0},complete(){o=!0}}),qo(()=>{o||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ki(h=>{if(u=!0,function lp(n){return n&&n[Os]}(h)){const m=Nl(h.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const y=new Rc(i.id,this.serializeUrl(i.extractedUrl),h.message);if(r.next(y),m){const C=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||IE(i.source)};this.scheduleNavigation(C,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new Nc(i.id,this.serializeUrl(i.extractedUrl),h);r.next(m);try{i.resolve(this.errorHandler(h))}catch(y){i.reject(y)}}return Nr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const h={...o};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Dp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:u,queryParamsHandling:h,preserveFragment:m}=r,y=i||this.routerState.root,C=m?this.currentUrlTree.fragment:u;let T=null;switch(h){case"merge":T={...this.currentUrlTree.queryParams,...o};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=o||null}return null!==T&&(T=this.removeEmptyProps(T)),function rv(n,e,t,r,i){if(0===t.length)return bp(e.root,e.root,e.root,r,i);const o=function hE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ah(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,u)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return hr(o.outlets,(m,y)=>{h[y]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===u?(o.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,o]},[]);return new ah(t,e,r)}(t);return o.toRoot()?bp(e.root,e.root,new mt([],{}),r,i):function u(m){const y=function jc(n,e,t,r){return n.isAbsolute?new Hc(e.root,!0,0):-1===r?new Hc(t,t===e.root,0):function Ag(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new Hc(r,!1,i-o)}(t,r+(oh(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,m),C=y.processChildren?$c(y.segmentGroup,y.index,o.commands):Nu(y.segmentGroup,y.index,o.commands);return bp(e.root,y.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}(y,this.currentUrlTree,t,T,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Nl(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function CE(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...EE}:!1===r?{...Yc}:r,Nl(t))return te(this.currentUrlTree,t,i);const o=this.parseUrl(t);return te(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Rs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,u){if(this.disposed)return Promise.resolve(!1);let h,m,y;u?(h=u.resolve,m=u.reject,y=u.promise):y=new Promise((k,F)=>{h=k,m=F});const C=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),T=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):T=0,this.setTransition({id:C,targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:h,reject:m,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(k=>Promise.reject(k))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Rc(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function IE(n){return"imperative"!==n}let yv=(()=>{class n{constructor(t,r,i,o,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=u,this.commands=null,this.onChanges=new tr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:(0,d.D6c)(this.skipLocationChange),replaceUrl:(0,d.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,d.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Kr),d.Y36(Rl),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})(),Qc=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new tr.x,this.subscription=t.events.subscribe(o=>{o instanceof Rs&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,o,u){if(0!==t||r||i||o||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:(0,d.D6c)(this.skipLocationChange),replaceUrl:(0,d.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,d.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Kr),d.Y36(Rl),d.Y36(ge))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();class vv{buildTitle(e){let t,r=e.root;for(;void 0!==r;)t=this.getResolvedTitleForRoute(r)??t,r=r.children.find(i=>i.outlet===Lt);return t}getResolvedTitleForRoute(e){return e.data[Ih]}}let TE=(()=>{class n extends vv{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Bg{}let Op=(()=>{class n{constructor(t,r,i,o,u){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(zr(t=>t instanceof Rs),Tl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,d.MMx)(o.providers,t,`Route: ${o.path}`));const u=o._injector??t,h=o._loadedInjector??u;o.loadChildren&&!o._loadedRoutes||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(u,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(h,o.children??o._loadedRoutes))}return(0,tn.D)(i).pipe((0,hs.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):He(null);const o=i.pipe((0,qr.z)(u=>null===u?He(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,tn.D)([o,u]).pipe((0,hs.J)())}return o})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Kr),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Bg),d.LFG(Np))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const wv=new d.OlP("");let Ev=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Wo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Rs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ap&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ap(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Xc=new d.OlP("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),AE=new d.OlP("ROUTER_FORROOT_GUARD"),Cv=new d.OlP(""),HS=[Ce,{provide:La,useClass:xl},{provide:Kr,useFactory:function RE(n,e,t,r,i,o,u={},h,m,y,C){const T=new Kr(null,n,e,t,r,i,Fa(o));return y&&(T.urlHandlingStrategy=y),C&&(T.routeReuseStrategy=C),T.titleStrategy=m??h,function $S(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,T),T},deps:[La,ja,Ce,d.zs3,d.Sil,Ug,Xc,TE,[vv,new d.FiY],[class vE{},new d.FiY],[class PS{},new d.FiY]]},ja,{provide:Rl,useFactory:function GS(n){return n.routerState.root},deps:[Kr]},Np];function jS(){return new d.PXZ("Router",Kr)}let Iv=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[HS,[],kE(t),{provide:AE,useFactory:xE,deps:[[Kr,new d.FiY,new d.tp0]]},{provide:Xc,useValue:r||{}},r?.useHash?{provide:ge,useClass:ke}:{provide:ge,useClass:it},{provide:wv,useFactory:()=>{const n=(0,d.f3M)(Kr),e=(0,d.f3M)(yl),t=(0,d.f3M)(Xc);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ev(n,e,t)}},r?.preloadingStrategy?KS(r.preloadingStrategy):[],{provide:d.PXZ,multi:!0,useFactory:jS},r?.initialNavigation?OE(r):[],[{provide:NE,useFactory:Xo},{provide:d.tb,multi:!0,useExisting:NE}]]}}static forChild(t){return{ngModule:n,providers:[kE(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(AE,8),d.LFG(Kr,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function xE(n){return"guarded"}function kE(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:Ug,multi:!0,useValue:n}]}function Xo(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Kr),i=n.get(PE);null===n.get(Tv,null,d.XFs.Optional)&&r.initialNavigation(),n.get(Cv,null,d.XFs.Optional)?.setUpPreloading(),n.get(wv,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const NE=new d.OlP("");function OE(n){return["disabled"===n.initialNavigation?[{provide:d.ip1,multi:!0,useFactory:()=>{const n=(0,d.f3M)(Kr);return()=>{n.setUpLocationChangeListener()}}},{provide:Tv,useValue:"disabled"}]:[],"enabledBlocking"===n.initialNavigation?[{provide:Tv,useValue:"enabledBlocking"},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:n=>{const e=n.get(z,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(i=>{const o=n.get(Kr),u=n.get(PE);(function r(i){const o=n.get(Kr);o.events.pipe(zr(u=>u instanceof Rs||u instanceof Rc||u instanceof Nc),(0,at.U)(u=>{if(u instanceof Rs)return!0;const h=o.navigationId!==u.id,m=u instanceof Rc&&-1!==u.reason.indexOf(Ci);return!(!h&&!m)&&null}),zr(u=>null!==u),zo(1)).subscribe(()=>{i()})})(()=>{i(!0),t=!0}),o.afterPreactivation=()=>(i(!0),t||u.closed?He(void 0):u),o.initialNavigation()}))}}]:[]]}const PE=new d.OlP("",{factory:()=>new tr.x}),Tv=new d.OlP("");function KS(n){return[Op,{provide:Cv,useExisting:Op},{provide:Bg,useExisting:n}]}var kt=U(6451),Pp=U(5363),LE=U(6063);class VE extends tr.x{constructor(e=1/0,t=1/0,r=LE.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:u}=this;t||(r.push(e),!i&&r.push(o.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let u=0;u<o.length&&!e.closed;u+=r?1:2)e.next(o[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const u=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=u;m+=2)h=m;h&&r.splice(0,h+1)}}}var Sv=U(3099);function UE(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Sv.B)({connector:()=>new VE(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Av(n,e){return(0,wi.m)(e)?Er(()=>n,e):Er(()=>n)}var Mv=U(9468),ln=U(5813),Ar=U(2011);U(5867);var we=U(5861),Yi=U(9681),Us=U(4859),P=U(2090),Ti=U(1877);const Rv=new Map,Nv={activated:!1,tokenObservers:[]},nA={initialized:!1,enabled:!1};function Zr(n){return Rv.get(n)||Nv}function po(n,e){Rv.set(n,e)}function Pl(){return nA}class qE{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function Ka(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const oi=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function WE(n){if(!Zr(n).activated)throw oi.create("use-before-activation",{appName:n.name})}function ZE(n,e){return Fv.apply(this,arguments)}function Fv(){return(Fv=(0,we.Z)(function*({url:n,body:e},t){var r,i;const o={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const F=yield u.getHeartbeatsHeader();F&&(o["X-Firebase-Client"]=F)}const h={method:"POST",body:JSON.stringify(e),headers:o};let m,y;try{m=yield fetch(n,h)}catch(F){throw oi.create("fetch-network-error",{originalErrorMessage:null===(r=F)||void 0===r?void 0:r.message})}if(200!==m.status)throw oi.create("fetch-status-error",{httpStatus:m.status});try{y=yield m.json()}catch(F){throw oi.create("fetch-parse-error",{originalErrorMessage:null===(i=F)||void 0===i?void 0:i.message})}const C=y.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw oi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const T=1e3*Number(C[1]),k=Date.now();return{token:y.token,expireTimeMillis:k+T,issuedAtTimeMillis:k}})).apply(this,arguments)}function aA(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Ah="firebase-app-check-store";let $g=null;function Lv(){return $g||($g=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var o;e(oi.create("storage-open",{originalErrorMessage:null===(o=i.target.error)||void 0===o?void 0:o.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Ah,{keyPath:"compositeKey"})}}catch(r){e(oi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),$g)}function Gg(){return(Gg=(0,we.Z)(function*(n,e){const r=(yield Lv()).transaction(Ah,"readwrite"),o=r.objectStore(Ah).put({compositeKey:n,value:e});return new Promise((u,h)=>{o.onsuccess=m=>{u()},r.onerror=m=>{var y;h(oi.create("storage-set",{originalErrorMessage:null===(y=m.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const Jc=new Ti.Yd("@firebase/app-check");function JE(n,e){return(0,P.hl)()?function cA(n,e){return function QE(n,e){return Gg.apply(this,arguments)}(function Vv(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Jc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Uv(){return Pl().enabled}function eC(){return Bv.apply(this,arguments)}function Bv(){return(Bv=(0,we.Z)(function*(){const n=Pl();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const hP={error:"UNKNOWN_ERROR"};function fP(n){return P.US.encodeString(JSON.stringify(n),!1)}function Mh(n){return tC.apply(this,arguments)}function tC(){return(tC=(0,we.Z)(function*(n,e=!1){const t=n.app;WE(t);const r=Zr(t);let o,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&xh(m)&&(i=m)}if(!e&&i&&xh(i))return{token:i.token};let h,u=!1;if(Uv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ZE(aA(t,yield eC()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),u=!0);const m=yield r.exchangeTokenPromise;return yield JE(t,m),po(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),u=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Jc.warn(m.message):Jc.error(m),o=m}return i?(h={token:i.token},po(t,Object.assign(Object.assign({},r),{token:i})),yield JE(t,i)):h=iC(o),u&&jv(t,h),h})).apply(this,arguments)}function rC(n,e){const t=Zr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),po(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function fA(n){const{app:e}=n,t=Zr(e);let r=t.tokenRefresher;r||(r=function pP(n){const{app:e}=n;return new qE((0,we.Z)(function*(){let r;if(r=Zr(e).token?yield Mh(n,!0):yield Mh(n),r.error)throw r.error}),()=>!0,()=>{const t=Zr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),po(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function jv(n,e){const t=Zr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function xh(n){return n.expireTimeMillis-Date.now()>0}function iC(n){return{token:fP(hP),error:n}}class pA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Zr(this.app);for(const t of e)rC(this.app,t.next);return Promise.resolve()}}const vA="app-check-internal";!function cC(){(0,Yi._registerComponent)(new Us.wA("app-check",n=>function sC(n,e){return new pA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(vA).initialize()})),(0,Yi._registerComponent)(new Us.wA(vA,n=>function oC(n){return{getToken:e=>Mh(n,e),addTokenListener:e=>function nC(n,e,t,r){const{app:i}=n,o=Zr(i),u={next:t,error:r,type:e};if(po(i,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,u]})),o.token&&xh(o.token)){const h=o.token;Promise.resolve().then(()=>{t({token:h.token}),fA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>fA(n))}(n,"INTERNAL",e),removeTokenListener:e=>rC(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Yi.registerVersion)("@firebase/app-check","0.5.11")}();class ed{constructor(){return(0,ln.vb)("app-check")}}typeof window<"u"&&window;var Up=U(127);const Kv=new d.OlP("angularfire2.auth.use-emulator"),Za=new d.OlP("angularfire2.auth.settings"),Jg=new d.OlP("angularfire2.auth.tenant-id"),Zv=new d.OlP("angularfire2.auth.langugage-code"),Bp=new d.OlP("angularfire2.auth.use-device-language"),Yv=new d.OlP("angularfire.auth.persistence"),e_=(n,e,t,r,i,o,u,h)=>(0,Ar.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,o&&m.useDeviceLanguage(),u)for(const[y,C]of Object.entries(u))m.settings[y]=C;return h&&m.setPersistence(h),m},[t,r,i,o,u,h]);let Hp=(()=>{class n{constructor(t,r,i,o,u,h,m,y,C,T,k,F){const B=new tr.x,ee=He(void 0).pipe((0,Pp.Q)(u.outsideAngular),Er(()=>o.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,1451)))),(0,at.U)(()=>(0,Ar.on)(t,o,r)),(0,at.U)(de=>e_(de,o,h,y,C,T,m,k)),UE({bufferSize:1,refCount:!1}));if(jd(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=He(null);else{ee.pipe(Mn()).subscribe();const Ue=ee.pipe(Er(Qe=>Qe.getRedirectResult().then(St=>St,()=>null)),ln.iC,UE({bufferSize:1,refCount:!1})),Ke=ee.pipe(Er(Qe=>new dr.y(St=>({unsubscribe:o.runOutsideAngular(()=>Qe.onAuthStateChanged(Nt=>St.next(Nt),Nt=>St.error(Nt),()=>St.complete()))})))),nt=ee.pipe(Er(Qe=>new dr.y(St=>({unsubscribe:o.runOutsideAngular(()=>Qe.onIdTokenChanged(Nt=>St.next(Nt),Nt=>St.error(Nt),()=>St.complete()))}))));this.authState=Ue.pipe(Av(Ke),(0,Mv.R)(u.outsideAngular),(0,Pp.Q)(u.insideAngular)),this.user=Ue.pipe(Av(nt),(0,Mv.R)(u.outsideAngular),(0,Pp.Q)(u.insideAngular)),this.idToken=this.user.pipe(Er(Qe=>Qe?(0,tn.D)(Qe.getIdToken()):He(null))),this.idTokenResult=this.user.pipe(Er(Qe=>Qe?(0,tn.D)(Qe.getIdTokenResult()):He(null))),this.credential=(0,kt.T)(Ue,B,this.authState.pipe(zr(Qe=>!Qe))).pipe((0,at.U)(Qe=>Qe?.user?Qe:null),(0,Mv.R)(u.outsideAngular),(0,Pp.Q)(u.insideAngular))}return(0,Ar.pX)(this,ee,o,{spy:{apply:(de,Ue,Ke)=>{(de.startsWith("signIn")||de.startsWith("createUser"))&&Ke.then(nt=>B.next(nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ar.Dh),d.LFG(Ar.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(ln.HU),d.LFG(Kv,8),d.LFG(Za,8),d.LFG(Jg,8),d.LFG(Zv,8),d.LFG(Bp,8),d.LFG(Yv,8),d.LFG(ed,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wA=(()=>{class n{constructor(){Up.Z.registerVersion("angularfire",ln.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Hp]}),n})();var Rh=U(4986);function Hu(n,e=ao.y){return n=n??Qv,(0,bn.e)((t,r)=>{let i,o=!0;t.subscribe((0,An.x)(r,u=>{const h=e(u);(o||!n(i,h))&&(o=!1,i=h,r.next(u))}))})}function Qv(n,e){return n===e}var nd=U(5032);U(1451);var n_=U(3942);const Xv="@firebase/database";let $p="";function Jv(n){$p=n}class eb{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class EA{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const CA=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new eb(e)}}catch{}return new EA},rd=CA("localStorage"),i_=CA("sessionStorage"),Nh=new Ti.Yd("@firebase/database"),tb=function(){let n=1;return function(){return n++}}(),pC=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},Gp=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Gp.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let Fr=null,mC=!0;const gC=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Nh.logLevel=Ti.in.VERBOSE,Fr=Nh.log.bind(Nh),e&&i_.set("logging_enabled",!0)):"function"==typeof n?Fr=n:(Fr=null,i_.remove("logging_enabled"))},ai=function(...n){if(!0===mC&&(mC=!1,null===Fr&&!0===i_.get("logging_enabled")&&gC(!0)),Fr){const e=Gp.apply(null,n);Fr(e)}},zp=function(n){return function(...e){ai(n,...e)}},qp=function(...n){const e="FIREBASE INTERNAL ERROR: "+Gp(...n);Nh.error(e)},ea=function(...n){const e=`FIREBASE FATAL ERROR: ${Gp(...n)}`;throw Nh.error(e),new Error(e)},Si=function(...n){const e="FIREBASE WARNING: "+Gp(...n);Nh.warn(e)},s_=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ll="[MIN_NAME]",ta="[MAX_NAME]",id=function(n,e){if(n===e)return 0;if(n===Ll||e===ta)return-1;if(e===Ll||n===ta)return 1;{const t=l_(n),r=l_(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},DA=function(n,e){return n===e?0:n<e?-1:1},Oh=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},o_=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=o_(n[e[r]]);return t+="}",t},yC=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const a_=function(n){(0,P.hu)(!s_(n),"Invalid JSON number");const r=1023;let i,o,u,h,m;0===n?(o=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(m=52;m;m-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(m=11;m;m-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(i?1:0),y.reverse();const C=y.join("");let T="";for(m=0;m<64;m+=8){let k=parseInt(C.substr(m,8),2).toString(16);1===k.length&&(k="0"+k),T+=k}return T.toLowerCase()},vC=new RegExp("^-?(0*)\\d{1,10}$"),bC=-2147483648,nb=2147483647,l_=function(n){if(vC.test(n)){const e=Number(n);if(e>=bC&&e<=nb)return e}return null},ju=function(n){try{n()}catch(e){setTimeout(()=>{throw Si("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Wp=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class u_{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Si(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class rb{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ai("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Si(e)}}let Kp=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const d_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,sb="websocket",ob="long_polling";class f_{constructor(e,t,r,i,o=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=rd.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&rd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ya(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===sb)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==ob)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function EC(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return xn(t,(o,u)=>{i.push(o+"="+u)}),r+i.join("&")}class p_{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const CC={},ab={};function lb(n){const e=n.toString();return CC[e]||(CC[e]=new p_),CC[e]}class NA{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ju(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Qa{constructor(e,t,r,i,o,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zp(e),this.stats_=lb(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),Ya(t,ob,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new NA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new cb((...o)=>{const[u,h,m,y,C]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=m;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[u,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&d_.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qa.forceAllow_=!0}static forceDisallow(){Qa.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Qa.forceAllow_&&(Qa.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=yC(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class cb{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=tb(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=cb.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){ai("frame writing exception"),h.stack&&ai(h.stack),ai(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ai("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ai("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Lr=null;typeof MozWebSocket<"u"?Lr=MozWebSocket:typeof WebSocket<"u"&&(Lr=WebSocket);let mo=(()=>{class n{constructor(t,r,i,o,u,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zp(this.connId),this.stats_=lb(r),this.connURL=n.connectionURL_(r,h,m,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,u){const h={v:"5"};return!(0,P.Yr)()&&typeof location<"u"&&location.hostname&&d_.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),o&&(h.ac=o),u&&(h.p=u),Ya(t,sb,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,rd.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){i={headers:{"User-Agent":`Firebase/5/${$p}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new Lr(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Lr&&!n.forceDisallow_}static previouslyFailed(){return rd.isInMemoryStorage||!0===rd.get("previous_websocket_failure")}markConnectionHealthy(){rd.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=yC(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Xp=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Qa,mo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=mo&&mo.isAvailable();let i=r&&!mo.previouslyFailed();if(t.webSocketOnly&&(r||Si("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[mo];else{const o=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class pb{constructor(e,t,r,i,o,u,h,m,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=m,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zp("c:"+this.id+":"),this.transportManager_=new Xp(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Oh("t",e),r=Oh("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Oh("t",e),r=Oh("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Oh("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?qp("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qp("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Si("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Wp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(rd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class mb{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class gb{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Jp extends gb{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Jp}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class En{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function hn(){return new En("")}function Wt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Vl(n){return n.pieces_.length-n.pieceNum_}function kn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new En(n.pieces_,e)}function __(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ud(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function AC(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new En(e,0)}function Rn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof En)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new En(t,0)}function Bt(n){return n.pieceNum_>=n.pieces_.length}function li(n,e){const t=Wt(n),r=Wt(e);if(null===t)return e;if(t===r)return li(kn(n),kn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function $A(n,e){const t=ud(n,0),r=ud(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=id(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function Uh(n,e){if(Vl(n)!==Vl(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Qi(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Vl(n)>Vl(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class MC{constructor(e,t){this.errorPrefix_=t,this.parts_=ud(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);wb(this)}}function wb(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+zu(n))}function zu(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class em extends gb{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new em}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Bh=1e3;let Hh,qu=(()=>{class n extends mb{constructor(t,r,i,o,u,h,m,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=zp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Bh,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");em.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Jp.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,u={r:o,a:t,b:r};this.log_((0,P.Pz)(u)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const m={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,m=>{const y=m.d,C=m.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",m),"ok"!==C&&this.removeListen_(i,o),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Si(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const u=o.s,h=o.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const u={p:t};o&&(u.q=i,u.t=o),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):qp("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bh,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Bh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Bh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,we.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,y=null;const C=function(){y?y.close():(m=!0,o())};t.realtime_={close:C,sendRequest:function(F){(0,P.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(F)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[F,B]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);m?ai("getToken() completed but was canceled"):(ai("getToken() completed. Creating connection."),t.authToken_=F&&F.accessToken,t.appCheckToken_=B&&B.token,y=new pb(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,ee=>{Si(ee+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(F){t.log_("Failed to get token: "+F),m||(t.repoInfo_.nodeAdmin&&Si(F),C())}}})()}interrupt(t){ai("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ai("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Bh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>o_(u)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new En(t).toString();let o;if(this.listens.has(i)){const u=this.listens.get(i);o=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){ai("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ai("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+$p.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Jp.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Kt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Kt(e,t)}}class tm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Kt(Ll,e),i=new Kt(Ll,t);return 0!==this.compare(r,i)}minPost(){return Kt.MIN}}class Cb extends tm{static get __EMPTY_NODE(){return Hh}static set __EMPTY_NODE(e){Hh=e}compare(e,t){return id(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Kt.MIN}maxPost(){return new Kt(ta,Hh)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Kt(e,Hh)}toString(){return".key"}}const na=new Cb;class nm{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let LC,_o=(()=>{class n{constructor(t,r,i,o,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??Xi.EMPTY_NODE,this.right=u??Xi.EMPTY_NODE}copy(t,r,i,o,u){return new n(t??this.key,r??this.value,i??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const u=i(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===u?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xi.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Xi.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Xi{constructor(e,t=Xi.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Xi(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,_o.BLACK,null,null))}remove(e){return new Xi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_o.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new nm(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new nm(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new nm(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new nm(this.root_,null,this.comparator_,!0,e)}}function FC(n,e){return id(n.name,e.name)}function y_(n,e){return id(n,e)}Xi.EMPTY_NODE=new class PC{copy(e,t,r,i,o){return this}insert(e,t,r){return new _o(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const VC=function(n){return"number"==typeof n?"number:"+a_(n):"string:"+n},Ib=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===LC||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===LC||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let UC,Db,BC,Wn=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ib(this.priorityNode_)}static set __childrenNodeConstructor(t){UC=t}static get __childrenNodeConstructor(){return UC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Bt(t)?this:".priority"===Wt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Wt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===Vl(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(kn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+VC(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?a_(this.value_):this.value_,this.lazyHash_=pC(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(o>=0,"Unknown leaf type: "+r),(0,P.hu)(u>=0,"Unknown leaf type: "+i),o===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Nn=new class WA extends tm{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?id(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Kt.MIN}maxPost(){return new Kt(ta,new Wn("[PRIORITY-POST]",BC))}makePost(e,t){const r=Db(e);return new Kt(t,new Wn("[PRIORITY-POST]",r))}toString(){return".priority"}},jC=Math.log(2);class jh{constructor(e){this.count=parseInt(Math.log(e+1)/jC,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const v_=function(n,e,t,r){n.sort(e);const i=function(m,y){const C=y-m;let T,k;if(0===C)return null;if(1===C)return T=n[m],k=t?t(T):T,new _o(k,T.node,_o.BLACK,null,null);{const F=parseInt(C/2,10)+m,B=i(m,F),ee=i(F+1,y);return T=n[F],k=t?t(T):T,new _o(k,T.node,_o.BLACK,B,ee)}},h=function(m){let y=null,C=null,T=n.length;const k=function(B,ee){const de=T-B,Ue=T;T-=B;const Ke=i(de+1,Ue),nt=n[de],Qe=t?t(nt):nt;F(new _o(Qe,nt.node,ee,null,Ke))},F=function(B){y?(y.left=B,y=B):(C=B,y=B)};for(let B=0;B<m.count;++B){const ee=m.nextBitIsOne(),de=Math.pow(2,m.count-(B+1));ee?k(de,_o.BLACK):(k(de,_o.BLACK),k(de,_o.RED))}return C}(new jh(n.length));return new Xi(r||e,h)};let Tb;const cd={};class Ul{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(cd&&Nn,"ChildrenNode.ts has not been loaded"),Tb=Tb||new Ul({".priority":cd},{".priority":Nn}),Tb}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Xi?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==na,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(Kt.Wrap);let h,u=o.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=o.getNext();h=i?v_(r,e.getCompare()):cd;const m=e.toString(),y=Object.assign({},this.indexSet_);y[m]=e;const C=Object.assign({},this.indexes_);return C[m]=h,new Ul(C,y)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,o)=>{const u=(0,P.DV)(this.indexSet_,o);if((0,P.hu)(u,"Missing index implementation for "+o),i===cd){if(u.isDefinedOn(e.node)){const h=[],m=t.getIterator(Kt.Wrap);let y=m.getNext();for(;y;)y.name!==e.name&&h.push(y),y=m.getNext();return h.push(e),v_(h,u.getCompare())}return cd}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new Kt(e.name,h))),m.insert(e,e.node)}});return new Ul(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===cd)return i;{const o=t.get(e.name);return o?i.remove(new Kt(e.name,o)):i}});return new Ul(r,this.indexSet_)}}let $h,Ht=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Ib(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $h||($h=new n(new Xi(y_),null,Ul.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$h}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?$h:r}}getChild(t){const r=Wt(t);return null===r?this:this.getImmediateChild(r).getChild(kn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Kt(t,r);let o,u;r.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=o.isEmpty()?$h:this.priorityNode_;return new n(o,h,u)}}updateChild(t,r){const i=Wt(t);if(null===i)return r;{(0,P.hu)(".priority"!==Wt(t)||1===Vl(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(kn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,u=!0;if(this.forEachChild(Nn,(h,m)=>{r[h]=m.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):u=!1}),!t&&u&&o<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+VC(this.getPriority().val())+":"),this.forEachChild(Nn,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":pC(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const u=o.getPredecessorKey(new Kt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Kt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Kt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Kt.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Kt.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===dd?-1:0}withIndex(t){if(t===na||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===na||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Nn),o=r.getIterator(Nn);let u=i.getNext(),h=o.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=o.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===na?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const dd=new class Sb extends Ht{constructor(){super(new Xi(y_),Ht.EMPTY_NODE,Ul.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ht.EMPTY_NODE}isEmpty(){return!1}};function sr(n,e=null){if(null===n)return Ht.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Wn(n,sr(e));if(n instanceof Array){let t=Ht.EMPTY_NODE;return xn(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const o=sr(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(sr(e))}{const t=[];let r=!1;if(xn(n,(u,h)=>{if("."!==u.substring(0,1)){const m=sr(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new Kt(u,m)))}}),0===t.length)return Ht.EMPTY_NODE;const o=v_(t,FC,u=>u.name,y_);if(r){const u=v_(t,Nn.getCompare());return new Ht(o,sr(e),new Ul({".priority":u},{".priority":Nn}))}return new Ht(o,sr(e),Ul.Default)}}Object.defineProperties(Kt,{MIN:{value:new Kt(Ll,Ht.EMPTY_NODE)},MAX:{value:new Kt(ta,dd)}}),Cb.__EMPTY_NODE=Ht.EMPTY_NODE,Wn.__childrenNodeConstructor=Ht,function zA(n){LC=n}(dd),function HC(n){BC=n}(dd),function qA(n){Db=n}(sr);class Ab extends tm{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!Bt(e)&&".priority"!==Wt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?id(e.name,t.name):o}makePost(e,t){const r=sr(e),i=Ht.EMPTY_NODE.updateChild(this.indexPath_,r);return new Kt(t,i)}maxPost(){const e=Ht.EMPTY_NODE.updateChild(this.indexPath_,dd);return new Kt(ta,e)}toString(){return ud(this.indexPath_,0).join("/")}}const Bs=new class el extends tm{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?id(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Kt.MIN}maxPost(){return Kt.MAX}makePost(e,t){const r=sr(e);return new Kt(t,r)}toString(){return".value"}},Ai="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",KA=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=Ai.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let u=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=Ai.charAt(e[i]);return(0,P.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),GC=function(n){if(n===""+nb)return"-";const e=l_(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return ta;const o=Ai.charAt(Ai.indexOf(t[r])+1);return t[r]=o,t.slice(0,r+1).join("")},zC=function(n){if(n===""+bC)return Ll;const e=l_(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+nb:(delete t[t.length-1],t.join("")):(t[t.length-1]=Ai.charAt(Ai.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function w_(n){return{type:"value",snapshotNode:n}}function tl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function rm(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Gh(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class E_{constructor(e){this.index_=e}updateChild(e,t,r,i,o,u){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(rm(t,h)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(tl(t,r)):u.trackChildChange(Gh(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Nn,(i,o)=>{t.hasChild(i)||r.trackChildChange(rm(i,o))}),t.isLeafNode()||t.forEachChild(Nn,(i,o)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(o)||r.trackChildChange(Gh(i,o,u))}else r.trackChildChange(tl(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ht.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class zh{constructor(e){this.indexedFilter_=new E_(e.getIndex()),this.index_=e.getIndex(),this.startPost_=zh.getStartPost_(e),this.endPost_=zh.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,o,u){return this.matches(new Kt(t,r))||(r=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ht.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ht.EMPTY_NODE);const o=this;return t.forEachChild(Nn,(u,h)=>{o.matches(new Kt(u,h))||(i=i.updateImmediateChild(u,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class C_{constructor(e){this.rangedFilter_=new zh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,o,u){return this.rangedFilter_.matches(new Kt(t,r))||(r=Ht.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,u):this.fullLimitUpdateChild_(e,t,r,o,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=Ht.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;o.hasNext()&&u<this.limit_;){const h=o.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(h.name,h.node),u++}}else{let o,u,h,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Ht.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const T=this.index_.getCompare();h=(k,F)=>T(F,k)}else m=i.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,C=!1;for(;m.hasNext();){const T=m.getNext();!C&&h(o,T)<=0&&(C=!0),C&&y<this.limit_&&h(T,u)<=0?y++:i=i.updateImmediateChild(T.name,Ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let u;if(this.reverse_){const T=this.index_.getCompare();u=(k,F)=>T(F,k)}else u=this.index_.getCompare();const h=e;(0,P.hu)(h.numChildren()===this.limit_,"");const m=new Kt(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(m);if(h.hasChild(t)){const T=h.getImmediateChild(t);let k=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=k&&(k.name===t||h.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const F=null==k?1:u(k,m);if(C&&!r.isEmpty()&&F>=0)return o?.trackChildChange(Gh(t,r,T)),h.updateImmediateChild(t,r);{o?.trackChildChange(rm(t,T));const ee=h.updateImmediateChild(t,Ht.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(o?.trackChildChange(tl(k.name,k.node)),ee.updateImmediateChild(k.name,k.node)):ee}}return r.isEmpty()?e:C&&u(y,m)>=0?(null!=o&&(o.trackChildChange(rm(y.name,y.node)),o.trackChildChange(tl(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Ht.EMPTY_NODE)):e}}class I_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ll}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ta}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Nn}copy(){const e=new I_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function qh(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function D_(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function im(n,e){const t=n.copy();return t.index_=e,t}function Rb(n){const e={};if(n.isDefault())return e;let t;return n.index_===Nn?t="$priority":n.index_===Bs?t="$value":n.index_===na?t="$key":((0,P.hu)(n.index_ instanceof Ab,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Nb(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Nn&&(e.i=n.index_.toString()),e}class sm extends mb{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=zp("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=sm.getListenId_(e,r),h={};this.listens_[u]=h;const m=Rb(e._queryParams);this.restRequest_(o+".json",m,(y,C)=>{let T=C;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(o,T,!1,r),(0,P.DV)(this.listens_,u)===h){let k;k=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(k,null)}})}unlisten(e,t){const r=sm.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Rb(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(o,u)=>{let h=u;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,P.cI)(h.responseText)}catch{Si("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&Si("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class ZC{constructor(){this.rootNode_=Ht.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function T_(){return{value:null,children:new Map}}function Wh(n,e,t){if(Bt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Wt(e);n.children.has(r)||n.children.set(r,T_()),Wh(n.children.get(r),e=kn(e),t)}}function Ob(n,e){if(Bt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Nn,(r,i)=>{Wh(n,new En(r),i)}),Ob(n,e)}}if(n.children.size>0){const t=Wt(e);return e=kn(e),n.children.has(t)&&Ob(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Pb(n,e,t){null!==n.value?t(e,n.value):function YA(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Pb(i,new En(e.toString()+"/"+r),t)})}class QA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&xn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class eM{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new QA(e);const r=1e4+2e4*Math.random();Wp(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;xn(e,(i,o)=>{o>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Wp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var yo=(()=>{return(n=yo||(yo={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",yo;var n})();function Vb(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class S_{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=yo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Bt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new En(e));return new S_(hn(),t,this.revert)}}return(0,P.hu)(Wt(this.path)===e,"operationForChild called for unrelated child."),new S_(kn(this.path),this.affectedTree,this.revert)}}class om{constructor(e,t){this.source=e,this.path=t,this.type=yo.LISTEN_COMPLETE}operationForChild(e){return Bt(this.path)?new om(this.source,hn()):new om(this.source,kn(this.path))}}class hd{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=yo.OVERWRITE}operationForChild(e){return Bt(this.path)?new hd(this.source,hn(),this.snap.getImmediateChild(e)):new hd(this.source,kn(this.path),this.snap)}}class Kh{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=yo.MERGE}operationForChild(e){if(Bt(this.path)){const t=this.children.subtree(new En(e));return t.isEmpty()?null:t.value?new hd(this.source,hn(),t.value):new Kh(this.source,hn(),t)}return(0,P.hu)(Wt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Kh(this.source,kn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Bl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Bt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Wt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class QC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Zh(n,e,t,r,i,o){const u=r.filter(h=>h.type===t);u.sort((h,m)=>function eI(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new Kt(e.childName,e.snapshotNode),i=new Kt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),u.forEach(h=>{const m=function JC(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,o);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(m,n.query_))})})}function am(n,e){return{eventCache:n,serverCache:e}}function Yh(n,e,t,r){return am(new Bl(e,t,r),n.serverCache)}function Ub(n,e,t,r){return am(n.eventCache,new Bl(e,t,r))}function Qh(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Wu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Hl;class Fn{constructor(e,t=(()=>(Hl||(Hl=new Xi(DA)),Hl))()){this.value=e,this.children=t}static fromObject(e){let t=new Fn(null);return xn(e,(r,i)=>{t=t.set(new En(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:hn(),value:this.value};if(Bt(e))return null;{const r=Wt(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(kn(e),t);return null!=o?{path:Rn(new En(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Bt(e))return this;{const t=Wt(e),r=this.children.get(t);return null!==r?r.subtree(kn(e)):new Fn(null)}}set(e,t){if(Bt(e))return new Fn(t,this.children);{const r=Wt(e),o=(this.children.get(r)||new Fn(null)).set(kn(e),t),u=this.children.insert(r,o);return new Fn(this.value,u)}}remove(e){if(Bt(e))return this.children.isEmpty()?new Fn(null):new Fn(null,this.children);{const t=Wt(e),r=this.children.get(t);if(r){const i=r.remove(kn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new Fn(null):new Fn(this.value,o)}return this}}get(e){if(Bt(e))return this.value;{const t=Wt(e),r=this.children.get(t);return r?r.get(kn(e)):null}}setTree(e,t){if(Bt(e))return t;{const r=Wt(e),o=(this.children.get(r)||new Fn(null)).setTree(kn(e),t);let u;return u=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Fn(this.value,u)}}fold(e){return this.fold_(hn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Rn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,hn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Bt(e))return null;{const o=Wt(e),u=this.children.get(o);return u?u.findOnPath_(kn(e),Rn(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,hn(),t)}foreachOnPath_(e,t,r){if(Bt(e))return this;{this.value&&r(t,this.value);const i=Wt(e),o=this.children.get(i);return o?o.foreachOnPath_(kn(e),Rn(t,i),r):new Fn(null)}}foreach(e){this.foreach_(hn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Rn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Mi{constructor(e){this.writeTree_=e}static empty(){return new Mi(new Fn(null))}}function A_(n,e,t){if(Bt(e))return new Mi(new Fn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const u=li(i,e);return o=o.updateChild(u,t),new Mi(n.writeTree_.set(i,o))}{const i=new Fn(t),o=n.writeTree_.setTree(e,i);return new Mi(o)}}}function lm(n,e,t){let r=n;return xn(t,(i,o)=>{r=A_(r,Rn(e,i),o)}),r}function nM(n,e){if(Bt(e))return Mi.empty();{const t=n.writeTree_.setTree(e,new Fn(null));return new Mi(t)}}function M_(n,e){return null!=Ku(n,e)}function Ku(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(li(t.path,e)):null}function rM(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Nn,(r,i)=>{e.push(new Kt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Kt(r,i.value))}),e}function yt(n,e){if(Bt(e))return n;{const t=Ku(n,e);return new Mi(null!=t?new Fn(t):n.writeTree_.subtree(e))}}function Bb(n){return n.writeTree_.isEmpty()}function Xh(n,e){return tI(hn(),n.writeTree_,e)}function tI(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,P.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=tI(Rn(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Rn(n,".priority"),r)),t}}function jl(n,e){return Gb(e,n)}function TP(n,e){if(n.snap)return Qi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Qi(Rn(n.path,t),e))return!0;return!1}function rI(n){return n.visible}function iI(n,e,t){let r=Mi.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const u=o.path;let h;if(o.snap)Qi(t,u)?(h=li(t,u),r=A_(r,h,o.snap)):Qi(u,t)&&(h=li(u,t),r=A_(r,hn(),o.snap.getChild(h)));else{if(!o.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(Qi(t,u))h=li(t,u),r=lm(r,h,o.children);else if(Qi(u,t))if(h=li(u,t),Bt(h))r=lm(r,hn(),o.children);else{const m=(0,P.DV)(o.children,Wt(h));if(m){const y=m.getChild(kn(h));r=A_(r,hn(),y)}}}}}return r}function Hb(n,e,t,r,i){if(r||i){const o=yt(n.visibleWrites,e);return!i&&Bb(o)?t:i||null!=t||M_(o,hn())?Xh(iI(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Qi(y.path,e)||Qi(e,y.path))},e),t||Ht.EMPTY_NODE):null}{const o=Ku(n.visibleWrites,e);if(null!=o)return o;{const u=yt(n.visibleWrites,e);return Bb(u)?t:null!=t||M_(u,hn())?Xh(u,t||Ht.EMPTY_NODE):null}}}function Zu(n,e,t,r){return Hb(n.writeTree,n.treePath,e,t,r)}function jb(n,e){return function sI(n,e,t){let r=Ht.EMPTY_NODE;const i=Ku(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Nn,(o,u)=>{r=r.updateImmediateChild(o,u)}),r;if(t){const o=yt(n.visibleWrites,e);return t.forEachChild(Nn,(u,h)=>{const m=Xh(yt(o,new En(u)),h);r=r.updateImmediateChild(u,m)}),rM(o).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return rM(yt(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function lI(n,e,t,r){return function oI(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Rn(e,t);if(M_(n.visibleWrites,o))return null;{const u=yt(n.visibleWrites,o);return Bb(u)?i.getChild(t):Xh(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function R_(n,e){return function sM(n,e){return Ku(n.visibleWrites,e)}(n.writeTree,Rn(n.treePath,e))}function O_(n,e,t){return function aI(n,e,t,r){const i=Rn(e,t),o=Ku(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?Xh(yt(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function $b(n,e){return Gb(Rn(n.treePath,e),n.writeTree)}function Gb(n,e){return{treePath:n,writeTree:e}}class lM{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,Gh(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,rm(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,tl(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Gh(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Jh=new class um{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class zb{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Bl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return O_(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wu(this.viewCache_),o=function N_(n,e,t,r,i,o){return function oM(n,e,t,r,i,o,u){let h;const m=yt(n.visibleWrites,e),y=Ku(m,hn());if(null!=y)h=y;else{if(null==t)return[];h=Xh(m,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const C=[],T=u.getCompare(),k=o?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let F=k.getNext();for(;F&&C.length<i;)0!==T(F,r)&&C.push(F),F=k.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function qb(n,e,t,r,i,o){const u=e.eventCache;if(null!=R_(r,t))return e;{let h,m;if(Bt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Wu(e),T=jb(r,y instanceof Ht?y:Ht.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),T,o)}else{const y=Zu(r,Wu(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const y=Wt(t);if(".priority"===y){(0,P.hu)(1===Vl(t),"Can't have a priority with additional path components");const C=u.getNode();m=e.serverCache.getNode();const T=lI(r,t,C,m);h=null!=T?n.filter.updatePriority(C,T):u.getNode()}else{const C=kn(t);let T;if(u.isCompleteForChild(y)){m=e.serverCache.getNode();const k=lI(r,t,u.getNode(),m);T=null!=k?u.getNode().getImmediateChild(y).updateChild(C,k):u.getNode().getImmediateChild(y)}else T=O_(r,y,e.serverCache);h=null!=T?n.filter.updateChild(u.getNode(),y,T,C,i,o):u.getNode()}}return Yh(e,h,u.isFullyInitialized()||Bt(t),n.filter.filtersNodes())}}function P_(n,e,t,r,i,o,u,h){const m=e.serverCache;let y;const C=u?n.filter:n.filter.getIndexedFilter();if(Bt(t))y=C.updateFullNode(m.getNode(),r,null);else if(C.filtersNodes()&&!m.isFiltered()){const F=m.getNode().updateChild(t,r);y=C.updateFullNode(m.getNode(),F,null)}else{const F=Wt(t);if(!m.isCompleteForPath(t)&&Vl(t)>1)return e;const B=kn(t),de=m.getNode().getImmediateChild(F).updateChild(B,r);y=".priority"===F?C.updatePriority(m.getNode(),de):C.updateChild(m.getNode(),F,de,B,Jh,null)}const T=Ub(e,y,m.isFullyInitialized()||Bt(t),C.filtersNodes());return qb(n,T,t,i,new zb(i,T,o),h)}function F_(n,e,t,r,i,o,u){const h=e.eventCache;let m,y;const C=new zb(i,e,o);if(Bt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),m=Yh(e,y,!0,n.filter.filtersNodes());else{const T=Wt(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),r),m=Yh(e,y,h.isFullyInitialized(),h.isFiltered());else{const k=kn(t),F=h.getNode().getImmediateChild(T);let B;if(Bt(k))B=r;else{const ee=C.getCompleteChild(T);B=null!=ee?".priority"===__(k)&&ee.getChild(AC(k)).isEmpty()?ee:ee.updateChild(k,r):Ht.EMPTY_NODE}m=F.equals(B)?e:Yh(e,n.filter.updateChild(h.getNode(),T,B,k,C,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function dI(n,e){return n.eventCache.isCompleteForChild(e)}function hM(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function hI(n,e,t,r,i,o,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,m=e;y=Bt(t)?r:new Fn(null).setTree(t,r);const C=e.serverCache.getNode();return y.children.inorderTraversal((T,k)=>{if(C.hasChild(T)){const B=hM(0,e.serverCache.getNode().getImmediateChild(T),k);m=P_(n,m,new En(T),B,i,o,u,h)}}),y.children.inorderTraversal((T,k)=>{const F=!e.serverCache.isCompleteForChild(T)&&void 0===k.value;if(!C.hasChild(T)&&!F){const ee=hM(0,e.serverCache.getNode().getImmediateChild(T),k);m=P_(n,m,new En(T),ee,i,o,u,h)}}),m}class L_{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new E_(r.getIndex()),o=function qC(n){return n.loadsAllData()?new E_(n.getIndex()):n.hasLimit()?new C_(n):new zh(n)}(r);this.processor_=function uM(n){return{filter:n}}(o);const u=t.serverCache,h=t.eventCache,m=i.updateFullNode(Ht.EMPTY_NODE,u.getNode(),null),y=o.updateFullNode(Ht.EMPTY_NODE,h.getNode(),null),C=new Bl(m,u.isFullyInitialized(),i.filtersNodes()),T=new Bl(y,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=am(T,C),this.eventGenerator_=new QC(this.query_)}get query(){return this.query_}}function pI(n,e){const t=Wu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Bt(e)&&!t.getImmediateChild(Wt(e)).isEmpty())?t.getChild(e):null}function ef(n){return 0===n.eventRegistrations_.length}function mI(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const u=o.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const u=n.eventRegistrations_[o];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function gI(n,e,t,r){e.type===yo.MERGE&&null!==e.source.queryId&&((0,P.hu)(Wu(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(Qh(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function uI(n,e,t,r,i){const o=new lM;let u,h;if(t.type===yo.OVERWRITE){const y=t;y.source.fromUser?u=F_(n,e,y.path,y.snap,r,i,o):((0,P.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!Bt(y.path),u=P_(n,e,y.path,y.snap,r,i,h,o))}else if(t.type===yo.MERGE){const y=t;y.source.fromUser?u=function dM(n,e,t,r,i,o,u){let h=e;return r.foreach((m,y)=>{const C=Rn(t,m);dI(e,Wt(C))&&(h=F_(n,h,C,y,i,o,u))}),r.foreach((m,y)=>{const C=Rn(t,m);dI(e,Wt(C))||(h=F_(n,h,C,y,i,o,u))}),h}(n,e,y.path,y.children,r,i,o):((0,P.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),u=hI(n,e,y.path,y.children,r,i,h,o))}else if(t.type===yo.ACK_USER_WRITE){const y=t;u=y.revert?function fI(n,e,t,r,i,o){let u;if(null!=R_(r,t))return e;{const h=new zb(r,e,i),m=e.eventCache.getNode();let y;if(Bt(t)||".priority"===Wt(t)){let C;if(e.serverCache.isFullyInitialized())C=Zu(r,Wu(e));else{const T=e.serverCache.getNode();(0,P.hu)(T instanceof Ht,"serverChildren would be complete if leaf node"),C=jb(r,T)}y=n.filter.updateFullNode(m,C,o)}else{const C=Wt(t);let T=O_(r,C,e.serverCache);null==T&&e.serverCache.isCompleteForChild(C)&&(T=m.getImmediateChild(C)),y=null!=T?n.filter.updateChild(m,C,T,kn(t),h,o):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(m,C,Ht.EMPTY_NODE,kn(t),h,o):m,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Zu(r,Wu(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,o)))}return u=e.serverCache.isFullyInitialized()||null!=R_(r,hn()),Yh(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,o):function SP(n,e,t,r,i,o,u){if(null!=R_(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(Bt(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return P_(n,e,t,m.getNode().getChild(t),i,o,h,u);if(Bt(t)){let y=new Fn(null);return m.getNode().forEachChild(na,(C,T)=>{y=y.set(new En(C),T)}),hI(n,e,t,y,i,o,h,u)}return e}{let y=new Fn(null);return r.foreach((C,T)=>{const k=Rn(t,C);m.isCompleteForPath(k)&&(y=y.set(C,m.getNode().getChild(k)))}),hI(n,e,t,y,i,o,h,u)}}(n,e,y.path,y.affectedTree,r,i,o)}else{if(t.type!==yo.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);u=function AP(n,e,t,r,i){const o=e.serverCache;return qb(n,Ub(e,o.getNode(),o.isFullyInitialized()||Bt(t),o.isFiltered()),t,r,Jh,i)}(n,e,t.path,r,o)}const m=o.getChanges();return function cI(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Qh(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(w_(Qh(e)))}}(e,u,m),{viewCache:u,changes:m}}(n.processor_,i,e,t,r);return function cM(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,P.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,_I(n,o.changes,o.viewCache.eventCache.getNode(),null)}function _I(n,e,t,r){return function XC(n,e,t,r){const i=[],o=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(function ZA(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),Zh(n,i,"child_removed",e,r,t),Zh(n,i,"child_added",e,r,t),Zh(n,i,"child_moved",o,r,t),Zh(n,i,"child_changed",e,r,t),Zh(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let cm,B_;class yI{constructor(){this.views=new Map}}function V_(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,P.hu)(null!=o,"SyncTree gave us an op for an invalid query."),gI(o,e,t,r)}{let o=[];for(const u of n.views.values())o=o.concat(gI(u,e,t,r));return o}}function Wb(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=Zu(t,i?r:null),m=!1;h?m=!0:r instanceof Ht?(h=jb(t,r),m=!1):(h=Ht.EMPTY_NODE,m=!1);const y=am(new Bl(h,m,!1),new Bl(r,i,!1));return new L_(e,y)}return u}function Kb(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Yu(n,e){let t=null;for(const r of n.views.values())t=t||pI(r,e);return t}function U_(n,e){return e._queryParams.loadsAllData()?dm(n):n.views.get(e._queryIdentifier)}function bI(n,e){return null!=U_(n,e)}function $l(n){return null!=dm(n)}function dm(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Zb=1;class wI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fn(null),this.pendingWriteTree_=function aM(){return{visibleWrites:Mi.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function H_(n,e,t,r,i){return function iM(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=A_(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?nf(n,new hd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Qu(n,e,t=!1){const r=function k_(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function mr(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&TP(h,r.path)?i=!1:Qi(r.path,h.path)&&(o=!0)),u--}return!!i&&(o?(function nI(n){n.visibleWrites=iI(n.allWrites,rI,hn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=nM(n.visibleWrites,r.path):xn(r.children,m=>{n.visibleWrites=nM(n.visibleWrites,Rn(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let o=new Fn(null);return null!=r.snap?o=o.set(hn(),!0):xn(r.children,u=>{o=o.set(new En(u),!0)}),nf(n,new S_(r.path,o,t))}return[]}function hm(n,e,t){return nf(n,new hd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function j_(n,e,t,r){const i=e._path,o=n.syncPointTree_.get(i);let u=[];if(o&&("default"===e._queryIdentifier||bI(o,e))){const h=function vM(n,e,t,r){const i=e._queryIdentifier,o=[];let u=[];const h=$l(n);if("default"===i)for(const[m,y]of n.views.entries())u=u.concat(mI(y,t,r)),ef(y)&&(n.views.delete(m),y.query._queryParams.loadsAllData()||o.push(y.query));else{const m=n.views.get(i);m&&(u=u.concat(mI(m,t,r)),ef(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||o.push(m.query)))}return h&&!$l(n)&&o.push(new(function tf(){return(0,P.hu)(cm,"Reference.ts has not been loaded"),cm}())(e._repo,e._path)),{removed:o,events:u}}(o,e,t,r);(function yM(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=h.removed;u=h.events;const y=-1!==m.findIndex(T=>T._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(i,(T,k)=>$l(k));if(y&&!C){const T=n.syncPointTree_.subtree(i);if(!T.isEmpty()){const k=function AM(n){return n.fold((e,t,r)=>{if(t&&$l(t))return[dm(t)];{let i=[];return t&&(i=Kb(t)),xn(r,(o,u)=>{i=i.concat(u)}),i}})}(T);for(let F=0;F<k.length;++F){const B=k[F],ee=B.query,de=G_(n,B);n.listenProvider_.startListening(af(ee),rf(n,ee),de.hashFn,de.onComplete)}}}!C&&m.length>0&&!r&&(y?n.listenProvider_.stopListening(af(e),null):m.forEach(T=>{const k=n.queryToTagMap.get(sf(T));n.listenProvider_.stopListening(af(T),k)})),function MM(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=sf(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,m)}return u}function Yb(n,e,t,r){const i=Qb(n,r);if(null!=i){const o=Xb(i),u=o.path,h=o.queryId,m=li(u,e);return pm(n,u,new hd(Vb(h),m,t))}return[]}function CI(n,e){const t=n._path;let r=null,i=!1;e.syncPointTree_.foreachOnPath(t,(y,C)=>{const T=li(y,t);r=r||Yu(C,T),i=i||$l(C)});let u,o=e.syncPointTree_.get(t);o?(i=i||$l(o),r=r||Yu(o,hn())):(o=new yI,e.syncPointTree_=e.syncPointTree_.set(t,o)),null!=r?u=!0:(u=!1,r=Ht.EMPTY_NODE,e.syncPointTree_.subtree(t).foreachChild((C,T)=>{const k=Yu(T,hn());k&&(r=r.updateImmediateChild(C,k))}));const h=bI(o,n);if(!h&&!n._queryParams.loadsAllData()){const y=sf(n);(0,P.hu)(!e.queryToTagMap.has(y),"View does not exist, but we have a tag");const C=function TI(){return Zb++}();e.queryToTagMap.set(y,C),e.tagToQueryMap.set(C,y)}return{syncPoint:o,writesCache:jl(e.pendingWriteTree_,t),serverCache:r,serverCacheComplete:u,foundAncestorDefaultView:i,viewAlreadyExists:h}}function II(n,e,t){const{syncPoint:r,serverCache:i,writesCache:o,serverCacheComplete:u,viewAlreadyExists:h,foundAncestorDefaultView:m}=CI(e,n);let y=function vI(n,e,t,r,i,o){const u=Wb(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function mM(n,e){n.eventRegistrations_.push(e)}(u,t),function gM(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Nn,(o,u)=>{r.push(tl(o,u))}),t.isFullyInitialized()&&r.push(w_(t.getNode())),_I(n,r,t.getNode(),e)}(u,t)}(r,e,t,o,i,u);if(!h&&!m){const C=U_(r,e);y=y.concat(function MP(n,e,t){const r=e._path,i=rf(n,e),o=G_(n,t),u=n.listenProvider_.startListening(af(e),i,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!$l(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((y,C,T)=>{if(!Bt(y)&&C&&$l(C))return[dm(C).query];{let k=[];return C&&(k=k.concat(Kb(C).map(F=>F.query))),xn(T,(F,B)=>{k=k.concat(B)}),k}});for(let y=0;y<m.length;++y){const C=m[y];n.listenProvider_.stopListening(af(C),rf(n,C))}}return u}(n,e,C))}return y}function fm(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,h)=>{const y=Yu(h,li(u,e));if(y)return y});return Hb(i,e,o,t,!0)}function nf(n,e){return DI(e,n.syncPointTree_,null,jl(n.pendingWriteTree_,hn()))}function DI(n,e,t,r){if(Bt(n.path))return $_(n,e,t,r);{const i=e.get(hn());null==t&&null!=i&&(t=Yu(i,hn()));let o=[];const u=Wt(n.path),h=n.operationForChild(u),m=e.children.get(u);if(m&&h){const y=t?t.getImmediateChild(u):null,C=$b(r,u);o=o.concat(DI(h,m,y,C))}return i&&(o=o.concat(V_(i,n,r,t))),o}}function $_(n,e,t,r){const i=e.get(hn());null==t&&null!=i&&(t=Yu(i,hn()));let o=[];return e.children.inorderTraversal((u,h)=>{const m=t?t.getImmediateChild(u):null,y=$b(r,u),C=n.operationForChild(u);C&&(o=o.concat($_(C,h,m,y)))}),i&&(o=o.concat(V_(i,n,r,t))),o}function G_(n,e){const t=e.query,r=rf(n,t);return{hashFn:()=>(function fM(n){return n.viewCache_.serverCache.getNode()}(e)||Ht.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function DM(n,e,t){const r=Qb(n,t);if(r){const i=Xb(r),o=i.path,u=i.queryId,h=li(o,e);return pm(n,o,new om(Vb(u),h))}return[]}(n,t._path,r):function IM(n,e){return nf(n,new om({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function DP(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return j_(n,t,null,o)}}}}function rf(n,e){const t=sf(e);return n.queryToTagMap.get(t)}function sf(n){return n._path.toString()+"$"+n._queryIdentifier}function Qb(n,e){return n.tagToQueryMap.get(e)}function Xb(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new En(n.substr(0,e))}}function pm(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),V_(r,t,jl(n.pendingWriteTree_,e),null)}function af(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function wM(){return(0,P.hu)(B_,"Reference.ts has not been loaded"),B_}())(n._repo,n._path):n}class Jb{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Jb(t)}node(){return this.node_}}class fd{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Rn(this.path_,e);return new fd(this.syncTree_,t)}node(){return fm(this.syncTree_,this.path_)}}const e0=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?xM(n[".sv"],e,t):"object"==typeof n[".sv"]?SI(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},xM=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},SI=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},AI=function(n,e,t,r){return md(e,new fd(t,n),r)},Xu=function(n,e,t){return md(n,new Jb(e),t)};function md(n,e,t){const r=n.getPriority().val(),i=e0(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,h=e0(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new Wn(h,sr(i)):n}{const u=n;return o=u,i!==u.getPriority().val()&&(o=o.updatePriority(new Wn(i))),u.forEachChild(Nn,(h,m)=>{const y=md(m,e.getImmediateChild(h),t);y!==m&&(o=o.updateImmediateChild(h,y))}),o}}class t0{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function n0(n,e){let t=e instanceof En?e:new En(e),r=n,i=Wt(t);for(;null!==i;){const o=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new t0(i,r,o),t=kn(t),i=Wt(t)}return r}function Ju(n){return n.node.value}function r0(n,e){n.node.value=e,gd(n)}function MI(n){return n.node.childCount>0}function mm(n,e){xn(n.node.children,(t,r)=>{e(new t0(t,n,r))})}function s0(n,e,t,r){t&&!r&&e(n),mm(n,i=>{s0(i,e,!0,r)}),t&&r&&e(n)}function ec(n){return new En(null===n.parent?n.name:ec(n.parent)+"/"+n.name)}function gd(n){null!==n.parent&&function RM(n,e,t){const r=function kM(n){return void 0===Ju(n)&&!MI(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,gd(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,gd(n))}(n.parent,n.name,n)}const a0=/[\[\].#$\/\u0000-\u001F\u007F]/,xI=/[\[\].#$\u0000-\u001F\u007F]/,l0=10485760,z_=function(n){return"string"==typeof n&&0!==n.length&&!a0.test(n)},q_=function(n){return"string"==typeof n&&0!==n.length&&!xI.test(n)},W_=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!s_(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},nl=function(n,e,t,r){r&&void 0===e||gm((0,P.gK)(n,"value"),e,t)},gm=function(n,e,t){const r=t instanceof En?new MC(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+zu(r));if("function"==typeof e)throw new Error(n+"contains a function "+zu(r)+" with contents = "+e.toString());if(s_(e))throw new Error(n+"contains "+e.toString()+" "+zu(r));if("string"==typeof e&&e.length>l0/3&&(0,P.ug)(e)>l0)throw new Error(n+"contains a string greater than "+l0+" utf8 bytes "+zu(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(xn(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(o=!0,!z_(u)))throw new Error(n+" contains an invalid key ("+u+") "+zu(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function xC(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),wb(n)})(r,u),gm(n,h,r),function bb(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+zu(r)+" in addition to actual children.")}},K_=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];xn(e,(u,h)=>{const m=new En(u);if(gm(i,h,Rn(t,m)),".priority"===__(m)&&!W_(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=ud(r);for(let u=0;u<o.length;u++)if((".priority"!==o[u]||u!==o.length-1)&&!z_(o[u]))throw new Error(n+"contains an invalid key ("+o[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort($A);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Qi(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},u0=function(n,e,t){if(!t||void 0!==e){if(s_(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!W_(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},_d=function(n,e,t,r){if(!(r&&void 0===t||z_(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},_m=function(n,e,t,r){if(!(r&&void 0===t||q_(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gs=function(n,e){if(".info"===Wt(e))throw new Error(n+" failed = Can't modify data under /.info/")},c0=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!z_(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),q_(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class RI{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ym(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!Uh(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function d0(n,e,t){ym(n,t),NI(n,r=>Uh(r,e))}function vo(n,e,t){ym(n,t),NI(n,r=>Qi(r,e)||Qi(e,r))}function NI(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(PM(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function PM(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Fr&&ai("event: "+t.toString()),ju(r)}}}const OI="repo_interrupt";class xP{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new RI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=T_(),this.transactionQueueTree_=new t0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function LI(n){const t=n.infoData_.getNode(new En(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function vm(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:LI(n)})}function FM(n,e,t,r,i){n.dataUpdateCount++;const o=new En(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const m=(0,P.UI)(t,y=>sr(y));u=function EI(n,e,t,r){const i=Qb(n,r);if(i){const o=Xb(i),u=o.path,h=o.queryId,m=li(u,e),y=Fn.fromObject(t);return pm(n,u,new Kh(Vb(h),m,y))}return[]}(n.serverSyncTree_,o,m,i)}else{const m=sr(t);u=Yb(n.serverSyncTree_,o,m,i)}else if(r){const m=(0,P.UI)(t,y=>sr(y));u=function CM(n,e,t){const r=Fn.fromObject(t);return nf(n,new Kh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,m)}else{const m=sr(t);u=hm(n.serverSyncTree_,o,m)}let h=o;u.length>0&&(h=lf(n,o)),vo(n.eventQueue_,h,u)}function LM(n,e){h0(n,"connected",e),!1===e&&function BM(n){tc(n,"onDisconnectEvents");const e=vm(n),t=T_();Pb(n.onDisconnect_,hn(),(i,o)=>{const u=AI(i,o,n.serverSyncTree_,e);Wh(t,i,u)});let r=[];Pb(t,hn(),(i,o)=>{r=r.concat(hm(n.serverSyncTree_,i,o));const u=g0(n,i);lf(n,u)}),n.onDisconnect_=T_(),vo(n.eventQueue_,hn(),r)}(n)}function h0(n,e,t){const r=new En("/.info/"+e),i=sr(t);n.infoData_.updateSnapshot(r,i);const o=hm(n.infoSyncTree_,r,i);vo(n.eventQueue_,r,o)}function Z_(n){return n.nextWriteId_++}function VI(n,e){const t=function SM(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,C)=>{const T=li(y,t);r=r||Yu(C,T)});let i=n.syncPointTree_.get(t);i?r=r||Yu(i,hn()):(i=new yI,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,u=o?new Bl(r,!0,!1):null;return function pM(n){return Qh(n.viewCache_)}(Wb(i,e,jl(n.pendingWriteTree_,e._path),o?u.getNode():Ht.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=sr(r).withIndex(e._queryParams.getIndex());if(e._queryParams.loadsAllData())hm(n.serverSyncTree_,e._path,i);else{const u=function TM(n,e){const{syncPoint:t,serverCache:r,writesCache:i,serverCacheComplete:o}=CI(e,n),u=Wb(t,e,i,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,u),e._queryParams.loadsAllData()?null:rf(n,e)}(n.serverSyncTree_,e);Yb(n.serverSyncTree_,e._path,i,u)}return j_(n.serverSyncTree_,e,null).length>0&&tc(n,"unexpected cancel events in repoGetValue"),i},r=>(tc(n,"get for query "+(0,P.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}function f0(n,e,t,r,i){tc(n,"set",{path:e.toString(),value:t,priority:r});const o=vm(n),u=sr(t,r),h=fm(n.serverSyncTree_,e),m=Xu(u,h,o),y=Z_(n),C=H_(n.serverSyncTree_,e,m,y,!0);ym(n.eventQueue_,C),n.server_.put(e.toString(),u.val(!0),(k,F)=>{const B="ok"===k;B||Si("set at "+e+" failed: "+k);const ee=Qu(n.serverSyncTree_,y,!B);vo(n.eventQueue_,e,ee),Gl(0,i,k,F)});const T=g0(n,e);lf(n,T),vo(n.eventQueue_,T,[])}function HM(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Ob(n.onDisconnect_,e),Gl(0,t,r,i)})}function UI(n,e,t,r){const i=sr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,u)=>{"ok"===o&&Wh(n.onDisconnect_,e,i),Gl(0,r,o,u)})}function yd(n,e,t){let r;r=".info"===Wt(e._path)?j_(n.infoSyncTree_,e,t):j_(n.serverSyncTree_,e,t),d0(n.eventQueue_,e._path,r)}function p0(n){n.persistentConnection_&&n.persistentConnection_.interrupt(OI)}function tc(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ai(t,...e)}function Gl(n,e,t,r){e&&ju(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const u=new Error(o);u.code=i,e(u)}})}function m0(n,e,t){return fm(n.serverSyncTree_,e,t)||Ht.EMPTY_NODE}function Y_(n,e=n.transactionQueueTree_){if(e||nc(n,e),Ju(e)){const t=$I(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function kP(n,e,t){const r=t.map(y=>y.currentWriteId),i=m0(n,e,r);let o=i;const u=i.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,P.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const T=li(e,C.path);o=o.updateChild(T,C.currentOutputSnapshotRaw)}const h=o.val(!0),m=e;n.server_.put(m.toString(),h,y=>{tc(n,"transaction put response",{path:m.toString(),status:y});let C=[];if("ok"===y){const T=[];for(let k=0;k<t.length;k++)t[k].status=2,C=C.concat(Qu(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&T.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();nc(n,n0(n.transactionQueueTree_,e)),Y_(n,n.transactionQueueTree_),vo(n.eventQueue_,e,C);for(let k=0;k<T.length;k++)ju(T[k])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{Si("transaction at "+m.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}lf(n,e)}},u)}(n,ec(e),t)}else MI(e)&&mm(e,t=>{Y_(n,t)})}function lf(n,e){const t=jI(n,e),r=ec(t);return function zM(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],y=li(t,m.path);let T,C=!1;if((0,P.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)C=!0,T=m.abortReason,i=i.concat(Qu(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)C=!0,T="maxretry",i=i.concat(Qu(n.serverSyncTree_,m.currentWriteId,!0));else{const k=m0(n,m.path,u);m.currentInputSnapshot=k;const F=e[h].update(k.val());if(void 0!==F){gm("transaction failed: Data returned ",F,m.path);let B=sr(F);"object"==typeof F&&null!=F&&(0,P.r3)(F,".priority")||(B=B.updatePriority(k.getPriority()));const de=m.currentWriteId,Ue=vm(n),Ke=Xu(B,k,Ue);m.currentOutputSnapshotRaw=B,m.currentOutputSnapshotResolved=Ke,m.currentWriteId=Z_(n),u.splice(u.indexOf(de),1),i=i.concat(H_(n.serverSyncTree_,m.path,Ke,m.currentWriteId,m.applyLocally)),i=i.concat(Qu(n.serverSyncTree_,de,!0))}else C=!0,T="nodata",i=i.concat(Qu(n.serverSyncTree_,m.currentWriteId,!0))}vo(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===T?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(T),!1,null)))}nc(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)ju(r[h]);Y_(n,n.transactionQueueTree_)}(n,$I(n,t),r),r}function jI(n,e){let t,r=n.transactionQueueTree_;for(t=Wt(e);null!==t&&void 0===Ju(r);)r=n0(r,t),t=Wt(e=kn(e));return r}function $I(n,e){const t=[];return GI(n,e,t),t.sort((r,i)=>r.order-i.order),t}function GI(n,e,t){const r=Ju(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);mm(e,i=>{GI(n,i,t)})}function nc(n,e){const t=Ju(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,r0(e,t.length>0?t:void 0)}mm(e,r=>{nc(n,r)})}function g0(n,e){const t=ec(jI(n,e)),r=n0(n.transactionQueueTree_,e);return function o0(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{bm(n,i)}),bm(n,r),s0(r,i=>{bm(n,i)}),t}function bm(n,e){const t=Ju(e);if(t){const r=[];let i=[],o=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,P.hu)(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):((0,P.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Qu(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===o?r0(e,void 0):t.length=o+1,vo(n.eventQueue_,ec(e),i);for(let u=0;u<r.length;u++)ju(r[u])}}const wm=function(n,e){const t=Em(n),r=t.namespace;return"firebase.com"===t.domain&&ea(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ea("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Si("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new f_(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new En(t.pathString)}},Em=function(n){let e="",t="",r="",i="",o="",u=!0,h="https",m=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(C,T)),C<T&&(i=function rl(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(C,T)));const k=function qM(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Si(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(u="https"===h||"wss"===h,m=parseInt(e.substring(y+1),10)):y=e.length;const F=e.slice(0,y);if("localhost"===F.toLowerCase())t="localhost";else if(F.split(".").length<=2)t=F;else{const B=e.indexOf(".");r=e.substring(0,B).toLowerCase(),t=e.substring(B+1),o=r}"ns"in k&&(o=k.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:o}};class zI{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class qI{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class WI{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Cm{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return HM(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){gs("OnDisconnect.remove",this._path);const e=new P.BH;return UI(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){gs("OnDisconnect.set",this._path),nl("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return UI(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){gs("OnDisconnect.setWithPriority",this._path),nl("OnDisconnect.setWithPriority",e,this._path,!1),u0("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function jM(n,e,t,r,i){const o=sr(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,h)=>{"ok"===u&&Wh(n.onDisconnect_,e,o),Gl(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){gs("OnDisconnect.update",this._path),K_("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function $M(n,e,t,r){if((0,P.xb)(t))return ai("onDisconnect().update() called with empty data.  Don't do anything."),void Gl(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&xn(t,(u,h)=>{const m=sr(h);Wh(n.onDisconnect_,Rn(e,u),m)}),Gl(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ui{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Bt(this._path)?null:__(this._path)}get ref(){return new Hs(this._repo,this._path)}get _queryIdentifier(){const e=Nb(this._queryParams),t=o_(e);return"{}"===t?"default":t}get _queryObject(){return Nb(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof ui))return!1;const t=this._repo===e._repo,r=Uh(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function vb(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Q_(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function rc(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===na){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ll)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==ta)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Nn){if(null!=e&&!W_(e)||null!=t&&!W_(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof Ab||n.getIndex()===Bs,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Im(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Hs extends ui{constructor(e,t){super(e,t,new I_,!1)}get parent(){const e=AC(this._path);return null===e?null:new Hs(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class zl{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new En(e),r=vd(this.ref,e);return new zl(this._node.getChild(t),r,Nn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new zl(i,vd(this.ref,r),Nn)))}hasChild(e){const t=new En(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function _0(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?vd(n._root,e):n._root}function KI(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=wm(e,n._repo.repoInfo_.nodeAdmin);c0("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ea("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),_0(n,t.path.toString())}function vd(n,e){return null===Wt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_m("child","path",t,!1)):_m("child","path",e,!1),new Hs(n._repo,Rn(n._path,e));var t}function X_(n,e){n=(0,P.m9)(n),gs("set",n._path),nl("set",e,n._path,!1);const t=new P.BH;return f0(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function WM(n,e){K_("update",e,n._path,!1);const t=new P.BH;return function UM(n,e,t,r){tc(n,"update",{path:e.toString(),value:t});let i=!0;const o=vm(n),u={};if(xn(t,(h,m)=>{i=!1,u[h]=AI(Rn(e,h),sr(m),n.serverSyncTree_,o)}),i)ai("update() called with empty data.  Don't do anything."),Gl(0,r,"ok",void 0);else{const h=Z_(n),m=function EM(n,e,t,r){!function x_(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=lm(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Fn.fromObject(t);return nf(n,new Kh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);ym(n.eventQueue_,m),n.server_.merge(e.toString(),t,(y,C)=>{const T="ok"===y;T||Si("update at "+e+" failed: "+y);const k=Qu(n.serverSyncTree_,h,!T),F=k.length>0?lf(n,e):e;vo(n.eventQueue_,F,k),Gl(0,r,y,C)}),xn(t,y=>{const C=g0(n,Rn(e,y));lf(n,C)}),vo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}class J_{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new zI("value",this,new zl(e.snapshotNode,new Hs(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new qI(this,e,t):null}matches(e){return e instanceof J_&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ey{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new qI(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=vd(new Hs(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new zI(e.type,this,new zl(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ey&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function uf(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const m=t,y=(C,T)=>{yd(n._repo,n,h),m(C,T)};y.userCallback=t.userCallback,y.context=t.context,t=y}const u=new WI(t,o||void 0),h="value"===e?new J_(u):new ey(e,u);return function GM(n,e,t){let r;r=".info"===Wt(e._path)?II(n.infoSyncTree_,e,t):II(n.serverSyncTree_,e,t),d0(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>yd(n._repo,n,h)}function Dm(n,e,t,r){return uf(n,"value",e,t,r)}function E0(n,e,t,r){return uf(n,"child_added",e,t,r)}function C0(n,e,t,r){return uf(n,"child_changed",e,t,r)}function I0(n,e,t,r){return uf(n,"child_moved",e,t,r)}function D0(n,e,t,r){return uf(n,"child_removed",e,t,r)}function ZI(n,e,t){let r=null;const i=t?new WI(t):null;"value"===e?r=new J_(i):e&&(r=new ey(e,i)),yd(n._repo,n,r)}class bo{}class T0 extends bo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){nl("endAt",this._value,e._path,!0);const t=D_(e._queryParams,this._value,this._key);if(Im(t),rc(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ui(e._repo,e._path,t,e._orderByCalled)}}class YI extends bo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){nl("endBefore",this._value,e._path,!1);const t=function KC(n,e,t){let r,i;return n.index_===na?("string"==typeof e&&(e=zC(e)),i=D_(n,e,t)):(r=null==t?Ll:zC(t),i=D_(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Im(t),rc(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ui(e._repo,e._path,t,e._orderByCalled)}}class xi extends bo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){nl("startAt",this._value,e._path,!0);const t=qh(e._queryParams,this._value,this._key);if(Im(t),rc(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ui(e._repo,e._path,t,e._orderByCalled)}}class QM extends bo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){nl("startAfter",this._value,e._path,!1);const t=function kb(n,e,t){let r;if(n.index_===na)"string"==typeof e&&(e=GC(e)),r=qh(n,e,t);else{let i;i=null==t?ta:GC(t),r=qh(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Im(t),rc(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ui(e._repo,e._path,t,e._orderByCalled)}}class RP extends bo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ui(e._repo,e._path,function WC(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class QI extends bo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ui(e._repo,e._path,function xb(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Tm extends bo{constructor(e){super(),this._path=e}_apply(e){Q_(e,"orderByChild");const t=new En(this._path);if(Bt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ab(t),i=im(e._queryParams,r);return rc(i),new ui(e._repo,e._path,i,!0)}}class S0 extends bo{_apply(e){Q_(e,"orderByKey");const t=im(e._queryParams,na);return rc(t),new ui(e._repo,e._path,t,!0)}}class JI extends bo{_apply(e){Q_(e,"orderByPriority");const t=im(e._queryParams,Nn);return rc(t),new ui(e._repo,e._path,t,!0)}}class nx extends bo{_apply(e){Q_(e,"orderByValue");const t=im(e._queryParams,Bs);return rc(t),new ui(e._repo,e._path,t,!0)}}class rx extends bo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(nl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new T0(this._value,this._key)._apply(new xi(this._value,this._key)._apply(e))}}function wo(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function _M(n){(0,P.hu)(!cm,"__referenceConstructor has already been defined"),cm=n})(Hs),function bM(n){(0,P.hu)(!B_,"__referenceConstructor has already been defined"),B_=n}(Hs);const hf={};function M0(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||ea("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ai("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,y,u=wm(o,i),h=u.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(m=!0,o=`http://${y}?ns=${h.namespace}`,u=wm(o,i),h=u.repoInfo):m=!u.repoInfo.secure;const C=i&&m?new Kp(Kp.OWNER):new rb(n.name,n.options,e);c0("Invalid Firebase Database URL",u),Bt(u.path)||ea("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function tD(n,e,t,r){let i=hf[e.name];i||(i={},hf[e.name]=i);let o=i[n.toURLString()];return o&&ea("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new xP(n,false,t,r),i[n.toURLString()]=o,o}(h,n,C,new u_(n.name,t));return new sx(T,n)}class sx{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function FI(n,e,t){if(n.stats_=lb(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new sm(n.repoInfo_,(r,i,o,u)=>{FM(n,r,i,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>LM(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new qu(n.repoInfo_,e,(r,i,o,u)=>{FM(n,r,i,o,u)},r=>{LM(n,r)},r=>{!function VM(n,e){xn(e,(t,r)=>{h0(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function RA(n,e){const t=n.toString();return ab[t]||(ab[t]=e()),ab[t]}(n.repoInfo_,()=>new eM(n.stats_,n.server_)),n.infoData_=new ZC,n.infoSyncTree_=new wI({startListening:(r,i,o,u)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=hm(n.infoSyncTree_,r._path,m),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),h0(n,"connected",!1),n.serverSyncTree_=new wI({startListening:(r,i,o,u)=>(n.server_.listen(r,o,i,(h,m)=>{const y=u(h,m);vo(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hs(this._repo,hn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function ix(n,e){const t=hf[e];(!t||t[n.key]!==n)&&ea(`Database ${e}(${n.repoInfo_}) has already been deleted.`),p0(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ea("Cannot call "+e+" on a deleted database.")}}function x0(){Xp.IS_TRANSPORT_INITIALIZED&&Si("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function k0(){x0(),Qa.forceDisallow()}function PP(){x0(),mo.forceDisallow(),Qa.forceAllow()}function lx(n,e){gC(n,e)}const rD={".sv":"timestamp"};class sD{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}qu.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},qu.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function nD(n){Jv(Yi.SDK_VERSION),(0,Yi._registerComponent)(new Us.wA("database",(e,{instanceIdentifier:t})=>M0(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Yi.registerVersion)(Xv,"0.13.3",n),(0,Yi.registerVersion)(Xv,"0.13.3","esm2017")}();const aD=new Ti.Yd("@firebase/database-compat"),R0=function(n){aD.warn("FIREBASE WARNING: "+n)};class px{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,R0("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class UP{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ql{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),_m("DataSnapshot.child","path",e,!1),new ql(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),_m("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ql(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new Eo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ki{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const u=ki.getCancelAndContextArgs_("Query.on",r,i),h=(y,C)=>{t.call(u.context,new ql(this.database,y),C)};h.userCallback=t,h.context=u.context;const m=null===(o=u.cancel)||void 0===o?void 0:o.bind(u.context);switch(e){case"value":return Dm(this._delegate,h,m),t;case"child_added":return E0(this._delegate,h,m),t;case"child_removed":return D0(this._delegate,h,m),t;case"child_changed":return C0(this._delegate,h,m),t;case"child_moved":return I0(this._delegate,h,m),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,ZI(this._delegate,e,i)}else ZI(this._delegate,e)}get(){return function KM(n){return VI((n=(0,P.m9)(n))._repo,n).then(e=>new zl(e,new Hs(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(e=>new ql(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const o=ki.getCancelAndContextArgs_("Query.once",r,i),u=new P.BH,h=(y,C)=>{const T=new ql(this.database,y);t&&t.call(o.context,T,C),u.resolve(T)};h.userCallback=t,h.context=o.context;const m=y=>{o.cancel&&o.cancel.call(o.context,y),u.reject(y)};switch(e){case"value":Dm(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":E0(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":D0(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":C0(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":I0(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new ki(this.database,wo(this._delegate,function NP(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new RP(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new ki(this.database,wo(this._delegate,function XI(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new QI(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new ki(this.database,wo(this._delegate,function JM(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return _m("orderByChild","path",n,!1),new Tm(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new ki(this.database,wo(this._delegate,function ex(){return new S0}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new ki(this.database,wo(this._delegate,function tx(){return new JI}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new ki(this.database,wo(this._delegate,function df(){return new nx}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new ki(this.database,wo(this._delegate,function cf(n=null,e){return _d("startAt","key",e,!0),new xi(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new ki(this.database,wo(this._delegate,function XM(n,e){return _d("startAfter","key",e,!0),new QM(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new ki(this.database,wo(this._delegate,function ZM(n,e){return _d("endAt","key",e,!0),new T0(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new ki(this.database,wo(this._delegate,function YM(n,e){return _d("endBefore","key",e,!0),new YI(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new ki(this.database,wo(this._delegate,function A0(n,e){return _d("equalTo","key",e,!0),new rx(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ki))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Eo(this.database,new Hs(this._delegate._repo,this._delegate._path))}}class Eo extends ki{constructor(e,t){super(e,new ui(t._repo,t._path,new I_,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Eo(this.database,vd(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Eo(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new Eo(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=X_(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,R0("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}gs("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=WM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function w0(n,e,t){if(gs("setWithPriority",n._path),nl("setWithPriority",e,n._path,!1),u0("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return f0(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function v0(n){return gs("remove",n._path),X_(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function cx(n,e,t){var r;if(n=(0,P.m9)(n),gs("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new P.BH,h=Dm(n,()=>{});return function HI(n,e,t,r,i,o){tc(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:tb(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=m0(n,e,void 0);u.currentInputSnapshot=h;const m=u.update(h.val());if(void 0===m)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{gm("transaction failed: Data returned ",m,u.path),u.status=0;const y=n0(n.transactionQueueTree_,e),C=Ju(y)||[];let T;C.push(u),r0(y,C),"object"==typeof m&&null!==m&&(0,P.r3)(m,".priority")?(T=(0,P.DV)(m,".priority"),(0,P.hu)(W_(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(fm(n.serverSyncTree_,e)||Ht.EMPTY_NODE).getPriority().val();const k=vm(n),F=sr(m,T),B=Xu(F,h,k);u.currentOutputSnapshotRaw=F,u.currentOutputSnapshotResolved=B,u.currentWriteId=Z_(n);const ee=H_(n.serverSyncTree_,e,B,u.currentWriteId,u.applyLocally);vo(n.eventQueue_,e,ee),Y_(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,y,C)=>{let T=null;m?o.reject(m):(T=new zl(C,new Hs(n._repo,n._path),Nn),o.resolve(new sD(y,T)))},h,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new UP(o.committed,new ql(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function b0(n,e){n=(0,P.m9)(n),gs("setPriority",n._path),u0("setPriority",e,!1);const t=new P.BH;return f0(n._repo,Rn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function y0(n,e){n=(0,P.m9)(n),gs("push",n._path),nl("push",e,n._path,!0);const t=LI(n._repo),r=KA(t),i=vd(n,r),o=vd(n,r);let u;return u=null!=e?X_(o,e).then(()=>o):Promise.resolve(o),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Eo(this.database,u));t&&i.then(()=>t(null),u=>t(u));const o=new Eo(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return gs("Reference.onDisconnect",this._delegate._path),new px(new Cm(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class ny{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:k0,forceLongPolling:PP}}useEmulator(e,t,r={}){!function LP(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ea("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ea('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Kp(Kp.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);o=new Kp(u)}!function OP(n,e,t,r){n.repoInfo_=new f_(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof Eo){const t=KI(this._delegate,e.toString());return new Eo(this,t)}{const t=_0(this._delegate,e);return new Eo(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=KI(this._delegate,e);return new Eo(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function ox(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),p0(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function ax(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function BI(n){n.persistentConnection_&&n.persistentConnection_.resume(OI)}(n._repo)}(this._delegate)}}ny.ServerValue={TIMESTAMP:function ux(){return rD}(),increment:n=>function iD(n){return{".sv":{increment:n}}}(n)};var HP=Object.freeze({__proto__:null,initStandalone:function BP({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){Jv(t);const u=new Us.zt("auth-internal",new Us.H0("database-standalone"));return u.setComponent(new Us.wA("auth-internal",()=>r,"PRIVATE")),{instance:new ny(M0(n,u,void 0,e,o),n),namespace:i}}});const jP=ny.ServerValue;function mx(n){return null==n}function N0(n){return"function"==typeof n.set}function Sm(n,e){return N0(e)?e:n.ref(e)}function O0(n,e){if(function GP(n){return"string"==typeof n}(n))return e.stringCase();if(N0(n))return e.firebaseCase();if(function ry(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function pf(n,e,t="on",r=Rh.z){return new dr.y(i=>{let o=null;return o=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,at.U)(i=>{const{snapshot:o,prevKey:u}=i;let h=null;return o.exists()&&(h=o.key),{type:e,payload:o,prevKey:u,key:h}}),(0,Sv.B)())}function iy(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function gx(n,e){const{payload:t,prevKey:r,key:i}=e,o=iy(n,i),u=function uD(n,e){if(mx(e))return 0;{const t=iy(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const y={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const h=n[o-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(o>-1){const h=n.splice(o,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function P0(n){return(mx(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function _x(n,e,t){return function zP(n,e,t){return pf(n,"value","once",t).pipe(Er(r=>{const i=[He(r)];return e.forEach(o=>i.push(pf(n,o,"on",t))),(0,kt.T)(...i).pipe(ka(gx,[]))}),Hu())}(n,e=P0(e),t)}function cD(n,e,t){const r=(e=P0(e)).map(i=>pf(n,i,"on",t));return(0,kt.T)(...r)}function dD(n,e){return function(r,i){return O0(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function qP(n){return function(t){return t?O0(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function bx(n,e){return function(){return pf(n,"value","on",e)}}!function $P(n){n.INTERNAL.registerComponent(new Us.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new ny(i,r)},"PUBLIC").setServiceProps({Reference:Eo,Query:ki,Database:ny,DataSnapshot:ql,enableLogging:lx,INTERNAL:HP,ServerValue:jP}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.3")}(n_.Z);const Ex=new d.OlP("angularfire2.realtimeDatabaseURL"),Cx=new d.OlP("angularfire2.database.use-emulator");let ay,hD=(()=>{class n{constructor(t,r,i,o,u,h,m,y,C,T,k,F,B,ee,de){this.schedulers=h;const Ue=m,Ke=(0,Ar.on)(t,u,r);y&&e_(Ke,u,C,k,F,B,T,ee),this.database=(0,Ar.cc)(`${Ke.name}.database.${i}`,"AngularFireDatabase",Ke.name,()=>{const nt=u.runOutsideAngular(()=>Ke.database(i||void 0));return Ue&&nt.useEmulator(...Ue),nt},[Ue])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Sm(this.database,t));let o=i;return r&&(o=r(i)),function WP(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:dD(r,"update"),set:dD(r,"set"),push:i=>r.push(i),remove:qP(r),snapshotChanges:i=>_x(n,i,t).pipe(ln.iC),stateChanges:i=>cD(n,i,t).pipe(ln.iC),auditTrail:i=>function yx(n,e,t){return function sy(n,e,t){return function vx(n,e){return pf(n,"value","on",e).pipe((0,at.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function t_(...n){const e=(0,As.jO)(n);return(0,bn.e)((t,r)=>{const i=n.length,o=new Array(i);let u=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,ks.Xf)(n[m]).subscribe((0,An.x)(r,y=>{o[m]=y,!h&&!u[m]&&(u[m]=!0,(h=u.every(ao.y))&&(u=null))},nd.Z));t.subscribe((0,An.x)(r,m=>{if(h){const y=[m,...o];r.next(e?e(...y):y)}}))})}(e),(0,at.U)(([i,o])=>{const u=i.lastKeyToLoad,h=o.map(m=>m.key);return{actions:o,lastKeyToLoad:u,loadedKeys:h}}),function jp(n){return(0,bn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,An.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,at.U)(i=>i.actions))}(n,cD(n,e).pipe(ka((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(ln.iC),valueChanges:(i,o)=>_x(n,i,t).pipe((0,at.U)(h=>h.map(m=>o&&o.idField?Object.assign(Object.assign({},m.payload.val()),{[o.idField]:m.key}):m.payload.val())),ln.iC)}}(o,this)}object(t){return function wx(n,e){return{query:n,snapshotChanges:()=>bx(n,e.schedulers.outsideAngular)().pipe(ln.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>bx(n,e.schedulers.outsideAngular)().pipe(ln.iC,(0,at.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Sm(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ar.Dh),d.LFG(Ar.xv,8),d.LFG(Ex,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(ln.HU),d.LFG(Cx,8),d.LFG(Hp,8),d.LFG(Kv,8),d.LFG(Za,8),d.LFG(Jg,8),d.LFG(Zv,8),d.LFG(Bp,8),d.LFG(Yv,8),d.LFG(ed,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ix=(()=>{class n{constructor(){Up.Z.registerVersion("angularfire",ln.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[hD]}),n})(),oy=(()=>{class n{constructor(t,r,i){this.frauth=t,this.afd=r,this.router=i,this.frauth.authState.subscribe(o=>{o?(this.userData=o,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}signUp(t,r){return this.frauth.createUserWithEmailAndPassword(t,r).then(i=>{this.saveUserData(i.user),this.router.navigate(["/sign-in"])}).catch(i=>{window.alert(i.message)})}signIn(t,r){return this.frauth.signInWithEmailAndPassword(t,r).then(()=>{this.router.navigate(["/dashboard/list"])}).catch(i=>{window.alert(i.message)})}saveUserData(t){return this.afd.object(`/users/${t.uid}`).set({email:t.email})}signOut(){return this.frauth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hp),d.LFG(hD),d.LFG(Kr))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{ay=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ay=!1}let mf,ic=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function si(n){return n===Cn}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ay)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ly=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function fD(){if(mf)return mf;if("object"!=typeof document||!document)return mf=new Set(ly),mf;let n=document.createElement("input");return mf=new Set(ly.filter(e=>(n.setAttribute("type",e),n.type===e))),mf}let ci,cy;function gf(n){return function Dx(){if(null==ci&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ci=!0}))}finally{ci=ci||!1}return ci}()?n:!!n.capture}function Am(n){return n.composedPath?n.composedPath()[0]:n.target}function dy(n){return zr((e,t)=>n<=t)}function Ed(n){return(0,bn.e)((e,t)=>{(0,ks.Xf)(n).subscribe((0,An.x)(t,()=>t.complete(),nd.Z)),!t.closed&&e.subscribe(t)})}function _s(n){return null!=n&&"false"!=`${n}`}function hy(n,e=0){return function H0(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function I1(n){return Array.isArray(n)?n:[n]}function vf(n){return n instanceof d.SBq?n.nativeElement:n}function Qx(n,e=Rh.z){return(0,bn.e)((t,r)=>{let i=null,o=null,u=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=o;o=null,r.next(y)}};function m(){const y=u+n,C=e.now();if(C<y)return i=this.schedule(void 0,y-C),void r.add(i);h()}t.subscribe((0,An.x)(r,y=>{o=y,u=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{o=i=null}))})}const D1=new Set;let fy,b$=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):E$}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function w$(n){if(!D1.has(n))try{fy||(fy=document.createElement("style"),fy.setAttribute("type","text/css"),document.head.appendChild(fy)),fy.sheet&&(fy.sheet.insertRule(`@media ${n} {body{ }}`,0),D1.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ic))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function E$(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let C$=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new tr.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return T1(I1(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=bi(T1(I1(t)).map(u=>this._registerQuery(u).observable));return o=Ei(o.pipe(zo(1)),o.pipe(dy(1),Qx(0))),o.pipe((0,at.U)(u=>{const h={matches:!1,breakpoints:{}};return u.forEach(({matches:m,query:y})=>{h.matches=h.matches||m,h.breakpoints[y]=m}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new dr.y(u=>{const h=m=>this._zone.run(()=>u.next(m));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(uo(r),(0,at.U)(({matches:u})=>({query:t,matches:u})),Ed(this._destroySubject)),mql:r};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(b$),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function T1(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function x1(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function k1(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const k$=new d.OlP("cdk-input-modality-detector-options"),R$={ignoreKeys:[18,17,224,91,16]},py=gf({passive:!0,capture:!0});let N$=(()=>{class n{constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new nr(null),this._lastTouchMs=0,this._onKeydown=u=>{this._options?.ignoreKeys?.some(h=>h===u.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Am(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(x1(u)?"keyboard":"mouse"),this._mostRecentTarget=Am(u))},this._onTouchstart=u=>{k1(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Am(u))},this._options={...R$,...o},this.modalityDetected=this._modality.pipe(dy(1)),this.modalityChanged=this.modalityDetected.pipe(Hu()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,py),i.addEventListener("mousedown",this._onMousedown,py),i.addEventListener("touchstart",this._onTouchstart,py)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,py),document.removeEventListener("mousedown",this._onMousedown,py),document.removeEventListener("touchstart",this._onTouchstart,py))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ic),d.LFG(d.R0b),d.LFG(ae),d.LFG(k$,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const P$=new d.OlP("cdk-focus-monitor-default-options"),MD=gf({passive:!0,capture:!0});let N1=(()=>{class n{constructor(t,r,i,o,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new tr.x,this._rootNodeFocusAndBlurListener=h=>{for(let y=Am(h);y;y=y.parentElement)"focus"===h.type?this._onFocus(h,y):this._onBlur(h,y)},this._document=o,this._detectionMode=u?.detectionMode||0}monitor(t,r=!1){const i=vf(t);if(!this._platform.isBrowser||1!==i.nodeType)return He(null);const o=function mD(n){if(function Sx(){if(null==cy){const n=typeof document<"u"?document.head:null;cy=!(!n||!n.createShadowRoot&&!n.attachShadow)}return cy}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),u=this._elementInfo.get(i);if(u)return r&&(u.checkChildren=!0),u.subject;const h={checkChildren:r,subject:new tr.x,rootNode:o};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const r=vf(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=vf(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([h,m])=>this._originChanged(h,r,m)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=Am(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,MD),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,MD)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ed(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,MD),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,MD),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let u=0;u<o.length;u++)if(o[u].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(ic),d.LFG(N$),d.LFG(ae,8),d.LFG(P$,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const O1="cdk-high-contrast-black-on-white",P1="cdk-high-contrast-white-on-black",Xx="cdk-high-contrast-active";let F$=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,d.f3M)(C$).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Xx,O1,P1),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(Xx,O1):2===r&&t.add(Xx,P1)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ic),d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const L$=new d.OlP("cdk-dir-doc",{providedIn:"root",factory:function V$(){return(0,d.f3M)(ae)}}),U$=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let H$=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new d.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function B$(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?U$.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(L$,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),F1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const $$=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function j$(){return!0}});let Ji=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function gD(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(F$),d.LFG($$,8),d.LFG(ae))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[F1,F1]}),n})();function U1(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=_s(e)}}}function j0(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function B1(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=_s(e)}}}function G$(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?hy(t):this.defaultTabIndex}}}function z$(n){return class extends n{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==e&&(this.errorState=o,this.stateChanges.next())}}}let H1=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class W${constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const j1={enterDuration:225,exitDuration:150},Jx=gf({passive:!0}),$1=["mousedown","touchstart"],G1=["mouseup","mouseleave","touchend","touchcancel"];class Z${constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=vf(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...j1,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const u=r.radius||function Y$(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,m=t-i.top,y=o.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=h-u+"px",C.style.top=m-u+"px",C.style.height=2*u+"px",C.style.width=2*u+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(C);const T=window.getComputedStyle(C),F=T.transitionDuration,B="none"===T.transitionProperty||"0s"===F||"0s, 0s"===F,ee=new W$(this,C,r,B);C.style.transform="scale3d(1, 1, 1)",ee.state=0,r.persistent||(this._mostRecentTransientRipple=ee);let de=null;return!B&&(y||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ue=()=>this._finishRippleTransition(ee),Ke=()=>this._destroyRipple(ee);C.addEventListener("transitionend",Ue),C.addEventListener("transitioncancel",Ke),de={onTransitionEnd:Ue,onTransitionCancel:Ke}}),this._activeRipples.set(ee,de),(B||!y)&&this._finishRippleTransition(ee),ee}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...j1,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=vf(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents($1))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(G1),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=x1(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!k1(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,Jx)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&($1.forEach(e=>{this._triggerElement.removeEventListener(e,this,Jx)}),this._pointerUpEventsRegistered&&G1.forEach(e=>{this._triggerElement.removeEventListener(e,this,Jx)}))}}const Q$=new d.OlP("mat-ripple-global-options");let xD=(()=>{class n{constructor(t,r,i,o,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Z$(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(ic),d.Y36(Q$,8),d.Y36(d.QbO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),z1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ji,Ji]}),n})();function q1(...n){const e=(0,As.jO)(n),{args:t,keys:r}=Sc(n),i=new dr.y(o=>{const{length:u}=t;if(!u)return void o.complete();const h=new Array(u);let m=u,y=u;for(let C=0;C<u;C++){let T=!1;(0,ks.Xf)(t[C]).subscribe((0,An.x)(o,k=>{T||(T=!0,y--),h[C]=k},()=>m--,void 0,()=>{(!m||!T)&&(y||o.next(r?Dl(r,h):h),o.complete())}))}});return e?i.pipe(Ms(e)):i}class X${}class bf{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(u):this.headers.set(o,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof bf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new bf;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof bf?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let u=this.headers.get(t);if(!u)return;u=u.filter(h=>-1===o.indexOf(h)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class J${encodeKey(e){return W1(e)}encodeValue(e){return W1(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const tG=/%(\d[a-f0-9])/gi,nG={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function W1(n){return encodeURIComponent(n).replace(tG,(e,t)=>nG[t]??e)}function kD(n){return`${n}`}class wf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new J$,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function eG(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[u,h]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],m=t.get(u)||[];m.push(h),t.set(u,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(kD):[kD(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new wf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(kD(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(kD(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class rG{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function K1(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Z1(n){return typeof Blob<"u"&&n instanceof Blob}function Y1(n){return typeof FormData<"u"&&n instanceof FormData}class G0{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function iG(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new bf),this.context||(this.context=new rG),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+u}}else this.params=new wf,this.urlWithParams=t}serializeBody(){return null===this.body?null:K1(this.body)||Z1(this.body)||Y1(this.body)||function sG(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof wf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Y1(this.body)?null:Z1(this.body)?this.body.type||null:K1(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof wf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,y=e.params||this.params;const C=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((T,k)=>T.set(k,e.setHeaders[k]),m)),e.setParams&&(y=Object.keys(e.setParams).reduce((T,k)=>T.set(k,e.setParams[k]),y)),new G0(t,r,o,{params:y,headers:m,context:C,reportProgress:h,responseType:i,withCredentials:u})}}var es=(()=>((es=es||{})[es.Sent=0]="Sent",es[es.UploadProgress=1]="UploadProgress",es[es.ResponseHeader=2]="ResponseHeader",es[es.DownloadProgress=3]="DownloadProgress",es[es.Response=4]="Response",es[es.User=5]="User",es))();class ek extends class oG{constructor(e,t=200,r="OK"){this.headers=e.headers||new bf,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=es.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ek({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function tk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let X1=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof G0)o=t;else{let m,y;m=i.headers instanceof bf?i.headers:new bf(i.headers),i.params&&(y=i.params instanceof wf?i.params:new wf({fromObject:i.params})),o=new G0(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=He(o).pipe(Tl(m=>this.handler.handle(m)));if(t instanceof G0||"events"===i.observe)return u;const h=u.pipe(zr(m=>m instanceof ek));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return h.pipe((0,at.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,at.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,at.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe((0,at.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new wf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,tk(i,r))}post(t,r,i={}){return this.request("POST",t,tk(i,r))}put(t,r,i={}){return this.request("PUT",t,tk(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(X$))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const lG=["*"];let RD;function z0(n){return function uG(){if(void 0===RD&&(RD=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(RD=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return RD}()?.createHTML(n)||n}function J1(n){return Error(`Unable to find icon with the name "${n}"`)}function eF(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function tF(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Mm{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let ND=(()=>{class n{constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new Mm(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){const u=this._sanitizer.sanitize(d.q3G.HTML,i);if(!u)throw tF(i);const h=z0(u);return this._addSvgIconConfig(t,r,new Mm("",h,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Mm(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const o=this._sanitizer.sanitize(d.q3G.HTML,r);if(!o)throw tF(r);const u=z0(o);return this._addSvgIconSetConfig(t,new Mm("",u,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,t);if(!r)throw eF(t);const i=this._cachedIconsByUrl.get(r);return i?He(OD(i)):this._loadSvgIconFromConfig(new Mm(t,null)).pipe((0,_n.b)(o=>this._cachedIconsByUrl.set(r,o)),(0,at.U)(o=>OD(o)))}getNamedSvgIcon(t,r=""){const i=nF(r,t);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const u=this._iconSetConfigs.get(r);return u?this._getSvgFromIconSetConfigs(t,u):$o(J1(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?He(OD(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,at.U)(r=>OD(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?He(i):q1(r.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(Ki(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(d.q3G.RESOURCE_URL,u.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),He(null)})))).pipe((0,at.U)(()=>{const u=this._extractIconWithNameFromAnySet(t,r);if(!u)throw J1(t);return u}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const u=this._svgElementFromConfig(o),h=this._extractSvgIconFromSet(u,t,o.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,_n.b)(r=>t.svgText=r),(0,at.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?He(null):this._fetchIcon(t).pipe((0,_n.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const u=o.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,i);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),i);const h=this._svgElementFromString(z0("<svg></svg>"));return h.appendChild(u),this._setSvgAttributes(h,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(z0("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){const{name:u,value:h}=i[o];"id"!==u&&r.setAttribute(u,h)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,o=i?.withCredentials??!1;if(!this._httpClient)throw function cG(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const u=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,r);if(!u)throw eF(r);const h=this._inProgressUrlFetches.get(u);if(h)return h;const m=this._httpClient.get(u,{responseType:"text",withCredentials:o}).pipe((0,at.U)(y=>z0(y)),qo(()=>this._inProgressUrlFetches.delete(u)),(0,Sv.B)());return this._inProgressUrlFetches.set(u,m),m}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(nF(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,t);if(o)return hG(o)?new Mm(o.url,null,o.options):new Mm(o,null)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(X1,8),d.LFG(bu),d.LFG(ae,8),d.LFG(d.qLn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function OD(n){return n.cloneNode(!0)}function nF(n,e){return n+":"+e}function hG(n){return!(!n.url||!n.options)}const fG=j0(class{constructor(n){this._elementRef=n}}),pG=new d.OlP("MAT_ICON_DEFAULT_OPTIONS"),mG=new d.OlP("mat-icon-location",{providedIn:"root",factory:function gG(){const n=(0,d.f3M)(ae),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),rF=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],_G=rF.map(n=>`[${n}]`).join(", "),yG=/^url\(['"]?#(.*?)['"]?\)$/;let PD=(()=>{class n extends fG{constructor(t,r,i,o,u,h){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=u,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Mc.w0.EMPTY,h&&(h.color&&(this.color=this.defaultColor=h.color),h.fontSet&&(this.fontSet=h.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=_s(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?[this._iconRegistry.classNameForFontAlias(this.fontSet)]:this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(u=>{o.setAttribute(u.name,`url('${t}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(_G),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)rF.forEach(u=>{const h=r[o],m=h.getAttribute(u),y=m?m.match(yG):null;if(y){let C=i.get(h);C||(C=[],i.set(h,C)),C.push({name:u,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(zo(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(ND),d.$8M("aria-hidden"),d.Y36(mG),d.Y36(d.qLn),d.Y36(pG,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(d.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),d.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[d.qOj],ngContentSelectors:lG,decls:1,vars:0,template:function(t,r){1&t&&(d.F$t(),d.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),vG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ji,Ji]}),n})();const bG=["*",[["mat-toolbar-row"]]],wG=["*","mat-toolbar-row"],EG=j0(class{constructor(n){this._elementRef=n}});let CG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),IG=(()=>{class n extends EG{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(ic),d.Y36(ae))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,CG,5),2&t){let o;d.iGM(o=d.CRH())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&d.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[d.qOj],ngContentSelectors:wG,decls:2,vars:0,template:function(t,r){1&t&&(d.F$t(bG),d.Hsn(0),d.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),DG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ji,Ji]}),n})();const nk=function(n){return{"top-nav__active":n}};let TG=(()=>{class n{constructor(t){this.authService=t,this.isValue=1}toggle(t){this.isValue=t}signOut(){this.authService.signOut()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(oy))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-dashboard"]],decls:21,vars:9,consts:[[1,"top-nav"],["routerLink","list"],[1,"top-nav__item",3,"ngClass","click"],["routerLink","recipes"],["routerLink","drafts"],[1,"bottom-nav"],[1,"bottom-nav__logout"],[1,"bottom-nav__logout",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"mat-toolbar",0)(1,"a",1)(2,"div",2),d.NdJ("click",function(){return r.toggle(1)}),d._uU(3,"List "),d.qZA()(),d.TgZ(4,"a",3)(5,"div",2),d.NdJ("click",function(){return r.toggle(2)}),d._uU(6,"Recipes"),d.qZA()(),d.TgZ(7,"a",4)(8,"div",2),d.NdJ("click",function(){return r.toggle(3)}),d._uU(9,"Drafts"),d.qZA()()(),d._UZ(10,"router-outlet"),d.TgZ(11,"nav",5)(12,"button",6)(13,"mat-icon"),d._uU(14,"more_vert"),d.qZA()(),d.TgZ(15,"button",6)(16,"mat-icon"),d._uU(17,"settings"),d.qZA()(),d.TgZ(18,"button",7),d.NdJ("click",function(){return r.signOut()}),d.TgZ(19,"mat-icon"),d._uU(20,"exit_to_app"),d.qZA()()()),2&t&&(d.xp6(2),d.Q6J("ngClass",d.VKq(3,nk,1==r.isValue)),d.xp6(3),d.Q6J("ngClass",d.VKq(5,nk,2==r.isValue)),d.xp6(3),d.Q6J("ngClass",d.VKq(7,nk,3==r.isValue)))},dependencies:[Xl,Ep,Qc,PD,IG],styles:['[_nghost-%COMP%]{position:relative;display:block;height:100%}.top-nav[_ngcontent-%COMP%]{display:flex;justify-content:space-around;background-color:#fff;font-weight:400}.top-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#313131}.top-nav__item[_ngcontent-%COMP%]{position:relative}.top-nav__active[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:-15px;left:50%;transform:translate(-50%);width:80px;height:6px;border-radius:15px;background-color:#673ab7}.bottom-nav[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;display:flex;justify-content:space-around;align-items:center;height:5rem;background-color:#faf9fd;border-radius:25px 25px 0 0;box-shadow:0 0 2px #b7b7b7}.bottom-nav__logout[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#673ab7;transform:scale(1.3);cursor:pointer}']}),n})(),SG=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-drafts"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"drafts works!"),d.qZA())},styles:["p[_ngcontent-%COMP%]{padding:15px 20px}"]}),n})(),AG=(()=>{class n{constructor(t){this.db=t,this.user=JSON.parse(localStorage.getItem("user"))}getAllItems(){return this.db.list(`/users/${this.user.uid}/items`)}getItem(t){return this.db.list(`/users/${this.user.uid}/items${t}`)}addItem(t){return this.db.list(`/users/${this.user.uid}/items`).push(t)}updateItem(t){return this.db.list(`/users/${this.user.uid}/items`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(hD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const MG=["*",[["mat-card-footer"]]],xG=["*","mat-card-footer"];let iF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),rk=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:xG,decls:2,vars:0,template:function(t,r){1&t&&(d.F$t(MG),d.Hsn(0),d.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),n})(),kG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ji,Ji]}),n})();const Kl=new d.OlP("NgValueAccessor");function Ef(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function aF(n){return null!=n&&"number"==typeof n.length}const ts=new d.OlP("NgValidators"),Cf=new d.OlP("NgAsyncValidators"),LG=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class VG{static min(e){return function lF(n){return e=>{if(Ef(e.value)||Ef(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function uF(n){return e=>{if(Ef(e.value)||Ef(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function cF(n){return Ef(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function dF(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function hF(n){return Ef(n.value)||LG.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function fF(n){return e=>Ef(e.value)||!aF(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function pF(n){return e=>aF(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function mF(n){if(!n)return FD;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ef(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return wF(e)}static composeAsync(e){return EF(e)}}function FD(n){return null}function gF(n){return null!=n}function _F(n){return(0,d.QGY)(n)?(0,tn.D)(n):n}function yF(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function vF(n,e){return e.map(t=>t(n))}function bF(n){return n.map(e=>function UG(n){return!n.validate}(e)?e:t=>e.validate(t))}function wF(n){if(!n)return null;const e=n.filter(gF);return 0==e.length?null:function(t){return yF(vF(t,e))}}function sk(n){return null!=n?wF(bF(n)):null}function EF(n){if(!n)return null;const e=n.filter(gF);return 0==e.length?null:function(t){return q1(vF(t,e).map(_F)).pipe((0,at.U)(yF))}}function ok(n){return null!=n?EF(bF(n)):null}function CF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function IF(n){return n._rawValidators}function DF(n){return n._rawAsyncValidators}function ak(n){return n?Array.isArray(n)?n:[n]:[]}function LD(n,e){return Array.isArray(n)?n.includes(e):n===e}function TF(n,e){const t=ak(e);return ak(n).forEach(i=>{LD(t,i)||t.push(i)}),t}function SF(n,e){return ak(e).filter(t=>!LD(n,t))}class AF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=sk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ok(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class js extends AF{get formDirective(){return null}get path(){return null}}class Cd extends AF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}const q0="VALID",UD="INVALID",my="PENDING",W0="DISABLED";function dk(n){return(BD(n)?n.validators:n)||null}function kF(n){return Array.isArray(n)?sk(n):n||null}function hk(n,e){return(BD(e)?e.asyncValidators:n)||null}function RF(n){return Array.isArray(n)?ok(n):n||null}function BD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class PF{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=kF(this._rawValidators),this._composedAsyncValidatorFn=RF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===q0}get invalid(){return this.status===UD}get pending(){return this.status==my}get disabled(){return this.status===W0}get enabled(){return this.status!==W0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=kF(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=RF(e)}addValidators(e){this.setValidators(TF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(TF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(SF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(SF(e,this._rawAsyncValidators))}hasValidator(e){return LD(this._rawValidators,e)}hasAsyncValidator(e){return LD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=my,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=W0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=q0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===q0||this.status===my)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?W0:q0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=my,this._hasOwnPendingAsyncValidator=!0;const t=_F(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?W0:this.errors?UD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(my)?my:this._anyControlsHaveStatus(UD)?UD:q0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){BD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class fk extends PF{constructor(e,t,r){super(dk(t),hk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function OF(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function NF(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function K0(n,e){pk(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function YG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&FF(n,e)})}(n,e),function XG(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function QG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&FF(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ZG(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function jD(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),GD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function $D(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function pk(n,e){const t=IF(n);null!==e.validator?n.setValidators(CF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=DF(n);null!==e.asyncValidator?n.setAsyncValidators(CF(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();$D(e._rawValidators,i),$D(e._rawAsyncValidators,i)}function GD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=IF(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(u=>u!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=DF(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(u=>u!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return $D(e._rawValidators,r),$D(e._rawAsyncValidators,r),t}function FF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function LF(n,e){pk(n,e)}function UF(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const r3={provide:js,useExisting:(0,d.Gpc)(()=>zD)},Z0=(()=>Promise.resolve(null))();let zD=(()=>{class n extends js{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new fk({},sk(t),ok(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Z0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),K0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Z0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Z0.then(()=>{const r=this._findContainer(t.path),i=new fk({});LF(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Z0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Z0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,UF(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ts,10),d.Y36(Cf,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([r3]),d.qOj]}),n})();function BF(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function HF(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const jF=class extends PF{constructor(e=null,t,r){super(dk(t),hk(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),BD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=HF(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){BF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){BF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){HF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},m3={provide:js,useExisting:(0,d.Gpc)(()=>qD)};let qD=(()=>{class n extends js{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(GD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return K0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){jD(t.control||null,t,!1),function n3(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,UF(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(jD(r||null,t),(n=>n instanceof jF)(i)&&(K0(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);LF(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function JG(n,e){return GD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){pk(this.form,this),this._oldForm&&GD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ts,10),d.Y36(Cf,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([m3]),d.qOj,d.TTD]}),n})(),cL=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),O3=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=vf(t);return new dr.y(i=>{const u=this._observeElement(r).subscribe(i);return()=>{u.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new tr.x,i=this._mutationObserverFactory.create(o=>r.next(o));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(cL))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dL=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new d.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=_s(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=hy(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Qx(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(O3),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),hL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[cL]}),n})();const P3=["input"],F3=function(n){return{enterDuration:n}},L3=["*"],V3=new d.OlP("mat-checkbox-default-options",{providedIn:"root",factory:fL});function fL(){return{color:"accent",clickAction:"check-indeterminate"}}let U3=0;const pL=fL(),B3={provide:Kl,useExisting:(0,d.Gpc)(()=>mL),multi:!0};class H3{}const j3=G$(j0(B1(U1(class{constructor(n){this._elementRef=n}}))));let $3=(()=>{class n extends j3{constructor(t,r,i,o,u,h,m){super(r),this._changeDetectorRef=i,this._ngZone=o,this._animationMode=h,this._options=m,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new d.vpe,this.indeterminateChange=new d.vpe,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||pL,this.color=this.defaultColor=this._options.color||pL.color,this.tabIndex=parseInt(u)||0,this.id=this._uniqueId=`${t}${++U3}`}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=_s(t)}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(t){const r=_s(t);r!=this.checked&&(this._checked=r,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const r=_s(t);r!==this.disabled&&(this._disabled=r,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const r=t!=this._indeterminate;this._indeterminate=_s(t),r&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(t){let r=this._currentCheckState,i=this._getAnimationTargetElement();if(r!==t&&i&&(this._currentAnimationClass.length>0&&i.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(r,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){i.classList.add(this._currentAnimationClass);const o=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{i.classList.remove(o)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const t=this._options?.clickAction;this.disabled||"noop"===t?!this.disabled&&"noop"===t&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==t&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(t){t.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(t,r){if("NoopAnimations"===this._animationMode)return"";switch(t){case 0:if(1===r)return this._animationClasses.uncheckedToChecked;if(3==r)return this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===r?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===r?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===r?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(t){const r=this._inputElement;r&&(r.nativeElement.indeterminate=t)}}return n.\u0275fac=function(t){d.$Z()},n.\u0275dir=d.lG2({type:n,viewQuery:function(t,r){if(1&t&&(d.Gf(P3,5),d.Gf(xD,5)),2&t){let i;d.iGM(i=d.CRH())&&(r._inputElement=i.first),d.iGM(i=d.CRH())&&(r.ripple=i.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[d.qOj]}),n})(),mL=(()=>{class n extends $3{constructor(t,r,i,o,u,h,m){super("mat-checkbox-",t,r,o,u,h,m),this._focusMonitor=i,this._animationClasses={uncheckedToChecked:"mat-checkbox-anim-unchecked-checked",uncheckedToIndeterminate:"mat-checkbox-anim-unchecked-indeterminate",checkedToUnchecked:"mat-checkbox-anim-checked-unchecked",checkedToIndeterminate:"mat-checkbox-anim-checked-indeterminate",indeterminateToChecked:"mat-checkbox-anim-indeterminate-checked",indeterminateToUnchecked:"mat-checkbox-anim-indeterminate-unchecked"}}_createChangeEvent(t){const r=new H3;return r.source=this,r.checked=t,r}_getAnimationTargetElement(){return this._elementRef.nativeElement}ngAfterViewInit(){super.ngAfterViewInit(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||this._onBlur()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onInputClick(t){t.stopPropagation(),super._handleInputClick()}focus(t,r){t?this._focusMonitor.focusVia(this._inputElement,t,r):this._inputElement.nativeElement.focus(r)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(N1),d.Y36(d.R0b),d.$8M("tabindex"),d.Y36(d.QbO,8),d.Y36(V3,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-checkbox"],hostVars:14,hostBindings:function(t,r){2&t&&(d.Ikx("id",r.id),d.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null),d.ekj("mat-checkbox-indeterminate",r.indeterminate)("mat-checkbox-checked",r.checked)("mat-checkbox-disabled",r.disabled)("mat-checkbox-label-before","before"==r.labelPosition)("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[d._Bn([B3]),d.qOj],ngContentSelectors:L3,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(t,r){if(1&t&&(d.F$t(),d.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),d.NdJ("change",function(o){return r._onInteractionEvent(o)})("click",function(o){return r._onInputClick(o)}),d.qZA(),d.TgZ(5,"span",5),d._UZ(6,"span",6),d.qZA(),d._UZ(7,"span",7),d.TgZ(8,"span",8),d.O4$(),d.TgZ(9,"svg",9),d._UZ(10,"path",10),d.qZA(),d.kcU(),d._UZ(11,"span",11),d.qZA()(),d.TgZ(12,"span",12,13),d.NdJ("cdkObserveContent",function(){return r._onLabelTextChange()}),d.TgZ(14,"span",14),d._uU(15,"\xa0"),d.qZA(),d.Hsn(16),d.qZA()()),2&t){const i=d.MAs(1),o=d.MAs(13);d.uIk("for",r.inputId),d.xp6(2),d.ekj("mat-checkbox-inner-container-no-side-margin",!o.textContent||!o.textContent.trim()),d.xp6(1),d.Q6J("id",r.inputId)("required",r.required)("checked",r.checked)("disabled",r.disabled)("tabIndex",r.tabIndex),d.uIk("value",r.value)("name",r.name)("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby)("aria-checked",r._getAriaChecked())("aria-describedby",r.ariaDescribedby),d.xp6(2),d.Q6J("matRippleTrigger",i)("matRippleDisabled",r._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",d.VKq(19,F3,"NoopAnimations"===r._animationMode?0:150))}},dependencies:[xD,dL],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative}.mat-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:rgba(0,0,0,0);transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:rgba(0,0,0,0)}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}"],encapsulation:2,changeDetection:0}),n})(),gL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),q3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[z1,Ji,hL,gL,Ji,gL]}),n})();const W3=["taskinput"];function K3(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li",17)(1,"mat-checkbox",18),d.NdJ("click",function(){const o=d.CHM(t).$implicit,u=d.oxw();return d.KtG(u.tickItem(o.key))}),d._uU(2),d.qZA()()}if(2&n){const t=e.$implicit;d.xp6(1),d.Q6J("checked",t.done),d.xp6(1),d.hij(" ",t.name," ")}}let Z3=(()=>{class n{constructor(t){this.dataService=t,this.item={},this.itemscount=0,this.itemsticked=0,this.progresswidth=0}ngOnInit(){this.user=JSON.parse(localStorage.getItem("user")),this.retrieveItems()}retrieveItems(){this.dataService.getAllItems().snapshotChanges().pipe((0,at.U)(t=>t.map(r=>({key:r.payload.key,...r.payload.val()})))).subscribe(t=>{this.items=t,this.itemscount=this.items.length,this.checkHowManyItemsTicked(this.items)})}addItem(t){this.dataService.addItem({name:t,done:!1}),this.input.nativeElement.value=""}deleteItem(t){console.log("Not yet implemeneted, clicked id: "+t)}tickItem(t){let r=!1;for(let i of this.items)i.key==t&&(r=i.done);this.dataService.updateItem(t).update(t,{done:!r})}checkHowManyItemsTicked(t){this.itemsticked=0;for(let r of t)1==r.done&&this.itemsticked++;this.progresswidth=Math.round(this.itemsticked/this.itemscount*100)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(AG))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-list"]],viewQuery:function(t,r){if(1&t&&d.Gf(W3,5),2&t){let i;d.iGM(i=d.CRH())&&(r.input=i.first)}},decls:22,vars:5,consts:[[1,"input-wrap"],[1,"input-helper"],["type","text","name","taskinput","id","taskinput","placeholder","add new item...","required","",1,"task-input"],["taskinput",""],[1,"task-input__icon",3,"click"],[1,"list-actions"],[1,"list-actions__save"],[1,"list-actions__load"],[1,"card-list"],[1,"card-list__title"],[1,"card-list__progress-text"],[1,"progress"],[1,"progress__back"],[1,"progress__front"],[1,"card-list-wrap"],[1,"list"],["class","list__item",4,"ngFor","ngForOf"],[1,"list__item"],["color","primary",3,"checked","click"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"input",2,3),d.qZA(),d.TgZ(4,"mat-icon",4),d.NdJ("click",function(){d.CHM(i);const u=d.MAs(3);return d.KtG(r.addItem(u.value))}),d._uU(5,"add"),d.qZA()(),d.TgZ(6,"div",5)(7,"button",6),d._uU(8,"Save as draft"),d.qZA(),d.TgZ(9,"button",7),d._uU(10,"Load as draft"),d.qZA()(),d.TgZ(11,"mat-card",8)(12,"div",9),d._uU(13,"Shopping list name"),d.qZA(),d.TgZ(14,"div",10),d._uU(15),d.qZA(),d.TgZ(16,"div",11),d._UZ(17,"div",12)(18,"div",13),d.qZA(),d.TgZ(19,"div",14)(20,"ul",15),d.YNc(21,K3,3,2,"li",16),d.qZA()()()}2&t&&(d.xp6(15),d.AsE("cart ",r.itemsticked,"/",r.itemscount,""),d.xp6(3),d.Udp("width",r.progresswidth,"%"),d.xp6(3),d.Q6J("ngForOf",r.items))},dependencies:[ji,rk,PD,mL],styles:['.input-wrap[_ngcontent-%COMP%]{position:relative}.input-helper[_ngcontent-%COMP%]{margin:2.5rem 1.5rem}.task-input[_ngcontent-%COMP%]{width:calc(100% - 1.5rem - 20px);padding:15px 20px;border:none;border-radius:10px;box-shadow:0 0 2px #b7b7b7;background-color:#faf9fd;font-size:1.1rem;font-weight:400}.task-input__icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:2.5rem;transform:translateY(-50%)}.task-input[_ngcontent-%COMP%]::placeholder{font-size:1.1rem;font-weight:400}.task-input[_ngcontent-%COMP%]:focus, .task-input[_ngcontent-%COMP%]:active{outline:none}.list-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:.8rem 1.5rem}.list-actions__save[_ngcontent-%COMP%], .list-actions__load[_ngcontent-%COMP%]{border:none;border-radius:5px;padding:5px 20px;font-weight:600;color:#673ab7;background-color:#faf9fd;letter-spacing:1px;box-shadow:0 0 2px #b7b7b7;font-family:Roboto}.card-list[_ngcontent-%COMP%]{margin:0 1.5rem 2.5rem;border:none;border-radius:10px;box-shadow:0 0 2px #b7b7b7!important;color:#313131}.card-list__title[_ngcontent-%COMP%]{position:relative;font-size:1.1rem;margin-left:15px}.card-list__title[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:-15px;transform:translateY(-50%);width:7px;height:7px;border-radius:50%;background-color:#673ab7}.card-list__progress-text[_ngcontent-%COMP%]{font-size:.7rem;color:#673ab7}.card-list[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{position:relative;height:10px;width:90%}.card-list[_ngcontent-%COMP%]   .progress__back[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:3px;width:100%;background-color:#673ab74d}.card-list[_ngcontent-%COMP%]   .progress__front[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:3px;width:10%;background-color:#673ab7}.card-list[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{list-style:none;padding:0}.card-list[_ngcontent-%COMP%]   .list__item[_ngcontent-%COMP%]{font-size:1rem}']}),n})(),Y3=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-recipes"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"recipes works!"),d.qZA())},styles:["p[_ngcontent-%COMP%]{padding:15px 20px}"]}),n})();const Q3=["mat-button",""],X3=["*"],ez=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],tz=j0(U1(B1(class{constructor(n){this._elementRef=n}})));let _L=(()=>{class n extends tz{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of ez)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(N1),d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&d.Gf(xD,5),2&t){let i;d.iGM(i=d.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(d.uIk("disabled",r.disabled||null),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[d.qOj],attrs:Q3,ngContentSelectors:X3,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"span",0),d.Hsn(1),d.qZA(),d._UZ(2,"span",1)(3,"span",2)),2&t&&(d.xp6(2),d.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),d.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[xD],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}"],encapsulation:2,changeDetection:0}),n})(),nz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[z1,Ji,Ji]}),n})();var rz=U(1144);const iz=["addListener","removeListener"],sz=["addEventListener","removeEventListener"],oz=["on","off"];function Ck(n,e,t,r){if((0,wi.m)(t)&&(r=t,t=void 0),r)return Ck(n,e,t).pipe(Ms(r));const[i,o]=function uz(n){return(0,wi.m)(n.addEventListener)&&(0,wi.m)(n.removeEventListener)}(n)?sz.map(u=>h=>n[u](e,h,t)):function az(n){return(0,wi.m)(n.addListener)&&(0,wi.m)(n.removeListener)}(n)?iz.map(yL(n,e)):function lz(n){return(0,wi.m)(n.on)&&(0,wi.m)(n.off)}(n)?oz.map(yL(n,e)):[];if(!i&&(0,rz.z)(n))return(0,qr.z)(u=>Ck(u,e,t))((0,ks.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new dr.y(u=>{const h=(...m)=>u.next(1<m.length?m:m[0]);return i(h),()=>o(h)})}function yL(n,e){return t=>r=>n[t](e,r)}class vL{}const Id="*";function dz(n,e){return{type:7,name:n,definitions:e,options:{}}}function hz(n,e=null){return{type:4,styles:e,timings:n}}function bL(n,e=null){return{type:2,steps:n,options:e}}function WD(n){return{type:6,styles:n,offset:null}}function fz(n,e,t){return{type:0,name:n,styles:e,options:t}}function pz(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function wL(n){Promise.resolve(null).then(n)}class Y0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){wL(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class EL{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?wL(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==o&&this._onFinish()}),u.onDestroy(()=>{++r==o&&this._onDestroy()}),u.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const mz=["connectionContainer"],gz=["inputContainer"],_z=["label"];function yz(n,e){1&n&&(d.ynx(0),d.TgZ(1,"div",14),d._UZ(2,"div",15)(3,"div",16)(4,"div",17),d.qZA(),d.TgZ(5,"div",18),d._UZ(6,"div",15)(7,"div",16)(8,"div",17),d.qZA(),d.BQk())}function vz(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",19),d.NdJ("cdkObserveContent",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.updateOutlineGap())}),d.Hsn(1,1),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function bz(n,e){if(1&n&&(d.ynx(0),d.Hsn(1,2),d.TgZ(2,"span"),d._uU(3),d.qZA(),d.BQk()),2&n){const t=d.oxw(2);d.xp6(3),d.Oqu(t._control.placeholder)}}function wz(n,e){1&n&&d.Hsn(0,3,["*ngSwitchCase","true"])}function Ez(n,e){1&n&&(d.TgZ(0,"span",23),d._uU(1," *"),d.qZA())}function Cz(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"label",20,21),d.NdJ("cdkObserveContent",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.updateOutlineGap())}),d.YNc(2,bz,4,1,"ng-container",12),d.YNc(3,wz,1,0,"ng-content",12),d.YNc(4,Ez,2,0,"span",22),d.qZA()}if(2&n){const t=d.oxw();d.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),d.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),d.uIk("for",t._control.id)("aria-owns",t._control.id),d.xp6(2),d.Q6J("ngSwitchCase",!1),d.xp6(1),d.Q6J("ngSwitchCase",!0),d.xp6(1),d.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function Iz(n,e){1&n&&(d.TgZ(0,"div",24),d.Hsn(1,4),d.qZA())}function Dz(n,e){if(1&n&&(d.TgZ(0,"div",25),d._UZ(1,"span",26),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function Tz(n,e){if(1&n&&(d.TgZ(0,"div"),d.Hsn(1,5),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState)}}function Sz(n,e){if(1&n&&(d.TgZ(0,"div",30),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.Q6J("id",t._hintLabelId),d.xp6(1),d.Oqu(t.hintLabel)}}function Az(n,e){if(1&n&&(d.TgZ(0,"div",27),d.YNc(1,Sz,2,2,"div",28),d.Hsn(2,6),d._UZ(3,"div",29),d.Hsn(4,7),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState),d.xp6(1),d.Q6J("ngIf",t.hintLabel)}}const Mz=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],xz=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],kz=new d.OlP("MatError"),Rz={transitionMessages:dz("transitionMessages",[fz("enter",WD({opacity:1,transform:"translateY(0%)"})),pz("void => enter",[WD({opacity:0,transform:"translateY(-5px)"}),hz("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Dk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n}),n})();const Nz=new d.OlP("MatHint");let KD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-label"]]}),n})(),Oz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const Pz=new d.OlP("MatPrefix"),Fz=new d.OlP("MatSuffix");let CL=0;const Vz=j0(class{constructor(n){this._elementRef=n}},"primary"),Uz=new d.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),DL=new d.OlP("MatFormField");let TL=(()=>{class n extends Vz{constructor(t,r,i,o,u,h,m){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=o,this._platform=u,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new tr.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+CL++,this._labelId="mat-form-field-label-"+CL++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==m,this.appearance=o?.appearance||"legacy",o&&(this._hideRequiredMarker=Boolean(o.hideRequiredMarker),o.color&&(this.color=this.defaultColor=o.color))}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=_s(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(uo(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Ed(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ed(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,kt.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(uo(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(uo(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Ed(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Ck(this._label.nativeElement,"transitionend").pipe(zo(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,i=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",o=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const C=r.querySelectorAll(`${i}, ${o}`);for(let T=0;T<C.length;T++)C[T].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let u=0,h=0;const m=r.querySelectorAll(i),y=r.querySelectorAll(o);if(this._label&&this._label.nativeElement.children.length){const C=r.getBoundingClientRect();if(0===C.width&&0===C.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const T=this._getStartEnd(C),k=t.children,F=this._getStartEnd(k[0].getBoundingClientRect());let B=0;for(let ee=0;ee<k.length;ee++)B+=k[ee].offsetWidth;u=Math.abs(F-T)-5,h=B>0?.75*B+10:0}for(let C=0;C<m.length;C++)m[C].style.width=`${u}px`;for(let C=0;C<y.length;C++)y[C].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(H$,8),d.Y36(Uz,8),d.Y36(ic),d.Y36(d.R0b),d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,Dk,5),d.Suo(i,Dk,7),d.Suo(i,KD,5),d.Suo(i,KD,7),d.Suo(i,Oz,5),d.Suo(i,kz,5),d.Suo(i,Nz,5),d.Suo(i,Pz,5),d.Suo(i,Fz,5)),2&t){let o;d.iGM(o=d.CRH())&&(r._controlNonStatic=o.first),d.iGM(o=d.CRH())&&(r._controlStatic=o.first),d.iGM(o=d.CRH())&&(r._labelChildNonStatic=o.first),d.iGM(o=d.CRH())&&(r._labelChildStatic=o.first),d.iGM(o=d.CRH())&&(r._placeholderChild=o.first),d.iGM(o=d.CRH())&&(r._errorChildren=o),d.iGM(o=d.CRH())&&(r._hintChildren=o),d.iGM(o=d.CRH())&&(r._prefixChildren=o),d.iGM(o=d.CRH())&&(r._suffixChildren=o)}},viewQuery:function(t,r){if(1&t&&(d.Gf(mz,7),d.Gf(gz,5),d.Gf(_z,5)),2&t){let i;d.iGM(i=d.CRH())&&(r._connectionContainerRef=i.first),d.iGM(i=d.CRH())&&(r._inputContainerRef=i.first),d.iGM(i=d.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&d.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[d._Bn([{provide:DL,useExisting:n}]),d.qOj],ngContentSelectors:xz,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(d.F$t(Mz),d.TgZ(0,"div",0)(1,"div",1,2),d.NdJ("click",function(o){return r._control.onContainerClick&&r._control.onContainerClick(o)}),d.YNc(3,yz,9,0,"ng-container",3),d.YNc(4,vz,2,1,"div",4),d.TgZ(5,"div",5,6),d.Hsn(7),d.TgZ(8,"span",7),d.YNc(9,Cz,5,16,"label",8),d.qZA()(),d.YNc(10,Iz,2,0,"div",9),d.qZA(),d.YNc(11,Dz,2,4,"div",10),d.TgZ(12,"div",11),d.YNc(13,Tz,2,1,"div",12),d.YNc(14,Az,5,2,"div",13),d.qZA()()),2&t&&(d.xp6(3),d.Q6J("ngIf","outline"==r.appearance),d.xp6(1),d.Q6J("ngIf",r._prefixChildren.length),d.xp6(5),d.Q6J("ngIf",r._hasFloatingLabel()),d.xp6(1),d.Q6J("ngIf",r._suffixChildren.length),d.xp6(1),d.Q6J("ngIf","outline"!=r.appearance),d.xp6(1),d.Q6J("ngSwitch",r._getDisplayedMessages()),d.xp6(1),d.Q6J("ngSwitchCase","error"),d.xp6(1),d.Q6J("ngSwitchCase","hint"))},dependencies:[br,eo,$i,dL],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[Rz.transitionMessages]},changeDetection:0}),n})(),SL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Mo,Ji,hL,Ji]}),n})();const AL=gf({passive:!0});let Bz=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Nr.E;const r=vf(t),i=this._monitoredElements.get(r);if(i)return i.subject;const o=new tr.x,u="cdk-text-field-autofilled",h=m=>{"cdk-text-field-autofill-start"!==m.animationName||r.classList.contains(u)?"cdk-text-field-autofill-end"===m.animationName&&r.classList.contains(u)&&(r.classList.remove(u),this._ngZone.run(()=>o.next({target:m.target,isAutofilled:!1}))):(r.classList.add(u),this._ngZone.run(()=>o.next({target:m.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,AL),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",h,AL)}}),o}stopMonitoring(t){const r=vf(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ic),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ML=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Hz=new d.OlP("MAT_INPUT_VALUE_ACCESSOR"),jz=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let $z=0;const Gz=z$(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r,this.stateChanges=new tr.x}});let xL=(()=>{class n extends Gz{constructor(t,r,i,o,u,h,m,y,C,T){super(h,o,u,i),this._elementRef=t,this._platform=r,this._autofillMonitor=y,this._formField=T,this._uid="mat-input-"+$z++,this.focused=!1,this.stateChanges=new tr.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(B=>fD().has(B)),this._iOSKeyupListener=B=>{const ee=B.target;!ee.value&&0===ee.selectionStart&&0===ee.selectionEnd&&(ee.setSelectionRange(1,1),ee.setSelectionRange(0,0))};const k=this._elementRef.nativeElement,F=k.nodeName.toLowerCase();this._inputValueAccessor=m||k,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===F,this._isTextarea="textarea"===F,this._isInFormField=!!T,this._isNativeSelect&&(this.controlType=k.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=_s(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(VG.required)??!1}set required(t){this._required=_s(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&fD().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=_s(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,r=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(r!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=r,r?i.setAttribute("placeholder",r):i.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){jz.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(ic),d.Y36(Cd,10),d.Y36(zD,8),d.Y36(qD,8),d.Y36(H1),d.Y36(Hz,10),d.Y36(Bz),d.Y36(d.R0b),d.Y36(DL,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&d.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(d.Ikx("disabled",r.disabled)("required",r.required),d.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),d.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[d._Bn([{provide:Dk,useExisting:n}]),d.qOj,d.TTD]}),n})(),zz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[H1],imports:[ML,SL,Ji,ML,SL]}),n})();const qz=[{path:"sign-in",component:(()=>{class n{constructor(t){this.authService=t}signIn(t,r){this.authService.signIn(t,r)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(oy))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-sign-in"]],decls:22,vars:0,consts:[[1,"container"],["color","primary",1,"card-icon"],[1,"signin-form"],["appearance","fill",1,"signin-form__full-width"],["type","email","matInput","","placeholder","Ex. user@gmail.com","formControlName","email"],["email",""],["type","password","matInput","","formControlName","password"],["password",""],[1,"signin-form__btns"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","routerLink","/register-user"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-title")(3,"mat-icon",1),d._uU(4,"fingerprint"),d.qZA(),d._uU(5," Log in "),d.qZA(),d.TgZ(6,"form",2)(7,"mat-form-field",3)(8,"mat-label"),d._uU(9,"Email"),d.qZA(),d._UZ(10,"input",4,5),d.qZA(),d.TgZ(12,"mat-form-field",3)(13,"mat-label"),d._uU(14,"Password"),d.qZA(),d._UZ(15,"input",6,7),d.qZA()(),d.TgZ(17,"div",8)(18,"button",9),d.NdJ("click",function(){d.CHM(i);const u=d.MAs(11),h=d.MAs(16);return d.KtG(r.signIn(u.value,h.value))}),d._uU(19,"Log in"),d.qZA(),d.TgZ(20,"button",10),d._uU(21,"Sign up"),d.qZA()()()()}},dependencies:[yv,rk,iF,_L,PD,TL,KD,xL],styles:[".container[_ngcontent-%COMP%]{position:relative;height:100vh}mat-card[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:50px}.card-icon[_ngcontent-%COMP%]{transform:scale(1.5);margin-right:1rem}.input-icon[_ngcontent-%COMP%]{float:right;transform:scale(1.2);padding:2px}mat-card-title[_ngcontent-%COMP%]{margin-bottom:40px;font-weight:900}.signin-form[_ngcontent-%COMP%]{min-width:250px;max-width:500px;width:100%;margin-top:1rem}.signin-form__full-width[_ngcontent-%COMP%]{width:100%}.signin-form__btns[_ngcontent-%COMP%]{margin-top:1rem}button[_ngcontent-%COMP%]{margin-right:1rem}"]}),n})()},{path:"register-user",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}signUp(t,r){this.authService.signUp(t,r)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(oy))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-sign-up"]],decls:20,vars:0,consts:[[1,"container"],["color","primary"],[1,"signin-form"],["appearance","fill",1,"signin-form__full-width"],["type","email","matInput","","placeholder","Ex. user@gmail.com","formControlName","email"],["email",""],["type","password","matInput","","formControlName","password"],["password",""],[1,"signin-form__btns"],["mat-raised-button","",3,"click"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-title")(3,"mat-icon",1),d._uU(4,"bookmark"),d.qZA(),d._uU(5," Register new account "),d.qZA(),d.TgZ(6,"form",2)(7,"mat-form-field",3)(8,"mat-label"),d._uU(9,"Email"),d.qZA(),d._UZ(10,"input",4,5),d.qZA(),d.TgZ(12,"mat-form-field",3)(13,"mat-label"),d._uU(14,"Password"),d.qZA(),d._UZ(15,"input",6,7),d.qZA()(),d.TgZ(17,"div",8)(18,"button",9),d.NdJ("click",function(){d.CHM(i);const u=d.MAs(11),h=d.MAs(16);return d.KtG(r.signUp(u.value,h.value))}),d._uU(19,"Sign up"),d.qZA()()()()}},dependencies:[rk,iF,_L,PD,TL,KD,xL],styles:[".container[_ngcontent-%COMP%]{position:relative;height:100vh}mat-card[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:50px}mat-icon[_ngcontent-%COMP%]{transform:scale(1.5);margin-right:1rem}mat-card-title[_ngcontent-%COMP%]{margin-bottom:40px;font-weight:900}.signin-form[_ngcontent-%COMP%]{min-width:250px;max-width:500px;width:100%;margin-top:1rem}.signin-form__full-width[_ngcontent-%COMP%]{width:100%}.signin-form__btns[_ngcontent-%COMP%]{margin-top:1rem}button[_ngcontent-%COMP%]{margin-right:1rem}"]}),n})()},{path:"dashboard",component:TG,children:[{path:"list",component:Z3},{path:"recipes",component:Y3},{path:"drafts",component:SG}]},{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"**",redirectTo:"sign-in"}];let Wz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Iv.forRoot(qz),Iv]}),n})();function kL(n){return new d.vHH(3e3,!1)}function Aq(){return typeof window<"u"&&typeof window.document<"u"}function Tk(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function If(n){switch(n.length){case 0:return new Y0;case 1:return n[0];default:return new EL(n)}}function RL(n,e,t,r,i=new Map,o=new Map){const u=[],h=[];let m=-1,y=null;if(r.forEach(C=>{const T=C.get("offset"),k=T==m,F=k&&y||new Map;C.forEach((B,ee)=>{let de=ee,Ue=B;if("offset"!==ee)switch(de=e.normalizePropertyName(de,u),Ue){case"!":Ue=i.get(ee);break;case Id:Ue=o.get(ee);break;default:Ue=e.normalizeStyleValue(ee,de,Ue,u)}F.set(de,Ue)}),k||h.push(F),y=F,m=T}),u.length)throw function gq(n){return new d.vHH(3502,!1)}();return h}function Sk(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Ak(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Ak(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Ak(t,"destroy",n)))}}function Ak(n,e,t){const o=Mk(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(o._data=u),o}function Mk(n,e,t,r,i="",o=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!u}}function ra(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function NL(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let xk=(n,e)=>!1,OL=(n,e,t)=>[],PL=null;function kk(n){const e=n.parentNode||n.host;return e===PL?null:e}(Tk()||typeof Element<"u")&&(Aq()?(PL=(()=>document.documentElement)(),xk=(n,e)=>{for(;e;){if(e===n)return!0;e=kk(e)}return!1}):xk=(n,e)=>n.contains(e),OL=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Rm=null,FL=!1;const LL=xk,VL=OL;let UL=(()=>{class n{validateStyleProperty(t){return function xq(n){Rm||(Rm=function kq(){return typeof document<"u"?document.body:null}()||{},FL=!!Rm.style&&"WebkitAppearance"in Rm.style);let e=!0;return Rm.style&&!function Mq(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Rm.style,!e&&FL&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Rm.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return LL(t,r)}getParentElement(t){return kk(t)}query(t,r,i){return VL(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,u,h=[],m){return new Y0(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Rk=(()=>{class n{}return n.NOOP=new UL,n})();const Nk="ng-enter",ZD="ng-leave",YD="ng-trigger",QD=".ng-trigger",HL="ng-animating",Ok=".ng-animating";function Df(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Pk(parseFloat(e[1]),e[2])}function Pk(n,e){return"s"===e?1e3*n:n}function XD(n,e,t){return n.hasOwnProperty("duration")?n:function Oq(n,e,t){let i,o=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(kL()),{duration:0,delay:0,easing:""};i=Pk(parseFloat(h[1]),h[2]);const m=h[3];null!=m&&(o=Pk(parseFloat(m),h[4]));const y=h[5];y&&(u=y)}else i=n;if(!t){let h=!1,m=e.length;i<0&&(e.push(function Kz(){return new d.vHH(3100,!1)}()),h=!0),o<0&&(e.push(function Zz(){return new d.vHH(3101,!1)}()),h=!0),h&&e.splice(m,0,kL())}return{duration:i,delay:o,easing:u}}(n,e,t)}function Q0(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function jL(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Tf(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function GL(n,e,t){return t?e+":"+t+";":""}function zL(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=GL(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=GL(0,Vq(t),n.style[t]));n.setAttribute("style",e)}function sc(n,e,t){n.style&&(e.forEach((r,i)=>{const o=Lk(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r}),Tk()&&zL(n))}function Nm(n,e){n.style&&(e.forEach((t,r)=>{const i=Lk(r);n.style[i]=""}),Tk()&&zL(n))}function X0(n){return Array.isArray(n)?1==n.length?n[0]:bL(n):n}const Fk=new RegExp("{{\\s*(.+?)\\s*}}","g");function qL(n){let e=[];if("string"==typeof n){let t;for(;t=Fk.exec(n);)e.push(t[1]);Fk.lastIndex=0}return e}function JD(n,e,t){const r=n.toString(),i=r.replace(Fk,(o,u)=>{let h=e[u];return null==h&&(t.push(function Qz(n){return new d.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function eT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Lq=/-+([a-z0-9])/g;function Lk(n){return n.replace(Lq,(...e)=>e[1].toUpperCase())}function Vq(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ia(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Xz(n){return new d.vHH(3004,!1)}()}}function WL(n,e){return window.getComputedStyle(n)[e]}function Gq(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function zq(n,e,t){if(":"==n[0]){const m=function qq(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function hq(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function dq(n){return new d.vHH(3015,!1)}()),e;const i=r[1],o=r[2],u=r[3];e.push(KL(i,u));"<"==o[0]&&!("*"==i&&"*"==u)&&e.push(KL(u,i))}(r,t,e)):t.push(n),t}const iT=new Set(["true","1"]),sT=new Set(["false","0"]);function KL(n,e){const t=iT.has(n)||sT.has(n),r=iT.has(e)||sT.has(e);return(i,o)=>{let u="*"==n||n==i,h="*"==e||e==o;return!u&&t&&"boolean"==typeof i&&(u=i?iT.has(n):sT.has(n)),!h&&r&&"boolean"==typeof o&&(h=o?iT.has(e):sT.has(e)),u&&h}}const Wq=new RegExp("s*:selfs*,?","g");function Vk(n,e,t,r){return new Kq(n).build(e,t,r)}class Kq{constructor(e){this._driver=e}build(e,t,r){const i=new Qq(t);return this._resetContextStyleTimingState(i),ia(this,X0(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function eq(){return new d.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const m=h,y=m.name;y.toString().split(/\s*,\s*/).forEach(C=>{m.name=C,o.push(this.visitState(m,t))}),m.name=y}else if(1==h.type){const m=this.visitTransition(h,t);r+=m.queryCount,i+=m.depCount,u.push(m)}else t.errors.push(function tq(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,u=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(m=>{qL(m).forEach(y=>{u.hasOwnProperty(y)||o.add(y)})})}),o.size&&(eT(o.values()),t.errors.push(function nq(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ia(this,X0(e.animation),t);return{type:1,matchers:Gq(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Om(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ia(this,r,t)),options:Om(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(u=>{t.currentTime=r;const h=ia(this,u,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:o,options:Om(e.options)}}visitAnimate(e,t){const r=function Jq(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Uk(XD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=Uk(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=XD(t,e);return Uk(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:WD({});if(5==o.type)i=this.visitKeyframes(o,t);else{let u=e.styles,h=!1;if(!u){h=!0;const y={};r.easing&&(y.easing=r.easing),u=WD(y)}t.currentTime+=r.duration+r.delay;const m=this.visitStyle(u,t);m.isEmptyStep=h,i=m}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===Id?r.push(h):t.errors.push(new d.vHH(3002,!1)):r.push(jL(h));let o=!1,u=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(u=h.get("easing"),h.delete("easing")),!o))for(let m of h.values())if(m.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((h,m)=>{const y=t.collectedStyles.get(t.currentQuerySelector),C=y.get(m);let T=!0;C&&(o!=i&&o>=C.startTime&&i<=C.endTime&&(t.errors.push(function iq(n,e,t,r,i){return new d.vHH(3010,!1)}()),T=!1),o=C.startTime),T&&y.set(m,{startTime:o,endTime:i}),t.options&&function Fq(n,e,t){const r=e.params||{},i=qL(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function Yz(n){return new d.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function sq(){return new d.vHH(3011,!1)}()),r;let o=0;const u=[];let h=!1,m=!1,y=0;const C=e.steps.map(Ue=>{const Ke=this._makeStyleAst(Ue,t);let nt=null!=Ke.offset?Ke.offset:function Xq(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ke.styles),Qe=0;return null!=nt&&(o++,Qe=Ke.offset=nt),m=m||Qe<0||Qe>1,h=h||Qe<y,y=Qe,u.push(Qe),Ke});m&&t.errors.push(function oq(){return new d.vHH(3012,!1)}()),h&&t.errors.push(function aq(){return new d.vHH(3200,!1)}());const T=e.steps.length;let k=0;o>0&&o<T?t.errors.push(function lq(){return new d.vHH(3202,!1)}()):0==o&&(k=1/(T-1));const F=T-1,B=t.currentTime,ee=t.currentAnimateTimings,de=ee.duration;return C.forEach((Ue,Ke)=>{const nt=k>0?Ke==F?1:k*Ke:u[Ke],Qe=nt*de;t.currentTime=B+ee.delay+Qe,ee.duration=Qe,this._validateStyleAst(Ue,t),Ue.offset=nt,r.styles.push(Ue)}),r}visitReference(e,t){return{type:8,animation:ia(this,X0(e.animation),t),options:Om(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Om(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Om(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,u]=function Zq(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Wq,"")),n=n.replace(/@\*/g,QD).replace(/@\w+/g,t=>QD+"-"+t.slice(1)).replace(/:animating/g,Ok),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,ra(t.collectedStyles,t.currentQuerySelector,new Map);const h=ia(this,X0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:Om(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function uq(){return new d.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:XD(e.timings,t.errors,!0);return{type:12,animation:ia(this,X0(e.animation),t),timings:r,options:null}}}class Qq{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Om(n){return n?(n=Q0(n)).params&&(n.params=function Yq(n){return n?Q0(n):null}(n.params)):n={},n}function Uk(n,e,t){return{duration:n,delay:e,easing:t}}function Bk(n,e,t,r,i,o,u=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:u,subTimeline:h}}class oT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const nW=new RegExp(":enter","g"),iW=new RegExp(":leave","g");function Hk(n,e,t,r,i,o=new Map,u=new Map,h,m,y=[]){return(new sW).buildKeyframes(n,e,t,r,i,o,u,h,m,y)}class sW{buildKeyframes(e,t,r,i,o,u,h,m,y,C=[]){y=y||new oT;const T=new jk(e,t,y,i,o,C,[]);T.options=m;const k=m.delay?Df(m.delay):0;T.currentTimeline.delayNextStep(k),T.currentTimeline.setStyles([u],null,T.errors,m),ia(this,r,T);const F=T.timelines.filter(B=>B.containsAnimation());if(F.length&&h.size){let B;for(let ee=F.length-1;ee>=0;ee--){const de=F[ee];if(de.element===t){B=de;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([h],null,T.errors,m)}return F.length?F.map(B=>B.buildKeyframes()):[Bk(t,[],[],[],0,k,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);o!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const u=null!=r.duration?Df(r.duration):null,h=null!=r.delay?Df(r.delay):null;return 0!==u&&e.forEach(m=>{const y=t.appendInstructionToTimeline(m,u,h);o=Math.max(o,y.duration+y.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),ia(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=aT);const u=Df(o.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>ia(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Df(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);o&&h.delayNextStep(o),ia(this,u,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return XD(t.params?JD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(m=>{h.forwardTime((m.offset||0)*o),h.setStyles(m.styles,m.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?Df(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=aT);let u=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let m=null;h.forEach((y,C)=>{t.currentQueryIndex=C;const T=t.createSubContext(e.options,y);o&&T.delayNextStep(o),y===t.element&&(m=T.currentTimeline),ia(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,u=Math.abs(o.duration),h=u*(t.currentQueryTotal-1);let m=u*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":m=h-m;break;case"full":m=r.currentStaggerTime}const C=t.currentTimeline;m&&C.delayNextStep(m);const T=C.currentTime;ia(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-T+(i.startTime-r.currentTimeline.startTime)}}const aT={};class jk{constructor(e,t,r,i,o,u,h,m){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=aT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new lT(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Df(r.duration)),null!=r.delay&&(i.delay=Df(r.delay));const o=r.params;if(o){let u=i.params;u||(u=this.options.params={}),Object.keys(o).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=JD(o[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new jk(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=aT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new oW(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,u){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(nW,"."+this._enterClassName)).replace(iW,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!o&&0==h.length&&u.push(function cq(n){return new d.vHH(3014,!1)}()),h}}class lT{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new lT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Id),this._currentKeyframe.set(t,Id);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},u=function aW(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,Id)}else Tf(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,m]of u){const y=JD(m,o,r);this._pendingStyles.set(h,y),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)||Id),this._updateStyle(h,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,m)=>{const y=Tf(h,new Map,this._backFill);y.forEach((C,T)=>{"!"===C?e.add(T):C===Id&&t.add(T)}),r||y.set("offset",m/this.duration),i.push(y)});const o=e.size?eT(e.values()):[],u=t.size?eT(t.values()):[];if(r){const h=i[0],m=new Map(h);h.set("offset",0),m.set("offset",1),i=[h,m]}return Bk(this.element,i,o,u,this.duration,this.startTime,this.easing,!1)}}class oW extends lT{constructor(e,t,r,i,o,u,h=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],u=r+t,h=t/u,m=Tf(e[0]);m.set("offset",0),o.push(m);const y=Tf(e[0]);y.set("offset",QL(h)),o.push(y);const C=e.length-1;for(let T=1;T<=C;T++){let k=Tf(e[T]);const F=k.get("offset");k.set("offset",QL((t+F*r)/u)),o.push(k)}r=u,t=0,i="",e=o}return Bk(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function QL(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class $k{}const lW=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class uW extends $k{normalizePropertyName(e,t){return Lk(e)}normalizeStyleValue(e,t,r,i){let o="";const u=r.toString().trim();if(lW.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function Jz(n,e){return new d.vHH(3005,!1)}())}return u+o}}function XL(n,e,t,r,i,o,u,h,m,y,C,T,k){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:u,timelines:h,queriedElements:m,preStyleProps:y,postStyleProps:C,totalTime:T,errors:k}}const Gk={};class JL{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function cW(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,u,h,m,y,C){const T=[],k=this.ast.options&&this.ast.options.params||Gk,B=this.buildStyles(r,h&&h.params||Gk,T),ee=m&&m.params||Gk,de=this.buildStyles(i,ee,T),Ue=new Set,Ke=new Map,nt=new Map,Qe="void"===i,St={params:dW(ee,k),delay:this.ast.options?.delay},Nt=C?[]:Hk(e,t,this.ast.animation,o,u,B,de,St,y,T);let on=0;if(Nt.forEach(ua=>{on=Math.max(ua.duration+ua.delay,on)}),T.length)return XL(t,this._triggerName,r,i,Qe,B,de,[],[],Ke,nt,on,T);Nt.forEach(ua=>{const Fd=ua.element,Vj=ra(Ke,Fd,new Set);ua.preStyleProps.forEach(hg=>Vj.add(hg));const uE=ra(nt,Fd,new Set);ua.postStyleProps.forEach(hg=>uE.add(hg)),Fd!==t&&Ue.add(Fd)});const Ur=eT(Ue.values());return XL(t,this._triggerName,r,i,Qe,B,de,Nt,Ur,Ke,nt,on)}}function dW(n,e){const t=Q0(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class hW{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Q0(this.defaultParams);return Object.keys(e).forEach(o=>{const u=e[o];null!==u&&(i[o]=u)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((u,h)=>{u&&(u=JD(u,i,t));const m=this.normalizer.normalizePropertyName(h,t);u=this.normalizer.normalizeStyleValue(h,m,u,t),r.set(m,u)})}),r}}class pW{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new hW(i.style,i.options&&i.options.params||{},r))}),eV(this.states,"true","1"),eV(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new JL(e,i,this.states))}),this.fallbackTransition=function mW(n,e,t){return new JL(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function eV(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const gW=new oT;class _W{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=Vk(this._driver,t,r,[]);if(r.length)throw function _q(n){return new d.vHH(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=RL(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let u;const h=new Map;if(o?(u=Hk(this._driver,t,o,Nk,ZD,new Map,new Map,r,gW,i),u.forEach(C=>{const T=ra(h,C.element,new Map);C.postStyleProps.forEach(k=>T.set(k,null))})):(i.push(function yq(){return new d.vHH(3300,!1)}()),u=[]),i.length)throw function vq(n){return new d.vHH(3504,!1)}();h.forEach((C,T)=>{C.forEach((k,F)=>{C.set(F,this._driver.computeStyle(T,F,Id))})});const y=If(u.map(C=>{const T=h.get(C.element);return this._buildPlayer(C,new Map,T)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function bq(n){return new d.vHH(3301,!1)}();return t}listen(e,t,r,i){const o=Mk(t,"","","");return Sk(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const tV="ng-animate-queued",zk="ng-animate-disabled",EW=[],nV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},CW={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},sl="__ng_removed";class qk{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function SW(n){return n??null}(r?e.value:e),r){const o=Q0(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const J0="void",Wk=new qk(J0);class IW{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ol(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function wq(n,e){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function Eq(n){return new d.vHH(3303,!1)}();if(!function AW(n){return"start"==n||"done"==n}(r))throw function Cq(n,e){return new d.vHH(3400,!1)}();const o=ra(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};o.push(u);const h=ra(this._engine.statesByElement,e,new Map);return h.has(t)||(ol(e,YD),ol(e,YD+"-"+t),h.set(t,Wk)),()=>{this._engine.afterFlush(()=>{const m=o.indexOf(u);m>=0&&o.splice(m,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Iq(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),u=new Kk(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(ol(e,YD),ol(e,YD+"-"+t),this._engine.statesByElement.set(e,h=new Map));let m=h.get(t);const y=new qk(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&m&&y.absorbOptions(m.options),h.set(t,y),m||(m=Wk),y.value!==J0&&m.value===y.value){if(!function kW(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(m.params,y.params)){const ee=[],de=o.matchStyles(m.value,m.params,ee),Ue=o.matchStyles(y.value,y.params,ee);ee.length?this._engine.reportError(ee):this._engine.afterFlush(()=>{Nm(e,de),sc(e,Ue)})}return}const k=ra(this._engine.playersByElement,e,[]);k.forEach(ee=>{ee.namespaceId==this.id&&ee.triggerName==t&&ee.queued&&ee.destroy()});let F=o.matchTransition(m.value,y.value,e,y.params),B=!1;if(!F){if(!i)return;F=o.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:F,fromState:m,toState:y,player:u,isFallbackTransition:B}),B||(ol(e,tV),u.onStart(()=>{gy(e,tV)})),u.onDone(()=>{let ee=this.players.indexOf(u);ee>=0&&this.players.splice(ee,1);const de=this._engine.playersByElement.get(e);if(de){let Ue=de.indexOf(u);Ue>=0&&de.splice(Ue,1)}}),this.players.push(u),k.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,QD,!0);r.forEach(i=>{if(i[sl])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),u=new Map;if(o){const h=[];if(o.forEach((m,y)=>{if(u.set(y,m.value),this._triggers.has(y)){const C=this.trigger(e,y,J0,i);C&&h.push(C)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&If(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const u=o.name;if(i.has(u))return;i.add(u);const m=this._triggers.get(u).fallbackTransition,y=r.get(u)||Wk,C=new qk(J0),T=new Kk(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:m,fromState:y,toState:C,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[sl];(!o||o===nV)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ol(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,u=this._elementListeners.get(o);u&&u.forEach(h=>{if(h.name==r.triggerName){const m=Mk(o,r.triggerName,r.fromState.value,r.toState.value);m._data=e,Sk(r.player,h.phase,m,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==o||0==u?o-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class DW{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new IW(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let u=!1,h=this.driver.getParentElement(t);for(;h;){const m=i.get(h);if(m){const y=r.indexOf(m);r.splice(y+1,0,e),u=!0;break}h=this.driver.getParentElement(h)}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(uT(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!uT(t))return;const o=t[sl];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ol(e,zk)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),gy(e,zk))}removeNode(e,t,r,i){if(uT(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[sl]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return uT(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,QD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Ok,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return If(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[sl];if(t&&t.setForRemoval){if(e[sl]=nV,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(zk)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ol(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?If(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Dq(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new oT,i=[],o=new Map,u=[],h=new Map,m=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(gt=>{C.add(gt);const Ct=this.driver.query(gt,".ng-animate-queued",!0);for(let Ot=0;Ot<Ct.length;Ot++)C.add(Ct[Ot])});const T=this.bodyNode,k=Array.from(this.statesByElement.keys()),F=sV(k,this.collectedEnterElements),B=new Map;let ee=0;F.forEach((gt,Ct)=>{const Ot=Nk+ee++;B.set(Ct,Ot),gt.forEach(yn=>ol(yn,Ot))});const de=[],Ue=new Set,Ke=new Set;for(let gt=0;gt<this.collectedLeaveElements.length;gt++){const Ct=this.collectedLeaveElements[gt],Ot=Ct[sl];Ot&&Ot.setForRemoval&&(de.push(Ct),Ue.add(Ct),Ot.hasAnimation?this.driver.query(Ct,".ng-star-inserted",!0).forEach(yn=>Ue.add(yn)):Ke.add(Ct))}const nt=new Map,Qe=sV(k,Array.from(Ue));Qe.forEach((gt,Ct)=>{const Ot=ZD+ee++;nt.set(Ct,Ot),gt.forEach(yn=>ol(yn,Ot))}),e.push(()=>{F.forEach((gt,Ct)=>{const Ot=B.get(Ct);gt.forEach(yn=>gy(yn,Ot))}),Qe.forEach((gt,Ct)=>{const Ot=nt.get(Ct);gt.forEach(yn=>gy(yn,Ot))}),de.forEach(gt=>{this.processLeaveNode(gt)})});const St=[],Nt=[];for(let gt=this._namespaceList.length-1;gt>=0;gt--)this._namespaceList[gt].drainQueuedTransitions(t).forEach(Ot=>{const yn=Ot.player,Vi=Ot.element;if(St.push(yn),this.collectedEnterElements.length){const ws=Vi[sl];if(ws&&ws.setForMove){if(ws.previousTriggersValues&&ws.previousTriggersValues.has(Ot.triggerName)){const fg=ws.previousTriggersValues.get(Ot.triggerName),ul=this.statesByElement.get(Ot.element);if(ul&&ul.has(Ot.triggerName)){const NS=ul.get(Ot.triggerName);NS.value=fg,ul.set(Ot.triggerName,NS)}}return void yn.destroy()}}const mc=!T||!this.driver.containsElement(T,Vi),ca=nt.get(Vi),qf=B.get(Vi),Ir=this._buildInstruction(Ot,r,qf,ca,mc);if(Ir.errors&&Ir.errors.length)return void Nt.push(Ir);if(mc)return yn.onStart(()=>Nm(Vi,Ir.fromStyles)),yn.onDestroy(()=>sc(Vi,Ir.toStyles)),void i.push(yn);if(Ot.isFallbackTransition)return yn.onStart(()=>Nm(Vi,Ir.fromStyles)),yn.onDestroy(()=>sc(Vi,Ir.toStyles)),void i.push(yn);const Hj=[];Ir.timelines.forEach(ws=>{ws.stretchStartingKeyframe=!0,this.disabledNodes.has(ws.element)||Hj.push(ws)}),Ir.timelines=Hj,r.append(Vi,Ir.timelines),u.push({instruction:Ir,player:yn,element:Vi}),Ir.queriedElements.forEach(ws=>ra(h,ws,[]).push(yn)),Ir.preStyleProps.forEach((ws,fg)=>{if(ws.size){let ul=m.get(fg);ul||m.set(fg,ul=new Set),ws.forEach((NS,iP)=>ul.add(iP))}}),Ir.postStyleProps.forEach((ws,fg)=>{let ul=y.get(fg);ul||y.set(fg,ul=new Set),ws.forEach((NS,iP)=>ul.add(iP))})});if(Nt.length){const gt=[];Nt.forEach(Ct=>{gt.push(function Tq(n,e){return new d.vHH(3505,!1)}())}),St.forEach(Ct=>Ct.destroy()),this.reportError(gt)}const on=new Map,Ur=new Map;u.forEach(gt=>{const Ct=gt.element;r.has(Ct)&&(Ur.set(Ct,Ct),this._beforeAnimationBuild(gt.player.namespaceId,gt.instruction,on))}),i.forEach(gt=>{const Ct=gt.element;this._getPreviousPlayers(Ct,!1,gt.namespaceId,gt.triggerName,null).forEach(yn=>{ra(on,Ct,[]).push(yn),yn.destroy()})});const ua=de.filter(gt=>aV(gt,m,y)),Fd=new Map;iV(Fd,this.driver,Ke,y,Id).forEach(gt=>{aV(gt,m,y)&&ua.push(gt)});const uE=new Map;F.forEach((gt,Ct)=>{iV(uE,this.driver,new Set(gt),m,"!")}),ua.forEach(gt=>{const Ct=Fd.get(gt),Ot=uE.get(gt);Fd.set(gt,new Map([...Array.from(Ct?.entries()??[]),...Array.from(Ot?.entries()??[])]))});const hg=[],Uj=[],Bj={};u.forEach(gt=>{const{element:Ct,player:Ot,instruction:yn}=gt;if(r.has(Ct)){if(C.has(Ct))return Ot.onDestroy(()=>sc(Ct,yn.toStyles)),Ot.disabled=!0,Ot.overrideTotalTime(yn.totalTime),void i.push(Ot);let Vi=Bj;if(Ur.size>1){let ca=Ct;const qf=[];for(;ca=ca.parentNode;){const Ir=Ur.get(ca);if(Ir){Vi=Ir;break}qf.push(ca)}qf.forEach(Ir=>Ur.set(Ir,Vi))}const mc=this._buildAnimation(Ot.namespaceId,yn,on,o,uE,Fd);if(Ot.setRealPlayer(mc),Vi===Bj)hg.push(Ot);else{const ca=this.playersByElement.get(Vi);ca&&ca.length&&(Ot.parentPlayer=If(ca)),i.push(Ot)}}else Nm(Ct,yn.fromStyles),Ot.onDestroy(()=>sc(Ct,yn.toStyles)),Uj.push(Ot),C.has(Ct)&&i.push(Ot)}),Uj.forEach(gt=>{const Ct=o.get(gt.element);if(Ct&&Ct.length){const Ot=If(Ct);gt.setRealPlayer(Ot)}}),i.forEach(gt=>{gt.parentPlayer?gt.syncPlayerEvents(gt.parentPlayer):gt.destroy()});for(let gt=0;gt<de.length;gt++){const Ct=de[gt],Ot=Ct[sl];if(gy(Ct,ZD),Ot&&Ot.hasAnimation)continue;let yn=[];if(h.size){let mc=h.get(Ct);mc&&mc.length&&yn.push(...mc);let ca=this.driver.query(Ct,Ok,!0);for(let qf=0;qf<ca.length;qf++){let Ir=h.get(ca[qf]);Ir&&Ir.length&&yn.push(...Ir)}}const Vi=yn.filter(mc=>!mc.destroyed);Vi.length?MW(this,Ct,Vi):this.processLeaveNode(Ct)}return de.length=0,hg.forEach(gt=>{this.players.push(gt),gt.onDone(()=>{gt.destroy();const Ct=this.players.indexOf(gt);this.players.splice(Ct,1)}),gt.play()}),hg}elementContainsData(e,t){let r=!1;const i=t[sl];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const m=!o||o==J0;h.forEach(y=>{y.queued||!m&&y.triggerName!=i||u.push(y)})}}return(r||i)&&(u=u.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),u}_beforeAnimationBuild(e,t,r){const o=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const y=m.element,C=y!==o,T=ra(r,y,[]);this._getPreviousPlayers(y,C,u,h,t.toState).forEach(F=>{const B=F.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),F.destroy(),T.push(F)})}Nm(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,u){const h=t.triggerName,m=t.element,y=[],C=new Set,T=new Set,k=t.timelines.map(B=>{const ee=B.element;C.add(ee);const de=ee[sl];if(de&&de.removedBeforeQueried)return new Y0(B.duration,B.delay);const Ue=ee!==m,Ke=function xW(n){const e=[];return oV(n,e),e}((r.get(ee)||EW).map(on=>on.getRealPlayer())).filter(on=>!!on.element&&on.element===ee),nt=o.get(ee),Qe=u.get(ee),St=RL(0,this._normalizer,0,B.keyframes,nt,Qe),Nt=this._buildPlayer(B,St,Ke);if(B.subTimeline&&i&&T.add(ee),Ue){const on=new Kk(e,h,ee);on.setRealPlayer(Nt),y.push(on)}return Nt});y.forEach(B=>{ra(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function TW(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,B.element,B))}),C.forEach(B=>ol(B,HL));const F=If(k);return F.onDestroy(()=>{C.forEach(B=>gy(B,HL)),sc(m,t.toStyles)}),T.forEach(B=>{ra(i,B,[]).push(F)}),F}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Y0(e.duration,e.delay)}}class Kk{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Y0,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Sk(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ra(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function uT(n){return n&&1===n.nodeType}function rV(n,e){const t=n.style.display;return n.style.display=e??"none",t}function iV(n,e,t,r,i){const o=[];t.forEach(m=>o.push(rV(m)));const u=[];r.forEach((m,y)=>{const C=new Map;m.forEach(T=>{const k=e.computeStyle(y,T,i);C.set(T,k),(!k||0==k.length)&&(y[sl]=CW,u.push(y))}),n.set(y,C)});let h=0;return t.forEach(m=>rV(m,o[h++])),u}function sV(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),o=new Map;function u(h){if(!h)return 1;let m=o.get(h);if(m)return m;const y=h.parentNode;return m=t.has(y)?y:i.has(y)?1:u(y),o.set(h,m),m}return e.forEach(h=>{const m=u(h);1!==m&&t.get(m).push(h)}),t}function ol(n,e){n.classList?.add(e)}function gy(n,e){n.classList?.remove(e)}function MW(n,e,t){If(t).onDone(()=>n.processLeaveNode(e))}function oV(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof EL?oV(r.players,e):e.push(r)}}function aV(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class cT{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new DW(e,t,r),this._timelineEngine=new _W(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const u=e+"-"+i;let h=this._triggerCache[u];if(!h){const m=[],C=Vk(this._driver,o,m,[]);if(m.length)throw function mq(n,e){return new d.vHH(3404,!1)}();h=function fW(n,e,t){return new pW(n,e,t)}(i,C,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,u]=NL(r);this._timelineEngine.command(o,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[u,h]=NL(r);return this._timelineEngine.listen(u,t,h,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let NW=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&sc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(sc(this._element,this._initialStyles),this._endStyles&&(sc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Nm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Nm(this._element,this._endStyles),this._endStyles=null),sc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Zk(n){let e=null;return n.forEach((t,r)=>{(function OW(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class lV{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:WL(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class PW{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return LL(e,t)}getParentElement(e){return kk(e)}query(e,t,r){return VL(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,u=[]){const m={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(m.easing=o);const y=new Map,C=u.filter(F=>F instanceof lV);(function Uq(n,e){return 0===n||0===e})(r,i)&&C.forEach(F=>{F.currentSnapshot.forEach((B,ee)=>y.set(ee,B))});let T=function Pq(n){return n.length?n[0]instanceof Map?n:n.map(e=>jL(e)):[]}(t).map(F=>Tf(F));T=function Bq(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,u)=>{r.has(u)||i.push(u),r.set(u,o)}),i.length)for(let o=1;o<e.length;o++){let u=e[o];i.forEach(h=>u.set(h,WL(n,h)))}}return e}(e,T,y);const k=function RW(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Zk(e[0]),e.length>1&&(r=Zk(e[e.length-1]))):e instanceof Map&&(t=Zk(e)),t||r?new NW(n,t,r):null}(e,T);return new lV(e,T,m,k)}}let FW=(()=>{class n extends vL{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?bL(t):t;return uV(this._renderer,null,r,"register",[i]),new LW(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class LW extends class cz{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new VW(this._id,e,t||{},this._renderer)}}class VW{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return uV(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function uV(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const cV="@.disabled";let UW=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,u)=>{const h=u?.parentNode(o);h&&u.removeChild(h,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(o);return C||(C=new dV("",o,this.engine),this._rendererCache.set(o,C)),C}const u=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const m=C=>{Array.isArray(C)?C.forEach(m):this.engine.registerTrigger(u,h,t,C.name,C)};return r.data.animation.forEach(m),new BW(this,h,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[u,h]=o;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(cT),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class dV{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==cV?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class BW extends dV{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==cV?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function HW(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),u="";return"@"!=o.charAt(0)&&([o,u]=function jW(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let $W=(()=>{class n extends cT{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae),d.LFG(Rk),d.LFG($k),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const hV=[{provide:vL,useClass:FW},{provide:$k,useFactory:function GW(){return new uW}},{provide:cT,useClass:$W},{provide:d.FYo,useFactory:function zW(n,e,t){return new UW(n,e,t)},deps:[Ts,cT,d.R0b]}],fV=[{provide:Rk,useFactory:()=>new PW},{provide:d.QbO,useValue:"BrowserAnimations"},...hV],qW=[{provide:Rk,useClass:UL},{provide:d.QbO,useValue:"NoopAnimations"},...hV];let WW=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?qW:fV}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:fV,imports:[dn]}),n})(),KW=(()=>{class n{constructor(){this.title="agroceries"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Ep]}),n})();const pV="firebasestorage.googleapis.com",mV="storageBucket";class Mr extends P.ZR{constructor(e,t){super(Yk(e),`Firebase Storage: ${t} (${Yk(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mr.prototype)}_codeEquals(e){return Yk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Yk(n){return"storage/"+n}function Qk(){return new Mr("unknown","An unknown error occurred, please check the error payload for server response.")}function gV(){return new Mr("canceled","User canceled the upload/download.")}function _V(){return new Mr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function _y(n){return new Mr("invalid-argument",n)}function yV(){return new Mr("app-deleted","The Firebase app was deleted.")}function vV(n){return new Mr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ew(n,e){return new Mr("invalid-format","String does not match format '"+n+"': "+e)}function tw(n){throw new Mr("internal-error","Internal error: "+n)}class ys{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ys.makeFromUrl(e,t)}catch{return new ys(e,"")}if(""===r.path)return r;throw function i6(n){return new Mr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Qe){Qe.path_=decodeURIComponent(Qe.path)}const T=t.replace(/[.]/g,"\\."),nt=[{regex:h,indices:{bucket:1,path:3},postModify:function o(Qe){"/"===Qe.path.charAt(Qe.path.length-1)&&(Qe.path_=Qe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===pV?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Qe=0;Qe<nt.length;Qe++){const St=nt[Qe],Nt=St.regex.exec(e);if(Nt){let Ur=Nt[St.indices.path];Ur||(Ur=""),r=new ys(Nt[St.indices.bucket],Ur),St.postModify(r);break}}if(null==r)throw function r6(n){return new Mr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class l6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function hT(n){return"string"==typeof n||n instanceof String}function bV(n){return Xk()&&n instanceof Blob}function Xk(){return typeof Blob<"u"}function Jk(n,e,t,r){if(r<e)throw _y(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw _y(`Invalid value for '${n}'. Expected ${t} or less.`)}function Dd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function wV(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Sf=(()=>{return(n=Sf||(Sf={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Sf;var n})();class p6{constructor(e,t,r,i,o,u,h,m,y,C,T){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=m,this.timeout_=y,this.progressCallback_=C,this.connectionFactory_=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,F)=>{this.resolve_=k,this.reject_=F,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,u=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function d6(n){return void 0!==n}(m)?o():o(m)}catch(m){u(m)}else if(null!==h){const m=Qk();m.serverResponse=h.getErrorText(),u(this.errorCallback_?this.errorCallback_(h,m):m)}else u(i.canceled?this.appDelete_?yV():gV():function n6(){return new Mr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new fT(!1,null,!0)):this.backoffId_=function u6(n,e,t){let r=1,i=null,o=null,u=!1,h=0;function m(){return 2===h}let y=!1;function C(...de){y||(y=!0,e.apply(null,de))}function T(de){i=setTimeout(()=>{i=null,n(F,m())},de)}function k(){o&&clearTimeout(o)}function F(de,...Ue){if(y)return void k();if(de)return k(),void C.call(null,de,...Ue);if(m()||u)return k(),void C.call(null,de,...Ue);let nt;r<64&&(r*=2),1===h?(h=2,nt=0):nt=1e3*(r+Math.random()),T(nt)}let B=!1;function ee(de){B||(B=!0,k(),!y&&(null!==i?(de||(h=2),clearTimeout(i),T(0)):de||(h=1)))}return T(0),o=setTimeout(()=>{u=!0,ee(!0)},t),ee}((r,i)=>{if(i)return void r(!1,new fT(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const u=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const h=o.getErrorCode()===Sf.NO_ERROR,m=o.getStatus();if(!h||this.isRetryStatusCode_(m)){const C=o.getErrorCode()===Sf.ABORT;return void r(!1,new fT(!1,null,C))}const y=-1!==this.successCodes_.indexOf(m);r(!0,new fT(y,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function c6(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),o=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||o}}class fT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function w6(...n){const e=function b6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Xk())return new Blob(n);throw new Mr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const sa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class eR{constructor(e,t){this.data=e,this.contentType=t||null}}function tR(n,e){switch(n){case sa.RAW:return new eR(EV(e));case sa.BASE64:case sa.BASE64URL:return new eR(CV(n,e));case sa.DATA_URL:return new eR(function D6(n){const e=new IV(n);return e.base64?CV(sa.BASE64,e.rest):function I6(n){let e;try{e=decodeURIComponent(n)}catch{throw ew(sa.DATA_URL,"Malformed data URL.")}return EV(e)}(e.rest)}(e),function T6(n){return new IV(n).contentType}(e))}throw Qk()}function EV(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function CV(n,e){switch(n){case sa.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw ew(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case sa.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw ew(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function C6(n){return atob(n)}(e)}catch{throw ew(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class IV{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ew(sa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function S6(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class oc{constructor(e,t){let r=0,i="";bV(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(bV(this.data_)){const i=function E6(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new oc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new oc(r,!0)}}static getBlob(...e){if(Xk()){const t=e.map(r=>r instanceof oc?r.data_:r);return new oc(w6.apply(null,t))}{const t=e.map(u=>hT(u)?tR(sa.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)i[o++]=u[h]}),new oc(i,!0)}}uploadData(){return this.data_}}function nR(n){let e;try{e=JSON.parse(n)}catch{return null}return function f6(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function DV(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function x6(n,e){return e}class $s{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||x6}}let pT=null;function nw(){if(pT)return pT;const n=[];n.push(new $s("bucket")),n.push(new $s("generation")),n.push(new $s("metageneration")),n.push(new $s("name","fullPath",!0));const t=new $s("name");t.xform=function e(o,u){return function k6(n){return!hT(n)||n.length<2?n:DV(n)}(u)},n.push(t);const i=new $s("size");return i.xform=function r(o,u){return void 0!==u?Number(u):u},n.push(i),n.push(new $s("timeCreated")),n.push(new $s("updated")),n.push(new $s("md5Hash",null,!0)),n.push(new $s("cacheControl",null,!0)),n.push(new $s("contentDisposition",null,!0)),n.push(new $s("contentEncoding",null,!0)),n.push(new $s("contentLanguage",null,!0)),n.push(new $s("contentType",null,!0)),n.push(new $s("metadata","customMetadata",!0)),pT=n,pT}function TV(n,e,t){const r=nR(e);return null===r?null:function N6(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const u=t[o];r[u.local]=u.xform(r,e[u.server])}return function R6(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new ys(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function rR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const SV="prefixes";class ac{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function lc(n){if(!n)throw Qk()}function mT(n,e){return function t(r,i){const o=TV(n,i,e);return lc(null!==o),o}}function yy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function e6(){return new Mr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function JW(){return new Mr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function XW(n){return new Mr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function t6(n){return new Mr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function rw(n){const e=yy(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function QW(n){return new Mr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function MV(n,e,t){const i=Dd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new ac(i,"GET",mT(n,t),u);return h.errorHandler=rw(e),h}function U6(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const h=Dd(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,C=new ac(h,"GET",function L6(n,e){return function t(r,i){const o=function F6(n,e,t){const r=nR(t);return null===r?null:function P6(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[SV])for(const i of t[SV]){const o=i.replace(/\/$/,""),u=n._makeStorageReference(new ys(e,o));r.prefixes.push(u)}if(t.items)for(const i of t.items){const o=n._makeStorageReference(new ys(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return lc(null!==o),o}}(n,e.bucket),y);return C.urlParams=o,C.errorHandler=yy(e),C}function kV(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function $6(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class gT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function iR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{lc(!1)}return lc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const W6={STATE_CHANGED:"state_changed"},Gs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function sR(n){switch(n){case"running":case"pausing":case"canceling":return Gs.RUNNING;case"paused":return Gs.PAUSED;case"success":return Gs.SUCCESS;case"canceled":return Gs.CANCELED;default:return Gs.ERROR}}class K6{constructor(e,t,r){if(function h6(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function vy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Y6 extends class Z6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Sf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Sf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Sf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw tw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Zl(){return new Y6}class PV{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=nw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function G6(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),u=kV(e,r,i),h={name:u.fullPath},m=Dd(o,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},T=rR(u,t),B=new ac(m,"POST",function F(ee){let de;iR(ee);try{de=ee.getResponseHeader("X-Goog-Upload-URL")}catch{lc(!1)}return lc(hT(de)),de},n.maxUploadRetryTime);return B.urlParams=h,B.headers=C,B.body=T,B.errorHandler=yy(e),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function z6(n,e,t,r){const m=new ac(t,"POST",function o(y){const C=iR(y,["active","final"]);let T=null;try{T=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{lc(!1)}T||lc(!1);const k=Number(T);return lc(!isNaN(k)),new gT(k,r.size(),"final"===C)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=yy(e),m}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Zl,t,r);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new gT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let u;try{u=function q6(n,e,t,r,i,o,u,h){const m=new gT(0,0);if(u?(m.current=u.current,m.total=u.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function o6(){return new Mr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=m.total-m.current;let C=y;i>0&&(C=Math.min(C,i));const T=m.current,B={"X-Goog-Upload-Command":C===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},ee=r.slice(T,T+C);if(null===ee)throw _V();const nt=new ac(t,"POST",function de(Qe,St){const Nt=iR(Qe,["active","final"]),on=m.current+C,Ur=r.size();let ua;return ua="final"===Nt?mT(e,o)(Qe,St):null,new gT(on,Ur,"final"===Nt,ua)},e.maxUploadRetryTime);return nt.headers=B,nt.body=ee.uploadData(),nt.progressCallback=h||null,nt.errorHandler=yy(n),nt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(u,Zl,i,o);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=MV(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Zl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function RV(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let nt="";for(let Qe=0;Qe<2;Qe++)nt+=Math.random().toString().slice(2);return nt}();u["Content-Type"]="multipart/related; boundary="+m;const y=kV(e,r,i),C=rR(y,t),F=oc.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+m+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===F)throw _V();const B={name:y.fullPath},ee=Dd(o,n.host,n._protocol),Ue=n.maxUploadRetryTime,Ke=new ac(ee,"POST",mT(n,t),Ue);return Ke.urlParams=B,Ke.headers=u,Ke.body=F.uploadData(),Ke.errorHandler=yy(e),Ke}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=gV(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=sR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new K6(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(sR(this._state)){case Gs.SUCCESS:vy(this._resolve.bind(null,this.snapshot))();break;case Gs.CANCELED:case Gs.ERROR:vy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(sR(this._state)){case Gs.RUNNING:case Gs.PAUSED:e.next&&vy(e.next.bind(e,this.snapshot))();break;case Gs.SUCCESS:e.complete&&vy(e.complete.bind(e))();break;default:e.error&&vy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Pm{constructor(e,t){this._service=e,this._location=t instanceof ys?t:ys.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Pm(e,t)}get root(){const e=new ys(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return DV(this._location.path)}get storage(){return this._service}get parent(){const e=function A6(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ys(this._location.bucket,e);return new Pm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw vV(e)}}function LV(n,e,t){return oR.apply(this,arguments)}function oR(){return(oR=(0,we.Z)(function*(n,e,t){const i=yield VV(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield LV(n,e,i.nextPageToken))})).apply(this,arguments)}function VV(n,e){null!=e&&"number"==typeof e.maxResults&&Jk("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=U6(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Zl)}function l4(n){n._throwIfRoot("getDownloadURL");const e=function B6(n,e,t){const i=Dd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new ac(i,"GET",function V6(n,e){return function t(r,i){const o=TV(n,i,e);return lc(null!==o),function O6(n,e,t,r){const i=nR(e);if(null===i||!hT(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const u=encodeURIComponent;return o.split(",").map(y=>{const T=n.fullPath;return Dd("/b/"+u(n.bucket)+"/o/"+u(T),t,r)+wV({alt:"media",token:y})})[0]}(o,i,n.host,n._protocol)}}(n,t),u);return h.errorHandler=rw(e),h}(n.storage,n._location,nw());return n.storage.makeRequestWithTokens(e,Zl).then(t=>{if(null===t)throw function a6(){return new Mr("no-download-url","The given file does not have any download URLs.")}();return t})}function UV(n,e){const t=function M6(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ys(n._location.bucket,t);return new Pm(n.storage,r)}function BV(n,e){if(n instanceof aR){const t=n;if(null==t._bucket)throw function s6(){return new Mr("no-default-bucket","No default bucket found. Did you set the '"+mV+"' property when initializing the app?")}();const r=new Pm(t,t._bucket);return null!=e?BV(r,e):r}return void 0!==e?UV(n,e):n}function h4(n,e){if(e&&function c4(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof aR)return function d4(n,e){return new Pm(n,e)}(n,e);throw _y("To use ref(service, url), the first argument must be a Storage instance.")}return BV(n,e)}function HV(n,e){const t=e?.[mV];return null==t?null:ys.makeFromBucketSpec(t,n)}class aR{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=pV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ys.makeFromBucketSpec(i,this._host):HV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ys.makeFromBucketSpec(this._url,e):HV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Jk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Jk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,we.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,we.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pm(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new l6(yV());{const o=function v6(n,e,t,r,i,o){const u=wV(n.urlParams),h=n.url+u,m=Object.assign({},n.headers);return function _6(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function m6(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function g6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(m,o),function y6(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new p6(h,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,we.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const jV="@firebase/storage";function zV(n,e){return h4(n=(0,P.m9)(n),e)}function C4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new aR(t,r,i,e,Yi.SDK_VERSION)}!function I4(){(0,Yi._registerComponent)(new Us.wA("storage",C4,"PUBLIC").setMultipleInstances(!0)),(0,Yi.registerVersion)(jV,"0.9.9",""),(0,Yi.registerVersion)(jV,"0.9.9","esm2017")}();class _T{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class qV{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new _T(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new _T(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?u=>t(new _T(u,this,this._ref)):{next:t.next?u=>t.next(new _T(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class WV{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Td(e,this._service))}get items(){return this._delegate.items.map(e=>new Td(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Td{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function w4(n,e){return UV(n,e)}(this._delegate,e);return new Td(t,this.storage)}get root(){return new Td(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Td(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new qV(function p4(n,e,t){return function r4(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new PV(n,new oc(e),t)}(n=(0,P.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=sa.RAW,r){this._throwIfRoot("putString");const i=tR(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new qV(new PV(this._delegate,new oc(i.data,!0),o),this)}listAll(){return function y4(n){return function s4(n){const e={prefixes:[],items:[]};return LV(n,e).then(()=>e)}(n=(0,P.m9)(n))}(this._delegate).then(e=>new WV(e,this.storage))}list(e){return function _4(n,e){return VV(n=(0,P.m9)(n),e)}(this._delegate,e||void 0).then(t=>new WV(t,this.storage))}getMetadata(){return function m4(n){return function o4(n){n._throwIfRoot("getMetadata");const e=MV(n.storage,n._location,nw());return n.storage.makeRequestWithTokens(e,Zl)}(n=(0,P.m9)(n))}(this._delegate)}updateMetadata(e){return function g4(n,e){return function a4(n,e){n._throwIfRoot("updateMetadata");const t=function H6(n,e,t,r){const o=Dd(e.fullServerUrl(),n.host,n._protocol),h=rR(t,r),y=n.maxOperationRetryTime,C=new ac(o,"PATCH",mT(n,r),y);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=h,C.errorHandler=rw(e),C}(n.storage,n._location,e,nw());return n.storage.makeRequestWithTokens(t,Zl)}(n=(0,P.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function v4(n){return l4(n=(0,P.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function b4(n){return function u4(n){n._throwIfRoot("deleteObject");const e=function j6(n,e){const r=Dd(e.fullServerUrl(),n.host,n._protocol),h=new ac(r,"DELETE",function u(m,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=rw(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Zl)}(n=(0,P.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw vV(e)}}class KV{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(ZV(e))throw _y("ref() expected a child path but got a URL, use refFromURL instead.");return new Td(zV(this._delegate,e),this)}refFromURL(e){if(!ZV(e))throw _y("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ys.makeFromUrl(e,this._delegate.host)}catch{throw _y("refFromUrl() expected a valid full URL but got an invalid one.")}return new Td(zV(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function E4(n,e,t,r={}){!function f4(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,P.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function ZV(n){return/^[A-Za-z]+:\/\//.test(n)}function A4(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new KV(t,r)}function YV(n){const e=function x4(n){return new dr.y(e=>{const t=u=>e.next(u);t(n.snapshot);const o=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){o()}}).pipe(Qx(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,at.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function yT(n){return{getDownloadURL:()=>He(void 0).pipe(ln.fc,Er(()=>n.getDownloadURL()),ln.iC),getMetadata:()=>He(void 0).pipe(ln.fc,Er(()=>n.getMetadata()),ln.iC),delete:()=>(0,tn.D)(n.delete()),child:e=>yT(n.child(e)),updateMetadata:e=>(0,tn.D)(n.updateMetadata(e)),put:(e,t)=>YV(n.put(e,t)),putString:(e,t,r)=>YV(n.putString(e,t,r)),list:e=>(0,tn.D)(n.list(e)),listAll:()=>(0,tn.D)(n.listAll())}}!function M4(n){const e={TaskState:Gs,TaskEvent:W6,StringFormat:sa,Storage:KV,Reference:Td};n.INTERNAL.registerComponent(new Us.wA("storage-compat",A4,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(n_.Z);const k4=new d.OlP("angularfire2.storageBucket"),R4=new d.OlP("angularfire2.storage.maxUploadRetryTime"),N4=new d.OlP("angularfire2.storage.maxOperationRetryTime"),O4=new d.OlP("angularfire2.storage.use-emulator");let P4=(()=>{class n{constructor(t,r,i,o,u,h,m,y,C,T){const k=(0,Ar.on)(t,u,r);this.storage=(0,Ar.cc)(`${k.name}.storage.${i}`,"AngularFireStorage",k.name,()=>{const F=u.runOutsideAngular(()=>k.storage(i||void 0)),B=C;return B&&F.useEmulator(...B),m&&F.setMaxUploadRetryTime(m),y&&F.setMaxOperationRetryTime(y),F},[m,y])}ref(t){return yT(this.storage.ref(t))}refFromURL(t){return yT(this.storage.refFromURL(t))}upload(t,r,i){return yT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ar.Dh),d.LFG(Ar.xv,8),d.LFG(k4,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(ln.HU),d.LFG(R4,8),d.LFG(N4,8),d.LFG(O4,8),d.LFG(ed,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),F4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),L4=(()=>{class n{constructor(){Up.Z.registerVersion("angularfire",ln.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[P4],imports:[F4]}),n})();function lR(){return(0,bn.e)((n,e)=>{let t,r=!1;n.subscribe((0,An.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}var ct,V4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sd={},uR=uR||{},Ut=V4||self;function vT(){}function cR(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function iw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var dR="closure_uid_"+(1e9*Math.random()>>>0),B4=0;function H4(n,e,t){return n.call.apply(n.bind,arguments)}function j4(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ns(n,e,t){return(ns=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?H4:j4).apply(null,arguments)}function bT(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function rs(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,o){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function Af(){this.s=this.s,this.o=this.o}var G4={};Af.prototype.s=!1,Af.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function U4(n){return Object.prototype.hasOwnProperty.call(n,dR)&&n[dR]||(n[dR]=++B4)}(this);delete G4[n]}},Af.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const QV=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},XV=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let o=0;o<r;o++)o in i&&e.call(t,i[o],o,n)};function JV(n){return Array.prototype.concat.apply([],arguments)}function hR(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function wT(n){return/^[\s\xa0]*$/.test(n)}var qs,eU=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function zs(n,e){return-1!=n.indexOf(e)}function fR(n,e){return n<e?-1:n>e?1:0}e:{var tU=Ut.navigator;if(tU){var nU=tU.userAgent;if(nU){qs=nU;break e}}qs=""}function pR(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function rU(n){const e={};for(const t in n)e[t]=n[t];return e}var iU="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sU(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<iU.length;o++)t=iU[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function mR(n){return mR[" "](n),n}mR[" "]=vT;var ET,n,W4=zs(qs,"Opera"),by=zs(qs,"Trident")||zs(qs,"MSIE"),oU=zs(qs,"Edge"),gR=oU||by,aU=zs(qs,"Gecko")&&!(zs(qs.toLowerCase(),"webkit")&&!zs(qs,"Edge"))&&!(zs(qs,"Trident")||zs(qs,"MSIE"))&&!zs(qs,"Edge"),K4=zs(qs.toLowerCase(),"webkit")&&!zs(qs,"Edge");function lU(){var n=Ut.document;return n?n.documentMode:void 0}e:{var _R="",yR=(n=qs,aU?/rv:([^\);]+)(\)|;)/.exec(n):oU?/Edge\/([\d\.]+)/.exec(n):by?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):K4?/WebKit\/(\S+)/.exec(n):W4?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(yR&&(_R=yR?yR[1]:""),by){var vR=lU();if(null!=vR&&vR>parseFloat(_R)){ET=String(vR);break e}}ET=_R}var Z4={};var Q4=Ut.document&&by&&(lU()||parseInt(ET,10))||void 0,X4=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",vT,e),Ut.removeEventListener("test",vT,e)}catch{}return n}();function vs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function sw(n,e){if(vs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(aU){e:{try{mR(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:J4[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&sw.Z.h.call(this)}}vs.prototype.h=function(){this.defaultPrevented=!0},rs(sw,vs);var J4={2:"touch",3:"pen",4:"mouse"};sw.prototype.h=function(){sw.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ow="closure_listenable_"+(1e6*Math.random()|0),e8=0;function t8(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++e8,this.ca=this.fa=!1}function CT(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function IT(n){this.src=n,this.g={},this.h=0}function wR(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=QV(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(CT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ER(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ca&&o.listener==e&&o.capture==!!t&&o.ia==r)return i}return-1}IT.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var u=ER(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new t8(e,this.src,o,!!r,i)).fa=t,n.push(e)),e};var CR="closure_lm_"+(1e6*Math.random()|0),IR={};function cU(n,e,t,r,i){if(r&&r.once)return hU(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)cU(n,e[o],t,r,i);return null}return t=AR(t),n&&n[ow]?n.N(e,t,iw(r)?!!r.capture:!!r,i):dU(n,e,t,!1,r,i)}function dU(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var u=iw(i)?!!i.capture:!!i,h=TR(n);if(h||(n[CR]=h=new IT(n)),(t=h.add(e,t,r,u,o)).proxy)return t;if(r=function n8(){var e=r8;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)X4||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(pU(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function hU(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)hU(n,e[o],t,r,i);return null}return t=AR(t),n&&n[ow]?n.O(e,t,iw(r)?!!r.capture:!!r,i):dU(n,e,t,!0,r,i)}function fU(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fU(n,e[o],t,r,i);else r=iw(r)?!!r.capture:!!r,t=AR(t),n&&n[ow]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ER(o=n.g[e],t,r,i))&&(CT(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=TR(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ER(e,t,r,i)),(t=-1<n?e[n]:null)&&DR(t))}function DR(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[ow])wR(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(pU(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=TR(e))?(wR(t,n),0==t.h&&(t.src=null,e[CR]=null)):CT(n)}}}function pU(n){return n in IR?IR[n]:IR[n]="on"+n}function r8(n,e){if(n.ca)n=!0;else{e=new sw(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&DR(n),n=t.call(r,e)}return n}function TR(n){return(n=n[CR])instanceof IT?n:null}var SR="__closure_events_fn_"+(1e9*Math.random()>>>0);function AR(n){return"function"==typeof n?n:(n[SR]||(n[SR]=function(e){return n.handleEvent(e)}),n[SR])}function Ri(){Af.call(this),this.i=new IT(this),this.P=this,this.I=null}function is(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new vs(e,n);else if(e instanceof vs)e.target=e.target||n;else{var i=e;sU(e=new vs(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var u=e.g=t[o];i=DT(u,r,!0,e)&&i}if(i=DT(u=e.g=n,r,!0,e)&&i,i=DT(u,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=DT(u=e.g=t[o],r,!1,e)&&i}function DT(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var u=e[o];if(u&&!u.ca&&u.capture==t){var h=u.listener,m=u.ia||u.src;u.fa&&wR(n.i,u),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}rs(Ri,Af),Ri.prototype[ow]=!0,Ri.prototype.removeEventListener=function(n,e,t,r){fU(this,n,e,t,r)},Ri.prototype.M=function(){if(Ri.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)CT(t[r]);delete n.g[e],n.h--}}this.I=null},Ri.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ri.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var MR=Ut.JSON.stringify;function i8(){var n=gU;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var kR,mU=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new o8,n=>n.reset());class o8{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function a8(n){Ut.setTimeout(()=>{throw n},0)}function xR(n,e){kR||function l8(){var n=Ut.Promise.resolve(void 0);kR=function(){n.then(u8)}}(),RR||(kR(),RR=!0),gU.add(n,e)}var RR=!1,gU=new class s8{constructor(){this.h=this.g=null}add(e,t){const r=mU.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function u8(){for(var n;n=i8();){try{n.h.call(n.g)}catch(t){a8(t)}var e=mU;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}RR=!1}function TT(n,e){Ri.call(this),this.h=n||1,this.g=e||Ut,this.j=ns(this.kb,this),this.l=Date.now()}function NR(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function OR(n,e,t){if("function"==typeof n)t&&(n=ns(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ns(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function _U(n){n.g=OR(()=>{n.g=null,n.i&&(n.i=!1,_U(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}rs(TT,Ri),(ct=TT.prototype).da=!1,ct.S=null,ct.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),is(this,"tick"),this.da&&(NR(this),this.start()))}},ct.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ct.M=function(){TT.Z.M.call(this),NR(this),delete this.g};class c8 extends Af{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_U(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function aw(n){Af.call(this),this.h=n,this.g={}}rs(aw,Af);var yU=[];function vU(n,e,t,r){Array.isArray(t)||(t&&(yU[0]=t.toString()),t=yU);for(var i=0;i<t.length;i++){var o=cU(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function bU(n){pR(n.g,function(e,t){this.g.hasOwnProperty(t)&&DR(e)},n),n.g={}}function ST(){this.g=!0}function wy(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function p8(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var u=1;u<i.length;u++)i[u]=""}}}return MR(t)}catch{return e}}(n,t)+(r?" "+r:"")})}aw.prototype.M=function(){aw.Z.M.call(this),bU(this)},aw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ST.prototype.Aa=function(){this.g=!1},ST.prototype.info=function(){};var Fm={},wU=null;function AT(){return wU=wU||new Ri}function EU(n){vs.call(this,Fm.Ma,n)}function lw(n){const e=AT();is(e,new EU(e,n))}function CU(n,e){vs.call(this,Fm.STAT_EVENT,n),this.stat=e}function Ws(n){const e=AT();is(e,new CU(e,n))}function IU(n,e){vs.call(this,Fm.Na,n),this.size=e}function uw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}Fm.Ma="serverreachability",rs(EU,vs),Fm.STAT_EVENT="statevent",rs(CU,vs),Fm.Na="timingevent",rs(IU,vs);var MT={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},DU={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function PR(){}function SU(){}PR.prototype.h=null;var VR,cw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function FR(){vs.call(this,"d")}function LR(){vs.call(this,"c")}function xT(){}function dw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new aw(this),this.P=m8,this.W=new TT(n=gR?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new AU}function AU(){this.i=null,this.g="",this.h=!1}rs(FR,vs),rs(LR,vs),rs(xT,PR),xT.prototype.g=function(){return new XMLHttpRequest},xT.prototype.i=function(){return{}},VR=new xT;var m8=45e3,UR={},kT={};function BR(n,e,t){n.K=1,n.v=FT(Ad(e)),n.s=t,n.U=!0,MU(n,null)}function MU(n,e){n.F=Date.now(),hw(n),n.A=Ad(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),VU(t.h,"t",r),n.C=0,t=n.l.H,n.h=new AU,n.g=aB(n.l,t?e:null,!n.s),0<n.O&&(n.L=new c8(ns(n.Ia,n,n.g),n.O)),vU(n.V,n.g,"readystatechange",n.gb),e=n.H?rU(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),lw(1),function d8(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var u="",h=o.split("&"),m=0;m<h.length;m++){var y=h[m].split("=");if(1<y.length){var C=y[0];y=y[1];var T=C.split("_");u=2<=T.length&&"type"==T[1]?u+(C+"=")+y+"&":u+(C+"=redacted&")}}else u=null;else u=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function xU(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function kU(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=g8(n,t),i==kT){4==e&&(n.o=4,Ws(14),r=!1),wy(n.j,n.m,null,"[Incomplete Response]");break}if(i==UR){n.o=4,Ws(15),wy(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}wy(n.j,n.m,i,null),HR(n,i)}xU(n)&&i!=kT&&i!=UR&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ws(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),XR(e),e.L=!0,Ws(11))):(wy(n.j,n.m,t,"[Invalid Chunked Response]"),Lm(n),fw(n))}function g8(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?kT:(t=Number(e.substring(t,r)),isNaN(t)?UR:(r+=1)+t>e.length?kT:(e=e.substr(r,t),n.C=r+t,e))}function hw(n){n.Y=Date.now()+n.P,RU(n,n.P)}function RU(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=uw(ns(n.eb,n),e)}function RT(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function fw(n){0==n.l.G||n.I||rB(n.l,n)}function Lm(n){RT(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,NR(n.W),bU(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function HR(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||GR(t.i,n)))if(t.I=n.N,!n.J&&GR(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;jT(t),BT(t)}QR(t),Ws(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=uw(ns(t.ab,t),6e3));if(1>=HU(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Bm(t,11)}else if((n.J||t.g==n)&&jT(t),!wT(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const C=y[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const T=y[4];null!=T&&(t.za=T,t.h.info("SVER="+t.za));const k=y[5];null!=k&&"number"==typeof k&&0<k&&(t.K=r=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const F=n.g;if(F){const B=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var o=r.i;!o.g&&(zs(B,"spdy")||zs(B,"quic")||zs(B,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(zR(o,o.h),o.h=null))}if(r.D){const ee=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;ee&&(r.sa=ee,gr(r.F,r.D,ee))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=oB(r,r.H?r.la:null,r.W),u.J){jU(r.i,u);var h=u,m=r.K;m&&h.setTimeout(m),h.B&&(RT(h),hw(h)),r.g=u}else tB(r);0<t.l.length&&HT(t)}else"stop"!=y[0]&&"close"!=y[0]||Bm(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Bm(t,7):ZR(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}lw(4)}catch{}}function jR(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(cR(n)||"string"==typeof n)XV(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(cR(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function _8(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(cR(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}}function Ey(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ey)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function $R(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Vm(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Vm(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Vm(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ct=dw.prototype).setTimeout=function(n){this.P=n},ct.gb=function(n){n=n.target;const e=this.L;e&&3==Md(n)?e.l():this.Ia(n)},ct.Ia=function(n){try{if(n==this.g)e:{const C=Md(this.g);var e=this.g.Da();const T=this.g.ba();if(!(3>C)&&(3!=C||gR||this.g&&(this.h.h||this.g.ga()||YU(this.g)))){this.I||4!=C||7==e||lw(8==e||0>=T?3:2),RT(this);var t=this.g.ba();this.N=t;t:if(xU(this)){var r=YU(this.g);n="";var i=r.length,o=4==Md(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Lm(this),fw(this);var u="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function h8(n,e,t,r,i,o,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+u})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wT(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Ws(12),Lm(this),fw(this);break e}wy(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,HR(this,t)}this.U?(kU(this,C,u),gR&&this.i&&3==C&&(vU(this.V,this.W,"tick",this.fb),this.W.start())):(wy(this.j,this.m,u,null),HR(this,u)),4==C&&Lm(this),this.i&&!this.I&&(4==C?rB(this.l,this):(this.i=!1,hw(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Ws(12)):(this.o=0,Ws(13)),Lm(this),fw(this)}}}catch{}},ct.fb=function(){if(this.g){var n=Md(this.g),e=this.g.ga();this.C<e.length&&(RT(this),kU(this,n,e),this.i&&4!=n&&hw(this))}},ct.cancel=function(){this.I=!0,Lm(this)},ct.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function f8(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(lw(3),Ws(17)),Lm(this),this.o=2,fw(this)):RU(this,this.Y-n)},(ct=Ey.prototype).R=function(){$R(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ct.T=function(){return $R(this),this.g.concat()},ct.get=function(n,e){return Vm(this.h,n)?this.h[n]:e},ct.set=function(n,e){Vm(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ct.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],o=this.get(i);n.call(e,o,i,this)}};var NU=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Um(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Um){this.g=void 0!==e?e:n.g,NT(this,n.j),this.s=n.s,OT(this,n.i),PT(this,n.m),this.l=n.l,e=n.h;var t=new gw;t.i=e.i,e.g&&(t.g=new Ey(e.g),t.h=e.h),OU(this,t),this.o=n.o}else n&&(t=String(n).match(NU))?(this.g=!!e,NT(this,t[1]||"",!0),this.s=pw(t[2]||""),OT(this,t[3]||"",!0),PT(this,t[4]),this.l=pw(t[5]||"",!0),OU(this,t[6]||"",!0),this.o=pw(t[7]||"")):(this.g=!!e,this.h=new gw(null,this.g))}function Ad(n){return new Um(n)}function NT(n,e,t){n.j=t?pw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function OT(n,e,t){n.i=t?pw(e,!0):e}function PT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function OU(n,e,t){e instanceof gw?(n.h=e,function T8(n,e){e&&!n.j&&(Mf(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(FU(this,r),VU(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=mw(e,I8)),n.h=new gw(e,n.g))}function gr(n,e,t){n.h.set(e,t)}function FT(n){return gr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function pw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function mw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,w8),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function w8(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Um.prototype.toString=function(){var n=[],e=this.j;e&&n.push(mw(e,PU,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(mw(e,PU,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(mw(t,"/"==t.charAt(0)?C8:E8,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",mw(t,D8)),n.join("")};var PU=/[#\/\?@]/g,E8=/[#\?:]/g,C8=/[#\?]/g,I8=/[#\?@]/g,D8=/#/g;function gw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Mf(n){n.g||(n.g=new Ey,n.h=0,n.i&&function y8(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function FU(n,e){Mf(n),e=Cy(n,e),Vm(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Vm((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&$R(n)))}function LU(n,e){return Mf(n),e=Cy(n,e),Vm(n.g.h,e)}function VU(n,e,t){FU(n,e),0<t.length&&(n.i=null,n.g.set(Cy(n,e),hR(t)),n.h+=t.length)}function Cy(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function UU(n){this.l=n||A8,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ea&&Ut.g.Ea()&&Ut.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ct=gw.prototype).add=function(n,e){Mf(this),this.i=null,n=Cy(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ct.forEach=function(n,e){Mf(this),this.g.forEach(function(t,r){XV(t,function(i){n.call(e,i,r,this)},this)},this)},ct.T=function(){Mf(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],o=0;o<i.length;o++)t.push(e[r]);return t},ct.R=function(n){Mf(this);var e=[];if("string"==typeof n)LU(this,n)&&(e=JV(e,this.g.get(Cy(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=JV(e,n[t])}return e},ct.set=function(n,e){return Mf(this),this.i=null,LU(this,n=Cy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ct.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var u=i;""!==r[o]&&(u+="="+encodeURIComponent(String(r[o]))),n.push(u)}}return this.i=n.join("&")};var A8=10;function BU(n){return!!n.h||!!n.g&&n.g.size>=n.j}function HU(n){return n.h?1:n.g?n.g.size:0}function GR(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function zR(n,e){n.g?n.g.add(e):n.h=e}function jU(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $U(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return hR(n.i)}function qR(){}function M8(){this.g=new qR}function x8(n,e,t){const r=t||"";try{jR(n,function(i,o){let u=i;iw(i)&&(u=MR(i)),e.push(r+o+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function LT(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function _w(n){this.l=n.$b||null,this.j=n.ib||!1}function VT(n,e){Ri.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=WR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}UU.prototype.cancel=function(){if(this.i=$U(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},qR.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},qR.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},rs(_w,PR),_w.prototype.g=function(){return new VT(this.l,this.j)},_w.prototype.i=function(n){return function(){return n}}({}),rs(VT,Ri);var WR=0;function GU(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function yw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,vw(n)}function vw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ct=VT.prototype).open=function(n,e){if(this.readyState!=WR)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,vw(this)},ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yw(this)),this.readyState=WR},ct.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,vw(this)),this.g&&(this.readyState=3,vw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;GU(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ct.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?yw(this):vw(this),3==this.readyState&&GU(this)}},ct.Ua=function(n){this.g&&(this.response=this.responseText=n,yw(this))},ct.Ta=function(n){this.g&&(this.response=n,yw(this))},ct.ha=function(){this.g&&yw(this)},ct.setRequestHeader=function(n,e){this.v.append(n,e)},ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(VT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var R8=Ut.JSON.parse;function Yr(n){Ri.call(this),this.headers=new Ey,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zU,this.K=this.L=!1}rs(Yr,Ri);var zU="",N8=/^https?$/i,O8=["POST","PUT"];function F8(n){return"content-type"==n.toLowerCase()}function qU(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,WU(n),UT(n)}function WU(n){n.D||(n.D=!0,is(n,"complete"),is(n,"error"))}function KU(n){if(n.h&&typeof uR<"u"&&(!n.C[1]||4!=Md(n)||2!=n.ba()))if(n.v&&4==Md(n))OR(n.Fa,0,n);else if(is(n,"readystatechange"),4==Md(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(NU)[1]||null;if(!i&&Ut.self&&Ut.self.location){var o=Ut.self.location.protocol;i=o.substr(0,o.length-1)}r=!N8.test(i?i.toLowerCase():"")}t=r}if(t)is(n,"complete"),is(n,"success");else{n.m=6;try{var u=2<Md(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.ba()+"]",WU(n)}}finally{UT(n)}}}function UT(n,e){if(n.g){ZU(n);const t=n.g,r=n.C[0]?vT:null;n.g=null,n.C=null,e||is(n,"ready");try{t.onreadystatechange=r}catch{}}}function ZU(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function Md(n){return n.g?n.g.readyState:0}function YU(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case zU:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function KR(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function L8(n){let e="";return pR(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):gr(n,e,t))}function bw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function QU(n){this.za=0,this.l=[],this.h=new ST,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=bw("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=bw("baseRetryDelayMs",5e3,n),this.$a=bw("retryDelaySeedMs",1e4,n),this.Ya=bw("forwardChannelMaxRetries",2,n),this.ra=bw("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new UU(n&&n.concurrentRequestLimit),this.Ca=new M8,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function ZR(n){if(XU(n),3==n.G){var e=n.V++,t=Ad(n.F);gr(t,"SID",n.J),gr(t,"RID",e),gr(t,"TYPE","terminate"),ww(n,t),(e=new dw(n,n.h,e,void 0)).K=2,e.v=FT(Ad(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(t=Ut.navigator.sendBeacon(e.v.toString(),"")),!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=aB(e.l,null),e.g.ea(e.v)),e.F=Date.now(),hw(e)}sB(n)}function BT(n){n.g&&(XR(n),n.g.cancel(),n.g=null)}function XU(n){BT(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),jT(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function YR(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&HT(n)}function HT(n){BU(n.i)||n.m||(n.m=!0,xR(n.Ha,n),n.C=0)}function JU(n,e){var t;t=e?e.m:n.V++;const r=Ad(n.F);gr(r,"SID",n.J),gr(r,"RID",t),gr(r,"AID",n.U),ww(n,r),n.o&&n.s&&KR(r,n.o,n.s),t=new dw(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=eB(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),zR(n.i,t),BR(t,r,e)}function ww(n,e){n.j&&jR({},function(t,r){gr(e,r,t)})}function eB(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ns(n.j.Oa,n.j,n):null;e:{var i=n.l;let o=-1;for(;;){const u=["count="+t];-1==o?0<t?(o=i[0].h,u.push("ofs="+o)):o=0:u.push("ofs="+o);let h=!0;for(let m=0;m<t;m++){let y=i[m].h;const C=i[m].g;if(y-=o,0>y)o=Math.max(0,i[m].h-100),h=!1;else try{x8(C,u,"req"+y+"_")}catch{r&&r(C)}}if(h){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function tB(n){n.g||n.u||(n.Y=1,xR(n.Ga,n),n.A=0)}function QR(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=uw(ns(n.Ga,n),iB(n,n.A)),n.A++,0))}function XR(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function nB(n){n.g=new dw(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ad(n.oa);gr(e,"RID","rpc"),gr(e,"SID",n.J),gr(e,"CI",n.N?"0":"1"),gr(e,"AID",n.U),ww(n,e),gr(e,"TYPE","xmlhttp"),n.o&&n.s&&KR(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=FT(Ad(e)),t.s=null,t.U=!0,MU(t,n)}function jT(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function rB(n,e){var t=null;if(n.g==e){jT(n),XR(n),n.g=null;var r=2}else{if(!GR(n.i,e))return;t=e.D,jU(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;is(r=AT(),new IU(r,t,e,i)),HT(n)}else tB(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function V8(n,e){return!(HU(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=uw(ns(n.Ha,n,e),iB(n,n.C)),n.C++,0)))}(n,e)||2==r&&QR(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Bm(n,5);break;case 4:Bm(n,10);break;case 3:Bm(n,6);break;default:Bm(n,2)}}function iB(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Bm(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ns(n.jb,n);t||(t=new Um("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||NT(t,"https"),FT(t)),function k8(n,e){const t=new ST;if(Ut.Image){const r=new Image;r.onload=bT(LT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=bT(LT,t,r,"TestLoadImage: error",!1,e),r.onabort=bT(LT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=bT(LT,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ws(2);n.G=0,n.j&&n.j.va(e),sB(n),XU(n)}function sB(n){n.G=0,n.I=-1,n.j&&((0!=$U(n.i).length||0!=n.l.length)&&(n.i.i.length=0,hR(n.l),n.l.length=0),n.j.ua())}function oB(n,e,t){let r=function v8(n){return n instanceof Um?Ad(n):new Um(n,void 0)}(t);if(""!=r.i)e&&OT(r,e+"."+r.i),PT(r,r.m);else{const i=Ut.location;r=function b8(n,e,t,r){var i=new Um(null,void 0);return n&&NT(i,n),e&&OT(i,e),t&&PT(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&pR(n.aa,function(i,o){gr(r,o,i)}),t=n.sa,(e=n.D)&&t&&gr(r,e,t),gr(r,"VER",n.ma),ww(n,r),r}function aB(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yr(t&&n.Ba&&!n.qa?new _w({ib:!0}):n.qa)).L=n.H,e}function lB(){}function $T(){if(by&&!(10<=Number(Q4)))throw Error("Environmental error: no available transport.")}function oa(n,e){Ri.call(this),this.g=new QU(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!wT(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!wT(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Iy(this)}function uB(n){FR.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function cB(){LR.call(this),this.status=1}function Iy(n){this.g=n}(ct=Yr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():VR.g(),this.C=function TU(n){return n.h||(n.h=n.i())}(this.u?this.u:VR),this.g.onreadystatechange=ns(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void qU(this,o)}n=t||"";const i=new Ey(this.headers);r&&jR(r,function(o,u){i.set(u,o)}),r=function z4(n){e:{var e=F8;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ut.FormData&&n instanceof Ut.FormData,!(0<=QV(O8,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,u){this.g.setRequestHeader(u,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ZU(this),0<this.B&&((this.K=function P8(n){return by&&function Y4(){return function q4(n){var e=Z4;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=eU(String(ET)).split("."),t=eU("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",o=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=fR(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||fR(0==i[2].length,0==o[2].length)||fR(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ns(this.pa,this)):this.A=OR(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){qU(this,o)}},ct.pa=function(){typeof uR<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,is(this,"timeout"),this.abort(8))},ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,is(this,"complete"),is(this,"abort"),UT(this))},ct.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),UT(this,!0)),Yr.Z.M.call(this)},ct.Fa=function(){this.s||(this.F||this.v||this.l?KU(this):this.cb())},ct.cb=function(){KU(this)},ct.ba=function(){try{return 2<Md(this)?this.g.status:-1}catch{return-1}},ct.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ct.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),R8(e)}},ct.Da=function(){return this.m},ct.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ct=QU.prototype).ma=8,ct.G=1,ct.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},ct.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new dw(this,this.h,n,void 0);let o=this.s;if(this.P&&(o?(o=rU(o),sU(o,this.P)):o=this.P),null===this.o&&(i.H=o),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=eB(this,i,e),gr(t=Ad(this.F),"RID",n),gr(t,"CVER",22),this.D&&gr(t,"X-HTTP-Session-Id",this.D),ww(this,t),this.o&&o&&KR(t,this.o,o),zR(this.i,i),this.Ra&&gr(t,"TYPE","init"),this.ja?(gr(t,"$req",e),gr(t,"SID","null"),i.$=!0,BR(i,t,null)):BR(i,t,e),this.G=2}}else 3==this.G&&(n?JU(this,n):0==this.l.length||BU(this.i)||JU(this))},ct.Ga=function(){if(this.u=null,nB(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=uw(ns(this.bb,this),n)}},ct.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ws(10),BT(this),nB(this))},ct.ab=function(){null!=this.v&&(this.v=null,BT(this),QR(this),Ws(19))},ct.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ws(2)):(this.h.info("Failed to ping google.com"),Ws(1))},(ct=lB.prototype).xa=function(){},ct.wa=function(){},ct.va=function(){},ct.ua=function(){},ct.Oa=function(){},$T.prototype.g=function(n,e){return new oa(n,e)},rs(oa,Ri),oa.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),xR(ns(n.hb,n,e))),Ws(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=oB(n,null,n.W),HT(n)},oa.prototype.close=function(){ZR(this.g)},oa.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,YR(this.g,e)}else this.v?((e={}).__data__=MR(n),YR(this.g,e)):YR(this.g,n)},oa.prototype.M=function(){this.g.j=null,delete this.j,ZR(this.g),delete this.g,oa.Z.M.call(this)},rs(uB,FR),rs(cB,LR),rs(Iy,lB),Iy.prototype.xa=function(){is(this.g,"a")},Iy.prototype.wa=function(n){is(this.g,new uB(n))},Iy.prototype.va=function(n){is(this.g,new cB(n))},Iy.prototype.ua=function(){is(this.g,"b")},$T.prototype.createWebChannel=$T.prototype.g,oa.prototype.send=oa.prototype.u,oa.prototype.open=oa.prototype.m,oa.prototype.close=oa.prototype.close,MT.NO_ERROR=0,MT.TIMEOUT=8,MT.HTTP_ERROR=6,DU.COMPLETE="complete",SU.EventType=cw,cw.OPEN="a",cw.CLOSE="b",cw.ERROR="c",cw.MESSAGE="d",Ri.prototype.listen=Ri.prototype.N,Yr.prototype.listenOnce=Yr.prototype.O,Yr.prototype.getLastError=Yr.prototype.La,Yr.prototype.getLastErrorCode=Yr.prototype.Da,Yr.prototype.getStatus=Yr.prototype.ba,Yr.prototype.getResponseJson=Yr.prototype.Qa,Yr.prototype.getResponseText=Yr.prototype.ga,Yr.prototype.send=Yr.prototype.ea;var U8=Sd.createWebChannelTransport=function(){return new $T},B8=Sd.getStatEventTarget=function(){return AT()},JR=Sd.ErrorCode=MT,H8=Sd.EventType=DU,j8=Sd.Event=Fm,dB=Sd.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},$8=Sd.FetchXmlHttpFactory=_w,GT=Sd.WebChannel=SU,G8=Sd.XhrIo=Yr;const hB="@firebase/firestore";class Ni{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ni.UNAUTHENTICATED=new Ni(null),Ni.GOOGLE_CREDENTIALS=new Ni("google-credentials-uid"),Ni.FIRST_PARTY=new Ni("first-party-uid"),Ni.MOCK_USER=new Ni("mock-user");let Dy="9.9.0";const xf=new Ti.Yd("@firebase/firestore");function eN(){return xf.logLevel}function Ve(n,...e){if(xf.logLevel<=Ti.in.DEBUG){const t=e.map(tN);xf.debug(`Firestore (${Dy}): ${n}`,...t)}}function Qr(n,...e){if(xf.logLevel<=Ti.in.ERROR){const t=e.map(tN);xf.error(`Firestore (${Dy}): ${n}`,...t)}}function Ew(n,...e){if(xf.logLevel<=Ti.in.WARN){const t=e.map(tN);xf.warn(`Firestore (${Dy}): ${n}`,...t)}}function tN(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${Dy}) INTERNAL ASSERTION FAILED: `+n;throw Qr(e),new Error(e)}function Pt(n,e){n||dt()}function rt(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class fB{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class W8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ni.UNAUTHENTICATED))}shutdown(){}}class K8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Z8{constructor(e){this.t=e,this.currentUser=Ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Oi,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=u;e.enqueueRetryable((0,we.Z)(function*(){yield y.promise,yield o(r.currentUser)}))},m=y=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Oi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt("string"==typeof r.accessToken),new fB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pt(null===e||"string"==typeof e),new Ni(e)}}class Y8{constructor(e,t,r){this.type="FirstParty",this.user=Ni.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Q8{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Y8(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ni.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X8{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=o=>{null!=o.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.p;return this.p=o.token,Ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?i(o):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pt("string"==typeof t.token),this.p=t.token,new pB(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function J8(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class mB{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=J8(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function qt(n,e){return n<e?-1:n>e?1:0}function Ty(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function gB(n){return n+"\0"}class _r{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _r.fromMillis(Date.now())}static fromDate(e){return _r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new _r(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new _r(0,0))}static max(){return new Rt(new _r(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Cw{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Cw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),u=t.get(i);if(o<u)return-1;if(o>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends Cw{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const eK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vr extends Cw{construct(e,t,r){return new Vr(e,t,r)}static isValidIdentifier(e){return eK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Pe(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Pe(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Pe(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(o(),i++)}if(o(),u)throw new Pe(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vr(t)}static emptyPath(){return new Vr([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(fn.fromString(e))}static fromName(e){return new tt(fn.fromString(e).popFirst(5))}static empty(){return new tt(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new fn(e.slice()))}}class zT{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function nN(n){return n.fields.find(e=>2===e.kind)}function Hm(n){return n.fields.filter(e=>2!==e.kind)}zT.UNKNOWN_ID=-1;class qT{constructor(e,t){this.fieldPath=e,this.kind=t}}class Iw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Iw(0,aa.min())}}function _B(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Rt.fromTimestamp(1e9===r?new _r(t+1,0):new _r(t,r));return new aa(i,tt.empty(),e)}function yB(n){return new aa(n.readTime,n.key,-1)}class aa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new aa(Rt.min(),tt.empty(),-1)}static max(){return new aa(Rt.max(),tt.empty(),-1)}}function rN(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:qt(n.largestBatchId,e.largestBatchId))}const vB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function kf(n){return iN.apply(this,arguments)}function iN(){return iN=(0,we.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==vB)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),iN.apply(this,arguments)}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,o=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++o,u&&o===i&&t()},m=>r(m))}),u=!0,o===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new he((r,i)=>{const o=e.length,u=new Array(o);let h=0;for(let m=0;m<o;m++){const y=m;t(e[y]).next(C=>{u[y]=C,++h,h===o&&r(u)},C=>i(C))}})}static doWhile(e,t){return new he((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class WT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Oi,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Dw(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=sN(r.target.error);this.T.reject(new Dw(e,i))}}static open(e,t,r,i){try{return new WT(t,e.transaction(i,r))}catch(o){throw new Dw(t,o)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new nK(t)}}class Yl{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===Yl.v((0,P.z$)())&&Qr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),jm(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,P.hl)())return!1;if(Yl.S())return!0;const e=(0,P.z$)(),t=Yl.v(e),r=0<t&&t<10,i=Yl.D(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,we.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=u=>{r(u.target.result)},o.onblocked=()=>{i(new Dw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new Pe(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Pe(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Dw(e,h))},o.onupgradeneeded=u=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.P.O(u.target.result,o.transaction,u.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,we.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{o.db=yield o.k(e);const m=WT.open(o.db,e,u?"readonly":"readwrite",r),y=i(m).next(C=>(m.R(),C)).catch(C=>(m.abort(C),he.reject(C))).toPromise();return y.catch(()=>{}),yield m.A,y}catch(m){const y=m,C="FirebaseError"!==y.name&&h<3;if(Ve("SimpleDb","Transaction failed with error:",y.message,"Retrying:",C),o.close(),!C)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class tK{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return jm(this.$.delete())}}class Dw extends Pe{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Rf(n){return"IndexedDbTransactionError"===n.name}class nK{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),jm(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),jm(this.store.add(e))}get(e){return jm(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),jm(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),jm(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.G(i,(u,h)=>{o.push(h)}).next(()=>o)}{const i=this.store.getAll(r.range);return new he((o,u)=>{i.onerror=h=>{u(h.target.error)},i.onsuccess=h=>{o(h.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((i,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}W(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(o,u,h)=>h.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new he((r,i)=>{t.onerror=o=>{const u=sN(o.target.error);i(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}G(e,t){const r=[];return new he((i,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const m=new tK(h),y=t(h.primaryKey,h.value,m);if(y instanceof he){const C=y.catch(T=>(m.done(),he.reject(T)));r.push(C)}m.isDone?i():null===m.U?h.continue():h.continue(m.U)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function jm(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=sN(r.target.error);t(i)}})}let wB=!1;function sN(n){const e=Yl.v((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wB||(wB=!0,setTimeout(()=>{throw r},0)),r}}return n}class rK{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Rf(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield kf(r)}yield t.Z(1)}))}}class iK{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,we.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,o=!0;return he.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Ve("IndexBackiller",`Processing collection: ${u}`),this.nt(e,u,i).next(h=>{i-=h,r.add(u)});o=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.st(i,o)).next(h=>(Ve("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}st(e,t){let r=e;return t.changes.forEach((i,o)=>{const u=yB(o);rN(u,r)>0&&(r=u)}),new aa(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Co{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function EB(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $m(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CB(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Co.ot=-1;class xr{constructor(e,t){this.comparator=e,this.root=t||ss.EMPTY}insert(e,t){return new xr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new xr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new KT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new KT(this.root,e,this.comparator,!1)}getReverseIterator(){return new KT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new KT(this.root,e,this.comparator,!0)}}class KT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ss{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??ss.RED,this.left=i??ss.EMPTY,this.right=o??ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new ss(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ss.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1,ss.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ss(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ln{constructor(e){this.comparator=e,this.data=new xr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IB(this.data.getIterator())}getIteratorFrom(e){return new IB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ln(this.comparator);return t.data=e,t}}class IB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Sy(n){return n.hasNext()?n.getNext():void 0}class la{constructor(e){this.fields=e,e.sort(Vr.comparator)}static empty(){return new la([])}unionWith(e){let t=new Ln(Vr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new la(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ty(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class di{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new di(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new di(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}di.EMPTY_BYTE_STRING=new di("");const oK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nf(n){if(Pt(!!n),"string"==typeof n){let e=0;const t=oK.exec(n);if(Pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kr(n.seconds),nanos:kr(n.nanos)}}function kr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Gm(n){return"string"==typeof n?di.fromBase64String(n):di.fromUint8Array(n)}function oN(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function DB(n){const e=n.mapValue.fields.__previous_value__;return oN(e)?DB(e):e}function Tw(n){const e=Nf(n.mapValue.fields.__local_write_time__.timestampValue);return new _r(e.seconds,e.nanos)}class aK{constructor(e,t,r,i,o,u,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class xd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xd&&e.projectId===this.projectId&&e.database===this.database}}function Sw(n){return null==n}function Aw(n){return 0===n&&1/n==-1/0}function TB(n){return"number"==typeof n&&Number.isInteger(n)&&!Aw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Of={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ZT={nullValue:"NULL_VALUE"};function zm(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?oN(n)?4:xB(n)?9007199254740991:10:dt()}function uc(n,e){if(n===e)return!0;const t=zm(n);if(t!==zm(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tw(n).isEqual(Tw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Nf(r.timestampValue),u=Nf(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Gm(n.bytesValue).isEqual(Gm(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return kr(r.geoPointValue.latitude)===kr(i.geoPointValue.latitude)&&kr(r.geoPointValue.longitude)===kr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return kr(r.integerValue)===kr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=kr(r.doubleValue),u=kr(i.doubleValue);return o===u?Aw(o)===Aw(u):isNaN(o)&&isNaN(u)}return!1}(n,e);case 9:return Ty(n.arrayValue.values||[],e.arrayValue.values||[],uc);case 10:return function(r,i){const o=r.mapValue.fields||{},u=i.mapValue.fields||{};if(EB(o)!==EB(u))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===u[h]||!uc(o[h],u[h])))return!1;return!0}(n,e);default:return dt()}var i}function Mw(n,e){return void 0!==(n.values||[]).find(t=>uc(t,e))}function Pf(n,e){if(n===e)return 0;const t=zm(n),r=zm(e);if(t!==r)return qt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const u=kr(i.integerValue||i.doubleValue),h=kr(o.integerValue||o.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return SB(n.timestampValue,e.timestampValue);case 4:return SB(Tw(n),Tw(e));case 5:return qt(n.stringValue,e.stringValue);case 6:return function(i,o){const u=Gm(i),h=Gm(o);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),h=o.split("/");for(let m=0;m<u.length&&m<h.length;m++){const y=qt(u[m],h[m]);if(0!==y)return y}return qt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const u=qt(kr(i.latitude),kr(o.latitude));return 0!==u?u:qt(kr(i.longitude),kr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const u=i.values||[],h=o.values||[];for(let m=0;m<u.length&&m<h.length;++m){const y=Pf(u[m],h[m]);if(y)return y}return qt(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Of.mapValue&&o===Of.mapValue)return 0;if(i===Of.mapValue)return 1;if(o===Of.mapValue)return-1;const u=i.fields||{},h=Object.keys(u),m=o.fields||{},y=Object.keys(m);h.sort(),y.sort();for(let C=0;C<h.length&&C<y.length;++C){const T=qt(h[C],y[C]);if(0!==T)return T;const k=Pf(u[h[C]],m[y[C]]);if(0!==k)return k}return qt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw dt()}}function SB(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return qt(n,e);const t=Nf(n),r=Nf(e),i=qt(t.seconds,r.seconds);return 0!==i?i:qt(t.nanos,r.nanos)}function Ay(n){return aN(n)}function aN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Nf(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Gm(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const u of r.values||[])o?o=!1:i+=",",i+=aN(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",u=!0;for(const h of i)u?u=!1:o+=",",o+=`${h}:${aN(r.fields[h])}`;return o+"}"}(n.mapValue):dt();var e}function qm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lN(n){return!!n&&"integerValue"in n}function xw(n){return!!n&&"arrayValue"in n}function AB(n){return!!n&&"nullValue"in n}function MB(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function YT(n){return!!n&&"mapValue"in n}function kw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $m(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=kw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xB(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function lK(n){return"nullValue"in n?ZT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?qm(xd.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function uK(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?qm(xd.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Of:dt()}function kB(n,e){const t=Pf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function RB(n,e){const t=Pf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class os{constructor(e){this.value=e}static empty(){return new os({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!YT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kw(t)}setAll(e){let t=Vr.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=kw(u):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());YT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return uc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];YT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){$m(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new os(kw(this.value))}}function NB(n){const e=[];return $m(n.fields,(t,r)=>{const i=new Vr([t]);if(YT(r)){const o=NB(r.mapValue).fields;if(0===o.length)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)}),new la(e)}class Zn{constructor(e,t,r,i,o,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Zn(e,0,Rt.min(),Rt.min(),os.empty(),0)}static newFoundDocument(e,t,r){return new Zn(e,1,t,Rt.min(),r,0)}static newNoDocument(e,t){return new Zn(e,2,t,Rt.min(),os.empty(),0)}static newUnknownDocument(e,t){return new Zn(e,3,t,Rt.min(),os.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=os.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=os.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cK{constructor(e,t=null,r=[],i=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=h,this.ut=null}}function OB(n,e=null,t=[],r=[],i=null,o=null,u=null){return new cK(n,e,t,r,i,o,u)}function Wm(n){const e=rt(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Ay(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Sw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ay(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ay(r)).join(",")),e.ut=t}return e.ut}function Rw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!vK(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!uc(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UB(n.startAt,e.startAt)&&UB(n.endAt,e.endAt)}function QT(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function XT(n,e){return n.filters.filter(t=>t instanceof as&&t.field.isEqual(e))}function PB(n,e,t){let r=ZT,i=!0;for(const o of XT(n,e)){let u=ZT,h=!0;switch(o.op){case"<":case"<=":u=lK(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,h=!1;break;case"!=":case"not-in":u=ZT}kB({value:r,inclusive:i},{value:u,inclusive:h})<0&&(r=u,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];kB({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function FB(n,e,t){let r=Of,i=!0;for(const o of XT(n,e)){let u=Of,h=!0;switch(o.op){case">=":case">":u=uK(o.value),h=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,h=!1;break;case"!=":case"not-in":u=Of}RB({value:r,inclusive:i},{value:u,inclusive:h})>0&&(r=u,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];RB({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class as extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new hK(e,t,r):"array-contains"===t?new mK(e,r):"in"===t?new gK(e,r):"not-in"===t?new _K(e,r):"array-contains-any"===t?new yK(e,r):new as(e,t,r)}static ct(e,t,r){return"in"===t?new fK(e,r):new pK(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Pf(t,this.value)):null!==t&&zm(this.value)===zm(t)&&this.at(Pf(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class hK extends as{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.at(t)}}class fK extends as{constructor(e,t){super(e,"in",t),this.keys=LB(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class pK extends as{constructor(e,t){super(e,"not-in",t),this.keys=LB(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function LB(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}class mK extends as{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xw(t)&&Mw(t.arrayValue,this.value)}}class gK extends as{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Mw(this.value.arrayValue,t)}}class _K extends as{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Mw(this.value.arrayValue,t)}}class yK extends as{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Mw(this.value.arrayValue,r))}}class Ff{constructor(e,t){this.position=e,this.inclusive=t}}class My{constructor(e,t="asc"){this.field=e,this.dir=t}}function vK(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function VB(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],u=n.position[i];if(r=o.field.isKeyField()?tt.comparator(tt.fromName(u.referenceValue),t.key):Pf(u,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function UB(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!uc(n.position[t],e.position[t]))return!1;return!0}class kd{constructor(e,t=null,r=[],i=[],o=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=m,this.lt=null,this.ft=null}}function BB(n,e,t,r,i,o,u,h){return new kd(n,e,t,r,i,o,u,h)}function xy(n){return new kd(n)}function uN(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function cN(n){for(const e of n.filters)if(e.ht())return e.field;return null}function dN(n){return null!==n.collectionGroup}function ky(n){const e=rt(n);if(null===e.lt){e.lt=[];const t=cN(e),r=uN(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new My(t)),e.lt.push(new My(Vr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.lt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new My(Vr.keyField(),o))}}}return e.lt}function al(n){const e=rt(n);if(!e.ft)if("F"===e.limitType)e.ft=OB(e.path,e.collectionGroup,ky(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of ky(e))t.push(new My(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new Ff(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ff(e.startAt.position,e.startAt.inclusive):null;e.ft=OB(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function HB(n,e,t){return new kd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nw(n,e){return Rw(al(n),al(e))&&n.limitType===e.limitType}function jB(n){return`${Wm(al(n))}|lt:${n.limitType}`}function hN(n){return`Query(target=${function dK(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ay(r.value)}`;var r}).join(", ")}]`),Sw(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ay(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ay(t)).join(",")),`Target(${e})`}(al(n))}; limitType=${n.limitType})`}function fN(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):tt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,u){const h=VB(i,o,u);return i.inclusive?h<=0:h<0}(t.startAt,ky(t),r)||t.endAt&&!function(i,o,u){const h=VB(i,o,u);return i.inclusive?h>=0:h>0}(t.endAt,ky(t),r)));var t,r}function $B(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GB(n){return(e,t)=>{let r=!1;for(const i of ky(n)){const o=wK(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function wK(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):function(i,o,u){const h=o.data.field(i),m=u.data.field(i);return null!==h&&null!==m?Pf(h,m):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function zB(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Aw(e)?"-0":e}}function qB(n){return{integerValue:""+n}}function WB(n,e){return TB(e)?qB(e):zB(n,e)}class JT{constructor(){this._=void 0}}function EK(n,e,t){return n instanceof Ry?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof Km?ZB(n,e):n instanceof Zm?YB(n,e):function(r,i){const o=KB(r,i),u=QB(o)+QB(r._t);return lN(o)&&lN(r._t)?qB(u):zB(r.wt,u)}(n,e)}function CK(n,e,t){return n instanceof Km?ZB(n,e):n instanceof Zm?YB(n,e):t}function KB(n,e){return n instanceof Ny?lN(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ry extends JT{}class Km extends JT{constructor(e){super(),this.elements=e}}function ZB(n,e){const t=XB(e);for(const r of n.elements)t.some(i=>uc(i,r))||t.push(r);return{arrayValue:{values:t}}}class Zm extends JT{constructor(e){super(),this.elements=e}}function YB(n,e){let t=XB(e);for(const r of n.elements)t=t.filter(i=>!uc(i,r));return{arrayValue:{values:t}}}class Ny extends JT{constructor(e,t){super(),this.wt=e,this._t=t}}function QB(n){return kr(n.integerValue||n.doubleValue)}function XB(n){return xw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ow{constructor(e,t){this.field=e,this.transform=t}}class DK{constructor(e,t){this.version=e,this.transformResults=t}}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class tS{}function JB(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Py(n.key,Cr.none()):new Oy(n.key,n.data,Cr.none());{const t=n.data,r=os.empty();let i=new Ln(Vr.comparator);for(let o of e.fields)if(!i.has(o)){let u=t.field(o);null===u&&o.length>1&&(o=o.popLast(),u=t.field(o)),null===u?r.delete(o):r.set(o,u),i=i.add(o)}return new Rd(n.key,r,new la(i.toArray()),Cr.none())}}function TK(n,e,t){n instanceof Oy?function(r,i,o){const u=r.value.clone(),h=n2(r.fieldTransforms,i,o.transformResults);u.setAll(h),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Rd?function(r,i,o){if(!eS(r.precondition,i))return void i.convertToUnknownDocument(o.version);const u=n2(r.fieldTransforms,i,o.transformResults),h=i.data;h.setAll(t2(r)),h.setAll(u),i.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Pw(n,e,t,r){return n instanceof Oy?function(i,o,u,h){if(!eS(i.precondition,o))return u;const m=i.value.clone(),y=r2(i.fieldTransforms,h,o);return m.setAll(y),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Rd?function(i,o,u,h){if(!eS(i.precondition,o))return u;const m=r2(i.fieldTransforms,h,o),y=o.data;return y.setAll(t2(i)),y.setAll(m),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(u=t,eS(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u);var o,u}function SK(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=KB(r.transform,i||null);null!=o&&(null===t&&(t=os.empty()),t.set(r.field,o))}return t||null}function e2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ty(t,r,(i,o)=>function IK(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Km&&r instanceof Km||t instanceof Zm&&r instanceof Zm?Ty(t.elements,r.elements,uc):t instanceof Ny&&r instanceof Ny?uc(t._t,r._t):t instanceof Ry&&r instanceof Ry);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Oy extends tS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Rd extends tS{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function t2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function n2(n,e,t){const r=new Map;Pt(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],u=o.transform,h=e.data.field(o.field);r.set(o.field,CK(u,h,t[i]))}return r}function r2(n,e,t){const r=new Map;for(const i of n){const o=i.transform,u=t.data.field(i.field);r.set(i.field,EK(o,u,e))}return r}class Py extends tS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pN extends tS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class AK{constructor(e){this.count=e}}var Xr,pn;function s2(n){switch(n){default:return dt();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function o2(n){if(void 0===n)return Qr("GRPC error has no .code"),_e.UNKNOWN;switch(n){case Xr.OK:return _e.OK;case Xr.CANCELLED:return _e.CANCELLED;case Xr.UNKNOWN:return _e.UNKNOWN;case Xr.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Xr.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Xr.INTERNAL:return _e.INTERNAL;case Xr.UNAVAILABLE:return _e.UNAVAILABLE;case Xr.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Xr.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Xr.NOT_FOUND:return _e.NOT_FOUND;case Xr.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Xr.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Xr.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Xr.ABORTED:return _e.ABORTED;case Xr.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Xr.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Xr.DATA_LOSS:return _e.DATA_LOSS;default:return dt()}}(pn=Xr||(Xr={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";class Lf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$m(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return CB(this.inner)}size(){return this.innerSize}}const MK=new xr(tt.comparator);function Io(){return MK}const a2=new xr(tt.comparator);function Fw(...n){let e=a2;for(const t of n)e=e.insert(t.key,t);return e}function l2(n){let e=a2;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function cc(){return Lw()}function u2(){return Lw()}function Lw(){return new Lf(n=>n.toString(),(n,e)=>n.isEqual(e))}const xK=new xr(tt.comparator),kK=new Ln(tt.comparator);function Zt(...n){let e=kK;for(const t of n)e=e.add(t);return e}const RK=new Ln(qt);function nS(){return RK}class Vw{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Uw.createSynthesizedTargetChangeForCurrentChange(e,t)),new Vw(Rt.min(),r,nS(),Io(),Zt())}}class Uw{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Uw(di.EMPTY_BYTE_STRING,t,Zt(),Zt(),Zt())}}class rS{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class c2{constructor(e,t){this.targetId=e,this.It=t}}class d2{constructor(e,t,r=di.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class h2{constructor(){this.Tt=0,this.Et=p2(),this.At=di.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Zt(),t=Zt(),r=Zt();return this.Et.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new Uw(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=p2()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class NK{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Io(),this.Bt=f2(),this.Lt=new Ln(qt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const o=i.target;if(QT(o))if(0===r){const u=new tt(o.path);this.Kt(t,u,Zn.newNoDocument(u,Rt.min()))}else Pt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((o,u)=>{const h=this.Ht(u);if(h){if(o.current&&QT(h.target)){const m=new tt(h.target.path);null!==this.$t.get(m)||this.Xt(u,m)||this.Kt(u,m,Zn.newNoDocument(m,e))}o.vt&&(t.set(u,o.St()),o.Dt())}});let r=Zt();this.Bt.forEach((o,u)=>{let h=!0;u.forEachWhile(m=>{const y=this.Ht(m);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(o))}),this.$t.forEach((o,u)=>u.setReadTime(e));const i=new Vw(e,t,this.Lt,this.$t,r);return this.$t=Io(),this.Bt=f2(),this.Lt=new Ln(qt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new h2,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Ln(qt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new h2),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function f2(){return new xr(tt.comparator)}function p2(){return new xr(tt.comparator)}const OK={asc:"ASCENDING",desc:"DESCENDING"},PK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class FK{constructor(e,t){this.databaseId=e,this.dt=t}}function Bw(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function m2(n,e){return n.dt?e.toBase64():e.toUint8Array()}function LK(n,e){return Bw(n,e.toTimestamp())}function Pi(n){return Pt(!!n),Rt.fromTimestamp(function(e){const t=Nf(e);return new _r(t.seconds,t.nanos)}(n))}function mN(n,e){return(t=n,new fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function g2(n){const e=fn.fromString(n);return Pt(D2(e)),e}function Hw(n,e){return mN(n.databaseId,e.path)}function dc(n,e){const t=g2(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(y2(t))}function gN(n,e){return mN(n.databaseId,e)}function _2(n){const e=g2(n);return 4===e.length?fn.emptyPath():y2(e)}function jw(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function y2(n){return Pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function v2(n,e,t){return{name:Hw(n,e),fields:t.value.mapValue.fields}}function b2(n,e,t){const r=dc(n,e.name),i=Pi(e.updateTime),o=new os({mapValue:{fields:e.fields}}),u=Zn.newFoundDocument(r,i,o);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function $w(n,e){let t;if(e instanceof Oy)t={update:v2(n,e.key,e.value)};else if(e instanceof Py)t={delete:Hw(n,e.key)};else if(e instanceof Rd)t={update:v2(n,e.key,e.data),updateMask:qK(e.fieldMask)};else{if(!(e instanceof pN))return dt();t={verify:Hw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Ry)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Km)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Zm)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ny)return{fieldPath:o.field.canonicalString(),increment:u._t};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:LK(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function _N(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Cr.updateTime(Pi(i.updateTime)):void 0!==i.exists?Cr.exists(i.exists):Cr.none():Cr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,u){let h=null;"setToServerValue"in u?(Pt("REQUEST_TIME"===u.setToServerValue),h=new Ry):"appendMissingElements"in u?h=new Km(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new Zm(u.removeAllFromArray.values||[]):"increment"in u?h=new Ny(o,u.increment):dt();const m=Vr.fromServerFormat(u.fieldPath);return new Ow(m,h)}(n,i)):[];var i;if(e.update){const i=dc(n,e.update.name),o=new os({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new la((e.updateMask.fieldPaths||[]).map(y=>Vr.fromServerFormat(y)));return new Rd(i,o,u,t,r)}return new Oy(i,o,t,r)}if(e.delete){const i=dc(n,e.delete);return new Py(i,t)}if(e.verify){const i=dc(n,e.verify);return new pN(i,t)}return dt()}function w2(n,e){return{documents:[gN(n,e.path)]}}function E2(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=gN(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=gN(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const y=m.map(C=>function(T){if("=="===T.op){if(MB(T.value))return{unaryFilter:{field:Fy(T.field),op:"IS_NAN"}};if(AB(T.value))return{unaryFilter:{field:Fy(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(MB(T.value))return{unaryFilter:{field:Fy(T.field),op:"IS_NOT_NAN"}};if(AB(T.value))return{unaryFilter:{field:Fy(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fy(T.field),op:$K(T.op),value:T.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const o=function(m){if(0!==m.length)return m.map(y=>{return{field:Fy((C=y).field),direction:jK(C.dir)};var C})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=(y=e.limit,n.dt||Sw(y)?y:{value:y});var y,h,m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function C2(n){let e=_2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let o=[];t.where&&(o=I2(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(C=>{return new My(Ly((T=C).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let h=null;t.limit&&(h=function(C){let T;return T="object"==typeof C?C.value:C,Sw(T)?null:T}(t.limit));let m=null;var C;t.startAt&&(m=new Ff((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new Ff(C.values||[],!C.before)}(t.endAt)),BB(e,i,u,o,h,"F",m,y)}function I2(n){return n?void 0!==n.unaryFilter?[zK(n)]:void 0!==n.fieldFilter?[GK(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>I2(e)).reduce((e,t)=>e.concat(t)):dt():[]}function jK(n){return OK[n]}function $K(n){return PK[n]}function Fy(n){return{fieldPath:n.canonicalString()}}function Ly(n){return Vr.fromServerFormat(n.fieldPath)}function GK(n){return as.create(Ly(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function zK(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ly(n.unaryFilter.field);return as.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ly(n.unaryFilter.field);return as.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ly(n.unaryFilter.field);return as.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ly(n.unaryFilter.field);return as.create(i,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function qK(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function D2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ks(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=T2(e)),e=WK(n.get(t),e);return T2(e)}function WK(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function T2(n){return n+"\x01\x01"}function hc(n){const e=n.length;if(Pt(e>=2),2===e)return Pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const u=n.indexOf("\x01",o);switch((u<0||u>t)&&dt(),n.charAt(u+1)){case"\x01":const h=n.substring(o,u);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(o,u),i+="\0";break;case"\x11":i+=n.substring(o,u+1);break;default:dt()}o=u+2}return new fn(r)}const S2=["userId","batchId"];function iS(n,e){return[n,Ks(e)]}function A2(n,e,t){return[n,Ks(e),t]}const KK={},ZK=["prefixPath","collectionGroup","readTime","documentId"],YK=["prefixPath","collectionGroup","documentId"],QK=["collectionGroup","readTime","prefixPath","documentId"],XK=["canonicalId","targetId"],JK=["targetId","path"],e5=["path","targetId"],t5=["collectionId","parent"],n5=["indexId","uid"],r5=["uid","sequenceNumber"],i5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],s5=["indexId","uid","orderedDocumentKey"],o5=["userId","collectionPath","documentId"],a5=["userId","collectionPath","largestBatchId"],l5=["userId","collectionGroup","largestBatchId"],M2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],u5=[...M2,"documentOverlays"],x2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],k2=x2,c5=[...k2,"indexConfiguration","indexState","indexEntries"];class yN extends bB{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Fi(n,e){const t=rt(n);return Yl.N(t.ee,e)}class vN{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&TK(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Pw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Pw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=u2();return this.mutations.forEach(i=>{const o=e.get(i.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(i.key)?null:h;const m=JB(u,h);null!==m&&r.set(i.key,m),u.isValidDocument()||u.convertToNoDocument(Rt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zt())}isEqual(e){return this.batchId===e.batchId&&Ty(this.mutations,e.mutations,(t,r)=>e2(t,r))&&Ty(this.baseMutations,e.baseMutations,(t,r)=>e2(t,r))}}class bN{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pt(e.mutations.length===r.length);let i=xK;const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,r[u].version);return new bN(e,t,r,i)}}class wN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Vf{constructor(e,t,r,i,o=Rt.min(),u=Rt.min(),h=di.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new Vf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Vf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Vf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class R2{constructor(e){this.ne=e}}function N2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:sS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Hw(i=n.ne,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Bw(i,o.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ym(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:Ym(e.version)}}var i,o;return r}function sS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ym(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qm(n){const e=new _r(n.seconds,n.nanoseconds);return Rt.fromTimestamp(e)}function Xm(n,e){const t=(e.baseMutations||[]).map(o=>_N(n.ne,o));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(u.updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o)}const r=e.mutations.map(o=>_N(n.ne,o)),i=_r.fromMillis(e.localWriteTimeMs);return new vN(e.batchId,i,t,r)}function Gw(n){const e=Qm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Qm(n.lastLimboFreeSnapshotVersion):Rt.min();let r;var i;return void 0!==n.query.documents?(Pt(1===(i=n.query).documents.length),r=al(xy(_2(i.documents[0])))):r=al(C2(n.query)),new Vf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,di.fromBase64String(n.resumeToken))}function O2(n,e){const t=Ym(e.snapshotVersion),r=Ym(e.lastLimboFreeSnapshotVersion);let i;i=QT(e.target)?w2(n.ne,e.target):E2(n.ne,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wm(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function EN(n){const e=C2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?HB(e,e.limit,"L"):e}function CN(n,e){return new wN(e.largestBatchId,_N(n.ne,e.overlayMutation))}function P2(n,e){const t=e.path.lastSegment();return[n,Ks(e.path.popLast()),t]}function F2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ym(r.readTime),documentKey:Ks(r.documentKey.path),largestBatchId:r.largestBatchId}}class h5{getBundleMetadata(e,t){return L2(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Qm(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return L2(e).put({bundleId:(r=t).id,createTime:Ym(Pi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return V2(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:EN(i.bundledQuery),readTime:Qm(i.readTime)};var i})}saveNamedQuery(e,t){return V2(e).put({name:(r=t).name,readTime:Ym(Pi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function L2(n){return Fi(n,"bundles")}function V2(n){return Fi(n,"namedQueries")}class oS{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new oS(e,t.uid||"")}getOverlay(e,t){return zw(e).get(P2(this.userId,t)).next(r=>r?CN(this.wt,r):null)}getOverlays(e,t){const r=cc();return he.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,u)=>{const h=new wN(t,u);i.push(this.ie(e,h))}),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Ks(u.getCollectionPath())));const o=[];return i.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);o.push(zw(e).W("collectionPathOverlayIndex",h))}),he.waitFor(o)}getOverlaysForCollection(e,t,r){const i=cc(),o=Ks(t),u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return zw(e).K("collectionPathOverlayIndex",u).next(h=>{for(const m of h){const y=CN(this.wt,m);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=cc();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zw(e).J({index:"collectionGroupOverlayIndex",range:h},(m,y,C)=>{const T=CN(this.wt,y);o.size()<i||T.largestBatchId===u?(o.set(T.getKey(),T),u=T.largestBatchId):C.done()}).next(()=>o)}ie(e,t){return zw(e).put(function(r,i,o){const[u,h,m]=P2(i,o.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:$w(r.ne,o.mutation)}}(this.wt,this.userId,t))}}function zw(n){return Fi(n,"documentOverlays")}class Jm{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(kr(e.integerValue));else if("doubleValue"in e){const r=kr(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),Aw(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Gm(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?xB(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):dt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),tt.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function f5(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function U2(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=f5(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}Jm.ye=new Jm;class p5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=U2(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=U2(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class m5{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class g5{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class qw{constructor(){this.Me=new p5,this.Fe=new m5(this.Me),this.$e=new g5(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class eg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new eg(this.indexId,this.documentKey,this.arrayValue,r)}}function tg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=B2(n.arrayValue,e.arrayValue),0!==t?t:(t=B2(n.directionalValue,e.directionalValue),0!==t?t:tt.comparator(n.documentKey,e.documentKey)))}function B2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class _5{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=nN(e);if(void 0!==t&&!this.Qe(t))return!1;const r=Hm(e);let i=0,o=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const u=r[i];if(!this.je(this.Ke,u)||!this.We(this.Ue[o++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(o>=this.Ue.length||!this.We(this.Ue[o++],u))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class y5{constructor(){this.ze=new IN}addToCollectionParentIndex(e,t){return this.ze.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(aa.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(aa.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class IN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ln(fn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ln(fn.comparator)).toArray()}}const aS=new Uint8Array(0);class v5{constructor(e,t){this.user=e,this.databaseId=t,this.He=new IN,this.Je=new Lf(r=>Wm(r),(r,i)=>Rw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const o={collectionId:r,parent:Ks(i)};return H2(e).put(o)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[gB(t),""],!1,!0);return H2(e).K(i).next(o=>{for(const u of o){if(u.collectionId!==t)break;r.push(hc(u.parent))}return r})}addFieldIndex(e,t){const r=lS(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;delete i.indexId;const o=r.add(i);if(t.indexState){const u=Kw(e);return o.next(h=>{u.put(F2(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=lS(e),i=Kw(e),o=Ww(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ww(e);let i=!0;const o=new Map;return he.forEach(this.Ye(t),u=>this.Xe(e,u).next(h=>{i&&(i=!!h),o.set(u,h)})).next(()=>{if(i){let u=Zt();const h=[];return he.forEach(o,(m,y)=>{var C;Ve("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(nt=>`${nt.fieldPath}:${nt.kind}`).join(",")}`} to execute ${Wm(t)}`);const T=function(nt,Qe){const St=nN(Qe);if(void 0===St)return null;for(const Nt of XT(nt,St.fieldPath))switch(Nt.op){case"array-contains-any":return Nt.value.arrayValue.values||[];case"array-contains":return[Nt.value]}return null}(y,m),k=function(nt,Qe){const St=new Map;for(const Nt of Hm(Qe))for(const on of XT(nt,Nt.fieldPath))switch(on.op){case"==":case"in":St.set(Nt.fieldPath.canonicalString(),on.value);break;case"not-in":case"!=":return St.set(Nt.fieldPath.canonicalString(),on.value),Array.from(St.values())}return null}(y,m),F=function(nt,Qe){const St=[];let Nt=!0;for(const on of Hm(Qe)){const Ur=0===on.kind?PB(nt,on.fieldPath,nt.startAt):FB(nt,on.fieldPath,nt.startAt);St.push(Ur.value),Nt&&(Nt=Ur.inclusive)}return new Ff(St,Nt)}(y,m),B=function(nt,Qe){const St=[];let Nt=!0;for(const on of Hm(Qe)){const Ur=0===on.kind?FB(nt,on.fieldPath,nt.endAt):PB(nt,on.fieldPath,nt.endAt);St.push(Ur.value),Nt&&(Nt=Ur.inclusive)}return new Ff(St,Nt)}(y,m),ee=this.Ze(m,y,F),de=this.Ze(m,y,B),Ue=this.tn(m,y,k),Ke=this.en(m.indexId,T,ee,F.inclusive,de,B.inclusive,Ue);return he.forEach(Ke,nt=>r.j(nt,t.limit).next(Qe=>{Qe.forEach(St=>{const Nt=tt.fromSegments(St.documentKey);u.has(Nt)||(u=u.add(Nt),h.push(Nt))})}))}).next(()=>h)}return he.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,o,u,h){const m=(null!=t?t.length:1)*Math.max(r.length,o.length),y=m/(null!=t?t.length:1),C=[];for(let T=0;T<m;++T){const k=t?this.nn(t[T/y]):aS,F=this.sn(e,k,r[T%y],i),B=this.rn(e,k,o[T%y],u),ee=h.map(de=>this.sn(e,k,de,!0));C.push(...this.createRange(F,B,ee))}return C}sn(e,t,r,i){const o=new eg(e,tt.empty(),t,r);return i?o:o.Le()}rn(e,t,r,i){const o=new eg(e,tt.empty(),t,r);return i?o.Le():o}Xe(e,t){const r=new _5(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let u=null;for(const h of o)r.Ge(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;return he.forEach(this.Ye(t),i=>this.Xe(e,i).next(o=>{o?0!==r&&o.fields.length<function(u){let h=new Ln(Vr.comparator),m=!1;for(const y of u.filters){const C=y;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?m=!0:h=h.add(C.field))}for(const y of u.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new qw;for(const i of Hm(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const u=r.Be(i.kind);Jm.ye.re(o,u)}return r.Oe()}nn(e){const t=new qw;return Jm.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new qw;return Jm.ye.re(qm(this.databaseId,t),r.Be(function(i){const o=Hm(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new qw);let o=0;for(const u of Hm(e)){const h=r[o++];for(const m of i)if(this.cn(t,u.fieldPath)&&xw(h))i=this.an(i,u,h);else{const y=m.Be(u.kind);Jm.ye.re(h,y)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const i=[...e],o=[];for(const u of r.arrayValue.values||[])for(const h of i){const m=new qw;m.seed(h.Oe()),Jm.ye.re(u,m.Be(t.kind)),o.push(m)}return o}cn(e,t){return!!e.filters.find(r=>r instanceof as&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=lS(e),i=Kw(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(o=>{const u=[];return he.forEach(o,h=>i.get([h.indexId,this.uid]).next(m=>{u.push(function(y,C){const T=C?new Iw(C.sequenceNumber,new aa(Qm(C.readTime),new tt(hc(C.documentKey)),C.largestBatchId)):Iw.empty(),k=y.fields.map(([F,B])=>new qT(Vr.fromServerFormat(F),B));return new zT(y.indexId,y.collectionGroup,k,T)}(h,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:qt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=lS(e),o=Kw(e);return this.ln(e).next(u=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>he.forEach(h,m=>o.put(F2(m.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(i,o)=>{const u=r.get(i.collectionGroup);return(u?he.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),he.forEach(h,m=>this.fn(e,i,m).next(y=>{const C=this.dn(o,m);return y.isEqual(C)?he.resolve():this._n(e,o,m,y,C)}))))})}wn(e,t,r,i){return Ww(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return Ww(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=Ww(e);let o=new Ln(tg);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(u,h)=>{o=o.add(new eg(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}dn(e,t){let r=new Ln(tg);const i=this.on(t,e);if(null==i)return r;const o=nN(t);if(null!=o){const u=e.data.field(o.fieldPath);if(xw(u))for(const h of u.arrayValue.values||[])r=r.add(new eg(t.indexId,e.key,this.nn(h),i))}else r=r.add(new eg(t.indexId,e.key,aS,i));return r}_n(e,t,r,i,o){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,m,y,C,T){const k=h.getIterator(),F=m.getIterator();let B=Sy(k),ee=Sy(F);for(;B||ee;){let de=!1,Ue=!1;if(B&&ee){const Ke=y(B,ee);Ke<0?Ue=!0:Ke>0&&(de=!0)}else null!=B?Ue=!0:de=!0;de?(C(ee),ee=Sy(F)):Ue?(T(B),B=Sy(k)):(B=Sy(k),ee=Sy(F))}}(i,o,tg,h=>{u.push(this.wn(e,t,r,h))},h=>{u.push(this.mn(e,t,r,h))}),he.waitFor(u)}ln(e){let t=1;return Kw(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>tg(u,h)).filter((u,h,m)=>!h||0!==tg(u,m[h-1]));const i=[];i.push(e);for(const u of r){const h=tg(u,e),m=tg(u,t);if(0===h)i[0]=e.Le();else if(h>0&&m<0)i.push(u),i.push(u.Le());else if(m>0)break}i.push(t);const o=[];for(let u=0;u<i.length;u+=2)o.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,aS,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,aS,[]]));return o}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(j2)}getMinOffset(e,t){return he.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||dt())).next(j2)}}function H2(n){return Fi(n,"collectionParents")}function Ww(n){return Fi(n,"indexEntries")}function lS(n){return Fi(n,"indexConfiguration")}function Kw(n){return Fi(n,"indexState")}function j2(n){Pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;rN(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new aa(e.readTime,e.documentKey,t)}const $2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Do{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Do(e,Do.DEFAULT_COLLECTION_PERCENTILE,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function G2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],u=IDBKeyRange.only(t.batchId);let h=0;const m=r.J({range:u},(C,T,k)=>(h++,k.delete()));o.push(m.next(()=>{Pt(1===h)}));const y=[];for(const C of t.mutations){const T=A2(e,C.key.path,t.batchId);o.push(i.delete(T)),y.push(C.key)}return he.waitFor(o).next(()=>y)}function uS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}Do.DEFAULT_COLLECTION_PERCENTILE=10,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Do.DEFAULT=new Do(41943040,Do.DEFAULT_COLLECTION_PERCENTILE,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Do.DISABLED=new Do(-1,0,0);class cS{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){Pt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new cS(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uf(e).J({index:"userMutationsIndex",range:r},(i,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Vy(e),u=Uf(e);return u.add({}).next(h=>{Pt("number"==typeof h);const m=new vN(h,t,r,i),y=function(k,F,B){const ee=B.baseMutations.map(Ue=>$w(k.ne,Ue)),de=B.mutations.map(Ue=>$w(k.ne,Ue));return{userId:F,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:ee,mutations:de}}(this.wt,this.userId,m),C=[];let T=new Ln((k,F)=>qt(k.canonicalString(),F.canonicalString()));for(const k of i){const F=A2(this.userId,k.key.path,h);T=T.add(k.key.path.popLast()),C.push(u.put(y)),C.push(o.put(F,KK))}return T.forEach(k=>{C.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.gn[h]=m.keys()}),he.waitFor(C).next(()=>m)})}lookupMutationBatch(e,t){return Uf(e).get(t).next(r=>r?(Pt(r.userId===this.userId),Xm(this.wt,r)):null)}yn(e,t){return this.gn[t]?he.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Uf(e).J({index:"userMutationsIndex",range:i},(u,h,m)=>{h.userId===this.userId&&(Pt(h.batchId>=r),o=Xm(this.wt,h)),m.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Uf(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,u)=>{r=o.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uf(e).K("userMutationsIndex",t).next(r=>r.map(i=>Xm(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=iS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Vy(e).J({range:i},(u,h,m)=>{const[y,C,T]=u,k=hc(C);if(y===this.userId&&t.path.isEqual(k))return Uf(e).get(T).next(F=>{if(!F)throw dt();Pt(F.userId===this.userId),o.push(Xm(this.wt,F))});m.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln(qt);const i=[];return t.forEach(o=>{const u=iS(this.userId,o.path),h=IDBKeyRange.lowerBound(u),m=Vy(e).J({range:h},(y,C,T)=>{const[k,F,B]=y,ee=hc(F);k===this.userId&&o.path.isEqual(ee)?r=r.add(B):T.done()});i.push(m)}),he.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=iS(this.userId,r),u=IDBKeyRange.lowerBound(o);let h=new Ln(qt);return Vy(e).J({range:u},(m,y,C)=>{const[T,k,F]=m,B=hc(k);T===this.userId&&r.isPrefixOf(B)?B.length===i&&(h=h.add(F)):C.done()}).next(()=>this.pn(e,h))}pn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(Uf(e).get(o).next(u=>{if(null===u)throw dt();Pt(u.userId===this.userId),r.push(Xm(this.wt,u))}))}),he.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return G2(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),he.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Vy(e).J({range:r},(o,u,h)=>{if(o[0]===this.userId){const m=hc(o[1]);i.push(m)}else h.done()}).next(()=>{Pt(0===i.length)})})}containsKey(e,t){return z2(e,this.userId,t)}Tn(e){return q2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function z2(n,e,t){const r=iS(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let u=!1;return Vy(n).J({range:o,H:!0},(h,m,y)=>{const[C,T,k]=h;C===e&&T===i&&(u=!0),y.done()}).next(()=>u)}function Uf(n){return Fi(n,"mutations")}function Vy(n){return Fi(n,"documentMutations")}function q2(n){return Fi(n,"mutationQueues")}class ng{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new ng(0)}static Rn(){return new ng(-1)}}class b5{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new ng(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Rt.fromTimestamp(new _r(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Uy(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Pt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Uy(e).J((u,h)=>{const m=Gw(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,o.push(this.removeTargetData(e,m)))}).next(()=>he.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Uy(e).J((r,i)=>{const o=Gw(i);t(o)})}bn(e){return W2(e).get("targetGlobalKey").next(t=>(Pt(null!==t),t))}Pn(e,t){return W2(e).put("targetGlobalKey",t)}vn(e,t){return Uy(e).put(O2(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Wm(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Uy(e).J({range:i,index:"queryTargetsIndex"},(u,h,m)=>{const y=Gw(h);Rw(t,y.target)&&(o=y,m.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Bf(e);return t.forEach(u=>{const h=Ks(u.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,u))}),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=Bf(e);return he.forEach(t,o=>{const u=Ks(o.path);return he.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Bf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Bf(e);let o=Zt();return i.J({range:r,H:!0},(u,h,m)=>{const y=hc(u[1]),C=new tt(y);o=o.add(C)}).next(()=>o)}containsKey(e,t){const r=Ks(t.path),i=IDBKeyRange.bound([r],[gB(r)],!1,!0);let o=0;return Bf(e).J({index:"documentTargetsIndex",H:!0,range:i},([u,h],m,y)=>{0!==u&&(o++,y.done())}).next(()=>o>0)}te(e,t){return Uy(e).get(t).next(r=>r?Gw(r):null)}}function Uy(n){return Fi(n,"targets")}function W2(n){return Fi(n,"targetGlobal")}function Bf(n){return Fi(n,"targetDocuments")}function K2([n,e],[t,r]){const i=qt(n,t);return 0===i?qt(e,r):i}class w5{constructor(e){this.Sn=e,this.buffer=new Ln(K2),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();K2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class E5{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Rf(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield kf(r)}yield t.kn(3e5)}))}}class C5{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(Co.ot);const r=new w5(t);return this.On.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.On.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve($2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$2):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,i,o,u,h,m,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,u=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,h=Date.now(),this.removeTargets(e,r,t))).next(T=>(o=T,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(y=Date.now(),eN()<=Ti.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-C}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${o} targets in `+(m-h)+`ms\n\tRemoved ${T} documents in `+(y-m)+`ms\nTotal Duration: ${y-C}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:T})))}}class I5{constructor(e,t){this.db=e,this.garbageCollector=new C5(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return dS(e,r)}removeReference(e,t,r){return dS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return dS(e,t)}Un(e,t){return function(r,i){let o=!1;return q2(r).Y(u=>z2(r,u,i).next(h=>(h&&(o=!0),he.resolve(!h)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Ln(e,(u,h)=>{if(h<=t){const m=this.Un(e,u).next(y=>{if(!y)return o++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Rt.min()),Bf(e).delete([0,Ks(u.path)])))});i.push(m)}}).next(()=>he.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return dS(e,t)}Ln(e,t){const r=Bf(e);let i,o=Co.ot;return r.J({index:"documentTargetsIndex"},([u,h],{path:m,sequenceNumber:y})=>{0===u?(o!==Co.ot&&t(new tt(hc(i)),o),o=y,i=m):o=Co.ot}).next(()=>{o!==Co.ot&&t(new tt(hc(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dS(n,e){return Bf(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ks(e.path),sequenceNumber:r}));var r}class Z2{constructor(){this.changes=new Lf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class D5{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return rg(e).put(r)}removeEntry(e,t,r){return rg(e).delete(function(i,o){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],sS(o),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Zn.newInvalidDocument(t);return rg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zw(t))},(i,o)=>{r=this.Kn(t,o)}).next(()=>r)}Gn(e,t){let r={size:0,document:Zn.newInvalidDocument(t)};return rg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zw(t))},(i,o)=>{r={document:this.Kn(t,o),size:uS(o)}}).next(()=>r)}getEntries(e,t){let r=Io();return this.Qn(e,t,(i,o)=>{const u=this.Kn(i,o);r=r.insert(i,u)}).next(()=>r)}jn(e,t){let r=Io(),i=new xr(tt.comparator);return this.Qn(e,t,(o,u)=>{const h=this.Kn(o,u);r=r.insert(o,h),i=i.insert(o,uS(u))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return he.resolve();let i=new Ln(J2);t.forEach(m=>i=i.add(m));const o=IDBKeyRange.bound(Zw(i.first()),Zw(i.last())),u=i.getIterator();let h=u.getNext();return rg(e).J({index:"documentKeyIndex",range:o},(m,y,C)=>{const T=tt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&J2(h,T)<0;)r(h,null),h=u.getNext();h&&h.isEqual(T)&&(r(h,y),h=u.hasNext()?u.getNext():null),h?C.q(Zw(h)):C.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),sS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rg(e).K(IDBKeyRange.bound(i,o,!0)).next(u=>{let h=Io();for(const m of u){const y=this.Kn(tt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Io();const u=X2(t,r),h=X2(t,aa.max());return rg(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(m,y,C)=>{const T=this.Kn(tt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(T.key,T),o.size===i&&C.done()}).next(()=>o)}newChangeBuffer(e){return new T5(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Q2(e).get("remoteDocumentGlobalKey").next(t=>(Pt(!!t),t))}qn(e,t){return Q2(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function d5(n,e){let t;if(e.document)t=b2(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=Qm(e.noDocument.readTime);t=Zn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=tt.fromSegments(e.unknownDocument.path),i=Qm(e.unknownDocument.version);t=Zn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new _r(r[0],r[1]);return Rt.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Rt.min()))return r}return Zn.newInvalidDocument(e)}}function Y2(n){return new D5(n)}class T5 extends Z2{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Lf(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Ln((o,u)=>qt(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const h=this.Hn.get(o);if(t.push(this.zn.removeEntry(e,o,h.readTime)),u.isValidDocument()){const m=N2(this.zn.wt,u);i=i.add(o.path.popLast()),r+=uS(m)-h.size,t.push(this.zn.addEntry(e,o,m))}else if(r-=h.size,this.trackRemovals){const m=N2(this.zn.wt,u.convertToNoDocument(Rt.min()));t.push(this.zn.addEntry(e,o,m))}}),i.forEach(o=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.zn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((o,u)=>{this.Hn.set(o,{size:u,readTime:r.get(o).readTime})}),r))}}function Q2(n){return Fi(n,"remoteDocumentGlobal")}function rg(n){return Fi(n,"remoteDocumentsV14")}function Zw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function X2(n,e){const t=e.documentKey.path.toArray();return[n,sS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function J2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=qt(t[o],r[o]),i)return i;return i=qt(t.length,r.length),i||(i=qt(t[t.length-2],r[r.length-2]),i||qt(t[t.length-1],r[r.length-1]))}class S5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class eH{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Pw(r.mutation,i,la.empty(),_r.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Zt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Zt()){const i=cc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let u=Fw();return o.forEach((h,m)=>{u=u.insert(h,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=cc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Zt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,i){let o=Io();const u=Lw(),h=Lw();return t.forEach((m,y)=>{const C=r.get(y.key);i.has(y.key)&&(void 0===C||C.mutation instanceof Rd)?o=o.insert(y.key,y):void 0!==C&&(u.set(y.key,C.mutation.getFieldMask()),Pw(C.mutation,y,C.mutation.getFieldMask(),_r.now()))}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((y,C)=>u.set(y,C)),t.forEach((y,C)=>{var T;return h.set(y,new S5(C,null!==(T=u.get(y))&&void 0!==T?T:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Lw();let i=new xr((u,h)=>u-h),o=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(m=>{const y=t.get(m);if(null===y)return;let C=r.get(m)||la.empty();C=h.applyToLocalView(y,C),r.set(m,C);const T=(i.get(h.batchId)||Zt()).add(m);i=i.insert(h.batchId,T)})}).next(()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),y=m.key,C=m.value,T=u2();C.forEach(k=>{if(!o.has(k)){const F=JB(t.get(k),r.get(k));null!==F&&T.set(k,F),o=o.add(k)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,T))}return he.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return tt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):dN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const u=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):he.resolve(cc());let h=-1,m=o;return u.next(y=>he.forEach(y,(C,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),o.get(C)?he.resolve():this.getBaseDocument(e,C,T).next(k=>{m=m.insert(C,k)}))).next(()=>this.populateOverlays(e,y,o)).next(()=>this.computeViews(e,m,y,Zt())).next(C=>({batchId:h,changes:l2(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next(r=>{let i=Fw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=Fw();return this.indexManager.getCollectionParents(e,i).next(u=>he.forEach(u,h=>{const m=(y=t,C=h.child(i),new kd(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(y=>{y.forEach((C,T)=>{o=o.insert(C,T)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(o=>(i=o,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(o=>{o.forEach((h,m)=>{const y=m.getKey();null===i.get(y)&&(i=i.insert(y,Zn.newInvalidDocument(y)))});let u=Fw();return i.forEach((h,m)=>{const y=o.get(h);void 0!==y&&Pw(y.mutation,m,la.empty(),_r.now()),fN(t,m)&&(u=u.insert(h,m))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):he.resolve(Zn.newInvalidDocument(t))}}class A5{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return he.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Pi(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:EN(r.bundledQuery),readTime:Pi(r.readTime)}),he.resolve();var r}}class M5{constructor(){this.overlays=new xr(tt.comparator),this.Xn=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=cc();return he.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ie(e,t,o)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Xn.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=cc(),o=t.length+1,u=new tt(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===o&&m.largestBatchId>r&&i.set(m.getKey(),m)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new xr((y,C)=>y-C);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let C=o.get(y.largestBatchId);null===C&&(C=cc(),o=o.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const h=cc(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((y,C)=>h.set(y,C)),!(h.size()>=i)););return he.resolve(h)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new wN(t,r));let o=this.Xn.get(t);void 0===o&&(o=Zt(),this.Xn.set(t,o)),this.Xn.set(t,o.add(r.key))}}class DN{constructor(){this.Zn=new Ln(Li.ts),this.es=new Ln(Li.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Li(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Li(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new tt(new fn([])),r=new Li(t,e),i=new Li(t,e+1),o=[];return this.es.forEachInRange([r,i],u=>{this.rs(u),o.push(u.key)}),o}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new tt(new fn([])),r=new Li(t,e),i=new Li(t,e+1);let o=Zt();return this.es.forEachInRange([r,i],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new Li(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Li{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return tt.comparator(e.key,t.key)||qt(e.ls,t.ls)}static ns(e,t){return qt(e.ls,t.ls)||tt.comparator(e.key,t.key)}}class x5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Ln(Li.ts)}checkEmpty(e){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.fs;this.fs++;const u=new vN(o,t,r,i);this.mutationQueue.push(u);for(const h of i)this.ds=this.ds.add(new Li(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return he.resolve(u)}lookupMutationBatch(e,t){return he.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),o=i<0?0:i;return he.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Li(t,0),i=new Li(t,Number.POSITIVE_INFINITY),o=[];return this.ds.forEachInRange([r,i],u=>{const h=this._s(u.ls);o.push(h)}),he.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln(qt);return t.forEach(i=>{const o=new Li(i,0),u=new Li(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([o,u],h=>{r=r.add(h.ls)})}),he.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;tt.isDocumentKey(o)||(o=o.child(""));const u=new Li(new tt(o),0);let h=new Ln(qt);return this.ds.forEachWhile(m=>{const y=m.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(m.ls)),!0)},u),he.resolve(this.gs(h))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Pt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return he.forEach(t.mutations,i=>{const o=new Li(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Li(t,0),i=this.ds.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return he.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class k5{constructor(e){this.ps=e,this.docs=new xr(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,u=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Zn.newInvalidDocument(t))}getEntries(e,t){let r=Io();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Zn.newInvalidDocument(i))}),he.resolve(r)}getAllFromCollection(e,t,r){let i=Io();const o=new tt(t.child("")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||rN(yB(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,t,r,i){dt()}Is(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new R5(this)}getSize(e){return he.resolve(this.size)}}class R5 extends Z2{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class N5{constructor(e){this.persistence=e,this.Ts=new Lf(t=>Wm(t),Rw),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.Es=0,this.As=new DN,this.targetCount=0,this.Rs=ng.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),he.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new ng(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.vn(t),he.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Ts.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Ts.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),he.waitFor(o).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(u=>{o.push(i.markPotentiallyOrphaned(e,u))}),he.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.As.containsKey(t))}}class tH{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Co(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new N5(this),this.indexManager=new y5,this.remoteDocumentCache=new k5(r=>this.referenceDelegate.Ss(r)),this.wt=new R2(t),this.Ds=new A5(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new M5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new x5(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new O5(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(o=>this.referenceDelegate.xs(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ns(e,t){return he.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class O5 extends bB{constructor(e){super(),this.currentSequenceNumber=e}}class hS{constructor(e){this.persistence=e,this.ks=new DN,this.Os=null}static Ms(e){return new hS(e)}get Fs(){if(this.Os)return this.Os;throw dt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),he.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Fs.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Fs,r=>{const i=tt.fromPath(r);return this.$s(e,i).next(o=>{o||t.removeEntry(i,Rt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return he.or([()=>he.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class P5{constructor(e){this.wt=e}O(e,t,r,i){const o=new WT("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",S2,{unique:!0}),h.createObjectStore("documentMutations"),nH(e),function(h){h.createObjectStore("remoteDocuments")}(e));let u=he.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),nH(e)),u=u.next(()=>function(h){const m=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Rt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",y)}(o))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,m){return m.store("mutations").K().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",S2,{unique:!0});const C=m.store("mutations"),T=y.map(k=>C.put(k));return he.waitFor(T)})}(e,o))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Bs(o))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(o)))),r<7&&i>=7&&(u=u.next(()=>this.Us(o))),r<8&&i>=8&&(u=u.next(()=>this.qs(e,o))),r<9&&i>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.Ks(o))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:o5});m.createIndex("collectionPathOverlayIndex",a5,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",l5,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:ZK});m.createIndex("documentKeyIndex",YK),m.createIndex("collectionGroupIndex",QK)}(e)).next(()=>this.Gs(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.Qs(e,o))),r<15&&i>=15&&(u=u.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:n5}).createIndex("sequenceNumberIndex",r5,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:i5}).createIndex("documentKeyIndex",s5,{unique:!1})}(e))),u}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=uS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>he.forEach(i,o=>{const u=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",u).next(h=>he.forEach(h,m=>{Pt(m.userId===o.userId);const y=Xm(this.wt,m);return G2(e,o.userId,y).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((u,h)=>{const m=new fn(u),y=[0,Ks(m)];o.push(t.get(y).next(C=>C?he.resolve():t.put({targetId:0,path:Ks(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>he.waitFor(o))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:t5});const r=t.store("collectionParents"),i=new IN,o=u=>{if(i.add(u)){const h=u.lastSegment(),m=u.popLast();return r.put({collectionId:h,parent:Ks(m)})}};return t.store("remoteDocuments").J({H:!0},(u,h)=>{const m=new fn(u);return o(m.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([u,h,m],y)=>{const C=hc(h);return o(C.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const o=Gw(i),u=O2(this.wt,o);return t.put(u)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((o,u)=>{const h=t.store("remoteDocumentsV14"),m=(y=u,y.document?new tt(fn.fromString(y.document.name).popFirst(5)):y.noDocument?tt.fromSegments(y.noDocument.path):y.unknownDocument?tt.fromSegments(y.unknownDocument.path):dt()).path.toArray();var y;const C={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(h.put(C))}).next(()=>he.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=Y2(this.wt),o=new tH(hS.Ms,this.wt.ne);return r.K().next(u=>{const h=new Map;return u.forEach(m=>{var y;let C=null!==(y=h.get(m.userId))&&void 0!==y?y:Zt();Xm(this.wt,m).keys().forEach(T=>C=C.add(T)),h.set(m.userId,C)}),he.forEach(h,(m,y)=>{const C=new Ni(y),T=oS.se(this.wt,C),k=o.getIndexManager(C),F=cS.se(C,this.wt,k,o.referenceDelegate);return new eH(i,F,T,k).recalculateAndSaveOverlaysForDocumentKeys(new yN(t,Co.ot),m).next()})})}}function nH(n){n.createObjectStore("targetDocuments",{keyPath:JK}).createIndex("documentTargetsIndex",e5,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",XK,{unique:!0}),n.createObjectStore("targetGlobal")}const TN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class SN{constructor(e,t,r,i,o,u,h,m,y,C,T=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=o,this.window=u,this.document=h,this.Ws=y,this.zs=C,this.Hs=T,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=k=>Promise.resolve(),!SN.V())throw new Pe(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new I5(this,i),this.ei=t+"main",this.wt=new R2(m),this.ni=new Yl(this.ei,this.Hs,new P5(this.wt)),this.Vs=new b5(this.referenceDelegate,this.wt),this.remoteDocumentCache=Y2(this.wt),this.Ds=new h5,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===C&&Qr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(_e.FAILED_PRECONDITION,TN);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Co(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,we.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>fS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Rf(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Yw(e).get("owner").next(t=>he.resolve(this.di(t)))}_i(e){return fS(e).delete(this.clientId)}wi(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Fi(r,"clientMetadata");return i.K().next(o=>{const u=e.gi(o,18e5),h=o.filter(m=>-1===u.indexOf(m));return he.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?he.resolve(!0):Yw(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Pe(_e.FAILED_PRECONDITION,TN);return!1}}return!(!this.networkEnabled||!this.inForeground)||fS(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new yN(t,Co.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>fS(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return cS.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new v5(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return oS.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(u=this.Hs)?c5:14===u?k2:13===u?x2:12===u?u5:11===u?M2:void dt();var u;let h;return this.ni.runTransaction(e,i,o,m=>(h=new yN(m,this.Ps?this.Ps.next():Co.ot),"readwrite-primary"===t?this.ai(h).next(y=>!!y||this.hi(h)).next(y=>{if(!y)throw Qr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Pe(_e.FAILED_PRECONDITION,vB);return r(h)}).next(y=>this.fi(h).next(()=>y)):this.bi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}bi(e){return Yw(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(_e.FAILED_PRECONDITION,TN)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yw(e).put("owner",t)}static V(){return Yl.V()}li(e){const t=Yw(e);return t.get("owner").next(r=>this.di(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Qr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Qr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yw(n){return Fi(n,"owner")}function fS(n){return Fi(n,"clientMetadata")}function AN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class MN{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=Zt(),i=Zt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new MN(e,t.fromCache,r,i)}}class rH{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(o=>o||this.xi(e,t,i,r)).next(o=>o||this.Ni(e,t))}Ci(e,t){return he.resolve(null)}xi(e,t,r,i){return function bK(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Rt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(o=>{const u=this.ki(t,o);return this.Oi(t,u,r,i)?this.Ni(e,t):(eN()<=Ti.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hN(t)),this.Mi(e,u,t,_B(i,-1)))})}ki(e,t){let r=new Ln(GB(e));return t.forEach((i,o)=>{fN(e,o)&&(r=r.add(o))}),r}Oi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ni(e,t){return eN()<=Ti.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",hN(t)),this.Di.getDocumentsMatchingQuery(e,t,aa.min())}Mi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}class F5{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new xr(qt),this.Bi=new Lf(o=>Wm(o),Rw),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eH(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function iH(n,e,t,r){return new F5(n,e,t,r)}function sH(n,e){return xN.apply(this,arguments)}function xN(){return xN=(0,we.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],h=[];let m=Zt();for(const y of i){u.push(y.batchId);for(const C of y.mutations)m=m.add(C.key)}for(const y of o){h.push(y.batchId);for(const C of y.mutations)m=m.add(C.key)}return t.localDocuments.getDocuments(r,m).next(y=>({Ki:y,removedBatchIds:u,addedBatchIds:h}))})})}),xN.apply(this,arguments)}function L5(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Ui.newChangeBuffer({trackRemovals:!0});return function(u,h,m,y){const C=m.batch,T=C.keys();let k=he.resolve();return T.forEach(F=>{k=k.next(()=>y.getEntry(h,F)).next(B=>{const ee=m.docVersions.get(F);Pt(null!==ee),B.version.compareTo(ee)<0&&(C.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),y.addEntry(B)))})}),k.next(()=>u.mutationQueue.removeMutationBatch(h,C))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=Zt();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(h=h.add(u.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function oH(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function V5(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const h=[];e.targetChanges.forEach((C,T)=>{const k=i.get(T);if(!k)return;h.push(t.Vs.removeMatchingKeys(o,C.removedDocuments,T).next(()=>t.Vs.addMatchingKeys(o,C.addedDocuments,T)));let F=k.withSequenceNumber(o.currentSequenceNumber);var B,ee,de;e.targetMismatches.has(T)?F=F.withResumeToken(di.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):C.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(C.resumeToken,r)),i=i.insert(T,F),ee=F,de=C,(0===(B=k).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0)&&h.push(t.Vs.updateTargetData(o,F))});let m=Io(),y=Zt();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,C))}),h.push(aH(o,u,e.documentUpdates).next(C=>{m=C.Gi,y=C.Qi})),!r.isEqual(Rt.min())){const C=t.Vs.getLastRemoteSnapshotVersion(o).next(T=>t.Vs.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(C)}return he.waitFor(h).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,m,y)).next(()=>m)}).then(o=>(t.$i=i,o))}function aH(n,e,t){let r=Zt(),i=Zt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Io();return t.forEach((h,m)=>{const y=o.get(h);m.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(Rt.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||0===m.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Ve("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",m.version)}),{Gi:u,Qi:i}})}function U5(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function By(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(o=>o?(i=o,he.resolve(i)):t.Vs.allocateTargetId(r).next(u=>(i=new Vf(e,u,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Hy(n,e,t){return kN.apply(this,arguments)}function kN(){return kN=(0,we.Z)(function*(n,e,t){const r=rt(n),i=r.$i.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Rf(u))throw u;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),kN.apply(this,arguments)}function pS(n,e,t){const r=rt(n);let i=Rt.min(),o=Zt();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,m,y){const C=rt(h),T=C.Bi.get(y);return void 0!==T?he.resolve(C.$i.get(T)):C.Vs.getTargetData(m,y)}(r,u,al(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(u,h.targetId).next(m=>{o=m})}).next(()=>r.Fi.getDocumentsMatchingQuery(u,e,t?i:Rt.min(),t?o:Zt())).next(h=>(cH(r,$B(e),h),{documents:h,ji:o})))}function lH(n,e){const t=rt(n),r=rt(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.te(o,e).next(u=>u?u.target:null))}function uH(n,e){const t=rt(n),r=t.Li.get(e)||Rt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,_B(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(cH(t,e,i),i))}function cH(n,e,t){let r=Rt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Li.set(e,r)}function RN(){return RN=(0,we.Z)(function*(n,e,t,r){const i=rt(n);let o=Zt(),u=Io();for(const y of t){const C=e.Wi(y.metadata.name);y.document&&(o=o.add(C));const T=e.zi(y);T.setReadTime(e.Hi(y.metadata.readTime)),u=u.insert(C,T)}const h=i.Ui.newChangeBuffer({trackRemovals:!0}),m=yield By(i,(y=r,al(xy(fn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>aH(y,h,u).next(C=>(h.apply(y),C)).next(C=>i.Vs.removeMatchingKeysForTargetId(y,m.targetId).next(()=>i.Vs.addMatchingKeys(y,o,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,C.Gi,C.Qi)).next(()=>C.Gi)))}),RN.apply(this,arguments)}function H5(n,e){return NN.apply(this,arguments)}function NN(){return NN=(0,we.Z)(function*(n,e,t=Zt()){const r=yield By(n,al(EN(e.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const u=Pi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ds.saveNamedQuery(o,e);const h=r.withResumeToken(di.EMPTY_BYTE_STRING,u);return i.$i=i.$i.insert(h.targetId,h),i.Vs.updateTargetData(o,h).next(()=>i.Vs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Vs.addMatchingKeys(o,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(o,e))})}),NN.apply(this,arguments)}function dH(n,e){return`firestore_clients_${n}_${e}`}function hH(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ON(n,e){return`firestore_targets_${n}_${e}`}class mS{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let o,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(o=new Pe(i.error.code,i.error.message))),u?new mS(e,t,i.state,o):(Qr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Pe(r.error.code,r.error.message))),o?new Qw(e,r.state,i):(Qr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=nS();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=TB(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return i?new gS(e,o):(Qr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class PN{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new PN(t.clientId,t.onlineState):(Qr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class FN{constructor(){this.activeTargetIds=nS()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LN{constructor(e,t,r,i,o){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new xr(qt),this.started=!1,this.ir=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.rr=dH(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new FN),this.cr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const o=e.getItem(dH(e.persistenceKey,i));if(o){const u=gS.Ji(i,o);u&&(e.sr=e.sr.insert(u.clientId,u))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ON(this.persistenceKey,e));if(r){const i=Qw.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ON(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Qr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(o){let u=Co.ot;if(null!=o)try{const h=JSON.parse(o);Pt("number"==typeof h),u=h}catch(h){Qr("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==Co.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Nr(o)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new mS(this.currentUser,e,t,r),o=hH(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Yi())}pr(e){const t=hH(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=ON(this.persistenceKey,e),o=new Qw(e,t,r);this.setItem(i,o.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return gS.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return mS.Ji(new Ni(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return Qw.Ji(i,t)}wr(e){return PN.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),o=this.gr(r),u=[],h=[];return o.forEach(m=>{i.has(m)||u.push(m)}),i.forEach(m=>{o.has(m)||h.push(m)}),this.syncEngine.Mr(u,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=nS();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class fH{constructor(){this.Fr=new FN,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new FN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class j5{Br(e){}shutdown(){}}class pH{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const $5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class G5{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class z5 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,o){const u=this.oo(e,t);Ve("RestConnection","Sending: ",u,r);const h={};return this.uo(h,i,o),this.co(e,u,h,r).then(m=>(Ve("RestConnection","Received: ",m),m),m=>{throw Ew("RestConnection",`${e} failed with error: `,m,"url: ",u,"request:",r),m})}ao(e,t,r,i,o,u){return this.ro(e,t,r,i,o)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Dy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}oo(e,t){return`${this.so}/v1/${t}:${$5[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((o,u)=>{const h=new G8;h.listenOnce(H8.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case JR.NO_ERROR:const y=h.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(y)),o(y);break;case JR.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),u(new Pe(_e.DEADLINE_EXCEEDED,"Request time out"));break;case JR.HTTP_ERROR:const C=h.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',C,"response text:",h.getResponseText()),C>0){const T=h.getResponseJson().error;if(T&&T.status&&T.message){const k=function(F){const B=F.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(B)>=0?B:_e.UNKNOWN}(T.status);u(new Pe(k,T.message))}else u(new Pe(_e.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Pe(_e.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=U8(),u=B8(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new $8({})),this.uo(h.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");Ve("Connection","Creating WebChannel: "+m,h);const y=o.createWebChannel(m,h);let C=!1,T=!1;const k=new G5({jr:B=>{T?Ve("Connection","Not sending because WebChannel is closed:",B):(C||(Ve("Connection","Opening WebChannel transport."),y.open(),C=!0),Ve("Connection","WebChannel sending:",B),y.send(B))},Wr:()=>y.close()}),F=(B,ee,de)=>{B.listen(ee,Ue=>{try{de(Ue)}catch(Ke){setTimeout(()=>{throw Ke},0)}})};return F(y,GT.EventType.OPEN,()=>{T||Ve("Connection","WebChannel transport opened.")}),F(y,GT.EventType.CLOSE,()=>{T||(T=!0,Ve("Connection","WebChannel transport closed"),k.eo())}),F(y,GT.EventType.ERROR,B=>{T||(T=!0,Ew("Connection","WebChannel transport errored:",B),k.eo(new Pe(_e.UNAVAILABLE,"The operation could not be completed")))}),F(y,GT.EventType.MESSAGE,B=>{var ee;if(!T){const de=B.data[0];Pt(!!de);const Ue=de,Ke=Ue.error||(null===(ee=Ue[0])||void 0===ee?void 0:ee.error);if(Ke){Ve("Connection","WebChannel received error:",Ke);const nt=Ke.status;let Qe=function(Nt){const on=Xr[Nt];if(void 0!==on)return o2(on)}(nt),St=Ke.message;void 0===Qe&&(Qe=_e.INTERNAL,St="Unknown error status: "+nt+" with message "+Ke.message),T=!0,k.eo(new Pe(Qe,St)),y.close()}else Ve("Connection","WebChannel received:",de),k.no(de)}}),F(u,j8.STAT_EVENT,B=>{B.stat===dB.PROXY?Ve("Connection","Detected buffering proxy"):B.stat===dB.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.Zr()},0),k}}function mH(){return typeof window<"u"?window:null}function _S(){return typeof document<"u"?document:null}function Xw(n){return new FK(n,!0)}class VN{constructor(e,t,r=1e3,i=1.5,o=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=o,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class gH{constructor(e,t,r,i,o,u,h,m){this.js=e,this.Ao=r,this.Ro=i,this.bo=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new VN(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,we.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,we.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(Qr(t.toString()),Qr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Pe(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,we.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class q5 extends gH{constructor(e,t,r,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.wt=o}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function UK(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:dt(),i=e.targetChange.targetIds||[],o=function(m,y){return m.dt?(Pt(void 0===y||"string"==typeof y),di.fromBase64String(y||"")):(Pt(void 0===y||y instanceof Uint8Array),di.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const y=void 0===m.code?_e.UNKNOWN:o2(m.code);return new Pe(y,m.message||"")}(u);t=new d2(r,i,o,h||null)}else if("documentChange"in e){const r=e.documentChange,i=dc(n,r.document.name),o=Pi(r.document.updateTime),u=new os({mapValue:{fields:r.document.fields}}),h=Zn.newFoundDocument(i,o,u);t=new rS(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=dc(n,r.document),o=r.readTime?Pi(r.readTime):Rt.min(),u=Zn.newNoDocument(i,o);t=new rS([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=dc(n,r.document);t=new rS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,o=new AK(r.count||0);t=new c2(r.targetId,o)}}var m;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return Rt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Rt.min():o.readTime?Pi(o.readTime):Rt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=jw(this.wt),t.addTarget=function(i,o){let u;const h=o.target;return u=QT(h)?{documents:w2(i,h)}:{query:E2(i,h)},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?u.resumeToken=m2(i,o.resumeToken):o.snapshotVersion.compareTo(Rt.min())>0&&(u.readTime=Bw(i,o.snapshotVersion.toTimestamp())),u}(this.wt,e);const r=function HK(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=jw(this.wt),t.removeTarget=e,this.Mo(t)}}class W5 extends gH{constructor(e,t,r,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.wt=o,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function BK(n,e){return n&&n.length>0?(Pt(void 0!==e),n.map(t=>function(r,i){let o=Pi(r.updateTime?r.updateTime:i);return o.isEqual(Rt.min())&&(o=Pi(i)),new DK(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pi(e.commitTime);return this.listener.Jo(r,t)}return Pt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=jw(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>$w(this.wt,r))};this.Mo(t)}}class K5 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Pe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.bo.ro(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(_e.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ao(e,t,r,o,u,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(_e.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class Z5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Qr(t),this.su=!1):Ve("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Y5{constructor(e,t,r,i,o){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=o,this.du.Br(h=>{r.enqueueAndForget((0,we.Z)(function*(){var m;Hf(u)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,we.Z)(function*(y){const C=rt(y);C.lu.add(4),yield jy(C),C._u.set("Unknown"),C.lu.delete(4),yield Jw(C)}),function(y){return m.apply(this,arguments)})(u))}))}),this._u=new Z5(r,i)}}function Jw(n){return UN.apply(this,arguments)}function UN(){return UN=(0,we.Z)(function*(n){if(Hf(n))for(const e of n.fu)yield e(!0)}),UN.apply(this,arguments)}function jy(n){return BN.apply(this,arguments)}function BN(){return BN=(0,we.Z)(function*(n){for(const e of n.fu)yield e(!1)}),BN.apply(this,arguments)}function yS(n,e){const t=rt(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),$N(t)?jN(t):Gy(t).Co()&&HN(t,e))}function eE(n,e){const t=rt(n),r=Gy(t);t.hu.delete(e),r.Co()&&_H(t,e),0===t.hu.size&&(r.Co()?r.ko():Hf(t)&&t._u.set("Unknown"))}function HN(n,e){n.wu.Nt(e.targetId),Gy(n).Qo(e)}function _H(n,e){n.wu.Nt(e),Gy(n).jo(e)}function jN(n){n.wu=new NK({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Gy(n).start(),n._u.iu()}function $N(n){return Hf(n)&&!Gy(n).Do()&&n.hu.size>0}function Hf(n){return 0===rt(n).lu.size}function yH(n){n.wu=void 0}function Q5(n){return GN.apply(this,arguments)}function GN(){return GN=(0,we.Z)(function*(n){n.hu.forEach((e,t)=>{HN(n,e)})}),GN.apply(this,arguments)}function X5(n,e){return zN.apply(this,arguments)}function zN(){return zN=(0,we.Z)(function*(n,e){yH(n),$N(n)?(n._u.uu(e),jN(n)):n._u.set("Unknown")}),zN.apply(this,arguments)}function J5(n,e,t){return qN.apply(this,arguments)}function qN(){return qN=(0,we.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof d2&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(i,o){const u=o.cause;for(const h of o.targetIds)i.hu.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i.hu.delete(h),i.wu.removeTarget(h))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vS(n,r)}else if(e instanceof rS?n.wu.Ut(e):e instanceof c2?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Rt.min()))try{const r=yield oH(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const u=i.wu.Yt(o);return u.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.hu.get(m);y&&i.hu.set(m,y.withResumeToken(h.resumeToken,o))}}),u.targetMismatches.forEach(h=>{const m=i.hu.get(h);if(!m)return;i.hu.set(h,m.withResumeToken(di.EMPTY_BYTE_STRING,m.snapshotVersion)),_H(i,h);const y=new Vf(m.target,h,1,m.sequenceNumber);HN(i,y)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield vS(n,r)}var r}),qN.apply(this,arguments)}function vS(n,e,t){return WN.apply(this,arguments)}function WN(){return WN=(0,we.Z)(function*(n,e,t){if(!Rf(e))throw e;n.lu.add(1),yield jy(n),n._u.set("Offline"),t||(t=()=>oH(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Jw(n)}))}),WN.apply(this,arguments)}function vH(n,e){return e().catch(t=>vS(n,t,e))}function $y(n){return KN.apply(this,arguments)}function KN(){return KN=(0,we.Z)(function*(n){const e=rt(n),t=jf(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;eZ(e);)try{const i=yield U5(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,tZ(e,i)}catch(i){yield vS(e,i)}bH(e)&&wH(e)}),KN.apply(this,arguments)}function eZ(n){return Hf(n)&&n.au.length<10}function tZ(n,e){n.au.push(e);const t=jf(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function bH(n){return Hf(n)&&!jf(n).Do()&&n.au.length>0}function wH(n){jf(n).start()}function nZ(n){return ZN.apply(this,arguments)}function ZN(){return ZN=(0,we.Z)(function*(n){jf(n).Xo()}),ZN.apply(this,arguments)}function rZ(n){return YN.apply(this,arguments)}function YN(){return YN=(0,we.Z)(function*(n){const e=jf(n);for(const t of n.au)e.Ho(t.mutations)}),YN.apply(this,arguments)}function iZ(n,e,t){return QN.apply(this,arguments)}function QN(){return QN=(0,we.Z)(function*(n,e,t){const r=n.au.shift(),i=bN.from(r,e,t);yield vH(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield $y(n)}),QN.apply(this,arguments)}function sZ(n,e){return XN.apply(this,arguments)}function XN(){return XN=(0,we.Z)(function*(n,e){var t;e&&jf(n).zo&&(yield(t=(0,we.Z)(function*(r,i){if(s2(o=i.code)&&o!==_e.ABORTED){const u=r.au.shift();jf(r).No(),yield vH(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield $y(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),bH(n)&&wH(n)}),XN.apply(this,arguments)}function EH(n,e){return JN.apply(this,arguments)}function JN(){return JN=(0,we.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=Hf(t);t.lu.add(3),yield jy(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Jw(t)}),JN.apply(this,arguments)}function eO(n,e){return tO.apply(this,arguments)}function tO(){return tO=(0,we.Z)(function*(n,e){const t=rt(n);e?(t.lu.delete(2),yield Jw(t)):e||(t.lu.add(2),yield jy(t),t._u.set("Unknown"))}),tO.apply(this,arguments)}function Gy(n){return n.mu||(n.mu=function(e,t,r){const i=rt(e);return i.tu(),new q5(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:Q5.bind(null,n),Jr:X5.bind(null,n),Go:J5.bind(null,n)}),n.fu.push(function(){var e=(0,we.Z)(function*(t){t?(n.mu.No(),$N(n)?jN(n):n._u.set("Unknown")):(yield n.mu.stop(),yH(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function jf(n){return n.gu||(n.gu=function(e,t,r){const i=rt(e);return i.tu(),new W5(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:nZ.bind(null,n),Jr:sZ.bind(null,n),Yo:rZ.bind(null,n),Jo:iZ.bind(null,n)}),n.fu.push(function(){var e=(0,we.Z)(function*(t){t?(n.gu.No(),yield $y(n)):(yield n.gu.stop(),n.au.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class nO{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,o){const u=Date.now()+r,h=new nO(e,t,u,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zy(n,e){if(Qr("AsyncQueue",`${e}: ${n}`),Rf(n))return new Pe(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class qy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=Fw(),this.sortedSet=new xr(this.comparator)}static emptySet(e){return new qy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new qy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class CH{constructor(){this.yu=new xr(tt.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):dt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Wy{constructor(e,t,r,i,o,u,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const o=[];return t.forEach(u=>{o.push({type:0,doc:u})}),new Wy(e,t,qy.emptySet(t),o,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class oZ{constructor(){this.Iu=void 0,this.listeners=[]}}class aZ{constructor(){this.queries=new Lf(e=>jB(e),Nw),this.onlineState="Unknown",this.Tu=new Set}}function rO(n,e){return iO.apply(this,arguments)}function iO(){return iO=(0,we.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new oZ),i)try{o.Iu=yield t.onListen(r)}catch(u){const h=zy(u,`Initialization of query '${hN(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,o),o.listeners.push(e),e.Eu(t.onlineState),o.Iu&&e.Au(o.Iu)&&aO(t)}),iO.apply(this,arguments)}function sO(n,e){return oO.apply(this,arguments)}function oO(){return oO=(0,we.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const u=o.listeners.indexOf(e);u>=0&&(o.listeners.splice(u,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),oO.apply(this,arguments)}function lZ(n,e){const t=rt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.Au(i)&&(r=!0);u.Iu=i}}r&&aO(t)}function uZ(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function aO(n){n.Tu.forEach(e=>{e.next()})}class lO{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Wy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Wy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class cZ{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class IH{constructor(e){this.wt=e}Wi(e){return dc(this.wt,e)}zi(e){return e.metadata.exists?b2(this.wt,e.document,!1):Zn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Pi(e)}}class dZ{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=DH(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=fn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new IH(this.wt);for(const i of e)if(i.metadata.queries){const o=r.Wi(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||Zt()).add(o);t.set(u,h)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function B5(n,e,t,r){return RN.apply(this,arguments)}(e.localStore,new IH(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield H5(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function DH(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class TH{constructor(e){this.key=e}}class SH{constructor(e){this.key=e}}class AH{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Zt(),this.mutatedKeys=Zt(),this.Lu=GB(e),this.Uu=new qy(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new CH,i=t?t.Uu:this.Uu;let o=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,T)=>{const k=i.get(C),F=fN(this.query,T)?T:null,B=!!k&&this.mutatedKeys.has(k.key),ee=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let de=!1;k&&F?k.data.isEqual(F.data)?B!==ee&&(r.track({type:3,doc:F}),de=!0):this.Qu(k,F)||(r.track({type:2,doc:F}),de=!0,(m&&this.Lu(F,m)>0||y&&this.Lu(F,y)<0)&&(h=!0)):!k&&F?(r.track({type:0,doc:F}),de=!0):k&&!F&&(r.track({type:1,doc:k}),de=!0,(m||y)&&(h=!0)),de&&(F?(u=u.add(F),o=ee?o.add(C):o.delete(C)):(u=u.delete(C),o=o.delete(C)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const C="F"===this.query.limitType?u.last():u.first();u=u.delete(C.key),o=o.delete(C.key),r.track({type:1,doc:C})}return{Uu:u,Gu:r,Oi:h,mutatedKeys:o}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const o=e.Gu.pu();o.sort((y,C)=>function(T,k){const F=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return F(T)-F(k)}(y.type,C.type)||this.Lu(y.doc,C.doc)),this.ju(r);const u=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,m=h!==this.$u;return this.$u=h,0!==o.length||m?{snapshot:new Wy(this.query,e.Uu,i,o,e.mutatedKeys,0===h,m,!1),zu:u}:{zu:u}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new CH,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Zt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new SH(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new TH(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Zt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Wy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class hZ{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class fZ{constructor(e){this.key=e,this.Xu=!1}}class pZ{constructor(e,t,r,i,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Zu={},this.tc=new Lf(h=>jB(h),Nw),this.ec=new Map,this.nc=new Set,this.sc=new xr(tt.comparator),this.ic=new Map,this.rc=new DN,this.oc={},this.uc=new Map,this.cc=ng.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function mZ(n,e){return uO.apply(this,arguments)}function uO(){return uO=(0,we.Z)(function*(n,e){const t=RO(n);let r,i;const o=t.tc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.Yu();else{const u=yield By(t.localStore,al(e));t.isPrimaryClient&&yS(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield cO(t,e,r,"current"===h)}return i}),uO.apply(this,arguments)}function cO(n,e,t,r){return dO.apply(this,arguments)}function dO(){return dO=(0,we.Z)(function*(n,e,t,r){n.hc=(C,T,k)=>{return(F=(0,we.Z)(function*(B,ee,de,Ue){let Ke=ee.view.Ku(de);Ke.Oi&&(Ke=yield pS(B.localStore,ee.query,!1).then(({documents:St})=>ee.view.Ku(St,Ke)));const nt=Ue&&Ue.targetChanges.get(ee.targetId),Qe=ee.view.applyChanges(Ke,B.isPrimaryClient,nt);return wO(B,ee.targetId,Qe.zu),Qe.snapshot}),function(B,ee,de,Ue){return F.apply(this,arguments)})(n,C,T,k);var F};const i=yield pS(n.localStore,e,!0),o=new AH(e,i.ji),u=o.Ku(i.documents),h=Uw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=o.applyChanges(u,n.isPrimaryClient,h);wO(n,t,m.zu);const y=new hZ(e,t,o);return n.tc.set(e,y),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),m.snapshot}),dO.apply(this,arguments)}function gZ(n,e){return hO.apply(this,arguments)}function hO(){return hO=(0,we.Z)(function*(n,e){const t=rt(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(o=>!Nw(o,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Hy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),eE(t.remoteStore,r.targetId),Ky(t,r.targetId)}).catch(kf))):(Ky(t,r.targetId),yield Hy(t.localStore,r.targetId,!0))}),hO.apply(this,arguments)}function fO(){return fO=(0,we.Z)(function*(n,e,t){const r=NO(n);try{const i=yield function(o,u){const h=rt(o),m=_r.now(),y=u.reduce((k,F)=>k.add(F.key),Zt());let C,T;return h.persistence.runTransaction("Locally write mutations","readwrite",k=>{let F=Io(),B=Zt();return h.Ui.getEntries(k,y).next(ee=>{F=ee,F.forEach((de,Ue)=>{Ue.isValidDocument()||(B=B.add(de))})}).next(()=>h.localDocuments.getOverlayedDocuments(k,F)).next(ee=>{C=ee;const de=[];for(const Ue of u){const Ke=SK(Ue,C.get(Ue.key).overlayedDocument);null!=Ke&&de.push(new Rd(Ue.key,Ke,NB(Ke.value.mapValue),Cr.exists(!0)))}return h.mutationQueue.addMutationBatch(k,m,de,u)}).next(ee=>{T=ee;const de=ee.applyToLocalDocumentSet(C,B);return h.documentOverlayCache.saveOverlays(k,ee.batchId,de)})}).then(()=>({batchId:T.batchId,changes:l2(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,h){let m=o.oc[o.currentUser.toKey()];m||(m=new xr(qt)),m=m.insert(u,h),o.oc[o.currentUser.toKey()]=m}(r,i.batchId,t),yield Nd(r,i.changes),yield $y(r.remoteStore)}catch(i){const o=zy(i,"Failed to persist write");t.reject(o)}}),fO.apply(this,arguments)}function MH(n,e){return pO.apply(this,arguments)}function pO(){return pO=(0,we.Z)(function*(n,e){const t=rt(n);try{const r=yield V5(t.localStore,e);e.targetChanges.forEach((i,o)=>{const u=t.ic.get(o);u&&(Pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Xu=!0:i.modifiedDocuments.size>0?Pt(u.Xu):i.removedDocuments.size>0&&(Pt(u.Xu),u.Xu=!1))}),yield Nd(t,r,e)}catch(r){yield kf(r)}}),pO.apply(this,arguments)}function xH(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((o,u)=>{const h=u.view.Eu(e);h.snapshot&&i.push(h.snapshot)}),function(o,u){const h=rt(o);h.onlineState=u;let m=!1;h.queries.forEach((y,C)=>{for(const T of C.listeners)T.Eu(u)&&(m=!0)}),m&&aO(h)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function yZ(n,e,t){return mO.apply(this,arguments)}function mO(){return mO=(0,we.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),o=i&&i.key;if(o){let u=new xr(tt.comparator);u=u.insert(o,Zn.newNoDocument(o,Rt.min()));const h=Zt().add(o),m=new Vw(Rt.min(),new Map,new Ln(qt),u,h);yield MH(r,m),r.sc=r.sc.remove(o),r.ic.delete(e),EO(r)}else yield Hy(r.localStore,e,!1).then(()=>Ky(r,e,t)).catch(kf)}),mO.apply(this,arguments)}function vZ(n,e){return gO.apply(this,arguments)}function gO(){return gO=(0,we.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const i=yield L5(t.localStore,e);bO(t,r,null),vO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Nd(t,i)}catch(i){yield kf(i)}}),gO.apply(this,arguments)}function bZ(n,e,t){return _O.apply(this,arguments)}function _O(){return _O=(0,we.Z)(function*(n,e,t){const r=rt(n);try{const i=yield function(o,u){const h=rt(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return h.mutationQueue.lookupMutationBatch(m,u).next(C=>(Pt(null!==C),y=C.keys(),h.mutationQueue.removeMutationBatch(m,C))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,y,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>h.localDocuments.getDocuments(m,y))})}(r.localStore,e);bO(r,e,t),vO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Nd(r,i)}catch(i){yield kf(i)}}),_O.apply(this,arguments)}function yO(){return yO=(0,we.Z)(function*(n,e){const t=rt(n);Hf(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const u=rt(o);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=zy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),yO.apply(this,arguments)}function vO(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function bO(n,e,t){const r=rt(n);let i=r.oc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Ky(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||kH(n,r)})}function kH(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(eE(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),EO(n))}function wO(n,e,t){for(const r of t)r instanceof TH?(n.rc.addReference(r.key,e),EZ(n,r)):r instanceof SH?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||kH(n,r.key)):dt()}function EZ(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.nc.add(r),EO(n))}function EO(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new tt(fn.fromString(e)),r=n.cc.next();n.ic.set(r,new fZ(t)),n.sc=n.sc.insert(t,r),yS(n.remoteStore,new Vf(al(xy(t.path)),r,2,Co.ot))}}function Nd(n,e,t){return CO.apply(this,arguments)}function CO(){return CO=(0,we.Z)(function*(n,e,t){const r=rt(n),i=[],o=[],u=[];var h;r.tc.isEmpty()||(r.tc.forEach((h,m)=>{u.push(r.hc(m,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,y.fromCache?"not-current":"current"),i.push(y);const C=MN.Vi(m.targetId,y);o.push(C)}}))}),yield Promise.all(u),r.Zu.Go(i),yield(h=(0,we.Z)(function*(m,y){const C=rt(m);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>he.forEach(y,k=>he.forEach(k.Pi,F=>C.persistence.referenceDelegate.addReference(T,k.targetId,F)).next(()=>he.forEach(k.vi,F=>C.persistence.referenceDelegate.removeReference(T,k.targetId,F)))))}catch(T){if(!Rf(T))throw T;Ve("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const k=T.targetId;if(!T.fromCache){const F=C.$i.get(k),ee=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);C.$i=C.$i.insert(k,ee)}}}),function(m,y){return h.apply(this,arguments)})(r.localStore,o))}),CO.apply(this,arguments)}function CZ(n,e){return IO.apply(this,arguments)}function IO(){return IO=(0,we.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield sH(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(u=>{u.forEach(h=>{h.reject(new Pe(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Nd(t,r.Ki)}var i}),IO.apply(this,arguments)}function IZ(n,e){const t=rt(n),r=t.ic.get(e);if(r&&r.Xu)return Zt().add(r.key);{let i=Zt();const o=t.ec.get(e);if(!o)return i;for(const u of o){const h=t.tc.get(u);i=i.unionWith(h.view.qu)}return i}}function DZ(n,e){return DO.apply(this,arguments)}function DO(){return DO=(0,we.Z)(function*(n,e){const t=rt(n),r=yield pS(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&wO(t,e.targetId,i.zu),i}),DO.apply(this,arguments)}function TZ(n,e){return TO.apply(this,arguments)}function TO(){return TO=(0,we.Z)(function*(n,e){const t=rt(n);return uH(t.localStore,e).then(r=>Nd(t,r))}),TO.apply(this,arguments)}function SZ(n,e,t,r){return SO.apply(this,arguments)}function SO(){return SO=(0,we.Z)(function*(n,e,t,r){const i=rt(n),o=yield function(u,h){const m=rt(u),y=rt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.yn(C,h).next(T=>T?m.localDocuments.getDocuments(C,T):he.resolve(null)))}(i.localStore,e);var h;null!==o?("pending"===t?yield $y(i.remoteStore):"acknowledged"===t||"rejected"===t?(bO(i,e,r||null),vO(i,e),h=e,rt(rt(i.localStore).mutationQueue).In(h)):dt(),yield Nd(i,o)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),SO.apply(this,arguments)}function AO(){return AO=(0,we.Z)(function*(n,e){const t=rt(n);if(RO(t),NO(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield RH(t,r.toArray());t.ac=!0,yield eO(t.remoteStore,!0);for(const o of i)yS(t.remoteStore,o)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Ky(t,u),Hy(t.localStore,u,!0))),eE(t.remoteStore,u)}),yield i,yield RH(t,r),function(o){const u=rt(o);u.ic.forEach((h,m)=>{eE(u.remoteStore,m)}),u.rc.cs(),u.ic=new Map,u.sc=new xr(tt.comparator)}(t),t.ac=!1,yield eO(t.remoteStore,!1)}}),AO.apply(this,arguments)}function RH(n,e,t){return MO.apply(this,arguments)}function MO(){return MO=(0,we.Z)(function*(n,e,t){const r=rt(n),i=[],o=[];for(const u of e){let h;const m=r.ec.get(u);if(m&&0!==m.length){h=yield By(r.localStore,al(m[0]));for(const y of m){const C=r.tc.get(y),T=yield DZ(r,C);T.snapshot&&o.push(T.snapshot)}}else{const y=yield lH(r.localStore,u);h=yield By(r.localStore,y),yield cO(r,NH(y),u,!1)}i.push(h)}return r.Zu.Go(o),i}),MO.apply(this,arguments)}function NH(n){return BB(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function MZ(n){const e=rt(n);return rt(rt(e.localStore).persistence).Ri()}function xZ(n,e,t,r){return xO.apply(this,arguments)}function xO(){return xO=(0,we.Z)(function*(n,e,t,r){const i=rt(n);if(i.ac)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const o=i.ec.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=yield uH(i.localStore,$B(o[0])),h=Vw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Nd(i,u,h);break}case"rejected":yield Hy(i.localStore,e,!0),Ky(i,e,r);break;default:dt()}}),xO.apply(this,arguments)}function kZ(n,e,t){return kO.apply(this,arguments)}function kO(){return kO=(0,we.Z)(function*(n,e,t){const r=RO(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const o=yield lH(r.localStore,i),u=yield By(r.localStore,o);yield cO(r,NH(o),u.targetId,!1),yS(r.remoteStore,u)}for(const i of t)r.ec.has(i)&&(yield Hy(r.localStore,i,!1).then(()=>{eE(r.remoteStore,i),Ky(r,i)}).catch(kf))}}),kO.apply(this,arguments)}function RO(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yZ.bind(null,e),e.Zu.Go=lZ.bind(null,e.eventManager),e.Zu.lc=uZ.bind(null,e.eventManager),e}function NO(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bZ.bind(null,e),e}class OH{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.wt=Xw(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return iH(this.persistence,new rH,e.initialUser,this.wt)}_c(e){return new tH(hS.Ms,this.wt)}dc(e){return new fH}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class PH extends OH{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield NO(r.yc.syncEngine),yield $y(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return iH(this.persistence,new rH,e.initialUser,this.wt)}mc(e,t){return new E5(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new iK(t,this.persistence);return new rK(e.asyncQueue,r)}_c(e){const t=AN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Do.withCacheSize(this.cacheSizeBytes):Do.DEFAULT;return new SN(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mH(),_S(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new fH}}class NZ extends PH{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof LN&&(r.sharedClientState.syncEngine={kr:SZ.bind(null,i),Or:xZ.bind(null,i),Mr:kZ.bind(null,i),Ri:MZ.bind(null,i),Nr:TZ.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var o=(0,we.Z)(function*(u){yield function AZ(n,e){return AO.apply(this,arguments)}(r.yc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return o.apply(this,arguments)}}())})()}dc(e){const t=mH();if(!LN.V(t))throw new Pe(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=AN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new LN(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class OO{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>xH(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=CZ.bind(null,r.syncEngine),yield eO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new aZ}createDatastore(e){const t=Xw(e.databaseInfo.databaseId),r=new z5(e.databaseInfo);return new K5(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=h=>xH(this.syncEngine,h,0),u=pH.V()?new pH:new j5,new Y5(t,r,i,o,u);var t,r,i,o,u}createSyncEngine(e,t){return function(r,i,o,u,h,m,y){const C=new pZ(r,i,o,u,h,m);return y&&(C.ac=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=rt(t);Ve("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield jy(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function FH(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class bS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class OZ{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Oi,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,we.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const o=yield e.vc(i);return new cZ(JSON.parse(o),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,we.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class PZ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,we.Z)(function*(o,u){const h=rt(o),m=jw(h.wt)+"/documents",y={documents:u.map(F=>Hw(h.wt,F))},C=yield h.ao("BatchGetDocuments",m,y,u.length),T=new Map;C.forEach(F=>{const B=function VK(n,e){return"found"in e?function(t,r){Pt(!!r.found);const i=dc(t,r.found.name),o=Pi(r.found.updateTime),u=new os({mapValue:{fields:r.found.fields}});return Zn.newFoundDocument(i,o,u)}(n,e):"missing"in e?function(t,r){Pt(!!r.missing),Pt(!!r.readTime);const i=dc(t,r.missing),o=Pi(r.readTime);return Zn.newNoDocument(i,o)}(n,e):dt()}(h.wt,F);T.set(B.key.toString(),B)});const k=[];return u.forEach(F=>{const B=T.get(F.toString());Pt(!!B),k.push(B)}),k}),function(o,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Py(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=tt.fromPath(i);e.mutations.push(new pN(o,e.precondition(o)))}),yield(r=(0,we.Z)(function*(i,o){const u=rt(i),h=jw(u.wt)+"/documents",m={writes:o.map(y=>$w(u.wt,y))};yield u.ro("Commit",h,m)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=Rt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Cr.updateTime(t):Cr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Rt.min()))throw new Pe(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cr.updateTime(t)}return Cr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class FZ{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Dc=r.maxAttempts,this.So=new VN(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,we.Z)(function*(){const t=new PZ(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Nc(o)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!Sw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!s2(t)}return!1}}class LZ{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ni.UNAUTHENTICATED,this.clientId=mB.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,we.Z)(function*(h){Ve("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Ve("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=zy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function LH(n,e){return PO.apply(this,arguments)}function PO(){return PO=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,we.Z)(function*(o){r.isEqual(o)||(yield sH(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),PO.apply(this,arguments)}function VH(n,e){return FO.apply(this,arguments)}function FO(){return FO=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield LO(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>EH(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>EH(e.remoteStore,o)),n.onlineComponents=e}),FO.apply(this,arguments)}function LO(n){return VO.apply(this,arguments)}function VO(){return VO=(0,we.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield LH(n,new OH)),n.offlineComponents}),VO.apply(this,arguments)}function wS(n){return UO.apply(this,arguments)}function UO(){return UO=(0,we.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield VH(n,new OO)),n.onlineComponents}),UO.apply(this,arguments)}function UH(n){return LO(n).then(e=>e.persistence)}function BO(n){return LO(n).then(e=>e.localStore)}function BH(n){return wS(n).then(e=>e.remoteStore)}function HO(n){return wS(n).then(e=>e.syncEngine)}function Zy(n){return jO.apply(this,arguments)}function jO(){return jO=(0,we.Z)(function*(n){const e=yield wS(n),t=e.eventManager;return t.onListen=mZ.bind(null,e.syncEngine),t.onUnlisten=gZ.bind(null,e.syncEngine),t}),jO.apply(this,arguments)}function HH(n,e,t={}){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,o,u,h,m){const y=new bS({next:T=>{o.enqueueAndForget(()=>sO(i,C));const k=T.docs.has(u);!k&&T.fromCache?m.reject(new Pe(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&T.fromCache&&h&&"server"===h.source?m.reject(new Pe(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),C=new lO(xy(u.path),y,{includeMetadataChanges:!0,Du:!0});return rO(i,C)}(yield Zy(n),n.asyncQueue,e,t,r)})),r.promise}function jH(n,e,t={}){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,o,u,h,m){const y=new bS({next:T=>{o.enqueueAndForget(()=>sO(i,C)),T.fromCache&&"server"===h.source?m.reject(new Pe(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),C=new lO(u,y,{includeMetadataChanges:!0,Du:!0});return rO(i,C)}(yield Zy(n),n.asyncQueue,e,t,r)})),r.promise}const $H=new Map;function $O(n,e,t){if(!t)throw new Pe(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GH(n,e,t,r){if(!0===e&&!0===r)throw new Pe(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zH(n){if(!tt.isDocumentKey(n))throw new Pe(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qH(n){if(tt.isDocumentKey(n))throw new Pe(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ES(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ES(n);throw new Pe(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function WH(n,e){if(e<=0)throw new Pe(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class KH{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,GH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KH({}),this._settingsFrozen=!1,e instanceof xd?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Pe(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xd(i.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KH(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new W8;switch(t.type){case"gapi":const r=t.client;return Pt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Q8(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$H.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),$H.delete(e),t.terminate())}(this),Promise.resolve()}}class or{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class bs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bs(this.firestore,e,this._query)}}class fc extends bs{constructor(e,t,r){super(e,t,xy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new tt(e))}withConverter(e){return new fc(this.firestore,e,this._path)}}function ZH(n,e,...t){if(n=(0,P.m9)(n),$O("collection","path",e),n instanceof tE){const r=fn.fromString(e,...t);return qH(r),new fc(n,null,r)}{if(!(n instanceof or||n instanceof fc))throw new Pe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return qH(r),new fc(n.firestore,null,r)}}function CS(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=mB.I()),$O("doc","path",e),n instanceof tE){const r=fn.fromString(e,...t);return zH(r),new or(n,null,new tt(r))}{if(!(n instanceof or||n instanceof fc))throw new Pe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return zH(r),new or(n.firestore,n instanceof fc?n.converter:null,new tt(r))}}function YH(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof or||n instanceof fc)&&(e instanceof or||e instanceof fc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function QH(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof bs&&e instanceof bs&&n.firestore===e.firestore&&Nw(n._query,e._query)&&n.converter===e.converter}class KZ{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new VN(this,"async_queue_retry"),this.Kc=()=>{const t=_S();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=_S();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=_S();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Oi;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,we.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Rf(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Qr("INTERNAL UNHANDLED ERROR: ",function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),u}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=nO.createAndSchedule(this,e,t,r,o=>this.Wc(o));return this.$c.push(i),i}Gc(){this.Bc&&dt()}verifyOperationInProgress(){}zc(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function GO(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class ZZ{constructor(){this._progressObserver={},this._taskCompletionResolver=new Oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class yr extends tE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new KZ,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||XH(this),this._firestoreClient.terminate()}}function Jr(n){return n._firestoreClient||XH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function XH(n){var e;const t=n._freezeSettings(),r=(o=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new aK(n._databaseId,o,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var o,h;n._firestoreClient=new LZ(n._authCredentials,n._appCheckCredentials,n._queue,r)}function JH(n,e,t){const r=new Oi;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield LH(n,t),yield VH(n,e),r.resolve()}catch(i){const o=i;if(!("FirebaseError"===(u=o).name?u.code===_e.FAILED_PRECONDITION||u.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function ej(n){if(n._initialized||n._terminated)throw new Pe(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Od{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pc(di.fromBase64String(e))}catch(t){throw new Pe(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pc(di.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ig{constructor(e){this._methodName=e}}class IS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}}const s7=/^__.*__$/;class o7{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Rd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Oy(e,this.data,t,this.fieldTransforms)}}class tj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Rd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class DS{constructor(e,t,r,i,o,u){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Xc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new DS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return AS(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(nj(this.Zc)&&s7.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class a7{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||Xw(e)}aa(e,t,r,i=!1){return new DS({Zc:e,methodName:t,ca:r,path:Vr.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function sg(n){const e=n._freezeSettings(),t=Xw(n._databaseId);return new a7(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TS(n,e,t,r,i,o={}){const u=n.aa(o.merge||o.mergeFields?2:0,e,t,i);KO("Data must be an object, but it was:",u,r);const h=sj(r,u);let m,y;if(o.merge)m=new la(u.fieldMask),y=u.fieldTransforms;else if(o.mergeFields){const C=[];for(const T of o.mergeFields){const k=ZO(e,T,t);if(!u.contains(k))throw new Pe(_e.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);aj(C,k)||C.push(k)}m=new la(C),y=u.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,y=u.fieldTransforms;return new o7(new os(h),m,y)}class nE extends ig{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nE}}function rj(n,e,t){return new DS({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class zO extends ig{_toFieldTransform(e){return new Ow(e.path,new Ry)}isEqual(e){return e instanceof zO}}class l7 extends ig{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=rj(this,e,!0),r=this.ha.map(o=>og(o,t)),i=new Km(r);return new Ow(e.path,i)}isEqual(e){return this===e}}class u7 extends ig{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=rj(this,e,!0),r=this.ha.map(o=>og(o,t)),i=new Zm(r);return new Ow(e.path,i)}isEqual(e){return this===e}}class c7 extends ig{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Ny(e.wt,WB(e.wt,this.la));return new Ow(e.path,t)}isEqual(e){return this===e}}function qO(n,e,t,r){const i=n.aa(1,e,t);KO("Data must be an object, but it was:",i,r);const o=[],u=os.empty();$m(r,(m,y)=>{const C=SS(e,m,t);y=(0,P.m9)(y);const T=i.ia(C);if(y instanceof nE)o.push(C);else{const k=og(y,T);null!=k&&(o.push(C),u.set(C,k))}});const h=new la(o);return new tj(u,h,i.fieldTransforms)}function WO(n,e,t,r,i,o){const u=n.aa(1,e,t),h=[ZO(e,r,t)],m=[i];if(o.length%2!=0)throw new Pe(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<o.length;k+=2)h.push(ZO(e,o[k])),m.push(o[k+1]);const y=[],C=os.empty();for(let k=h.length-1;k>=0;--k)if(!aj(y,h[k])){const F=h[k];let B=m[k];B=(0,P.m9)(B);const ee=u.ia(F);if(B instanceof nE)y.push(F);else{const de=og(B,ee);null!=de&&(y.push(F),C.set(F,de))}}const T=new la(y);return new tj(C,T,u.fieldTransforms)}function ij(n,e,t,r=!1){return og(t,n.aa(r?4:3,e))}function og(n,e){if(oj(n=(0,P.m9)(n)))return KO("Unsupported field value:",e,n),sj(n,e);if(n instanceof ig)return function(t,r){if(!nj(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const u of t){let h=og(u,r.ra(o));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return WB(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=_r.fromDate(t);return{timestampValue:Bw(r.wt,i)}}if(t instanceof _r){const i=new _r(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Bw(r.wt,i)}}if(t instanceof IS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pc)return{bytesValue:m2(r.wt,t._byteString)};if(t instanceof or){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r.oa(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:mN(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${ES(t)}`)}(n,e)}function sj(n,e){const t={};return CB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$m(n,(r,i)=>{const o=og(i,e.ea(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function oj(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof _r||n instanceof IS||n instanceof pc||n instanceof or||n instanceof ig)}function KO(n,e,t){if(!oj(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ES(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function ZO(n,e,t){if((e=(0,P.m9)(e))instanceof Od)return e._internalPath;if("string"==typeof e)return SS(n,e);throw AS("Field path arguments must be of type string or ",n,!1,void 0,t)}const d7=new RegExp("[~\\*/\\[\\]]");function SS(n,e,t){if(e.search(d7)>=0)throw AS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Od(...e.split("."))._internalPath}catch{throw AS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function AS(n,e,t,r,i){const o=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(o||u)&&(m+=" (found",o&&(m+=` in field ${r}`),u&&(m+=` in document ${i}`),m+=")"),new Pe(_e.INVALID_ARGUMENT,h+n+m)}function aj(n,e){return n.some(t=>t.isEqual(e))}class rE{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new h7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(MS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class h7 extends rE{data(){return super.data()}}function MS(n,e){return"string"==typeof e?SS(n,e):e instanceof Od?e._internalPath:e._delegate._internalPath}class ag{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pd extends rE{constructor(e,t,r,i,o,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new iE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(MS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class iE extends Pd{data(e={}){return super.data(e)}}class $f{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ag(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new iE(this._firestore,this._userDataWriter,r.key,r,new ag(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new iE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ag(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new iE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ag(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,y=-1;return 0!==u.type&&(m=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),1!==u.type&&(o=o.add(u.doc),y=o.indexOf(u.doc.key)),{type:f7(u.type),doc:h,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function f7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function lj(n,e){return n instanceof Pd&&e instanceof Pd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $f&&e instanceof $f&&n._firestore===e._firestore&&QH(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function uj(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sE{}function Gf(n,...e){for(const t of e)n=t._apply(n);return n}class p7 extends sE{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=sg(e.firestore),r=function(i,o,u,h,m,y,C){let T;if(m.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Pe(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){mj(C,y);const F=[];for(const B of C)F.push(pj(h,i,B));T={arrayValue:{values:F}}}else T=pj(h,i,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||mj(C,y),T=ij(u,"where",C,"in"===y||"not-in"===y);const k=as.create(m,y,T);return function(F,B){if(B.ht()){const de=cN(F);if(null!==de&&!de.isEqual(B.field))throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${de.toString()}' and '${B.field.toString()}'`);const Ue=uN(F);null!==Ue&&gj(0,B.field,Ue)}const ee=function(de,Ue){for(const Ke of de.filters)if(Ue.indexOf(Ke.op)>=0)return Ke.op;return null}(F,function(de){switch(de){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==ee)throw new Pe(_e.INVALID_ARGUMENT,ee===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${ee.toString()}' filters.`)}(i,k),k}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new bs(e.firestore,e.converter,function(i,o){const u=i.filters.concat([o]);return new kd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class g7 extends sE{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new Pe(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new My(i,o);return function(h,m){if(null===uN(h)){const y=cN(h);null!==y&&gj(0,y,m.field)}}(r,u),u}(e._query,this.fa,this.wa);return new bs(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new kd(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class cj extends sE{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new bs(e.firestore,e.converter,HB(e._query,this.ma,this.ga))}}class dj extends sE{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=fj(e,this.type,this.ya,this.pa);return new bs(e.firestore,e.converter,(i=t,new kd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class hj extends sE{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=fj(e,this.type,this.ya,this.pa);return new bs(e.firestore,e.converter,(i=t,new kd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function fj(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof rE)return function(i,o,u,h,m){if(!h)throw new Pe(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const C of ky(i))if(C.field.isKeyField())y.push(qm(o,h.key));else{const T=h.data.field(C.field);if(oN(T))throw new Pe(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const k=C.field.canonicalString();throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}y.push(T)}return new Ff(y,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=sg(n.firestore);return function(o,u,h,m,y,C){const T=o.explicitOrderBy;if(y.length>T.length)throw new Pe(_e.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let F=0;F<y.length;F++){const B=y[F];if(T[F].field.isKeyField()){if("string"!=typeof B)throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof B}`);if(!dN(o)&&-1!==B.indexOf("/"))throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${B}' contains a slash.`);const ee=o.path.child(fn.fromString(B));if(!tt.isDocumentKey(ee))throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);const de=new tt(ee);k.push(qm(u,de))}else{const ee=ij(h,m,B);k.push(ee)}}return new Ff(k,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function pj(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new Pe(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dN(e)&&-1!==t.indexOf("/"))throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!tt.isDocumentKey(r))throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qm(n,new tt(r))}if(t instanceof or)return qm(n,t._key);throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ES(t)}.`)}function mj(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(_e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function gj(n,e,t){if(!t.isEqual(e))throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const I7={maxAttempts:5};class YO{convertValue(e,t="none"){switch(zm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return $m(e.fields,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new IS(kr(e.latitude),kr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=DB(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tw(e));default:return null}}convertTimestamp(e){const t=Nf(e);return new _r(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);Pt(D2(r));const i=new xd(r.get(1),r.get(3)),o=new tt(r.popFirst(5));return i.isEqual(t)||Qr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function xS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class D7 extends YO{constructor(e){super(),this.firestore=e}convertBytes(e){return new pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}class _j{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sg(e)}set(e,t,r){this._verifyNotCommitted();const i=zf(e,this._firestore),o=xS(i.converter,t,r),u=TS(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Cr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=zf(e,this._firestore);let u;return u="string"==typeof(t=(0,P.m9)(t))||t instanceof Od?WO(this._dataReader,"WriteBatch.update",o._key,t,r,i):qO(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,Cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zf(e,this._firestore);return this._mutations=this._mutations.concat(new Py(t._key,Cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zf(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new Pe(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class lg extends YO{constructor(e){super(),this.firestore=e}convertBytes(e){return new pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}function yj(n,e,t){n=un(n,or);const r=un(n.firestore,yr),i=xS(n.converter,e,t);return Yy(r,[TS(sg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Cr.none())])}function vj(n,e,t,...r){n=un(n,or);const i=un(n.firestore,yr),o=sg(i);let u;return u="string"==typeof(e=(0,P.m9)(e))||e instanceof Od?WO(o,"updateDoc",n._key,e,t,r):qO(o,"updateDoc",n._key,e),Yy(i,[u.toMutation(n._key,Cr.exists(!0))])}function bj(n,...e){var t,r,i;n=(0,P.m9)(n);let o={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||GO(e[u])||(o=e[u],u++);const h={includeMetadataChanges:o.includeMetadataChanges};if(GO(e[u])){const T=e[u];e[u]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[u+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[u+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let m,y,C;if(n instanceof or)y=un(n.firestore,yr),C=xy(n._key.path),m={next:T=>{e[u]&&e[u](QO(y,n,T))},error:e[u+1],complete:e[u+2]};else{const T=un(n,bs);y=un(T.firestore,yr),C=T._query;const k=new lg(y);m={next:F=>{e[u]&&e[u](new $f(y,k,T,F))},error:e[u+1],complete:e[u+2]},uj(n._query)}return function(T,k,F,B){const ee=new bS(B),de=new lO(k,ee,F);return T.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return rO(yield Zy(T),de)})),()=>{ee.Tc(),T.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return sO(yield Zy(T),de)}))}}(Jr(y),C,h,m)}function Yy(n,e){return function(t,r){const i=new Oi;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function _Z(n,e,t){return fO.apply(this,arguments)}(yield HO(t),r,i)})),i.promise}(Jr(n),e)}function QO(n,e,t){const r=t.docs.get(e._key),i=new lg(n);return new Pd(n,i,e._key,r,new ag(t.hasPendingWrites,t.fromCache),e.converter)}class P7 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=sg(e)}get(e){const t=zf(e,this._firestore),r=new D7(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const o=i[0];if(o.isFoundDocument())return new rE(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new rE(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=zf(e,this._firestore),o=xS(i.converter,t,r),u=TS(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const o=zf(e,this._firestore);let u;return u="string"==typeof(t=(0,P.m9)(t))||t instanceof Od?WO(this._dataReader,"Transaction.update",o._key,t,r,i):qO(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=zf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zf(e,this._firestore),r=new lg(this._firestore);return super.get(e).then(i=>new Pd(this._firestore,r,t._key,i._document,new ag(!1,!1),t.converter))}}function XO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ej(){if(typeof Uint8Array>"u")throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function Cj(){if(!function sK(){return typeof atob<"u"}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Dy=Yi.SDK_VERSION,(0,Yi._registerComponent)(new Us.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),o=new yr(i,new Z8(t.getProvider("auth-internal")),new X8(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC")),(0,Yi.registerVersion)(hB,"3.4.12",n),(0,Yi.registerVersion)(hB,"3.4.12","esm2017")}();class oE{constructor(e){this._delegate=e}static fromBase64String(e){return Cj(),new oE(pc.fromBase64String(e))}static fromUint8Array(e){return Ej(),new oE(pc.fromUint8Array(e))}toBase64(){return Cj(),this._delegate.toBase64()}toUint8Array(){return Ej(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function JO(n){return function G7(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class z7{enableIndexedDbPersistence(e,t){return function QZ(n,e){ej(n=un(n,yr));const t=Jr(n),r=n._freezeSettings(),i=new OO;return JH(t,i,new PH(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function XZ(n){ej(n=un(n,yr));const e=Jr(n),t=n._freezeSettings(),r=new OO;return JH(e,r,new NZ(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function JZ(n){if(n._initialized&&!n._terminated)throw new Pe(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Oi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!Yl.V())return Promise.resolve();const i=r+"main";yield Yl.delete(i)}),function(r){return t.apply(this,arguments)})(AN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ij{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof xd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ew("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function qZ(n,e,t,r={}){var i;const o=(n=un(n,tE))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Ew("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=Ni.MOCK_USER;else{u=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Pe(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ni(m)}n._authCredentials=new K8(new fB(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function t7(n){return function VZ(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield UH(n),t=yield BH(n);return e.setNetworkEnabled(!0),function(r){const i=rt(r);return i.lu.delete(0),Jw(i)}(t)}))}(Jr(n=un(n,yr)))}(this._delegate)}disableNetwork(){return function n7(n){return function UZ(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield UH(n),t=yield BH(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(i){const o=rt(i);o.lu.add(0),yield jy(o),o._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Jr(n=un(n,yr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,GH("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function e7(n){return function(e){const t=new Oi;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function wZ(n,e){return yO.apply(this,arguments)}(yield HO(e),t)})),t.promise}(Jr(n=un(n,yr)))}(this._delegate)}onSnapshotsInSync(e){return function O7(n,e){return function jZ(n,e){const t=new bS(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield Zy(n),i=t,rt(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield Zy(n),i=t,void rt(r).Tu.delete(i);var r,i}))}}(Jr(n=un(n,yr)),GO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Qy(this,ZH(this._delegate,e))}catch(t){throw Zs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ll(this,CS(this._delegate,e))}catch(t){throw Zs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ys(this,function WZ(n,e){if(n=un(n,tE),$O("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bs(n,null,(t=e,new kd(fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Zs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function F7(n,e,t){n=un(n,yr);const r=Object.assign(Object.assign({},I7),t);return function(i){if(i.maxAttempts<1)throw new Pe(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function $Z(n,e,t){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const i=yield(o=n,wS(o).then(u=>u.datastore));var o;new FZ(n.asyncQueue,i,t,e,r).run()})),r.promise}(Jr(n),i=>e(new P7(n,i)),r)}(this._delegate,t=>e(new Dj(this,t)))}batch(){return Jr(this._delegate),new Tj(new _j(this._delegate,e=>Yy(this._delegate,e)))}loadBundle(e){return function r7(n,e){const t=Jr(n=un(n,yr)),r=new ZZ;return function GZ(n,e,t,r){const i=function(o,u){let h;return h="string"==typeof o?(new TextEncoder).encode(o):o,m=function(m,y){if(m instanceof Uint8Array)return FH(m,y);if(m instanceof ArrayBuffer)return FH(new Uint8Array(m),y);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new OZ(m,u);var m}(t,Xw(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function RZ(n,e,t){const r=rt(n);var i;(i=(0,we.Z)(function*(o,u,h){try{const m=yield u.getMetadata();if(yield function(k,F){const B=rt(k),ee=Pi(F.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",de=>B.Ds.getBundleMetadata(de,F.id)).then(de=>!!de&&de.createTime.compareTo(ee)>=0)}(o.localStore,m))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(k=m).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);h._updateProgress(DH(m));const y=new dZ(m,o.localStore,u.wt);let C=yield u.fc();for(;C;){const k=yield y.Nu(C);k&&h._updateProgress(k),C=yield u.fc()}const T=yield y.complete();return yield Nd(o,T.Mu,void 0),yield function(k,F){const B=rt(k);return B.persistence.runTransaction("Save bundle","readwrite",ee=>B.Ds.saveBundleMetadata(ee,F))}(o.localStore,m),h._completeWith(T.progress),Promise.resolve(T.Ou)}catch(m){return Ew("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var k}),function(o,u,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield HO(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function i7(n,e){return function zZ(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const i=rt(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ds.getNamedQuery(o,r))}(yield BO(n),e)}))}(Jr(n=un(n,yr)),e).then(t=>t?new bs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ys(this,t):null)}}class kS extends YO{constructor(e){super(),this.firestore=e}convertBytes(e){return new oE(new pc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ll.forKey(t,this.firestore,null)}}class Dj{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new kS(e)}get(e){const t=cg(e);return this._delegate.get(t).then(r=>new aE(this._firestore,new Pd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=cg(e);return r?(XO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=cg(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=cg(e);return this._delegate.delete(t),this}}class Tj{constructor(e){this._delegate=e}set(e,t,r){const i=cg(e);return r?(XO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=cg(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=cg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ug{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new iE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new lE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ug.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new ug(e,new kS(e),t),i.set(t,o)),o}}ug.INSTANCES=new WeakMap;class ll{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ll(t,new or(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new ll(t,new or(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Qy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Qy(this.firestore,ZH(this._delegate,e))}catch(t){throw Zs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof or&&YH(this._delegate,e)}set(e,t){t=XO("DocumentReference.set",t);try{return t?yj(this._delegate,e,t):yj(this._delegate,e)}catch(r){throw Zs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?vj(this._delegate,e):vj(this._delegate,e,t,...r)}catch(i){throw Zs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function R7(n){return Yy(un(n.firestore,yr),[new Py(n._key,Cr.none())])}(this._delegate)}onSnapshot(...e){const t=Sj(e),r=Aj(e,i=>new aE(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return bj(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function S7(n){n=un(n,or);const e=un(n.firestore,yr),t=Jr(e),r=new lg(e);return function BZ(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,o,u){try{const h=yield function(m,y){const C=rt(m);return C.persistence.runTransaction("read document","readonly",T=>C.localDocuments.getDocument(T,y))}(i,o);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new Pe(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=zy(h,`Failed to get document '${o} from cache`);u.reject(m)}}),function(i,o,u){return r.apply(this,arguments)})(yield BO(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Pd(e,r,n._key,i,new ag(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function A7(n){n=un(n,or);const e=un(n.firestore,yr);return HH(Jr(e),n._key,{source:"server"}).then(t=>QO(e,n,t))}(this._delegate):function T7(n){n=un(n,or);const e=un(n.firestore,yr);return HH(Jr(e),n._key).then(t=>QO(e,n,t))}(this._delegate),t.then(r=>new aE(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ll(this.firestore,this._delegate.withConverter(e?ug.getInstance(this.firestore,e):null))}}function Zs(n,e,t){return n.message=n.message.replace(e,t),n}function Sj(n){for(const e of n)if("object"==typeof e&&!JO(e))return e;return{}}function Aj(n,e){var t,r;let i;return i=JO(n[0])?n[0]:JO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class aE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ll(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return lj(this._delegate,e._delegate)}}class lE extends aE{data(e){const t=this._delegate.data(e);return function q8(n,e){n||dt()}(void 0!==t),t}}class Ys{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kS(e)}where(e,t,r){try{return new Ys(this.firestore,Gf(this._delegate,function m7(n,e,t){const r=e,i=MS("where",n);return new p7(i,r,t)}(e,t,r)))}catch(i){throw Zs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ys(this.firestore,Gf(this._delegate,function _7(n,e="asc"){const t=e,r=MS("orderBy",n);return new g7(r,t)}(e,t)))}catch(r){throw Zs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ys(this.firestore,Gf(this._delegate,function y7(n){return WH("limit",n),new cj("limit",n,"F")}(e)))}catch(t){throw Zs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ys(this.firestore,Gf(this._delegate,function v7(n){return WH("limitToLast",n),new cj("limitToLast",n,"L")}(e)))}catch(t){throw Zs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ys(this.firestore,Gf(this._delegate,function b7(...n){return new dj("startAt",n,!0)}(...e)))}catch(t){throw Zs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ys(this.firestore,Gf(this._delegate,function w7(...n){return new dj("startAfter",n,!1)}(...e)))}catch(t){throw Zs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ys(this.firestore,Gf(this._delegate,function E7(...n){return new hj("endBefore",n,!1)}(...e)))}catch(t){throw Zs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ys(this.firestore,Gf(this._delegate,function C7(...n){return new hj("endAt",n,!0)}(...e)))}catch(t){throw Zs(t,"endAt()","Query.endAt()")}}isEqual(e){return QH(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function x7(n){n=un(n,bs);const e=un(n.firestore,yr),t=Jr(e),r=new lg(e);return function HZ(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,o,u){try{const h=yield pS(i,o,!0),m=new AH(o,h.ji),y=m.Ku(h.documents),C=m.applyChanges(y,!1);u.resolve(C.snapshot)}catch(h){const m=zy(h,`Failed to execute query '${o} against cache`);u.reject(m)}}),function(i,o,u){return r.apply(this,arguments)})(yield BO(n),e,t);var r})),t.promise}(t,n._query).then(i=>new $f(e,r,n,i))}(this._delegate):"server"===e?.source?function k7(n){n=un(n,bs);const e=un(n.firestore,yr),t=Jr(e),r=new lg(e);return jH(t,n._query,{source:"server"}).then(i=>new $f(e,r,n,i))}(this._delegate):function M7(n){n=un(n,bs);const e=un(n.firestore,yr),t=Jr(e),r=new lg(e);return uj(n._query),jH(t,n._query).then(i=>new $f(e,r,n,i))}(this._delegate),t.then(r=>new eP(this.firestore,new $f(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Sj(e),r=Aj(e,i=>new eP(this.firestore,new $f(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return bj(this._delegate,t,r)}withConverter(e){return new Ys(this.firestore,this._delegate.withConverter(e?ug.getInstance(this.firestore,e):null))}}class W7{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new lE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class eP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ys(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new lE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new W7(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new lE(this._firestore,r))})}isEqual(e){return lj(this._delegate,e._delegate)}}class Qy extends Ys{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ll(this.firestore,e):null}doc(e){try{return new ll(this.firestore,void 0===e?CS(this._delegate):CS(this._delegate,e))}catch(t){throw Zs(t,"doc()","CollectionReference.doc()")}}add(e){return function N7(n,e){const t=un(n.firestore,yr),r=CS(n),i=xS(n.converter,e);return Yy(t,[TS(sg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Cr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ll(this.firestore,t))}isEqual(e){return YH(this._delegate,e._delegate)}withConverter(e){return new Qy(this.firestore,this._delegate.withConverter(e?ug.getInstance(this.firestore,e):null))}}function cg(n){return un(n,or)}class tP{constructor(...e){this._delegate=new Od(...e)}static documentId(){return new tP(Vr.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof Od&&this._delegate._internalPath.isEqual(e._internalPath)}}class dg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function V7(){return new zO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new dg(e)}static delete(){const e=function L7(){return new nE("deleteField")}();return e._methodName="FieldValue.delete",new dg(e)}static arrayUnion(...e){const t=function U7(...n){return new l7("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new dg(t)}static arrayRemove(...e){const t=function B7(...n){return new u7("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new dg(t)}static increment(e){const t=function H7(n){return new c7("increment",n)}(e);return t._methodName="FieldValue.increment",new dg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const K7={Firestore:Ij,GeoPoint:IS,Timestamp:_r,Blob:oE,Transaction:Dj,WriteBatch:Tj,DocumentReference:ll,DocumentSnapshot:aE,Query:Ys,QueryDocumentSnapshot:lE,QuerySnapshot:eP,CollectionReference:Qy,FieldPath:tP,FieldValue:dg,setLogLevel:function q7(n){!function z8(n){xf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Mj(n,e){return function Q7(n,e=Rh.z){return new dr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function nP(n,e){return Mj(n,e).pipe((0,at.U)(t=>({payload:t,type:"query"})))}function RS(n,e){return nP(n,e).pipe(uo(void 0),lR(),(0,at.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const m=i.find(C=>C.doc.ref.isEqual(u.ref)),y=t?.payload.docs.find(C=>C.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),o}))}function xj(n,e,t){return RS(n,t).pipe(ka((r,i)=>function J7(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function eY(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return rP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return rP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return rP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),Hu(),(0,at.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function rP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function kj(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Y7(n){(function Z7(n,e){n.INTERNAL.registerComponent(new Us.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},K7)))})(n,(e,t)=>new Ij(e,t,new z7)),n.registerVersion("@firebase/firestore-compat","0.1.21")}(n_.Z);class Rj{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=RS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,at.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(uo(void 0),lR(),zr(([r,i])=>i.length>0||!r),(0,at.U)(([r,i])=>i),ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(ka((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kj(e);return xj(this.query,t,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return nP(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ln.iC)}get(e){return(0,tn.D)(this.query.get(e)).pipe(ln.iC)}add(e){return this.ref.add(e)}doc(e){return new Nj(this.ref.doc(e),this.afs)}}class Nj{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=Fj(r,t);return new Rj(i,o,this.afs)}snapshotChanges(){return function X7(n,e){return Mj(n,e).pipe(uo(void 0),lR(),(0,at.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,at.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,tn.D)(this.ref.get(e)).pipe(ln.iC)}}class tY{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?RS(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),zr(t=>t.length>0),ln.iC):RS(this.query,this.afs.schedulers.outsideAngular).pipe(ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(ka((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kj(e);return xj(this.query,t,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return nP(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ln.iC)}get(e){return(0,tn.D)(this.query.get(e)).pipe(ln.iC)}}const Oj=new d.OlP("angularfire2.enableFirestorePersistence"),Pj=new d.OlP("angularfire2.firestore.persistenceSettings"),nY=new d.OlP("angularfire2.firestore.settings"),rY=new d.OlP("angularfire2.firestore.use-emulator");function Fj(n,e=(t=>t)){return{query:e(n),ref:n}}let iY=(()=>{class n{constructor(t,r,i,o,u,h,m,y,C,T,k,F,B,ee,de,Ue,Ke){this.schedulers=m;const nt=(0,Ar.on)(t,h,r),Qe=C;T&&e_(nt,h,k,B,ee,de,F,Ue),[this.firestore,this.persistenceEnabled$]=(0,Ar.cc)(`${nt.name}.firestore`,"AngularFirestore",nt.name,()=>{const St=h.runOutsideAngular(()=>nt.firestore());if(o&&St.settings(o),Qe&&St.useEmulator(...Qe),i&&!jd(u)){const Nt=()=>{try{return(0,tn.D)(St.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(on){return typeof console<"u"&&console.warn(on),He(!1)}};return[St,h.runOutsideAngular(Nt)]}return[St,He(!1)]},[o,Qe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:u}=Fj(i,r),h=this.schedulers.ngZone.run(()=>o);return new Rj(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),o=this.firestore.collectionGroup(t);return new tY(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Nj(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ar.Dh),d.LFG(Ar.xv,8),d.LFG(Oj,8),d.LFG(nY,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(ln.HU),d.LFG(Pj,8),d.LFG(rY,8),d.LFG(Hp,8),d.LFG(Kv,8),d.LFG(Za,8),d.LFG(Jg,8),d.LFG(Zv,8),d.LFG(Bp,8),d.LFG(Yv,8),d.LFG(ed,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),sY=(()=>{class n{constructor(){Up.Z.registerVersion("angularfire",ln.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Oj,useValue:!0},{provide:Pj,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[iY]}),n})();const Lj_firebaseConfig={apiKey:"AIzaSyAKO8LuJ1BHNKXyl7SjJa_a9uX1o6MoEEs",authDomain:"angulargroceries.firebaseapp.com",databaseURL:"https://angulargroceries-default-rtdb.europe-west1.firebasedatabase.app",projectId:"angulargroceries",storageBucket:"angulargroceries.appspot.com",messagingSenderId:"1074478989562",appId:"1:1074478989562:web:7b3adf0abe204d37b54943"};let oY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ar.hO.initializeApp(Lj_firebaseConfig),Ar.hO,wA,sY,L4,Ix]}),n})(),aY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ji,Ji]}),n})(),lY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[kG,nz,vG,zz,aY,DG,q3]}),n})(),uY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[KW]}),n.\u0275inj=d.cJS({imports:[dn,Wz,oY,lY,WW]}),n})();(0,d.G48)(),Ic().bootstrapModule(uY).catch(n=>console.error(n))},5867:(pt,Re,U)=>{U.d(Re,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=U(9681);(0,d.registerVersion)("firebase","9.9.0","app")},127:(pt,Re,U)=>{U.d(Re,{Z:()=>d.Z});var d=U(3942);d.Z.registerVersion("firebase","9.9.0","app-compat")},1451:(pt,Re,U)=>{U.r(Re);var d=U(5861),re=U(3942),L=U(2090),pe=U(9681),le=U(655),ye=U(1877),ae=U(4859);const xe=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},$e=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new ye.Yd("@firebase/auth");function it(v,...p){Je.logLevel<=ye.in.ERROR&&Je.error(`Auth (${pe.SDK_VERSION}): ${v}`,...p)}function ke(v,...p){throw ze(v,...p)}function Ce(v,...p){return ze(v,...p)}function Te(v,p,_){const w=Object.assign(Object.assign({},$e()),{[p]:_});return new L.LL("auth","Firebase",w).create(p,{appName:v.name})}function je(v,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&ke(v,"argument-error"),Te(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(v,...p){if("string"!=typeof v){const _=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(_,...w)}return ge.create(v,...p)}function q(v,p,..._){if(!v)throw ze(p,..._)}function Ie(v){const p="INTERNAL ASSERTION FAILED: "+v;throw it(p),new Error(p)}function J(v,p){v||Ie(p)}const oe=new Map;function se(v){J(v instanceof Function,"Expected a class definition");let p=oe.get(v);return p?(J(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,oe.set(v,p),p)}function Fe(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function vt(){return"http:"===Qt()||"https:"===Qt()}function Qt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class cn{constructor(p,_){this.shortDelay=p,this.longDelay=_,J(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Gt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vt()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hn(v,p){J(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class mn{static initialize(p,_,w){this.fetchImpl=p,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Br=new cn(3e4,6e4);function Jt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function zt(v,p,_,w){return ls.apply(this,arguments)}function ls(){return(ls=(0,d.Z)(function*(v,p,_,w,x={}){return hi(v,x,(0,d.Z)(function*(){let O={},X={};w&&("GET"===p?X=w:O={body:JSON.stringify(w)});const ce=(0,L.xO)(Object.assign({key:v.config.apiKey},X)).slice(1),Be=yield v._getAdditionalHeaders();return Be["Content-Type"]="application/json",v.languageCode&&(Be["X-Firebase-Locale"]=v.languageCode),mn.fetch()(Qs(v,v.config.apiHost,_,ce),Object.assign({method:p,headers:Be,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function hi(v,p,_){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,d.Z)(function*(v,p,_){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},nn),p);try{const x=new ti(v),O=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const X=yield O.json();if("needConfirmation"in X)throw Ui(v,"account-exists-with-different-credential",X);if(O.ok&&!("errorMessage"in X))return X;{const ce=O.ok?X.errorMessage:X.error.message,[Be,st]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw Ui(v,"credential-already-in-use",X);if("EMAIL_EXISTS"===Be)throw Ui(v,"email-already-in-use",X);if("USER_DISABLED"===Be)throw Ui(v,"user-disabled",X);const Et=w[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw Te(v,Et,st);ke(v,Et)}}catch(x){if(x instanceof L.ZR)throw x;ke(v,"network-request-failed")}})).apply(this,arguments)}function ei(v,p,_,w){return us.apply(this,arguments)}function us(){return(us=(0,d.Z)(function*(v,p,_,w,x={}){const O=yield zt(v,p,_,w,x);return"mfaPendingCredential"in O&&ke(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Qs(v,p,_,w){const x=`${p}${_}?${w}`;return v.config.emulator?Hn(v.config,x):`${v.config.apiScheme}://${x}`}class ti{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(Ce(this.auth,"network-request-failed")),Br.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ui(v,p,_){const w={appName:v.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const x=Ce(v,p,w);return x.customData._tokenResponse=_,x}function ni(){return(ni=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function jn(v,p){return $n.apply(this,arguments)}function $n(){return($n=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function cs(v,p){return ds.apply(this,arguments)}function ds(){return(ds=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Vn(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function To(){return(To=(0,d.Z)(function*(v,p=!1){const _=(0,L.m9)(v),w=yield _.getIdToken(p),x=qe(w);q(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,X=O?.sign_in_provider;return{claims:x,token:w,authTime:Vn(Xt(x.auth_time)),issuedAtTime:Vn(Xt(x.iat)),expirationTime:Vn(Xt(x.exp)),signInProvider:X||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Xt(v){return 1e3*Number(v)}function qe(v){var p;const[_,w,x]=v.split(".");if(void 0===_||void 0===w||void 0===x)return it("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,L.tV)(w);return O?JSON.parse(O):(it("Failed to decode base64 JWT payload"),null)}catch(O){return it("Caught error parsing JWT payload as JSON",null===(p=O)||void 0===p?void 0:p.toString()),null}}function Hr(v,p){return ar.apply(this,arguments)}function ar(){return(ar=(0,d.Z)(function*(v,p,_=!1){if(_)return p;try{return yield p}catch(w){throw w instanceof L.ZR&&Mt(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Mt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class pi{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),w)}iteration(){var p=this;return(0,d.Z)(function*(){var _;try{yield p.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(_=w)||void 0===_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class lr{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vn(this.lastLoginAt),this.creationTime=Vn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Bi(v){return an.apply(this,arguments)}function an(){return(an=(0,d.Z)(function*(v){var p;const _=v.auth,w=yield v.getIdToken(),x=yield Hr(v,cs(_,{idToken:w}));q(x?.users.length,_,"internal-error");const O=x.users[0];v._notifyReloadListener(O);const X=null!==(p=O.providerUserInfo)&&void 0!==p&&p.length?j(O.providerUserInfo):[],ce=W(v.providerData,X),Et=!!v.isAnonymous&&!(v.email&&O.passwordHash||ce?.length),_t={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ce,metadata:new lr(O.createdAt,O.lastLoginAt),isAnonymous:Et};Object.assign(v,_t)})).apply(this,arguments)}function $(){return($=(0,d.Z)(function*(v){const p=(0,L.m9)(v);yield Bi(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function W(v,p){return[...v.filter(w=>!p.some(x=>x.providerId===w.providerId)),...p]}function j(v){return v.map(p=>{var{providerId:_}=p,w=(0,le._T)(p,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Y(){return(Y=(0,d.Z)(function*(v,p){const _=yield hi(v,{},(0,d.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:O}=v.config,X=Qs(v,x,"/v1/token",`key=${O}`),ce=yield v._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",mn.fetch()(X,{method:"POST",headers:ce,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){q(p.idToken,"internal-error"),q(typeof p.idToken<"u","internal-error"),q(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function It(v){const p=qe(v);return q(p,"internal-error"),q(typeof p.exp<"u","internal-error"),q(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var w=this;return(0,d.Z)(function*(){return q(!w.accessToken||w.refreshToken,p,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var w=this;return(0,d.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:X}=yield function K(v,p){return Y.apply(this,arguments)}(p,_);w.updateTokensAndExpiration(x,O,Number(X))})()}updateTokensAndExpiration(p,_,w){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,_){const{refreshToken:w,accessToken:x,expirationTime:O}=_,X=new Ne;return w&&(q("string"==typeof w,"internal-error",{appName:p}),X.refreshToken=w),x&&(q("string"==typeof x,"internal-error",{appName:p}),X.accessToken=x),O&&(q("number"==typeof O,"internal-error",{appName:p}),X.expirationTime=O),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Ne,this.toJSON())}_performRefresh(){return Ie("not implemented")}}function We(v,p){q("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class ft{constructor(p){var{uid:_,auth:w,stsTokenManager:x}=p,O=(0,le._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new lr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,d.Z)(function*(){const w=yield Hr(_,_.stsTokenManager.getToken(_.auth,p));return q(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(p){return function fi(v){return To.apply(this,arguments)}(this,p)}reload(){return function ri(v){return $.apply(this,arguments)}(this)}_assign(p){this!==p&&(q(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new ft(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var w=this;return(0,d.Z)(function*(){let x=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),x=!0),_&&(yield Bi(w)),yield w.auth._persistUserIfCurrent(w),x&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,d.Z)(function*(){const _=yield p.getIdToken();return yield Hr(p,function bt(v,p){return ni.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var w,x,O,X,ce,Be,st,Et;const _t=null!==(w=_.displayName)&&void 0!==w?w:void 0,Sr=null!==(x=_.email)&&void 0!==x?x:void 0,pr=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Lu=null!==(X=_.photoURL)&&void 0!==X?X:void 0,wh=null!==(ce=_.tenantId)&&void 0!==ce?ce:void 0,kp=null!==(Be=_._redirectEventId)&&void 0!==Be?Be:void 0,Eh=null!==(st=_.createdAt)&&void 0!==st?st:void 0,fv=null!==(Et=_.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:qa,emailVerified:Rp,isAnonymous:Ch,providerData:Vu,stsTokenManager:Zc}=_;q(qa&&Zc,p,"internal-error");const Vg=Ne.fromJSON(this.name,Zc);q("string"==typeof qa,p,"internal-error"),We(_t,p.name),We(Sr,p.name),q("boolean"==typeof Rp,p,"internal-error"),q("boolean"==typeof Ch,p,"internal-error"),We(pr,p.name),We(Lu,p.name),We(wh,p.name),We(kp,p.name),We(Eh,p.name),We(fv,p.name);const Ih=new ft({uid:qa,auth:p,email:Sr,emailVerified:Rp,displayName:_t,isAnonymous:Ch,photoURL:Lu,phoneNumber:pr,tenantId:wh,stsTokenManager:Vg,createdAt:Eh,lastLoginAt:fv});return Vu&&Array.isArray(Vu)&&(Ih.providerData=Vu.map(Uu=>Object.assign({},Uu))),kp&&(Ih._redirectEventId=kp),Ih}static _fromIdTokenResponse(p,_,w=!1){return(0,d.Z)(function*(){const x=new Ne;x.updateFromServerResponse(_);const O=new ft({uid:_.localId,auth:p,stsTokenManager:x,isAnonymous:w});return yield Bi(O),O})()}}const en=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,w){var x=this;return(0,d.Z)(function*(){x.storage[_]=w})()}_get(_){var w=this;return(0,d.Z)(function*(){const x=w.storage[_];return void 0===x?null:x})()}_remove(_){var w=this;return(0,d.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return v.type="NONE",v})();function vr(v,p,_){return`firebase:${v}:${p}:${_}`}class jt{constructor(p,_,w){this.persistence=p,this.auth=_,this.userKey=w;const{config:x,name:O}=this.auth;this.fullUserKey=vr(this.userKey,x.apiKey,O),this.fullPersistenceKey=vr("persistence",x.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?ft._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,d.Z)(function*(){if(_.persistence===p)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,w="authUser"){return(0,d.Z)(function*(){if(!_.length)return new jt(se(en),p,w);const x=(yield Promise.all(_.map(function(){var st=(0,d.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return st.apply(this,arguments)}}()))).filter(st=>st);let O=x[0]||se(en);const X=vr(w,p.config.apiKey,p.name);let ce=null;for(const st of _)try{const Et=yield st._get(X);if(Et){const _t=ft._fromJSON(p,Et);st!==O&&(ce=_t),O=st;break}}catch{}const Be=x.filter(st=>st._shouldAllowMigration);return O._shouldAllowMigration&&Be.length?(O=Be[0],ce&&(yield O._set(X,ce.toJSON())),yield Promise.all(_.map(function(){var st=(0,d.Z)(function*(Et){if(Et!==O)try{yield Et._remove(X)}catch{}});return function(Et){return st.apply(this,arguments)}}())),new jt(O,p,w)):new jt(O,p,w)})()}}function $t(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(jr(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Dn(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(xt(p))return"Blackberry";if(sn(p))return"Webos";if(Qn(p))return"Safari";if((p.includes("chrome/")||Dr(p))&&!p.includes("edge/"))return"Chrome";if(Ze(p))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Dn(v=(0,L.z$)()){return/firefox\//i.test(v)}function Qn(v=(0,L.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Dr(v=(0,L.z$)()){return/crios\//i.test(v)}function jr(v=(0,L.z$)()){return/iemobile/i.test(v)}function Ze(v=(0,L.z$)()){return/android/i.test(v)}function xt(v=(0,L.z$)()){return/blackberry/i.test(v)}function sn(v=(0,L.z$)()){return/webos/i.test(v)}function On(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Tn(v=(0,L.z$)()){return On(v)||Ze(v)||sn(v)||xt(v)||/windows phone/i.test(v)||jr(v)}function Hi(v,p=[]){let _;switch(v){case"Browser":_=$t((0,L.z$)());break;case"Worker":_=`${$t((0,L.z$)())}-${v}`;break;default:_=v}const w=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${pe.SDK_VERSION}/${w}`}class Ft{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const w=O=>new Promise((X,ce)=>{try{X(p(O))}catch(Be){ce(Be)}});w.onAbort=_,this.queue.push(w);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,d.Z)(function*(){var w;if(_.auth.currentUser===p)return;const x=[];try{for(const O of _.queue)yield O(p),O.onAbort&&x.push(O.onAbort)}catch(O){x.reverse();for(const X of x)try{X()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=O)||void 0===w?void 0:w.message})}})()}}class Ql{constructor(p,_,w){this.app=p,this.heartbeatServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ha(this),this.idTokenSubscription=new ha(this),this.beforeStateQueue=new Ft(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(p,_){var w=this;return _&&(this._popupRedirectResolver=se(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var x,O;if(!w._deleted&&(w.persistenceManager=yield jt.create(w,p),!w._deleted)){if(null!==(x=w._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(O=w.currentUser)||void 0===O?void 0:O.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,d.Z)(function*(){var w;const x=yield _.assertedPersistence.getCurrentUser();let O=x,X=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ce=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,Be=O?._redirectEventId,st=yield _.tryRedirectSignIn(p);(!ce||ce===Be)&&st?.user&&(O=st.user,X=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(X)try{yield _.beforeStateQueue.runMiddleware(O)}catch(ce){O=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ce))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return q(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var _=this;return(0,d.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,d.Z)(function*(){var w;try{yield Bi(p)}catch(x){if("auth/network-request-failed"!==(null===(w=x)||void 0===w?void 0:w.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Xe(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,d.Z)(function*(){const w=p?(0,L.m9)(p):null;return w&&q(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(p,_=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return p&&q(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(se(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new L.LL("auth","Firebase",p())}onAuthStateChanged(p,_,w){return this.registerStateListener(this.authStateSubscription,p,_,w)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,w){return this.registerStateListener(this.idTokenSubscription,p,_,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var w=this;return(0,d.Z)(function*(){const x=yield w.getOrInitRedirectPersistenceManager(_);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const w=p&&se(p)||_._popupRedirectResolver;q(w,_,"argument-error"),_.redirectPersistenceManager=yield jt.create(_,[se(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,d.Z)(function*(){var w,x;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===p?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,d.Z)(function*(){if(p===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,w,x){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),X=this._isInitialized?Promise.resolve():this._initializationPromise;return q(X,this,"internal-error"),X.then(()=>O(this.currentUser)),"function"==typeof _?p.addObserver(_,w,x):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Hi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var _;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(w["X-Firebase-Client"]=x),w})()}}function Sn(v){return(0,L.m9)(v)}class ha{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xn(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Es(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class mi{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Ie("not implemented")}_getIdTokenResponse(p){return Ie("not implemented")}_linkToIdToken(p,_){return Ie("not implemented")}_getReauthenticationResolver(p){return Ie("not implemented")}}function Tr(v,p){return gn.apply(this,arguments)}function gn(){return(gn=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:resetPassword",Jt(v,p))})).apply(this,arguments)}function Ld(v,p){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function dl(v,p){return pa.apply(this,arguments)}function pa(){return(pa=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:update",Jt(v,p))})).apply(this,arguments)}function hl(){return(hl=(0,d.Z)(function*(v,p){return ei(v,"POST","/v1/accounts:signInWithPassword",Jt(v,p))})).apply(this,arguments)}function ji(v,p){return Un.apply(this,arguments)}function Un(){return(Un=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:sendOobCode",Jt(v,p))})).apply(this,arguments)}function Wf(v,p){return br.apply(this,arguments)}function br(){return(br=(0,d.Z)(function*(v,p){return ji(v,p)})).apply(this,arguments)}function ii(v,p){return fl.apply(this,arguments)}function fl(){return(fl=(0,d.Z)(function*(v,p){return ji(v,p)})).apply(this,arguments)}function pl(v,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,d.Z)(function*(v,p){return ji(v,p)})).apply(this,arguments)}function $i(v,p){return ma.apply(this,arguments)}function ma(){return(ma=(0,d.Z)(function*(v,p){return ji(v,p)})).apply(this,arguments)}function Jl(){return(Jl=(0,d.Z)(function*(v,p){return ei(v,"POST","/v1/accounts:signInWithEmailLink",Jt(v,p))})).apply(this,arguments)}function Vd(){return(Vd=(0,d.Z)(function*(v,p){return ei(v,"POST","/v1/accounts:signInWithEmailLink",Jt(v,p))})).apply(this,arguments)}class eu extends mi{constructor(p,_,w,x=null){super("password",w),this._email=p,this._password=_,this._tenantId=x}static _fromEmailAndPassword(p,_){return new eu(p,_,"password")}static _fromEmailAndCode(p,_,w=null){return new eu(p,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function Js(v,p){return hl.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function cE(v,p){return Jl.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:ke(p,"internal-error")}})()}_linkToIdToken(p,_){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return Ld(p,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Kf(v,p){return Vd.apply(this,arguments)}(p,{idToken:_,email:w._email,oobCode:w._password});default:ke(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ao(v,p){return gi.apply(this,arguments)}function gi(){return(gi=(0,d.Z)(function*(v,p){return ei(v,"POST","/v1/accounts:signInWithIdp",Jt(v,p))})).apply(this,arguments)}class Cs extends mi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Cs(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):ke("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:x}=_,O=(0,le._T)(_,["providerId","signInMethod"]);if(!w||!x)return null;const X=new Cs(w,x);return X.idToken=O.idToken||void 0,X.accessToken=O.accessToken||void 0,X.secret=O.secret,X.nonce=O.nonce,X.pendingToken=O.pendingToken||null,X}_getIdTokenResponse(p){return Ao(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,Ao(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Ao(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,L.xO)(_)}return p}}function mg(v,p){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:sendVerificationCode",Jt(v,p))})).apply(this,arguments)}function to(){return(to=(0,d.Z)(function*(v,p){return ei(v,"POST","/v1/accounts:signInWithPhoneNumber",Jt(v,p))})).apply(this,arguments)}function Bd(){return(Bd=(0,d.Z)(function*(v,p){const _=yield ei(v,"POST","/v1/accounts:signInWithPhoneNumber",Jt(v,p));if(_.temporaryProof)throw Ui(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const _g={USER_NOT_FOUND:"user-not-found"};function tu(){return(tu=(0,d.Z)(function*(v,p){return ei(v,"POST","/v1/accounts:signInWithPhoneNumber",Jt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),_g)})).apply(this,arguments)}class Is extends mi{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Is({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Is({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function gc(v,p){return to.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function gg(v,p){return Bd.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function yg(v,p){return tu.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:w,verificationCode:x}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:w,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:w,phoneNumber:x,temporaryProof:O}=p;return w||_||x||O?new Is({verificationId:_,verificationCode:w,phoneNumber:x,temporaryProof:O}):null}}class nu{constructor(p){var _,w,x,O,X,ce;const Be=(0,L.zd)((0,L.pd)(p)),st=null!==(_=Be.apiKey)&&void 0!==_?_:null,Et=null!==(w=Be.oobCode)&&void 0!==w?w:null,_t=function Xy(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Be.mode)&&void 0!==x?x:null);q(st&&Et&&_t,"argument-error"),this.apiKey=st,this.operation=_t,this.code=Et,this.continueUrl=null!==(O=Be.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(X=Be.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(ce=Be.tenantId)&&void 0!==ce?ce:null}static parseLink(p){const _=function Hd(v){const p=(0,L.zd)((0,L.pd)(v)).link,_=p?(0,L.zd)((0,L.pd)(p)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||_||p||v}(p);try{return new nu(_)}catch{return null}}}let _c=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,w){return eu._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const x=nu.parseLink(w);return q(x,"argument-error"),eu._fromEmailAndCode(_,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class _i{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class ro extends _i{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ga extends ro{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return q("providerId"in _&&"signInMethod"in _,"argument-error"),Cs._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return q(p.idToken||p.accessToken,"argument-error"),Cs._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ga.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ga.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:x,pendingToken:O,nonce:X,providerId:ce}=p;if(!w&&!x&&!_&&!O||!ce)return null;try{return new ga(ce)._credential({idToken:_,accessToken:w,nonce:X,pendingToken:O})}catch{return null}}}let yc=(()=>{class v extends ro{constructor(){super("facebook.com")}static credential(_){return Cs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),ml=(()=>{class v extends ro{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return Cs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:x}=_;if(!w&&!x)return null;try{return v.credential(w,x)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),gl=(()=>{class v extends ro{constructor(){super("github.com")}static credential(_){return Cs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class _a extends mi{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Ao(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,Ao(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Ao(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:x,pendingToken:O}=_;return w&&x&&O&&w===x?new _a(w,O):null}static _create(p,_){return new _a(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cn extends _i{constructor(p){q(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Cn.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Cn.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=_a.fromJSON(p);return q(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:w}=p;if(!_||!w)return null;try{return _a._create(w,_)}catch{return null}}}let ru=(()=>{class v extends ro{constructor(){super("twitter.com")}static credential(_,w){return Cs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:x}=_;if(!w||!x)return null;try{return v.credential(w,x)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function iu(v,p){return _l.apply(this,arguments)}function _l(){return(_l=(0,d.Z)(function*(v,p){return ei(v,"POST","/v1/accounts:signUp",Jt(v,p))})).apply(this,arguments)}class si{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,w,x=!1){return(0,d.Z)(function*(){const O=yield ft._fromIdTokenResponse(p,w,x),X=jd(w);return new si({user:O,providerId:X,_tokenResponse:w,operationType:_})})()}static _forOperation(p,_,w){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const x=jd(w);return new si({user:p,providerId:x,_tokenResponse:w,operationType:_})})()}}function jd(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function $d(){return($d=(0,d.Z)(function*(v){var p;const _=Sn(v);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new si({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield iu(_,{returnSecureToken:!0}),x=yield si._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Gd extends L.ZR{constructor(p,_,w,x){var O;super(_.code,_.message),this.operationType=w,this.user=x,Object.setPrototypeOf(this,Gd.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,_,w,x){return new Gd(p,_,w,x)}}function yl(v,p,_,w){return("reauthenticate"===p?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Gd._fromErrorAndOperation(v,O,p,w):O})}function Jn(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function xo(){return(xo=(0,d.Z)(function*(v,p){const _=(0,L.m9)(v);yield ko(!0,_,p);const{providerUserInfo:w}=yield jn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),x=Jn(w||[]);return _.providerData=_.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function io(v,p){return wr.apply(this,arguments)}function wr(){return(wr=(0,d.Z)(function*(v,p,_=!1){const w=yield Hr(v,p._linkToIdToken(v.auth,yield v.getIdToken()),_);return si._forOperation(v,"link",w)})).apply(this,arguments)}function ko(v,p,_){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,d.Z)(function*(v,p,_){yield Bi(p);const x=!1===v?"provider-already-linked":"no-such-provider";q(Jn(p.providerData).has(_)===v,p.auth,x)})).apply(this,arguments)}function ya(v,p){return yi.apply(this,arguments)}function yi(){return(yi=(0,d.Z)(function*(v,p,_=!1){var w;const{auth:x}=v,O="reauthenticate";try{const X=yield Hr(v,yl(x,O,p,v),_);q(X.idToken,x,"internal-error");const ce=qe(X.idToken);q(ce,x,"internal-error");const{sub:Be}=ce;return q(v.uid===Be,x,"user-mismatch"),si._forOperation(v,O,X)}catch(X){throw"auth/user-not-found"===(null===(w=X)||void 0===w?void 0:w.code)&&ke(x,"user-mismatch"),X}})).apply(this,arguments)}function so(v,p){return vl.apply(this,arguments)}function vl(){return(vl=(0,d.Z)(function*(v,p,_=!1){const w="signIn",x=yield yl(v,w,p),O=yield si._fromIdTokenResponse(v,w,x);return _||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function ot(v,p){return ou.apply(this,arguments)}function ou(){return(ou=(0,d.Z)(function*(v,p){return so(Sn(v),p)})).apply(this,arguments)}function vc(v,p){return bc.apply(this,arguments)}function bc(){return(bc=(0,d.Z)(function*(v,p){const _=(0,L.m9)(v);return yield ko(!1,_,p.providerId),io(_,p)})).apply(this,arguments)}function au(v,p){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,d.Z)(function*(v,p){return ya((0,L.m9)(v),p)})).apply(this,arguments)}function No(v,p){return va.apply(this,arguments)}function va(){return(va=(0,d.Z)(function*(v,p){return ei(v,"POST","/v1/accounts:signInWithCustomToken",Jt(v,p))})).apply(this,arguments)}function Se(){return(Se=(0,d.Z)(function*(v,p){const _=Sn(v),w=yield No(_,{token:p,returnSecureToken:!0}),x=yield si._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Vt{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?ba._fromServerResponse(p,_):ke(p,"internal-error")}}class ba extends Vt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new ba(_)}}function Oo(v,p,_){var w;q((null===(w=_.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),q(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(q(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(q(_.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function wa(){return(wa=(0,d.Z)(function*(v,p,_){const w=(0,L.m9)(v),x={requestType:"PASSWORD_RESET",email:p};_&&Oo(w,x,_),yield ii(w,x)})).apply(this,arguments)}function vi(){return(vi=(0,d.Z)(function*(v,p,_){yield Tr((0,L.m9)(v),{oobCode:p,newPassword:_})})).apply(this,arguments)}function Ea(){return(Ea=(0,d.Z)(function*(v,p){yield dl((0,L.m9)(v),{oobCode:p})})).apply(this,arguments)}function Ca(v,p){return uu.apply(this,arguments)}function uu(){return(uu=(0,d.Z)(function*(v,p){const _=(0,L.m9)(v),w=yield Tr(_,{oobCode:p}),x=w.requestType;switch(q(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(w.mfaInfo,_,"internal-error");default:q(w.email,_,"internal-error")}let O=null;return w.mfaInfo&&(O=Vt._fromServerResponse(Sn(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function Ts(){return(Ts=(0,d.Z)(function*(v,p){const{data:_}=yield Ca((0,L.m9)(v),p);return _.email})).apply(this,arguments)}function Gi(){return(Gi=(0,d.Z)(function*(v,p,_){const w=Sn(v),x=yield iu(w,{returnSecureToken:!0,email:p,password:_}),O=yield si._fromIdTokenResponse(w,"signIn",x);return yield w._updateCurrentUser(O.user),O})).apply(this,arguments)}function zi(){return(zi=(0,d.Z)(function*(v,p,_){const w=(0,L.m9)(v),x={requestType:"EMAIL_SIGNIN",email:p};q(_.handleCodeInApp,w,"argument-error"),_&&Oo(w,x,_),yield pl(w,x)})).apply(this,arguments)}function Ia(){return(Ia=(0,d.Z)(function*(v,p,_){const w=(0,L.m9)(v),x=_c.credentialWithLink(p,_||Fe());return q(x._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),ot(w,x)})).apply(this,arguments)}function Qf(v,p){return Da.apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:createAuthUri",Jt(v,p))})).apply(this,arguments)}function cu(){return(cu=(0,d.Z)(function*(v,p){const w={identifier:p,continueUri:vt()?Fe():"http://localhost"},{signinMethods:x}=yield Qf((0,L.m9)(v),w);return x||[]})).apply(this,arguments)}function Ec(){return(Ec=(0,d.Z)(function*(v,p){const _=(0,L.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Oo(_.auth,x,p);const{email:O}=yield Wf(_.auth,x);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function El(){return(El=(0,d.Z)(function*(v,p,_){const w=(0,L.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};_&&Oo(w.auth,O,_);const{email:X}=yield $i(w.auth,O);X!==v.email&&(yield v.reload())})).apply(this,arguments)}function Cc(v,p){return du.apply(this,arguments)}function du(){return(du=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function fu(){return(fu=(0,d.Z)(function*(v,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const w=(0,L.m9)(v),O={idToken:yield w.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},X=yield Hr(w,Cc(w.auth,O));w.displayName=X.displayName||null,w.photoURL=X.photoUrl||null;const ce=w.providerData.find(({providerId:Be})=>"password"===Be);ce&&(ce.displayName=w.displayName,ce.photoURL=w.photoURL),yield w._updateTokensIfNecessary(X)})).apply(this,arguments)}function mu(v,p,_){return er.apply(this,arguments)}function er(){return(er=(0,d.Z)(function*(v,p,_){const{auth:w}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(O.email=p),_&&(O.password=_);const X=yield Hr(v,Ld(w,O));yield v._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class dn{constructor(p,_,w={}){this.isNewUser=p,this.providerId=_,this.profile=w}}class Wd extends dn{constructor(p,_,w,x){super(p,_,w),this.username=x}}class Kd extends dn{constructor(p,_){super(p,"facebook.com",_)}}class Dc extends Wd{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Xf extends dn{constructor(p,_){super(p,"google.com",_)}}class gu extends Wd{constructor(p,_,w){super(p,"twitter.com",_,w)}}function Jf(v){const{user:p,_tokenResponse:_}=v;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Ss(v){var p,_;if(!v)return null;const{providerId:w}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const X=null===(_=null===(p=qe(v.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(X)return new dn(O,"anonymous"!==X&&"custom"!==X?X:null)}if(!w)return null;switch(w){case"facebook.com":return new Kd(O,x);case"github.com":return new Dc(O,x);case"google.com":return new Xf(O,x);case"twitter.com":return new gu(O,x,v.screenName||null);case"custom":case"anonymous":return new dn(O,null);default:return new dn(O,w,x)}}(_)}class Ma{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new Ma("enroll",p)}static _fromMfaPendingCredential(p){return new Ma("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,w;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Ma._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(w=p.multiFactorSession)&&void 0!==w&&w.idToken)return Ma._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Uo{constructor(p,_,w){this.session=p,this.hints=_,this.signInResolver=w}static _fromError(p,_){const w=Sn(p),x=_.customData._serverResponse,O=(x.mfaInfo||[]).map(ce=>Vt._fromServerResponse(w,ce));q(x.mfaPendingCredential,w,"internal-error");const X=Ma._fromMfaPendingCredential(x.mfaPendingCredential);return new Uo(X,O,function(){var ce=(0,d.Z)(function*(Be){const st=yield Be._process(w,X);delete x.mfaInfo,delete x.mfaPendingCredential;const Et=Object.assign(Object.assign({},x),{idToken:st.idToken,refreshToken:st.refreshToken});switch(_.operationType){case"signIn":const _t=yield si._fromIdTokenResponse(w,_.operationType,Et);return yield w._updateCurrentUser(_t.user),_t;case"reauthenticate":return q(_.user,w,"internal-error"),si._forOperation(_.user,_.operationType,Et);default:ke(w,"internal-error")}});return function(Be){return ce.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,d.Z)(function*(){return _.signInResolver(p)})()}}function Qd(v,p){return zt(v,"POST","/v2/accounts/mfaEnrollment:start",Jt(v,p))}class tp{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>Vt._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new tp(p)}getSession(){var p=this;return(0,d.Z)(function*(){return Ma._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var w=this;return(0,d.Z)(function*(){const x=p,O=yield w.getSession(),X=yield Hr(w.user,x._process(w.user.auth,O,_));return yield w.user._updateTokensIfNecessary(X),w.user.reload()})()}unenroll(p){var _=this;return(0,d.Z)(function*(){var w;const x="string"==typeof p?p:p.uid,O=yield _.user.getIdToken(),X=yield Hr(_.user,function bg(v,p){return zt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(v,p))}(_.user.auth,{idToken:O,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ce})=>ce!==x),yield _.user._updateTokensIfNecessary(X);try{yield _.user.reload()}catch(ce){if("auth/user-token-expired"!==(null===(w=ce)||void 0===w?void 0:w.code))throw ce}})()}}const Bo=new WeakMap,Ho="__sak";class vu{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Ho,"1"),this.storage.removeItem(Ho),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const oo=(()=>{class v extends vu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rp(){const v=(0,L.z$)();return Qn(v)||On(v)}()&&function cl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Tn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const x=this.storage.getItem(w),O=this.localCache[w];x!==O&&_(w,O,x)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((ce,Be,st)=>{this.notifyListeners(ce,st)});const x=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(x);if(_.newValue!==ce)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!w)return}const O=()=>{const ce=this.storage.getItem(x);!w&&this.localCache[x]===ce||this.notifyListeners(x,ce)},X=this.storage.getItem(x);!function Xs(){return(0,L.w1)()&&10===document.documentMode}()||X===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,w){this.localCache[_]=w;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var x=()=>super._set,O=this;return(0,d.Z)(function*(){yield x().call(O,_,w),O.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,x=this;return(0,d.Z)(function*(){const O=yield w().call(x,_);return x.localCache[_]=JSON.stringify(O),O})()}_remove(_){var w=()=>super._remove,x=this;return(0,d.Z)(function*(){yield w().call(x,_),delete x.localCache[_]})()}}return v.type="LOCAL",v})(),Wi=(()=>{class v extends vu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return v.type="SESSION",v})();let sp=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(O=>O.isListeningto(_));if(w)return w;const x=new v(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,d.Z)(function*(){const x=_,{eventId:O,eventType:X,data:ce}=x.data,Be=w.handlersMap[X];if(!Be?.size)return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:X});const st=Array.from(Be).map(function(){var _t=(0,d.Z)(function*(Sr){return Sr(x.origin,ce)});return function(Sr){return _t.apply(this,arguments)}}()),Et=yield function Xd(v){return Promise.all(v.map(function(){var p=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return p.apply(this,arguments)}}()))}(st);x.ports[0].postMessage({status:"done",eventId:O,eventType:X,response:Et})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function tn(v="",p=10){let _="";for(let w=0;w<p;w++)_+=Math.floor(10*Math.random());return v+_}class As{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,w=50){var x=this;return(0,d.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let X,ce;return new Promise((Be,st)=>{const Et=tn("",20);O.port1.start();const _t=setTimeout(()=>{st(new Error("unsupported_event"))},w);ce={messageChannel:O,onMessage(Sr){const pr=Sr;if(pr.data.eventId===Et)switch(pr.data.status){case"ack":clearTimeout(_t),X=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),Be(pr.data.response);break;default:clearTimeout(_t),clearTimeout(X),st(new Error("invalid_response"))}}},x.handlers.add(ce),O.port1.addEventListener("message",ce.onMessage),x.target.postMessage({eventType:p,eventId:Et,data:_},[O.port2])}).finally(()=>{ce&&x.removeMessageHandler(ce)})})()}}function He(){return window}function nr(){return typeof He().WorkerGlobalScope<"u"&&"function"==typeof He().importScripts}function Il(){return(Il=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Cu="firebaseLocalStorageDb",jo="firebaseLocalStorage",ao="fbase_key";class at{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Iu(v,p){return v.transaction([jo],p?"readwrite":"readonly").objectStore(jo)}function Ms(){const v=indexedDB.open(Cu,1);return new Promise((p,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(jo,{keyPath:ao})}catch(x){_(x)}}),v.addEventListener("success",(0,d.Z)(function*(){const w=v.result;w.objectStoreNames.contains(jo)?p(w):(w.close(),yield function xa(){const v=indexedDB.deleteDatabase(Cu);return new at(v).toPromise()}(),p(yield Ms()))}))})}function Dl(v,p,_){return An.apply(this,arguments)}function An(){return(An=(0,d.Z)(function*(v,p,_){const w=Iu(v,!0).put({[ao]:p,value:_});return new at(w).toPromise()})).apply(this,arguments)}function bi(){return(bi=(0,d.Z)(function*(v,p){const _=Iu(v,!1).get(p),w=yield new at(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Ac(v,p){const _=Iu(v,!0).delete(p);return new at(_).toPromise()}const Go=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield Ms()),_.db})()}_withRetries(_){var w=this;return(0,d.Z)(function*(){let x=0;for(;;)try{const O=yield w._openDb();return yield _(O)}catch(O){if(x++>3)throw O;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return nr()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=sp._getInstance(function Eu(){return nr()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(x,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(x,O){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var w,x;if(_.activeServiceWorker=yield function dr(){return Il.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new As(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(w=O[0])||void 0===w?void 0:w.fulfilled)&&(null===(x=O[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function wu(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ms();return yield Dl(_,Ho,"1"),yield Ac(_,Ho),!0}catch{}return!1})()}_withPendingWrite(_){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var x=this;return(0,d.Z)(function*(){return x._withPendingWrite((0,d.Z)(function*(){return yield x._withRetries(O=>Dl(O,_,w)),x.localCache[_]=w,x.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,d.Z)(function*(){const x=yield w._withRetries(O=>function Du(v,p){return bi.apply(this,arguments)}(O,_));return w.localCache[_]=x,x})()}_remove(_){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(x=>Ac(x,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const w=yield _._withRetries(X=>{const ce=Iu(X,!1).getAll();return new at(ce).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:X,value:ce}of w)O.add(X),JSON.stringify(_.localCache[X])!==JSON.stringify(ce)&&(_.notifyListeners(X,ce),x.push(X));for(const X of Object.keys(_.localCache))_.localCache[X]&&!O.has(X)&&(_.notifyListeners(X,null),x.push(X));return x})()}notifyListeners(_,w){this.localCache[_]=w;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function xs(v,p){return zt(v,"POST","/v2/accounts/mfaSignIn:start",Jt(v,p))}function Ei(){return(Ei=(0,d.Z)(function*(v){return(yield zt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function lo(v){return new Promise((p,_)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=p,w.onerror=x=>{const O=Ce("internal-error");O.customData=x,_(O)},w.type="text/javascript",w.charset="UTF-8",function ks(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(w)})}function Nr(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Yt=1e12;class op{constructor(p){this.auth=p,this.counter=Yt,this._widgets=new Map}render(p,_){const w=this.counter;return this._widgets.set(w,new Er(p,this.auth.name,_||{})),this.counter++,w}reset(p){var _;const w=p||Yt;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Yt))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,d.Z)(function*(){var w;return null===(w=_._widgets.get(p||Yt))||void 0===w||w.execute(),""})()}}class Er{constructor(p,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;q(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function zo(v){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const uo=Nr("rcb"),wg=new cn(3e4,6e4);class zr{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=He().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return q(function Ki(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(He().grecaptcha):new Promise((w,x)=>{const O=He().setTimeout(()=>{x(Ce(p,"network-request-failed"))},wg.get());He()[uo]=()=>{He().clearTimeout(O),delete He()[uo];const ce=He().grecaptcha;if(!ce)return void x(Ce(p,"internal-error"));const Be=ce.render;ce.render=(st,Et)=>{const _t=Be(st,Et);return this.counter++,_t},this.hostLanguage=_,w(ce)},lo(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:uo,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),x(Ce(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=He().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qr{load(p){return(0,d.Z)(function*(){return new op(p)})()}clearedOneInstance(){}}const Tl="recaptcha",zn={theme:"light",type:"image"};class xc{constructor(p,_=Object.assign({},zn),w){this.parameters=_,this.type=Tl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Sn(w),this.isInvisible="invisible"===this.parameters.size,q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;q(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qr:new zr,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(_)||new Promise(O=>{const X=ce=>{!ce||(p.tokenChangeListeners.delete(X),O(ce))};p.tokenChangeListeners.add(X),p.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof p)p(_);else if("string"==typeof p){const w=He()[p];"function"==typeof w&&w(_)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){q(vt()&&!nr(),p.auth,"internal-error"),yield function Sl(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function Gr(v){return Ei.apply(this,arguments)}(p.auth);q(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class kc{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Is._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Mn(){return(Mn=(0,d.Z)(function*(v,p,_){const w=Sn(v),x=yield Wo(w,p,(0,L.m9)(_));return new kc(x,O=>ot(w,O))})).apply(this,arguments)}function Su(){return(Su=(0,d.Z)(function*(v,p,_){const w=(0,L.m9)(v);yield ko(!1,w,"phone");const x=yield Wo(w.auth,p,(0,L.m9)(_));return new kc(x,O=>vc(w,O))})).apply(this,arguments)}function Or(){return(Or=(0,d.Z)(function*(v,p,_){const w=(0,L.m9)(v),x=yield Wo(w.auth,p,(0,L.m9)(_));return new kc(x,O=>au(w,O))})).apply(this,arguments)}function Wo(v,p,_){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,d.Z)(function*(v,p,_){var w;const x=yield _.verify();try{let O;if(q("string"==typeof x,v,"argument-error"),q(_.type===Tl,v,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const X=O.session;if("phoneNumber"in O)return q("enroll"===X.type,v,"internal-error"),(yield Qd(v,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{q("signin"===X.type,v,"internal-error");const ce=(null===(w=O.multiFactorHint)||void 0===w?void 0:w.uid)||O.multiFactorUid;return q(ce,v,"missing-multi-factor-info"),(yield xs(v,{mfaPendingCredential:X.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield mg(v,{phoneNumber:O.phoneNumber,recaptchaToken:x});return X}}finally{_._reset()}})).apply(this,arguments)}function Nc(){return(Nc=(0,d.Z)(function*(v,p){yield io((0,L.m9)(v),p)})).apply(this,arguments)}let Au=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Sn(_)}verifyPhoneNumber(_,w){return Wo(this.auth,_,(0,L.m9)(w))}static credential(_,w){return Is._fromVerification(_,w)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:x}=_;return w&&x?Is._fromTokenResponse(w,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ns(v,p){return p?se(p):(q(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Pr extends mi{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ao(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Ao(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Ao(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function Oc(v){return so(v.auth,new Pr(v),v.bypassAuthState)}function co(v){const{auth:p,user:_}=v;return q(_,p,"internal-error"),ya(_,new Pr(v),v.bypassAuthState)}function eh(v){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(v){const{auth:p,user:_}=v;return q(_,p,"internal-error"),io(_,new Pr(v),v.bypassAuthState)})).apply(this,arguments)}class Mu{constructor(p,_,w,x,O=!1){this.auth=p,this.resolver=w,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,d.Z)(function*(w,x){p.pendingPromise={resolve:w,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(w,x){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:x,postBody:O,tenantId:X,error:ce,type:Be}=p;if(ce)return void _.reject(ce);const st={auth:_.auth,requestUri:w,sessionId:x,tenantId:X||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Be)(st))}catch(Et){_.reject(Et)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Oc;case"linkViaPopup":case"linkViaRedirect":return eh;case"reauthViaPopup":case"reauthViaRedirect":return co;default:ke(this.auth,"internal-error")}}resolve(p){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Pc=new cn(2e3,1e4);function Al(){return(Al=(0,d.Z)(function*(v,p,_){const w=Sn(v);je(v,p,_i);const x=Ns(w,_);return new Ko(w,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function th(){return(th=(0,d.Z)(function*(v,p,_){const w=(0,L.m9)(v);je(w.auth,p,_i);const x=Ns(w.auth,_);return new Ko(w.auth,"reauthViaPopup",p,x,w).executeNotNull()})).apply(this,arguments)}function Na(){return(Na=(0,d.Z)(function*(v,p,_){const w=(0,L.m9)(v);je(w.auth,p,_i);const x=Ns(w.auth,_);return new Ko(w.auth,"linkViaPopup",p,x,w).executeNotNull()})).apply(this,arguments)}let Ko=(()=>{class v extends Mu{constructor(_,w,x,O,X){super(_,w,O,X),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const w=yield _.execute();return q(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,d.Z)(function*(){J(1===_.filter.length,"Popup operations only handle one event");const w=tn();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Ce(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,x;this.pollId=null!==(x=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Pc.get())};_()}}return v.currentPopupAction=null,v})();const Os=new Map;class Oa extends Mu{constructor(p,_,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,d.Z)(function*(){let w=Os.get(_.auth._key());if(!w){try{const O=(yield function lp(v,p){return Ps.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;w=()=>Promise.resolve(O)}catch(x){w=()=>Promise.reject(x)}Os.set(_.auth._key(),w)}return _.bypassAuthState||Os.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(w,p);if("unknown"!==p.type){if(p.eventId){const x=yield w.auth._redirectUserForId(p.eventId);if(x)return w.user=x,_().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Ps(){return(Ps=(0,d.Z)(function*(v,p){const _=qn(p),w=xu(v);if(!(yield w._isAvailable()))return!1;const x="true"===(yield w._get(_));return yield w._remove(_),x})).apply(this,arguments)}function Lc(v,p){return rr.apply(this,arguments)}function rr(){return(rr=(0,d.Z)(function*(v,p){return xu(v)._set(qn(p),"true")})).apply(this,arguments)}function Fa(v,p){Os.set(v._key(),p)}function xu(v){return se(v._redirectPersistence)}function qn(v){return vr("pendingRedirect",v.config.apiKey,v.name)}function D(){return(D=(0,d.Z)(function*(v,p,_){const w=Sn(v);je(v,p,_i);const x=Ns(w,_);return yield Lc(x,w),x._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function H(){return(H=(0,d.Z)(function*(v,p,_){const w=(0,L.m9)(v);je(w.auth,p,_i);const x=Ns(w.auth,_);yield Lc(x,w.auth);const O=yield lt(w);return x._openRedirect(w.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function Ae(){return(Ae=(0,d.Z)(function*(v,p,_){const w=(0,L.m9)(v);je(w.auth,p,_i);const x=Ns(w.auth,_);yield ko(!1,w,p.providerId),yield Lc(x,w.auth);const O=yield lt(w);return x._openRedirect(w.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function ht(){return(ht=(0,d.Z)(function*(v,p){return yield Sn(v)._initializationPromise,Dt(v,p,!1)})).apply(this,arguments)}function Dt(v,p){return At.apply(this,arguments)}function At(){return(At=(0,d.Z)(function*(v,p,_=!1){const w=Sn(v),x=Ns(w,p),X=yield new Oa(w,x,_).execute();return X&&!_&&(delete X.user._redirectEventId,yield w._persistUserIfCurrent(X.user),yield w._setRedirectUser(null,p)),X})).apply(this,arguments)}function lt(v){return mt.apply(this,arguments)}function mt(){return(mt=(0,d.Z)(function*(v){const p=tn(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Ml{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(_=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function La(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Di(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var w;if(p.error&&!Di(p)){const x=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(Ce(this.auth,x))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const w=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ii(p))}saveEventToCache(p){this.cachedEventUids.add(Ii(p)),this.lastProcessedEventTime=Date.now()}}function Ii(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Di({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function xl(v){return Va.apply(this,arguments)}function Va(){return(Va=(0,d.Z)(function*(v,p={}){return zt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Zi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fs=/^https?/;function ku(){return(ku=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield xl(v);for(const _ of p)try{if(Jy(_))return}catch{}ke(v,"unauthorized-domain")})).apply(this,arguments)}function Jy(v){const p=Fe(),{protocol:_,hostname:w}=new URL(p);if(v.startsWith("chrome-extension://")){const X=new URL(v);return""===X.hostname&&""===w?"chrome-extension:"===_&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&X.hostname===w}if(!fs.test(_))return!1;if(Zi.test(v))return w===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(w)}const up=new cn(3e4,6e4);function Ua(){const v=He().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let Vc=null;function Eg(v){return Vc=Vc||function cp(v){return new Promise((p,_)=>{var w,x,O;function X(){Ua(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Ua(),_(Ce(v,"network-request-failed"))},timeout:up.get()})}if(null!==(x=null===(w=He().gapi)||void 0===w?void 0:w.iframes)&&void 0!==x&&x.Iframe)p(gapi.iframes.getContext());else{if(null===(O=He().gapi)||void 0===O||!O.load){const ce=Nr("iframefcb");return He()[ce]=()=>{gapi.load?X():_(Ce(v,"network-request-failed"))},lo(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Be=>_(Be))}X()}}).catch(p=>{throw Vc=null,p})}(v),Vc}const dE=new cn(5e3,15e3),hp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ev=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ig(v){const p=v.config;q(p.authDomain,v,"auth-domain-config-required");const _=p.emulator?Hn(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:v.name,v:pe.SDK_VERSION},x=ev.get(v.config.apiHost);x&&(w.eid=x);const O=v._getFrameworks();return O.length&&(w.fw=O.join(",")),`${_}?${(0,L.xO)(w).slice(1)}`}function Uc(){return Uc=(0,d.Z)(function*(v){const p=yield Eg(v),_=He().gapi;return q(_,v,"internal-error"),p.open({where:document.body,url:Ig(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hp,dontclear:!0},w=>new Promise(function(){var x=(0,d.Z)(function*(O,X){yield w.restyle({setHideOnLeave:!1});const ce=Ce(v,"network-request-failed"),Be=He().setTimeout(()=>{X(ce)},dE.get());function st(){He().clearTimeout(Be),O(w)}w.ping(st).then(st,()=>{X(ce)})});return function(O,X){return x.apply(this,arguments)}}()))}),Uc.apply(this,arguments)}const kl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bc{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gp(v,p,_,w,x,O){q(v.config.authDomain,v,"auth-domain-config-required"),q(v.config.apiKey,v,"invalid-api-key");const X={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:w,v:pe.SDK_VERSION,eventId:x};if(p instanceof _i){p.setDefaultLanguage(v.languageCode),X.providerId=p.providerId||"",(0,L.xb)(p.getCustomParameters())||(X.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Be,st]of Object.entries(O||{}))X[Be]=st}if(p instanceof ro){const Be=p.getScopes().filter(st=>""!==st);Be.length>0&&(X.scopes=Be.join(","))}v.tenantId&&(X.tid=v.tenantId);const ce=X;for(const Be of Object.keys(ce))void 0===ce[Be]&&delete ce[Be];return`${function ih({config:v}){return v.emulator?Hn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(ce).slice(1)}`}const sh="webStorageSupport";class fo extends class Fs{constructor(p){this.factorId=p}_process(p,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,w);case"signin":return this._finalizeSignIn(p,_.credential);default:return Ie("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new fo(p)}_finalizeEnroll(p,_,w){return function vg(v,p){return zt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(v,p))}(p,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function hs(v,p){return zt(v,"POST","/v2/accounts/mfaSignIn:finalize",Jt(v,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let tv=(()=>{class v{constructor(){}static assertion(_){return fo._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var Ru="@firebase/auth";class nv{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(w=>{var x;p((null===(x=w)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ls(){return window}function ah(){return(ah=(0,d.Z)(function*(v,p,_){var w;const{BuildInfo:x}=Ls();J(p.sessionId,"AuthEvent did not contain a session ID");const O=yield $c(p.sessionId),X={};return On()?X.ibi=x.packageName:Ze()?X.apn=x.packageName:ke(v,"operation-not-supported-in-this-environment"),x.displayName&&(X.appDisplayName=x.displayName),X.sessionId=O,gp(v,_,p.type,void 0,null!==(w=p.eventId)&&void 0!==w?w:void 0,X)})).apply(this,arguments)}function Hc(){return(Hc=(0,d.Z)(function*(v){const{BuildInfo:p}=Ls(),_={};On()?_.iosBundleId=p.packageName:Ze()?_.androidPackageName=p.packageName:ke(v,"operation-not-supported-in-this-environment"),yield xl(v,_)})).apply(this,arguments)}function ps(){return(ps=(0,d.Z)(function*(v,p,_){const{cordova:w}=Ls();let x=()=>{};try{yield new Promise((O,X)=>{let ce=null;function Be(){var _t;O();const Sr=null===(_t=w.plugins.browsertab)||void 0===_t?void 0:_t.close;"function"==typeof Sr&&Sr(),"function"==typeof _?.close&&_.close()}function st(){ce||(ce=window.setTimeout(()=>{X(Ce(v,"redirect-cancelled-by-user"))},2e3))}function Et(){"visible"===document?.visibilityState&&st()}p.addPassiveListener(Be),document.addEventListener("resume",st,!1),Ze()&&document.addEventListener("visibilitychange",Et,!1),x=()=>{p.removePassiveListener(Be),document.removeEventListener("resume",st,!1),document.removeEventListener("visibilitychange",Et,!1),ce&&window.clearTimeout(ce)}})}finally{x()}})).apply(this,arguments)}function $c(v){return lh.apply(this,arguments)}function lh(){return(lh=(0,d.Z)(function*(v){const p=uh(v),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function uh(v){if(J(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),_=new Uint8Array(p);for(let w=0;w<v.length;w++)_[w]=v.charCodeAt(w);return _}!function rv(v){(0,pe._registerComponent)(new ae.wA("auth",(p,{options:_})=>{const w=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),{apiKey:O,authDomain:X}=w.options;return((ce,Be)=>{q(O&&!O.includes(":"),"invalid-api-key",{appName:ce.name}),q(!X?.includes(":"),"argument-error",{appName:ce.name});const st={apiKey:O,authDomain:X,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hi(v)},Et=new Ql(ce,Be,st);return function fe(v,p){const _=p?.persistence||[],w=(Array.isArray(_)?_:[_]).map(se);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(w,p?.popupRedirectResolver)}(Et,_),Et})(w,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,w)=>{p.getProvider("auth-internal").initialize()})),(0,pe._registerComponent)(new ae.wA("auth-internal",p=>{const _=Sn(p.getProvider("auth").getImmediate());return new nv(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,pe.registerVersion)(Ru,"0.20.5",function vp(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,pe.registerVersion)(Ru,"0.20.5","esm2017")}("Browser");class iv extends Ml{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,d.Z)(function*(){yield p.initPromise})()}}function ja(v){return $a.apply(this,arguments)}function $a(){return($a=(0,d.Z)(function*(v){const p=yield ch()._get(dh(v));return p&&(yield ch()._remove(dh(v))),p})).apply(this,arguments)}function pE(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const w=Math.floor(Math.random()*p.length);v.push(p.charAt(w))}return v.join("")}function ch(){return se(oo)}function dh(v){return vr("authEvent",v.config.apiKey,v.name)}function Cp(v){if(!v?.includes("?"))return{};const[p,..._]=v.split("?");return(0,L.zd)(_.join("?"))}function fh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}function Ga(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function xg(v=(0,L.z$)()){return!("file:"!==Ga()&&"ionic:"!==Ga()&&"capacitor:"!==Ga()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function cv(){try{const v=self.localStorage,p=tn();if(v)return v.setItem(p,"1"),v.removeItem(p),!function Nl(v=(0,L.z$)()){return function ph(){return(0,L.w1)()&&11===document?.documentMode}()||function uv(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch{return kg()&&(0,L.hl)()}return!1}function kg(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ol(){return(function Tp(){return"http:"===Ga()||"https:"===Ga()}()||(0,L.ru)()||xg())&&!function lv(){return(0,L.b$)()||(0,L.UG)()}()&&cv()&&!kg()}function mh(){return xg()&&typeof document<"u"}function Yo(){return(Yo=(0,d.Z)(function*(){return!!mh()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const Wr={LOCAL:"local",NONE:"none",SESSION:"session"},za=q,Rg="persistence";function Sp(v){return Ap.apply(this,arguments)}function Ap(){return(Ap=(0,d.Z)(function*(v){yield v._initializationPromise;const p=Mp(),_=vr(Rg,v.config.apiKey,v.name);p&&p.setItem(_,v._getPersistence())})).apply(this,arguments)}function Mp(){var v;try{return(null===(v=function Ou(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const _h=q;class Vs{constructor(){this.browserResolver=se(class _p{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wi,this._completeRedirectFn=Dt,this._overrideRedirectResult=Fa}_openPopup(p,_,w,x){var O=this;return(0,d.Z)(function*(){var X;J(null===(X=O.eventManagers[p._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const ce=gp(p,_,w,Fe(),x);return function mp(v,p,_,w=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),X=Math.max((window.screen.availWidth-w)/2,0).toString();let ce="";const Be=Object.assign(Object.assign({},kl),{width:w.toString(),height:x.toString(),top:O,left:X}),st=(0,L.z$)().toLowerCase();_&&(ce=Dr(st)?"_blank":_),Dn(st)&&(p=p||"http://localhost",Be.scrollbars="yes");const Et=Object.entries(Be).reduce((Sr,[pr,Lu])=>`${Sr}${pr}=${Lu},`,"");if(function Gn(v=(0,L.z$)()){var p;return On(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(st)&&"_self"!==ce)return function Dg(v,p){const _=document.createElement("a");_.href=v,_.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(p||"",ce),new Bc(null);const _t=window.open(p||"",ce,Et);q(_t,v,"popup-blocked");try{_t.focus()}catch{}return new Bc(_t)}(p,ce,tn())})()}_openRedirect(p,_,w,x){var O=this;return(0,d.Z)(function*(){return yield O._originValidation(p),function tr(v){He().location.href=v}(gp(p,_,w,Fe(),x)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:x,promise:O}=this.eventManagers[_];return x?Promise.resolve(x):(J(O,"If manager is not set, promise should be"),O)}const w=this.initAndGetManager(p);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(p){var _=this;return(0,d.Z)(function*(){const w=yield function rh(v){return Uc.apply(this,arguments)}(p),x=new Ml(p);return w.register("authEvent",O=>(q(O?.authEvent,p,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:x},_.iframes[p._key()]=w,x})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(sh,{type:sh},x=>{var O;const X=null===(O=x?.[0])||void 0===O?void 0:O[sh];void 0!==X&&_(!!X),ke(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function nh(v){return ku.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Tn()||Qn()||On()}}),this.cordovaResolver=se(class Ip{constructor(){this._redirectPersistence=Wi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Dt,this._overrideRedirectResult=Fa}_initialize(p){var _=this;return(0,d.Z)(function*(){const w=p._key();let x=_.eventManagers.get(w);return x||(x=new iv(p),_.eventManagers.set(w,x),_.attachCallbackListeners(p,x)),x})()}_openPopup(p){ke(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,w,x){var O=this;return(0,d.Z)(function*(){!function Nu(v){var p,_,w,x,O,X,ce,Be,st,Et;const _t=Ls();q("function"==typeof(null===(p=_t?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof(null===(_=_t?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q("function"==typeof(null===(O=null===(x=null===(w=_t?.cordova)||void 0===w?void 0:w.plugins)||void 0===x?void 0:x.browsertab)||void 0===O?void 0:O.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(Be=null===(ce=null===(X=_t?.cordova)||void 0===X?void 0:X.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Be?void 0:Be.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(Et=null===(st=_t?.cordova)||void 0===st?void 0:st.InAppBrowser)||void 0===Et?void 0:Et.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const X=yield O._initialize(p);yield X.initialized(),X.resetRedirect(),function Pa(){Os.clear()}(),yield O._originValidation(p);const ce=function sv(v,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:pE(),postBody:null,tenantId:v.tenantId,error:Ce(v,"no-auth-event")}}(p,w,x);yield function wp(v,p){return ch()._set(dh(v),p)}(p,ce);const Be=yield function Sg(v,p,_){return ah.apply(this,arguments)}(p,ce,_),st=yield function jc(v){const{cordova:p}=Ls();return new Promise(_=>{p.plugins.browsertab.isAvailable(w=>{let x=null;w?p.plugins.browsertab.openUrl(v):x=p.InAppBrowser.open(v,function da(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(x)})})}(Be);return function Ag(v,p,_){return ps.apply(this,arguments)}(p,X,st)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function hE(v){return Hc.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:w,handleOpenURL:x,BuildInfo:O}=Ls(),X=setTimeout((0,d.Z)(function*(){yield ja(p),_.onEvent(fh())}),500),ce=function(){var Et=(0,d.Z)(function*(_t){clearTimeout(X);const Sr=yield ja(p);let pr=null;Sr&&_t?.url&&(pr=function Ep(v,p){var _,w;const x=function mE(v){const p=Cp(v),_=p.link?decodeURIComponent(p.link):void 0,w=Cp(_).link,x=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Cp(x).link||x||w||_||v}(p);if(x.includes("/__/auth/callback")){const O=Cp(x),X=O.firebaseError?function Mg(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,ce=null===(w=null===(_=X?.code)||void 0===_?void 0:_.split("auth/"))||void 0===w?void 0:w[1],Be=ce?Ce(ce):null;return Be?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:x,postBody:null}}return null}(Sr,_t.url)),_.onEvent(pr||fh())});return function(Sr){return Et.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ce);const Be=x,st=`${O.packageName.toLowerCase()}://`;Ls().handleOpenURL=function(){var Et=(0,d.Z)(function*(_t){if(_t.toLowerCase().startsWith(st)&&ce({url:_t}),"function"==typeof Be)try{Be(_t)}catch(Sr){console.error(Sr)}});return function(_t){return Et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Wi,this._completeRedirectFn=Dt,this._overrideRedirectResult=Fa}_initialize(p){var _=this;return(0,d.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,w,x){var O=this;return(0,d.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(p,_,w,x)})()}_openRedirect(p,_,w,x){var O=this;return(0,d.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(p,_,w,x)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return mh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _h(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,d.Z)(function*(){if(p.underlyingResolver)return;const _=yield function Gc(){return Yo.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function zc(v){return v.unwrap()}function Pu(v){return Fg(v)}function Fg(v){const{_tokenResponse:p}=v instanceof L.ZR?v.customData:v;if(!p)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Au.credentialFromResult(v);const _=p.providerId;if(!_||"password"===_)return null;let w;switch(_){case"google.com":w=ml;break;case"facebook.com":w=yc;break;case"github.com":w=gl;break;case"twitter.com":w=ru;break;default:const{oauthIdToken:x,oauthAccessToken:O,oauthTokenSecret:X,pendingToken:ce,nonce:Be}=p;return O||X||x||ce?ce?_.startsWith("saml.")?_a._create(_,ce):Cs._fromParams({providerId:_,signInMethod:_,pendingToken:ce,idToken:x,accessToken:O}):new ga(_).credential({idToken:x,accessToken:O,rawNonce:Be}):null}return v instanceof L.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function wn(v,p){return p.catch(_=>{throw _ instanceof L.ZR&&function Pg(v,p){var _,w;const x=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=p)||void 0===w?void 0:w.code))p.resolver=new xp(v,function cr(v,p){var _;const w=(0,L.m9)(v),x=p;return q(p.customData.operationType,w,"argument-error"),q(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),Uo._fromError(w,x)}(v,p));else if(x){const O=Fg(p),X=p;O&&(X.credential=O,X.tenantId=x.tenantId||void 0,X.email=x.email||void 0,X.phoneNumber=x.phoneNumber||void 0)}}(v,_),_}).then(_=>{const x=_.user;return{operationType:_.operationType,credential:Pu(_),additionalUserInfo:Jf(_),user:In.getOrCreate(x)}})}function qc(v,p){return yh.apply(this,arguments)}function yh(){return(yh=(0,d.Z)(function*(v,p){const _=yield p;return{verificationId:_.verificationId,confirm:w=>wn(v,_.confirm(w))}})).apply(this,arguments)}class xp{constructor(p,_){this.resolver=_,this.auth=function Og(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return wn(zc(this.auth),this.resolver.resolveSignIn(p))}}class In{constructor(p){this._delegate=p,this.multiFactor=function np(v){const p=(0,L.m9)(v);return Bo.has(p)||Bo.set(p,tp._fromUser(p)),Bo.get(p)}(p)}static getOrCreate(p){return In.USER_MAP.has(p)||In.USER_MAP.set(p,new In(p)),In.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,d.Z)(function*(){return wn(_.auth,vc(_._delegate,p))})()}linkWithPhoneNumber(p,_){var w=this;return(0,d.Z)(function*(){return qc(w.auth,function _n(v,p,_){return Su.apply(this,arguments)}(w._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,d.Z)(function*(){return wn(_.auth,function Lt(v,p,_){return Na.apply(this,arguments)}(_._delegate,p,Vs))})()}linkWithRedirect(p){var _=this;return(0,d.Z)(function*(){return yield Sp(Sn(_.auth)),function te(v,p,_){return function ue(v,p,_){return Ae.apply(this,arguments)}(v,p,_)}(_._delegate,p,Vs)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,d.Z)(function*(){return wn(_.auth,au(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return qc(this.auth,function qo(v,p,_){return Or.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return wn(this.auth,function ap(v,p,_){return th.apply(this,arguments)}(this._delegate,p,Vs))}reauthenticateWithRedirect(p){var _=this;return(0,d.Z)(function*(){return yield Sp(Sn(_.auth)),function S(v,p,_){return function R(v,p,_){return H.apply(this,arguments)}(v,p,_)}(_._delegate,p,Vs)})()}sendEmailVerification(p){return function wl(v,p){return Ec.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,d.Z)(function*(){return yield function su(v,p){return xo.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function pu(v,p){return mu((0,L.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function Ic(v,p){return mu((0,L.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Rc(v,p){return Nc.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function hu(v,p){return fu.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function Sa(v,p,_){return El.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}In.USER_MAP=new WeakMap;const Qo=q;let Wc=(()=>{class v{constructor(_,w){if(this.app=_,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=_.options;Qo(x,"invalid-api-key",{appName:_.name}),Qo(x,"invalid-api-key",{appName:_.name});const O=typeof window<"u"?Vs:void 0;this._delegate=w.initialize({options:{persistence:dv(x,_.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(xe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?In.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,w){!function So(v,p,_){const w=Sn(v);q(w._canInitEmulator,w,"emulator-config-failed"),q(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const x=!!_?.disableWarnings,O=Xn(p),{host:X,port:ce}=function fa(v){const p=Xn(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(w);if(x){const O=x[1];return{host:O,port:Es(w.substr(O.length+1))}}{const[O,X]=w.split(":");return{host:O,port:Es(X)}}}(p);w.config.emulator={url:`${O}//${X}${null===ce?"":`:${ce}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:X,port:ce,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function $r(){function v(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,w)}applyActionCode(_){return function bl(v,p){return Ea.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Ca(this._delegate,_)}confirmPasswordReset(_,w){return function Po(v,p,_){return vi.apply(this,arguments)}(this._delegate,_,w)}createUserWithEmailAndPassword(_,w){var x=this;return(0,d.Z)(function*(){return wn(x._delegate,function ur(v,p,_){return Gi.apply(this,arguments)}(x._delegate,_,w))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Ta(v,p){return cu.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function zd(v,p){return"EMAIL_SIGNIN"===nu.parseLink(p)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,d.Z)(function*(){Qo(Ol(),_._delegate,"operation-not-supported-in-this-environment");const w=yield function Ye(v,p){return ht.apply(this,arguments)}(_._delegate,Vs);return w?wn(_._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function av(v,p){Sn(v)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,w,x){const{next:O,error:X,complete:ce}=Kc(_,w,x);return this._delegate.onAuthStateChanged(O,X,ce)}onIdTokenChanged(_,w,x){const{next:O,error:X,complete:ce}=Kc(_,w,x);return this._delegate.onIdTokenChanged(O,X,ce)}sendSignInLinkToEmail(_,w){return function Fo(v,p,_){return zi.apply(this,arguments)}(this._delegate,_,w)}sendPasswordResetEmail(_,w){return function Pn(v,p,_){return wa.apply(this,arguments)}(this._delegate,_,w||void 0)}setPersistence(_){var w=this;return(0,d.Z)(function*(){let x;switch(function Ng(v,p){za(Object.values(Wr).includes(p),v,"invalid-persistence-type"),(0,L.b$)()?za(p!==Wr.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?za(p===Wr.NONE,v,"unsupported-persistence-type"):kg()?za(p===Wr.NONE||p===Wr.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):za(p===Wr.NONE||cv(),v,"unsupported-persistence-type")}(w._delegate,_),_){case Wr.SESSION:x=Wi;break;case Wr.LOCAL:x=(yield se(Go)._isAvailable())?Go:oo;break;case Wr.NONE:x=en;break;default:return ke("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return wn(this._delegate,function Bn(v){return $d.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return wn(this._delegate,ot(this._delegate,_))}signInWithCustomToken(_){return wn(this._delegate,function lu(v,p){return Se.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,w){return wn(this._delegate,function wc(v,p,_){return ot((0,L.m9)(v),_c.credential(p,_))}(this._delegate,_,w))}signInWithEmailLink(_,w){return wn(this._delegate,function qd(v,p,_){return Ia.apply(this,arguments)}(this._delegate,_,w))}signInWithPhoneNumber(_,w){return qc(this._delegate,function Jd(v,p,_){return Mn.apply(this,arguments)}(this._delegate,_,w))}signInWithPopup(_){var w=this;return(0,d.Z)(function*(){return Qo(Ol(),w._delegate,"operation-not-supported-in-this-environment"),wn(w._delegate,function Fc(v,p,_){return Al.apply(this,arguments)}(w._delegate,_,Vs))})()}signInWithRedirect(_){var w=this;return(0,d.Z)(function*(){return Qo(Ol(),w._delegate,"operation-not-supported-in-this-environment"),yield Sp(w._delegate),function hr(v,p,_){return function ho(v,p,_){return D.apply(this,arguments)}(v,p,_)}(w._delegate,_,Vs)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Yf(v,p){return Ts.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Wr,v})();function Kc(v,p,_){let w=v;"function"!=typeof v&&({next:w,error:p,complete:_}=v);const x=w;return{next:X=>x(X&&In.getOrCreate(X)),error:p,complete:_}}function dv(v,p){const _=function gh(v,p){const _=Mp();if(!_)return[];const w=vr(Rg,v,p);switch(_.getItem(w)){case Wr.NONE:return[en];case Wr.LOCAL:return[Go,Wi];case Wr.SESSION:return[Wi];default:return[]}}(v,p);if(typeof self<"u"&&!_.includes(Go)&&_.push(Go),typeof window<"u")for(const w of[oo,Wi])_.includes(w)||_.push(w);return _.includes(en)||_.push(en),_}class vh{constructor(){this.providerId="phone",this._delegate=new Au(zc(re.Z.auth()))}static credential(p,_){return Au.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}vh.PHONE_SIGN_IN_METHOD=Au.PHONE_SIGN_IN_METHOD,vh.PROVIDER_ID=Au.PROVIDER_ID;const bh=q;class Fu{constructor(p,_,w=re.Z.app()){var x;bh(null===(x=w.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new xc(p,_,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Lg(v){v.INTERNAL.registerComponent(new ae.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),w=p.getProvider("auth");return new Wc(_,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:_c,FacebookAuthProvider:yc,GithubAuthProvider:gl,GoogleAuthProvider:ml,OAuthProvider:ga,SAMLAuthProvider:Cn,PhoneAuthProvider:vh,PhoneMultiFactorGenerator:tv,RecaptchaVerifier:Fu,TwitterAuthProvider:ru,Auth:Wc,AuthCredential:mi,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.18")}(re.Z)},8306:(pt,Re,U)=>{U.d(Re,{y:()=>z});var d=U(930),re=U(727),L=U(8822),pe=U(4671);var ae=U(2416),me=U(576),ve=U(2806);let z=(()=>{class Me{constructor($e){$e&&(this._subscribe=$e)}lift($e){const ge=new Me;return ge.source=this,ge.operator=$e,ge}subscribe($e,ge,be){const Je=function Ge(Me){return Me&&Me instanceof d.Lv||function ne(Me){return Me&&(0,me.m)(Me.next)&&(0,me.m)(Me.error)&&(0,me.m)(Me.complete)}(Me)&&(0,re.Nn)(Me)}($e)?$e:new d.Hp($e,ge,be);return(0,ve.x)(()=>{const{operator:it,source:ke}=this;Je.add(it?it.call(Je,ke):ke?this._subscribe(Je):this._trySubscribe(Je))}),Je}_trySubscribe($e){try{return this._subscribe($e)}catch(ge){$e.error(ge)}}forEach($e,ge){return new(ge=G(ge))((be,Je)=>{const it=new d.Hp({next:ke=>{try{$e(ke)}catch(Ce){Je(Ce),it.unsubscribe()}},error:Je,complete:be});this.subscribe(it)})}_subscribe($e){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe($e)}[L.L](){return this}pipe(...$e){return function ye(Me){return 0===Me.length?pe.y:1===Me.length?Me[0]:function($e){return Me.reduce((ge,be)=>be(ge),$e)}}($e)(this)}toPromise($e){return new($e=G($e))((ge,be)=>{let Je;this.subscribe(it=>Je=it,it=>be(it),()=>ge(Je))})}}return Me.create=xe=>new Me(xe),Me})();function G(Me){var xe;return null!==(xe=Me??ae.v.Promise)&&void 0!==xe?xe:Promise}},7579:(pt,Re,U)=>{U.d(Re,{x:()=>ae});var d=U(8306),re=U(727);const pe=(0,U(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=U(8737),ye=U(2806);let ae=(()=>{class ve extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const ne=new me(this,this);return ne.operator=G,ne}_throwIfClosed(){if(this.closed)throw new pe}next(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(G)}})}error(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:ne}=this;for(;ne.length;)ne.shift().error(G)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:ne,isStopped:Ge,observers:Me}=this;return ne||Ge?re.Lc:(this.currentObservers=null,Me.push(G),new re.w0(()=>{this.currentObservers=null,(0,le.P)(Me,G)}))}_checkFinalizedStatuses(G){const{hasError:ne,thrownError:Ge,isStopped:Me}=this;ne?G.error(Ge):Me&&G.complete()}asObservable(){const G=new d.y;return G.source=this,G}}return ve.create=(z,G)=>new me(z,G),ve})();class me extends ae{constructor(z,G){super(),this.destination=z,this.source=G}next(z){var G,ne;null===(ne=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===ne||ne.call(G,z)}error(z){var G,ne;null===(ne=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===ne||ne.call(G,z)}complete(){var z,G;null===(G=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===G||G.call(z)}_subscribe(z){var G,ne;return null!==(ne=null===(G=this.source)||void 0===G?void 0:G.subscribe(z))&&void 0!==ne?ne:re.Lc}}},930:(pt,Re,U)=>{U.d(Re,{Hp:()=>$e,Lv:()=>ne});var d=U(576),re=U(727),L=U(2416),pe=U(7849),le=U(5032);const ye=ve("C",void 0,void 0);function ve(ke,Ce,Te){return{kind:ke,value:Ce,error:Te}}var z=U(3410),G=U(2806);class ne extends re.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,re.Nn)(Ce)&&Ce.add(this)):this.destination=it}static create(Ce,Te,je){return new $e(Ce,Te,je)}next(Ce){this.isStopped?Je(function me(ke){return ve("N",ke,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?Je(function ae(ke){return ve("E",void 0,ke)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?Je(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Me(ke,Ce){return Ge.call(ke,Ce)}class xe{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Ce)}catch(je){ge(je)}}error(Ce){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Ce)}catch(je){ge(je)}else ge(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(Te){ge(Te)}}}class $e extends ne{constructor(Ce,Te,je){let ze;if(super(),(0,d.m)(Ce)||!Ce)ze={next:Ce??void 0,error:Te??void 0,complete:je??void 0};else{let q;this&&L.v.useDeprecatedNextContext?(q=Object.create(Ce),q.unsubscribe=()=>this.unsubscribe(),ze={next:Ce.next&&Me(Ce.next,q),error:Ce.error&&Me(Ce.error,q),complete:Ce.complete&&Me(Ce.complete,q)}):ze=Ce}this.destination=new xe(ze)}}function ge(ke){L.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(ke):(0,pe.h)(ke)}function Je(ke,Ce){const{onStoppedNotification:Te}=L.v;Te&&z.z.setTimeout(()=>Te(ke,Ce))}const it={closed:!0,next:le.Z,error:function be(ke){throw ke},complete:le.Z}},727:(pt,Re,U)=>{U.d(Re,{Lc:()=>ye,w0:()=>le,Nn:()=>ae});var d=U(576);const L=(0,U(3888).d)(ve=>function(G){ve(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((ne,Ge)=>`${Ge+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var pe=U(8737);class le{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Me of G)Me.remove(this);else G.remove(this);const{initialTeardown:ne}=this;if((0,d.m)(ne))try{ne()}catch(Me){z=Me instanceof L?Me.errors:[Me]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Me of Ge)try{me(Me)}catch(xe){z=z??[],xe instanceof L?z=[...z,...xe.errors]:z.push(xe)}}if(z)throw new L(z)}}add(z){var G;if(z&&z!==this)if(this.closed)me(z);else{if(z instanceof le){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(z)}}_hasParent(z){const{_parentage:G}=this;return G===z||Array.isArray(G)&&G.includes(z)}_addParent(z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(z),G):G?[G,z]:z}_removeParent(z){const{_parentage:G}=this;G===z?this._parentage=null:Array.isArray(G)&&(0,pe.P)(G,z)}remove(z){const{_finalizers:G}=this;G&&(0,pe.P)(G,z),z instanceof le&&z._removeParent(this)}}le.EMPTY=(()=>{const ve=new le;return ve.closed=!0,ve})();const ye=le.EMPTY;function ae(ve){return ve instanceof le||ve&&"closed"in ve&&(0,d.m)(ve.remove)&&(0,d.m)(ve.add)&&(0,d.m)(ve.unsubscribe)}function me(ve){(0,d.m)(ve)?ve():ve.unsubscribe()}},2416:(pt,Re,U)=>{U.d(Re,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,Re,U)=>{U.d(Re,{E:()=>re});const re=new(U(8306).y)(le=>le.complete())},8996:(pt,Re,U)=>{U.d(Re,{D:()=>Ce});var d=U(8421),re=U(5363),L=U(9468),ye=U(8306),me=U(2202),ve=U(576),z=U(9672);function ne(Te,je){if(!Te)throw new Error("Iterable cannot be null");return new ye.y(ze=>{(0,z.f)(ze,je,()=>{const q=Te[Symbol.asyncIterator]();(0,z.f)(ze,je,()=>{q.next().then(Ie=>{Ie.done?ze.complete():ze.next(Ie.value)})},0,!0)})})}var Ge=U(3670),Me=U(8239),xe=U(1144),$e=U(6495),ge=U(2206),be=U(4532),Je=U(3260);function Ce(Te,je){return je?function ke(Te,je){if(null!=Te){if((0,Ge.c)(Te))return function pe(Te,je){return(0,d.Xf)(Te).pipe((0,L.R)(je),(0,re.Q)(je))}(Te,je);if((0,xe.z)(Te))return function ae(Te,je){return new ye.y(ze=>{let q=0;return je.schedule(function(){q===Te.length?ze.complete():(ze.next(Te[q++]),ze.closed||this.schedule())})})}(Te,je);if((0,Me.t)(Te))return function le(Te,je){return(0,d.Xf)(Te).pipe((0,L.R)(je),(0,re.Q)(je))}(Te,je);if((0,ge.D)(Te))return ne(Te,je);if((0,$e.T)(Te))return function G(Te,je){return new ye.y(ze=>{let q;return(0,z.f)(ze,je,()=>{q=Te[me.h](),(0,z.f)(ze,je,()=>{let Ie,J;try{({value:Ie,done:J}=q.next())}catch(oe){return void ze.error(oe)}J?ze.complete():ze.next(Ie)},0,!0)}),()=>(0,ve.m)(q?.return)&&q.return()})}(Te,je);if((0,Je.L)(Te))return function it(Te,je){return ne((0,Je.Q)(Te),je)}(Te,je)}throw(0,be.z)(Te)}(Te,je):(0,d.Xf)(Te)}},8421:(pt,Re,U)=>{U.d(Re,{Xf:()=>Ge});var d=U(655),re=U(1144),L=U(8239),pe=U(8306),le=U(3670),ye=U(2206),ae=U(4532),me=U(6495),ve=U(3260),z=U(576),G=U(7849),ne=U(8822);function Ge(ke){if(ke instanceof pe.y)return ke;if(null!=ke){if((0,le.c)(ke))return function Me(ke){return new pe.y(Ce=>{const Te=ke[ne.L]();if((0,z.m)(Te.subscribe))return Te.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,re.z)(ke))return function xe(ke){return new pe.y(Ce=>{for(let Te=0;Te<ke.length&&!Ce.closed;Te++)Ce.next(ke[Te]);Ce.complete()})}(ke);if((0,L.t)(ke))return function $e(ke){return new pe.y(Ce=>{ke.then(Te=>{Ce.closed||(Ce.next(Te),Ce.complete())},Te=>Ce.error(Te)).then(null,G.h)})}(ke);if((0,ye.D)(ke))return be(ke);if((0,me.T)(ke))return function ge(ke){return new pe.y(Ce=>{for(const Te of ke)if(Ce.next(Te),Ce.closed)return;Ce.complete()})}(ke);if((0,ve.L)(ke))return function Je(ke){return be((0,ve.Q)(ke))}(ke)}throw(0,ae.z)(ke)}function be(ke){return new pe.y(Ce=>{(function it(ke,Ce){var Te,je,ze,q;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Te=(0,d.KL)(ke);!(je=yield Te.next()).done;)if(Ce.next(je.value),Ce.closed)return}catch(Ie){ze={error:Ie}}finally{try{je&&!je.done&&(q=Te.return)&&(yield q.call(Te))}finally{if(ze)throw ze.error}}Ce.complete()})})(ke,Ce).catch(Te=>Ce.error(Te))})}},6451:(pt,Re,U)=>{U.d(Re,{T:()=>ye});var d=U(8189),re=U(8421),L=U(515),pe=U(7669),le=U(8996);function ye(...ae){const me=(0,pe.yG)(ae),ve=(0,pe._6)(ae,1/0),z=ae;return z.length?1===z.length?(0,re.Xf)(z[0]):(0,d.J)(ve)((0,le.D)(z,me)):L.E}},5403:(pt,Re,U)=>{U.d(Re,{x:()=>re});var d=U(930);function re(pe,le,ye,ae,me){return new L(pe,le,ye,ae,me)}class L extends d.Lv{constructor(le,ye,ae,me,ve,z){super(le),this.onFinalize=ve,this.shouldUnsubscribe=z,this._next=ye?function(G){try{ye(G)}catch(ne){le.error(ne)}}:super._next,this._error=me?function(G){try{me(G)}catch(ne){le.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch(G){le.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(pt,Re,U)=>{U.d(Re,{U:()=>L});var d=U(4482),re=U(5403);function L(pe,le){return(0,d.e)((ye,ae)=>{let me=0;ye.subscribe((0,re.x)(ae,ve=>{ae.next(pe.call(le,ve,me++))}))})}},8189:(pt,Re,U)=>{U.d(Re,{J:()=>L});var d=U(5577),re=U(4671);function L(pe=1/0){return(0,d.z)(re.y,pe)}},5577:(pt,Re,U)=>{U.d(Re,{z:()=>me});var d=U(4004),re=U(8421),L=U(4482),pe=U(9672),le=U(5403),ae=U(576);function me(ve,z,G=1/0){return(0,ae.m)(z)?me((ne,Ge)=>(0,d.U)((Me,xe)=>z(ne,Me,Ge,xe))((0,re.Xf)(ve(ne,Ge))),G):("number"==typeof z&&(G=z),(0,L.e)((ne,Ge)=>function ye(ve,z,G,ne,Ge,Me,xe,$e){const ge=[];let be=0,Je=0,it=!1;const ke=()=>{it&&!ge.length&&!be&&z.complete()},Ce=je=>be<ne?Te(je):ge.push(je),Te=je=>{Me&&z.next(je),be++;let ze=!1;(0,re.Xf)(G(je,Je++)).subscribe((0,le.x)(z,q=>{Ge?.(q),Me?Ce(q):z.next(q)},()=>{ze=!0},void 0,()=>{if(ze)try{for(be--;ge.length&&be<ne;){const q=ge.shift();xe?(0,pe.f)(z,xe,()=>Te(q)):Te(q)}ke()}catch(q){z.error(q)}}))};return ve.subscribe((0,le.x)(z,Ce,()=>{it=!0,ke()})),()=>{$e?.()}}(ne,Ge,ve,G)))}},5363:(pt,Re,U)=>{U.d(Re,{Q:()=>pe});var d=U(9672),re=U(4482),L=U(5403);function pe(le,ye=0){return(0,re.e)((ae,me)=>{ae.subscribe((0,L.x)(me,ve=>(0,d.f)(me,le,()=>me.next(ve),ye),()=>(0,d.f)(me,le,()=>me.complete(),ye),ve=>(0,d.f)(me,le,()=>me.error(ve),ye)))})}},3099:(pt,Re,U)=>{U.d(Re,{B:()=>le});var d=U(8421),re=U(7579),L=U(930),pe=U(4482);function le(ae={}){const{connector:me=(()=>new re.x),resetOnError:ve=!0,resetOnComplete:z=!0,resetOnRefCountZero:G=!0}=ae;return ne=>{let Ge,Me,xe,$e=0,ge=!1,be=!1;const Je=()=>{Me?.unsubscribe(),Me=void 0},it=()=>{Je(),Ge=xe=void 0,ge=be=!1},ke=()=>{const Ce=Ge;it(),Ce?.unsubscribe()};return(0,pe.e)((Ce,Te)=>{$e++,!be&&!ge&&Je();const je=xe=xe??me();Te.add(()=>{$e--,0===$e&&!be&&!ge&&(Me=ye(ke,G))}),je.subscribe(Te),!Ge&&$e>0&&(Ge=new L.Hp({next:ze=>je.next(ze),error:ze=>{be=!0,Je(),Me=ye(it,ve,ze),je.error(ze)},complete:()=>{ge=!0,Je(),Me=ye(it,z),je.complete()}}),(0,d.Xf)(Ce).subscribe(Ge))})(ne)}}function ye(ae,me,...ve){if(!0===me)return void ae();if(!1===me)return;const z=new L.Hp({next:()=>{z.unsubscribe(),ae()}});return me(...ve).subscribe(z)}},9468:(pt,Re,U)=>{U.d(Re,{R:()=>re});var d=U(4482);function re(L,pe=0){return(0,d.e)((le,ye)=>{ye.add(L.schedule(()=>le.subscribe(ye),pe))})}},8505:(pt,Re,U)=>{U.d(Re,{b:()=>le});var d=U(576),re=U(4482),L=U(5403),pe=U(4671);function le(ye,ae,me){const ve=(0,d.m)(ye)||ae||me?{next:ye,error:ae,complete:me}:ye;return ve?(0,re.e)((z,G)=>{var ne;null===(ne=ve.subscribe)||void 0===ne||ne.call(ve);let Ge=!0;z.subscribe((0,L.x)(G,Me=>{var xe;null===(xe=ve.next)||void 0===xe||xe.call(ve,Me),G.next(Me)},()=>{var Me;Ge=!1,null===(Me=ve.complete)||void 0===Me||Me.call(ve),G.complete()},Me=>{var xe;Ge=!1,null===(xe=ve.error)||void 0===xe||xe.call(ve,Me),G.error(Me)},()=>{var Me,xe;Ge&&(null===(Me=ve.unsubscribe)||void 0===Me||Me.call(ve)),null===(xe=ve.finalize)||void 0===xe||xe.call(ve)}))}):pe.y}},4408:(pt,Re,U)=>{U.d(Re,{o:()=>le});var d=U(727);class re extends d.w0{constructor(ae,me){super()}schedule(ae,me=0){return this}}const L={setInterval(ye,ae,...me){const{delegate:ve}=L;return ve?.setInterval?ve.setInterval(ye,ae,...me):setInterval(ye,ae,...me)},clearInterval(ye){const{delegate:ae}=L;return(ae?.clearInterval||clearInterval)(ye)},delegate:void 0};var pe=U(8737);class le extends re{constructor(ae,me){super(ae,me),this.scheduler=ae,this.work=me,this.pending=!1}schedule(ae,me=0){if(this.closed)return this;this.state=ae;const ve=this.id,z=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(z,ve,me)),this.pending=!0,this.delay=me,this.id=this.id||this.requestAsyncId(z,this.id,me),this}requestAsyncId(ae,me,ve=0){return L.setInterval(ae.flush.bind(ae,this),ve)}recycleAsyncId(ae,me,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return me;L.clearInterval(me)}execute(ae,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(ae,me);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,me){let z,ve=!1;try{this.work(ae)}catch(G){ve=!0,z=G||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:ae,scheduler:me}=this,{actions:ve}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,pe.P)(ve,this),null!=ae&&(this.id=this.recycleAsyncId(me,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,Re,U)=>{U.d(Re,{v:()=>L});var d=U(6063);class re{constructor(le,ye=re.now){this.schedulerActionCtor=le,this.now=ye}schedule(le,ye=0,ae){return new this.schedulerActionCtor(this,le).schedule(ae,ye)}}re.now=d.l.now;class L extends re{constructor(le,ye=re.now){super(le,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:ye}=this;if(this._active)return void ye.push(le);let ae;this._active=!0;do{if(ae=le.execute(le.state,le.delay))break}while(le=ye.shift());if(this._active=!1,ae){for(;le=ye.shift();)le.unsubscribe();throw ae}}}},4986:(pt,Re,U)=>{U.d(Re,{z:()=>L});var d=U(4408);const L=new(U(7565).v)(d.o)},6063:(pt,Re,U)=>{U.d(Re,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(pt,Re,U)=>{U.d(Re,{z:()=>d});const d={setTimeout(re,L,...pe){const{delegate:le}=d;return le?.setTimeout?le.setTimeout(re,L,...pe):setTimeout(re,L,...pe)},clearTimeout(re){const{delegate:L}=d;return(L?.clearTimeout||clearTimeout)(re)},delegate:void 0}},2202:(pt,Re,U)=>{U.d(Re,{h:()=>re});const re=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Re,U)=>{U.d(Re,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(pt,Re,U)=>{U.d(Re,{_6:()=>ye,jO:()=>pe,yG:()=>le});var d=U(576);function L(ae){return ae[ae.length-1]}function pe(ae){return(0,d.m)(L(ae))?ae.pop():void 0}function le(ae){return function re(ae){return ae&&(0,d.m)(ae.schedule)}(L(ae))?ae.pop():void 0}function ye(ae,me){return"number"==typeof L(ae)?ae.pop():me}},8737:(pt,Re,U)=>{function d(re,L){if(re){const pe=re.indexOf(L);0<=pe&&re.splice(pe,1)}}U.d(Re,{P:()=>d})},3888:(pt,Re,U)=>{function d(re){const pe=re(le=>{Error.call(le),le.stack=(new Error).stack});return pe.prototype=Object.create(Error.prototype),pe.prototype.constructor=pe,pe}U.d(Re,{d:()=>d})},2806:(pt,Re,U)=>{U.d(Re,{O:()=>pe,x:()=>L});var d=U(2416);let re=null;function L(le){if(d.v.useDeprecatedSynchronousErrorHandling){const ye=!re;if(ye&&(re={errorThrown:!1,error:null}),le(),ye){const{errorThrown:ae,error:me}=re;if(re=null,ae)throw me}}else le()}function pe(le){d.v.useDeprecatedSynchronousErrorHandling&&re&&(re.errorThrown=!0,re.error=le)}},9672:(pt,Re,U)=>{function d(re,L,pe,le=0,ye=!1){const ae=L.schedule(function(){pe(),ye?re.add(this.schedule(null,le)):this.unsubscribe()},le);if(re.add(ae),!ye)return ae}U.d(Re,{f:()=>d})},4671:(pt,Re,U)=>{function d(re){return re}U.d(Re,{y:()=>d})},1144:(pt,Re,U)=>{U.d(Re,{z:()=>d});const d=re=>re&&"number"==typeof re.length&&"function"!=typeof re},2206:(pt,Re,U)=>{U.d(Re,{D:()=>re});var d=U(576);function re(L){return Symbol.asyncIterator&&(0,d.m)(L?.[Symbol.asyncIterator])}},576:(pt,Re,U)=>{function d(re){return"function"==typeof re}U.d(Re,{m:()=>d})},3670:(pt,Re,U)=>{U.d(Re,{c:()=>L});var d=U(8822),re=U(576);function L(pe){return(0,re.m)(pe[d.L])}},6495:(pt,Re,U)=>{U.d(Re,{T:()=>L});var d=U(2202),re=U(576);function L(pe){return(0,re.m)(pe?.[d.h])}},8239:(pt,Re,U)=>{U.d(Re,{t:()=>re});var d=U(576);function re(L){return(0,d.m)(L?.then)}},3260:(pt,Re,U)=>{U.d(Re,{L:()=>pe,Q:()=>L});var d=U(655),re=U(576);function L(le){return(0,d.FC)(this,arguments,function*(){const ae=le.getReader();try{for(;;){const{value:me,done:ve}=yield(0,d.qq)(ae.read());if(ve)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(me)}}finally{ae.releaseLock()}})}function pe(le){return(0,re.m)(le?.getReader)}},4482:(pt,Re,U)=>{U.d(Re,{A:()=>re,e:()=>L});var d=U(576);function re(pe){return(0,d.m)(pe?.lift)}function L(pe){return le=>{if(re(le))return le.lift(function(ye){try{return pe(ye,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(pt,Re,U)=>{function d(){}U.d(Re,{Z:()=>d})},7849:(pt,Re,U)=>{U.d(Re,{h:()=>L});var d=U(2416),re=U(3410);function L(pe){re.z.setTimeout(()=>{const{onUnhandledError:le}=d.v;if(!le)throw pe;le(pe)})}},4532:(pt,Re,U)=>{function d(re){return new TypeError(`You provided ${null!==re&&"object"==typeof re?"an invalid object":`'${re}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Re,{z:()=>d})},655:(pt,Re,U)=>{function pe(J,oe){var se={};for(var Ee in J)Object.prototype.hasOwnProperty.call(J,Ee)&&oe.indexOf(Ee)<0&&(se[Ee]=J[Ee]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var fe=0;for(Ee=Object.getOwnPropertySymbols(J);fe<Ee.length;fe++)oe.indexOf(Ee[fe])<0&&Object.prototype.propertyIsEnumerable.call(J,Ee[fe])&&(se[Ee[fe]]=J[Ee[fe]])}return se}function me(J,oe,se,Ee){return new(se||(se=Promise))(function(Fe,vt){function Qt(cn){try{Xe(Ee.next(cn))}catch(Hn){vt(Hn)}}function Gt(cn){try{Xe(Ee.throw(cn))}catch(Hn){vt(Hn)}}function Xe(cn){cn.done?Fe(cn.value):function fe(Fe){return Fe instanceof se?Fe:new se(function(vt){vt(Fe)})}(cn.value).then(Qt,Gt)}Xe((Ee=Ee.apply(J,oe||[])).next())})}function ge(J){return this instanceof ge?(this.v=J,this):new ge(J)}function be(J,oe,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,Ee=se.apply(J,oe||[]),Fe=[];return fe={},vt("next"),vt("throw"),vt("return"),fe[Symbol.asyncIterator]=function(){return this},fe;function vt(mn){Ee[mn]&&(fe[mn]=function(nn){return new Promise(function(Br,Jt){Fe.push([mn,nn,Br,Jt])>1||Qt(mn,nn)})})}function Qt(mn,nn){try{!function Gt(mn){mn.value instanceof ge?Promise.resolve(mn.value.v).then(Xe,cn):Hn(Fe[0][2],mn)}(Ee[mn](nn))}catch(Br){Hn(Fe[0][3],Br)}}function Xe(mn){Qt("next",mn)}function cn(mn){Qt("throw",mn)}function Hn(mn,nn){mn(nn),Fe.shift(),Fe.length&&Qt(Fe[0][0],Fe[0][1])}}function it(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,oe=J[Symbol.asyncIterator];return oe?oe.call(J):(J=function ne(J){var oe="function"==typeof Symbol&&Symbol.iterator,se=oe&&J[oe],Ee=0;if(se)return se.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&Ee>=J.length&&(J=void 0),{value:J&&J[Ee++],done:!J}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),se={},Ee("next"),Ee("throw"),Ee("return"),se[Symbol.asyncIterator]=function(){return this},se);function Ee(Fe){se[Fe]=J[Fe]&&function(vt){return new Promise(function(Qt,Gt){!function fe(Fe,vt,Qt,Gt){Promise.resolve(Gt).then(function(Xe){Fe({value:Xe,done:Qt})},vt)}(Qt,Gt,(vt=J[Fe](vt)).done,vt.value)})}}}U.d(Re,{FC:()=>be,KL:()=>it,_T:()=>pe,mG:()=>me,qq:()=>ge})},4650:(pt,Re,U)=>{U.d(Re,{$8M:()=>xs,$Z:()=>Uv,AFp:()=>O0,AaK:()=>me,AsE:()=>kb,BQk:()=>Qi,CHM:()=>ba,CRH:()=>D0,CZH:()=>Sm,CqO:()=>zu,D6c:()=>E1,EJc:()=>dD,EiD:()=>hh,EpF:()=>xC,F$t:()=>qu,F4k:()=>wb,FYo:()=>Ju,FiY:()=>Ae,G48:()=>s1,Gf:()=>C0,GfV:()=>mm,Gpc:()=>G,Hsn:()=>Kt,Ikx:()=>Qh,JOm:()=>pr,JVY:()=>Ru,KtG:()=>Oo,L6k:()=>Tg,LAX:()=>vp,LFG:()=>qn,LSH:()=>Ga,Lbi:()=>gx,MAs:()=>__,MMx:()=>_d,NdJ:()=>em,O4$:()=>Wd,OlP:()=>Yt,Oqu:()=>xb,PXZ:()=>QP,Q6J:()=>vb,QGY:()=>bb,QP$:()=>df,QbO:()=>cD,Qsj:()=>r0,R0b:()=>ci,RDi:()=>ev,Rgc:()=>Em,SBq:()=>md,Sil:()=>Ex,Suo:()=>I0,TTD:()=>_i,TgZ:()=>Rn,Udp:()=>Sb,VKq:()=>VI,X6Q:()=>r1,XFs:()=>bt,Xpm:()=>j,Xts:()=>kv,Y36:()=>Bu,YKP:()=>e0,YNc:()=>Vl,Yjl:()=>jt,Yz7:()=>nn,ZZ4:()=>ID,_Bn:()=>af,_UZ:()=>li,_Vd:()=>fd,_c5:()=>b1,_uU:()=>WC,aQg:()=>DD,c2e:()=>yx,cJS:()=>Jt,cg1:()=>lm,dDg:()=>Am,deG:()=>op,dqk:()=>qe,eBb:()=>nv,eFA:()=>Rx,ekj:()=>dd,eoX:()=>gD,f3M:()=>ho,g9A:()=>uD,h0i:()=>pd,hGG:()=>w1,hM9:()=>gm,hij:()=>qh,iGM:()=>E0,ifc:()=>Xt,ip1:()=>N0,kL8:()=>M_,kcU:()=>Dc,lG2:()=>vr,lqb:()=>Ti,lri:()=>mD,mCW:()=>jc,n5z:()=>Tu,oAB:()=>ft,oxw:()=>NC,pB0:()=>rv,q3G:()=>ir,q4F:()=>s0,qLn:()=>Ou,qOj:()=>ub,qZA:()=>Bt,qzn:()=>fo,rWj:()=>Ax,sBO:()=>o1,sIi:()=>Yp,s_b:()=>ui,soG:()=>sy,tb:()=>P0,tp0:()=>ht,uIk:()=>db,vHH:()=>xe,vpe:()=>rl,wAp:()=>yt,xp6:()=>Pp,ynx:()=>Uh,z2F:()=>F0,z3N:()=>Fs,zSh:()=>GE,zs3:()=>Ka});var d=U(7579),re=U(727),L=U(8306),pe=U(6451),le=U(3099);function ye(s){for(let a in s)if(s[a]===ye)return a;throw Error("Could not find renamed property on target object.")}function ae(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function me(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(me).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function ve(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const z=ye({__forward_ref__:ye});function G(s){return s.__forward_ref__=G,s.toString=function(){return me(this())},s}function ne(s){return Ge(s)?s():s}function Ge(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===G}class xe extends Error{constructor(a,l){super(function $e(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function Ce(s,a){throw new xe(-201,!1)}function Gt(s,a){null==s&&function Xe(s,a,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${a} <=Actual]`))}(a,s,null,"!=")}function nn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Jt(s){return{providers:s.providers||[],imports:s.imports||[]}}function zt(s){return ls(s,us)||ls(s,ti)}function ls(s,a){return s.hasOwnProperty(a)?s[a]:null}function ei(s){return s&&(s.hasOwnProperty(Qs)||s.hasOwnProperty(Ui))?s[Qs]:null}const us=ye({\u0275prov:ye}),Qs=ye({\u0275inj:ye}),ti=ye({ngInjectableDef:ye}),Ui=ye({ngInjectorDef:ye});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let ni;function $n(s){const a=ni;return ni=s,a}function cs(s,a,l){const c=zt(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&bt.Optional?null:void 0!==a?a:void Ce(me(s))}function Vn(s){return{toString:s}.toString()}var Yn=(()=>((Yn=Yn||{})[Yn.OnPush=0]="OnPush",Yn[Yn.Default=1]="Default",Yn))(),Xt=(()=>{return(s=Xt||(Xt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Xt;var s})();const qe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ar={},Mt=[],pi=ye({\u0275cmp:ye}),lr=ye({\u0275dir:ye}),Bi=ye({\u0275pipe:ye}),an=ye({\u0275mod:ye}),ri=ye({\u0275fac:ye}),$=ye({__NG_ELEMENT_ID__:ye});let W=0;function j(s){return Vn(()=>{const l=!0===s.standalone,c={},f={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Yn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Mt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Xt.Emulated,id:"c"+W++,styles:s.styles||Mt,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,b=s.features;return f.inputs=en(s.inputs,c),f.outputs=en(s.outputs),b&&b.forEach(E=>E(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(Y).filter(Ne):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map(Qn).filter(Ne):null,f})}function Y(s){return $t(s)||Dn(s)}function Ne(s){return null!==s}const We={};function ft(s){return Vn(()=>{const a={type:s.type,bootstrap:s.bootstrap||Mt,declarations:s.declarations||Mt,imports:s.imports||Mt,exports:s.exports||Mt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(We[s.id]=s.type),a})}function en(s,a){if(null==s)return ar;const l={};for(const c in s)if(s.hasOwnProperty(c)){let f=s[c],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=c,a&&(a[f]=g)}return l}const vr=j;function jt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function $t(s){return s[pi]||null}function Dn(s){return s[lr]||null}function Qn(s){return s[Bi]||null}function Dr(s,a){const l=s[an]||null;if(!l&&!0===a)throw new Error(`Type ${me(s)} does not have '\u0275mod' property.`);return l}function br(s){return Array.isArray(s)&&"object"==typeof s[1]}function ii(s){return Array.isArray(s)&&!0===s[1]}function fl(s){return 0!=(8&s.flags)}function pl(s){return 2==(2&s.flags)}function eo(s){return 1==(1&s.flags)}function $i(s){return null!==s.template}function ma(s){return 0!=(256&s[2])}function no(s,a){return s.hasOwnProperty(ri)?s[ri]:null}class _c{constructor(a,l,c){this.previousValue=a,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function _i(){return ro}function ro(s){return s.type.prototype.ngOnChanges&&(s.setInput=yc),ga}function ga(){const s=gl(this),a=s?.current;if(a){const l=s.previous;if(l===ar)s.previous=a;else for(let c in a)l[c]=a[c];s.current=null,this.ngOnChanges(a)}}function yc(s,a,l,c){const f=gl(s)||function Zf(s,a){return s[ml]=a}(s,{previous:ar,current:null}),g=f.current||(f.current={}),b=f.previous,E=this.declaredInputs[l],I=b[E];g[E]=new _c(I&&I.currentValue,a,b===ar),s[c]=a}_i.ngInherit=!0;const ml="__ngSimpleChanges__";function gl(s){return s[ml]||null}function Bn(s){for(;Array.isArray(s);)s=s[0];return s}function yl(s,a){return Bn(a[s])}function Jn(s,a){return Bn(a[s.index])}function xo(s,a){return s.data[a]}function wr(s,a){const l=a[s];return br(l)?l:l[0]}function ko(s){return 4==(4&s[2])}function Ds(s){return 64==(64&s[2])}function yi(s,a){return null==a?null:s[a]}function so(s){s[18]=0}function vl(s,a){s[5]+=a;let l=s,c=s[3];for(;null!==c&&(1===a&&1===l[5]||-1===a&&0===l[5]);)c[5]+=a,l=c,c=c[3]}const ot={lFrame:du(null),bindingsEnabled:!0};function No(){return ot.bindingsEnabled}function Se(){return ot.lFrame.lView}function Vt(){return ot.lFrame.tView}function ba(s){return ot.lFrame.contextLView=s,s[8]}function Oo(s){return ot.lFrame.contextLView=null,s}function Pn(){let s=wa();for(;null!==s&&64===s.type;)s=s.parent;return s}function wa(){return ot.lFrame.currentTNode}function vi(s,a){const l=ot.lFrame;l.currentTNode=s,l.isParent=a}function bl(){return ot.lFrame.isParent}function Ea(){ot.lFrame.isParent=!1}function Fo(){return ot.lFrame.bindingIndex++}function zi(s){const a=ot.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}function Ia(s,a){const l=ot.lFrame;l.bindingIndex=l.bindingRootIndex=s,Da(a)}function Da(s){ot.lFrame.currentDirectiveIndex=s}function cu(){return ot.lFrame.currentQueryIndex}function wl(s){ot.lFrame.currentQueryIndex=s}function Ec(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function Sa(s,a,l){if(l&bt.SkipSelf){let f=a,g=s;for(;!(f=f.parent,null!==f||l&bt.Host||(f=Ec(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,s=g}const c=ot.lFrame=Cc();return c.currentTNode=a,c.lView=s,!0}function El(s){const a=Cc(),l=s[1];ot.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Cc(){const s=ot.lFrame,a=null===s?null:s.child;return null===a?du(s):a}function du(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function hu(){const s=ot.lFrame;return ot.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const fu=hu;function pu(){const s=hu();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function er(){return ot.lFrame.selectedIndex}function Ss(s){ot.lFrame.selectedIndex=s}function dn(){const s=ot.lFrame;return xo(s.tView,s.selectedIndex)}function Wd(){ot.lFrame.currentNamespace="svg"}function Dc(){!function Xf(){ot.lFrame.currentNamespace=null}()}function Zd(s,a){for(let l=a.directiveStart,c=a.directiveEnd;l<c;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:M,ngOnDestroy:N}=g;b&&(s.contentHooks||(s.contentHooks=[])).push(-l,b),E&&((s.contentHooks||(s.contentHooks=[])).push(l,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,E)),I&&(s.viewHooks||(s.viewHooks=[])).push(-l,I),M&&((s.viewHooks||(s.viewHooks=[])).push(l,M),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,M)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(l,N)}}function ep(s,a,l){Lo(s,a,3,l)}function _u(s,a,l,c){(3&s[2])===l&&Lo(s,a,l,c)}function Yd(s,a){let l=s[2];(3&l)===a&&(l&=2047,l+=1,s[2]=l)}function Lo(s,a,l,c){const g=c??-1,b=a.length-1;let E=0;for(let I=void 0!==c?65535&s[18]:0;I<b;I++)if("number"==typeof a[I+1]){if(E=a[I],null!=c&&E>=c)break}else a[I]<0&&(s[18]+=65536),(E<g||-1==g)&&(Tc(s,l,a,I),s[18]=(4294901760&s[18])+I+2),I++}function Tc(s,a,l,c){const f=l[c]<0,g=l[c+1],E=s[f?-l[c]:l[c]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class Aa{constructor(a,l,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function Bo(s,a,l){let c=0;for(;c<l.length;){const f=l[c];if("number"==typeof f){if(0!==f)break;c++;const g=l[c++],b=l[c++],E=l[c++];s.setAttribute(a,b,E,g)}else{const g=f,b=l[++c];Ho(g)?s.setProperty(a,g,b):s.setAttribute(a,g,b),c++}}return c}function np(s){return 3===s||4===s||6===s}function Ho(s){return 64===s.charCodeAt(0)}function vu(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let c=0;c<a.length;c++){const f=a[c];"number"==typeof f?l=f:0===l||rp(s,l,f,null,-1===l||2===l?a[++c]:null)}}return s}function rp(s,a,l,c,f){let g=0,b=s.length;if(-1===a)b=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===a){b=-1;break}if(E>a){b=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===l){if(null===c)return void(null!==f&&(s[g+1]=f));if(c===s[g+1])return void(s[g+2]=f)}g++,null!==c&&g++,null!==f&&g++}-1!==b&&(s.splice(b,0,a),g=b+1),s.splice(g++,0,l),null!==c&&s.splice(g++,0,c),null!==f&&s.splice(g++,0,f)}function ip(s){return-1!==s}function Cl(s){return 32767&s}function oo(s,a){let l=function qi(s){return s>>16}(s),c=a;for(;l>0;)c=c[15],l--;return c}let bu=!0;function Wi(s){const a=bu;return bu=s,a}let As=0;const He={};function nr(s,a){const l=Il(s,a);if(-1!==l)return l;const c=a[1];c.firstCreatePass&&(s.injectorIndex=a.length,dr(c.data,s),dr(a,null),dr(c.blueprint,null));const f=wu(s,a),g=s.injectorIndex;if(ip(f)){const b=Cl(f),E=oo(f,a),I=E[1].data;for(let M=0;M<8;M++)a[g+M]=E[b+M]|I[b+M]}return a[g+8]=f,g}function dr(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Il(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function wu(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,f=a;for(;null!==f;){if(c=Go(f),null===c)return-1;if(l++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function Eu(s,a,l){!function tr(s,a,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty($)&&(c=l[$]),null==c&&(c=l[$]=As++);const f=255&c;a.data[s+(f>>5)]|=1<<f}(s,a,l)}function Sc(s,a,l){if(l&bt.Optional)return s;Ce()}function jo(s,a,l,c){if(l&bt.Optional&&void 0===c&&(c=null),0==(l&(bt.Self|bt.Host))){const f=s[9],g=$n(void 0);try{return f?f.get(a,c,l&bt.Optional):cs(a,c,l&bt.Optional)}finally{$n(g)}}return Sc(c,0,l)}function ao(s,a,l,c=bt.Default,f){if(null!==s){if(1024&a[2]){const b=function $o(s,a,l,c,f){let g=s,b=a;for(;null!==g&&null!==b&&1024&b[2]&&!(256&b[2]);){const E=at(g,b,l,c|bt.Self,He);if(E!==He)return E;let I=g.parent;if(!I){const M=b[21];if(M){const N=M.get(l,He,c);if(N!==He)return N}I=Go(b),b=b[15]}g=I}return f}(s,a,l,c,He);if(b!==He)return b}const g=at(s,a,l,c,He);if(g!==He)return g}return jo(a,l,c,f)}function at(s,a,l,c,f){const g=function Dl(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty($)?s[$]:void 0;return"number"==typeof a?a>=0?255&a:Ac:a}(l);if("function"==typeof g){if(!Sa(a,s,c))return c&bt.Host?Sc(f,0,c):jo(a,l,c,f);try{const b=g(c);if(null!=b||c&bt.Optional)return b;Ce()}finally{fu()}}else if("number"==typeof g){let b=null,E=Il(s,a),I=-1,M=c&bt.Host?a[16][6]:null;for((-1===E||c&bt.SkipSelf)&&(I=-1===E?wu(s,a):a[E+8],-1!==I&&Du(c,!1)?(b=a[1],E=Cl(I),a=oo(I,a)):E=-1);-1!==E;){const N=a[1];if(An(g,E,N.data)){const V=Iu(E,a,l,b,c,M);if(V!==He)return V}I=a[E+8],-1!==I&&Du(c,a[1].data[E+8]===M)&&An(g,E,a)?(b=N,E=Cl(I),a=oo(I,a)):E=-1}}return f}function Iu(s,a,l,c,f,g){const b=a[1],E=b.data[s+8],N=xa(E,b,l,null==c?pl(E)&&bu:c!=b&&0!=(3&E.type),f&bt.Host&&g===E);return null!==N?Ms(a,b,N,E):He}function xa(s,a,l,c,f){const g=s.providerIndexes,b=a.data,E=1048575&g,I=s.directiveStart,N=g>>20,Q=f?E+N:s.directiveEnd;for(let ie=c?E:E+N;ie<Q;ie++){const De=b[ie];if(ie<I&&l===De||ie>=I&&De.type===l)return ie}if(f){const ie=b[I];if(ie&&$i(ie)&&ie.type===l)return I}return null}function Ms(s,a,l,c){let f=s[l];const g=a.data;if(function yu(s){return s instanceof Aa}(f)){const b=f;b.resolving&&function Je(s,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new xe(-200,`Circular dependency in DI detected for ${s}${l}`)}(function be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}(g[l]));const E=Wi(b.canSeeViewProviders);b.resolving=!0;const I=b.injectImpl?$n(b.injectImpl):null;Sa(s,c,bt.Default);try{f=s[l]=b.factory(void 0,g,s,c),a.firstCreatePass&&l>=c.directiveStart&&function Jf(s,a,l){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(c){const b=ro(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,b),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,b)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],a)}finally{null!==I&&$n(I),Wi(E),b.resolving=!1,fu()}}return f}function An(s,a,l){return!!(l[a+(s>>5)]&1<<s)}function Du(s,a){return!(s&bt.Self||s&bt.Host&&a)}class bi{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,c){return ao(this._tNode,this._lView,a,c,l)}}function Ac(){return new bi(Pn(),Se())}function Tu(s){return Vn(()=>{const a=s.prototype.constructor,l=a[ri]||wi(a),c=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==c;){const g=f[ri]||wi(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function wi(s){return Ge(s)?()=>{const a=wi(ne(s));return a&&a()}:no(s)}function Go(s){const a=s[1],l=a.type;return 2===l?a.declTNode:1===l?s[6]:null}function xs(s){return function Cu(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const c=l.length;let f=0;for(;f<c;){const g=l[f];if(np(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<c&&"string"==typeof l[f];)f++;else{if(g===a)return l[f+1];f+=2}}}return null}(Pn(),s)}const Gr="__parameters__";function Nr(s,a,l){return Vn(()=>{const c=function lo(s){return function(...l){if(s){const c=s(...l);for(const f in c)this[f]=c[f]}}}(a);function f(...g){if(this instanceof f)return c.apply(this,g),this;const b=new f(...g);return E.annotation=b,E;function E(I,M,N){const V=I.hasOwnProperty(Gr)?I[Gr]:Object.defineProperty(I,Gr,{value:[]})[Gr];for(;V.length<=N;)V.push(null);return(V[N]=V[N]||[]).push(b),I}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class Yt{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=nn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const op=new Yt("AnalyzeForEntryComponents");function Mn(s,a){void 0===a&&(a=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(a===s&&(a=s.slice(0,l)),Mn(c,a)):a!==s&&a.push(c)}return a}function _n(s,a){s.forEach(l=>Array.isArray(l)?_n(l,a):a(l))}function Su(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function qo(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Or(s,a){const l=[];for(let c=0;c<s;c++)l.push(a);return l}function Pr(s,a,l){let c=co(s,a);return c>=0?s[1|c]=l:(c=~c,function Rc(s,a,l,c){let f=s.length;if(f==a)s.push(l,c);else if(1===f)s.push(c,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=l,s[a+1]=c}}(s,c,a,l)),c}function Oc(s,a){const l=co(s,a);if(l>=0)return s[1|l]}function co(s,a){return function Ra(s,a,l){let c=0,f=s.length>>l;for(;f!==c;){const g=c+(f-c>>1),b=s[g<<l];if(a===b)return g<<l;b>a?f=g:c=g+1}return~(f<<l)}(s,a,1)}const Ci={},Os="__NG_DI_FLAG__",Oa="ngTempTokenPath",Ps=/\n/gm,rr="__source";let Pa;function Fa(s){const a=Pa;return Pa=s,a}function xu(s,a=bt.Default){if(void 0===Pa)throw new xe(-203,!1);return null===Pa?cs(s,void 0,a):Pa.get(s,a&bt.Optional?null:void 0,a)}function qn(s,a=bt.Default){return(function jn(){return ni}()||xu)(ne(s),a)}function ho(s,a=bt.Default){return qn(s,a)}function D(s){const a=[];for(let l=0;l<s.length;l++){const c=ne(s[l]);if(Array.isArray(c)){if(0===c.length)throw new xe(900,!1);let f,g=bt.Default;for(let b=0;b<c.length;b++){const E=c[b],I=R(E);"number"==typeof I?-1===I?f=E.token:g|=I:f=E}a.push(qn(f,g))}else a.push(qn(c))}return a}function S(s,a){return s[Os]=a,s.prototype[Os]=a,s}function R(s){return s[Os]}const Ae=S(Nr("Optional"),8),ht=S(Nr("SkipSelf"),4);let hp,rh;function ev(s){hp=s}function kl(s){return function Uc(){if(void 0===rh&&(rh=null,qe.trustedTypes))try{rh=qe.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return rh}()?.createHTML(s)||s}class Ha{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class gp extends Ha{getTypeName(){return"HTML"}}class ih extends Ha{getTypeName(){return"Style"}}class sh extends Ha{getTypeName(){return"Script"}}class _p extends Ha{getTypeName(){return"URL"}}class yp extends Ha{getTypeName(){return"ResourceURL"}}function Fs(s){return s instanceof Ha?s.changingThisBreaksApplicationSecurity:s}function fo(s,a){const l=function tv(s){return s instanceof Ha&&s.getTypeName()||null}(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function Ru(s){return new gp(s)}function Tg(s){return new ih(s)}function nv(s){return new sh(s)}function vp(s){return new _p(s)}function rv(s){return new yp(s)}class Ls{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(kl(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch{return null}}}class bp{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=kl(a),l;const c=this.inertDocument.createElement("body");return c.innerHTML=kl(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const b=l.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let c=a.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const ah=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Hc=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function jc(s){return(s=String(s)).match(ah)||s.match(Hc)?s:"unsafe:"+s}function ps(s){const a={};for(const l of s.split(","))a[l]=!0;return a}function Nu(...s){const a={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(a[c]=!0);return a}const $c=ps("area,br,col,hr,img,wbr"),lh=ps("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),uh=ps("rp,rt"),wp=Nu($c,Nu(lh,ps("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Nu(uh,ps("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Nu(uh,lh)),ja=ps("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$a=ps("srcset"),ch=Nu(ja,$a,ps("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ps("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),dh=ps("script,style,template");class Mg{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!wp.hasOwnProperty(l))return this.sanitizedSomething=!0,!dh.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=a.attributes;for(let f=0;f<c.length;f++){const g=c.item(f),b=g.name,E=b.toLowerCase();if(!ch.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=g.value;ja[E]&&(I=jc(I)),$a[E]&&(s=I,I=(s=String(s)).split(",").map(a=>jc(a.trim())).join(", ")),this.buf.push(" ",b,'="',ov(I),'"')}var s;return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();wp.hasOwnProperty(l)&&!$c.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(ov(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const mE=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Cp=/([^\#-~ |!])/g;function ov(s){return s.replace(/&/g,"&amp;").replace(mE,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Cp,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ip;function hh(s,a){let l=null;try{Ip=Ip||function oh(s){const a=new bp(s);return function Sg(){try{return!!(new window.DOMParser).parseFromString(kl(""),"text/html")}catch{return!1}}()?new Ls(a):a}(s);let c=a?String(a):"";l=Ip.getInertBodyElement(c);let f=5,g=c;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,c=g,g=l.innerHTML,l=Ip.getInertBodyElement(c)}while(c!==g);return kl((new Mg).sanitizeChildren(fh(l)||l))}finally{if(l){const c=fh(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function fh(s){return"content"in s&&function av(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var ir=(()=>((ir=ir||{})[ir.NONE=0]="NONE",ir[ir.HTML=1]="HTML",ir[ir.STYLE=2]="STYLE",ir[ir.SCRIPT=3]="SCRIPT",ir[ir.URL=4]="URL",ir[ir.RESOURCE_URL=5]="RESOURCE_URL",ir))();function Ga(s){const a=function Ol(){const s=Se();return s&&s[12]}();return a?a.sanitize(ir.URL,s)||"":fo(s,"URL")?Fs(s):jc(ge(s))}function Yo(s){return s.ngOriginalError}class Ou{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&Yo(a);for(;l&&Yo(l);)l=Yo(l);return l||null}}const _h=new Map;let Vs=0;const xp="__ngContext__";function In(s,a){br(a)?(s[xp]=a[20],function Og(s){_h.set(s[20],s)}(a)):s[xp]=a}function Qo(s){const a=s[xp];return"number"==typeof a?function Pu(s){return _h.get(s)||null}(a):a||null}function Wc(s){const a=Qo(s);return a?br(a)?a:a.lView:null}const _=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(qe))();function ce(s){return s instanceof Function?s():s}var pr=(()=>((pr=pr||{})[pr.Important=1]="Important",pr[pr.DashCase=2]="DashCase",pr))();function wh(s,a){return undefined(s,a)}function qa(s){const a=s[3];return ii(a)?a[3]:a}function Vu(s){return Vg(s[13])}function Zc(s){return Vg(s[4])}function Vg(s){for(;null!==s&&!ii(s);)s=s[4];return s}function Uu(s,a,l,c,f){if(null!=c){let g,b=!1;ii(c)?g=c:br(c)&&(b=!0,c=c[0]);const E=Bn(c);0===s&&null!==l?null==f?Kr(a,l,E):Yc(a,l,E,f||null,!0):1===s&&null!==l?Yc(a,l,E,f||null,!0):2===s?function Wa(s,a,l){const c=Qc(s,a);c&&function IE(s,a,l,c){s.removeChild(a,l,c)}(s,c,a,l)}(a,E,b):3===s&&a.destroyNode(E),null!=g&&function HS(s,a,l,c,f){const g=l[7];g!==Bn(l)&&Uu(a,s,c,g,f);for(let E=10;E<l.length;E++){const I=l[E];Xc(I[1],I,s,a,c,g)}}(a,s,g,l,f)}}function mv(s,a,l){return s.createElement(a,l)}function Ug(s,a){const l=s[9],c=l.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,vl(f,-1)),l.splice(c,1)}function Np(s,a){if(s.length<=10)return;const l=10+a,c=s[l];if(c){const f=c[17];null!==f&&f!==s&&Ug(f,c),a>0&&(s[l-1][4]=c[4]);const g=qo(s,10+a);!function _E(s,a){Xc(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(c[1],c);const b=g[19];null!==b&&b.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function vE(s,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&Xc(s,a,l,3,null,null),function FS(s){let a=s[13];if(!a)return _v(s[1],s);for(;a;){let l=null;if(br(a))l=a[13];else{const c=a[10];c&&(l=c)}if(!l){for(;a&&!a[4]&&a!==s;)br(a)&&_v(a[1],a),a=a[3];null===a&&(a=s),br(a)&&_v(a[1],a),l=a&&a[4]}a=l}}(a)}}function _v(s,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function VS(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const f=a[l[c]];if(!(f instanceof Aa)){const g=l[c+1];if(Array.isArray(g))for(let b=0;b<g.length;b+=2){const E=f[g[b]],I=g[b+1];try{I.call(E)}finally{}}else try{g.call(f)}finally{}}}}(s,a),function bE(s,a){const l=s.cleanup,c=a[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const b=l[g+1],E="function"==typeof b?b(a):Bn(a[b]),I=c[f=l[g+2]],M=l[g+3];"boolean"==typeof M?E.removeEventListener(l[g],I,M):M>=0?c[f=M]():c[f=-M].unsubscribe(),g+=2}else{const b=c[f=l[g+1]];l[g].call(b)}if(null!==c){for(let g=f+1;g<c.length;g++)c[g]();a[7]=null}}(s,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&ii(a[3])){l!==a[3]&&Ug(l,a);const c=a[19];null!==c&&c.detachView(s)}!function Pg(s){_h.delete(s[20])}(a)}}function wE(s,a,l){return function EE(s,a,l){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return l[0];if(2&c.flags){const f=s.data[c.directiveStart].encapsulation;if(f===Xt.None||f===Xt.Emulated)return null}return Jn(c,l)}(s,a.parent,l)}function Yc(s,a,l,c,f){s.insertBefore(a,l,c,f)}function Kr(s,a,l){s.appendChild(a,l)}function CE(s,a,l,c,f){null!==c?Yc(s,a,l,c,f):Kr(s,a,l)}function Qc(s,a){return s.parentNode(a)}function DE(s,a,l){return TE(s,a,l)}let TE=function vv(s,a,l){return 40&s.type?Jn(s,l):null};function bv(s,a,l,c){const f=wE(s,c,a),g=a[11],E=DE(c.parent||a[6],c,a);if(null!=f)if(Array.isArray(l))for(let I=0;I<l.length;I++)CE(g,f,l[I],E,!1);else CE(g,f,l,E,!1)}function Op(s,a){if(null!==a){const l=a.type;if(3&l)return Jn(a,s);if(4&l)return Ev(-1,s[a.index]);if(8&l){const c=a.child;if(null!==c)return Op(s,c);{const f=s[a.index];return ii(f)?Ev(-1,f):Bn(f)}}if(32&l)return wh(a,s)()||Bn(s[a.index]);{const c=wv(s,a);return null!==c?Array.isArray(c)?c[0]:Op(qa(s[16]),c):Op(s,a.next)}}return null}function wv(s,a){return null!==a?s[16][6].projection[a.projection]:null}function Ev(s,a){const l=10+s+1;if(l<a.length){const c=a[l],f=c[1].firstChild;if(null!==f)return Op(c,f)}return a[7]}function SE(s,a,l,c,f,g,b){for(;null!=l;){const E=c[l.index],I=l.type;if(b&&0===a&&(E&&In(Bn(E),c),l.flags|=4),64!=(64&l.flags))if(8&I)SE(s,a,l.child,c,f,g,!1),Uu(a,s,f,E,g);else if(32&I){const M=wh(l,c);let N;for(;N=M();)Uu(a,s,f,N,g);Uu(a,s,f,E,g)}else 16&I?Cv(s,a,c,l,f,g):Uu(a,s,f,E,g);l=b?l.projectionNext:l.next}}function Xc(s,a,l,c,f,g){SE(l,c,s.firstChild,a,f,g,!1)}function Cv(s,a,l,c,f,g){const b=l[16],I=b[6].projection[c.projection];if(Array.isArray(I))for(let M=0;M<I.length;M++)Uu(a,s,f,I[M],g);else SE(s,a,I,b[3],f,g,!0)}function Iv(s,a,l){s.setAttribute(a,"style",l)}function Dv(s,a,l){""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l)}function ME(s,a,l){let c=s.length;for(;;){const f=s.indexOf(a,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const g=a.length;if(f+g===c||s.charCodeAt(f+g)<=32)return f}l=f+1}}const xE="ng-template";function kE(s,a,l){let c=0;for(;c<s.length;){let f=s[c++];if(l&&"class"===f){if(f=s[c],-1!==ME(f.toLowerCase(),a,0))return!0}else if(1===f){for(;c<s.length&&"string"==typeof(f=s[c++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function RE(s){return 4===s.type&&s.value!==xE}function $S(s,a,l){return a===(4!==s.type||l?s.value:xE)}function GS(s,a,l){let c=4;const f=s.attrs||[],g=function PE(s){for(let a=0;a<s.length;a++)if(np(s[a]))return a;return s.length}(f);let b=!1;for(let E=0;E<a.length;E++){const I=a[E];if("number"!=typeof I){if(!b)if(4&c){if(c=2|1&c,""!==I&&!$S(s,I,l)||""===I&&1===a.length){if(Xo(c))return!1;b=!0}}else{const M=8&c?I:a[++E];if(8&c&&null!==s.attrs){if(!kE(s.attrs,M,l)){if(Xo(c))return!1;b=!0}continue}const V=NE(8&c?"class":I,f,RE(s),l);if(-1===V){if(Xo(c))return!1;b=!0;continue}if(""!==M){let Q;Q=V>g?"":f[V+1].toLowerCase();const ie=8&c?Q:null;if(ie&&-1!==ME(ie,M,0)||2&c&&M!==Q){if(Xo(c))return!1;b=!0}}}}else{if(!b&&!Xo(c)&&!Xo(I))return!1;if(b&&Xo(I))continue;b=!1,c=I|1&c}}return Xo(c)||b}function Xo(s){return 0==(1&s)}function NE(s,a,l,c){if(null===a)return-1;let f=0;if(c||!l){let g=!1;for(;f<a.length;){const b=a[f];if(b===s)return f;if(3===b||6===b)g=!0;else{if(1===b||2===b){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=g?1:2}return-1}return function qS(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===a)return l;l++}return-1}(a,s)}function OE(s,a,l=!1){for(let c=0;c<a.length;c++)if(GS(s,a[c],l))return!0;return!1}function Tv(s,a){e:for(let l=0;l<a.length;l++){const c=a[l];if(s.length===c.length){for(let f=0;f<s.length;f++)if(s[f]!==c[f])continue e;return!0}}return!1}function FE(s,a){return s?":not("+a.trim()+")":a}function WS(s){let a=s[0],l=1,c=2,f="",g=!1;for(;l<s.length;){let b=s[l];if("string"==typeof b)if(2&c){const E=s[++l];f+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?f+="."+b:4&c&&(f+=" "+b);else""!==f&&!Xo(b)&&(a+=FE(g,f),f=""),c=b,g=g||!Xo(c);l++}return""!==f&&(a+=FE(g,f)),a}const kt={};function Pp(s){LE(Vt(),Se(),er()+s,!1)}function LE(s,a,l,c){if(!c)if(3==(3&a[2])){const g=s.preOrderCheckHooks;null!==g&&ep(a,g,l)}else{const g=s.preOrderHooks;null!==g&&_u(a,g,0,l)}Ss(l)}const kv=new Yt("ENVIRONMENT_INITIALIZER"),ZS=new Yt("INJECTOR_DEF_TYPES");function YS(...s){return{\u0275providers:Hg(0,s)}}function Hg(s,...a){const l=[],c=new Set;let f;return _n(a,g=>{const b=g;HE(b,l,[],c)&&(f||(f=[]),f.push(b))}),void 0!==f&&QS(f,l),l}function QS(s,a){for(let l=0;l<s.length;l++){const{providers:f}=s[l];_n(f,g=>{a.push(g)})}}function HE(s,a,l,c){if(!(s=ne(s)))return!1;let f=null,g=ei(s);const b=!g&&$t(s);if(g||b){if(b&&!b.standalone)return!1;f=s}else{const I=s.ngModule;if(g=ei(I),!g)return!1;f=I}const E=c.has(f);if(b){if(E)return!1;if(c.add(f),b.dependencies){const I="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const M of I)HE(M,a,l,c)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let M;c.add(f);try{_n(g.imports,N=>{HE(N,a,l,c)&&(M||(M=[]),M.push(N))})}finally{}void 0!==M&&QS(M,a)}if(!E){const M=no(f)||(()=>new f);a.push({provide:f,useFactory:M,deps:Mt},{provide:ZS,useValue:f,multi:!0},{provide:kv,useValue:()=>qn(f),multi:!0})}const I=g.providers;null==I||E||_n(I,N=>{a.push(N)})}}return f!==s&&void 0!==s.providers}const XS=ye({provide:String,useValue:ye});function jE(s){return null!==s&&"object"==typeof s&&XS in s}function Dh(s){return"function"==typeof s}const $E=new Yt("INJECTOR",-1);class tA{get(a,l=Ci){if(l===Ci){const c=new Error(`NullInjectorError: No provider for ${me(a)}!`);throw c.name="NullInjectorError",c}return l}}const GE=new Yt("Set Injector scope."),we={},Yi={};let Us;function P(){return void 0===Us&&(Us=new tA),Us}class Ti{}class Rv extends Ti{constructor(a,l,c,f){super(),this.parent=l,this.source=c,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jg(a,b=>this.processProvider(b)),this.records.set($E,Pl(void 0,this)),f.has("environment")&&this.records.set(Ti,Pl(void 0,this));const g=this.records.get(GE);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(ZS.multi,Mt,bt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}get(a,l=Ci,c=bt.Default){this.assertNotDestroyed();const f=Fa(this),g=$n(void 0);try{if(!(c&bt.SkipSelf)){let E=this.records.get(a);if(void 0===E){const I=function iA(s){return"function"==typeof s||"object"==typeof s&&s instanceof Yt}(a)&&zt(a);E=I&&this.injectableDefInScope(I)?Pl(Nv(a),we):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(c&bt.Self?P():this.parent).get(a,l=c&bt.Optional&&l===Ci?null:l)}catch(b){if("NullInjectorError"===b.name){if((b[Oa]=b[Oa]||[]).unshift(me(a)),f)throw b;return function H(s,a,l,c){const f=s[Oa];throw a[rr]&&f.unshift(a[rr]),s.message=function te(s,a,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let f=me(a);if(Array.isArray(a))f=a.map(me).join(" -> ");else if("object"==typeof a){let g=[];for(let b in a)if(a.hasOwnProperty(b)){let E=a[b];g.push(b+":"+("string"==typeof E?JSON.stringify(E):me(E)))}f=`{${g.join(", ")}}`}return`${l}${c?"("+c+")":""}[${f}]: ${s.replace(Ps,"\n  ")}`}("\n"+s.message,f,l,c),s.ngTokenPath=f,s[Oa]=null,s}(b,a,"R3InjectorError",this.source)}throw b}finally{$n(g),Fa(f)}}resolveInjectorInitializers(){const a=Fa(this),l=$n(void 0);try{const c=this.get(kv.multi,Mt,bt.Self);for(const f of c)f()}finally{Fa(a),$n(l)}}toString(){const a=[],l=this.records;for(const c of l.keys())a.push(me(c));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(a){let l=Dh(a=ne(a))?a:ne(a&&a.provide);const c=function Zr(s){return jE(s)?Pl(void 0,s.useValue):Pl(po(s),we)}(a);if(Dh(a)||!0!==a.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=Pl(void 0,we,!0),f.factory=()=>D(f.multi),this.records.set(l,f)),l=a,f.multi.push(a)}this.records.set(l,c)}hydrate(a,l){return l.value===we&&(l.value=Yi,l.value=l.factory()),"object"==typeof l.value&&l.value&&function rA(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=ne(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Nv(s){const a=zt(s),l=null!==a?a.factory:no(s);if(null!==l)return l;if(s instanceof Yt)throw new xe(204,!1);if(s instanceof Function)return function nA(s){const a=s.length;if(a>0)throw Or(a,"?"),new xe(204,!1);const l=function hi(s){const a=s&&(s[us]||s[ti]);if(a){const l=function Rr(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new xe(204,!1)}function po(s,a,l){let c;if(Dh(s)){const f=ne(s);return no(f)||Nv(f)}if(jE(s))c=()=>ne(s.useValue);else if(function eA(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...D(s.deps||[]));else if(function JS(s){return!(!s||!s.useExisting)}(s))c=()=>qn(ne(s.useExisting));else{const f=ne(s&&(s.useClass||s.provide));if(!function Ov(s){return!!s.deps}(s))return no(f)||Nv(f);c=()=>new f(...D(s.deps))}return c}function Pl(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function sA(s){return!!s.\u0275providers}function jg(s,a){for(const l of s)Array.isArray(l)?jg(l,a):sA(l)?jg(l.\u0275providers,a):a(l)}function zE(s,a=null,l=null,c){const f=qE(s,a,l,c);return f.resolveInjectorInitializers(),f}function qE(s,a=null,l=null,c,f=new Set){const g=[l||Mt,YS(s)];return c=c||("object"==typeof s?void 0:me(s)),new Rv(g,a||P(),c||null,f)}let Ka=(()=>{class s{static create(l,c){if(Array.isArray(l))return zE({name:""},c,l,"");{const f=l.name??"";return zE({name:f},l.parent,l.providers,f)}}}return s.THROW_IF_NOT_FOUND=Ci,s.NULL=new tA,s.\u0275prov=nn({token:s,providedIn:"any",factory:()=>qn($E)}),s.__NG_ELEMENT_ID__=-1,s})();function Bu(s,a=bt.Default){const l=Se();return null===l?qn(s,a):ao(Pn(),l,ne(s),a)}function Uv(){throw new Error("invalid")}function qg(s,a){return s<<17|a<<2}function Jo(s){return s>>17&32767}function $v(s){return 2|s}function Fl(s){return(131068&s)>>2}function kh(s,a){return-131069&s|a<<2}function Wg(s){return 1|s}function e_(s,a){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const f=l[c],g=l[c+1];if(-1!==g){const b=s.data[g];wl(f),b.contentQueries(2,a[g],g)}}}function Rh(s,a,l,c,f,g,b,E,I,M,N){const V=a.blueprint.slice();return V[0]=f,V[2]=76|c,(null!==N||s&&1024&s[2])&&(V[2]|=1024),so(V),V[3]=V[15]=s,V[8]=l,V[10]=b||s&&s[10],V[11]=E||s&&s[11],V[12]=I||s&&s[12]||null,V[9]=M||s&&s[9]||null,V[6]=g,V[20]=function zc(){return Vs++}(),V[21]=N,V[16]=2==a.type?s[16]:V,V}function Hu(s,a,l,c,f){let g=s.data[a];if(null===g)g=function Qv(s,a,l,c,f){const g=wa(),b=bl(),I=s.data[a]=function Nh(s,a,l,c,f,g){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?g:g&&g.parent,l,a,c,f);return null===s.firstChild&&(s.firstChild=I),null!==g&&(b?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,a,l,c,f),function zd(){return ot.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=c,g.attrs=f;const b=function Po(){const s=ot.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();g.injectorIndex=null===b?-1:b.injectorIndex}return vi(g,!0),g}function nd(s,a,l,c){if(0===l)return-1;const f=a.length;for(let g=0;g<l;g++)a.push(c),s.blueprint.push(c),s.data.push(null);return f}function t_(s,a,l){El(a);try{const c=s.viewQuery;null!==c&&d_(1,c,l);const f=s.template;null!==f&&n_(s,a,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&e_(s,a),s.staticViewQueries&&d_(2,s.viewQuery,l);const g=s.components;null!==g&&function wA(s,a){for(let l=0;l<a.length;l++)AA(s,a[l])}(a,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{a[2]&=-5,pu()}}function jp(s,a,l,c){const f=a[2];if(128!=(128&f)){El(a);try{so(a),function wc(s){return ot.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&n_(s,a,l,2,c);const b=3==(3&f);if(b){const M=s.preOrderCheckHooks;null!==M&&ep(a,M,null)}else{const M=s.preOrderHooks;null!==M&&_u(a,M,0,null),Yd(a,0)}if(function nb(s){for(let a=Vu(s);null!==a;a=Zc(a)){if(!a[2])continue;const l=a[9];for(let c=0;c<l.length;c++){const f=l[c],g=f[3];0==(512&f[2])&&vl(g,1),f[2]|=512}}}(a),function bC(s){for(let a=Vu(s);null!==a;a=Zc(a))for(let l=10;l<a.length;l++){const c=a[l],f=c[1];Ds(c)&&jp(f,c,f.template,c[8])}}(a),null!==s.contentQueries&&e_(s,a),b){const M=s.contentCheckHooks;null!==M&&ep(a,M)}else{const M=s.contentHooks;null!==M&&_u(a,M,1),Yd(a,1)}!function Yv(s,a){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const f=l[c];if(f<0)Ss(~f);else{const g=f,b=l[++c],E=l[++c];Ia(b,g),E(2,a[g])}}}finally{Ss(-1)}}(s,a);const E=s.components;null!==E&&function Hp(s,a){for(let l=0;l<a.length;l++)l_(s,a[l])}(a,E);const I=s.viewQuery;if(null!==I&&d_(2,I,c),b){const M=s.viewCheckHooks;null!==M&&ep(a,M)}else{const M=s.viewHooks;null!==M&&_u(a,M,2),Yd(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,vl(a[3],-1))}finally{pu()}}}function IP(s,a,l,c){const f=a[10],b=ko(a);try{!b&&f.begin&&f.begin(),b&&t_(s,a,c),jp(s,a,l,c)}finally{!b&&f.end&&f.end()}}function n_(s,a,l,c,f){const g=er(),b=2&c;try{Ss(-1),b&&a.length>22&&LE(s,a,22,!1),l(c,f)}finally{Ss(g)}}function Xv(s,a,l){if(fl(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const b=s.data[g];b.contentQueries&&b.contentQueries(1,l[g],g)}}}function r_(s,a,l){!No()||(function IA(s,a,l,c){const f=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||nr(l,a),In(c,a);const b=l.initialInputs;for(let E=f;E<g;E++){const I=s.data[E],M=$i(I);M&&yC(a,l,I);const N=Ms(a,s,E,l);In(N,a),null!==b&&TA(0,E-f,N,I,0,b),M&&(wr(l.index,a)[8]=N)}}(s,a,l,Jn(l,a)),128==(128&l.flags)&&function s_(s,a,l){const c=l.directiveStart,f=l.directiveEnd,g=l.index,b=function Qf(){return ot.lFrame.currentDirectiveIndex}();try{Ss(g);for(let E=c;E<f;E++){const I=s.data[E],M=a[E];Da(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&_C(I,M)}}finally{Ss(-1),Da(b)}}(s,a,l))}function $p(s,a,l=Jn){const c=a.localNames;if(null!==c){let f=a.index+1;for(let g=0;g<c.length;g+=2){const b=c[g+1],E=-1===b?l(a,s):s[b];s[f++]=E}}}function Jv(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=eb(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function eb(s,a,l,c,f,g,b,E,I,M){const N=22+c,V=N+f,Q=function EA(s,a){const l=[];for(let c=0;c<a;c++)l.push(c<s?null:kt);return l}(N,V),ie="function"==typeof M?M():M;return Q[1]={type:s,blueprint:Q,template:l,queries:null,viewQuery:E,declTNode:a,data:Q.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:I,consts:ie,incompleteFirstPass:!1}}function i_(s,a,l,c){const f=h_(a);null===l?f.push(c):(f.push(l),s.firstCreatePass&&sb(s).push(c,f.length-1))}function tb(s,a,l){for(let c in s)if(s.hasOwnProperty(c)){const f=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(a,f):l[c]=[a,f]}return l}function Fr(s,a,l,c,f,g,b,E){const I=Jn(a,l);let N,M=a.inputs;!E&&null!=M&&(N=M[c])?(EC(s,l,N,c,f),pl(a)&&function mC(s,a){const l=wr(a,s);16&l[2]||(l[2]|=32)}(l,a.index)):3&a.type&&(c=function Gp(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),f=null!=b?b(f,a.value||"",c):f,g.setProperty(I,c,f))}function qp(s,a,l,c){let f=!1;if(No()){const g=function Ll(s,a,l){const c=s.directiveRegistry;let f=null;if(c)for(let g=0;g<c.length;g++){const b=c[g];OE(l,b.selectors,!1)&&(f||(f=[]),Eu(nr(l,a),s,b.type),$i(b)?(ta(s,l),f.unshift(b)):f.push(b))}return f}(s,a,l),b=null===c?null:{"":-1};if(null!==g){f=!0,Oh(l,s.data.length,g.length);for(let N=0;N<g.length;N++){const V=g[N];V.providersResolver&&V.providersResolver(V)}let E=!1,I=!1,M=nd(s,a,g.length,null);for(let N=0;N<g.length;N++){const V=g[N];l.mergedAttrs=vu(l.mergedAttrs,V.hostAttrs),o_(s,l,a,M,V),DA(M,V,b),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const Q=V.type.prototype;!E&&(Q.ngOnChanges||Q.ngOnInit||Q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),E=!0),!I&&(Q.ngOnChanges||Q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),I=!0),M++}!function pC(s,a){const c=a.directiveEnd,f=s.data,g=a.attrs,b=[];let E=null,I=null;for(let M=a.directiveStart;M<c;M++){const N=f[M],V=N.inputs,Q=null===g||RE(a)?null:SA(V,g);b.push(Q),E=tb(V,M,E),I=tb(N.outputs,M,I)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=E,a.outputs=I}(s,l)}b&&function id(s,a,l){if(a){const c=s.localNames=[];for(let f=0;f<a.length;f+=2){const g=l[a[f+1]];if(null==g)throw new xe(-301,!1);c.push(a[f],g)}}}(l,c,b)}return l.mergedAttrs=vu(l.mergedAttrs,l.attrs),f}function ea(s,a,l,c,f,g){const b=g.hostBindings;if(b){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const I=~a.index;(function Si(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(E)!=I&&E.push(I),E.push(c,f,b)}}function _C(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function ta(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function DA(s,a,l){if(l){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)l[a.exportAs[c]]=s;$i(a)&&(l[""]=s)}}function Oh(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}function o_(s,a,l,c,f){s.data[c]=f;const g=f.factory||(f.factory=no(f.type)),b=new Aa(g,$i(f),Bu);s.blueprint[c]=b,l[c]=b,ea(s,a,0,c,nd(s,l,f.hostVars,kt),f)}function yC(s,a,l){const c=Jn(a,s),f=Jv(l),g=s[10],b=u_(s,Rh(s,f,null,l.onPush?32:16,c,a,g,g.createRenderer(c,l),null,null,null));s[a.index]=b}function xn(s,a,l,c,f,g){const b=Jn(s,a);!function a_(s,a,l,c,f,g,b){if(null==g)s.removeAttribute(a,f,l);else{const E=null==b?ge(g):b(g,c||"",f);s.setAttribute(a,f,E,l)}}(a[11],b,g,s.value,l,c,f)}function TA(s,a,l,c,f,g){const b=g[a];if(null!==b){const E=c.setInput;for(let I=0;I<b.length;){const M=b[I++],N=b[I++],V=b[I++];null!==E?c.setInput(l,V,M,N):l[N]=V}}}function SA(s,a){let l=null,c=0;for(;c<a.length;){const f=a[c];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,s[f],a[c+1])),c+=2}else c+=2;else c+=4}return l}function vC(s,a,l,c){return new Array(s,!0,!1,a,null,0,c,l,null,null)}function l_(s,a){const l=wr(a,s);if(Ds(l)){const c=l[1];48&l[2]?jp(c,l,c.template,l[8]):l[5]>0&&ju(l)}}function ju(s){for(let c=Vu(s);null!==c;c=Zc(c))for(let f=10;f<c.length;f++){const g=c[f];if(512&g[2]){const b=g[1];jp(b,g,b.template,g[8])}else g[5]>0&&ju(g)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const f=wr(l[c],s);Ds(f)&&f[5]>0&&ju(f)}}function AA(s,a){const l=wr(a,s),c=l[1];(function Wp(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])})(c,l),t_(c,l,l[8])}function u_(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function rb(s){for(;s;){s[2]|=32;const a=qa(s);if(ma(s)&&!a)return s;s=a}return null}function ib(s){!function Zp(s){for(let a=0;a<s.components.length;a++){const l=s.components[a],c=Wc(l);if(null!==c){const f=c[1];IP(f,c,f.template,l)}}}(s[8])}function d_(s,a,l){wl(0),a(s,l)}const wC=(()=>Promise.resolve(null))();function h_(s){return s[7]||(s[7]=[])}function sb(s){return s.cleanup||(s.cleanup=[])}function f_(s,a){const l=s[9],c=l?l.get(Ou,null):null;c&&c.handleError(a)}function EC(s,a,l,c,f){for(let g=0;g<l.length;){const b=l[g++],E=l[g++],I=a[b],M=s.data[b];null!==M.setInput?M.setInput(I,f,c,E):I[E]=f}}function Ya(s,a,l){const c=yl(a,s);!function gE(s,a,l){s.setValue(a,l)}(s[11],c,l)}function p_(s,a,l){let c=l?s.styles:null,f=l?s.classes:null,g=0;if(null!==a)for(let b=0;b<a.length;b++){const E=a[b];"number"==typeof E?g=E:1==g?f=ve(f,E):2==g&&(c=ve(c,E+": "+a[++b]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=f:s.classesWithoutHost=f}function NA(){const s=Pn();Zd(Se()[1],s)}function ub(s){let a=function IC(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;a;){let f;if($i(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new xe(903,!1);f=a.\u0275dir}if(f){if(l){c.push(f);const b=s;b.inputs=m_(s.inputs),b.declaredInputs=m_(s.declaredInputs),b.outputs=m_(s.outputs);const E=f.hostBindings;E&&FA(s,E);const I=f.viewQuery,M=f.contentQueries;if(I&&DC(s,I),M&&TC(s,M),ae(s.inputs,f.inputs),ae(s.declaredInputs,f.declaredInputs),ae(s.outputs,f.outputs),$i(f)&&f.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let b=0;b<g.length;b++){const E=g[b];E&&E.ngInherit&&E(s),E===ub&&(l=!1)}}a=Object.getPrototypeOf(a)}!function PA(s){let a=0,l=null;for(let c=s.length-1;c>=0;c--){const f=s[c];f.hostVars=a+=f.hostVars,f.hostAttrs=vu(f.hostAttrs,l=vu(l,f.hostAttrs))}}(c)}function m_(s){return s===ar?{}:s===Mt?[]:s}function DC(s,a){const l=s.viewQuery;s.viewQuery=l?(c,f)=>{a(c,f),l(c,f)}:a}function TC(s,a){const l=s.contentQueries;s.contentQueries=l?(c,f,g)=>{a(c,f,g),l(c,f,g)}:a}function FA(s,a){const l=s.hostBindings;s.hostBindings=l?(c,f)=>{a(c,f),l(c,f)}:a}let g_=null;function $u(){if(!g_){const s=qe.Symbol;if(s&&s.iterator)g_=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const c=a[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(g_=c)}}}return g_}function Yp(s){return!!Qa(s)&&(Array.isArray(s)||!(s instanceof Map)&&$u()in s)}function Qa(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Lr(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function db(s,a,l,c){const f=Se();return Lr(f,Fo(),a)&&(Vt(),xn(dn(),f,s,a,l,c)),db}function Gu(s,a,l,c,f,g){const E=function mo(s,a,l,c){const f=Lr(s,a,l);return Lr(s,a+1,c)||f}(s,function Gi(){return ot.lFrame.bindingIndex}(),l,f);return zi(2),E?a+ge(l)+c+ge(f)+g:kt}function Vl(s,a,l,c,f,g,b,E){const I=Se(),M=Vt(),N=s+22,V=M.firstCreatePass?function Wt(s,a,l,c,f,g,b,E,I){const M=a.consts,N=Hu(a,s,4,b||null,yi(M,E));qp(a,l,N,yi(M,I)),Zd(a,N);const V=N.tViews=eb(2,N,c,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M);return null!==a.queries&&(a.queries.template(a,N),V.queries=a.queries.embeddedTView(N)),N}(N,M,I,a,l,c,f,g,b):M.data[N];vi(V,!1);const Q=I[11].createComment("");bv(M,I,Q,V),In(Q,I),u_(I,I[N]=vC(Q,I,Q,V)),eo(V)&&r_(M,I,V),null!=b&&$p(I,V,E)}function __(s){return function io(s,a){return s[a]}(function uu(){return ot.lFrame.contextLView}(),22+s)}function vb(s,a,l){const c=Se();return Lr(c,Fo(),a)&&Fr(Vt(),dn(),c,s,a,c[11],l,!1),vb}function ud(s,a,l,c,f){const b=f?"class":"style";EC(s,l,a.inputs[b],b,c)}function Rn(s,a,l,c){const f=Se(),g=Vt(),b=22+s,E=f[11],I=f[b]=mv(E,a,function gu(){return ot.lFrame.currentNamespace}()),M=g.firstCreatePass?function AC(s,a,l,c,f,g,b){const E=a.consts,M=Hu(a,s,2,f,yi(E,g));return qp(a,l,M,yi(E,b)),null!==M.attrs&&p_(M,M.attrs,!1),null!==M.mergedAttrs&&p_(M,M.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,M),M}(b,g,f,0,a,l,c):g.data[b];vi(M,!0);const N=M.mergedAttrs;null!==N&&Bo(E,I,N);const V=M.classes;null!==V&&Dv(E,I,V);const Q=M.styles;return null!==Q&&Iv(E,I,Q),64!=(64&M.flags)&&bv(g,f,I,M),0===function bc(){return ot.lFrame.elementDepthCount}()&&In(I,f),function au(){ot.lFrame.elementDepthCount++}(),eo(M)&&(r_(g,f,M),Xv(g,M,f)),null!==c&&$p(f,M),Rn}function Bt(){let s=Pn();bl()?Ea():(s=s.parent,vi(s,!1));const a=s;!function Ro(){ot.lFrame.elementDepthCount--}();const l=Vt();return l.firstCreatePass&&(Zd(l,s),fl(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Qd(s){return 0!=(16&s.flags)}(a)&&ud(l,a,Se(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function vg(s){return 0!=(32&s.flags)}(a)&&ud(l,a,Se(),a.stylesWithoutHost,!1),Bt}function li(s,a,l,c){return Rn(s,a,l,c),Bt(),li}function Uh(s,a,l){const c=Se(),f=Vt(),g=s+22,b=f.firstCreatePass?function $A(s,a,l,c,f){const g=a.consts,b=yi(g,c),E=Hu(a,s,8,"ng-container",b);return null!==b&&p_(E,b,!0),qp(a,l,E,yi(g,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(g,f,c,a,l):f.data[g];vi(b,!0);const E=c[g]=c[11].createComment("");return bv(f,c,E,b),In(E,c),eo(b)&&(r_(f,c,b),Xv(f,b,c)),null!=l&&$p(c,b),Uh}function Qi(){let s=Pn();const a=Vt();return bl()?Ea():(s=s.parent,vi(s,!1)),a.firstCreatePass&&(Zd(a,s),fl(s)&&a.queries.elementEnd(s)),Qi}function xC(){return Se()}function bb(s){return!!s&&"function"==typeof s.then}function wb(s){return!!s&&"function"==typeof s.subscribe}const zu=wb;function em(s,a,l,c){const f=Se(),g=Vt(),b=Pn();return function Eb(s,a,l,c,f,g,b,E){const I=eo(c),N=s.firstCreatePass&&sb(s),V=a[8],Q=h_(a);let ie=!0;if(3&c.type||E){const et=Jn(c,a),ut=E?E(et):et,Tt=Q.length,Oe=E?rn=>E(Bn(rn[c.index])):c.index;let wt=null;if(!E&&I&&(wt=function GA(s,a,l,c){const f=s.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const b=f[g];if(b===l&&f[g+1]===c){const E=a[7],I=f[g+2];return E.length>I?E[I]:null}"string"==typeof b&&(g+=2)}return null}(s,a,f,c.index)),null!==wt)(wt.__ngLastListenerFn__||wt).__ngNextListenerFn__=g,wt.__ngLastListenerFn__=g,ie=!1;else{g=RC(c,a,V,g,!1);const rn=l.listen(ut,f,g);Q.push(g,rn),N&&N.push(f,Oe,Tt,Tt+1)}}else g=RC(c,a,V,g,!1);const De=c.outputs;let Le;if(ie&&null!==De&&(Le=De[f])){const et=Le.length;if(et)for(let ut=0;ut<et;ut+=2){const Kn=a[Le[ut]][Le[ut+1]].subscribe(g),yf=Q.length;Q.push(g,Kn),N&&N.push(f,c.index,yf,-(yf+1))}}}(g,f,f[11],b,s,a,0,c),em}function kC(s,a,l,c){try{return!1!==l(c)}catch(f){return f_(s,f),!1}}function RC(s,a,l,c,f){return function g(b){if(b===Function)return c;rb(2&s.flags?wr(s.index,a):a);let I=kC(a,0,c,b),M=g.__ngNextListenerFn__;for(;M;)I=kC(a,0,M,b)&&I,M=M.__ngNextListenerFn__;return f&&!1===I&&(b.preventDefault(),b.returnValue=!1),I}}function NC(s=1){return function Ic(s){return(ot.lFrame.contextLView=function mu(s,a){for(;s>0;)a=a[15],s--;return a}(s,ot.lFrame.contextLView))[8]}(s)}function OC(s,a){let l=null;const c=function zS(s){const a=s.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(s);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===c?OE(s,g,!0):Tv(c,g))return f}else l=f}return l}function qu(s){const a=Se()[16][6];if(!a.projection){const c=a.projection=Or(s?s.length:1,null),f=c.slice();let g=a.child;for(;null!==g;){const b=s?OC(g,s):0;null!==b&&(f[b]?f[b].projectionNext=g:c[b]=g,f[b]=g),g=g.next}}}function Kt(s,a=0,l){const c=Se(),f=Vt(),g=Hu(f,22+s,16,null,l||null);null===g.projection&&(g.projection=a),Ea(),64!=(64&g.flags)&&function AE(s,a,l){Cv(a[11],0,a,l,wE(s,l,a),DE(l.parent||a[6],l,a))}(f,c,g)}function Ib(s,a,l,c,f){const g=s[l+1],b=null===a;let E=c?Jo(g):Fl(g),I=!1;for(;0!==E&&(!1===I||b);){const N=s[E+1];UC(s[E],a)&&(I=!0,s[E+1]=c?Wg(N):$v(N)),E=c?Jo(N):Fl(N)}I&&(s[l+1]=c?$v(g):Wg(g))}function UC(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&co(s,a)>=0}function Sb(s,a,l){return Bs(s,a,l,!1),Sb}function dd(s,a){return Bs(s,a,null,!0),dd}function Bs(s,a,l,c){const f=Se(),g=Vt(),b=zi(2);g.firstUpdatePass&&function Mb(s,a,l,c){const f=s.data;if(null===f[l+1]){const g=f[er()],b=function b_(s,a){return a>=s.expandoStartIndex}(s,l);(function qC(s,a){return 0!=(s.flags&(a?16:32))})(g,c)&&null===a&&!b&&(a=!1),a=function $C(s,a,l,c){const f=function Ta(s){const a=ot.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let g=c?a.residualClasses:a.residualStyles;if(null===f)0===(c?a.classBindings:a.styleBindings)&&(l=tl(l=w_(null,s,a,l,c),a.attrs,c),g=null);else{const b=a.directiveStylingLast;if(-1===b||s[b]!==f)if(l=w_(f,s,a,l,c),null===g){let I=function KA(s,a,l){const c=l?a.classBindings:a.styleBindings;if(0!==Fl(c))return s[Jo(c)]}(s,a,c);void 0!==I&&Array.isArray(I)&&(I=w_(null,s,a,I[1],c),I=tl(I,a.attrs,c),function GC(s,a,l,c){s[Jo(l?a.classBindings:a.styleBindings)]=c}(s,a,c,I))}else g=function zC(s,a,l){let c;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)c=tl(c,s[g].hostAttrs,l);return tl(c,a.attrs,l)}(s,a,c)}return void 0!==g&&(c?a.residualClasses=g:a.residualStyles=g),l}(f,g,a,c),function zA(s,a,l,c,f,g){let b=g?a.classBindings:a.styleBindings,E=Jo(b),I=Fl(b);s[c]=l;let N,M=!1;if(Array.isArray(l)){const V=l;N=V[1],(null===N||co(V,N)>0)&&(M=!0)}else N=l;if(f)if(0!==I){const Q=Jo(s[E+1]);s[c+1]=qg(Q,E),0!==Q&&(s[Q+1]=kh(s[Q+1],c)),s[E+1]=function mA(s,a){return 131071&s|a<<17}(s[E+1],c)}else s[c+1]=qg(E,0),0!==E&&(s[E+1]=kh(s[E+1],c)),E=c;else s[c+1]=qg(I,0),0===E?E=c:s[I+1]=kh(s[I+1],c),I=c;M&&(s[c+1]=$v(s[c+1])),Ib(s,N,c,!0),Ib(s,N,c,!1),function VC(s,a,l,c,f){const g=f?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&co(g,a)>=0&&(l[c+1]=Wg(l[c+1]))}(a,N,s,c,g),b=qg(E,I),g?a.classBindings=b:a.styleBindings=b}(f,g,a,l,b,c)}}(g,s,b,c),a!==kt&&Lr(f,b,a)&&function E_(s,a,l,c,f,g,b,E){if(!(3&a.type))return;const I=s.data,M=I[E+1];C_(function Gv(s){return 1==(1&s)}(M)?zh(I,a,l,f,Fl(M),b):void 0)||(C_(g)||function aC(s){return 2==(2&s)}(M)&&(g=zh(I,null,l,f,E,b)),function jS(s,a,l,c,f){if(a)f?s.addClass(l,c):s.removeClass(l,c);else{let g=-1===c.indexOf("-")?void 0:pr.DashCase;null==f?s.removeStyle(l,c,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=pr.Important),s.setStyle(l,c,f,g))}}(c,b,yl(er(),l),f,g))}(g,g.data[er()],f,f[11],s,f[b+1]=function I_(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=me(Fs(s)))),s}(a,l),c,b)}function w_(s,a,l,c,f){let g=null;const b=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<b&&(g=a[E],c=tl(c,g.hostAttrs,f),g!==s);)E++;return null!==s&&(l.directiveStylingLast=E),c}function tl(s,a,l){const c=l?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const b=a[g];"number"==typeof b?f=b:f===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Pr(s,b,!!l||a[++g]))}return void 0===s?null:s}function zh(s,a,l,c,f,g){const b=null===a;let E;for(;f>0;){const I=s[f],M=Array.isArray(I),N=M?I[1]:I,V=null===N;let Q=l[f+1];Q===kt&&(Q=V?Mt:void 0);let ie=V?Oc(Q,c):N===c?Q:void 0;if(M&&!C_(ie)&&(ie=Oc(I,c)),C_(ie)&&(E=ie,b))return E;const De=s[f+1];f=b?Jo(De):Fl(De)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(E=Oc(I,c))}return E}function C_(s){return void 0!==s}function WC(s,a=""){const l=Se(),c=Vt(),f=s+22,g=c.firstCreatePass?Hu(c,f,1,a,null):c.data[f],b=l[f]=function pv(s,a){return s.createText(a)}(l[11],a);bv(c,l,b,g),vi(g,!1)}function xb(s){return qh("",s,""),xb}function qh(s,a,l){const c=Se(),f=function Fh(s,a,l,c){return Lr(s,Fo(),l)?a+ge(l)+c:kt}(c,s,a,l);return f!==kt&&Ya(c,er(),f),qh}function kb(s,a,l,c,f){const g=Se(),b=Gu(g,s,a,l,c,f);return b!==kt&&Ya(g,er(),b),kb}function Qh(s,a,l){const c=Se();return Lr(c,Fo(),a)&&Fr(Vt(),dn(),c,s,a,c[11],l,!0),Qh}const Hl=void 0;var Fn=["en",[["a","p"],["AM","PM"],Hl],[["AM","PM"],Hl,Hl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hl,"{1} 'at' {0}",Hl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function tM(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Mi={};function lm(s){const a=function Bb(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=Ku(a);if(l)return l;const c=a.split("-")[0];if(l=Ku(c),l)return l;if("en"===c)return Fn;throw new xe(701,!1)}function M_(s){return lm(s)[yt.PluralCase]}function Ku(s){return s in Mi||(Mi[s]=qe.ng&&qe.ng.common&&qe.ng.common.locales&&qe.ng.common.locales[s]),Mi[s]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const jl="en-US";let nI=jl;function $_(s,a,l,c,f){if(s=ne(s),Array.isArray(s))for(let g=0;g<s.length;g++)$_(s[g],a,l,c,f);else{const g=Vt(),b=Se();let E=Dh(s)?s:ne(s.provide),I=po(s);const M=Pn(),N=1048575&M.providerIndexes,V=M.directiveStart,Q=M.providerIndexes>>20;if(Dh(s)||!s.multi){const ie=new Aa(I,f,Bu),De=sf(E,a,f?N:N+Q,V);-1===De?(Eu(nr(M,b),g,E),G_(g,s,a.length),a.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(ie),b.push(ie)):(l[De]=ie,b[De]=ie)}else{const ie=sf(E,a,N+Q,V),De=sf(E,a,N,N+Q),Le=ie>=0&&l[ie],et=De>=0&&l[De];if(f&&!et||!f&&!Le){Eu(nr(M,b),g,E);const ut=function AM(s,a,l,c,f){const g=new Aa(s,l,Bu);return g.multi=[],g.index=a,g.componentProviders=0,rf(g,f,c&&!l),g}(f?Xb:Qb,l.length,f,c,I);!f&&et&&(l[De].providerFactory=ut),G_(g,s,a.length,0),a.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(ut),b.push(ut)}else G_(g,s,ie>-1?ie:De,rf(l[f?De:ie],I,!f&&c));!f&&c&&et&&l[De].componentProviders++}}}function G_(s,a,l,c){const f=Dh(a),g=function lP(s){return!!s.useClass}(a);if(f||g){const I=(g?ne(a.useClass):a).prototype.ngOnDestroy;if(I){const M=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const N=M.indexOf(l);-1===N?M.push(l,[c,I]):M[N+1].push(c,I)}else M.push(l,I)}}}function rf(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function sf(s,a,l,c){for(let f=l;f<c;f++)if(a[f]===s)return f;return-1}function Qb(s,a,l,c){return pm(this.multi,[])}function Xb(s,a,l,c){const f=this.multi;let g;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=Ms(l,l[1],this.providerFactory.index,c);g=E.slice(0,b),pm(f,g);for(let I=b;I<E.length;I++)g.push(E[I])}else g=[],pm(f,g);return g}function pm(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function af(s,a=[]){return l=>{l.providersResolver=(c,f)=>function DI(s,a,l){const c=Vt();if(c.firstCreatePass){const f=$i(s);$_(l,c.data,c.blueprint,f,!0),$_(a,c.data,c.blueprint,f,!1)}}(c,f?f(s):s,a)}}class Jb{resolveComponentFactory(a){throw function MM(s){const a=Error(`No component factory found for ${me(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let fd=(()=>{class s{}return s.NULL=new Jb,s})();class pd{}class e0{}class SI{}function AI(){return Xu(Pn(),Se())}function Xu(s,a){return new md(Jn(s,a))}let md=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=AI,s})();function t0(s){return s instanceof md?s.nativeElement:s}class Ju{}let r0=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function MI(){const s=Se(),l=wr(Pn().index,s);return(br(l)?l:s)[11]}(),s})(),kM=(()=>{class s{}return s.\u0275prov=nn({token:s,providedIn:"root",factory:()=>null}),s})();class mm{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const s0=new mm("14.0.6"),o0={};function ec(s,a,l,c,f=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&c.push(Bn(g)),ii(g))for(let E=10;E<g.length;E++){const I=g[E],M=I[1].firstChild;null!==M&&ec(I[1],I,M,c)}const b=l.type;if(8&b)ec(s,a,l.child,c);else if(32&b){const E=wh(l,a);let I;for(;I=E();)c.push(I)}else if(16&b){const E=wv(a,l);if(Array.isArray(E))c.push(...E);else{const I=qa(a[16]);ec(I[1],I,E,c,!0)}}l=f?l.projectionNext:l.next}return c}class gd{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return ec(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(ii(a)){const l=a[8],c=l?l.indexOf(this):-1;c>-1&&(Np(a,c),qo(l,c))}this._attachedToViewContainer=!1}vE(this._lView[1],this._lView)}onDestroy(a){i_(this._lView[1],this._lView,null,a)}markForCheck(){rb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function c_(s,a,l){const c=a[10];c.begin&&c.begin();try{jp(s,a,s.template,l)}catch(f){throw f_(a,f),f}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function PS(s,a){Xc(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=a}}class RM extends gd{constructor(a){super(a),this._view=a}detectChanges(){ib(this._view)}checkNoChanges(){}get context(){return null}}class a0 extends fd{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=$t(a);return new q_(l,this.ngModule)}}function xI(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}class z_{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,c){const f=this.injector.get(a,o0,c);return f!==o0||l===o0?f:this.parentInjector.get(a,l,c)}}class q_ extends SI{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function KS(s){return s.map(WS).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return xI(this.componentDef.inputs)}get outputs(){return xI(this.componentDef.outputs)}create(a,l,c,f){let g=(f=f||this.ngModule)instanceof Ti?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const b=g?new z_(a,g):a,E=b.get(Ju,null);if(null===E)throw new xe(407,!1);const I=b.get(kM,null),M=E.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",V=c?function rd(s,a,l){return s.selectRootElement(a,l===Xt.ShadowDom)}(M,c,this.componentDef.encapsulation):mv(E.createRenderer(null,this.componentDef),N,function l0(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(N)),Q=this.componentDef.onPush?288:272,ie=function RA(s,a){return{components:[],scheduler:s||_,clean:wC,playerHandler:a||null,flags:0}}(),De=eb(0,null,null,1,0,null,null,null,null,null),Le=Rh(null,De,ie,Q,null,null,E,M,I,b,null);let et,ut;El(Le);try{const Tt=function ab(s,a,l,c,f,g){const b=l[1];l[22]=s;const I=Hu(b,22,2,"#host",null),M=I.mergedAttrs=a.hostAttrs;null!==M&&(p_(I,M,!0),null!==s&&(Bo(f,s,M),null!==I.classes&&Dv(f,s,I.classes),null!==I.styles&&Iv(f,s,I.styles)));const N=c.createRenderer(s,a),V=Rh(l,Jv(a),null,a.onPush?32:16,l[22],I,c,N,g||null,null,null);return b.firstCreatePass&&(Eu(nr(I,l),b,a.type),ta(b,I),Oh(I,l.length,1)),u_(l,V),l[22]=V}(V,this.componentDef,Le,E,M);if(V)if(c)Bo(M,V,["ng-version",s0.full]);else{const{attrs:Oe,classes:wt}=function oP(s){const a=[],l=[];let c=1,f=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===f?""!==g&&a.push(g,s[++c]):8===f&&l.push(g);else{if(!Xo(f))break;f=g}c++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Oe&&Bo(M,V,Oe),wt&&wt.length>0&&Dv(M,V,wt.join(" "))}if(ut=xo(De,22),void 0!==l){const Oe=ut.projection=[];for(let wt=0;wt<this.ngContentSelectors.length;wt++){const rn=l[wt];Oe.push(null!=rn?Array.from(rn):null)}}et=function lb(s,a,l,c,f){const g=l[1],b=function zp(s,a,l){const c=Pn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),o_(s,c,a,nd(s,a,1,null),l));const f=Ms(a,s,c.directiveStart,c);In(f,a);const g=Jn(c,a);return g&&In(g,a),f}(g,l,a);if(c.components.push(b),s[8]=b,null!==f)for(const I of f)I(b,a);if(a.contentQueries){const I=Pn();a.contentQueries(1,b,I.directiveStart)}const E=Pn();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Ss(E.index),ea(l[1],E,0,E.directiveStart,E.directiveEnd,a),_C(a,b)),b}(Tt,this.componentDef,Le,ie,[NA]),t_(De,Le,null)}finally{pu()}return new nl(this.componentType,et,Xu(ut,Le),Le,ut)}}class nl extends class xM{}{constructor(a,l,c,f,g){super(),this.location=c,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new RM(f),this.componentType=a}get injector(){return new bi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function gm(s,a){return new kI(s,a??null)}class kI extends pd{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new a0(this);const c=Dr(a);this._bootstrapComponents=ce(c.bootstrap),this._r3Injector=qE(a,l,[{provide:pd,useValue:this},{provide:fd,useValue:this.componentFactoryResolver}],me(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(a)}get(a,l=Ka.THROW_IF_NOT_FOUND,c=bt.Default){return a===Ka||a===pd||a===$E?this:this._r3Injector.get(a,l,c)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class K_ extends e0{constructor(a){super(),this.moduleType=a}create(a){return new kI(this.moduleType,a)}}class u0 extends pd{constructor(a,l,c){super(),this.componentFactoryResolver=new a0(this),this.instance=null;const f=new Rv([...a,{provide:pd,useValue:this},{provide:fd,useValue:this.componentFactoryResolver}],l||P(),c,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function _d(s,a=null,l=null){return new u0(s,a,l).injector}function VI(s,a,l,c){return function p0(s,a,l,c,f,g){const b=a+l;return Lr(s,b,f)?function Xa(s,a,l){return s[a]=l}(s,b+1,g?c.call(g,f):c(f)):function yd(s,a){const l=s[a];return l===kt?void 0:l}(s,b+1)}(Se(),function ur(){const s=ot.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}(),s,a,l,c)}function bm(s){return a=>{setTimeout(s,void 0,a)}}const rl=class g0 extends d.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,c){let f=a,g=l||(()=>null),b=c;if(a&&"object"==typeof a){const I=a;f=I.next?.bind(I),g=I.error?.bind(I),b=I.complete?.bind(I)}this.__isAsync&&(g=bm(g),f&&(f=bm(f)),b&&(b=bm(b)));const E=super.subscribe({next:f,error:g,complete:b});return a instanceof re.w0&&a.add(E),E}};function qM(){return this._results[$u()]()}class wm{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=$u(),c=wm.prototype;c[l]||(c[l]=qM)}get changes(){return this._changes||(this._changes=new rl)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const c=this;c.dirty=!1;const f=Mn(a);(this._changesDetected=!function Jd(s,a,l){if(s.length!==a.length)return!1;for(let c=0;c<s.length;c++){let f=s[c],g=a[c];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(c._results,f,l))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Em=(()=>{class s{}return s.__NG_ELEMENT_ID__=WI,s})();const zI=Em,qI=class extends zI{constructor(a,l,c){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(a,l){const c=this._declarationTContainer.tViews,f=Rh(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null,l||null);f[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(f[19]=b.createEmbeddedView(c)),t_(c,f,a),new gd(f)}};function WI(){return Cm(Pn(),Se())}function Cm(s,a){return 4&s.type?new qI(a,s,Xu(s,a)):null}let ui=(()=>{class s{}return s.__NG_ELEMENT_ID__=Q_,s})();function Q_(){return _0(Pn(),Se())}const rc=ui,Im=class extends rc{constructor(a,l,c){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=c}get element(){return Xu(this._hostTNode,this._hostLView)}get injector(){return new bi(this._hostTNode,this._hostLView)}get parentInjector(){const a=wu(this._hostTNode,this._hostLView);if(ip(a)){const l=oo(a,this._hostLView),c=Cl(a);return new bi(l[1].data[c+8],l)}return new bi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=Hs(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,c){let f,g;"number"==typeof c?f=c:null!=c&&(f=c.index,g=c.injector);const b=a.createEmbeddedView(l||{},g);return this.insert(b,f),b}createComponent(a,l,c,f,g){const b=a&&!function Sl(s){return"function"==typeof s}(a);let E;if(b)E=l;else{const V=l||{};E=V.index,c=V.injector,f=V.projectableNodes,g=V.environmentInjector||V.ngModuleRef}const I=b?a:new q_($t(a)),M=c||this.parentInjector;if(!g&&null==I.ngModule){const Q=(b?M:this.parentInjector).get(Ti,null);Q&&(g=Q)}const N=I.create(M,f,void 0,g);return this.insert(N.hostView,E),N}insert(a,l){const c=a._lView,f=c[1];if(function ya(s){return ii(s[3])}(c)){const N=this.indexOf(a);if(-1!==N)this.detach(N);else{const V=c[3],Q=new Im(V,V[6],V[3]);Q.detach(Q.indexOf(a))}}const g=this._adjustIndex(l),b=this._lContainer;!function LS(s,a,l,c){const f=10+c,g=l.length;c>0&&(l[f-1][4]=a),c<g-10?(a[4]=l[f],Su(l,10+c,a)):(l.push(a),a[4]=null),a[3]=l;const b=a[17];null!==b&&l!==b&&function yE(s,a){const l=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===l?s[9]=[a]:l.push(a)}(b,a);const E=a[19];null!==E&&E.insertView(s),a[2]|=64}(f,c,b,g);const E=Ev(g,b),I=c[11],M=Qc(I,b[7]);return null!==M&&function gv(s,a,l,c,f,g){c[0]=f,c[6]=a,Xc(s,c,l,1,f,g)}(f,b[6],I,c,M,E),a.attachToViewContainerRef(),Su(zl(b),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=Hs(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),c=Np(this._lContainer,l);c&&(qo(zl(this._lContainer),l),vE(c[1],c))}detach(a){const l=this._adjustIndex(a,-1),c=Np(this._lContainer,l);return c&&null!=qo(zl(this._lContainer),l)?new gd(c):null}_adjustIndex(a,l=0){return a??this.length+l}};function Hs(s){return s[8]}function zl(s){return s[8]||(s[8]=[])}function _0(s,a){let l;const c=a[s.index];if(ii(c))l=c;else{let f;if(8&s.type)f=Bn(c);else{const g=a[11];f=g.createComment("");const b=Jn(s,a);Yc(g,Qc(g,b),f,function US(s,a){return s.nextSibling(a)}(g,b),!1)}a[s.index]=l=vC(c,a,f,s),u_(a,l)}return new Im(l,s,a)}class y0{constructor(a){this.queryList=a,this.matches=null}clone(){return new y0(this.queryList)}setDirty(){this.queryList.setDirty()}}class v0{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const c=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let g=0;g<c;g++){const b=l.getByIndex(g);f.push(this.queries[b.indexInDeclarationView].clone())}return new v0(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==YI(a,l).matches&&this.queries[l].setDirty()}}class X_{constructor(a,l,c=null){this.predicate=a,this.flags=l,this.read=c}}class b0{constructor(a=[]){this.queries=a}elementStart(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let c=0;c<this.length;c++){const f=null!==l?l.length:0,g=this.getByIndex(c).embeddedTView(a,f);g&&(g.indexInDeclarationView=c,null!==l?l.push(g):l=[g])}return null!==l?new b0(l):null}template(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class w0{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new w0(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const g=c[f];this.matchTNodeWithReadOption(a,l,WM(l,g)),this.matchTNodeWithReadOption(a,l,xa(l,a,g,!1,!1))}else c===Em?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,xa(l,a,c,!1,!1))}matchTNodeWithReadOption(a,l,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===md||f===ui||f===Em&&4&l.type)this.addMatch(l.index,-2);else{const g=xa(l,a,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,c)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function WM(s,a){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===a)return l[c+1];return null}function J_(s,a,l,c){return-1===l?function KM(s,a){return 11&s.type?Xu(s,a):4&s.type?Cm(s,a):null}(a,s):-2===l?function ey(s,a,l){return l===md?Xu(a,s):l===Em?Cm(a,s):l===ui?_0(a,s):void 0}(s,a,c):Ms(s,s[1],l,a)}function uf(s,a,l,c){const f=a[19].queries[c];if(null===f.matches){const g=s.data,b=l.matches,E=[];for(let I=0;I<b.length;I+=2){const M=b[I];E.push(M<0?null:J_(a,g[M],b[I+1],l.metadata.read))}f.matches=E}return f.matches}function Dm(s,a,l,c){const f=s.queries.getByIndex(l),g=f.matches;if(null!==g){const b=uf(s,a,f,l);for(let E=0;E<g.length;E+=2){const I=g[E];if(I>0)c.push(b[E/2]);else{const M=g[E+1],N=a[-I];for(let V=10;V<N.length;V++){const Q=N[V];Q[17]===Q[3]&&Dm(Q[1],Q,M,c)}if(null!==N[9]){const V=N[9];for(let Q=0;Q<V.length;Q++){const ie=V[Q];Dm(ie[1],ie,M,c)}}}}}return c}function E0(s){const a=Se(),l=Vt(),c=cu();wl(c+1);const f=YI(l,c);if(s.dirty&&ko(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const g=f.crossesNgTemplate?Dm(l,a,c,[]):uf(l,a,f,c);s.reset(g,t0),s.notifyOnChanges()}return!0}return!1}function C0(s,a,l){const c=Vt();c.firstCreatePass&&(T0(c,new X_(s,a,l),-1),2==(2&a)&&(c.staticViewQueries=!0)),bo(c,Se(),a)}function I0(s,a,l,c){const f=Vt();if(f.firstCreatePass){const g=Pn();T0(f,new X_(a,l,c),g.index),function ZM(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}bo(f,Se(),l)}function D0(){return function ZI(s,a){return s[19].queries[a].queryList}(Se(),cu())}function bo(s,a,l){const c=new wm(4==(4&l));i_(s,a,c,c.destroy),null===a[19]&&(a[19]=new v0),a[19].queries.push(new y0(c))}function T0(s,a,l){null===s.queries&&(s.queries=new b0),s.queries.track(new w0(a,l))}function YI(s,a){return s.queries.getByIndex(a)}function df(s){const a=$t(s)||Dn(s)||Qn(s);return null!==a&&a.standalone}function ry(...s){}const N0=new Yt("Application Initializer");let Sm=(()=>{class s{constructor(l){this.appInits=l,this.resolve=ry,this.reject=ry,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(bb(g))l.push(g);else if(zu(g)){const b=new Promise((E,I)=>{g.subscribe({complete:E,error:I})});l.push(b)}}Promise.all(l).then(()=>{c()}).catch(f=>{this.reject(f)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(qn(N0,8))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const O0=new Yt("AppId",{providedIn:"root",factory:function pf(){return`${iy()}${iy()}${iy()}`}});function iy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uD=new Yt("Platform Initializer"),gx=new Yt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),P0=new Yt("appBootstrapListener"),cD=new Yt("AnimationModuleType");let yx=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const sy=new Yt("LocaleId",{providedIn:"root",factory:()=>ho(sy,bt.Optional|bt.SkipSelf)||function vx(){return typeof $localize<"u"&&$localize.locale||jl}()}),dD=new Yt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class wx{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Ex=(()=>{class s{compileModuleSync(l){return new K_(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),g=ce(Dr(l).declarations).reduce((b,E)=>{const I=$t(E);return I&&b.push(new q_(I)),b},[]);return new wx(c,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const mf=(()=>Promise.resolve(0))();function ly(s){typeof Zone>"u"?mf.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ci{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rl(!1),this.onMicrotaskEmpty=new rl(!1),this.onStable=new rl(!1),this.onError=new rl(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&l,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function fD(){let s=qe.requestAnimationFrame,a=qe.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function bd(s){const a=()=>{!function uy(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(qe,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,pD(s),s.isCheckStableRunning=!0,gf(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),pD(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,f,g,b,E)=>{try{return Tx(s),l.invokeTask(f,g,b,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),cy(s)}},onInvoke:(l,c,f,g,b,E,I)=>{try{return Tx(s),l.invoke(f,g,b,E,I)}finally{s.shouldCoalesceRunChangeDetection&&a(),cy(s)}},onHasTask:(l,c,f,g)=>{l.hasTask(f,g),c===f&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,pD(s),gf(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,c,f,g)=>(l.handleError(f,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ci.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(ci.isInAngularZone())throw new xe(909,!1)}run(a,l,c){return this._inner.run(a,l,c)}runTask(a,l,c,f){const g=this._inner,b=g.scheduleEventTask("NgZoneEvent: "+f,a,Dx,ry,ry);try{return g.runTask(b,l,c)}finally{g.cancelTask(b)}}runGuarded(a,l,c){return this._inner.runGuarded(a,l,c)}runOutsideAngular(a){return this._outer.run(a)}}const Dx={};function gf(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function pD(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Tx(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function cy(s){s._nesting--,gf(s)}class Sx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rl,this.onMicrotaskEmpty=new rl,this.onStable=new rl,this.onError=new rl}run(a,l,c){return a.apply(l,c)}runGuarded(a,l,c){return a.apply(l,c)}runOutsideAngular(a){return a()}runTask(a,l,c,f){return a.apply(l,c)}}const mD=new Yt(""),Ax=new Yt("");let _D,Am=(()=>{class s{constructor(l,c,f){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,_D||(function KP(s){_D=s}(f),f.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ci.assertNotInAngularZone(),ly(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ly(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,f){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==g),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(qn(ci),qn(gD),qn(Ax))},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})(),gD=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return _D?.findTestabilityInTree(this,l,c)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),wd=null;const Mx=new Yt("AllowMultipleToken"),yD=new Yt("PlatformDestroyListeners");class QP{constructor(a,l){this.name=a,this.token=l}}function Rx(s,a,l=[]){const c=`Platform: ${a}`,f=new Yt(c);return(g=[])=>{let b=vD();if(!b||b.injector.get(Mx,!1)){const E=[...l,...g,{provide:f,useValue:!0}];s?s(E):function XP(s){if(wd&&!wd.get(Mx,!1))throw new xe(400,!1);wd=s;const a=s.get(Ox);(function kx(s){const a=s.get(uD,null);a&&a.forEach(l=>l())})(s)}(function Nx(s=[],a){return Ka.create({name:a,providers:[{provide:GE,useValue:"platform"},{provide:yD,useValue:new Set([()=>wd=null])},...s]})}(E,c))}return function e1(s){const a=vD();if(!a)throw new xe(401,!1);return a}()}}function vD(){return wd?.get(Ox)??null}let Ox=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const f=function t1(s,a){let l;return l="noop"===s?new Sx:("zone.js"===s?void 0:s)||new ci(a),l}(c?.ngZone,function Px(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:ci,useValue:f}];return f.run(()=>{const b=Ka.create({providers:g,parent:this.injector,name:l.moduleType.name}),E=l.create(b),I=E.injector.get(Ou,null);if(!I)throw new xe(402,!1);return f.runOutsideAngular(()=>{const M=f.onError.subscribe({next:N=>{I.handleError(N)}});E.onDestroy(()=>{L0(this._modules,E),M.unsubscribe()})}),function Fx(s,a,l){try{const c=l();return bb(c)?c.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):c}catch(c){throw a.runOutsideAngular(()=>s.handleError(c)),c}}(I,f,()=>{const M=E.injector.get(Sm);return M.runInitializers(),M.donePromise.then(()=>(function rI(s){Gt(s,"Expected localeId to be defined"),"string"==typeof s&&(nI=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(sy,jl)||jl),this._moduleDoBootstrap(E),E))})})}bootstrapModule(l,c=[]){const f=Lx({},c);return function xx(s,a,l){const c=new K_(l);return Promise.resolve(c)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const c=l.injector.get(F0);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new xe(403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(yD,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(qn(Ka))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Lx(s,a){return Array.isArray(a)?a.reduce(Lx,s):{...s,...a}}let F0=(()=>{class s{constructor(l,c,f){this._zone=l,this._injector=c,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new L.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),b=new L.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{ci.assertNotInAngularZone(),ly(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{ci.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),M.unsubscribe()}});this.isStable=(0,pe.T)(g,b.pipe((0,le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,c){const f=l instanceof SI;if(!this._injector.get(Sm).done)throw!f&&df(l),new xe(405,false);let b;b=f?l:this._injector.get(fd).resolveComponentFactory(l),this.componentTypes.push(b.componentType);const E=function YP(s){return s.isBoundToModule}(b)?void 0:this._injector.get(pd),M=b.create(Ka.NULL,[],c||b.selector,E),N=M.location.nativeElement,V=M.injector.get(mD,null);return V?.registerApplication(N),M.onDestroy(()=>{this.detachView(M.hostView),L0(this.components,M),V?.unregisterApplication(N)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new xe(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;L0(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(P0,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>L0(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new xe(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(qn(ci),qn(Ka),qn(Ou))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function L0(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}let Ux=!0,Bx=!1;function r1(){return Bx=!0,Ux}function s1(){if(Bx)throw new Error("Cannot enable prod mode after platform setup.");Ux=!1}let o1=(()=>{class s{}return s.__NG_ELEMENT_ID__=a1,s})();function a1(s){return function l1(s,a,l){if(pl(s)&&!l){const c=wr(s.index,a);return new gd(c,c)}return 47&s.type?new gd(a[16],a):null}(Pn(),Se(),16==(16&s))}class Gx{constructor(){}supports(a){return Yp(a)}create(a){return new p1(a)}}const f1=(s,a)=>a;class p1{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||f1}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,c=this._removalsHead,f=0,g=null;for(;l||c;){const b=!c||l&&l.currentIndex<Wx(c,f,g)?l:c,E=Wx(b,f,g),I=b.currentIndex;if(b===c)f--,c=c._nextRemoved;else if(l=l._next,null==b.previousIndex)f++;else{g||(g=[]);const M=E-f,N=I-f;if(M!=N){for(let Q=0;Q<M;Q++){const ie=Q<g.length?g[Q]:g[Q]=0,De=ie+Q;N<=De&&De<M&&(g[Q]=ie+1)}g[b.previousIndex]=N-M}}E!==I&&a(b,E,I)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Yp(a))throw new xe(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,b,l=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)g=a[E],b=this._trackByFn(E,g),null!==l&&Object.is(l.trackById,b)?(c&&(l=this._verifyReinsertion(l,g,b,E)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,b,E),c=!0),l=l._next}else f=0,function jA(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[$u()]();let c;for(;!(c=l.next()).done;)a(c.value)}}(a,E=>{b=this._trackByFn(f,E),null!==l&&Object.is(l.trackById,b)?(c&&(l=this._verifyReinsertion(l,E,b,f)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,b,f),c=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,c,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,f)):a=this._addAfter(new m1(l,c),g,f),a}_verifyReinsertion(a,l,c,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,l,c),this._addToMoves(a,c),a}_moveAfter(a,l,c){return this._unlink(a),this._insertAfter(a,l,c),this._addToMoves(a,c),a}_addAfter(a,l,c){return this._insertAfter(a,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,c){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new qx),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,c=a._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qx),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class m1{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zx{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const l=a._prevDup,c=a._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class qx{constructor(){this.map=new Map}put(a){const l=a.trackById;let c=this.map.get(l);c||(c=new zx,this.map.set(l,c)),c.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Wx(s,a,l){const c=s.previousIndex;if(null===c)return c;let f=0;return l&&c<l.length&&(f=l[c]),c+a+f}class Kx{constructor(){}supports(a){return a instanceof Map||Qa(a)}create(){return new g1}}class g1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Qa(a)))throw new xe(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,c);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const c=a._prev;return l._next=a,l._prev=c,a._prev=l,c&&(c._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const g=f._prev,b=f._next;return g&&(g._next=b),b&&(b._prev=g),f._next=null,f._prev=null,f}const c=new _1(a);return this._records.set(a,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(c=>l(a[c],c))}}class _1{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Zx(){return new ID([new Gx])}let ID=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Zx()),deps:[[s,new ht,new Ae]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(null!=c)return c;throw new xe(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Zx}),s})();function Yx(){return new DD([new Kx])}let DD=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Yx()),deps:[[s,new ht,new Ae]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(c)return c;throw new xe(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Yx}),s})();const b1=Rx(null,"core",[]);let w1=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(qn(F0))},s.\u0275mod=ft({type:s}),s.\u0275inj=Jt({}),s})();function E1(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(pt,Re,U)=>{U.d(Re,{Z:()=>xe});var d=U(2090),re=U(4859),L=U(9681),pe=U(1877);class le{constructor(ge,be){this._delegate=ge,this.firebase=be,(0,L._addComponent)(ge,new re.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(ge,be=L._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const it=this._delegate.container.getProvider(ge);return!it.isInitialized()&&"EXPLICIT"===(null===(Je=it.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&it.initialize(),it.getImmediate({identifier:be})}_removeServiceInstance(ge,be=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(be)}_addComponent(ge){(0,L._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,L._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ve(){const $e=function me($e){const ge={},be={__esModule:!0,initializeApp:function ke(ze,q={}){const Ie=L.initializeApp(ze,q);if((0,d.r3)(ge,Ie.name))return ge[Ie.name];const J=new $e(Ie,be);return ge[Ie.name]=J,J},app:it,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Te(ze){const q=ze.name,Ie=q.replace("-compat","");if(L._registerComponent(ze)&&"PUBLIC"===ze.type){const J=(oe=it())=>{if("function"!=typeof oe[Ie])throw ae.create("invalid-app-argument",{appName:q});return oe[Ie]()};void 0!==ze.serviceProps&&(0,d.ZB)(J,ze.serviceProps),be[Ie]=J,$e.prototype[Ie]=function(...oe){return this._getService.bind(this,q).apply(this,ze.multipleInstances?oe:[])}}return"PUBLIC"===ze.type?be[Ie]:null},removeApp:function Je(ze){delete ge[ze]},useAsService:function je(ze,q){return"serverAuth"===q?null:q},modularAPIs:L}};function it(ze){if(!(0,d.r3)(ge,ze=ze||L._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:ze});return ge[ze]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ce(){return Object.keys(ge).map(ze=>ge[ze])}}),it.App=$e,be}(le);return $e.INTERNAL=Object.assign(Object.assign({},$e.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function ge(be){(0,d.ZB)($e,be)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),$e}(),G=new pe.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const $e=self.firebase.SDK_VERSION;$e&&$e.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=z;!function Me($e){(0,L.registerVersion)("@firebase/app-compat","0.1.29",$e)}()},9681:(pt,Re,U)=>{U.r(Re),U.d(Re,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>us,_DEFAULT_ENTRY_NAME:()=>Gt,_addComponent:()=>mn,_addOrOverwriteComponent:()=>nn,_apps:()=>cn,_clearComponents:()=>ls,_components:()=>Hn,_getProvider:()=>Jt,_registerComponent:()=>Br,_removeServiceInstance:()=>zt,deleteApp:()=>bt,getApp:()=>ti,getApps:()=>Ui,initializeApp:()=>Qs,onLog:()=>$n,registerVersion:()=>jn,setLogLevel:()=>cs});var d=U(5861),re=U(4859),L=U(1877),pe=U(2090),le=U(8766);class ye{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map(Y=>{if(function ae(j){return"VERSION"===j.getComponent()?.type}(Y)){const Ne=Y.getImmediate();return`${Ne.library}/${Ne.version}`}return null}).filter(Y=>Y).join(" ")}}const me="@firebase/app",z=new L.Yd("@firebase/app"),Gt="[DEFAULT]",Xe={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,Hn=new Map;function mn(j,K){try{j.container.addComponent(K)}catch(Y){z.debug(`Component ${K.name} failed to register with FirebaseApp ${j.name}`,Y)}}function nn(j,K){j.container.addOrOverwriteComponent(K)}function Br(j){const K=j.name;if(Hn.has(K))return z.debug(`There were multiple attempts to register component ${K}.`),!1;Hn.set(K,j);for(const Y of cn.values())mn(Y,j);return!0}function Jt(j,K){const Y=j.container.getProvider("heartbeat").getImmediate({optional:!0});return Y&&Y.triggerHeartbeat(),j.container.getProvider(K)}function zt(j,K,Y=Gt){Jt(j,K).clearInstance(Y)}function ls(){Hn.clear()}const Rr=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ei{constructor(K,Y,Ne){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},Y),this._name=Y.name,this._automaticDataCollectionEnabled=Y.automaticDataCollectionEnabled,this._container=Ne,this.container.addComponent(new re.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}const us="9.9.0";function Qs(j,K={}){"object"!=typeof K&&(K={name:K});const Y=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},K),Ne=Y.name;if("string"!=typeof Ne||!Ne)throw Rr.create("bad-app-name",{appName:String(Ne)});const We=cn.get(Ne);if(We){if((0,pe.vZ)(j,We.options)&&(0,pe.vZ)(Y,We.config))return We;throw Rr.create("duplicate-app",{appName:Ne})}const ft=new re.H0(Ne);for(const en of Hn.values())ft.addComponent(en);const vn=new ei(j,Y,ft);return cn.set(Ne,vn),vn}function ti(j=Gt){const K=cn.get(j);if(!K)throw Rr.create("no-app",{appName:j});return K}function Ui(){return Array.from(cn.values())}function bt(j){return ni.apply(this,arguments)}function ni(){return(ni=(0,d.Z)(function*(j){const K=j.name;cn.has(K)&&(cn.delete(K),yield Promise.all(j.container.getProviders().map(Y=>Y.delete())),j.isDeleted=!0)})).apply(this,arguments)}function jn(j,K,Y){var Ne;let We=null!==(Ne=Xe[j])&&void 0!==Ne?Ne:j;Y&&(We+=`-${Y}`);const ft=We.match(/\s|\//),vn=K.match(/\s|\//);if(ft||vn){const en=[`Unable to register library "${We}" with version "${K}":`];return ft&&en.push(`library name "${We}" contains illegal characters (whitespace or "/")`),ft&&vn&&en.push("and"),vn&&en.push(`version name "${K}" contains illegal characters (whitespace or "/")`),void z.warn(en.join(" "))}Br(new re.wA(`${We}-version`,()=>({library:We,version:K}),"VERSION"))}function $n(j,K){if(null!==j&&"function"!=typeof j)throw Rr.create("invalid-log-argument");(0,L.Am)(j,K)}function cs(j){(0,L.Ub)(j)}const Yn="firebase-heartbeat-store";let fi=null;function To(){return fi||(fi=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(j,K)=>{0===K&&j.createObjectStore(Yn)}}).catch(j=>{throw Rr.create("storage-open",{originalErrorMessage:j.message})})),fi}function qe(){return(qe=(0,d.Z)(function*(j){var K;try{return(yield To()).transaction(Yn).objectStore(Yn).get(ar(j))}catch(Y){throw Rr.create("storage-get",{originalErrorMessage:null===(K=Y)||void 0===K?void 0:K.message})}})).apply(this,arguments)}function It(j,K){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,d.Z)(function*(j,K){var Y;try{const We=(yield To()).transaction(Yn,"readwrite");return yield We.objectStore(Yn).put(K,ar(j)),We.done}catch(Ne){throw Rr.create("storage-set",{originalErrorMessage:null===(Y=Ne)||void 0===Y?void 0:Y.message})}})).apply(this,arguments)}function ar(j){return`${j.name}!${j.options.appId}`}class lr{constructor(K){this.container=K,this._heartbeatsCache=null;const Y=this.container.getProvider("app").getImmediate();this._storage=new ri(Y),this._heartbeatsCachePromise=this._storage.read().then(Ne=>(this._heartbeatsCache=Ne,Ne))}triggerHeartbeat(){var K=this;return(0,d.Z)(function*(){const Ne=K.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),We=Bi();if(null===K._heartbeatsCache&&(K._heartbeatsCache=yield K._heartbeatsCachePromise),K._heartbeatsCache.lastSentHeartbeatDate!==We&&!K._heartbeatsCache.heartbeats.some(ft=>ft.date===We))return K._heartbeatsCache.heartbeats.push({date:We,agent:Ne}),K._heartbeatsCache.heartbeats=K._heartbeatsCache.heartbeats.filter(ft=>{const vn=new Date(ft.date).valueOf();return Date.now()-vn<=2592e6}),K._storage.overwrite(K._heartbeatsCache)})()}getHeartbeatsHeader(){var K=this;return(0,d.Z)(function*(){if(null===K._heartbeatsCache&&(yield K._heartbeatsCachePromise),null===K._heartbeatsCache||0===K._heartbeatsCache.heartbeats.length)return"";const Y=Bi(),{heartbeatsToSend:Ne,unsentEntries:We}=function an(j,K=1024){const Y=[];let Ne=j.slice();for(const We of j){const ft=Y.find(vn=>vn.agent===We.agent);if(ft){if(ft.dates.push(We.date),$(Y)>K){ft.dates.pop();break}}else if(Y.push({agent:We.agent,dates:[We.date]}),$(Y)>K){Y.pop();break}Ne=Ne.slice(1)}return{heartbeatsToSend:Y,unsentEntries:Ne}}(K._heartbeatsCache.heartbeats),ft=(0,pe.L)(JSON.stringify({version:2,heartbeats:Ne}));return K._heartbeatsCache.lastSentHeartbeatDate=Y,We.length>0?(K._heartbeatsCache.heartbeats=We,yield K._storage.overwrite(K._heartbeatsCache)):(K._heartbeatsCache.heartbeats=[],K._storage.overwrite(K._heartbeatsCache)),ft})()}}function Bi(){return(new Date).toISOString().substring(0,10)}class ri{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,pe.hl)()&&(0,pe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var K=this;return(0,d.Z)(function*(){return(yield K._canUseIndexedDBPromise)&&(yield function Xt(j){return qe.apply(this,arguments)}(K.app))||{heartbeats:[]}})()}overwrite(K){var Y=this;return(0,d.Z)(function*(){var Ne;if(yield Y._canUseIndexedDBPromise){const ft=yield Y.read();return It(Y.app,{lastSentHeartbeatDate:null!==(Ne=K.lastSentHeartbeatDate)&&void 0!==Ne?Ne:ft.lastSentHeartbeatDate,heartbeats:K.heartbeats})}})()}add(K){var Y=this;return(0,d.Z)(function*(){var Ne;if(yield Y._canUseIndexedDBPromise){const ft=yield Y.read();return It(Y.app,{lastSentHeartbeatDate:null!==(Ne=K.lastSentHeartbeatDate)&&void 0!==Ne?Ne:ft.lastSentHeartbeatDate,heartbeats:[...ft.heartbeats,...K.heartbeats]})}})()}}function $(j){return(0,pe.L)(JSON.stringify({version:2,heartbeats:j})).length}!function W(j){Br(new re.wA("platform-logger",K=>new ye(K),"PRIVATE")),Br(new re.wA("heartbeat",K=>new lr(K),"PRIVATE")),jn(me,"0.7.28",j),jn(me,"0.7.28","esm2017"),jn("fire-js","")}("")},4859:(pt,Re,U)=>{U.d(Re,{H0:()=>me,wA:()=>L,zt:()=>le});var d=U(5861),re=U(2090);class L{constructor(z,G,ne){this.name=z,this.instanceFactory=G,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const pe="[DEFAULT]";class le{constructor(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){const ne=new re.BH;if(this.instancesDeferred.set(G,ne),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:G});Ge&&ne.resolve(Ge)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(z){var G;const ne=this.normalizeInstanceIdentifier(z?.identifier),Ge=null!==(G=z?.optional)&&void 0!==G&&G;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Me){if(Ge)return null;throw Me}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function ae(ve){return"EAGER"===ve.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:pe})}catch{}for(const[G,ne]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(G);try{const Me=this.getOrInitializeService({instanceIdentifier:Ge});ne.resolve(Me)}catch{}}}}clearInstance(z=pe){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,d.Z)(function*(){const G=Array.from(z.instances.values());yield Promise.all([...G.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...G.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=pe){return this.instances.has(z)}getOptions(z=pe){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:G={}}=z,ne=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ne,options:G});for(const[Me,xe]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Me)&&xe.resolve(Ge);return Ge}onInit(z,G){var ne;const Ge=this.normalizeInstanceIdentifier(G),Me=null!==(ne=this.onInitCallbacks.get(Ge))&&void 0!==ne?ne:new Set;Me.add(z),this.onInitCallbacks.set(Ge,Me);const xe=this.instances.get(Ge);return xe&&z(xe,Ge),()=>{Me.delete(z)}}invokeOnInitCallbacks(z,G){const ne=this.onInitCallbacks.get(G);if(ne)for(const Ge of ne)try{Ge(z,G)}catch{}}getOrInitializeService({instanceIdentifier:z,options:G={}}){let ne=this.instances.get(z);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=z,ve===pe?void 0:ve),options:G}),this.instances.set(z,ne),this.instancesOptions.set(z,G),this.invokeOnInitCallbacks(ne,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ne)}catch{}var ve;return ne||null}normalizeInstanceIdentifier(z=pe){return this.component?this.component.multipleInstances?z:pe:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const G=this.getProvider(z.name);if(G.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);G.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const G=new le(z,this);return this.providers.set(z,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,Re,U)=>{U.d(Re,{Am:()=>ve,Ub:()=>me,Yd:()=>ae,in:()=>re});const d=[];var re=(()=>{return(z=re||(re={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",re;var z})();const L={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},pe=re.INFO,le={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},ye=(z,G,...ne)=>{if(G<z.logLevel)return;const Ge=(new Date).toISOString(),Me=le[G];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Me](`[${Ge}]  ${z.name}:`,...ne)};class ae{constructor(G){this.name=G,this._logLevel=pe,this._logHandler=ye,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in re))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...G),this._logHandler(this,re.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...G),this._logHandler(this,re.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,re.INFO,...G),this._logHandler(this,re.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,re.WARN,...G),this._logHandler(this,re.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...G),this._logHandler(this,re.ERROR,...G)}}function me(z){d.forEach(G=>{G.setLogLevel(z)})}function ve(z,G){for(const ne of d){let Ge=null;G&&G.level&&(Ge=L[G.level]),ne.userLogHandler=null===z?null:(Me,xe,...$e)=>{const ge=$e.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch{return null}}).filter(be=>be).join(" ");xe>=(Ge??Me.logLevel)&&z({level:re[xe].toLowerCase(),message:ge,args:$e,type:Me.name})}}}},8766:(pt,Re,U)=>{U.d(Re,{Lj:()=>ke,X3:()=>it});var d=U(5861);let L,pe;const ae=new WeakMap,me=new WeakMap,ve=new WeakMap,z=new WeakMap,G=new WeakMap;let Me={get(q,Ie,J){if(q instanceof IDBTransaction){if("done"===Ie)return me.get(q);if("objectStoreNames"===Ie)return q.objectStoreNames||ve.get(q);if("store"===Ie)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return be(q[Ie])},set:(q,Ie,J)=>(q[Ie]=J,!0),has:(q,Ie)=>q instanceof IDBTransaction&&("done"===Ie||"store"===Ie)||Ie in q};function ge(q){return"function"==typeof q?function $e(q){return q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(q)?function(...Ie){return q.apply(Je(this),Ie),be(ae.get(this))}:function(...Ie){return be(q.apply(Je(this),Ie))}:function(Ie,...J){const oe=q.call(Je(this),Ie,...J);return ve.set(oe,Ie.sort?Ie.sort():[Ie]),be(oe)}}(q):(q instanceof IDBTransaction&&function Ge(q){if(me.has(q))return;const Ie=new Promise((J,oe)=>{const se=()=>{q.removeEventListener("complete",Ee),q.removeEventListener("error",fe),q.removeEventListener("abort",fe)},Ee=()=>{J(),se()},fe=()=>{oe(q.error||new DOMException("AbortError","AbortError")),se()};q.addEventListener("complete",Ee),q.addEventListener("error",fe),q.addEventListener("abort",fe)});me.set(q,Ie)}(q),((q,Ie)=>Ie.some(J=>q instanceof J))(q,function le(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(q,Me):q)}function be(q){if(q instanceof IDBRequest)return function ne(q){const Ie=new Promise((J,oe)=>{const se=()=>{q.removeEventListener("success",Ee),q.removeEventListener("error",fe)},Ee=()=>{J(be(q.result)),se()},fe=()=>{oe(q.error),se()};q.addEventListener("success",Ee),q.addEventListener("error",fe)});return Ie.then(J=>{J instanceof IDBCursor&&ae.set(J,q)}).catch(()=>{}),G.set(Ie,q),Ie}(q);if(z.has(q))return z.get(q);const Ie=ge(q);return Ie!==q&&(z.set(q,Ie),G.set(Ie,q)),Ie}const Je=q=>G.get(q);function it(q,Ie,{blocked:J,upgrade:oe,blocking:se,terminated:Ee}={}){const fe=indexedDB.open(q,Ie),Fe=be(fe);return oe&&fe.addEventListener("upgradeneeded",vt=>{oe(be(fe.result),vt.oldVersion,vt.newVersion,be(fe.transaction))}),J&&fe.addEventListener("blocked",()=>J()),Fe.then(vt=>{Ee&&vt.addEventListener("close",()=>Ee()),se&&vt.addEventListener("versionchange",()=>se())}).catch(()=>{}),Fe}function ke(q,{blocked:Ie}={}){const J=indexedDB.deleteDatabase(q);return Ie&&J.addEventListener("blocked",()=>Ie()),be(J).then(()=>{})}const Ce=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],je=new Map;function ze(q,Ie){if(!(q instanceof IDBDatabase)||Ie in q||"string"!=typeof Ie)return;if(je.get(Ie))return je.get(Ie);const J=Ie.replace(/FromIndex$/,""),oe=Ie!==J,se=Te.includes(J);if(!(J in(oe?IDBIndex:IDBObjectStore).prototype)||!se&&!Ce.includes(J))return;const Ee=function(){var fe=(0,d.Z)(function*(Fe,...vt){const Qt=this.transaction(Fe,se?"readwrite":"readonly");let Gt=Qt.store;return oe&&(Gt=Gt.index(vt.shift())),(yield Promise.all([Gt[J](...vt),se&&Qt.done]))[0]});return function(vt){return fe.apply(this,arguments)}}();return je.set(Ie,Ee),Ee}!function xe(q){Me=q(Me)}(q=>({...q,get:(Ie,J,oe)=>ze(Ie,J)||q.get(Ie,J,oe),has:(Ie,J)=>!!ze(Ie,J)||q.has(Ie,J)}))},5861:(pt,Re,U)=>{function d(L,pe,le,ye,ae,me,ve){try{var z=L[me](ve),G=z.value}catch(ne){return void le(ne)}z.done?pe(G):Promise.resolve(G).then(ye,ae)}function re(L){return function(){var pe=this,le=arguments;return new Promise(function(ye,ae){var me=L.apply(pe,le);function ve(G){d(me,ye,ae,ve,z,"next",G)}function z(G){d(me,ye,ae,ve,z,"throw",G)}ve(void 0)})}}U.d(Re,{Z:()=>re})}},pt=>{pt(pt.s=4881)}]);