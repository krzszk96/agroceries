"use strict";(self.webpackChunkagroceries=self.webpackChunkagroceries||[]).push([[179],{2011:(ft,xe,V)=>{V.d(xe,{Dh:()=>me,GT:()=>ye,cc:()=>Me,hO:()=>Ge,on:()=>z,pX:()=>le,xv:()=>ve});var u=V(4650),ie=V(127),L=V(5813);ft=V.hmd(ft);const pe=["ngOnDestroy"],le=(be,et,rt,Re={})=>new Proxy(be,{get:(Ee,Te)=>rt.runOutsideAngular(()=>{var je;if(be[Te])return!(null===(je=Re?.spy)||void 0===je)&&je.get&&Re.spy.get(Te,be[Te]),be[Te];if(pe.indexOf(Te)>-1)return()=>{};const ze=et.toPromise().then(q=>{const De=q&&q[Te];return"function"==typeof De?De.bind(q):De&&De.then?De.then(ee=>rt.run(()=>ee)):rt.run(()=>De)});return new Proxy(()=>{},{get:(q,De)=>ze[De],apply:(q,De,ee)=>ze.then(ae=>{var oe;const we=ae&&ae(...ee);return!(null===(oe=Re?.spy)||void 0===oe)&&oe.apply&&Re.spy.apply(Te,ee,we),we})})})}),ye=(be,et)=>{et.forEach(rt=>{Object.getOwnPropertyNames(rt.prototype||rt).forEach(Re=>{Object.defineProperty(be.prototype,Re,Object.getOwnPropertyDescriptor(rt.prototype||rt,Re))})})};class se{constructor(et){return et}}const me=new u.OlP("angularfire2.app.options"),ve=new u.OlP("angularfire2.app.name");function z(be,et,rt){const Ee="object"==typeof rt&&rt||{};Ee.name=Ee.name||"string"==typeof rt&&rt||"[DEFAULT]";const je=ie.Z.apps.filter(ze=>ze&&ze.name===Ee.name)[0]||et.runOutsideAngular(()=>ie.Z.initializeApp(be,Ee));try{JSON.stringify(be)!==JSON.stringify(je.options)&&G("error",`${je.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new se(je)}const G=(be,...et)=>{(0,u.X6Q)()&&typeof console<"u"&&console[be](...et)},ne={provide:se,useFactory:z,deps:[me,u.R0b,[new u.FiY,ve]]};let Ge=(()=>{class be{constructor(rt){ie.Z.registerVersion("angularfire",L.q4.full,"core"),ie.Z.registerVersion("angularfire",L.q4.full,"app-compat"),ie.Z.registerVersion("angular",u.q4F.full,rt.toString())}static initializeApp(rt,Re){return{ngModule:be,providers:[{provide:me,useValue:rt},{provide:ve,useValue:Re}]}}}return be.\u0275fac=function(rt){return new(rt||be)(u.LFG(u.Lbi))},be.\u0275mod=u.oAB({type:be}),be.\u0275inj=u.cJS({providers:[ne]}),be})();function Me(be,et,rt,Re,Ee){const[,Te,je]=globalThis.\u0275AngularfireInstanceCache.find(ze=>ze[0]===be)||[];if(Te)return function ke(be,et){try{return be.toString()===et.toString()}catch{return be===et}}(Ee,je)||(ge("error",`${et} was already initialized on the ${rt} Firebase App with different settings.${$e?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ee,was:je})),Te;{const ze=Re();return globalThis.\u0275AngularfireInstanceCache.push([be,ze,Ee]),ze}}const $e=!!ft.hot,ge=(be,...et)=>{(0,u.X6Q)()&&typeof console<"u"&&console[be](...et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ft,xe,V)=>{V.d(xe,{q4:()=>Mu,iC:()=>xc,fc:()=>xa,HU:()=>Ff,vb:()=>jo,JM:()=>Sa});var u=V(4650),ie=V(5867),L=V(5861),pe=V(9681),le=V(2090),ye=V(4859),se=V(1877),me=V(8766);const ve="@firebase/installations",z="0.5.12",ne=`w:${z}`,Ge="FIS_v2",et=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(T){return T instanceof le.ZR&&T.code.includes("request-failed")}function Re({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Ee(T){return{token:T.token,requestStatus:2,expiresIn:ae(T.expiresIn),creationTime:Date.now()}}function Te(T,S){return je.apply(this,arguments)}function je(){return(je=(0,L.Z)(function*(T,S){const H=(yield S.json()).error;return et.create("request-failed",{requestName:T,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function ze({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function q(T,{refreshToken:S}){const R=ze(T);return R.append("Authorization",function oe(T){return`${Ge} ${T}`}(S)),R}function De(T){return ee.apply(this,arguments)}function ee(){return(ee=(0,L.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function ae(T){return Number(T.replace("s","000"))}function we(T,S){return fe.apply(this,arguments)}function fe(){return(fe=(0,L.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:R}){const H=Re(T),te=ze(T),ue=S.getImmediate({optional:!0});if(ue){const Tt=yield ue.getHeartbeatsHeader();Tt&&te.append("x-firebase-client",Tt)}const Ye={method:"POST",headers:te,body:JSON.stringify({fid:R,authVersion:Ge,appId:T.appId,sdkVersion:ne})},ht=yield De(()=>fetch(H,Ye));if(ht.ok){const Tt=yield ht.json();return{fid:Tt.fid||R,registrationStatus:2,refreshToken:Tt.refreshToken,authToken:Ee(Tt.authToken)}}throw yield Te("Create Installation",ht)})).apply(this,arguments)}function Le(T){return new Promise(S=>{setTimeout(S,T)})}const Yt=/^[cdef][\w-]{21}$/;function Je(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const R=function un(T){return function yt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Yt.test(R)?R:""}catch{return""}}function jn(T){return`${T.appName}!${T.appId}`}const mn=new Map;function sn(T,S){const R=jn(T);zt(R,S),function os(T,S){const R=function Fi(){return!pr&&"BroadcastChannel"in self&&(pr=new BroadcastChannel("[Firebase] FID Change"),pr.onmessage=T=>{zt(T.data.key,T.data.fid)}),pr}();R&&R.postMessage({key:T,fid:S}),function or(){0===mn.size&&pr&&(pr.close(),pr=null)}()}(R,S)}function zt(T,S){const R=mn.get(T);if(R)for(const H of R)H(S)}let pr=null;const ar="firebase-installations-store";let Hr=null;function vt(){return Hr||(Hr=(0,me.X3)("firebase-installations-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(ar)}})),Hr}function lr(T,S){return $n.apply(this,arguments)}function $n(){return($n=(0,L.Z)(function*(T,S){const R=jn(T),te=(yield vt()).transaction(ar,"readwrite"),ue=te.objectStore(ar),Ae=yield ue.get(R);return yield ue.put(S,R),yield te.done,(!Ae||Ae.fid!==S.fid)&&sn(T,S.fid),S})).apply(this,arguments)}function Gn(T){return ls.apply(this,arguments)}function ls(){return(ls=(0,L.Z)(function*(T){const S=jn(T),H=(yield vt()).transaction(ar,"readwrite");yield H.objectStore(ar).delete(S),yield H.done})).apply(this,arguments)}function cs(T,S){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,L.Z)(function*(T,S){const R=jn(T),te=(yield vt()).transaction(ar,"readwrite"),ue=te.objectStore(ar),Ae=yield ue.get(R),Ye=S(Ae);return void 0===Ye?yield ue.delete(R):yield ue.put(Ye,R),yield te.done,Ye&&(!Ae||Ae.fid!==Ye.fid)&&sn(T,Ye.fid),Ye})).apply(this,arguments)}function Xn(T){return mr.apply(this,arguments)}function mr(){return(mr=(0,L.Z)(function*(T){let S;const R=yield cs(T.appConfig,H=>{const te=Eo(H),ue=Qt(T,te);return S=ue.registrationPromise,ue.installationEntry});return""===R.fid?{installationEntry:yield S}:{installationEntry:R,registrationPromise:S}})).apply(this,arguments)}function Eo(T){return gr(T||{fid:Je(),registrationStatus:0})}function Qt(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(et.create("app-offline"))};const R={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},H=function qe(T,S){return It.apply(this,arguments)}(T,R);return{installationEntry:R,registrationPromise:H}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:zi(T)}:{installationEntry:S}}function It(){return(It=(0,L.Z)(function*(T,S){try{const R=yield we(T,S);return lr(T.appConfig,R)}catch(R){throw rt(R)&&409===R.customData.serverCode?yield Gn(T.appConfig):yield lr(T.appConfig,{fid:S.fid,registrationStatus:0}),R}})).apply(this,arguments)}function zi(T){return li.apply(this,arguments)}function li(){return(li=(0,L.Z)(function*(T){let S=yield xt(T.appConfig);for(;1===S.registrationStatus;)yield Le(100),S=yield xt(T.appConfig);if(0===S.registrationStatus){const{installationEntry:R,registrationPromise:H}=yield Xn(T);return H||R}return S})).apply(this,arguments)}function xt(T){return cs(T,S=>{if(!S)throw et.create("installation-not-found");return gr(S)})}function gr(T){return function ci(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function jr(T,S){return ln.apply(this,arguments)}function ln(){return(ln=(0,L.Z)(function*({appConfig:T,heartbeatServiceProvider:S},R){const H=cr(T,R),te=q(T,R),ue=S.getImmediate({optional:!0});if(ue){const Tt=yield ue.getHeartbeatsHeader();Tt&&te.append("x-firebase-client",Tt)}const Ye={method:"POST",headers:te,body:JSON.stringify({installation:{sdkVersion:ne,appId:T.appId}})},ht=yield De(()=>fetch(H,Ye));if(ht.ok)return Ee(yield ht.json());throw yield Te("Generate Auth Token",ht)})).apply(this,arguments)}function cr(T,{fid:S}){return`${Re(T)}/${S}/authTokens:generate`}function $(T){return W.apply(this,arguments)}function W(){return(W=(0,L.Z)(function*(T,S=!1){let R;const H=yield cs(T.appConfig,ue=>{if(!pt(ue))throw et.create("not-registered");const Ae=ue.authToken;if(!S&&bn(Ae))return ue;if(1===Ae.requestStatus)return R=j(T,S),ue;{if(!navigator.onLine)throw et.create("app-offline");const Ye=bi(ue);return R=Oe(T,Ye),Ye}});return R?yield R:H.authToken})).apply(this,arguments)}function j(T,S){return Y.apply(this,arguments)}function Y(){return(Y=(0,L.Z)(function*(T,S){let R=yield Q(T.appConfig);for(;1===R.authToken.requestStatus;)yield Le(100),R=yield Q(T.appConfig);const H=R.authToken;return 0===H.requestStatus?$(T,S):H})).apply(this,arguments)}function Q(T){return cs(T,S=>{if(!pt(S))throw et.create("not-registered");return function Ht(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Oe(T,S){return We.apply(this,arguments)}function We(){return(We=(0,L.Z)(function*(T,S){try{const R=yield jr(T,S),H=Object.assign(Object.assign({},S),{authToken:R});return yield lr(T.appConfig,H),R}catch(R){if(!rt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const H=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield lr(T.appConfig,H)}else yield Gn(T.appConfig);throw R}})).apply(this,arguments)}function pt(T){return void 0!==T&&2===T.registrationStatus}function bn(T){return 2===T.requestStatus&&!function tn(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function bi(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function An(){return(An=(0,L.Z)(function*(T){const S=T,{installationEntry:R,registrationPromise:H}=yield Xn(S);return H?H.catch(console.error):$(S).catch(console.error),R.fid})).apply(this,arguments)}function Si(){return(Si=(0,L.Z)(function*(T,S=!1){const R=T;return yield qi(R),(yield $(R,S)).token})).apply(this,arguments)}function qi(T){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,L.Z)(function*(T){const{registrationPromise:S}=yield Xn(T);S&&(yield S)})).apply(this,arguments)}function $r(T){return et.create("missing-app-config-values",{valueName:T})}const Lt="installations",Mn=T=>{const S=T.getProvider("app").getImmediate(),R=function sl(T){if(!T||!T.options)throw $r("App Configuration");if(!T.name)throw $r("App Name");const S=["projectId","apiKey","appId"];for(const R of S)if(!T.options[R])throw $r(R);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:R,heartbeatServiceProvider:(0,pe._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},oa=T=>{const S=T.getProvider("app").getImmediate(),R=(0,pe._getProvider)(S,Lt).getImmediate();return{getId:()=>function jt(T){return An.apply(this,arguments)}(R),getToken:te=>function Jn(T){return Si.apply(this,arguments)}(R,te)}};(function Co(){(0,pe._registerComponent)(new ye.wA(Lt,Mn,"PUBLIC")),(0,pe._registerComponent)(new ye.wA("installations-internal",oa,"PRIVATE"))})(),(0,pe.registerVersion)(ve,z),(0,pe.registerVersion)(ve,z,"esm2017");const ei="@firebase/remote-config",Ai=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ef{constructor(S,R,H,te){this.client=S,this.storage=R,this.storageCache=H,this.logger=te}isCachedDataFresh(S,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-R,te=H<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${te}.`),te}fetch(S){var R=this;return(0,L.Z)(function*(){const[H,te]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(te&&R.isCachedDataFresh(S.cacheMaxAgeMillis,H))return te;S.eTag=te&&te.eTag;const ue=yield R.client.fetch(S),Ae=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Ae.push(R.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Ae),ue})()}}function xd(T=navigator){return T.languages&&T.languages[0]||T.language}class Jl{constructor(S,R,H,te,ue,Ae){this.firebaseInstallations=S,this.sdkVersion=R,this.namespace=H,this.projectId=te,this.apiKey=ue,this.appId=Ae}fetch(S){var R=this;return(0,L.Z)(function*(){var H,te,ue;const[Ae,Ye]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Tt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,At={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},ct={sdk_version:R.sdkVersion,app_instance_id:Ae,app_instance_id_token:Ye,app_id:R.appId,language_code:xd()},mt={method:"POST",headers:At,body:JSON.stringify(ct)},fi=fetch(Tt,mt),Dl=new Promise((Yr,ps)=>{S.signal.addEventListener(()=>{const Wd=new Error("The operation was aborted.");Wd.name="AbortError",ps(Wd)})});let Ar;try{yield Promise.race([fi,Dl]),Ar=yield fi}catch(Yr){let ps="fetch-client-network";throw"AbortError"===(null===(H=Yr)||void 0===H?void 0:H.name)&&(ps="fetch-timeout"),Ai.create(ps,{originalErrorMessage:null===(te=Yr)||void 0===te?void 0:te.message})}let xr=Ar.status;const ka=Ar.headers.get("ETag")||void 0;let Il,Ra;if(200===Ar.status){let Yr;try{Yr=yield Ar.json()}catch(ps){throw Ai.create("fetch-client-parse",{originalErrorMessage:null===(ue=ps)||void 0===ue?void 0:ue.message})}Il=Yr.entries,Ra=Yr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ra?xr=500:"NO_CHANGE"===Ra?xr=304:("NO_TEMPLATE"===Ra||"EMPTY_CONFIG"===Ra)&&(Il={}),304!==xr&&200!==xr)throw Ai.create("fetch-status",{httpStatus:xr});return{status:xr,eTag:ka,config:Il}})()}}class qm{constructor(S,R){this.client=S,this.storage=R}fetch(S){var R=this;return(0,L.Z)(function*(){const H=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(S,H)})()}attemptFetch(S,{throttleEndTimeMillis:R,backoffCount:H}){var te=this;return(0,L.Z)(function*(){yield function Do(T,S){return new Promise((R,H)=>{const te=Math.max(S-Date.now(),0),ue=setTimeout(R,te);T.addEventListener(()=>{clearTimeout(ue),H(Ai.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,R);try{const ue=yield te.client.fetch(S);return yield te.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function br(T){if(!(T instanceof le.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ue))throw ue;const Ae={throttleEndTimeMillis:Date.now()+(0,le.$s)(H),backoffCount:H+1};return yield te.storage.setThrottleMetadata(Ae),te.attemptFetch(S,Ae)}})()}}class Md{constructor(S,R,H,te,ue){this.app=S,this._client=R,this._storageCache=H,this._storage=te,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function fu(T,S){var R;const H=T.target.error||void 0;return Ai.create(S,{originalErrorMessage:H&&(null===(R=H)||void 0===R?void 0:R.message)})}const to="app_namespace_store";class Ym{constructor(S,R,H,te=function Zm(){return new Promise((T,S)=>{var R;try{const H=indexedDB.open("firebase_remote_config",1);H.onerror=te=>{S(fu(te,"storage-open"))},H.onsuccess=te=>{T(te.target.result)},H.onupgradeneeded=te=>{0===te.oldVersion&&te.target.result.createObjectStore(to,{keyPath:"compositeKey"})}}catch(H){S(Ai.create("storage-open",{originalErrorMessage:null===(R=H)||void 0===R?void 0:R.message}))}})}()){this.appId=S,this.appName=R,this.namespace=H,this.openDbPromise=te}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var R=this;return(0,L.Z)(function*(){const H=yield R.openDbPromise;return new Promise((te,ue)=>{var Ae;const ht=H.transaction([to],"readonly").objectStore(to),Tt=R.createCompositeKey(S);try{const At=ht.get(Tt);At.onerror=ct=>{ue(fu(ct,"storage-get"))},At.onsuccess=ct=>{const mt=ct.target.result;te(mt?mt.value:void 0)}}catch(At){ue(Ai.create("storage-get",{originalErrorMessage:null===(Ae=At)||void 0===Ae?void 0:Ae.message}))}})})()}set(S,R){var H=this;return(0,L.Z)(function*(){const te=yield H.openDbPromise;return new Promise((ue,Ae)=>{var Ye;const Tt=te.transaction([to],"readwrite").objectStore(to),At=H.createCompositeKey(S);try{const ct=Tt.put({compositeKey:At,value:R});ct.onerror=mt=>{Ae(fu(mt,"storage-set"))},ct.onsuccess=()=>{ue()}}catch(ct){Ae(Ai.create("storage-set",{originalErrorMessage:null===(Ye=ct)||void 0===Ye?void 0:Ye.message}))}})})()}delete(S){var R=this;return(0,L.Z)(function*(){const H=yield R.openDbPromise;return new Promise((te,ue)=>{var Ae;const ht=H.transaction([to],"readwrite").objectStore(to),Tt=R.createCompositeKey(S);try{const At=ht.delete(Tt);At.onerror=ct=>{ue(fu(ct,"storage-delete"))},At.onsuccess=()=>{te()}}catch(At){ue(Ai.create("storage-delete",{originalErrorMessage:null===(Ae=At)||void 0===Ae?void 0:Ae.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class ec{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,L.Z)(function*(){const R=S.storage.getLastFetchStatus(),H=S.storage.getLastSuccessfulFetchTimestampMillis(),te=S.storage.getActiveConfig(),ue=yield R;ue&&(S.lastFetchStatus=ue);const Ae=yield H;Ae&&(S.lastSuccessfulFetchTimestampMillis=Ae);const Ye=yield te;Ye&&(S.activeConfig=Ye)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function tc(){return no.apply(this,arguments)}function no(){return(no=(0,L.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}!function Ts(){(0,pe._registerComponent)(new ye.wA("remote-config",function T(S,{instanceIdentifier:R}){const H=S.getProvider("app").getImmediate(),te=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ai.create("registration-window");if(!(0,le.hl)())throw Ai.create("indexed-db-unavailable");const{projectId:ue,apiKey:Ae,appId:Ye}=H.options;if(!ue)throw Ai.create("registration-project-id");if(!Ae)throw Ai.create("registration-api-key");if(!Ye)throw Ai.create("registration-app-id");const ht=new Ym(Ye,H.name,R=R||"firebase"),Tt=new ec(ht),At=new se.Yd(ei);At.logLevel=se.in.ERROR;const ct=new Jl(te,pe.SDK_VERSION,R,ue,Ae,Ye),mt=new qm(ct,ht),fi=new Ef(mt,ht,Tt,At),Dl=new Md(H,fi,Tt,ht,At);return function wf(T){const S=(0,le.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Dl),Dl},"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)(ei,"0.3.11"),(0,pe.registerVersion)(ei,"0.3.11","esm2017")}();const pu="/firebase-messaging-sw.js",wr="/firebase-cloud-messaging-push-scope",io="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mu="google.c.a.c_id",ul="google.c.a.c_l",dl="google.c.a.ts",Cf="google.c.a.e";var us=(()=>{return(T=us||(us={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",us;var T})();function In(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nc(T){const R=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(R),te=new Uint8Array(H.length);for(let ue=0;ue<H.length;++ue)te[ue]=H.charCodeAt(ue);return te}const ic="fcm_token_details_db",dr="fcm_token_object_Store";function Od(T){return Un.apply(this,arguments)}function Un(){return Un=(0,L.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(ic))return null;let S=null;return(yield(0,me.X3)(ic,5,{upgrade:(H=(0,L.Z)(function*(te,ue,Ae,Ye){var ht;if(ue<2||!te.objectStoreNames.contains(dr))return;const Tt=Ye.objectStore(dr),At=yield Tt.index("fcmSenderId").get(T);if(yield Tt.clear(),At)if(2===ue){const ct=At;if(!ct.auth||!ct.p256dh||!ct.endpoint)return;S={token:ct.fcmToken,createTime:null!==(ht=ct.createTime)&&void 0!==ht?ht:Date.now(),subscriptionOptions:{auth:ct.auth,p256dh:ct.p256dh,endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:"string"==typeof ct.vapidKey?ct.vapidKey:In(ct.vapidKey)}}}else if(3===ue){const ct=At;S={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:In(ct.auth),p256dh:In(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:In(ct.vapidKey)}}}else if(4===ue){const ct=At;S={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:In(ct.auth),p256dh:In(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:In(ct.vapidKey)}}}}),function(ue,Ae,Ye,ht){return H.apply(this,arguments)})})).close(),yield(0,me.Lj)(ic),yield(0,me.Lj)("fcm_vapid_details_db"),yield(0,me.Lj)("undefined"),Pd(S)?S:null;var H}),Un.apply(this,arguments)}function Pd(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const ti="firebase-messaging-store";let rc=null;function Io(){return rc||(rc=(0,me.X3)("firebase-messaging-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(ti)}})),rc}function ro(T){return wi.apply(this,arguments)}function wi(){return(wi=(0,L.Z)(function*(T){const S=so(T),H=yield(yield Io()).transaction(ti).objectStore(ti).get(S);if(H)return H;{const te=yield Od(T.appConfig.senderId);if(te)return yield To(T,te),te}})).apply(this,arguments)}function To(T,S){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,L.Z)(function*(T,S){const R=so(T),te=(yield Io()).transaction(ti,"readwrite");return yield te.objectStore(ti).put(S,R),yield te.done,S})).apply(this,arguments)}function ha(T){return Er.apply(this,arguments)}function Er(){return(Er=(0,L.Z)(function*(T){const S=so(T),H=(yield Io()).transaction(ti,"readwrite");yield H.objectStore(ti).delete(S),yield H.done})).apply(this,arguments)}function so({appConfig:T}){return T.appId}const at=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function sc(T,S){return gu.apply(this,arguments)}function gu(){return(gu=(0,L.Z)(function*(T,S){var R;const H=yield ac(T),te=Bt(S),ue={method:"POST",headers:H,body:JSON.stringify(te)};let Ae;try{Ae=yield(yield fetch(fa(T.appConfig),ue)).json()}catch(Ye){throw at.create("token-subscribe-failed",{errorInfo:null===(R=Ye)||void 0===R?void 0:R.toString()})}if(Ae.error)throw at.create("token-subscribe-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw at.create("token-subscribe-no-token");return Ae.token})).apply(this,arguments)}function _u(T,S){return oc.apply(this,arguments)}function oc(){return(oc=(0,L.Z)(function*(T,S){var R;const H=yield ac(T),te=Bt(S.subscriptionOptions),ue={method:"PATCH",headers:H,body:JSON.stringify(te)};let Ae;try{Ae=yield(yield fetch(`${fa(T.appConfig)}/${S.token}`,ue)).json()}catch(Ye){throw at.create("token-update-failed",{errorInfo:null===(R=Ye)||void 0===R?void 0:R.toString()})}if(Ae.error)throw at.create("token-update-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw at.create("token-update-no-token");return Ae.token})).apply(this,arguments)}function So(T,S){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,L.Z)(function*(T,S){var R;const te={method:"DELETE",headers:yield ac(T)};try{const Ae=yield(yield fetch(`${fa(T.appConfig)}/${S}`,te)).json();if(Ae.error)throw at.create("token-unsubscribe-failed",{errorInfo:Ae.error.message})}catch(ue){throw at.create("token-unsubscribe-failed",{errorInfo:null===(R=ue)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function fa({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function ac(T){return Se.apply(this,arguments)}function Se(){return(Se=(0,L.Z)(function*({appConfig:T,installations:S}){const R=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Bt({p256dh:T,auth:S,endpoint:R,vapidKey:H}){const te={web:{endpoint:R,auth:S,p256dh:T}};return H!==io&&(te.web.applicationPubKey=H),te}const pa=6048e5;function xo(T){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,L.Z)(function*(T){const S=yield lc(T.swRegistration,T.vapidKey),R={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:In(S.getKey("auth")),p256dh:In(S.getKey("p256dh"))},H=yield ro(T.firebaseDependencies);if(H){if(As(H.subscriptionOptions,R))return Date.now()>=H.createTime+pa?Cr(T,{token:H.token,createTime:Date.now(),subscriptionOptions:R}):H.token;try{yield So(T.firebaseDependencies,H.token)}catch(te){console.warn(te)}return ga(T.firebaseDependencies,R)}return ga(T.firebaseDependencies,R)})).apply(this,arguments)}function ma(T){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,L.Z)(function*(T){const S=yield ro(T.firebaseDependencies);S&&(yield So(T.firebaseDependencies,S.token),yield ha(T.firebaseDependencies));const R=yield T.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Cr(T,S){return ml.apply(this,arguments)}function ml(){return(ml=(0,L.Z)(function*(T,S){try{const R=yield _u(T.firebaseDependencies,S),H=Object.assign(Object.assign({},S),{token:R,createTime:Date.now()});return yield To(T.firebaseDependencies,H),R}catch(R){throw yield ma(T),R}})).apply(this,arguments)}function ga(T,S){return _a.apply(this,arguments)}function _a(){return(_a=(0,L.Z)(function*(T,S){const H={token:yield sc(T,S),createTime:Date.now(),subscriptionOptions:S};return yield To(T,H),H.token})).apply(this,arguments)}function lc(T,S){return Df.apply(this,arguments)}function Df(){return(Df=(0,L.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:nc(S)})})).apply(this,arguments)}function As(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function ui(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Gr(T,S){if(!S.notification)return;T.notification={};const R=S.notification.title;R&&(T.notification.title=R);const H=S.notification.body;H&&(T.notification.body=H);const te=S.notification.image;te&&(T.notification.image=te)}(S,T),function yu(T,S){!S.data||(T.data=S.data)}(S,T),function ko(T,S){var R,H,te,ue,Ae;if(!(S.fcmOptions||null!==(R=S.notification)&&void 0!==R&&R.click_action))return;T.fcmOptions={};const Ye=null!==(te=null===(H=S.fcmOptions)||void 0===H?void 0:H.link)&&void 0!==te?te:null===(ue=S.notification)||void 0===ue?void 0:ue.click_action;Ye&&(T.fcmOptions.link=Ye);const ht=null===(Ae=S.fcmOptions)||void 0===Ae?void 0:Ae.analytics_label;ht&&(T.fcmOptions.analyticsLabel=ht)}(S,T),S}function zr(T){return"object"==typeof T&&!!T&&mu in T}function Fd(T,S){const R=[];for(let H=0;H<T.length;H++)R.push(T.charAt(H)),H<S.length&&R.push(S.charAt(H));return R.join("")}function ya(T){return at.create("missing-app-config-values",{valueName:T})}Fd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Fd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class If{constructor(S,R,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const te=function Ld(T){if(!T||!T.options)throw ya("App Configuration Object");if(!T.name)throw ya("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:R}=T;for(const H of S)if(!R[H])throw ya(H);return{appName:T.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:te,installations:R,analyticsProvider:H}}_delete(){return Promise.resolve()}}function va(T){return ba.apply(this,arguments)}function ba(){return(ba=(0,L.Z)(function*(T){var S;try{T.swRegistration=yield navigator.serviceWorker.register(pu,{scope:wr}),T.swRegistration.update().catch(()=>{})}catch(R){throw at.create("failed-service-worker-registration",{browserErrorMessage:null===(S=R)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function cc(T,S){return gl.apply(this,arguments)}function gl(){return(gl=(0,L.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield va(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw at.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function vu(T,S){return wa.apply(this,arguments)}function wa(){return(wa=(0,L.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=io)})).apply(this,arguments)}function bu(){return(bu=(0,L.Z)(function*(T,S){if(!navigator)throw at.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw at.create("permission-blocked");return yield vu(T,S?.vapidKey),yield cc(T,S?.serviceWorkerRegistration),xo(T)})).apply(this,arguments)}function uc(T,S,R){return dc.apply(this,arguments)}function dc(){return(dc=(0,L.Z)(function*(T,S,R){const H=hc(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:R[mu],message_name:R[ul],message_time:R[dl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function hc(T){switch(T){case us.NOTIFICATION_CLICKED:return"notification_open";case us.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wu(){return(wu=(0,L.Z)(function*(T,S){const R=S.data;if(!R.isFirebaseMessaging)return;T.onMessageHandler&&R.messageType===us.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(ui(R)):T.onMessageHandler.next(ui(R)));const H=R.data;zr(H)&&"1"===H[Cf]&&(yield uc(T,R.messageType,H))})).apply(this,arguments)}const pc="@firebase/messaging",xs=T=>{const S=new If(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function fc(T,S){return wu.apply(this,arguments)}(S,R)),S},dn=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:H=>function _l(T,S){return bu.apply(this,arguments)}(S,H)}};function Bd(){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,L.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vd(){(0,pe._registerComponent)(new ye.wA("messaging",xs,"PUBLIC")),(0,pe._registerComponent)(new ye.wA("messaging-internal",dn,"PRIVATE")),(0,pe.registerVersion)(pc,"0.9.16"),(0,pe.registerVersion)(pc,"0.9.16","esm2017")}();const Cu="analytics",Oo="firebase_id",Ca="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Po="https://www.googletagmanager.com/gtag/js",di=new se.Yd("@firebase/analytics");function jd(T){return Promise.all(T.map(S=>S.catch(R=>R)))}function Qm(T,S){const R=document.createElement("script");R.src=`${Po}?l=${T}&id=${S}`,R.async=!0,document.head.appendChild(R)}function xf(T,S,R,H,te,ue){return No.apply(this,arguments)}function No(){return(No=(0,L.Z)(function*(T,S,R,H,te,ue){const Ae=H[te];try{if(Ae)yield S[Ae];else{const ht=(yield jd(R)).find(Tt=>Tt.measurementId===te);ht&&(yield S[ht.appId])}}catch(Ye){di.error(Ye)}T("config",te,ue)})).apply(this,arguments)}function Mf(T,S,R,H,te){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,L.Z)(function*(T,S,R,H,te){try{let ue=[];if(te&&te.send_to){let Ae=te.send_to;Array.isArray(Ae)||(Ae=[Ae]);const Ye=yield jd(R);for(const ht of Ae){const Tt=Ye.find(ct=>ct.measurementId===ht),At=Tt&&S[Tt.appId];if(!At){ue=[];break}ue.push(At)}}0===ue.length&&(ue=Object.values(S)),yield Promise.all(ue),T("event",H,te||{})}catch(ue){di.error(ue)}})).apply(this,arguments)}function Rf(){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes(Po))return S;return null}const qr=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),$d=new class Wr{constructor(S={},R=1e3){this.throttleMetadata=S,this.intervalMillis=R}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,R){this.throttleMetadata[S]=R}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Of(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function nn(T){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,L.Z)(function*(T){var S;const{appId:R,apiKey:H}=T,te={method:"GET",headers:Of(H)},ue=Ca.replace("{app-id}",R),Ae=yield fetch(ue,te);if(200!==Ae.status&&304!==Ae.status){let Ye="";try{const ht=yield Ae.json();null!==(S=ht.error)&&void 0!==S&&S.message&&(Ye=ht.error.message)}catch{}throw qr.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:Ye})}return Ae.json()})).apply(this,arguments)}function Be(T){return kt.apply(this,arguments)}function kt(){return(kt=(0,L.Z)(function*(T,S=$d,R){const{appId:H,apiKey:te,measurementId:ue}=T.options;if(!H)throw qr.create("no-app-id");if(!te){if(ue)return{measurementId:ue,appId:H};throw qr.create("no-api-key")}const Ae=S.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new wc;return setTimeout((0,L.Z)(function*(){Ye.abort()}),void 0!==R?R:6e4),ii({appId:H,apiKey:te,measurementId:ue},Ae,Ye,S)})).apply(this,arguments)}function ii(T,S,R){return qn.apply(this,arguments)}function qn(){return(qn=(0,L.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:R},H,te=$d){var ue,Ae;const{appId:Ye,measurementId:ht}=T;try{yield vl(H,S)}catch(Tt){if(ht)return di.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${null===(ue=Tt)||void 0===ue?void 0:ue.message}]`),{appId:Ye,measurementId:ht};throw Tt}try{const Tt=yield nn(T);return te.deleteThrottleMetadata(Ye),Tt}catch(Tt){const At=Tt;if(!bc(At)){if(te.deleteThrottleMetadata(Ye),ht)return di.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${At?.message}]`),{appId:Ye,measurementId:ht};throw Tt}const ct=503===Number(null===(Ae=At?.customData)||void 0===Ae?void 0:Ae.httpStatus)?(0,le.$s)(R,te.intervalMillis,30):(0,le.$s)(R,te.intervalMillis),mt={throttleEndTimeMillis:Date.now()+ct,backoffCount:R+1};return te.setThrottleMetadata(Ye,mt),di.debug(`Calling attemptFetch again in ${ct} millis`),ii(T,mt,H,te)}})).apply(this,arguments)}function vl(T,S){return new Promise((R,H)=>{const te=Math.max(S-Date.now(),0),ue=setTimeout(R,te);T.addEventListener(()=>{clearTimeout(ue),H(qr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function bc(T){if(!(T instanceof le.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class wc{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Ec,Dr;function Lo(){return(Lo=(0,L.Z)(function*(T,S,R,H,te){if(te&&te.global)T("event",R,H);else{const ue=yield S;T("event",R,Object.assign(Object.assign({},H),{send_to:ue}))}})).apply(this,arguments)}function Iu(T){Dr=T}function Ic(T){Ec=T}function Ir(){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,L.Z)(function*(){var T;if(!(0,le.hl)())return di.warn(qr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(S){return di.warn(qr.create("indexeddb-unavailable",{errorInfo:null===(T=S)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function Rs(){return(Rs=(0,L.Z)(function*(T,S,R,H,te,ue,Ae){var Ye;const ht=Be(T);ht.then(fi=>{R[fi.measurementId]=fi.appId,T.options.measurementId&&fi.measurementId!==T.options.measurementId&&di.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${fi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fi=>di.error(fi)),S.push(ht);const Tt=Ir().then(fi=>{if(fi)return H.getId()}),[At,ct]=yield Promise.all([ht,Tt]);Rf()||Qm(ue,At.measurementId),Dr&&(te("consent","default",Dr),Iu(void 0)),te("js",new Date);const mt=null!==(Ye=Ae?.config)&&void 0!==Ye?Ye:{};return mt.origin="firebase",mt.update=!0,null!=ct&&(mt[Oo]=ct),te("config",At.measurementId,mt),Ec&&(te("set",Ec),Ic(void 0)),At.measurementId})).apply(this,arguments)}class ds{constructor(S){this.app=S}_delete(){return delete Ki[this.app.options.appId],Promise.resolve()}}let Ki={},Tr=[];const hs={};let Os,_n,fs="dataLayer",Zt=!1;function Zi(T,S,R){!function Ei(){const T=[];if((0,le.ru)()&&T.push("This is a browser extension environment."),(0,le.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((H,te)=>`(${te+1}) ${H}`).join(" "),R=qr.create("invalid-analytics-context",{errorInfo:S});di.warn(R.message)}}();const H=T.options.appId;if(!H)throw qr.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw qr.create("no-api-key");di.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ki[H])throw qr.create("already-exists",{id:H});if(!Zt){!function Xm(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(fs);const{wrappedGtag:ue,gtagCore:Ae}=function kf(T,S,R,H,te){let ue=function(...Ae){window[H].push(arguments)};return window[te]&&"function"==typeof window[te]&&(ue=window[te]),window[te]=function yc(T,S,R,H){function ue(){return(ue=(0,L.Z)(function*(Ae,Ye,ht){try{"event"===Ae?yield Mf(T,S,R,Ye,ht):"config"===Ae?yield xf(T,S,R,H,Ye,ht):"consent"===Ae?T("consent","update",ht):T("set",Ye)}catch(Tt){di.error(Tt)}})).apply(this,arguments)}return function te(Ae,Ye,ht){return ue.apply(this,arguments)}}(ue,T,S,R),{gtagCore:ue,wrappedGtag:window[te]}}(Ki,Tr,hs,fs,"gtag");_n=ue,Os=Ae,Zt=!0}return Ki[H]=function Bo(T,S,R,H,te,ue,Ae){return Rs.apply(this,arguments)}(T,Tr,hs,S,Os,fs,R),new ds(T)}function Ia(){return kn.apply(this,arguments)}function kn(){return(kn=(0,L.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const Gd="@firebase/analytics";!function yn(){(0,pe._registerComponent)(new ye.wA(Cu,(S,{options:R})=>Zi(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,pe._registerComponent)(new ye.wA("analytics-internal",function T(S){try{const R=S.getProvider(Cu).getImmediate();return{logEvent:(H,te,ue)=>function El(T,S,R,H){T=(0,le.m9)(T),function Du(T,S,R,H,te){return Lo.apply(this,arguments)}(_n,Ki[T.app.options.appId],S,R,H).catch(te=>di.error(te))}(R,H,te,ue)}}catch(R){throw qr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,pe.registerVersion)(Gd,"0.8.0"),(0,pe.registerVersion)(Gd,"0.8.0","esm2017")}();var Tc=V(4408),Li=V(7565);const Ps=new class Ho extends Li.v{}(class Uo extends Tc.o{constructor(S,R){super(S,R),this.scheduler=S,this.work=R}schedule(S,R=0){return R>0?super.schedule(S,R):(this.delay=R,this.state=S,this.scheduler.flush(this),this)}execute(S,R){return R>0||this.closed?super.execute(S,R):this._execute(S,R)}requestAsyncId(S,R,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(S,R,H):S.flush(this)}});var xu=V(4986),Sc=V(8505),Ns=V(5363),Vi=V(9468);const Mu=new u.GfV("7.4.1"),lo="__angularfire_symbol__analyticsIsSupportedValue",zd="__angularfire_symbol__analyticsIsSupported",Ta="__angularfire_symbol__remoteConfigIsSupportedValue",Ac="__angularfire_symbol__remoteConfigIsSupported",ku="__angularfire_symbol__messagingIsSupportedValue",Ru="__angularfire_symbol__messagingIsSupported";function Sa(T,S,R){if(S){if(1===S.length)return S[0];const ue=S.filter(Ae=>Ae.app===R);if(1===ue.length)return ue[0]}return R.container.getProvider(T).getImmediate({optional:!0})}globalThis[zd]||(globalThis[zd]=Ia().then(T=>globalThis[lo]=T).catch(()=>globalThis[lo]=!1)),globalThis[Ru]||(globalThis[Ru]=Bd().then(T=>globalThis[ku]=T).catch(()=>globalThis[ku]=!1)),globalThis[Ac]||(globalThis[Ac]=tc().then(T=>globalThis[Ta]=T).catch(()=>globalThis[Ta]=!1));const jo=(T,S)=>{const R=S?[S]:(0,ie.C6)(),H=[];return R.forEach(te=>{te.container.getProvider(T).instances.forEach(Ae=>{H.includes(Ae)||H.push(Ae)})}),H};function Sr(){}class Fs{constructor(S,R=Ps){this.zone=S,this.delegate=R}now(){return this.delegate.now()}schedule(S,R,H){const te=this.zone;return this.delegate.schedule(function(Ae){te.runGuarded(()=>{S.apply(this,[Ae])})},R,H)}}class Aa{constructor(S){this.zone=S,this.task=null}call(S,R){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sr,{},Sr,Sr)),R.pipe((0,Sc.b)({next:H,complete:H,error:H})).subscribe(S).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ff=(()=>{class T{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Fs(Zone.current)),this.insideAngular=R.run(()=>new Fs(Zone.current,xu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(R){return new(R||T)(u.LFG(u.R0b))},T.\u0275prov=u.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Ls(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function xa(T){return T.pipe((0,Ns.Q)(Ls().outsideAngular))}function xc(T){return Ls(),function Kn(T){return function(R){return(R=R.lift(new Aa(T.ngZone))).pipe((0,Vi.R)(T.outsideAngular),(0,Ns.Q)(T.insideAngular))}}(Ls())(T)}},2090:(ft,xe,V)=>{V.d(xe,{$s:()=>ci,BH:()=>Ge,DV:()=>en,Dv:()=>cs,G6:()=>ze,GJ:()=>sn,L:()=>me,LL:()=>fe,Mn:()=>Te,Pz:()=>Gt,Sg:()=>Me,UG:()=>ge,UI:()=>os,US:()=>ye,Wj:()=>mr,Yr:()=>je,ZB:()=>G,ZR:()=>we,b$:()=>rt,cI:()=>Yt,d:()=>Re,dS:()=>Qt,eu:()=>De,g5:()=>L,gK:()=>Ln,gQ:()=>Hr,h$:()=>se,hl:()=>q,hu:()=>ie,jU:()=>be,lb:()=>Eo,m9:()=>cr,ne:()=>vt,p$:()=>z,pd:()=>ar,r3:()=>Gi,ru:()=>et,tV:()=>ve,uI:()=>$e,ug:()=>qe,vZ:()=>pr,w1:()=>Ee,w9:()=>mn,xO:()=>as,xb:()=>zt,z$:()=>ke,zI:()=>ee,zd:()=>Xs});const ie=function($,W){if(!$)throw L(W)},L=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},pe=function($){const W=[];let j=0;for(let Y=0;Y<$.length;Y++){let Q=$.charCodeAt(Y);Q<128?W[j++]=Q:Q<2048?(W[j++]=Q>>6|192,W[j++]=63&Q|128):55296==(64512&Q)&&Y+1<$.length&&56320==(64512&$.charCodeAt(Y+1))?(Q=65536+((1023&Q)<<10)+(1023&$.charCodeAt(++Y)),W[j++]=Q>>18|240,W[j++]=Q>>12&63|128,W[j++]=Q>>6&63|128,W[j++]=63&Q|128):(W[j++]=Q>>12|224,W[j++]=Q>>6&63|128,W[j++]=63&Q|128)}return W},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,W){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,Y=[];for(let Q=0;Q<$.length;Q+=3){const Oe=$[Q],We=Q+1<$.length,pt=We?$[Q+1]:0,bn=Q+2<$.length,tn=bn?$[Q+2]:0;let jt=(15&pt)<<2|tn>>6,An=63&tn;bn||(An=64,We||(jt=64)),Y.push(j[Oe>>2],j[(3&Oe)<<4|pt>>4],j[jt],j[An])}return Y.join("")},encodeString($,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa($):this.encodeByteArray(pe($),W)},decodeString($,W){return this.HAS_NATIVE_SUPPORT&&!W?atob($):function($){const W=[];let j=0,Y=0;for(;j<$.length;){const Q=$[j++];if(Q<128)W[Y++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Oe=$[j++];W[Y++]=String.fromCharCode((31&Q)<<6|63&Oe)}else if(Q>239&&Q<365){const bn=((7&Q)<<18|(63&$[j++])<<12|(63&$[j++])<<6|63&$[j++])-65536;W[Y++]=String.fromCharCode(55296+(bn>>10)),W[Y++]=String.fromCharCode(56320+(1023&bn))}else{const Oe=$[j++],We=$[j++];W[Y++]=String.fromCharCode((15&Q)<<12|(63&Oe)<<6|63&We)}}return W.join("")}(this.decodeStringToByteArray($,W))},decodeStringToByteArray($,W){this.init_();const j=W?this.charToByteMapWebSafe_:this.charToByteMap_,Y=[];for(let Q=0;Q<$.length;){const Oe=j[$.charAt(Q++)],pt=Q<$.length?j[$.charAt(Q)]:0;++Q;const tn=Q<$.length?j[$.charAt(Q)]:64;++Q;const Ht=Q<$.length?j[$.charAt(Q)]:64;if(++Q,null==Oe||null==pt||null==tn||null==Ht)throw Error();Y.push(Oe<<2|pt>>4),64!==tn&&(Y.push(pt<<4&240|tn>>2),64!==Ht&&Y.push(tn<<6&192|Ht))}return Y},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},se=function($){const W=pe($);return ye.encodeByteArray(W,!0)},me=function($){return se($).replace(/\./g,"")},ve=function($){try{return ye.decodeString($,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function z($){return G(void 0,$)}function G($,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return W}for(const j in W)!W.hasOwnProperty(j)||!ne(j)||($[j]=G($[j],W[j]));return $}function ne($){return"__proto__"!==$}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,j)=>{this.resolve=W,this.reject=j})}wrapCallback(W){return(j,Y)=>{j?this.reject(j):this.resolve(Y),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(j):W(j,Y))}}}function Me($,W){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Y=W||"demo-project",Q=$.iat||0,Oe=$.sub||$.user_id;if(!Oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const We=Object.assign({iss:`https://securetoken.google.com/${Y}`,aud:Y,iat:Q,exp:Q+3600,auth_time:Q,sub:Oe,user_id:Oe,firebase:{sign_in_provider:"custom",identities:{}}},$);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(We)),""].join(".")}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function $e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function be(){return"object"==typeof self&&self.self===self}function et(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function rt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Re(){return ke().indexOf("Electron/")>=0}function Ee(){const $=ke();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Te(){return ke().indexOf("MSAppHost/")>=0}function je(){return!1}function ze(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){return"object"==typeof indexedDB}function De(){return new Promise(($,W)=>{try{let j=!0;const Y="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(Y);Q.onsuccess=()=>{Q.result.close(),j||self.indexedDB.deleteDatabase(Y),$(!0)},Q.onupgradeneeded=()=>{j=!1},Q.onerror=()=>{var Oe;W((null===(Oe=Q.error)||void 0===Oe?void 0:Oe.message)||"")}}catch(j){W(j)}})}function ee(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class we extends Error{constructor(W,j,Y){super(j),this.code=W,this.customData=Y,this.name="FirebaseError",Object.setPrototypeOf(this,we.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fe.prototype.create)}}class fe{constructor(W,j,Y){this.service=W,this.serviceName=j,this.errors=Y}create(W,...j){const Y=j[0]||{},Q=`${this.service}/${W}`,Oe=this.errors[W],We=Oe?function Le($,W){return $.replace(yt,(j,Y)=>{const Q=W[Y];return null!=Q?String(Q):`<${Y}?>`})}(Oe,Y):"Error";return new we(Q,`${this.serviceName}: ${We} (${Q}).`,Y)}}const yt=/\{\$([^}]+)}/g;function Yt($){return JSON.parse($)}function Gt($){return JSON.stringify($)}const Je=function($){let W={},j={},Y={},Q="";try{const Oe=$.split(".");W=Yt(ve(Oe[0])||""),j=Yt(ve(Oe[1])||""),Q=Oe[2],Y=j.d||{},delete j.d}catch{}return{header:W,claims:j,data:Y,signature:Q}},mn=function($){const j=Je($).claims;return!!j&&"object"==typeof j&&j.hasOwnProperty("iat")},sn=function($){const W=Je($).claims;return"object"==typeof W&&!0===W.admin};function Gi($,W){return Object.prototype.hasOwnProperty.call($,W)}function en($,W){if(Object.prototype.hasOwnProperty.call($,W))return $[W]}function zt($){for(const W in $)if(Object.prototype.hasOwnProperty.call($,W))return!1;return!0}function os($,W,j){const Y={};for(const Q in $)Object.prototype.hasOwnProperty.call($,Q)&&(Y[Q]=W.call(j,$[Q],Q,$));return Y}function pr($,W){if($===W)return!0;const j=Object.keys($),Y=Object.keys(W);for(const Q of j){if(!Y.includes(Q))return!1;const Oe=$[Q],We=W[Q];if(Fi(Oe)&&Fi(We)){if(!pr(Oe,We))return!1}else if(Oe!==We)return!1}for(const Q of Y)if(!j.includes(Q))return!1;return!0}function Fi($){return null!==$&&"object"==typeof $}function as($){const W=[];for(const[j,Y]of Object.entries($))Array.isArray(Y)?Y.forEach(Q=>{W.push(encodeURIComponent(j)+"="+encodeURIComponent(Q))}):W.push(encodeURIComponent(j)+"="+encodeURIComponent(Y));return W.length?"&"+W.join("&"):""}function Xs($){const W={};return $.replace(/^\?/,"").split("&").forEach(Y=>{if(Y){const[Q,Oe]=Y.split("=");W[decodeURIComponent(Q)]=decodeURIComponent(Oe)}}),W}function ar($){const W=$.indexOf("?");if(!W)return"";const j=$.indexOf("#",W);return $.substring(W,j>0?j:void 0)}class Hr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,j){j||(j=0);const Y=this.W_;if("string"==typeof W)for(let Ht=0;Ht<16;Ht++)Y[Ht]=W.charCodeAt(j)<<24|W.charCodeAt(j+1)<<16|W.charCodeAt(j+2)<<8|W.charCodeAt(j+3),j+=4;else for(let Ht=0;Ht<16;Ht++)Y[Ht]=W[j]<<24|W[j+1]<<16|W[j+2]<<8|W[j+3],j+=4;for(let Ht=16;Ht<80;Ht++){const jt=Y[Ht-3]^Y[Ht-8]^Y[Ht-14]^Y[Ht-16];Y[Ht]=4294967295&(jt<<1|jt>>>31)}let tn,bi,Q=this.chain_[0],Oe=this.chain_[1],We=this.chain_[2],pt=this.chain_[3],bn=this.chain_[4];for(let Ht=0;Ht<80;Ht++){Ht<40?Ht<20?(tn=pt^Oe&(We^pt),bi=1518500249):(tn=Oe^We^pt,bi=1859775393):Ht<60?(tn=Oe&We|pt&(Oe|We),bi=2400959708):(tn=Oe^We^pt,bi=3395469782);const jt=(Q<<5|Q>>>27)+tn+bn+bi+Y[Ht]&4294967295;bn=pt,pt=We,We=4294967295&(Oe<<30|Oe>>>2),Oe=Q,Q=jt}this.chain_[0]=this.chain_[0]+Q&4294967295,this.chain_[1]=this.chain_[1]+Oe&4294967295,this.chain_[2]=this.chain_[2]+We&4294967295,this.chain_[3]=this.chain_[3]+pt&4294967295,this.chain_[4]=this.chain_[4]+bn&4294967295}update(W,j){if(null==W)return;void 0===j&&(j=W.length);const Y=j-this.blockSize;let Q=0;const Oe=this.buf_;let We=this.inbuf_;for(;Q<j;){if(0===We)for(;Q<=Y;)this.compress_(W,Q),Q+=this.blockSize;if("string"==typeof W){for(;Q<j;)if(Oe[We]=W.charCodeAt(Q),++We,++Q,We===this.blockSize){this.compress_(Oe),We=0;break}}else for(;Q<j;)if(Oe[We]=W[Q],++We,++Q,We===this.blockSize){this.compress_(Oe),We=0;break}}this.inbuf_=We,this.total_+=j}digest(){const W=[];let j=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Q=this.blockSize-1;Q>=56;Q--)this.buf_[Q]=255&j,j/=256;this.compress_(this.buf_);let Y=0;for(let Q=0;Q<5;Q++)for(let Oe=24;Oe>=0;Oe-=8)W[Y]=this.chain_[Q]>>Oe&255,++Y;return W}}function vt($,W){const j=new lr($,W);return j.subscribe.bind(j)}class lr{constructor(W,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{W(this)}).catch(Y=>{this.error(Y)})}next(W){this.forEachObserver(j=>{j.next(W)})}error(W){this.forEachObserver(j=>{j.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,j,Y){let Q;if(void 0===W&&void 0===j&&void 0===Y)throw new Error("Missing Observer.");Q=function Gn($,W){if("object"!=typeof $||null===$)return!1;for(const j of W)if(j in $&&"function"==typeof $[j])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:j,complete:Y},void 0===Q.next&&(Q.next=ls),void 0===Q.error&&(Q.error=ls),void 0===Q.complete&&(Q.complete=ls);const Oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),Oe}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,W)}sendOne(W,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{j(this.observers[W])}catch(Y){typeof console<"u"&&console.error&&console.error(Y)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ls(){}const cs=function($,W,j,Y){let Q;if(Y<W?Q="at least "+W:Y>j&&(Q=0===j?"none":"no more than "+j),Q)throw new Error($+" failed: Was called with "+Y+(1===Y?" argument.":" arguments.")+" Expects "+Q+".")};function Ln($,W){return`${$} failed: ${W} argument `}function mr($,W,j,Y){if((!Y||j)&&"function"!=typeof j)throw new Error(Ln($,W)+"must be a valid function.")}function Eo($,W,j,Y){if((!Y||j)&&("object"!=typeof j||null===j))throw new Error(Ln($,W)+"must be a valid context object.")}const Qt=function($){const W=[];let j=0;for(let Y=0;Y<$.length;Y++){let Q=$.charCodeAt(Y);if(Q>=55296&&Q<=56319){const Oe=Q-55296;Y++,ie(Y<$.length,"Surrogate pair missing trail surrogate."),Q=65536+(Oe<<10)+($.charCodeAt(Y)-56320)}Q<128?W[j++]=Q:Q<2048?(W[j++]=Q>>6|192,W[j++]=63&Q|128):Q<65536?(W[j++]=Q>>12|224,W[j++]=Q>>6&63|128,W[j++]=63&Q|128):(W[j++]=Q>>18|240,W[j++]=Q>>12&63|128,W[j++]=Q>>6&63|128,W[j++]=63&Q|128)}return W},qe=function($){let W=0;for(let j=0;j<$.length;j++){const Y=$.charCodeAt(j);Y<128?W++:Y<2048?W+=2:Y>=55296&&Y<=56319?(W+=4,j++):W+=3}return W};function ci($,W=1e3,j=2){const Y=W*Math.pow(j,$),Q=Math.round(.5*Y*(Math.random()-.5)*2);return Math.min(144e5,Y+Q)}function cr($){return $&&$._delegate?$._delegate:$}},5663:(ft,xe,V)=>{var u=V(4650);let ie=null;function L(){return ie}const se=new u.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function ve(){return(0,u.LFG)(G)}()},providedIn:"platform"}),n})();const z=new u.OlP("Location Initialized");let G=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){ne()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){ne()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(se))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ge(){return new G((0,u.LFG)(se))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function $e(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function be(){const n=(0,u.LFG)(se).location;return new rt((0,u.LFG)(me),n&&n.origin||"")}()},providedIn:"root"}),n})();const et=new u.OlP("appBaseHref");let rt=(()=>{class n extends ge{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+$e(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const l=this.prepareExternalUrl(r+$e(s));this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,s){const l=this.prepareExternalUrl(r+$e(s));this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(me),u.LFG(et,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n extends ge{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Me(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let l=this.prepareExternalUrl(r+$e(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,s){let l=this.prepareExternalUrl(r+$e(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(me),u.LFG(et,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=ke(ze(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+$e(i))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=$e,n.joinWithSlash=Me,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(u.LFG(ge))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Te(){return new Ee((0,u.LFG)(ge))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}class al{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let yr=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,l)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new al(r.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)i.remove(null===s?void 0:s);else if(null!==s){const h=i.get(s);i.move(h,l),Vn(h,r)}});for(let r=0,s=i.length;r<s;r++){const h=i.get(r).context;h.index=r,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Vn(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Vn(n,e){n.context.$implicit=e.item}let Bn=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new ur,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ll("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ll("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class ur{constructor(){this.$implicit=null,this.ngIf=null}}function ll(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class cl{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Ds=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),vr=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new cl(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(Ds,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),us=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const In="browser";function Od(n){return"server"===n}let fl=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new ti((0,u.LFG)(se),window)}),n})();class ti{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Io(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=rc(this.window.history)||rc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function rc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ss extends class To extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){ie||(ie=n)}(new Ss)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Er(){return ha=ha||document.querySelector("base"),ha?ha.getAttribute("href"):null}();return null==t?null:function pl(n){so=so||document.createElement("a"),so.setAttribute("href",n);const e=so.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ha=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ad(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let so,ha=null;const at=new u.OlP("TRANSITION_ID"),gu=[{provide:u.ip1,useFactory:function sc(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const i=L(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[at,se,u.zs3],multi:!0}];let oc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const So=new u.OlP("EventManagerPlugins");let Ao=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const l=r[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(So),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class fa{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=L().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let ac=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends ac{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,r.push(i.appendChild(l))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(Bt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Bt))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Bt(n){L().remove(n)}const pa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xo=/%COMP%/g;function _a(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?_a(n,r,t):(r=r.replace(xo,n),t.push(r))}return t}function lc(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let As=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ui(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case u.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new zr(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case u.ifc.ShadowDom:return new Fd(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=_a(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ao),u.LFG(Se),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class ui{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pa[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ko(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(ko(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=pa[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=pa[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,i,r&u.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,lc(i)):this.eventManager.addEventListener(e,t,lc(i))}}function ko(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class zr extends ui{constructor(e,t,i,r){super(e),this.component=i;const s=_a(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function ml(n){return"_ngcontent-%COMP%".replace(xo,n)}(r+"-"+i.id),this.hostAttr=function ga(n){return"_nghost-%COMP%".replace(xo,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Fd extends ui{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=_a(r.id,r.styles,[]);for(let l=0;l<s.length;l++){const h=document.createElement("style");h.textContent=s[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ld=(()=>{class n extends fa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const ya=["alt","control","meta","shift"],va={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ba={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},cc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let gl=(()=>{class n extends fa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),l=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let l="";if(ya.forEach(p=>{const y=i.indexOf(p);y>-1&&(i.splice(y,1),l+=p+".")}),l+=s,0!=i.length||0===s.length)return null;const h={};return h.domEventName=r,h.fullKey=l,h}static getEventFullKey(t){let i="",r=function vu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ba.hasOwnProperty(e)&&(e=ba[e]))}return va[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),ya.forEach(s=>{s!=r&&cc[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const wu=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:In},{provide:u.g9A,useValue:function uc(){Ss.makeCurrent()},multi:!0},{provide:se,useFactory:function hc(){return(0,u.RDi)(document),document},deps:[]}]),pc=new u.OlP(""),ni=[{provide:u.rWj,useClass:class _u{addToWindow(e){u.dqk.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(i=>{const r=u.dqk.getAllAngularTestabilities();let s=r.length,l=!1;const h=function(p){l=l||p,s--,0==s&&i(l)};r.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],xs=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function dc(){return new u.qLn},deps:[]},{provide:So,useClass:Ld,multi:!0,deps:[se,u.R0b,u.Lbi]},{provide:So,useClass:gl,multi:!0,deps:[se]},{provide:As,useClass:As,deps:[Ao,Se,u.AFp]},{provide:u.FYo,useExisting:As},{provide:ac,useExisting:Se},{provide:Se,useClass:Se,deps:[se]},{provide:Ao,useClass:Ao,deps:[So,u.R0b]},{provide:class wi{},useClass:oc,deps:[]},[]];let dn=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:at,useExisting:u.AFp},gu]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pc,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[...xs,...ni],imports:[us,u.hGG]}),n})(),mc=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(se))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function Tf(){return new mc((0,u.LFG)(se))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let vc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new(t||n):u.LFG($d),i},providedIn:"root"}),n})(),$d=(()=>{class n extends vc{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case u.q3G.NONE:return i;case u.q3G.HTML:return(0,u.qzn)(i,"HTML")?(0,u.z3N)(i):(0,u.EiD)(this._doc,String(i)).toString();case u.q3G.STYLE:return(0,u.qzn)(i,"Style")?(0,u.z3N)(i):i;case u.q3G.SCRIPT:if((0,u.qzn)(i,"Script"))return(0,u.z3N)(i);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.qzn)(i,"URL")?(0,u.z3N)(i):(0,u.mCW)(String(i));case u.q3G.RESOURCE_URL:if((0,u.qzn)(i,"ResourceURL"))return(0,u.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,u.JVY)(t)}bypassSecurityTrustStyle(t){return(0,u.L6k)(t)}bypassSecurityTrustScript(t){return(0,u.eBb)(t)}bypassSecurityTrustUrl(t){return(0,u.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,u.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(se))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function Wr(n){return new $d(n.get(se))}(u.LFG(u.zs3)),i},providedIn:"root"}),n})();var nn=V(8996),Ms=V(3269);function Be(...n){const e=(0,Ms.yG)(n);return(0,nn.D)(n,e)}var kt=V(7579);class ii extends kt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}var qn=V(8306);const{isArray:vl}=Array,{getPrototypeOf:bc,prototype:wc,keys:Ec}=Object;function Du(n){if(1===n.length){const e=n[0];if(vl(e))return{args:e,keys:null};if(function Lo(n){return n&&"object"==typeof n&&bc(n)===wc}(e)){const t=Ec(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var ao=V(4671),ot=V(4004);const{isArray:Cc}=Array;function ks(n){return(0,ot.U)(e=>function Da(n,e){return Cc(e)?n(...e):n(e)}(n,e))}function bl(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}var Dn=V(5403),Dc=V(9672);function Dr(...n){const e=(0,Ms.yG)(n),t=(0,Ms.jO)(n),{args:i,keys:r}=Du(n);if(0===i.length)return(0,nn.D)([],e);const s=new qn.y(function Iu(n,e,t=ao.y){return i=>{Ic(e,()=>{const{length:r}=n,s=new Array(r);let l=r,h=r;for(let p=0;p<r;p++)Ic(e,()=>{const y=(0,nn.D)(n[p],e);let E=!1;y.subscribe((0,Dn.x)(i,I=>{s[p]=I,E||(E=!0,h--),h||i.next(t(s.slice()))},()=>{--l||i.complete()}))},i)},i)}}(i,e,r?l=>bl(r,l):ao.y));return t?s.pipe(ks(t)):s}function Ic(n,e,t){n?(0,Dc.f)(t,n,e):e()}var Ir=V(576);function Vo(n,e){const t=(0,Ir.m)(n)?n:()=>n,i=r=>r.error(t());return new qn.y(e?r=>e.schedule(i,0,r):i)}const Rs=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ds=V(8189);function Tr(...n){return function Ki(){return(0,ds.J)(1)}()((0,nn.D)(n,(0,Ms.yG)(n)))}var hs=V(8421);function fs(n){return new qn.y(e=>{(0,hs.Xf)(n()).subscribe(e)})}var xi=V(515),Os=V(727),_n=V(4482);function Zt(){return(0,_n.e)((n,e)=>{let t=null;n._refCount++;const i=(0,Dn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class Pf extends qn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,_n.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Os.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Dn.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Os.w0.EMPTY)}return e}refCount(){return Zt()(this)}}function Ei(n,e){return(0,_n.e)((t,i)=>{let r=null,s=0,l=!1;const h=()=>l&&!r&&i.complete();t.subscribe((0,Dn.x)(i,p=>{r?.unsubscribe();let y=0;const E=s++;(0,hs.Xf)(n(p,E)).subscribe(r=(0,Dn.x)(i,I=>i.next(e?e(p,I,E,y++):I),()=>{r=null,h()}))},()=>{l=!0,h()}))})}function Zi(n){return n<=0?()=>xi.E:(0,_n.e)((e,t)=>{let i=0;e.subscribe((0,Dn.x)(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Kr(...n){const e=(0,Ms.yG)(n);return(0,_n.e)((t,i)=>{(e?Tr(n,t,e):Tr(n,t)).subscribe(i)})}function Jm(n,e,t,i,r){return(s,l)=>{let h=t,p=e,y=0;s.subscribe((0,Dn.x)(l,E=>{const I=y++;p=h?n(p,E,I):(h=!0,E),i&&l.next(p)},r&&(()=>{h&&l.next(p),l.complete()})))}}function Ia(n,e){return(0,_n.e)(Jm(n,e,arguments.length>=2,!0))}function kn(n,e){return(0,_n.e)((t,i)=>{let r=0;t.subscribe((0,Dn.x)(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Zr(n){return(0,_n.e)((e,t)=>{let s,i=null,r=!1;i=e.subscribe((0,Dn.x)(t,void 0,void 0,l=>{s=(0,hs.Xf)(n(l,Zr(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}var Yi=V(5577);function wl(n,e){return(0,Ir.m)(e)?(0,Yi.z)(n,e,1):(0,Yi.z)(n,1)}function Wn(n){return n<=0?()=>xi.E:(0,_n.e)((e,t)=>{let i=[];e.subscribe((0,Dn.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Tu(n=El){return(0,_n.e)((e,t)=>{let i=!1;e.subscribe((0,Dn.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function El(){return new Rs}function Su(n){return(0,_n.e)((e,t)=>{let i=!1;e.subscribe((0,Dn.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Rn(n,e){const t=arguments.length>=2;return i=>i.pipe(n?kn((r,s)=>n(r,s,i)):ao.y,Zi(1),t?Su(e):Tu(()=>new Rs))}var yn=V(8505);function Uo(n){return(0,_n.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Li{constructor(e,t){this.id=e,this.url=t}}class Ho extends Li{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ps extends Li{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Au extends Li{constructor(e,t,i){super(e,t),this.reason=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xu extends Li{constructor(e,t,i){super(e,t),this.error=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Sc extends Li{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ns extends Li{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vi extends Li{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Mu extends Li{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lo extends Li{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zd{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ta{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ac{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ku{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ru{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cl{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nf{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Vt="primary";class Sa{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jo(n){return new Sa(n)}const Sr="Redirecting to ",Fs="ngNavigationCancelingError";function Aa(n){const e=Error("NavigationCancelingError: "+(n||""));return e[Fs]=!0,e}function Ls(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const l=i[s],h=n[s];if(l.startsWith(":"))r[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function ri(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!xa(n[r],e[r]))return!1;return!0}function xa(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function Ma(n){return Array.prototype.concat.apply([],n)}function xc(n){return n.length>0?n[n.length-1]:null}function hi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function co(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,nn.D)(Promise.resolve(n)):Be(n)}const T=!1,R={exact:function Ae(n,e,t){if(!Ar(n.segments,e.segments)||!At(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!Ae(n.children[i],e.children[i],t))return!1;return!0},subset:ht},H={exact:function ue(n,e){return ri(n,e)},subset:function Ye(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xa(n[t],e[t]))},ignored:()=>!0};function te(n,e,t){return R[t.paths](n.root,e.root,t.matrixParams)&&H[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ht(n,e,t){return Tt(n,e,e.segments,t)}function Tt(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Ar(r,t)||e.hasChildren()||!At(r,t,i))}if(n.segments.length===t.length){if(!Ar(n.segments,t)||!At(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!ht(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ar(n.segments,r)&&At(n.segments,r,i)&&n.children[Vt])&&Tt(n.children[Vt],e,s,i)}}function At(n,e,t){return e.every((i,r)=>H[t](n[r].parameters,i.parameters))}class ct{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jo(this.queryParams)),this._queryParamMap}toString(){return Ra.serialize(this)}}class mt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,hi(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yr(this)}}class fi{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=jo(this.parameters)),this._parameterMap}toString(){return Pu(this)}}function Ar(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class ka{}class Il{parse(e){const t=new Nu(e);return new ct(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ps(e.root,!0)}`,i=function Gw(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Mc(t)}=${Mc(r)}`).join("&"):`${Mc(t)}=${Mc(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function py(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ra=new Il;function Yr(n){return n.segments.map(e=>Pu(e)).join("/")}function ps(n,e){if(!n.hasChildren())return Yr(n);if(e){const t=n.children[Vt]?ps(n.children[Vt],!1):"",i=[];return hi(n.children,(r,s)=>{s!==Vt&&i.push(`${s}:${ps(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function xr(n,e){let t=[];return hi(n.children,(i,r)=>{r===Vt&&(t=t.concat(e(i,r)))}),hi(n.children,(i,r)=>{r!==Vt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Vt?[ps(n.children[Vt],!1)]:[`${r}:${ps(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vt]?`${Yr(n)}/${t[0]}`:`${Yr(n)}/(${t.join("//")})`}}function Wd(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mc(n){return Wd(n).replace(/%3B/gi,";")}function Lf(n){return Wd(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oa(n){return decodeURIComponent(n)}function Vf(n){return Oa(n.replace(/\+/g,"%20"))}function Pu(n){return`${Lf(n.path)}${function eg(n){return Object.keys(n).map(e=>`;${Lf(e)}=${Lf(n[e])}`).join("")}(n.parameters)}`}const tg=/^[^\/()?;=#]+/;function Bf(n){const e=n.match(tg);return e?e[0]:""}const Uf=/^[^=?&#]+/,ng=/^[^&#]+/;class Nu{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mt([],{}):new mt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Vt]=new mt(e,t)),i}parseSegment(){const e=Bf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,T);return this.capture(e),new fi(Oa(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Bf(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Bf(this.remaining);r&&(i=r,this.capture(i))}e[Oa(t)]=Oa(i)}parseQueryParam(e){const t=function my(n){const e=n.match(Uf);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const l=function Kd(n){const e=n.match(ng);return e?e[0]:""}(this.remaining);l&&(i=l,this.capture(i))}const r=Vf(t),s=Vf(i);if(e.hasOwnProperty(r)){let l=e[r];Array.isArray(l)||(l=[l],e[r]=l),l.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Bf(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new u.vHH(4010,T);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Vt);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[Vt]:new mt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,T)}}class Tl{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Hf(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Hf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=jf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return jf(e,this._root).map(t=>t.value)}}function Hf(n,e){if(n===e.value)return e;for(const t of e.children){const i=Hf(n,t);if(i)return i}return null}function jf(n,e){if(n===e.value)return[e];for(const t of e.children){const i=jf(n,t);if(i.length)return i.unshift(e),i}return[]}class Pa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function $o(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Fu extends Tl{constructor(e,t){super(e),this.snapshot=t,zf(this,e)}toString(){return this.snapshot.toString()}}function $f(n,e){const t=function ig(n,e){const l=new Zd([],{},{},"",{},Vt,e,null,n.root,-1,{});return new Yd("",new Pa(l,[]))}(n,e),i=new ii([new fi("",{})]),r=new ii({}),s=new ii({}),l=new ii({}),h=new ii(""),p=new Sl(i,r,l,h,s,Vt,e,t.root);return p.snapshot=t.root,new Fu(new Pa(p,[]),t)}class Sl{constructor(e,t,i,r,s,l,h,p){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=h,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ot.U)(e=>jo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ot.U)(e=>jo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Na(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Gf(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Zd{constructor(e,t,i,r,s,l,h,p,y,E,I,k){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=h,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=E,this._correctedLastPathIndex=k??E,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Yd extends Tl{constructor(e,t){super(t),this.url=e,zf(this,t)}toString(){return qf(this._root)}}function zf(n,e){e.value._routerState=n,e.children.forEach(t=>zf(n,t))}function qf(n){const e=n.children.length>0?` { ${n.children.map(qf).join(", ")} } `:"";return`${n.value}${e}`}function Vs(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ri(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ri(e.params,t.params)||n.params.next(t.params),function Ou(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ri(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ri(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function uo(n,e){const t=ri(n.params,e.params)&&function Dl(n,e){return Ar(n,e)&&n.every((t,i)=>ri(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||uo(n.parent,e.parent))}function kc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function rg(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return kc(n,i,r);return kc(n,i)})}(n,e,t);return new Pa(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>kc(n,h)),l}}const i=function _y(n){return new Sl(new ii(n.url),new ii(n.params),new ii(n.queryParams),new ii(n.fragment),new ii(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>kc(n,s));return new Pa(i,r)}}function Qd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bs(n){return"object"==typeof n&&null!=n&&n.outlets}function Kf(n,e,t,i,r){let s={};if(i&&hi(i,(h,p)=>{s[p]=Array.isArray(h)?h.map(y=>`${y}`):`${h}`}),n===e)return new ct(t,s,r);const l=sg(n,e,t);return new ct(l,s,r)}function sg(n,e,t){const i={};return hi(n.children,(r,s)=>{i[s]=r===e?t:sg(r,e,t)}),new mt(n.segments,i)}class Xd{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Qd(i[0]))throw new u.vHH(4003,false);const r=i.find(Bs);if(r&&r!==xc(i))throw new u.vHH(4004,false)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Lu{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function Rc(n,e,t){if(n||(n=new mt([],{})),0===n.segments.length&&n.hasChildren())return Bu(n,e,t);const i=function Jd(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const l=n.segments[r],h=t[i];if(Bs(h))break;const p=`${h}`,y=i<t.length-1?t[i+1]:null;if(r>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!by(p,y,l))return s;i+=2}else{if(!by(p,{},l))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new mt(n.segments.slice(0,i.pathIndex),{});return s.children[Vt]=new mt(n.segments.slice(i.pathIndex),n.children),Bu(s,0,r)}return i.match&&0===r.length?new mt(n.segments,{}):i.match&&!n.hasChildren()?eh(n,e,t):i.match?Bu(n,0,r):eh(n,e,t)}function Bu(n,e,t){if(0===t.length)return new mt(n.segments,{});{const i=function ms(n){return Bs(n[0])?n[0].outlets:{[Vt]:n}}(t),r={};return hi(i,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[l]=Rc(n.children[l],e,s))}),hi(n.children,(s,l)=>{void 0===i[l]&&(r[l]=s)}),new mt(n.segments,r)}}function eh(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Bs(s)){const p=qw(s.outlets);return new mt(i,p)}if(0===r&&Qd(t[0])){i.push(new fi(n.segments[e].path,vy(t[0]))),r++;continue}const l=Bs(s)?s.outlets[Vt]:`${s}`,h=r<t.length-1?t[r+1]:null;l&&h&&Qd(h)?(i.push(new fi(l,vy(h))),r+=2):(i.push(new fi(l,{})),r++)}return new mt(i,{})}function qw(n){const e={};return hi(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=eh(new mt([],{}),0,t))}),e}function vy(n){const e={};return hi(n,(t,i)=>e[i]=`${t}`),e}function by(n,e,t){return n==t.path&&ri(e,t.parameters)}class Zf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Fa,this.attachRef=null}}class Fa{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Zf,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}const La=!1;let Yf=(()=>{class n{constructor(t,i,r,s,l){this.parentContexts=t,this.location=i,this.changeDetector=s,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=r||Vt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,La);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,La);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,La);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new u.vHH(4013,La);this._activatedRoute=t;const r=this.location,l=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new Ww(t,h,r.injector);if(i&&function th(n){return!!n.resolveComponentFactory}(i)){const y=i.resolveComponentFactory(l);this.activated=r.createComponent(y,r.length,p)}else this.activated=r.createComponent(l,{index:r.length,injector:p,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Fa),u.Y36(u.s_b),u.$8M("name"),u.Y36(u.sBO),u.Y36(u.lqb))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Ww{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Sl?this.route:e===Fa?this.childContexts:this.parent.get(e,t)}}let nh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&u._UZ(0,"router-outlet")},dependencies:[Yf],encapsulation:2}),n})();function ag(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Jf(n){const e=n.children&&n.children.map(Jf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Vt&&(t.component=nh),t}function gs(n){return n.outlet||Vt}function Va(n,e){const t=n.filter(i=>gs(i)===e);return t.push(...n.filter(i=>gs(i)!==e)),t}function ep(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Cy{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Vs(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=$o(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,r[l],i),delete r[l]}),hi(r,(s,l)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const l=i.getContext(r.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=$o(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);if(i&&i.outlet){const l=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=$o(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=$o(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Cl(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ku(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(Vs(r),r===s)if(r.component){const l=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const l=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Vs(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=ep(r.snapshot),p=h?.get(u._Vd)??null;l.attachRef=null,l.route=r,l.resolver=p,l.injector=h,l.outlet&&l.outlet.activateWith(r,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,i)}}function sh(n){return"function"==typeof n}function Al(n){return n instanceof ct}const Uu=Symbol("INITIAL_VALUE");function Go(){return Ei(n=>Dr(n.map(e=>e.pipe(Zi(1),Kr(Uu)))).pipe(Ia((e,t)=>{let i=!1;return t.reduce((r,s,l)=>r!==Uu?r:(s===Uu&&(i=!0),i||!1!==s&&l!==t.length-1&&!Al(s)?r:s),e)},Uu),kn(e=>e!==Uu),(0,ot.U)(e=>Al(e)?e:!0===e),Zi(1)))}const Oc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Qi(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Oc}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Ls)(t,n,e);if(!r)return{...Oc};const s={};hi(r.posParams,(h,p)=>{s[p]=h.path});const l=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:l,positionalParamSegments:r.posParams??{}}}function Ba(n,e,t,i,r="corrected"){if(t.length>0&&function tp(n,e,t){return t.some(i=>ah(n,e,i)&&gs(i)!==Vt)}(n,t,i)){const l=new mt(e,function dg(n,e,t,i){const r={};r[Vt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&gs(s)!==Vt){const l=new mt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,r[gs(s)]=l}return r}(n,e,i,new mt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function np(n,e,t){return t.some(i=>ah(n,e,i))}(n,t,i)){const l=new mt(n.segments,function ug(n,e,t,i,r,s){const l={};for(const h of i)if(ah(n,t,h)&&!r[gs(h)]){const p=new mt([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,l[gs(h)]=p}return{...r,...l}}(n,e,t,i,n.children,r));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const s=new mt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function ah(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ip(n,e,t,i){return!!(gs(n)===i||i!==Vt&&ah(e,t,n))&&("**"===n.path||Qi(e,n,t).matched)}function lh(n,e,t){return 0===e.length&&!n.children[t]}const Us=!1;class Hu{constructor(e){this.segmentGroup=e||null}}class hg{constructor(e){this.urlTree=e}}function Pc(n){return Vo(new Hu(n))}function fg(n){return Vo(new hg(n))}class ch{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=Ba(this.urlTree.root,[],[],this.config).segmentGroup,t=new mt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Vt).pipe((0,ot.U)(s=>this.createUrlTree(Tn(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Zr(s=>{if(s instanceof hg)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Hu?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Vt).pipe((0,ot.U)(r=>this.createUrlTree(Tn(r),e.queryParams,e.fragment))).pipe(Zr(r=>{throw r instanceof Hu?this.noMatchError(r):r}))}noMatchError(e){return new u.vHH(4002,Us)}createUrlTree(e,t,i){const r=e.segments.length>0?new mt([],{[Vt]:e}):e;return new ct(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,ot.U)(s=>new mt([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,nn.D)(r).pipe(wl(s=>{const l=i.children[s],h=Va(t,s);return this.expandSegmentGroup(e,h,l,s).pipe((0,ot.U)(p=>({segment:p,outlet:s})))}),Ia((s,l)=>(s[l.outlet]=l.segment,s),{}),function Gd(n,e){const t=arguments.length>=2;return i=>i.pipe(n?kn((r,s)=>n(r,s,i)):ao.y,Wn(1),t?Su(e):Tu(()=>new Rs))}())}expandSegment(e,t,i,r,s,l){return(0,nn.D)(i).pipe(wl(h=>this.expandSegmentAgainstRoute(e,t,i,h,r,s,l).pipe(Zr(y=>{if(y instanceof Hu)return Be(null);throw y}))),Rn(h=>!!h),Zr((h,p)=>{if(h instanceof Rs||"EmptyError"===h.name)return lh(t,r,s)?Be(new mt([],{})):Pc(t);throw h}))}expandSegmentAgainstRoute(e,t,i,r,s,l,h){return ip(r,t,s,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l):Pc(t):Pc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?fg(s):this.lineralizeSegments(i,s).pipe((0,Yi.z)(l=>{const h=new mt(l,{});return this.expandSegment(e,h,t,l,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l){const{matched:h,consumedSegments:p,remainingSegments:y,positionalParamSegments:E}=Qi(t,r,s);if(!h)return Pc(t);const I=this.applyRedirectCommands(p,r.redirectTo,E);return r.redirectTo.startsWith("/")?fg(I):this.lineralizeSegments(r,I).pipe((0,Yi.z)(k=>this.expandSegment(e,t,i,k.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return e=ag(i,e),i.loadChildren?(i._loadedRoutes?Be({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe((0,ot.U)(I=>(i._loadedRoutes=I.routes,i._loadedInjector=I.injector,new mt(r,{})))):Be(new mt(r,{}));const{matched:l,consumedSegments:h,remainingSegments:p}=Qi(t,i,r);return l?(e=ag(i,e),this.getChildConfig(e,i,r).pipe((0,Yi.z)(E=>{const I=E.injector??e,k=E.routes,{segmentGroup:N,slicedSegments:U}=Ba(t,h,p,k),J=new mt(N.segments,N.children);if(0===U.length&&J.hasChildren())return this.expandChildren(I,k,J).pipe((0,ot.U)(nt=>new mt(h,nt)));if(0===k.length&&0===U.length)return Be(new mt(h,{}));const ce=gs(i)===s;return this.expandSegment(I,J,k,U,ce?Vt:s,!0).pipe((0,ot.U)(Ke=>new mt(h.concat(Ke.segments),Ke.children)))}))):Pc(t)}getChildConfig(e,t,i){return t.children?Be({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Be({routes:t._loadedRoutes,injector:t._loadedInjector}):this.runCanLoadGuards(e,t,i).pipe((0,Yi.z)(r=>r?this.configLoader.loadChildren(e,t).pipe((0,yn.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function wn(n){return Vo(Aa(Us))}())):Be({routes:[],injector:e})}runCanLoadGuards(e,t,i){const r=t.canLoad;return r&&0!==r.length?Be(r.map(l=>{const h=e.get(l);return co(function Iy(n){return n&&sh(n.canLoad)}(h)?h.canLoad(t,i):h(t,i))})).pipe(Go(),(0,yn.b)(l=>{if(!Al(l))return;const h=Aa(Sr+this.urlSerializer.serialize(l));throw h.url=l,h}),(0,ot.U)(l=>!0===l)):Be(!0)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Be(i);if(r.numberOfChildren>1||!r.children[Vt])return Vo(new u.vHH(4e3,Us));r=r.children[Vt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new ct(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return hi(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const h=r.substring(1);i[s]=t[h]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let l={};return hi(t.children,(h,p)=>{l[p]=this.createSegmentGroup(e,h,i,r)}),new mt(s,l)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new u.vHH(4001,Us);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function Tn(n){const e={};for(const i of Object.keys(n.children)){const s=Tn(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function rp(n){if(1===n.numberOfChildren&&n.children[Vt]){const e=n.children[Vt];return new mt(n.segments.concat(e.segments),e.children)}return n}(new mt(n.segments,e))}class $u{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Gu{constructor(e,t){this.component=e,this.route=t}}function Ty(n,e,t){const i=n._root;return Nc(i,e?e._root:null,t,[i.value])}function dh(n,e,t){return(ep(e)??t).get(n)}function Nc(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=$o(e);return n.children.forEach(l=>{(function Sy(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const p=function mg(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ar(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ar(n.url,e.url)||!ri(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uo(n,e)||!ri(n.queryParams,e.queryParams);default:return!uo(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new $u(i)):(s.data=l.data,s._resolvedData=l._resolvedData),Nc(n,e,s.component?h?h.children:null:t,i,r),p&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new Gu(h.outlet.component,l))}else l&&v(e,h,r),r.canActivateChecks.push(new $u(i)),Nc(n,null,s.component?h?h.children:null:t,i,r)})(l,s[l.value.outlet],t,i.concat([l.value]),r),delete s[l.value.outlet]}),hi(s,(l,h)=>v(l,t.getContext(h),r)),r}function v(n,e,t){const i=$o(n),r=n.value;hi(i,(s,l)=>{v(s,r.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Gu(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class wt{}function _t(n){return new qn.y(e=>e.error(n))}class pi{constructor(e,t,i,r,s,l){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=l}recognize(){const e=Ba(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Vt);if(null===t)return null;const i=new Zd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Pa(i,t),s=new Yd(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=Na(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const l=t.children[s],h=Va(e,s),p=this.processSegmentGroup(h,l,s);if(null===p)return null;i.push(...p)}const r=fh(i);return function Fc(n){n.sort((e,t)=>e.value.outlet===Vt?-1:t.value.outlet===Vt?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const l=this.processSegmentAgainstRoute(s,t,i,r);if(null!==l)return l}return lh(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!ip(e,t,i,r))return null;let s,l=[],h=[];if("**"===e.path){const N=i.length>0?xc(i).parameters:{},U=op(t)+i.length;s=new Zd(i,N,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Lc(e),gs(e),e.component??e._loadedComponent??null,e,Ua(t),U,zu(e),U)}else{const N=Qi(t,e,i);if(!N.matched)return null;l=N.consumedSegments,h=N.remainingSegments;const U=op(t)+l.length;s=new Zd(l,N.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Lc(e),gs(e),e.component??e._loadedComponent??null,e,Ua(t),U,zu(e),U)}const p=function hh(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:y,slicedSegments:E}=Ba(t,l,h,p.filter(N=>void 0===N.redirectTo),this.relativeLinkResolution);if(0===E.length&&y.hasChildren()){const N=this.processChildren(p,y);return null===N?null:[new Pa(s,N)]}if(0===p.length&&0===E.length)return[new Pa(s,[])];const I=gs(e)===r,k=this.processSegment(p,y,E,I?Vt:r);return null===k?null:[new Pa(s,k)]}}function sp(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function fh(n){const e=[],t=new Set;for(const i of n){if(!sp(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=fh(i.children);e.push(new Pa(i.value,r))}return e.filter(i=>!t.has(i))}function Ua(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function op(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Lc(n){return n.data||{}}function zu(n){return n.resolve||{}}const mh=Symbol("RouteTitle");function Yw(n){return"string"==typeof n.title||null===n.title}function ky(n){return Ei(e=>{const t=n(e);return t?(0,nn.D)(t).pipe((0,ot.U)(()=>e)):Be(e)})}class XS extends class QS{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const _g=new u.OlP("ROUTES");let ap=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Be(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=co(t.loadComponent()).pipe((0,yn.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Uo(()=>{this.componentLoaders.delete(t)})),r=new Pf(i,()=>new kt.x).pipe(Zt());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Be({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,ot.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(i);let p,y,E=!1;Array.isArray(h)?y=h:(p=h.create(t).injector,y=Ma(p.get(_g,[],u.XFs.Self|u.XFs.Optional)));return{routes:y.map(Jf),injector:p}}),Uo(()=>{this.childrenLoaders.delete(i)})),l=new Pf(s,()=>new kt.x).pipe(Zt());return this.childrenLoaders.set(i,l),l}loadModuleFactoryOrRoutes(t){return co(t()).pipe((0,Yi.z)(i=>i instanceof u.YKP||Array.isArray(i)?Be(i):(0,nn.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3),u.LFG(u.Sil))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Ry{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function JS(n){throw n}function eE(n,e,t){return e.parse("/")}const tE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Xi=(()=>{class n{constructor(t,i,r,s,l,h,p){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new kt.x,this.errorHandler=JS,this.malformedUriErrorHandler=eE,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Be(void 0),this.urlHandlingStrategy=new Ry,this.routeReuseStrategy=new XS,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(ap),this.configLoader.onLoadEndListener=k=>this.triggerEvent(new Ta(k)),this.configLoader.onLoadStartListener=k=>this.triggerEvent(new zd(k)),this.ngModule=l.get(u.h0i),this.console=l.get(u.c2e);const I=l.get(u.R0b);this.isNgZoneEnabled=I instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function S(){return new ct(new mt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=$f(this.currentUrlTree,this.rootComponentType),this.transitions=new ii({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(kn(r=>0!==r.id),(0,ot.U)(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Ei(r=>{let s=!1,l=!1;return Be(r).pipe((0,yn.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ei(h=>{const p=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return iE(h.source)&&(this.browserUrlTree=h.extractedUrl),Be(h).pipe(Ei(I=>{const k=this.transitions.getValue();return i.next(new Ho(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),k!==this.transitions.getValue()?xi.E:Promise.resolve(I)}),function zo(n,e,t,i){return Ei(r=>function ju(n,e,t,i,r){return new ch(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe((0,ot.U)(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,yn.b)(I=>{this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects}}),function gg(n,e,t,i,r){return(0,Yi.z)(s=>function Mi(n,e,t,i,r="emptyOnly",s="legacy"){try{const l=new pi(n,e,t,i,r,s).recognize();return null===l?_t(new wt):Be(l)}catch(l){return _t(l)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe((0,ot.U)(l=>({...s,targetSnapshot:l}))))}(this.rootComponentType,this.config,I=>this.serializeUrl(I),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,yn.b)(I=>{if("eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const N=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(N,I)}this.browserUrlTree=I.urlAfterRedirects}const k=new Sc(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);i.next(k)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:N,source:U,restoredState:J,extras:ce}=h,Ue=new Ho(k,this.serializeUrl(N),U,J);i.next(Ue);const Ke=$f(N,this.rootComponentType).snapshot;return Be({...h,targetSnapshot:Ke,urlAfterRedirects:N,extras:{...ce,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),xi.E}),(0,yn.b)(h=>{const p=new Ns(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,ot.U)(h=>({...h,guards:Ty(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function m(n,e){return(0,Yi.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?Be({...t,guardsResult:!0}):function _(n,e,t,i){return(0,nn.D)(n).pipe((0,Yi.z)(r=>function He(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Be(s.map(h=>{const p=dh(h,e,r);return co(function oh(n){return n&&sh(n.canDeactivate)}(p)?p.canDeactivate(n,e,t,i):p(n,e,t,i)).pipe(Rn())})).pipe(Go()):Be(!0)}(r.component,r.route,t,e,i)),Rn(r=>!0!==r,!0))}(l,i,r,n).pipe((0,Yi.z)(h=>h&&function Dy(n){return"boolean"==typeof n}(h)?function w(n,e,t,i){return(0,nn.D)(e).pipe(wl(r=>Tr(function P(n,e){return null!==n&&e&&e(new Ac(n)),Be(!0)}(r.route.parent,i),function M(n,e){return null!==n&&e&&e(new Ru(n)),Be(!0)}(r.route,i),function de(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function uh(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>fs(()=>Be(l.guards.map(p=>{const y=dh(p,l.node,t);return co(function xl(n){return n&&sh(n.canActivateChild)}(y)?y.canActivateChild(i,n):y(i,n)).pipe(Rn())})).pipe(Go())));return Be(s).pipe(Go())}(n,r.path,t),function X(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Be(!0);const r=i.map(s=>fs(()=>{const l=dh(s,e,t);return co(function cg(n){return n&&sh(n.canActivate)}(l)?l.canActivate(e,n):l(e,n)).pipe(Rn())}));return Be(r).pipe(Go())}(n,r.route,t))),Rn(r=>!0!==r,!0))}(i,s,n,e):Be(h)),(0,ot.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,yn.b)(h=>{if(Al(h.guardsResult)){const y=Aa(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw y.url=h.guardsResult,y}const p=new Vi(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),kn(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),ky(h=>{if(h.guards.canActivateChecks.length)return Be(h).pipe((0,yn.b)(p=>{const y=new Mu(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),Ei(p=>{let y=!1;return Be(p).pipe(function Vc(n,e){return(0,Yi.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Be(t);let s=0;return(0,nn.D)(r).pipe(wl(l=>function xy(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!Yw(r)&&(s[mh]=r.title),function Zw(n,e,t,i){const r=function ZS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Be({});const s={};return(0,nn.D)(r).pipe((0,Yi.z)(l=>function My(n,e,t,i){const r=dh(n,e,i);return co(r.resolve?r.resolve(e,t):r(e,t))}(n[l],e,t,i).pipe(Rn(),(0,yn.b)(h=>{s[l]=h}))),Wn(1),function Tc(n){return(0,ot.U)(()=>n)}(s),Zr(l=>l instanceof Rs?xi.E:Vo(l)))}(s,n,e,i).pipe((0,ot.U)(l=>(n._resolvedData=l,n.data=Na(n,t).resolve,r&&Yw(r)&&(n.data[mh]=r.title),null)))}(l.route,i,n,e)),(0,yn.b)(()=>s++),Wn(1),(0,Yi.z)(l=>s===r.length?Be(t):xi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,yn.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,yn.b)(p=>{const y=new lo(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),ky(h=>{const p=y=>{const E=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,yn.b)(I=>{y.component=I}),(0,ot.U)(()=>{})));for(const I of y.children)E.push(...p(I));return E};return Dr(p(h.targetSnapshot.root)).pipe(Su(),Zi(1))}),ky(()=>this.afterPreactivation()),(0,ot.U)(h=>{const p=function gy(n,e,t){const i=kc(n,e._root,t?t._root:void 0);return new Fu(i,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return{...h,targetRouterState:p}}),(0,yn.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,ot.U)(i=>(new Cy(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,yn.b)({next(){s=!0},complete(){s=!0}}),Uo(()=>{s||l||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Zr(h=>{if(l=!0,function Ff(n){return n&&n[Fs]}(h)){const p=Al(h.url);p||(this.navigated=!0,this.restoreHistory(r,!0));const y=new Au(r.id,this.serializeUrl(r.extractedUrl),h.message);if(i.next(y),p){const E=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),I={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||iE(r.source)};this.scheduleNavigation(E,"imperative",null,I,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new xu(r.id,this.serializeUrl(r.extractedUrl),h);i.next(p);try{r.resolve(this.errorHandler(h))}catch(y){r.reject(y)}}return xi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const h={...s};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(r.state=h)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Jf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:l,queryParamsHandling:h,preserveFragment:p}=i,y=r||this.routerState.root,E=p?this.currentUrlTree.fragment:l;let I=null;switch(h){case"merge":I={...this.currentUrlTree.queryParams,...s};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=s||null}return null!==I&&(I=this.removeEmptyProps(I)),function yy(n,e,t,i,r){if(0===t.length)return Kf(e.root,e.root,e.root,i,r);const s=function zw(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Xd(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return hi(s.outlets,(p,y)=>{h[y]="string"==typeof p?p.split("/"):p}),[...r,{outlets:h}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===l?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&r.push(h))}),r):[...r,s]},[]);return new Xd(t,e,i)}(t);return s.toRoot()?Kf(e.root,e.root,new mt([],{}),i,r):function l(p){const y=function Vu(n,e,t,i){return n.isAbsolute?new Lu(e.root,!0,0):-1===i?new Lu(t,t===e.root,0):function og(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new u.vHH(4005,!1);r=i.segments.length}return new Lu(i,!1,r-s)}(t,i+(Qd(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,p),E=y.processChildren?Bu(y.segmentGroup,y.index,s.commands):Rc(y.segmentGroup,y.index,s.commands);return Kf(e.root,y.segmentGroup,E,i,r)}(n.snapshot?._lastPathIndex)}(y,this.currentUrlTree,t,I,E??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Al(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function nE(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new u.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...tE}:!1===i?{...qu}:i,Al(t))return te(this.currentUrlTree,t,r);const s=this.parseUrl(t);return te(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ps(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,l){if(this.disposed)return Promise.resolve(!1);let h,p,y;l?(h=l.resolve,p=l.reject,y=l.promise):y=new Promise((k,N)=>{h=k,p=N});const E=++this.navigationId;let I;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),I=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):I=0,this.setTransition({id:E,targetPageId:I,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:h,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(k=>Promise.reject(k))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new Au(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function iE(n){return"imperative"!==n}let lp=(()=>{class n{constructor(t,i,r,s,l){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=l,this.commands=null,this.onChanges=new kt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:(0,u.D6c)(this.skipLocationChange),replaceUrl:(0,u.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,u.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Xi),u.Y36(Sl),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&u.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})(),Wu=(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new kt.x,this.subscription=t.events.subscribe(s=>{s instanceof Ps&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,i,r,s,l){if(0!==t||i||r||s||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:(0,u.D6c)(this.skipLocationChange),replaceUrl:(0,u.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,u.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Xi),u.Y36(Sl),u.Y36(ge))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,i){1&t&&u.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&u.uIk("target",i.target)("href",i.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})(),rE=(()=>{class n{constructor(t,i,r,s,l,h){this.router=t,this.element=i,this.renderer=r,this.cdr=s,this.link=l,this.linkWithHref=h,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new u.vpe,this.routerEventsSubscription=t.events.subscribe(p=>{p instanceof Ps&&this.update()})}ngAfterContentInit(){Be(this.links.changes,this.linksWithHrefs.changes,Be(null)).pipe((0,ds.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,nn.D)(t).pipe((0,ds.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function sE(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Xi),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(lp,8),u.Y36(Wu,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,lp,5),u.Suo(r,Wu,5)),2&t){let s;u.iGM(s=u.CRH())&&(i.links=s),u.iGM(s=u.CRH())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[u.TTD]}),n})();class Oy{buildTitle(e){let t,i=e.root;for(;void 0!==i;)t=this.getResolvedTitleForRoute(i)??t,i=i.children.find(r=>r.outlet===Vt);return t}getResolvedTitleForRoute(e){return e.data[mh]}}let oE=(()=>{class n extends Oy{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(mc))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class yg{}let cp=(()=>{class n{constructor(t,i,r,s,l){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(kn(t=>t instanceof Ps),wl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,u.MMx)(s.providers,t,`Route: ${s.path}`));const l=s._injector??t,h=s._loadedInjector??l;s.loadChildren&&!s._loadedRoutes||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(l,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,nn.D)(r).pipe((0,ds.J)())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Be(null);const s=r.pipe((0,Yi.z)(l=>null===l?Be(void 0):(i._loadedRoutes=l.routes,i._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(i.loadComponent&&!i._loadedComponent){const l=this.loader.loadComponent(i);return(0,nn.D)([s,l]).pipe((0,ds.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Xi),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(yg),u.LFG(ap))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ny=new u.OlP("");let Fy=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ho?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ps&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Nf&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new Nf(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ku=new u.OlP("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),lE=new u.OlP("ROUTER_FORROOT_GUARD"),Ly=new u.OlP(""),tA=[Ee,{provide:ka,useClass:Il},{provide:Xi,useFactory:function hE(n,e,t,i,r,s,l={},h,p,y,E){const I=new Xi(null,n,e,t,i,r,Ma(s));return y&&(I.urlHandlingStrategy=y),E&&(I.routeReuseStrategy=E),I.titleStrategy=p??h,function iA(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,I),I},deps:[ka,Fa,Ee,u.zs3,u.Sil,_g,Ku,oE,[Oy,new u.FiY],[class Xw{},new u.FiY],[class YS{},new u.FiY]]},Fa,{provide:Sl,useFactory:function rA(n){return n.routerState.root},deps:[Xi]},ap];function nA(){return new u.PXZ("Router",Xi)}let Vy=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[tA,[],dE(t),{provide:lE,useFactory:uE,deps:[[Xi,new u.FiY,new u.tp0]]},{provide:Ku,useValue:i||{}},i?.useHash?{provide:ge,useClass:Re}:{provide:ge,useClass:rt},{provide:Ny,useFactory:()=>{const n=(0,u.f3M)(Xi),e=(0,u.f3M)(fl),t=(0,u.f3M)(Ku);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Fy(n,e,t)}},i?.preloadingStrategy?lA(i.preloadingStrategy):[],{provide:u.PXZ,multi:!0,useFactory:nA},i?.initialNavigation?pE(i):[],[{provide:fE,useFactory:qo},{provide:u.tb,multi:!0,useExisting:fE}]]}}static forChild(t){return{ngModule:n,providers:[dE(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(lE,8),u.LFG(Xi,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function uE(n){return"guarded"}function dE(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:_g,multi:!0,useValue:n}]}function qo(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const i=n.get(Xi),r=n.get(mE);null===n.get(Uy,null,u.XFs.Optional)&&i.initialNavigation(),n.get(Ly,null,u.XFs.Optional)?.setUpPreloading(),n.get(Ny,null,u.XFs.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.next(),r.complete()}}const fE=new u.OlP("");function pE(n){return["disabled"===n.initialNavigation?[{provide:u.ip1,multi:!0,useFactory:()=>{const n=(0,u.f3M)(Xi);return()=>{n.setUpLocationChangeListener()}}},{provide:Uy,useValue:"disabled"}]:[],"enabledBlocking"===n.initialNavigation?[{provide:Uy,useValue:"enabledBlocking"},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:n=>{const e=n.get(z,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(r=>{const s=n.get(Xi),l=n.get(mE);(function i(r){const s=n.get(Xi);s.events.pipe(kn(l=>l instanceof Ps||l instanceof Au||l instanceof xu),(0,ot.U)(l=>{if(l instanceof Ps)return!0;const h=s.navigationId!==l.id,p=l instanceof Au&&-1!==l.reason.indexOf(Sr);return!(!h&&!p)&&null}),kn(l=>null!==l),Zi(1)).subscribe(()=>{r()})})(()=>{r(!0),t=!0}),s.afterPreactivation=()=>(r(!0),t||l.closed?Be(void 0):l),s.initialNavigation()}))}}]:[]]}const mE=new u.OlP("",{factory:()=>new kt.x}),Uy=new u.OlP("");function lA(n){return[cp,{provide:Ly,useExisting:cp},{provide:yg,useExisting:n}]}let Nt;try{Nt=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Nt=!1}let Zu,Ji=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function dr(n){return n===In}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Nt)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _E=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function yE(){if(Zu)return Zu;if("object"!=typeof document||!document)return Zu=new Set(_E),Zu;let n=document.createElement("input");return Zu=new Set(_E.filter(e=>(n.setAttribute("type",e),n.type===e))),Zu}let gh,Yu,bg;function up(n){return function uA(){if(null==gh&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>gh=!0}))}finally{gh=gh||!1}return gh}()?n:!!n.capture}function O1(){if(null==Yu){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Yu=!1,Yu;if("scrollBehavior"in document.documentElement.style)Yu=!0;else{const n=Element.prototype.scrollTo;Yu=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Yu}function Hy(n){if(function dA(){if(null==bg){const n=typeof document<"u"?document.head:null;bg=!(!n||!n.createShadowRoot&&!n.attachShadow)}return bg}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function wg(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Ml(n){return n.composedPath?n.composedPath()[0]:n.target}function bE(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function mp(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function jE(n){return kn((e,t)=>n<=t)}function gp(n,e=ao.y){return n=n??Zy,(0,_n.e)((t,i)=>{let r,s=!0;t.subscribe((0,Dn.x)(i,l=>{const h=e(l);(s||!n(r,h))&&(s=!1,r=h,i.next(l))}))})}function Zy(n,e){return n===e}var Yy=V(5032);function Rl(n){return(0,_n.e)((e,t)=>{(0,hs.Xf)(n).subscribe((0,Dn.x)(t,()=>t.complete(),Yy.Z)),!t.closed&&e.subscribe(t)})}function ki(n){return null!=n&&"false"!=`${n}`}function ho(n,e=0){return function $E(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function Eg(n){return Array.isArray(n)?n:[n]}function mi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Ol(n){return n instanceof u.SBq?n.nativeElement:n}var _p=V(4986);function Qy(n,e=_p.z){return(0,_n.e)((t,i)=>{let r=null,s=null,l=null;const h=()=>{if(r){r.unsubscribe(),r=null;const y=s;s=null,i.next(y)}};function p(){const y=l+n,E=e.now();if(E<y)return r=this.schedule(void 0,y-E),void i.add(r);h()}t.subscribe((0,Dn.x)(i,y=>{s=y,l=e.now(),r||(r=e.schedule(p,n),i.add(r))},()=>{h(),i.complete()},void 0,()=>{s=r=null}))})}let yp=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_h=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=Ol(t);return new qn.y(r=>{const l=this._observeElement(i).subscribe(r);return()=>{l.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new kt.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(yp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cg=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new u.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=ki(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=ho(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Qy(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(_h),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Hc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[yp]}),n})();const yh=new Set;let vh,GE=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Jy}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function zE(n){if(!yh.has(n))try{vh||(vh=document.createElement("style"),vh.setAttribute("type","text/css"),document.head.appendChild(vh)),vh.sheet&&(vh.sheet.insertRule(`@media ${n} {body{ }}`,0),yh.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ji))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Jy(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let vp=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new kt.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return ev(Eg(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=Dr(ev(Eg(t)).map(l=>this._registerQuery(l).observable));return s=Tr(s.pipe(Zi(1)),s.pipe(jE(1),Qy(0))),s.pipe((0,ot.U)(l=>{const h={matches:!1,breakpoints:{}};return l.forEach(({matches:p,query:y})=>{h.matches=h.matches||p,h.breakpoints[y]=p}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new qn.y(l=>{const h=p=>this._zone.run(()=>l.next(p));return i.addListener(h),()=>{i.removeListener(h)}}).pipe(Kr(i),(0,ot.U)(({matches:l})=>({query:t,matches:l})),Rl(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(GE),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ev(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let Dg=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function UA(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function BA(n){try{return n.frameElement}catch{return null}}(function sv(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===rv(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=rv(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function GA(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function $a(n){return!function HA(n){return function jA(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function ZE(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function YE(n){return function $A(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||iv(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ji))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iv(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function rv(n){if(!iv(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class zA{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Zi(1)).subscribe(e)}}let ov=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new zA(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Dg),u.LFG(u.R0b),u.LFG(se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function XE(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function JE(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Ig=new u.OlP("cdk-input-modality-detector-options"),av={ignoreKeys:[18,17,224,91,16]},Xu=up({passive:!0,capture:!0});let lv=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new ii(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(h=>h===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ml(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(XE(l)?"keyboard":"mouse"),this._mostRecentTarget=Ml(l))},this._onTouchstart=l=>{JE(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ml(l))},this._options={...av,...s},this.modalityDetected=this._modality.pipe(jE(1)),this.modalityChanged=this.modalityDetected.pipe(gp()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Xu),r.addEventListener("mousedown",this._onMousedown,Xu),r.addEventListener("touchstart",this._onTouchstart,Xu)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Xu),document.removeEventListener("mousedown",this._onMousedown,Xu),document.removeEventListener("touchstart",this._onTouchstart,Xu))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ji),u.LFG(u.R0b),u.LFG(se),u.LFG(Ig,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tC=new u.OlP("liveAnnouncerElement",{providedIn:"root",factory:function bF(){return null}}),wF=new u.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Tg=(()=>{class n{constructor(t,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...i){const r=this._defaultOptions;let s,l;return 1===i.length&&"number"==typeof i[0]?l=i[0]:[s,l]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==l&&r&&(l=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(h=>this._currentResolve=h)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof l&&(this._previousTimeout=setTimeout(()=>this.clear(),l)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(tC,8),u.LFG(u.R0b),u.LFG(se),u.LFG(wF,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const WA=new u.OlP("cdk-focus-monitor-default-options"),bp=up({passive:!0,capture:!0});let jc=(()=>{class n{constructor(t,i,r,s,l){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new kt.x,this._rootNodeFocusAndBlurListener=h=>{for(let y=Ml(h);y;y=y.parentElement)"focus"===h.type?this._onFocus(h,y):this._onBlur(h,y)},this._document=s,this._detectionMode=l?.detectionMode||0}monitor(t,i=!1){const r=Ol(t);if(!this._platform.isBrowser||1!==r.nodeType)return Be(null);const s=Hy(r)||this._getDocument(),l=this._elementInfo.get(r);if(l)return i&&(l.checkChildren=!0),l.subject;const h={checkChildren:i,subject:new kt.x,rootNode:s};return this._elementInfo.set(r,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const i=Ol(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=Ol(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,p])=>this._originChanged(h,i,p)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Ml(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,bp),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,bp)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Rl(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,bp),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,bp),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let l=0;l<s.length;l++)if(s[l].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(Ji),u.LFG(lv),u.LFG(se,8),u.LFG(WA,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cv="cdk-high-contrast-black-on-white",uv="cdk-high-contrast-white-on-black",Wo="cdk-high-contrast-active";let wp=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=(0,u.f3M)(vp).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Wo,cv,uv),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(Wo,cv):2===i&&t.add(Wo,uv)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ji),u.LFG(se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),EF=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wp))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Hc]}),n})();const ZA=new u.OlP("cdk-dir-doc",{providedIn:"root",factory:function YA(){return(0,u.f3M)(se)}}),QA=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let dv=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new u.vpe,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function XA(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?QA.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ZA,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ju=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const AF=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function ed(){return!0}});let En=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!bE()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wp),u.LFG(AF,8),u.LFG(se))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Ju,Ju]}),n})();function oC(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=ki(e)}}}function Qr(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function td(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=ki(e)}}}function hr(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?ho(t):this.defaultTabIndex}}}function nd(n){return class extends n{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let mv=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class aC{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const gv={enterDuration:225,exitDuration:150},Sg=up({passive:!0}),cC=["mousedown","touchstart"],uC=["mouseup","mouseleave","touchend","touchcancel"];class ix{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ol(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...gv,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const l=i.radius||function dC(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),h=e-r.left,p=t-r.top,y=s.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=h-l+"px",E.style.top=p-l+"px",E.style.height=2*l+"px",E.style.width=2*l+"px",null!=i.color&&(E.style.backgroundColor=i.color),E.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(E);const I=window.getComputedStyle(E),N=I.transitionDuration,U="none"===I.transitionProperty||"0s"===N||"0s, 0s"===N,J=new aC(this,E,i,U);E.style.transform="scale3d(1, 1, 1)",J.state=0,i.persistent||(this._mostRecentTransientRipple=J);let ce=null;return!U&&(y||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ue=()=>this._finishRippleTransition(J),Ke=()=>this._destroyRipple(J);E.addEventListener("transitionend",Ue),E.addEventListener("transitioncancel",Ke),ce={onTransitionEnd:Ue,onTransitionCancel:Ke}}),this._activeRipples.set(J,ce),(U||!y)&&this._finishRippleTransition(J),J}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...gv,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Ol(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(cC))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(uC),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=XE(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!JE(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,Sg)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(cC.forEach(e=>{this._triggerElement.removeEventListener(e,this,Sg)}),this._pointerUpEventsRegistered&&uC.forEach(e=>{this._triggerElement.removeEventListener(e,this,Sg)}))}}const rx=new u.OlP("mat-ripple-global-options");let wh=(()=>{class n{constructor(t,i,r,s,l){this._elementRef=t,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new ix(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(Ji),u.Y36(rx,8),u.Y36(u.QbO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),kp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[En,En]}),n})();const cx=["mat-button",""],_C=["*"],vC=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],dx=Qr(oC(td(class{constructor(n){this._elementRef=n}})));let Eh=(()=>{class n extends dx{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of vC)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(jc),u.Y36(u.QbO,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&u.Gf(wh,5),2&t){let r;u.iGM(r=u.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(u.uIk("disabled",i.disabled||null),u.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[u.qOj],attrs:cx,ngContentSelectors:_C,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(u.F$t(),u.TgZ(0,"span",0),u.Hsn(1),u.qZA(),u._UZ(2,"span",1)(3,"span",2)),2&t&&(u.xp6(2),u.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),u.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[wh],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}"],encapsulation:2,changeDetection:0}),n})(),wv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[kp,En,En]}),n})();function Ag(...n){const e=(0,Ms.jO)(n),{args:t,keys:i}=Du(n),r=new qn.y(s=>{const{length:l}=t;if(!l)return void s.complete();const h=new Array(l);let p=l,y=l;for(let E=0;E<l;E++){let I=!1;(0,hs.Xf)(t[E]).subscribe((0,Dn.x)(s,k=>{I||(I=!0,y--),h[E]=k},()=>p--,void 0,()=>{(!p||!I)&&(y||s.next(i?bl(i,h):h),s.complete())}))}});return e?r.pipe(ks(e)):r}var xg=V(3099);class bC{}class Pl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),l=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Pl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Pl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Pl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===s.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class wC{encodeKey(e){return px(e)}encodeValue(e){return px(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const CC=/%(\d[a-f0-9])/gi,DC={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function px(n){return encodeURIComponent(n).replace(CC,(e,t)=>DC[t]??e)}function Mg(n){return`${n}`}class $c{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new wC,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function EC(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[l,h]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],p=t.get(l)||[];p.push(h),t.set(l,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(Mg):[Mg(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new $c({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Mg(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(Mg(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class gx{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Ev(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function IC(n){return typeof Blob<"u"&&n instanceof Blob}function TC(n){return typeof FormData<"u"&&n instanceof FormData}class Rp{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Bi(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Pl),this.context||(this.context=new gx),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new $c,this.urlWithParams=t}serializeBody(){return null===this.body?null:Ev(this.body)||IC(this.body)||TC(this.body)||function SC(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof $c?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||TC(this.body)?null:IC(this.body)?this.body.type||null:Ev(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $c?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,y=e.params||this.params;const E=e.context??this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((I,k)=>I.set(k,e.setHeaders[k]),p)),e.setParams&&(y=Object.keys(e.setParams).reduce((I,k)=>I.set(k,e.setParams[k]),y)),new Rp(t,i,s,{params:y,headers:p,context:E,reportProgress:h,responseType:r,withCredentials:l})}}var er=(()=>((er=er||{})[er.Sent=0]="Sent",er[er.UploadProgress=1]="UploadProgress",er[er.ResponseHeader=2]="ResponseHeader",er[er.DownloadProgress=3]="DownloadProgress",er[er.Response=4]="Response",er[er.User=5]="User",er))();class Cv extends class AC{constructor(e,t=200,i="OK"){this.headers=e.headers||new Pl,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=er.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Cv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function kg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let xC=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Rp)s=t;else{let p,y;p=r.headers instanceof Pl?r.headers:new Pl(r.headers),r.params&&(y=r.params instanceof $c?r.params:new $c({fromObject:r.params})),s=new Rp(t,i,void 0!==r.body?r.body:null,{headers:p,context:r.context,params:y,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const l=Be(s).pipe(wl(p=>this.handler.handle(p)));if(t instanceof Rp||"events"===r.observe)return l;const h=l.pipe(kn(p=>p instanceof Cv));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,ot.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,ot.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,ot.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,ot.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new $c).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,kg(r,i))}post(t,i,r={}){return this.request("POST",t,kg(r,i))}put(t,i,r={}){return this.request("PUT",t,kg(r,i))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(bC))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Iv=["*"];let rd;function Ch(n){return function Tv(){if(void 0===rd&&(rd=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(rd=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return rd}()?.createHTML(n)||n}function Sv(n){return Error(`Unable to find icon with the name "${n}"`)}function Av(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function xv(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Gc{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let Op=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new Gc(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const l=this._sanitizer.sanitize(u.q3G.HTML,r);if(!l)throw xv(r);const h=Ch(l);return this._addSvgIconConfig(t,i,new Gc("",h,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Gc(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(u.q3G.HTML,i);if(!s)throw xv(i);const l=Ch(s);return this._addSvgIconSetConfig(t,new Gc("",l,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,t);if(!i)throw Av(t);const r=this._cachedIconsByUrl.get(i);return r?Be(Og(r)):this._loadSvgIconFromConfig(new Gc(t,null)).pipe((0,yn.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,ot.U)(s=>Og(s)))}getNamedSvgIcon(t,i=""){const r=NC(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const l=this._iconSetConfigs.get(i);return l?this._getSvgFromIconSetConfigs(t,l):Vo(Sv(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Be(Og(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,ot.U)(i=>Og(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?Be(r):Ag(i.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(Zr(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(u.q3G.RESOURCE_URL,l.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),Be(null)})))).pipe((0,ot.U)(()=>{const l=this._extractIconWithNameFromAnySet(t,i);if(!l)throw Sv(t);return l}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const l=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(l,t,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,yn.b)(i=>t.svgText=i),(0,ot.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Be(null):this._fetchIcon(t).pipe((0,yn.b)(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const l=s.cloneNode(!0);if(l.removeAttribute("id"),"svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l,r);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l),r);const h=this._svgElementFromString(Ch("<svg></svg>"));return h.appendChild(l),this._setSvgAttributes(h,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(Ch("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:l,value:h}=r[s];"id"!==l&&i.setAttribute(l,h)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function PC(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const l=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,i);if(!l)throw Av(i);const h=this._inProgressUrlFetches.get(l);if(h)return h;const p=this._httpClient.get(l,{responseType:"text",withCredentials:s}).pipe((0,ot.U)(y=>Ch(y)),Uo(()=>this._inProgressUrlFetches.delete(l)),(0,xg.B)());return this._inProgressUrlFetches.set(l,p),p}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(NC(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return Ix(s)?new Gc(s.url,null,s.options):new Gc(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xC,8),u.LFG(vc),u.LFG(se,8),u.LFG(u.qLn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Og(n){return n.cloneNode(!0)}function NC(n,e){return n+":"+e}function Ix(n){return!(!n.url||!n.options)}const Tx=Qr(class{constructor(n){this._elementRef=n}}),Sx=new u.OlP("MAT_ICON_DEFAULT_OPTIONS"),Ax=new u.OlP("mat-icon-location",{providedIn:"root",factory:function xx(){const n=(0,u.f3M)(se),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),FC=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Mx=FC.map(n=>`[${n}]`).join(", "),kx=/^url\(['"]?#(.*?)['"]?\)$/;let Dh=(()=>{class n extends Tx{constructor(t,i,r,s,l,h){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=l,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Os.w0.EMPTY,h&&(h.color&&(this.color=this.defaultColor=h.color),h.fontSet&&(this.fontSet=h.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=ki(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?[this._iconRegistry.classNameForFontAlias(this.fontSet)]:this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(l=>{s.setAttribute(l.name,`url('${t}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(Mx),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)FC.forEach(l=>{const h=i[s],p=h.getAttribute(l),y=p?p.match(kx):null;if(y){let E=r.get(h);E||(E=[],r.set(h,E)),E.push({name:l,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Zi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(Op),u.$8M("aria-hidden"),u.Y36(Ax),u.Y36(u.qLn),u.Y36(Sx,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(u.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),u.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[u.qOj],ngContentSelectors:Iv,decls:1,vars:0,template:function(t,i){1&t&&(u.F$t(),u.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),Rx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[En,En]}),n})();var Ox=V(1144);const Px=["addListener","removeListener"],Nx=["addEventListener","removeEventListener"],Fx=["on","off"];function Pp(n,e,t,i){if((0,Ir.m)(t)&&(i=t,t=void 0),i)return Pp(n,e,t).pipe(ks(i));const[r,s]=function BC(n){return(0,Ir.m)(n.addEventListener)&&(0,Ir.m)(n.removeEventListener)}(n)?Nx.map(l=>h=>n[l](e,h,t)):function LC(n){return(0,Ir.m)(n.addListener)&&(0,Ir.m)(n.removeListener)}(n)?Px.map(Mv(n,e)):function VC(n){return(0,Ir.m)(n.on)&&(0,Ir.m)(n.off)}(n)?Fx.map(Mv(n,e)):[];if(!r&&(0,Ox.z)(n))return(0,Yi.z)(l=>Pp(l,e,t))((0,hs.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new qn.y(l=>{const h=(...p)=>l.next(1<p.length?p:p[0]);return r(h),()=>s(h)})}function Mv(n,e){return t=>i=>n[t](e,i)}var kv=V(4408);const Ih={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Ih;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new Os.w0(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Ih;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Ih;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var Rv=V(7565);new class Ov extends Rv.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class UC extends kv.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Ih.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(Ih.cancelAnimationFrame(t),e._scheduled=void 0)}});let Nv,Lx=1;const Ll={};function Vx(n){return n in Ll&&(delete Ll[n],!0)}const Fv={setImmediate(n){const e=Lx++;return Ll[e]=!0,Nv||(Nv=Promise.resolve()),Nv.then(()=>Vx(e)&&n()),e},clearImmediate(n){Vx(n)}},{setImmediate:HC,clearImmediate:jC}=Fv,Lv={setImmediate(...n){const{delegate:e}=Lv;return(e?.setImmediate||HC)(...n)},clearImmediate(n){const{delegate:e}=Lv;return(e?.clearImmediate||jC)(n)},delegate:void 0};new class Bx extends Rv.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Et extends kv.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Lv.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(Lv.clearImmediate(t),e._scheduled=void 0)}});var Hx=V(3532);function oi(n,e=_p.z){return function Sh(n){return(0,_n.e)((e,t)=>{let i=!1,r=null,s=null,l=!1;const h=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const y=r;r=null,t.next(y)}l&&t.complete()},p=()=>{s=null,l&&t.complete()};e.subscribe((0,Dn.x)(t,y=>{i=!0,r=y,s||(0,hs.Xf)(n(y)).subscribe(s=(0,Dn.x)(t,h,p))},()=>{l=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>function Ng(n=0,e,t=_p.P){let i=-1;return null!=e&&((0,Hx.K)(e)?t=e:i=e),new qn.y(r=>{let s=function Pg(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(n,e))}let GC=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new kt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new qn.y(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(oi(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Be()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(kn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Ol(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Pp(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(Ji),u.LFG(se,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vv=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new kt.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(oi(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ji),u.LFG(u.R0b),u.LFG(se,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),Hv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Ju,Uv,Ju,Uv]}),n})();class jv{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Ah extends jv{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class Np extends jv{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class zC extends jv{constructor(e){super(),this.element=e instanceof u.SBq?e.nativeElement:e}}class Bg{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Ah?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Np?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof zC?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Zx extends Bg{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=l=>{const h=l.element,p=this._document.createComment("dom-portal");h.parentNode.insertBefore(p,h),this.outletElement.appendChild(h),this._attachedPortal=l,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(h,p)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||u.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Fp=(()=>{class n extends Bg{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new u.vpe,this.attachDomPortal=s=>{const l=s.element,h=this._document.createComment("dom-portal");s.setAttachedHost(this),l.parentNode.insertBefore(h,l),this._getRootNode().appendChild(l),this._attachedPortal=s,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(l,h)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),l=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=t,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u._Vd),u.Y36(u.s_b),u.Y36(se))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[u.qOj]}),n})(),sd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();var od=V(6451);const qC=O1();class WC{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=mi(-this._previousScrollPosition.left),e.style.top=mi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",l=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),qC&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),qC&&(i.scrollBehavior=s,r.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class Yx{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class KC{enable(){}disable(){}attach(){}}function Gv(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function ZC(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Qx{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Gv(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let YC=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new KC,this.close=l=>new Yx(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new WC(this._viewportRuler,this._document),this.reposition=l=>new Qx(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(GC),u.LFG(Vv),u.LFG(u.R0b),u.LFG(se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class zv{constructor(e){if(this.scrollStrategy=new KC,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class Xx{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let qv=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eM=(()=>{class n extends qv{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){const h=s[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(r)):h.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(se),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QC=(()=>{class n extends qv{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Ml(s)},this._clickListener=s=>{const l=Ml(s),h="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const E=p[y];if(E._outsidePointerEvents.observers.length<1||!E.hasAttached())continue;if(E.overlayElement.contains(l)||E.overlayElement.contains(h))break;const I=E._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>I.next(s)):I.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(se),u.LFG(Ji),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hg=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||bE()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),bE()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(se),u.LFG(Ji))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ad{constructor(e,t,i,r,s,l,h,p,y,E=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=l,this._document=h,this._location=p,this._outsideClickDispatcher=y,this._animationsDisabled=E,this._backdropElement=null,this._backdropClick=new kt.x,this._attachments=new kt.x,this._detachments=new kt.x,this._locationChanges=Os.w0.EMPTY,this._backdropClickHandler=I=>this._backdropClick.next(I),this._backdropTransitionendHandler=I=>{this._disposeBackdrop(I.target)},this._keydownEvents=new kt.x,this._outsidePointerEvents=new kt.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Zi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=mi(this._config.width),e.height=mi(this._config.height),e.minWidth=mi(this._config.minWidth),e.minHeight=mi(this._config.minHeight),e.maxWidth=mi(this._config.maxWidth),e.maxHeight=mi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=Eg(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Rl((0,od.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const XC="cdk-overlay-connected-position-bounding-box",JC=/([A-Za-z%]+)$/;class eD{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new kt.x,this._resizeSubscription=Os.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(XC),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let l;for(let h of this._preferredPositions){let p=this._getOriginPoint(e,r,h),y=this._getOverlayPoint(p,t,h),E=this._getOverlayFit(y,t,i,h);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,p);this._canFitWithFlexibleDimensions(E,y,i)?s.push({position:h,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,h)}):(!l||l.overlayFit.visibleArea<E.visibleArea)&&(l={overlayFit:E,overlayPoint:y,originPoint:p,position:h,overlayRect:t})}if(s.length){let h=null,p=-1;for(const y of s){const E=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);E>p&&(p=E,h=y)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ld(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(XC),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const l=this._isRtl()?e.right:e.left,h=this._isRtl()?e.left:e.right;r="start"==i.originX?l:h}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=nD(t);let{x:l,y:h}=e,p=this._getOffset(r,"x"),y=this._getOffset(r,"y");p&&(l+=p),y&&(h+=y);let k=0-h,N=h+s.height-i.height,U=this._subtractOverflows(s.width,0-l,l+s.width-i.width),J=this._subtractOverflows(s.height,k,N),ce=U*J;return{visibleArea:ce,isCompletelyWithinViewport:s.width*s.height===ce,fitsInViewportVertically:J===s.height,fitsInViewportHorizontally:U==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,l=tD(this._overlayRef.getConfig().minHeight),h=tD(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=h&&h<=s;return(e.fitsInViewportVertically||null!=l&&l<=r)&&y}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=nD(t),s=this._viewportRect,l=Math.max(e.x+r.width-s.width,0),h=Math.max(e.y+r.height-s.height,0),p=Math.max(s.top-i.top-e.y,0),y=Math.max(s.left-i.left-e.x,0);let E=0,I=0;return E=r.width<=s.width?y||-l:e.x<this._viewportMargin?s.left-i.left-e.x:0,I=r.height<=s.height?p||-h:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:E,y:I},{x:e.x+E,y:e.y+I}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Xx(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,l,h,E,I,k;if("top"===t.overlayY)l=e.y,s=i.height-l+this._viewportMargin;else if("bottom"===t.overlayY)h=i.height-e.y+2*this._viewportMargin,s=i.height-h+this._viewportMargin;else{const N=Math.min(i.bottom-e.y+i.top,e.y),U=this._lastBoundingBoxSize.height;s=2*N,l=e.y-N,s>U&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.y-U/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)k=i.width-e.x+this._viewportMargin,E=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)I=e.x,E=i.right-e.x;else{const N=Math.min(i.right-e.x+i.left,e.x),U=this._lastBoundingBoxSize.width;E=2*N,I=e.x-N,E>U&&!this._isInitialRender&&!this._growAfterOpen&&(I=e.x-U/2)}return{top:l,left:I,bottom:h,right:k,width:E,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;r.height=mi(i.height),r.top=mi(i.top),r.bottom=mi(i.bottom),r.width=mi(i.width),r.left=mi(i.left),r.right=mi(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=mi(s)),l&&(r.maxWidth=mi(l))}this._lastBoundingBoxSize=i,ld(this._boundingBox.style,r)}_resetBoundingBoxStyles(){ld(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ld(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(r){const E=this._viewportRuler.getViewportScrollPosition();ld(i,this._getExactOverlayY(t,e,E)),ld(i,this._getExactOverlayX(t,e,E))}else i.position="static";let h="",p=this._getOffset(t,"x"),y=this._getOffset(t,"y");p&&(h+=`translateX(${p}px) `),y&&(h+=`translateY(${y}px)`),i.transform=h.trim(),l.maxHeight&&(r?i.maxHeight=mi(l.maxHeight):s&&(i.maxHeight="")),l.maxWidth&&(r?i.maxWidth=mi(l.maxWidth):s&&(i.maxWidth="")),ld(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=mi(s.y),r}_getExactOverlayX(e,t,i){let l,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),l=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===l?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=mi(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ZC(e,i),isOriginOutsideView:Gv(e,i),isOverlayClipped:ZC(t,i),isOverlayOutsideView:Gv(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Eg(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof u.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function ld(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function tD(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(JC);return t&&"px"!==t?null:parseFloat(e)}return n||null}function nD(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Wv="cdk-global-overlay-wrapper";class tM{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Wv),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:l,maxHeight:h}=i,p=!("100%"!==r&&"100vw"!==r||l&&"100%"!==l&&"100vw"!==l),y=!("100%"!==s&&"100vh"!==s||h&&"100%"!==h&&"100vh"!==h),E=this._xPosition,I=this._xOffset,k="rtl"===this._overlayRef.getConfig().direction;let N="",U="",J="";p?J="flex-start":"center"===E?(J="center",k?U=I:N=I):k?"left"===E||"end"===E?(J="flex-end",N=I):("right"===E||"start"===E)&&(J="flex-start",U=I):"left"===E||"start"===E?(J="flex-start",N=I):("right"===E||"end"===E)&&(J="flex-end",U=I),e.position=this._cssPosition,e.marginLeft=p?"0":N,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=p?"0":U,t.justifyContent=J,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Wv),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let nM=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new tM}flexibleConnectedTo(t){return new eD(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Vv),u.LFG(se),u.LFG(Ji),u.LFG(Hg))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iM=0,zc=(()=>{class n{constructor(t,i,r,s,l,h,p,y,E,I,k,N){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=l,this._injector=h,this._ngZone=p,this._document=y,this._directionality=E,this._location=I,this._outsideClickDispatcher=k,this._animationsModuleType=N}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),l=new zv(t);return l.direction=l.direction||this._directionality.value,new ad(s,i,r,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+iM++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(u.z2F)),new Zx(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(YC),u.LFG(Hg),u.LFG(u._Vd),u.LFG(nM),u.LFG(eM),u.LFG(u.zs3),u.LFG(u.R0b),u.LFG(se),u.LFG(dv),u.LFG(Ee),u.LFG(QC),u.LFG(u.QbO,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const sD={provide:new u.OlP("cdk-connected-overlay-scroll-strategy"),deps:[zc],useFactory:function rD(n){return()=>n.scrollStrategies.reposition()}};let Kv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[zc,sD],imports:[Ju,sd,Hv,Hv]}),n})();function oD(n,e){}class jg{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let aD=(()=>{class n extends Bg{constructor(t,i,r,s,l,h,p,y){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=l,this._ngZone=h,this._overlayRef=p,this._focusMonitor=y,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=E=>{this._portalOutlet.hasAttached();const I=this._portalOutlet.attachDomPortal(E);return this._contentAttached(),I},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=wg(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=wg();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=wg())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(ov),u.Y36(se,8),u.Y36(jg),u.Y36(Dg),u.Y36(u.R0b),u.Y36(ad),u.Y36(jc))},n.\u0275cmp=u.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(1&t&&u.Gf(Fp,7),2&t){let r;u.iGM(r=u.CRH())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){2&t&&u.uIk("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[u.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&u.YNc(0,oD,0,0,"ng-template",0)},dependencies:[Fp],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class Vp{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new kt.x,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!mp(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const $g=new u.OlP("DialogScrollStrategy"),lD=new u.OlP("DialogData"),Zv=new u.OlP("DefaultDialogConfig"),oM={provide:$g,deps:[zc],useFactory:function sM(n){return()=>n.scrollStrategies.block()}};let Yv=0,cD=(()=>{class n{constructor(t,i,r,s,l,h){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=l,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new kt.x,this._afterOpenedAtThisLevel=new kt.x,this._ariaHiddenElements=new Map,this.afterAllClosed=fs(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Kr(void 0))),this._scrollStrategy=h}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,i){(i={...this._defaultOptions||new jg,...i}).id=i.id||"cdk-dialog-"+Yv++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),l=this._overlay.create(s),h=new Vp(l,i),p=this._attachContainer(l,h,i);return h.containerInstance=p,this._attachDialogContent(t,h,p,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(h),h.closed.subscribe(()=>this._removeOpenDialog(h,!0)),this.afterOpened.next(h),h}closeAll(){Gg(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){Gg(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),Gg(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new zv({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector??r.viewContainerRef?.injector,l=[{provide:jg,useValue:r},{provide:Vp,useValue:i},{provide:ad,useValue:t}];let h;r.container?"function"==typeof r.container?h=r.container:(h=r.container.type,l.push(...r.container.providers(r))):h=aD;const p=new Ah(h,r.viewContainerRef,u.zs3.create({parent:s||this._injector,providers:l}),r.componentFactoryResolver);return t.attach(p).instance}_attachDialogContent(t,i,r,s){const l=this._createInjector(s,i,r);if(t instanceof u.Rgc){let h={$implicit:s.data,dialogRef:i};s.templateContext&&(h={...h,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new Np(t,null,h,l))}else{const h=r.attachComponentPortal(new Ah(t,s.viewContainerRef,l,s.componentFactoryResolver));i.componentInstance=h.instance}}_createInjector(t,i,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,l=[{provide:lD,useValue:t.data},{provide:Vp,useValue:i}];return t.providers&&("function"==typeof t.providers?l.push(...t.providers(i,t,r)):l.push(...t.providers)),t.direction&&(!s||!s.get(dv,null,u.XFs.Optional))&&l.push({provide:dv,useValue:{value:t.direction,change:Be()}}),u.zs3.create({parent:s||this._injector,providers:l})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,l)=>{s?l.setAttribute("aria-hidden",s):l.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(zc),u.LFG(u.zs3),u.LFG(Zv,8),u.LFG(n,12),u.LFG(Hg),u.LFG($g))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Gg(n,e){let t=n.length;for(;t--;)e(n[t])}let aM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[cD,oM],imports:[Kv,sd,EF,sd]}),n})();class Qv{}const Vl="*";function Bl(n,e){return{type:7,name:n,definitions:e,options:{}}}function Hs(n,e=null){return{type:4,styles:e,timings:n}}function Xv(n,e=null){return{type:3,steps:n,options:e}}function uD(n,e=null){return{type:2,steps:n,options:e}}function Mr(n){return{type:6,styles:n,offset:null}}function Ul(n,e,t){return{type:0,name:n,styles:e,options:t}}function Zo(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function lM(n=null){return{type:9,options:n}}function dD(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function hD(n){Promise.resolve(null).then(n)}class xh{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){hD(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Jv{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?hD(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++i==s&&this._onDestroy()}),l.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,h)=>Math.max(l,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function zg(n,e){}const qa={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},uM={dialogContainer:Bl("dialogContainer",[Ul("void, exit",Mr({opacity:0,transform:"scale(0.7)"})),Ul("enter",Mr({transform:"none"})),Zo("* => enter",Xv([Hs("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",Mr({transform:"none",opacity:1})),dD("@*",lM(),{optional:!0})]),qa),Zo("* => void, * => exit",Xv([Hs("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",Mr({opacity:0})),dD("@*",lM(),{optional:!0})]),qa)])};class Mh{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=qa.params.enterAnimationDuration,this.exitAnimationDuration=qa.params.exitAnimationDuration}}let fD=(()=>{class n extends aD{constructor(t,i,r,s,l,h,p,y){super(t,i,r,s,l,h,p,y),this._animationStateChanged=new u.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(ov),u.Y36(se,8),u.Y36(Mh),u.Y36(Dg),u.Y36(u.R0b),u.Y36(ad),u.Y36(jc))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],features:[u.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),dM=(()=>{class n extends fD{constructor(t,i,r,s,l,h,p,y,E){super(t,i,r,s,l,h,p,E),this._changeDetectorRef=y,this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?this._openAnimationDone(i):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||qa.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||qa.params.exitAnimationDuration}}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(ov),u.Y36(se,8),u.Y36(Mh),u.Y36(Dg),u.Y36(u.R0b),u.Y36(ad),u.Y36(u.sBO),u.Y36(jc))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,i){1&t&&u.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(u.Ikx("id",i._config.id),u.uIk("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),u.d8E("@dialogContainer",i._getAnimationState()))},features:[u.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&u.YNc(0,zg,0,0,"ng-template",0)},dependencies:[Fp],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[uM.dialogContainer]}}),n})();class eb{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new kt.x,this._beforeClosed=new kt.x,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(kn(r=>"opened"===r.state),Zi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(kn(r=>"closed"===r.state),Zi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,od.T)(this.backdropClick(),this.keydownEvents().pipe(kn(r=>27===r.keyCode&&!this.disableClose&&!mp(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),qg(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(kn(t=>"closing"===t.state),Zi(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function qg(n,e,t){return n._closeInteractionType=e,n.close(t)}const hM=new u.OlP("MatDialogData"),dL=new u.OlP("mat-dialog-default-options"),pD=new u.OlP("mat-dialog-scroll-strategy"),tb={provide:pD,deps:[zc],useFactory:function mD(n){return()=>n.scrollStrategies.block()}};let fM=0,nb=(()=>{class n{constructor(t,i,r,s,l,h,p,y,E,I){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=p,this._dialogContainerType=y,this._dialogDataToken=E,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new kt.x,this._afterOpenedAtThisLevel=new kt.x,this._idPrefix="mat-dialog-",this.afterAllClosed=fs(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Kr(void 0))),this._scrollStrategy=h,this._dialog=i.get(cD)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){let r;(i={...this._defaultOptions||new Mh,...i}).id=i.id||`${this._idPrefix}${fM++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:Mh,useValue:i},{provide:jg,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(l,h,p)=>(r=new this._dialogRefConstructor(l,i,p),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:p},{provide:this._dialogDataToken,useValue:h.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const l=this.openDialogs.indexOf(r);l>-1&&(this.openDialogs.splice(l,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Wg=(()=>{class n extends nb{constructor(t,i,r,s,l,h,p,y){super(t,i,s,h,p,l,eb,dM,hM,y)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(zc),u.LFG(u.zs3),u.LFG(Ee,8),u.LFG(dL,8),u.LFG(pD),u.LFG(n,12),u.LFG(Hg),u.LFG(u.QbO,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),pM=0,Kg=(()=>{class n{constructor(t,i,r){this.dialogRef=t,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=rb(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const i=t._matDialogClose||t._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(t){qg(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(eb,8),u.Y36(u.SBq),u.Y36(Wg))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,i){1&t&&u.NdJ("click",function(s){return i._onButtonClick(s)}),2&t&&u.uIk("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[u.TTD]}),n})(),ib=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-dialog-title-"+pM++}ngOnInit(){this._dialogRef||(this._dialogRef=rb(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(eb,8),u.Y36(u.SBq),u.Y36(Wg))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,i){2&t&&u.Ikx("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),gD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})();function rb(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}let gM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Wg,tb],imports:[aM,Kv,sd,En,En]}),n})(),_M=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-more"]],decls:15,vars:1,consts:[["mat-dialog-title",""],[1,"more-subtitle"],[1,"btn-wrap"],["mat-button","","cdkFocusInitial","",1,"close-btn",3,"mat-dialog-close"]],template:function(t,i){1&t&&(u.TgZ(0,"h1",0)(1,"mat-icon"),u._uU(2,"report"),u.qZA(),u._uU(3,"About\n"),u.qZA(),u.TgZ(4,"div",1),u._uU(5,"Plans on features:"),u.qZA(),u.TgZ(6,"p"),u._uU(7,"- Loading draft to list"),u.qZA(),u.TgZ(8,"p"),u._uU(9,"- Adding recipes"),u.qZA(),u.TgZ(10,"p"),u._uU(11,"- Loading recipe ingredients to list"),u.qZA(),u.TgZ(12,"div",2)(13,"button",3),u._uU(14,"close"),u.qZA()()),2&t&&(u.xp6(13),u.Q6J("mat-dialog-close","close"))},dependencies:[Eh,Dh,Kg,ib],styles:["mat-dialog-title[_ngcontent-%COMP%]{display:flex;align-items:center}mat-icon[_ngcontent-%COMP%]{color:#673ab7;margin-bottom:-4px;margin-right:5px}.more-subtitle[_ngcontent-%COMP%]{font-size:1.2rem;margin:20px 0;color:#673ab7}.btn-wrap[_ngcontent-%COMP%]{display:flex;justify-content:end}.btn-wrap[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{margin-top:20px}"]}),n})();class bM{constructor(e=!1,t,i=!0){this._multiple=e,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new kt.x,t&&t.length&&(e?t.forEach(r=>this._markSelected(r)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}let wM=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const po=new u.OlP("NgValueAccessor");function qc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function bD(n){return null!=n&&"number"==typeof n.length}const Ci=new u.OlP("NgValidators"),Hl=new u.OlP("NgAsyncValidators"),wD=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ED{static min(e){return function ob(n){return e=>{if(qc(e.value)||qc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function ab(n){return e=>{if(qc(e.value)||qc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function CD(n){return qc(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function DD(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function TM(n){return qc(n.value)||wD.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function ID(n){return e=>qc(e.value)||!bD(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function TD(n){return e=>bD(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function SD(n){if(!n)return Zg;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(qc(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return Qg(e)}static composeAsync(e){return kD(e)}}function Zg(n){return null}function AD(n){return null!=n}function kh(n){return(0,u.QGY)(n)?(0,nn.D)(n):n}function xD(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Yg(n,e){return e.map(t=>t(n))}function MD(n){return n.map(e=>function Wa(n){return!n.validate}(e)?e:t=>e.validate(t))}function Qg(n){if(!n)return null;const e=n.filter(AD);return 0==e.length?null:function(t){return xD(Yg(t,e))}}function ud(n){return null!=n?Qg(MD(n)):null}function kD(n){if(!n)return null;const e=n.filter(AD);return 0==e.length?null:function(t){return Ag(Yg(t,e).map(kh)).pipe((0,ot.U)(xD))}}function lb(n){return null!=n?kD(MD(n)):null}function RD(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Hp(n){return n._rawValidators}function jp(n){return n._rawAsyncValidators}function cb(n){return n?Array.isArray(n)?n:[n]:[]}function Xg(n,e){return Array.isArray(n)?n.includes(e):n===e}function ub(n,e){const t=cb(e);return cb(n).forEach(r=>{Xg(t,r)||t.push(r)}),t}function db(n,e){return cb(e).filter(t=>!Xg(n,t))}class Jg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ud(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class kr extends Jg{get formDirective(){return null}get path(){return null}}class jl extends Jg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}const Ui="VALID",$l="INVALID",Oh="PENDING",Gp="DISABLED";function BD(n){return(Wc(n)?n.validators:n)||null}function FM(n){return Array.isArray(n)?ud(n):n||null}function e_(n,e){return(Wc(e)?e.asyncValidators:n)||null}function gb(n){return Array.isArray(n)?lb(n):n||null}function Wc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class HD{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=FM(this._rawValidators),this._composedAsyncValidatorFn=gb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ui}get invalid(){return this.status===$l}get pending(){return this.status==Oh}get disabled(){return this.status===Gp}get enabled(){return this.status!==Gp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=FM(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=gb(e)}addValidators(e){this.setValidators(ub(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ub(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(db(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(db(e,this._rawAsyncValidators))}hasValidator(e){return Xg(this._rawValidators,e)}hasAsyncValidator(e){return Xg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Oh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gp,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ui,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ui||this.status===Oh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gp:Ui}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Oh,this._hasOwnPendingAsyncValidator=!0;const t=kh(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Gp:this.errors?$l:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oh)?Oh:this._anyControlsHaveStatus($l)?$l:Ui}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Wc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class n_ extends HD{constructor(e,t,i){super(BD(t),e_(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function t_(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new u.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function UD(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new u.vHH(1e3,"");if(!i[t])throw new u.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Fh(n,e){jD(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function LM(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&hd(n,e)})}(n,e),function VM(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function $D(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&hd(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function _b(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function zp(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),qp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function dd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function jD(n,e){const t=Hp(n);null!==e.validator?n.setValidators(RD(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=jp(n);null!==e.asyncValidator?n.setAsyncValidators(RD(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();dd(e._rawValidators,r),dd(e._rawAsyncValidators,r)}function qp(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=Hp(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=jp(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return dd(e._rawValidators,i),dd(e._rawAsyncValidators,i),t}function hd(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function yb(n,e){jD(n,e)}function wb(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const GD={provide:kr,useExisting:(0,u.Gpc)(()=>r_)},Wp=(()=>Promise.resolve(null))();let r_=(()=>{class n extends kr{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new n_({},ud(t),lb(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Wp.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Fh(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Wp.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Wp.then(()=>{const i=this._findContainer(t.path),r=new n_({});yb(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Wp.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Wp.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,wb(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ci,10),u.Y36(Hl,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&u.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([GD]),u.qOj]}),n})();function Eb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function zD(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Cb=class extends HD{constructor(e=null,t,i){super(BD(t),e_(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Wc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=zD(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Eb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Eb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){zD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},QD={provide:kr,useExisting:(0,u.Gpc)(()=>Tb)};let Tb=(()=>{class n extends kr{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Fh(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){zp(t.control||null,t,!1),function jM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,wb(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(zp(i||null,t),(n=>n instanceof Cb)(r)&&(Fh(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);yb(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function vb(n,e){return qp(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){jD(this.form,this),this._oldForm&&qp(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ci,10),u.Y36(Hl,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&u.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([QD]),u.qOj,u.TTD]}),n})();const Nb=["button"],oI=["*"],Fb=new u.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),aI=new u.OlP("MatButtonToggleGroup"),lI={provide:po,useExisting:(0,u.Gpc)(()=>Zp),multi:!0};let Lb=0;class Kp{constructor(e,t){this.source=e,this.value=t}}let Zp=(()=>{class n{constructor(t,i){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+Lb++,this.valueChange=new u.vpe,this.change=new u.vpe,this.appearance=i&&i.appearance?i.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._buttonToggles&&this._buttonToggles.forEach(i=>{i.name=this._name,i._markForCheck()})}get vertical(){return this._vertical}set vertical(t){this._vertical=ki(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(i=>i.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=ki(t)}get disabled(){return this._disabled}set disabled(t){this._disabled=ki(t),this._buttonToggles&&this._buttonToggles.forEach(i=>i._markForCheck())}ngOnInit(){this._selectionModel=new bM(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(){const t=this.selected,i=Array.isArray(t)?t[t.length-1]:t,r=new Kp(i,this.value);this._controlValueAccessorChangeFn(r.value),this.change.emit(r)}_syncButtonToggle(t,i,r=!1,s=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(t):this._selectionModel.deselect(t):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(r)):this._updateModelValue(r)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>null!=t.value&&i===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(i=>this._selectValue(i))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const i=this._buttonToggles.find(r=>null!=r.value&&r.value===t);i&&(i.checked=!0,this._selectionModel.select(i))}_updateModelValue(t){t&&this._emitChangeEvent(),this.valueChange.emit(this.value)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(Fb,8))},n.\u0275dir=u.lG2({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,i,r){if(1&t&&u.Suo(r,uI,5),2&t){let s;u.iGM(s=u.CRH())&&(i._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,i){2&t&&(u.uIk("aria-disabled",i.disabled),u.ekj("mat-button-toggle-vertical",i.vertical)("mat-button-toggle-group-appearance-standard","standard"===i.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[u._Bn([lI,{provide:aI,useExisting:n}])]}),n})();const cI=td(class{});let uI=(()=>{class n extends cI{constructor(t,i,r,s,l,h){super(),this._changeDetectorRef=i,this._elementRef=r,this._focusMonitor=s,this._isSingleSelector=!1,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new u.vpe;const p=Number(l);this.tabIndex=p||0===p?p:null,this.buttonToggleGroup=t,this.appearance=h&&h.appearance?h.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const i=ki(t);i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=ki(t)}ngOnInit(){const t=this.buttonToggleGroup;this._isSingleSelector=t&&!t.multiple,this.id=this.id||"mat-button-toggle-"+Lb++,this._isSingleSelector&&(this.name=t.name),t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new Kp(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(aI,8),u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(jc),u.$8M("tabindex"),u.Y36(Fb,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(t,i){if(1&t&&u.Gf(Nb,5),2&t){let r;u.iGM(r=u.CRH())&&(i._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,i){1&t&&u.NdJ("focus",function(){return i.focus()}),2&t&&(u.uIk("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),u.ekj("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-appearance-standard","standard"===i.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[u.qOj],ngContentSelectors:oI,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,i){if(1&t&&(u.F$t(),u.TgZ(0,"button",0,1),u.NdJ("click",function(){return i._onButtonClick()}),u.TgZ(2,"span",2),u.Hsn(3),u.qZA()(),u._UZ(4,"span",3)(5,"span",4)),2&t){const r=u.MAs(1);u.Q6J("id",i.buttonId)("disabled",i.disabled||null),u.uIk("tabindex",i.disabled?-1:i.tabIndex)("aria-pressed",i.checked)("name",i.name||null)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),u.xp6(5),u.Q6J("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)}},dependencies:[wh],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),n})(),dI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[En,kp,En]}),n})(),hI=(()=>{class n{constructor(){this.selectedTheme="",this.selectedLanguage=""}ngOnInit(){this.selectedTheme="light",this.selectedLanguage="en"}onThemeChange(t){this.selectedTheme=t}onLanguageChange(t){this.selectedLanguage=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-settings"]],decls:31,vars:3,consts:[["mat-dialog-title",""],[1,"settings-subtitle"],["name","theme","aria-label","Theme style",3,"value","change"],["themeBtn","matButtonToggleGroup"],["value","dark"],["value","light"],[1,"color-btns-wrap"],[1,"color-btn"],["name","language","aria-label","Language",3,"value","change"],["languageBtn","matButtonToggleGroup"],["value","pl"],["value","en"],[1,"btn-wrap"],["mat-button","","cdkFocusInitial","",1,"close-btn",3,"mat-dialog-close"]],template:function(t,i){if(1&t){const r=u.EpF();u.TgZ(0,"h1",0)(1,"mat-icon"),u._uU(2,"settings_applications"),u.qZA(),u._uU(3,"Settings\n"),u.qZA(),u.TgZ(4,"mat-dialog-content")(5,"div",1),u._uU(6,"Change Theme"),u.qZA(),u.TgZ(7,"mat-button-toggle-group",2,3),u.NdJ("change",function(){u.CHM(r);const l=u.MAs(8);return u.KtG(i.onThemeChange(l.value))}),u.TgZ(9,"mat-button-toggle",4),u._uU(10,"Dark"),u.qZA(),u.TgZ(11,"mat-button-toggle",5),u._uU(12,"Light"),u.qZA()(),u.TgZ(13,"div",1),u._uU(14,"Change Colors"),u.qZA(),u.TgZ(15,"div",6),u._UZ(16,"div",7)(17,"div",7)(18,"div",7)(19,"div",7),u.qZA(),u.TgZ(20,"div",1),u._uU(21,"Change Laguage"),u.qZA(),u.TgZ(22,"mat-button-toggle-group",8,9),u.NdJ("change",function(){u.CHM(r);const l=u.MAs(23);return u.KtG(i.onLanguageChange(l.value))}),u.TgZ(24,"mat-button-toggle",10),u._uU(25,"PL"),u.qZA(),u.TgZ(26,"mat-button-toggle",11),u._uU(27,"EN"),u.qZA()(),u.TgZ(28,"div",12)(29,"button",13),u._uU(30,"close"),u.qZA()()()}2&t&&(u.xp6(7),u.Q6J("value",i.selectedTheme),u.xp6(15),u.Q6J("value",i.selectedLanguage),u.xp6(7),u.Q6J("mat-dialog-close","close"))},dependencies:[Eh,Dh,Kg,ib,gD,Zp,uI],styles:["mat-dialog-title[_ngcontent-%COMP%]{display:flex;align-items:center}mat-icon[_ngcontent-%COMP%]{color:#673ab7;margin-bottom:-4px;margin-right:5px}.mat-button-toggle-group[_ngcontent-%COMP%]{height:32px;align-items:center}.settings-subtitle[_ngcontent-%COMP%]{font-size:1.2rem;margin:20px 0;color:#673ab7}.color-btns-wrap[_ngcontent-%COMP%]{display:flex}.color-btns-wrap[_ngcontent-%COMP%]   .color-btn[_ngcontent-%COMP%]{height:32px;width:32px;background-color:#673ab7;margin:0 5px;border-radius:5px}.color-btns-wrap[_ngcontent-%COMP%]   .color-btn[_ngcontent-%COMP%]:first-child{margin-left:0}.btn-wrap[_ngcontent-%COMP%]{display:flex;justify-content:end}.btn-wrap[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{margin-top:20px}"]}),n})();var h_=V(5363),dk=V(6063);class NL extends kt.x{constructor(e=1/0,t=1/0,i=dk.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:l}=this;t||(i.push(e),!r&&i.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let l=0;l<s.length&&!e.closed;l+=i?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const l=t.now();let h=0;for(let p=1;p<i.length&&i[p]<=l;p+=2)h=p;h&&i.splice(0,h+1)}}}function hk(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,(0,xg.B)({connector:()=>new NL(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Vb(n,e){return(0,Ir.m)(e)?Ei(()=>n,e):Ei(()=>n)}var Bb=V(9468),hn=V(5813),Ri=V(2011);V(5867);var Ce=V(5861),_s=V(9681),Ka=V(4859),F=V(2090),mo=V(1877);const yI=new Map,gk={activated:!1,tokenObservers:[]},_k={initialized:!1,enabled:!1};function tr(n){return yI.get(n)||gk}function go(n,e){yI.set(n,e)}function Yp(){return _k}class bI{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function Gb(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Xr=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function wk(n){if(!tr(n).activated)throw Xr.create("use-before-activation",{appName:n.name})}function Wb(n,e){return wI.apply(this,arguments)}function wI(){return(wI=(0,Ce.Z)(function*({url:n,body:e},t){var i,r;const s={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const N=yield l.getHeartbeatsHeader();N&&(s["X-Firebase-Client"]=N)}const h={method:"POST",body:JSON.stringify(e),headers:s};let p,y;try{p=yield fetch(n,h)}catch(N){throw Xr.create("fetch-network-error",{originalErrorMessage:null===(i=N)||void 0===i?void 0:i.message})}if(200!==p.status)throw Xr.create("fetch-status-error",{httpStatus:p.status});try{y=yield p.json()}catch(N){throw Xr.create("fetch-parse-error",{originalErrorMessage:null===(r=N)||void 0===r?void 0:r.message})}const E=y.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Xr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const I=1e3*Number(E[1]),k=Date.now();return{token:y.token,expireTimeMillis:k+I,issuedAtTimeMillis:k}})).apply(this,arguments)}function $L(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const g_="firebase-app-check-store";let Kb=null;function Dk(){return Kb||(Kb=new Promise((n,e)=>{var t;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;e(Xr.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(g_,{keyPath:"compositeKey"})}}catch(i){e(Xr.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}}),Kb)}function g(){return(g=(0,Ce.Z)(function*(n,e){const i=(yield Dk()).transaction(g_,"readwrite"),s=i.objectStore(g_).put({compositeKey:n,value:e});return new Promise((l,h)=>{s.onsuccess=p=>{l()},i.onerror=p=>{var y;h(Xr.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const x=new mo.Yd("@firebase/app-check");function K(n,e){return(0,F.hl)()?function a(n,e){return function f(n,e){return g.apply(this,arguments)}(function D(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{x.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Fe(){return Yp().enabled}function Xe(){return lt.apply(this,arguments)}function lt(){return(lt=(0,Ce.Z)(function*(){const n=Yp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Pe={error:"UNKNOWN_ERROR"};function bt(n){return F.US.encodeString(JSON.stringify(n),!1)}function Wt(n){return On.apply(this,arguments)}function On(){return(On=(0,Ce.Z)(function*(n,e=!1){const t=n.app;wk(t);const i=tr(t);let s,r=i.token;if(!r){const p=yield i.cachedTokenPromise;p&&Bh(p)&&(r=p)}if(!e&&r&&Bh(r))return{token:r.token};let h,l=!1;if(Fe()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Wb($L(t,yield Xe()),n.heartbeatServiceProvider).then(y=>(i.exchangeTokenPromise=void 0,y)),l=!0);const p=yield i.exchangeTokenPromise;return yield K(t,p),go(t,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(p=>(i.exchangeTokenPromise=void 0,p)),l=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?x.warn(p.message):x.error(p),s=p}return r?(h={token:r.token},go(t,Object.assign(Object.assign({},i),{token:r})),yield K(t,r)):h=Yb(s),l&&y_(t,h),h})).apply(this,arguments)}function Qp(n,e){const t=tr(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),go(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function __(n){const{app:e}=n,t=tr(e);let i=t.tokenRefresher;i||(i=function Zb(n){const{app:e}=n;return new bI((0,Ce.Z)(function*(){let i;if(i=tr(e).token?yield Wt(n,!0):yield Wt(n),i.error)throw i.error}),()=>!0,()=>{const t=tr(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),go(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function y_(n,e){const t=tr(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}function Bh(n){return n.expireTimeMillis-Date.now()>0}function Yb(n){return{token:bt(Pe),error:n}}class Qb{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=tr(this.app);for(const t of e)Qp(this.app,t.next);return Promise.resolve()}}const XL="app-check-internal";!function lq(){(0,_s._registerComponent)(new Ka.wA("app-check",n=>function Xb(n,e){return new Qb(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(XL).initialize()})),(0,_s._registerComponent)(new Ka.wA(XL,n=>function Jb(n){return{getToken:e=>Wt(n,e),addTokenListener:e=>function Gl(n,e,t,i){const{app:r}=n,s=tr(r),l={next:t,error:i,type:e};if(go(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,l]})),s.token&&Bh(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),__(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>__(n))}(n,"INTERNAL",e),removeTokenListener:e=>Qp(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_s.registerVersion)("@firebase/app-check","0.5.11")}();class e0{constructor(){return(0,hn.vb)("app-check")}}typeof window<"u"&&window;var CI=V(127);const xk=new u.OlP("angularfire2.auth.use-emulator"),Mk=new u.OlP("angularfire2.auth.settings"),kk=new u.OlP("angularfire2.auth.tenant-id"),Rk=new u.OlP("angularfire2.auth.langugage-code"),Ok=new u.OlP("angularfire2.auth.use-device-language"),Pk=new u.OlP("angularfire.auth.persistence"),Nk=(n,e,t,i,r,s,l,h)=>(0,Ri.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),l)for(const[y,E]of Object.entries(l))p.settings[y]=E;return h&&p.setPersistence(h),p},[t,i,r,s,l,h]);let fd=(()=>{class n{constructor(t,i,r,s,l,h,p,y,E,I,k,N){const U=new kt.x,J=Be(void 0).pipe((0,h_.Q)(l.outsideAngular),Ei(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,1451)))),(0,ot.U)(()=>(0,Ri.on)(t,s,i)),(0,ot.U)(ce=>Nk(ce,s,h,y,E,I,p,k)),hk({bufferSize:1,refCount:!1}));if(Od(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Be(null);else{J.pipe(Rn()).subscribe();const Ue=J.pipe(Ei(Qe=>Qe.getRedirectResult().then(St=>St,()=>null)),hn.iC,hk({bufferSize:1,refCount:!1})),Ke=J.pipe(Ei(Qe=>new qn.y(St=>({unsubscribe:s.runOutsideAngular(()=>Qe.onAuthStateChanged(Ot=>St.next(Ot),Ot=>St.error(Ot),()=>St.complete()))})))),nt=J.pipe(Ei(Qe=>new qn.y(St=>({unsubscribe:s.runOutsideAngular(()=>Qe.onIdTokenChanged(Ot=>St.next(Ot),Ot=>St.error(Ot),()=>St.complete()))}))));this.authState=Ue.pipe(Vb(Ke),(0,Bb.R)(l.outsideAngular),(0,h_.Q)(l.insideAngular)),this.user=Ue.pipe(Vb(nt),(0,Bb.R)(l.outsideAngular),(0,h_.Q)(l.insideAngular)),this.idToken=this.user.pipe(Ei(Qe=>Qe?(0,nn.D)(Qe.getIdToken()):Be(null))),this.idTokenResult=this.user.pipe(Ei(Qe=>Qe?(0,nn.D)(Qe.getIdTokenResult()):Be(null))),this.credential=(0,od.T)(Ue,U,this.authState.pipe(kn(Qe=>!Qe))).pipe((0,ot.U)(Qe=>Qe?.user?Qe:null),(0,Bb.R)(l.outsideAngular),(0,h_.Q)(l.insideAngular))}return(0,Ri.pX)(this,J,s,{spy:{apply:(ce,Ue,Ke)=>{(ce.startsWith("signIn")||ce.startsWith("createUser"))&&Ke.then(nt=>U.next(nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ri.Dh),u.LFG(Ri.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(hn.HU),u.LFG(xk,8),u.LFG(Mk,8),u.LFG(kk,8),u.LFG(Rk,8),u.LFG(Ok,8),u.LFG(Pk,8),u.LFG(e0,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pq=(()=>{class n{constructor(){CI.Z.registerVersion("angularfire",hn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[fd]}),n})();V(1451);var Fk=V(3942);const eV="@firebase/database";let Lk="";function nV(n){Lk=n}class _q{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class yq{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const iV=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _q(e)}}catch{}return new yq},Xp=iV("localStorage"),Vk=iV("sessionStorage"),v_=new mo.Yd("@firebase/database"),rV=function(){let n=1;return function(){return n++}}(),sV=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const i=t.digest();return F.US.encodeByteArray(i)},t0=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=t0.apply(null,i):e+="object"==typeof i?(0,F.Pz)(i):i,e+=" "}return e};let Jp=null,oV=!0;const aV=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(v_.logLevel=mo.in.VERBOSE,Jp=v_.log.bind(v_),e&&Vk.set("logging_enabled",!0)):"function"==typeof n?Jp=n:(Jp=null,Vk.remove("logging_enabled"))},Rr=function(...n){if(!0===oV&&(oV=!1,null===Jp&&!0===Vk.get("logging_enabled")&&aV(!0)),Jp){const e=t0.apply(null,n);Jp(e)}},n0=function(n){return function(...e){Rr(n,...e)}},Bk=function(...n){const e="FIREBASE INTERNAL ERROR: "+t0(...n);v_.error(e)},Yc=function(...n){const e=`FIREBASE FATAL ERROR: ${t0(...n)}`;throw v_.error(e),new Error(e)},ys=function(...n){const e="FIREBASE WARNING: "+t0(...n);v_.warn(e)},DI=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},pd="[MIN_NAME]",Qc="[MAX_NAME]",em=function(n,e){if(n===e)return 0;if(n===pd||e===Qc)return-1;if(e===pd||n===Qc)return 1;{const t=II(n),i=II(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},wq=function(n,e){return n===e?0:n<e?-1:1},r0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(e))},Uk=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,F.Pz)(e[i]),t+=":",t+=Uk(n[e[i]]);return t+="}",t},lV=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function Or(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const cV=function(n){(0,F.hu)(!DI(n),"Invalid JSON number");const i=1023;let r,s,l,h,p;0===n?(s=0,l=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=h+i,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(r?1:0),y.reverse();const E=y.join("");let I="";for(p=0;p<64;p+=8){let k=parseInt(E.substr(p,8),2).toString(16);1===k.length&&(k="0"+k),I+=k}return I.toLowerCase()},Iq=new RegExp("^-?(0*)\\d{1,10}$"),uV=-2147483648,Hk=2147483647,II=function(n){if(Iq.test(n)){const e=Number(n);if(e>=uV&&e<=Hk)return e}return null},b_=function(n){try{n()}catch(e){setTimeout(()=>{throw ys("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},s0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Sq{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ys(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Aq{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Rr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ys(e)}}let o0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const mV=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yV="websocket",vV="long_polling";class $k{constructor(e,t,i,r,s=!1,l="",h=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Xp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Xp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function bV(n,e,t){let i;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===yV)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==vV)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function xq(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return Or(t,(s,l)=>{r.push(s+"="+l)}),i+r.join("&")}class Mq{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const Gk={},zk={};function qk(n){const e=n.toString();return Gk[e]||(Gk[e]=new Mq),Gk[e]}class Rq{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&b_(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Uh{constructor(e,t,i,r,s,l,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=n0(e),this.stats_=qk(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),bV(t,vV,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Rq(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Wk((...s)=>{const[l,h,p,y,E]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&mV.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Uh.forceAllow_=!0}static forceDisallow(){Uh.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!Uh.forceAllow_&&(Uh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,F.h$)(t),r=lV(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Wk{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=rV(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Wk.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Rr("frame writing exception"),h.stack&&Rr(h.stack),Rr(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Rr("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const l=this.pendingSegs.shift();i=i+"&seg"+r+"="+l.seg+"&ts"+r+"="+l.ts+"&d"+r+"="+l.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Rr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let SI=null;typeof MozWebSocket<"u"?SI=MozWebSocket:typeof WebSocket<"u"&&(SI=WebSocket);let w_=(()=>{class n{constructor(t,i,r,s,l,h,p){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=n0(this.connId),this.stats_=qk(i),this.connURL=n.connectionURL_(i,h,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,l){const h={v:"5"};return!(0,F.Yr)()&&typeof location<"u"&&location.hostname&&mV.test(location.hostname)&&(h.r="f"),i&&(h.s=i),r&&(h.ls=r),s&&(h.ac=s),l&&(h.p=l),bV(t,yV,h)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Xp.set("previous_websocket_failure",!0);try{let r;if((0,F.Yr)()){r={headers:{"User-Agent":`Firebase/5/${Lk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(r.proxy={origin:h})}this.mySock=new SI(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==SI&&!n.forceDisallow_}static previouslyFailed(){return Xp.isInMemoryStorage||!0===Xp.get("previous_websocket_failure")}markConnectionHealthy(){Xp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,F.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,F.Pz)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=lV(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),SV=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Uh,w_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=w_&&w_.isAvailable();let r=i&&!w_.previouslyFailed();if(t.webSocketOnly&&(i||ys("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[w_];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class PV{constructor(e,t,i,r,s,l,h,p,y,E){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=n0("c:"+this.id+":"),this.transportManager_=new SV(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=s0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=r0("t",e),i=r0("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=r0("t",e),i=r0("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=r0("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?Bk("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Bk("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&ys("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),s0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):s0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Xp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class NV{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class FV{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class AI extends FV{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new AI}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Sn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Cn(){return new Sn("")}function Xt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Hh(n){return n.pieces_.length-n.pieceNum_}function Hn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Sn(n.pieces_,e)}function Zk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function a0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function BV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Sn(e,0)}function gi(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Sn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Sn(t,0)}function Jt(n){return n.pieceNum_>=n.pieces_.length}function $s(n,e){const t=Xt(n),i=Xt(e);if(null===t)return e;if(t===i)return $s(Hn(n),Hn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function e6(n,e){const t=a0(n,0),i=a0(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=em(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function Yk(n,e){if(Hh(n)!==Hh(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Za(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Hh(n)>Hh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class t6{constructor(e,t){this.errorPrefix_=t,this.parts_=a0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,F.ug)(this.parts_[i]);UV(this)}}function UV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+tm(n))}function tm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Qk extends FV{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Qk}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const l0=1e3;let MI,nm=(()=>{class n extends NV{constructor(t,i,r,s,l,h,p,y){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=n0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=l0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Qk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&AI.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,l={r:s,a:t,b:i};this.log_((0,F.Pz)(l)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new F.BH,r={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:h=>{const p=h.d;"ok"===h.s?i.resolve(p):i.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(h).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const l={p:r};t.tag&&(l.q=i._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const y=p.d,E=p.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",p),"ok"!==E&&this.removeListen_(r,s),t.onComplete&&t.onComplete(E,y))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const r=(0,F.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',l=i._path.toString();ys(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,F.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const l=s.s,h=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const l={p:t};s&&(l.q=r,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const l={p:i,d:r};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,l){this.initConnection_();const h={p:i,d:r};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,l=>{this.log_(i+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Pz)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):Bk("Unrecognized action received from server: "+(0,F.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=l0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=l0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=l0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,y=null;const E=function(){y?y.close():(p=!0,s())};t.realtime_={close:E,sendRequest:function(N){(0,F.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(N)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[N,U]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);p?Rr("getToken() completed but was canceled"):(Rr("getToken() completed. Creating connection."),t.authToken_=N&&N.accessToken,t.appCheckToken_=U&&U.token,y=new PV(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,J=>{ys(J+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(N){t.log_("Failed to get token: "+N),p||(t.repoInfo_.nodeAdmin&&ys(N),E())}}})()}interrupt(t){Rr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Rr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=l0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(l=>Uk(l)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new Sn(t).toString();let s;if(this.listens.has(r)){const l=this.listens.get(r);s=l.get(i),l.delete(i),0===l.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){Rr("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Rr("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,F.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+Lk.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=AI.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class rn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new rn(e,t)}}class xI{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new rn(pd,e),r=new rn(pd,t);return 0!==this.compare(i,r)}minPost(){return rn.MIN}}class $V extends xI{static get __EMPTY_NODE(){return MI}static set __EMPTY_NODE(e){MI=e}compare(e,t){return em(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return rn.MIN}maxPost(){return new rn(Qc,MI)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new rn(e,MI)}toString(){return".key"}}const Xc=new $V;class kI{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,r&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Jk,zl=(()=>{class n{constructor(t,i,r,s,l){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??_o.EMPTY_NODE,this.right=l??_o.EMPTY_NODE}copy(t,i,r,s,l){return new n(t??this.key,i??this.value,r??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const l=r(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===l?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return _o.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return _o.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class _o{constructor(e,t=_o.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new _o(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,zl.BLACK,null,null))}remove(e){return new _o(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,zl.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new kI(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new kI(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new kI(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new kI(this.root_,null,this.comparator_,!0,e)}}function c6(n,e){return em(n.name,e.name)}function Xk(n,e){return em(n,e)}_o.EMPTY_NODE=new class l6{copy(e,t,i,r,s){return this}insert(e,t,i){return new zl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const GV=function(n){return"number"==typeof n?"number:"+cV(n):"string:"+n},zV=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===Jk||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===Jk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qV,WV,KV,E_=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),zV(this.priorityNode_)}static set __childrenNodeConstructor(t){qV=t}static get __childrenNodeConstructor(){return qV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Jt(t)?this:".priority"===Xt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Xt(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,F.hu)(".priority"!==r||1===Hh(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Hn(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+GV(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?cV(this.value_):this.value_,this.lazyHash_=sV(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),l=n.VALUE_TYPE_ORDER.indexOf(r);return(0,F.hu)(s>=0,"Unknown leaf type: "+i),(0,F.hu)(l>=0,"Unknown leaf type: "+r),s===l?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Zn=new class f6 extends xI{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?em(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return rn.MIN}maxPost(){return new rn(Qc,new E_("[PRIORITY-POST]",KV))}makePost(e,t){const i=WV(e);return new rn(t,new E_("[PRIORITY-POST]",i))}toString(){return".priority"}},p6=Math.log(2);class m6{constructor(e){this.count=parseInt(Math.log(e+1)/p6,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const RI=function(n,e,t,i){n.sort(e);const r=function(p,y){const E=y-p;let I,k;if(0===E)return null;if(1===E)return I=n[p],k=t?t(I):I,new zl(k,I.node,zl.BLACK,null,null);{const N=parseInt(E/2,10)+p,U=r(p,N),J=r(N+1,y);return I=n[N],k=t?t(I):I,new zl(k,I.node,zl.BLACK,U,J)}},h=function(p){let y=null,E=null,I=n.length;const k=function(U,J){const ce=I-U,Ue=I;I-=U;const Ke=r(ce+1,Ue),nt=n[ce],Qe=t?t(nt):nt;N(new zl(Qe,nt.node,J,null,Ke))},N=function(U){y?(y.left=U,y=U):(E=U,y=U)};for(let U=0;U<p.count;++U){const J=p.nextBitIsOne(),ce=Math.pow(2,p.count-(U+1));J?k(ce,zl.BLACK):(k(ce,zl.BLACK),k(ce,zl.RED))}return E}(new m6(n.length));return new _o(i||e,h)};let eR;const C_={};class md{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(C_&&Zn,"ChildrenNode.ts has not been loaded"),eR=eR||new md({".priority":C_},{".priority":Zn}),eR}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof _o?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==Xc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(rn.Wrap);let h,l=s.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=s.getNext();h=r?RI(i,e.getCompare()):C_;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const E=Object.assign({},this.indexes_);return E[p]=h,new md(E,y)}addToIndexes(e,t){const i=(0,F.UI)(this.indexes_,(r,s)=>{const l=(0,F.DV)(this.indexSet_,s);if((0,F.hu)(l,"Missing index implementation for "+s),r===C_){if(l.isDefinedOn(e.node)){const h=[],p=t.getIterator(rn.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&h.push(y),y=p.getNext();return h.push(e),RI(h,l.getCompare())}return C_}{const h=t.get(e.name);let p=r;return h&&(p=p.remove(new rn(e.name,h))),p.insert(e,e.node)}});return new md(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,F.UI)(this.indexes_,r=>{if(r===C_)return r;{const s=t.get(e.name);return s?r.remove(new rn(e.name,s)):r}});return new md(i,this.indexSet_)}}let c0,$t=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&zV(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return c0||(c0=new n(new _o(Xk),null,md.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||c0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?c0:i}}getChild(t){const i=Xt(t);return null===i?this:this.getImmediateChild(i).getChild(Hn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,F.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new rn(t,i);let s,l;i.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),l=this.indexMap_.addToIndexes(r,this.children_));const h=s.isEmpty()?c0:this.priorityNode_;return new n(s,h,l)}}updateChild(t,i){const r=Xt(t);if(null===r)return i;{(0,F.hu)(".priority"!==Xt(t)||1===Hh(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Hn(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,l=!0;if(this.forEachChild(Zn,(h,p)=>{i[h]=p.val(t),r++,l&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):l=!1}),!t&&l&&s<2*r){const h=[];for(const p in i)h[p]=i[p];return h}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+GV(this.getPriority().val())+":"),this.forEachChild(Zn,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":sV(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const l=s.getPredecessorKey(new rn(t,i));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new rn(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new rn(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,rn.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,rn.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===u0?-1:0}withIndex(t){if(t===Xc||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Xc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Zn),s=i.getIterator(Zn);let l=r.getNext(),h=s.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=r.getNext(),h=s.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Xc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const u0=new class g6 extends $t{constructor(){super(new _o(Xk),$t.EMPTY_NODE,md.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return $t.EMPTY_NODE}isEmpty(){return!1}};function Di(n,e=null){if(null===n)return $t.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new E_(n,Di(e));if(n instanceof Array){let t=$t.EMPTY_NODE;return Or(n,(i,r)=>{if((0,F.r3)(n,i)&&"."!==i.substring(0,1)){const s=Di(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(Di(e))}{const t=[];let i=!1;if(Or(n,(l,h)=>{if("."!==l.substring(0,1)){const p=Di(h);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),t.push(new rn(l,p)))}}),0===t.length)return $t.EMPTY_NODE;const s=RI(t,c6,l=>l.name,Xk);if(i){const l=RI(t,Zn.getCompare());return new $t(s,Di(e),new md({".priority":l},{".priority":Zn}))}return new $t(s,Di(e),md.Default)}}Object.defineProperties(rn,{MIN:{value:new rn(pd,$t.EMPTY_NODE)},MAX:{value:new rn(Qc,u0)}}),$V.__EMPTY_NODE=$t.EMPTY_NODE,E_.__childrenNodeConstructor=$t,function u6(n){Jk=n}(u0),function h6(n){KV=n}(u0),function d6(n){WV=n}(Di);class tR extends xI{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!Jt(e)&&".priority"!==Xt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?em(e.name,t.name):s}makePost(e,t){const i=Di(e),r=$t.EMPTY_NODE.updateChild(this.indexPath_,i);return new rn(t,r)}maxPost(){const e=$t.EMPTY_NODE.updateChild(this.indexPath_,u0);return new rn(Qc,e)}toString(){return a0(this.indexPath_,0).join("/")}}const nR=new class y6 extends xI{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?em(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return rn.MIN}maxPost(){return rn.MAX}makePost(e,t){const i=Di(e);return new rn(t,i)}toString(){return".value"}},D_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",v6=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=D_.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let l=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)l+=D_.charAt(e[r]);return(0,F.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),QV=function(n){if(n===""+Hk)return"-";const e=II(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let i=t.length-1;for(;i>=0&&"z"===t[i];)i--;if(-1===i)return Qc;const s=D_.charAt(D_.indexOf(t[i])+1);return t[i]=s,t.slice(0,i+1).join("")},XV=function(n){if(n===""+uV)return pd;const e=II(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let i=0;i<t.length;i++)t[i]=n.charAt(i);return"-"===t[t.length-1]?1===t.length?""+Hk:(delete t[t.length-1],t.join("")):(t[t.length-1]=D_.charAt(D_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function JV(n){return{type:"value",snapshotNode:n}}function I_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function d0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function h0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class rR{constructor(e){this.index_=e}updateChild(e,t,i,r,s,l){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(r).equals(i.getChild(r))&&h.isEmpty()===i.isEmpty()||(null!=l&&(i.isEmpty()?e.hasChild(t)?l.trackChildChange(d0(t,h)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(I_(t,i)):l.trackChildChange(h0(t,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(Zn,(r,s)=>{t.hasChild(r)||i.trackChildChange(d0(r,s))}),t.isLeafNode()||t.forEachChild(Zn,(r,s)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(s)||i.trackChildChange(h0(r,s,l))}else i.trackChildChange(I_(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?$t.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class f0{constructor(e){this.indexedFilter_=new rR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=f0.getStartPost_(e),this.endPost_=f0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,s,l){return this.matches(new rn(t,i))||(i=$t.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,l)}updateFullNode(e,t,i){t.isLeafNode()&&(t=$t.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority($t.EMPTY_NODE);const s=this;return t.forEachChild(Zn,(l,h)=>{s.matches(new rn(l,h))||(r=r.updateImmediateChild(l,$t.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class w6{constructor(e){this.rangedFilter_=new f0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,s,l){return this.rangedFilter_.matches(new rn(t,i))||(i=$t.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,l):this.fullLimitUpdateChild_(e,t,i,s,l)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=$t.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=$t.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const h=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(h.name,h.node),l++}}else{let s,l,h,p;if(r=t.withIndex(this.index_),r=r.updatePriority($t.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const I=this.index_.getCompare();h=(k,N)=>I(N,k)}else p=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,E=!1;for(;p.hasNext();){const I=p.getNext();!E&&h(s,I)<=0&&(E=!0),E&&y<this.limit_&&h(I,l)<=0?y++:r=r.updateImmediateChild(I.name,$t.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let l;if(this.reverse_){const I=this.index_.getCompare();l=(k,N)=>I(N,k)}else l=this.index_.getCompare();const h=e;(0,F.hu)(h.numChildren()===this.limit_,"");const p=new rn(t,i),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),E=this.rangedFilter_.matches(p);if(h.hasChild(t)){const I=h.getImmediateChild(t);let k=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=k&&(k.name===t||h.hasChild(k.name));)k=r.getChildAfterChild(this.index_,k,this.reverse_);const N=null==k?1:l(k,p);if(E&&!i.isEmpty()&&N>=0)return s?.trackChildChange(h0(t,i,I)),h.updateImmediateChild(t,i);{s?.trackChildChange(d0(t,I));const J=h.updateImmediateChild(t,$t.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(s?.trackChildChange(I_(k.name,k.node)),J.updateImmediateChild(k.name,k.node)):J}}return i.isEmpty()?e:E&&l(y,p)>=0?(null!=s&&(s.trackChildChange(d0(y.name,y.node)),s.trackChildChange(I_(t,i))),h.updateImmediateChild(t,i).updateImmediateChild(y.name,$t.EMPTY_NODE)):e}}class OI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:pd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Zn}copy(){const e=new OI;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function sR(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function oR(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function PI(n,e){const t=n.copy();return t.index_=e,t}function eB(n){const e={};if(n.isDefault())return e;let t;return n.index_===Zn?t="$priority":n.index_===nR?t="$value":n.index_===Xc?t="$key":((0,F.hu)(n.index_ instanceof tR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Pz)(t),n.startSet_&&(e.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function tB(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Zn&&(e.i=n.index_.toString()),e}class NI extends NV{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=n0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=NI.getListenId_(e,i),h={};this.listens_[l]=h;const p=eB(e._queryParams);this.restRequest_(s+".json",p,(y,E)=>{let I=E;if(404===y&&(I=null,y=null),null===y&&this.onDataUpdate_(s,I,!1,i),(0,F.DV)(this.listens_,l)===h){let k;k=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(k,null)}})}unlisten(e,t){const i=NI.getListenId_(e,t);delete this.listens_[i]}get(e){const t=eB(e._queryParams),i=e._path.toString(),r=new F.BH;return this.restRequest_(i+".json",t,(s,l)=>{let h=l;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,F.cI)(h.responseText)}catch{ys("Failed to parse JSON response for "+l+": "+h.responseText)}i(null,p)}else 401!==h.status&&404!==h.status&&ys("Got unsuccessful REST response for "+l+" Status: "+h.status),i(h.status);i=null}},h.open("GET",l,!0),h.send()})}}class S6{constructor(){this.rootNode_=$t.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function FI(){return{value:null,children:new Map}}function T_(n,e,t){if(Jt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=Xt(e);n.children.has(i)||n.children.set(i,FI()),T_(n.children.get(i),e=Hn(e),t)}}function aR(n,e){if(Jt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Zn,(i,r)=>{T_(n,new Sn(i),r)}),aR(n,e)}}if(n.children.size>0){const t=Xt(e);return e=Hn(e),n.children.has(t)&&aR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function lR(n,e,t){null!==n.value?t(e,n.value):function A6(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{lR(r,new Sn(e.toString()+"/"+i),t)})}class x6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Or(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class R6{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new x6(e);const i=1e4+2e4*Math.random();s0(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Or(e,(r,s)=>{s>0&&(0,F.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),s0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ya=(()=>{return(n=Ya||(Ya={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ya;var n})();function dR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class LI{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Ya.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Jt(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Sn(e));return new LI(Cn(),t,this.revert)}}return(0,F.hu)(Xt(this.path)===e,"operationForChild called for unrelated child."),new LI(Hn(this.path),this.affectedTree,this.revert)}}class p0{constructor(e,t){this.source=e,this.path=t,this.type=Ya.LISTEN_COMPLETE}operationForChild(e){return Jt(this.path)?new p0(this.source,Cn()):new p0(this.source,Hn(this.path))}}class im{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Ya.OVERWRITE}operationForChild(e){return Jt(this.path)?new im(this.source,Cn(),this.snap.getImmediateChild(e)):new im(this.source,Hn(this.path),this.snap)}}class S_{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Ya.MERGE}operationForChild(e){if(Jt(this.path)){const t=this.children.subtree(new Sn(e));return t.isEmpty()?null:t.value?new im(this.source,Cn(),t.value):new S_(this.source,Cn(),t)}return(0,F.hu)(Xt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new S_(this.source,Hn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class jh{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Xt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class O6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function m0(n,e,t,i,r,s){const l=i.filter(h=>h.type===t);l.sort((h,p)=>function F6(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const i=new rn(e.childName,e.snapshotNode),r=new rn(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,h,p)),l.forEach(h=>{const p=function N6(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);r.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(p,n.query_))})})}function VI(n,e){return{eventCache:n,serverCache:e}}function g0(n,e,t,i){return VI(new jh(e,t,i),n.serverCache)}function iB(n,e,t,i){return VI(n.eventCache,new jh(e,t,i))}function BI(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function rm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let hR;class Yn{constructor(e,t=(()=>(hR||(hR=new _o(wq)),hR))()){this.value=e,this.children=t}static fromObject(e){let t=new Yn(null);return Or(e,(i,r)=>{t=t.set(new Sn(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Cn(),value:this.value};if(Jt(e))return null;{const i=Xt(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Hn(e),t);return null!=s?{path:gi(new Sn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const t=Xt(e),i=this.children.get(t);return null!==i?i.subtree(Hn(e)):new Yn(null)}}set(e,t){if(Jt(e))return new Yn(t,this.children);{const i=Xt(e),s=(this.children.get(i)||new Yn(null)).set(Hn(e),t),l=this.children.insert(i,s);return new Yn(this.value,l)}}remove(e){if(Jt(e))return this.children.isEmpty()?new Yn(null):new Yn(null,this.children);{const t=Xt(e),i=this.children.get(t);if(i){const r=i.remove(Hn(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new Yn(null):new Yn(this.value,s)}return this}}get(e){if(Jt(e))return this.value;{const t=Xt(e),i=this.children.get(t);return i?i.get(Hn(e)):null}}setTree(e,t){if(Jt(e))return t;{const i=Xt(e),s=(this.children.get(i)||new Yn(null)).setTree(Hn(e),t);let l;return l=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Yn(this.value,l)}}fold(e){return this.fold_(Cn(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(gi(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Cn(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Jt(e))return null;{const s=Xt(e),l=this.children.get(s);return l?l.findOnPath_(Hn(e),gi(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Cn(),t)}foreachOnPath_(e,t,i){if(Jt(e))return this;{this.value&&i(t,this.value);const r=Xt(e),s=this.children.get(r);return s?s.foreachOnPath_(Hn(e),gi(t,r),i):new Yn(null)}}foreach(e){this.foreach_(Cn(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(gi(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class ql{constructor(e){this.writeTree_=e}static empty(){return new ql(new Yn(null))}}function _0(n,e,t){if(Jt(e))return new ql(new Yn(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const l=$s(r,e);return s=s.updateChild(l,t),new ql(n.writeTree_.set(r,s))}{const r=new Yn(t),s=n.writeTree_.setTree(e,r);return new ql(s)}}}function fR(n,e,t){let i=n;return Or(t,(r,s)=>{i=_0(i,gi(e,r),s)}),i}function rB(n,e){if(Jt(e))return ql.empty();{const t=n.writeTree_.setTree(e,new Yn(null));return new ql(t)}}function pR(n,e){return null!=sm(n,e)}function sm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild($s(t.path,e)):null}function sB(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Zn,(i,r)=>{e.push(new rn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new rn(i,r.value))}),e}function $h(n,e){if(Jt(e))return n;{const t=sm(n,e);return new ql(null!=t?new Yn(t):n.writeTree_.subtree(e))}}function mR(n){return n.writeTree_.isEmpty()}function A_(n,e){return oB(Cn(),n.writeTree_,e)}function oB(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,F.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=oB(gi(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(gi(n,".priority"),i)),t}}function UI(n,e){return dB(e,n)}function j6(n,e){if(n.snap)return Za(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Za(gi(n.path,t),e))return!0;return!1}function G6(n){return n.visible}function aB(n,e,t){let i=ql.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const l=s.path;let h;if(s.snap)Za(t,l)?(h=$s(t,l),i=_0(i,h,s.snap)):Za(l,t)&&(h=$s(l,t),i=_0(i,Cn(),s.snap.getChild(h)));else{if(!s.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(Za(t,l))h=$s(t,l),i=fR(i,h,s.children);else if(Za(l,t))if(h=$s(l,t),Jt(h))i=fR(i,Cn(),s.children);else{const p=(0,F.DV)(s.children,Xt(h));if(p){const y=p.getChild(Hn(h));i=_0(i,Cn(),y)}}}}}return i}function lB(n,e,t,i,r){if(i||r){const s=$h(n.visibleWrites,e);return!r&&mR(s)?t:r||null!=t||pR(s,Cn())?A_(aB(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(Za(y.path,e)||Za(e,y.path))},e),t||$t.EMPTY_NODE):null}{const s=sm(n.visibleWrites,e);if(null!=s)return s;{const l=$h(n.visibleWrites,e);return mR(l)?t:null!=t||pR(l,Cn())?A_(l,t||$t.EMPTY_NODE):null}}}function HI(n,e,t,i){return lB(n.writeTree,n.treePath,e,t,i)}function gR(n,e){return function z6(n,e,t){let i=$t.EMPTY_NODE;const r=sm(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Zn,(s,l)=>{i=i.updateImmediateChild(s,l)}),i;if(t){const s=$h(n.visibleWrites,e);return t.forEachChild(Zn,(l,h)=>{const p=A_($h(s,new Sn(l)),h);i=i.updateImmediateChild(l,p)}),sB(s).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}return sB($h(n.visibleWrites,e)).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}(n.writeTree,n.treePath,e)}function cB(n,e,t,i){return function q6(n,e,t,i,r){(0,F.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=gi(e,t);if(pR(n.visibleWrites,s))return null;{const l=$h(n.visibleWrites,s);return mR(l)?r.getChild(t):A_(l,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function jI(n,e){return function K6(n,e){return sm(n.visibleWrites,e)}(n.writeTree,gi(n.treePath,e))}function _R(n,e,t){return function W6(n,e,t,i){const r=gi(e,t),s=sm(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?A_($h(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function uB(n,e){return dB(gi(n.treePath,e),n.writeTree)}function dB(n,e){return{treePath:n,writeTree:e}}class X6{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,h0(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,d0(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,I_(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,h0(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const hB=new class J6{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class yR{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new jh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _R(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:rm(this.viewCache_),s=function Q6(n,e,t,i,r,s){return function Z6(n,e,t,i,r,s,l){let h;const p=$h(n.visibleWrites,e),y=sm(p,Cn());if(null!=y)h=y;else{if(null==t)return[];h=A_(p,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const E=[],I=l.getCompare(),k=s?h.getReverseIteratorFrom(i,l):h.getIteratorFrom(i,l);let N=k.getNext();for(;N&&E.length<r;)0!==I(N,i)&&E.push(N),N=k.getNext();return E}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function fB(n,e,t,i,r,s){const l=e.eventCache;if(null!=jI(i,t))return e;{let h,p;if(Jt(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=rm(e),I=gR(i,y instanceof $t?y:$t.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),I,s)}else{const y=HI(i,rm(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=Xt(t);if(".priority"===y){(0,F.hu)(1===Hh(t),"Can't have a priority with additional path components");const E=l.getNode();p=e.serverCache.getNode();const I=cB(i,t,E,p);h=null!=I?n.filter.updatePriority(E,I):l.getNode()}else{const E=Hn(t);let I;if(l.isCompleteForChild(y)){p=e.serverCache.getNode();const k=cB(i,t,l.getNode(),p);I=null!=k?l.getNode().getImmediateChild(y).updateChild(E,k):l.getNode().getImmediateChild(y)}else I=_R(i,y,e.serverCache);h=null!=I?n.filter.updateChild(l.getNode(),y,I,E,r,s):l.getNode()}}return g0(e,h,l.isFullyInitialized()||Jt(t),n.filter.filtersNodes())}}function $I(n,e,t,i,r,s,l,h){const p=e.serverCache;let y;const E=l?n.filter:n.filter.getIndexedFilter();if(Jt(t))y=E.updateFullNode(p.getNode(),i,null);else if(E.filtersNodes()&&!p.isFiltered()){const N=p.getNode().updateChild(t,i);y=E.updateFullNode(p.getNode(),N,null)}else{const N=Xt(t);if(!p.isCompleteForPath(t)&&Hh(t)>1)return e;const U=Hn(t),ce=p.getNode().getImmediateChild(N).updateChild(U,i);y=".priority"===N?E.updatePriority(p.getNode(),ce):E.updateChild(p.getNode(),N,ce,U,hB,null)}const I=iB(e,y,p.isFullyInitialized()||Jt(t),E.filtersNodes());return fB(n,I,t,r,new yR(r,I,s),h)}function vR(n,e,t,i,r,s,l){const h=e.eventCache;let p,y;const E=new yR(r,e,s);if(Jt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),i,l),p=g0(e,y,!0,n.filter.filtersNodes());else{const I=Xt(t);if(".priority"===I)y=n.filter.updatePriority(e.eventCache.getNode(),i),p=g0(e,y,h.isFullyInitialized(),h.isFiltered());else{const k=Hn(t),N=h.getNode().getImmediateChild(I);let U;if(Jt(k))U=i;else{const J=E.getCompleteChild(I);U=null!=J?".priority"===Zk(k)&&J.getChild(BV(k)).isEmpty()?J:J.updateChild(k,i):$t.EMPTY_NODE}p=N.equals(U)?e:g0(e,n.filter.updateChild(h.getNode(),I,U,k,E,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function pB(n,e){return n.eventCache.isCompleteForChild(e)}function mB(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function bR(n,e,t,i,r,s,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=Jt(t)?i:new Yn(null).setTree(t,i);const E=e.serverCache.getNode();return y.children.inorderTraversal((I,k)=>{if(E.hasChild(I)){const U=mB(0,e.serverCache.getNode().getImmediateChild(I),k);p=$I(n,p,new Sn(I),U,r,s,l,h)}}),y.children.inorderTraversal((I,k)=>{const N=!e.serverCache.isCompleteForChild(I)&&void 0===k.value;if(!E.hasChild(I)&&!N){const J=mB(0,e.serverCache.getNode().getImmediateChild(I),k);p=$I(n,p,new Sn(I),J,r,s,l,h)}}),p}class lW{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new rR(i.getIndex()),s=function E6(n){return n.loadsAllData()?new rR(n.getIndex()):n.hasLimit()?new w6(n):new f0(n)}(i);this.processor_=function eW(n){return{filter:n}}(s);const l=t.serverCache,h=t.eventCache,p=r.updateFullNode($t.EMPTY_NODE,l.getNode(),null),y=s.updateFullNode($t.EMPTY_NODE,h.getNode(),null),E=new jh(p,l.isFullyInitialized(),r.filtersNodes()),I=new jh(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=VI(I,E),this.eventGenerator_=new O6(this.query_)}get query(){return this.query_}}function dW(n,e){const t=rm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Jt(e)&&!t.getImmediateChild(Xt(e)).isEmpty())?t.getChild(e):null}function gB(n){return 0===n.eventRegistrations_.length}function _B(n,e,t){const i=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(t,r);l&&i.push(l)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(l)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function yB(n,e,t,i){e.type===Ya.MERGE&&null!==e.source.queryId&&((0,F.hu)(rm(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(BI(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function nW(n,e,t,i,r){const s=new X6;let l,h;if(t.type===Ya.OVERWRITE){const y=t;y.source.fromUser?l=vR(n,e,y.path,y.snap,i,r,s):((0,F.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!Jt(y.path),l=$I(n,e,y.path,y.snap,i,r,h,s))}else if(t.type===Ya.MERGE){const y=t;y.source.fromUser?l=function rW(n,e,t,i,r,s,l){let h=e;return i.foreach((p,y)=>{const E=gi(t,p);pB(e,Xt(E))&&(h=vR(n,h,E,y,r,s,l))}),i.foreach((p,y)=>{const E=gi(t,p);pB(e,Xt(E))||(h=vR(n,h,E,y,r,s,l))}),h}(n,e,y.path,y.children,i,r,s):((0,F.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),l=bR(n,e,y.path,y.children,i,r,h,s))}else if(t.type===Ya.ACK_USER_WRITE){const y=t;l=y.revert?function aW(n,e,t,i,r,s){let l;if(null!=jI(i,t))return e;{const h=new yR(i,e,r),p=e.eventCache.getNode();let y;if(Jt(t)||".priority"===Xt(t)){let E;if(e.serverCache.isFullyInitialized())E=HI(i,rm(e));else{const I=e.serverCache.getNode();(0,F.hu)(I instanceof $t,"serverChildren would be complete if leaf node"),E=gR(i,I)}y=n.filter.updateFullNode(p,E,s)}else{const E=Xt(t);let I=_R(i,E,e.serverCache);null==I&&e.serverCache.isCompleteForChild(E)&&(I=p.getImmediateChild(E)),y=null!=I?n.filter.updateChild(p,E,I,Hn(t),h,s):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(p,E,$t.EMPTY_NODE,Hn(t),h,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=HI(i,rm(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=jI(i,Cn()),g0(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,i,r,s):function sW(n,e,t,i,r,s,l){if(null!=jI(r,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=i.value){if(Jt(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return $I(n,e,t,p.getNode().getChild(t),r,s,h,l);if(Jt(t)){let y=new Yn(null);return p.getNode().forEachChild(Xc,(E,I)=>{y=y.set(new Sn(E),I)}),bR(n,e,t,y,r,s,h,l)}return e}{let y=new Yn(null);return i.foreach((E,I)=>{const k=gi(t,E);p.isCompleteForPath(k)&&(y=y.set(E,p.getNode().getChild(k)))}),bR(n,e,t,y,r,s,h,l)}}(n,e,y.path,y.affectedTree,i,r,s)}else{if(t.type!==Ya.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);l=function oW(n,e,t,i,r){const s=e.serverCache;return fB(n,iB(e,s.getNode(),s.isFullyInitialized()||Jt(t),s.isFiltered()),t,i,hB,r)}(n,e,t.path,i,s)}const p=s.getChanges();return function iW(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=BI(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(JV(BI(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,r,e,t,i);return function tW(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,F.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,vB(n,s.changes,s.viewCache.eventCache.getNode(),null)}function vB(n,e,t,i){return function P6(n,e,t,i){const r=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function b6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),m0(n,r,"child_removed",e,i,t),m0(n,r,"child_added",e,i,t),m0(n,r,"child_moved",s,i,t),m0(n,r,"child_changed",e,i,t),m0(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let GI,qI;class bB{constructor(){this.views=new Map}}function wR(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,F.hu)(null!=s,"SyncTree gave us an op for an invalid query."),yB(s,e,t,i)}{let s=[];for(const l of n.views.values())s=s.concat(yB(l,e,t,i));return s}}function ER(n,e,t,i,r){const l=n.views.get(e._queryIdentifier);if(!l){let h=HI(t,r?i:null),p=!1;h?p=!0:i instanceof $t?(h=gR(t,i),p=!1):(h=$t.EMPTY_NODE,p=!1);const y=VI(new jh(h,p,!1),new jh(i,r,!1));return new lW(e,y)}return l}function wB(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Gh(n,e){let t=null;for(const i of n.views.values())t=t||dW(i,e);return t}function EB(n,e){return e._queryParams.loadsAllData()?zI(n):n.views.get(e._queryIdentifier)}function CB(n,e){return null!=EB(n,e)}function zh(n){return null!=zI(n)}function zI(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let wW=1;class DB{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Yn(null),this.pendingWriteTree_=function Y6(){return{visibleWrites:ql.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function CR(n,e,t,i,r){return function V6(n,e,t,i,r){(0,F.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=_0(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?x_(n,new im({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function qh(n,e,t=!1){const i=function U6(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function H6(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&j6(h,i.path)?r=!1:Za(i.path,h.path)&&(s=!0)),l--}return!!r&&(s?(function $6(n){n.visibleWrites=aB(n.allWrites,G6,Cn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=rB(n.visibleWrites,i.path):Or(i.children,p=>{n.visibleWrites=rB(n.visibleWrites,gi(i.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new Yn(null);return null!=i.snap?s=s.set(Cn(),!0):Or(i.children,l=>{s=s.set(new Sn(l),!0)}),x_(n,new LI(i.path,s,t))}return[]}function y0(n,e,t){return x_(n,new im({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function WI(n,e,t,i){const r=e._path,s=n.syncPointTree_.get(r);let l=[];if(s&&("default"===e._queryIdentifier||CB(s,e))){const h=function yW(n,e,t,i){const r=e._queryIdentifier,s=[];let l=[];const h=zh(n);if("default"===r)for(const[p,y]of n.views.entries())l=l.concat(_B(y,t,i)),gB(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(r);p&&(l=l.concat(_B(p,t,i)),gB(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!zh(n)&&s.push(new(function mW(){return(0,F.hu)(GI,"Reference.ts has not been loaded"),GI}())(e._repo,e._path)),{removed:s,events:l}}(s,e,t,i);(function gW(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const p=h.removed;l=h.events;const y=-1!==p.findIndex(I=>I._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(r,(I,k)=>zh(k));if(y&&!E){const I=n.syncPointTree_.subtree(r);if(!I.isEmpty()){const k=function xW(n){return n.fold((e,t,i)=>{if(t&&zh(t))return[zI(t)];{let r=[];return t&&(r=wB(t)),Or(i,(s,l)=>{r=r.concat(l)}),r}})}(I);for(let N=0;N<k.length;++N){const U=k[N],J=U.query,ce=MB(n,U);n.listenProvider_.startListening(b0(J),v0(n,J),ce.hashFn,ce.onComplete)}}}!E&&p.length>0&&!i&&(y?n.listenProvider_.stopListening(b0(e),null):p.forEach(I=>{const k=n.queryToTagMap.get(ZI(I));n.listenProvider_.stopListening(b0(I),k)})),function MW(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=ZI(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,p)}return l}function IB(n,e,t,i){const r=DR(n,i);if(null!=r){const s=IR(r),l=s.path,h=s.queryId,p=$s(l,e);return TR(n,l,new im(dR(h),p,t))}return[]}function TB(n,e){const t=n._path;let i=null,r=!1;e.syncPointTree_.foreachOnPath(t,(y,E)=>{const I=$s(y,t);i=i||Gh(E,I),r=r||zh(E)});let l,s=e.syncPointTree_.get(t);s?(r=r||zh(s),i=i||Gh(s,Cn())):(s=new bB,e.syncPointTree_=e.syncPointTree_.set(t,s)),null!=i?l=!0:(l=!1,i=$t.EMPTY_NODE,e.syncPointTree_.subtree(t).foreachChild((E,I)=>{const k=Gh(I,Cn());k&&(i=i.updateImmediateChild(E,k))}));const h=CB(s,n);if(!h&&!n._queryParams.loadsAllData()){const y=ZI(n);(0,F.hu)(!e.queryToTagMap.has(y),"View does not exist, but we have a tag");const E=function kW(){return wW++}();e.queryToTagMap.set(y,E),e.tagToQueryMap.set(E,y)}return{syncPoint:s,writesCache:UI(e.pendingWriteTree_,t),serverCache:i,serverCacheComplete:l,foundAncestorDefaultView:r,viewAlreadyExists:h}}function SB(n,e,t){const{syncPoint:i,serverCache:r,writesCache:s,serverCacheComplete:l,viewAlreadyExists:h,foundAncestorDefaultView:p}=TB(e,n);let y=function _W(n,e,t,i,r,s){const l=ER(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function hW(n,e){n.eventRegistrations_.push(e)}(l,t),function fW(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Zn,(s,l)=>{i.push(I_(s,l))}),t.isFullyInitialized()&&i.push(JV(t.getNode())),vB(n,i,t.getNode(),e)}(l,t)}(i,e,t,s,r,l);if(!h&&!p){const E=EB(i,e);y=y.concat(function RW(n,e,t){const i=e._path,r=v0(n,e),s=MB(n,t),l=n.listenProvider_.startListening(b0(e),r,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(i);if(r)(0,F.hu)(!zh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,E,I)=>{if(!Jt(y)&&E&&zh(E))return[zI(E).query];{let k=[];return E&&(k=k.concat(wB(E).map(N=>N.query))),Or(I,(N,U)=>{k=k.concat(U)}),k}});for(let y=0;y<p.length;++y){const E=p[y];n.listenProvider_.stopListening(b0(E),v0(n,E))}}return l}(n,e,E))}return y}function KI(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,h)=>{const y=Gh(h,$s(l,e));if(y)return y});return lB(r,e,s,t,!0)}function x_(n,e){return AB(e,n.syncPointTree_,null,UI(n.pendingWriteTree_,Cn()))}function AB(n,e,t,i){if(Jt(n.path))return xB(n,e,t,i);{const r=e.get(Cn());null==t&&null!=r&&(t=Gh(r,Cn()));let s=[];const l=Xt(n.path),h=n.operationForChild(l),p=e.children.get(l);if(p&&h){const y=t?t.getImmediateChild(l):null,E=uB(i,l);s=s.concat(AB(h,p,y,E))}return r&&(s=s.concat(wR(r,n,i,t))),s}}function xB(n,e,t,i){const r=e.get(Cn());null==t&&null!=r&&(t=Gh(r,Cn()));let s=[];return e.children.inorderTraversal((l,h)=>{const p=t?t.getImmediateChild(l):null,y=uB(i,l),E=n.operationForChild(l);E&&(s=s.concat(xB(E,h,p,y)))}),r&&(s=s.concat(wR(r,n,i,t))),s}function MB(n,e){const t=e.query,i=v0(n,t);return{hashFn:()=>(function cW(n){return n.viewCache_.serverCache.getNode()}(e)||$t.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function IW(n,e,t){const i=DR(n,t);if(i){const r=IR(i),s=r.path,l=r.queryId,h=$s(s,e);return TR(n,s,new p0(dR(l),h))}return[]}(n,t._path,i):function DW(n,e){return x_(n,new p0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Dq(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return WI(n,t,null,s)}}}}function v0(n,e){const t=ZI(e);return n.queryToTagMap.get(t)}function ZI(n){return n._path.toString()+"$"+n._queryIdentifier}function DR(n,e){return n.tagToQueryMap.get(e)}function IR(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Sn(n.substr(0,e))}}function TR(n,e,t){const i=n.syncPointTree_.get(e);return(0,F.hu)(i,"Missing sync point for query tag that we're tracking"),wR(i,t,UI(n.pendingWriteTree_,e),null)}function b0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function bW(){return(0,F.hu)(qI,"Reference.ts has not been loaded"),qI}())(n._repo,n._path):n}class SR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new SR(t)}node(){return this.node_}}class AR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=gi(this.path_,e);return new AR(this.syncTree_,t)}node(){return KI(this.syncTree_,this.path_)}}const kB=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?PW(n[".sv"],e,t):"object"==typeof n[".sv"]?NW(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},PW=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},NW=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,F.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,F.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return"number"!=typeof l?i:l+i},RB=function(n,e,t,i){return MR(e,new AR(t,n),i)},xR=function(n,e,t){return MR(n,new SR(e),t)};function MR(n,e,t){const i=n.getPriority().val(),r=kB(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,h=kB(l.getValue(),e,t);return h!==l.getValue()||r!==l.getPriority().val()?new E_(h,Di(r)):n}{const l=n;return s=l,r!==l.getPriority().val()&&(s=s.updatePriority(new E_(r))),l.forEachChild(Zn,(h,p)=>{const y=MR(p,e.getImmediateChild(h),t);y!==p&&(s=s.updateImmediateChild(h,y))}),s}}class kR{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function YI(n,e){let t=e instanceof Sn?e:new Sn(e),i=n,r=Xt(t);for(;null!==r;){const s=(0,F.DV)(i.node.children,r)||{children:{},childCount:0};i=new kR(r,i,s),t=Hn(t),r=Xt(t)}return i}function om(n){return n.node.value}function RR(n,e){n.node.value=e,OR(n)}function OB(n){return n.node.childCount>0}function QI(n,e){Or(n.node.children,(t,i)=>{e(new kR(t,n,i))})}function PB(n,e,t,i){t&&!i&&e(n),QI(n,r=>{PB(r,e,!0,i)}),t&&i&&e(n)}function w0(n){return new Sn(null===n.parent?n.name:w0(n.parent)+"/"+n.name)}function OR(n){null!==n.parent&&function VW(n,e,t){const i=function FW(n){return void 0===om(n)&&!OB(n)}(t),r=(0,F.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,OR(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,OR(n))}(n.parent,n.name,n)}const BW=/[\[\].#$\/\u0000-\u001F\u007F]/,UW=/[\[\].#$\u0000-\u001F\u007F]/,PR=10485760,XI=function(n){return"string"==typeof n&&0!==n.length&&!BW.test(n)},NB=function(n){return"string"==typeof n&&0!==n.length&&!UW.test(n)},E0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!DI(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},Jc=function(n,e,t,i){i&&void 0===e||C0((0,F.gK)(n,"value"),e,t)},C0=function(n,e,t){const i=t instanceof Sn?new t6(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+tm(i));if("function"==typeof e)throw new Error(n+"contains a function "+tm(i)+" with contents = "+e.toString());if(DI(e))throw new Error(n+"contains "+e.toString()+" "+tm(i));if("string"==typeof e&&e.length>PR/3&&(0,F.ug)(e)>PR)throw new Error(n+"contains a string greater than "+PR+" utf8 bytes "+tm(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(Or(e,(l,h)=>{if(".value"===l)r=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!XI(l)))throw new Error(n+" contains an invalid key ("+l+") "+tm(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function n6(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),UV(n)})(i,l),C0(n,h,i),function i6(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+tm(i)+" in addition to actual children.")}},FB=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];Or(e,(l,h)=>{const p=new Sn(l);if(C0(r,h,gi(t,p)),".priority"===Zk(p)&&!E0(h))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=a0(i);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!XI(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(e6);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&Za(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},NR=function(n,e,t){if(!t||void 0!==e){if(DI(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!E0(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},D0=function(n,e,t,i){if(!(i&&void 0===t||XI(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},I0=function(n,e,t,i){if(!(i&&void 0===t||NB(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Qa=function(n,e){if(".info"===Xt(e))throw new Error(n+" failed = Can't modify data under /.info/")},LB=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!XI(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),NB(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class GW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function JI(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!Yk(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function VB(n,e,t){JI(n,t),BB(n,i=>Yk(i,e))}function Xa(n,e,t){JI(n,t),BB(n,i=>Za(i,e)||Za(e,i))}function BB(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(zW(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function zW(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Jp&&Rr("event: "+t.toString()),b_(i)}}}const UB="repo_interrupt";class WW{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new GW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=FI(),this.transactionQueueTree_=new kR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function HB(n){const t=n.infoData_.getNode(new Sn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function T0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:HB(n)})}function jB(n,e,t,i,r){n.dataUpdateCount++;const s=new Sn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(r)if(i){const p=(0,F.UI)(t,y=>Di(y));l=function SW(n,e,t,i){const r=DR(n,i);if(r){const s=IR(r),l=s.path,h=s.queryId,p=$s(l,e),y=Yn.fromObject(t);return TR(n,l,new S_(dR(h),p,y))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=Di(t);l=IB(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,F.UI)(t,y=>Di(y));l=function CW(n,e,t){const i=Yn.fromObject(t);return x_(n,new S_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,p)}else{const p=Di(t);l=y0(n.serverSyncTree_,s,p)}let h=s;l.length>0&&(h=M_(n,s)),Xa(n.eventQueue_,h,l)}function $B(n,e){FR(n,"connected",e),!1===e&&function XW(n){am(n,"onDisconnectEvents");const e=T0(n),t=FI();lR(n.onDisconnect_,Cn(),(r,s)=>{const l=RB(r,s,n.serverSyncTree_,e);T_(t,r,l)});let i=[];lR(t,Cn(),(r,s)=>{i=i.concat(y0(n.serverSyncTree_,r,s));const l=UR(n,r);M_(n,l)}),n.onDisconnect_=FI(),Xa(n.eventQueue_,Cn(),i)}(n)}function FR(n,e,t){const i=new Sn("/.info/"+e),r=Di(t);n.infoData_.updateSnapshot(i,r);const s=y0(n.infoSyncTree_,i,r);Xa(n.eventQueue_,i,s)}function eT(n){return n.nextWriteId_++}function YW(n,e){const t=function AW(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(y,E)=>{const I=$s(y,t);i=i||Gh(E,I)});let r=n.syncPointTree_.get(t);r?i=i||Gh(r,Cn()):(r=new bB,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,l=s?new jh(i,!0,!1):null;return function uW(n){return BI(n.viewCache_)}(ER(r,e,UI(n.pendingWriteTree_,e._path),s?l.getNode():$t.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(i=>{const r=Di(i).withIndex(e._queryParams.getIndex());if(e._queryParams.loadsAllData())y0(n.serverSyncTree_,e._path,r);else{const l=function TW(n,e){const{syncPoint:t,serverCache:i,writesCache:r,serverCacheComplete:s}=TB(e,n),l=ER(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),e._queryParams.loadsAllData()?null:v0(n,e)}(n.serverSyncTree_,e);IB(n.serverSyncTree_,e._path,r,l)}return WI(n.serverSyncTree_,e,null).length>0&&am(n,"unexpected cancel events in repoGetValue"),r},i=>(am(n,"get for query "+(0,F.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}function LR(n,e,t,i,r){am(n,"set",{path:e.toString(),value:t,priority:i});const s=T0(n),l=Di(t,i),h=KI(n.serverSyncTree_,e),p=xR(l,h,s),y=eT(n),E=CR(n.serverSyncTree_,e,p,y,!0);JI(n.eventQueue_,E),n.server_.put(e.toString(),l.val(!0),(k,N)=>{const U="ok"===k;U||ys("set at "+e+" failed: "+k);const J=qh(n.serverSyncTree_,y,!U);Xa(n.eventQueue_,e,J),Wh(0,r,k,N)});const I=UR(n,e);M_(n,I),Xa(n.eventQueue_,I,[])}function JW(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&aR(n.onDisconnect_,e),Wh(0,t,i,r)})}function GB(n,e,t,i){const r=Di(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,l)=>{"ok"===s&&T_(n.onDisconnect_,e,r),Wh(0,i,s,l)})}function VR(n,e,t){let i;i=".info"===Xt(e._path)?WI(n.infoSyncTree_,e,t):WI(n.serverSyncTree_,e,t),VB(n.eventQueue_,e._path,i)}function zB(n){n.persistentConnection_&&n.persistentConnection_.interrupt(UB)}function am(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Rr(t,...e)}function Wh(n,e,t,i){e&&b_(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const l=new Error(s);l.code=r,e(l)}})}function BR(n,e,t){return KI(n.serverSyncTree_,e,t)||$t.EMPTY_NODE}function tT(n,e=n.transactionQueueTree_){if(e||nT(n,e),om(e)){const t=WB(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function s4(n,e,t){const i=t.map(y=>y.currentWriteId),r=BR(n,e,i);let s=r;const l=r.hash();for(let y=0;y<t.length;y++){const E=t[y];(0,F.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const I=$s(e,E.path);s=s.updateChild(I,E.currentOutputSnapshotRaw)}const h=s.val(!0),p=e;n.server_.put(p.toString(),h,y=>{am(n,"transaction put response",{path:p.toString(),status:y});let E=[];if("ok"===y){const I=[];for(let k=0;k<t.length;k++)t[k].status=2,E=E.concat(qh(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&I.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();nT(n,YI(n.transactionQueueTree_,e)),tT(n,n.transactionQueueTree_),Xa(n.eventQueue_,e,E);for(let k=0;k<I.length;k++)b_(I[k])}else{if("datastale"===y)for(let I=0;I<t.length;I++)t[I].status=3===t[I].status?4:0;else{ys("transaction at "+p.toString()+" failed: "+y);for(let I=0;I<t.length;I++)t[I].status=4,t[I].abortReason=y}M_(n,e)}},l)}(n,w0(e),t)}else OB(e)&&QI(e,t=>{tT(n,t)})}function M_(n,e){const t=qB(n,e),i=w0(t);return function o4(n,e,t){if(0===e.length)return;const i=[];let r=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],y=$s(t,p.path);let I,E=!1;if((0,F.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)E=!0,I=p.abortReason,r=r.concat(qh(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)E=!0,I="maxretry",r=r.concat(qh(n.serverSyncTree_,p.currentWriteId,!0));else{const k=BR(n,p.path,l);p.currentInputSnapshot=k;const N=e[h].update(k.val());if(void 0!==N){C0("transaction failed: Data returned ",N,p.path);let U=Di(N);"object"==typeof N&&null!=N&&(0,F.r3)(N,".priority")||(U=U.updatePriority(k.getPriority()));const ce=p.currentWriteId,Ue=T0(n),Ke=xR(U,k,Ue);p.currentOutputSnapshotRaw=U,p.currentOutputSnapshotResolved=Ke,p.currentWriteId=eT(n),l.splice(l.indexOf(ce),1),r=r.concat(CR(n.serverSyncTree_,p.path,Ke,p.currentWriteId,p.applyLocally)),r=r.concat(qh(n.serverSyncTree_,ce,!0))}else E=!0,I="nodata",r=r.concat(qh(n.serverSyncTree_,p.currentWriteId,!0))}Xa(n.eventQueue_,t,r),r=[],E&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&i.push("nodata"===I?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(I),!1,null)))}nT(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)b_(i[h]);tT(n,n.transactionQueueTree_)}(n,WB(n,t),i),i}function qB(n,e){let t,i=n.transactionQueueTree_;for(t=Xt(e);null!==t&&void 0===om(i);)i=YI(i,t),t=Xt(e=Hn(e));return i}function WB(n,e){const t=[];return KB(n,e,t),t.sort((i,r)=>i.order-r.order),t}function KB(n,e,t){const i=om(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);QI(e,r=>{KB(n,r,t)})}function nT(n,e){const t=om(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,RR(e,t.length>0?t:void 0)}QI(e,i=>{nT(n,i)})}function UR(n,e){const t=w0(qB(n,e)),i=YI(n.transactionQueueTree_,e);return function LW(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{HR(n,r)}),HR(n,i),PB(i,r=>{HR(n,r)}),t}function HR(n,e){const t=om(e);if(t){const i=[];let r=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,F.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,F.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),r=r.concat(qh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&i.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?RR(e,void 0):t.length=s+1,Xa(n.eventQueue_,w0(e),r);for(let l=0;l<i.length;l++)b_(i[l])}}const jR=function(n,e){const t=c4(n),i=t.namespace;return"firebase.com"===t.domain&&Yc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Yc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ys("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new $k(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new Sn(t.pathString)}},c4=function(n){let e="",t="",i="",r="",s="",l=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let E=n.indexOf("/");-1===E&&(E=n.length);let I=n.indexOf("?");-1===I&&(I=n.length),e=n.substring(0,Math.min(E,I)),E<I&&(r=function a4(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(E,I)));const k=function l4(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ys(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,I)));y=e.indexOf(":"),y>=0?(l="https"===h||"wss"===h,p=parseInt(e.substring(y+1),10)):y=e.length;const N=e.slice(0,y);if("localhost"===N.toLowerCase())t="localhost";else if(N.split(".").length<=2)t=N;else{const U=e.indexOf(".");i=e.substring(0,U).toLowerCase(),t=e.substring(U+1),s=i}"ns"in k&&(s=k.ns)}return{host:e,port:p,domain:t,subdomain:i,secure:l,scheme:h,pathString:r,namespace:s}};class ZB{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class YB{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class QB{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class XB{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return JW(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Qa("OnDisconnect.remove",this._path);const e=new F.BH;return GB(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Qa("OnDisconnect.set",this._path),Jc("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return GB(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Qa("OnDisconnect.setWithPriority",this._path),Jc("OnDisconnect.setWithPriority",e,this._path,!1),NR("OnDisconnect.setWithPriority",t,!1);const i=new F.BH;return function e4(n,e,t,i,r){const s=Di(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(l,h)=>{"ok"===l&&T_(n.onDisconnect_,e,s),Wh(0,r,l,h)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Qa("OnDisconnect.update",this._path),FB("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function t4(n,e,t,i){if((0,F.xb)(t))return Rr("onDisconnect().update() called with empty data.  Don't do anything."),void Wh(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{"ok"===r&&Or(t,(l,h)=>{const p=Di(h);T_(n.onDisconnect_,gi(e,l),p)}),Wh(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class yo{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Jt(this._path)?null:Zk(this._path)}get ref(){return new Ja(this._repo,this._path)}get _queryIdentifier(){const e=tB(this._queryParams),t=Uk(e);return"{}"===t?"default":t}get _queryObject(){return tB(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof yo))return!1;const t=this._repo===e._repo,i=Yk(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Jq(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function iT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Kh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Xc){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==pd)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Qc)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===Zn){if(null!=e&&!E0(e)||null!=t&&!E0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof tR||n.getIndex()===nR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function rT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ja extends yo{constructor(e,t){super(e,t,new OI,!1)}get parent(){const e=BV(this._path);return null===e?null:new Ja(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class lm{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Sn(e),i=cm(this.ref,e);return new lm(this._node.getChild(t),i,Zn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new lm(r,cm(this.ref,i),Zn)))}hasChild(e){const t=new Sn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function JB(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?cm(n._root,e):n._root}function eU(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=jR(e,n._repo.repoInfo_.nodeAdmin);LB("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Yc("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),JB(n,t.path.toString())}function cm(n,e){return null===Xt((n=(0,F.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),I0("child","path",t,!1)):I0("child","path",e,!1),new Ja(n._repo,gi(n._path,e));var t}function $R(n,e){n=(0,F.m9)(n),Qa("set",n._path),Jc("set",e,n._path,!1);const t=new F.BH;return LR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function p4(n,e){FB("update",e,n._path,!1);const t=new F.BH;return function QW(n,e,t,i){am(n,"update",{path:e.toString(),value:t});let r=!0;const s=T0(n),l={};if(Or(t,(h,p)=>{r=!1,l[h]=RB(gi(e,h),Di(p),n.serverSyncTree_,s)}),r)Rr("update() called with empty data.  Don't do anything."),Wh(0,i,"ok",void 0);else{const h=eT(n),p=function EW(n,e,t,i){!function B6(n,e,t,i){(0,F.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=fR(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=Yn.fromObject(t);return x_(n,new S_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,l,h);JI(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,E)=>{const I="ok"===y;I||ys("update at "+e+" failed: "+y);const k=qh(n.serverSyncTree_,h,!I),N=k.length>0?M_(n,e):e;Xa(n.eventQueue_,N,k),Wh(0,i,y,E)}),Or(t,y=>{const E=UR(n,gi(e,y));M_(n,E)}),Xa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}class sT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new ZB("value",this,new lm(e.snapshotNode,new Ja(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new YB(this,e,t):null}matches(e){return e instanceof sT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class oT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new YB(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const i=cm(new Ja(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new ZB(e.type,this,new lm(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof oT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function S0(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=t,y=(E,I)=>{VR(n._repo,n,h),p(E,I)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new QB(t,s||void 0),h="value"===e?new sT(l):new oT(e,l);return function n4(n,e,t){let i;i=".info"===Xt(e._path)?SB(n.infoSyncTree_,e,t):SB(n.serverSyncTree_,e,t),VB(n.eventQueue_,e._path,i)}(n._repo,n,h),()=>VR(n._repo,n,h)}function GR(n,e,t,i){return S0(n,"value",e,t,i)}function tU(n,e,t,i){return S0(n,"child_added",e,t,i)}function nU(n,e,t,i){return S0(n,"child_changed",e,t,i)}function iU(n,e,t,i){return S0(n,"child_moved",e,t,i)}function rU(n,e,t,i){return S0(n,"child_removed",e,t,i)}function sU(n,e,t){let i=null;const r=t?new QB(t):null;"value"===e?i=new sT(r):e&&(i=new oT(e,r)),VR(n._repo,n,i)}class Wl{}class oU extends Wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Jc("endAt",this._value,e._path,!0);const t=oR(e._queryParams,this._value,this._key);if(rT(t),Kh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new yo(e._repo,e._path,t,e._orderByCalled)}}class _4 extends Wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Jc("endBefore",this._value,e._path,!1);const t=function T6(n,e,t){let i,r;return n.index_===Xc?("string"==typeof e&&(e=XV(e)),r=oR(n,e,t)):(i=null==t?pd:XV(t),r=oR(n,e,i)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(rT(t),Kh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new yo(e._repo,e._path,t,e._orderByCalled)}}class aU extends Wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Jc("startAt",this._value,e._path,!0);const t=sR(e._queryParams,this._value,this._key);if(rT(t),Kh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new yo(e._repo,e._path,t,e._orderByCalled)}}class b4 extends Wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Jc("startAfter",this._value,e._path,!1);const t=function I6(n,e,t){let i;if(n.index_===Xc)"string"==typeof e&&(e=QV(e)),i=sR(n,e,t);else{let r;r=null==t?Qc:QV(t),i=sR(n,e,r)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(rT(t),Kh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new yo(e._repo,e._path,t,e._orderByCalled)}}class E4 extends Wl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new yo(e._repo,e._path,function C6(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class D4 extends Wl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new yo(e._repo,e._path,function D6(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class T4 extends Wl{constructor(e){super(),this._path=e}_apply(e){iT(e,"orderByChild");const t=new Sn(this._path);if(Jt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new tR(t),r=PI(e._queryParams,i);return Kh(r),new yo(e._repo,e._path,r,!0)}}class A4 extends Wl{_apply(e){iT(e,"orderByKey");const t=PI(e._queryParams,Xc);return Kh(t),new yo(e._repo,e._path,t,!0)}}class M4 extends Wl{_apply(e){iT(e,"orderByPriority");const t=PI(e._queryParams,Zn);return Kh(t),new yo(e._repo,e._path,t,!0)}}class R4 extends Wl{_apply(e){iT(e,"orderByValue");const t=PI(e._queryParams,nR);return Kh(t),new yo(e._repo,e._path,t,!0)}}class P4 extends Wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Jc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new oU(this._value,this._key)._apply(new aU(this._value,this._key)._apply(e))}}function Kl(n,...e){let t=(0,F.m9)(n);for(const i of e)t=i._apply(t);return t}(function pW(n){(0,F.hu)(!GI,"__referenceConstructor has already been defined"),GI=n})(Ja),function vW(n){(0,F.hu)(!qI,"__referenceConstructor has already been defined"),qI=n}(Ja);const zR={};function cU(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Yc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Rr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,l=jR(s,r),h=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${h.namespace}`,l=jR(s,r),h=l.repoInfo):p=!l.repoInfo.secure;const E=r&&p?new o0(o0.OWNER):new Aq(n.name,n.options,e);LB("Invalid Firebase Database URL",l),Jt(l.path)||Yc("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function B4(n,e,t,i){let r=zR[e.name];r||(r={},zR[e.name]=r);let s=r[n.toURLString()];return s&&Yc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new WW(n,false,t,i),r[n.toURLString()]=s,s}(h,n,E,new Sq(n.name,t));return new H4(I,n)}class H4{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function KW(n,e,t){if(n.stats_=qk(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new NI(n.repoInfo_,(i,r,s,l)=>{jB(n,i,r,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>$B(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new nm(n.repoInfo_,e,(i,r,s,l)=>{jB(n,i,r,s,l)},i=>{$B(n,i)},i=>{!function ZW(n,e){Or(e,(t,i)=>{FR(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function kq(n,e){const t=n.toString();return zk[t]||(zk[t]=e()),zk[t]}(n.repoInfo_,()=>new R6(n.stats_,n.server_)),n.infoData_=new S6,n.infoSyncTree_=new DB({startListening:(i,r,s,l)=>{let h=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(h=y0(n.infoSyncTree_,i._path,p),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),FR(n,"connected",!1),n.serverSyncTree_=new DB({startListening:(i,r,s,l)=>(n.server_.listen(i,s,r,(h,p)=>{const y=l(h,p);Xa(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ja(this._repo,Cn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function V4(n,e){const t=zR[e];(!t||t[n.key]!==n)&&Yc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),zB(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Yc("Cannot call "+e+" on a deleted database.")}}function uU(){SV.IS_TRANSPORT_INITIALIZED&&ys("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function j4(){uU(),Uh.forceDisallow()}function $4(){uU(),w_.forceDisallow(),Uh.forceAllow()}function W4(n,e){aV(n,e)}const Z4={".sv":"timestamp"};class X4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}nm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},nm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function K4(n){nV(_s.SDK_VERSION),(0,_s._registerComponent)(new Ka.wA("database",(e,{instanceIdentifier:t})=>cU(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,_s.registerVersion)(eV,"0.13.3",n),(0,_s.registerVersion)(eV,"0.13.3","esm2017")}();const n8=new mo.Yd("@firebase/database-compat"),dU=function(n){n8.warn("FIREBASE WARNING: "+n)};class s8{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,dU("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class o8{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Zh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),I0("DataSnapshot.child","path",e,!1),new Zh(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),I0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Zh(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new Yo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Jr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const l=Jr.getCancelAndContextArgs_("Query.on",i,r),h=(y,E)=>{t.call(l.context,new Zh(this.database,y),E)};h.userCallback=t,h.context=l.context;const p=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(e){case"value":return GR(this._delegate,h,p),t;case"child_added":return tU(this._delegate,h,p),t;case"child_removed":return rU(this._delegate,h,p),t;case"child_changed":return nU(this._delegate,h,p),t;case"child_moved":return iU(this._delegate,h,p),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,sU(this._delegate,e,r)}else sU(this._delegate,e)}get(){return function m4(n){return YW((n=(0,F.m9)(n))._repo,n).then(e=>new lm(e,new Ja(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(e=>new Zh(this.database,e))}once(e,t,i,r){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const s=Jr.getCancelAndContextArgs_("Query.once",i,r),l=new F.BH,h=(y,E)=>{const I=new Zh(this.database,y);t&&t.call(s.context,I,E),l.resolve(I)};h.userCallback=t,h.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),l.reject(y)};switch(e){case"value":GR(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":tU(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":rU(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":nU(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":iU(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new Jr(this.database,Kl(this._delegate,function C4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new E4(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new Jr(this.database,Kl(this._delegate,function I4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new D4(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new Jr(this.database,Kl(this._delegate,function S4(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return I0("orderByChild","path",n,!1),new T4(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new Jr(this.database,Kl(this._delegate,function x4(){return new A4}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new Jr(this.database,Kl(this._delegate,function k4(){return new M4}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new Jr(this.database,Kl(this._delegate,function O4(){return new R4}()))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new Jr(this.database,Kl(this._delegate,function v4(n=null,e){return D0("startAt","key",e,!0),new aU(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new Jr(this.database,Kl(this._delegate,function w4(n,e){return D0("startAfter","key",e,!0),new b4(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new Jr(this.database,Kl(this._delegate,function g4(n,e){return D0("endAt","key",e,!0),new oU(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new Jr(this.database,Kl(this._delegate,function y4(n,e){return D0("endBefore","key",e,!0),new _4(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new Jr(this.database,Kl(this._delegate,function N4(n,e){return D0("equalTo","key",e,!0),new P4(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Jr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,F.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,F.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new Yo(this.database,new Ja(this._delegate._repo,this._delegate._path))}}class Yo extends Jr{constructor(e,t){super(e,new yo(t._repo,t._path,new OI,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Yo(this.database,cm(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Yo(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new Yo(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const i=$R(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,dU("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qa("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const i=p4(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function f4(n,e,t){if(Qa("setWithPriority",n._path),Jc("setWithPriority",e,n._path,!1),NR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new F.BH;return LR(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function d4(n){return Qa("remove",n._path),$R(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function J4(n,e,t){var i;if(n=(0,F.m9)(n),Qa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=t?.applyLocally)||void 0===i||i,s=new F.BH,h=GR(n,()=>{});return function r4(n,e,t,i,r,s){am(n,"transaction on "+e);const l={path:e,update:t,onComplete:i,status:null,order:rV(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=BR(n,e,void 0);l.currentInputSnapshot=h;const p=l.update(h.val());if(void 0===p)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{C0("transaction failed: Data returned ",p,l.path),l.status=0;const y=YI(n.transactionQueueTree_,e),E=om(y)||[];let I;E.push(l),RR(y,E),"object"==typeof p&&null!==p&&(0,F.r3)(p,".priority")?(I=(0,F.DV)(p,".priority"),(0,F.hu)(E0(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(KI(n.serverSyncTree_,e)||$t.EMPTY_NODE).getPriority().val();const k=T0(n),N=Di(p,I),U=xR(N,h,k);l.currentOutputSnapshotRaw=N,l.currentOutputSnapshotResolved=U,l.currentWriteId=eT(n);const J=CR(n.serverSyncTree_,e,U,l.currentWriteId,l.applyLocally);Xa(n.eventQueue_,e,J),tT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,E)=>{let I=null;p?s.reject(p):(I=new lm(E,new Ja(n._repo,n._path),Zn),s.resolve(new X4(y,I)))},h,r),s.promise}(this._delegate,e,{applyLocally:i}).then(s=>new o8(s.committed,new Zh(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const i=function h4(n,e){n=(0,F.m9)(n),Qa("setPriority",n._path),NR("setPriority",e,!1);const t=new F.BH;return LR(n._repo,gi(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const i=function u4(n,e){n=(0,F.m9)(n),Qa("push",n._path),Jc("push",e,n._path,!0);const t=HB(n._repo),i=v6(t),r=cm(n,i),s=cm(n,i);let l;return l=null!=e?$R(s,e).then(()=>s):Promise.resolve(s),r.then=l.then.bind(l),r.catch=l.then.bind(l,void 0),r}(this._delegate,e),r=i.then(l=>new Yo(this.database,l));t&&r.then(()=>t(null),l=>t(l));const s=new Yo(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Qa("Reference.onDisconnect",this._delegate._path),new s8(new XB(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class A0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:j4,forceLongPolling:$4}}useEmulator(e,t,i={}){!function G4(n,e,t,i={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Yc("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Yc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new o0(o0.OWNER);else if(i.mockUserToken){const l="string"==typeof i.mockUserToken?i.mockUserToken:(0,F.Sg)(i.mockUserToken,n.app.options.projectId);s=new o0(l)}!function L4(n,e,t,i){n.repoInfo_=new $k(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(this._delegate,e,t,i)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof Yo){const t=eU(this._delegate,e.toString());return new Yo(this,t)}{const t=JB(this._delegate,e);return new Yo(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const i=eU(this._delegate,e);return new Yo(this,i)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function z4(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),zB(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function q4(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function i4(n){n.persistentConnection_&&n.persistentConnection_.resume(UB)}(n._repo)}(this._delegate)}}A0.ServerValue={TIMESTAMP:function Y4(){return Z4}(),increment:n=>function Q4(n){return{".sv":{increment:n}}}(n)};var l8=Object.freeze({__proto__:null,initStandalone:function a8({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){nV(t);const l=new Ka.zt("auth-internal",new Ka.H0("database-standalone"));return l.setComponent(new Ka.wA("auth-internal",()=>i,"PRIVATE")),{instance:new A0(cU(n,l,void 0,e,s),n),namespace:r}}});const c8=A0.ServerValue;function hU(n){return null==n}function fU(n){return"function"==typeof n.set}function pU(n,e){return fU(e)?e:n.ref(e)}function mU(n,e){if(function d8(n){return"string"==typeof n}(n))return e.stringCase();if(fU(n))return e.firebaseCase();if(function h8(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function x0(n,e,t="on",i=_p.z){return new qn.y(r=>{let s=null;return s=n[t](e,(l,h)=>{i.schedule(()=>{r.next({snapshot:l,prevKey:h})}),"once"===t&&i.schedule(()=>r.complete())},l=>{i.schedule(()=>r.error(l))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,ot.U)(r=>{const{snapshot:s,prevKey:l}=r;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:l,key:h}}),(0,xg.B)())}function gU(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function m8(n,e){const{payload:t,prevKey:i,key:r}=e,s=gU(n,r),l=function p8(n,e){if(hU(e))return 0;{const t=gU(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==i&&(n=n.filter(p=>p.payload.key!==t.key)).splice(l,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===r?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function _U(n){return(hU(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function yU(n,e,t){return function f8(n,e,t){return x0(n,"value","once",t).pipe(Ei(i=>{const r=[Be(i)];return e.forEach(s=>r.push(x0(n,s,"on",t))),(0,od.T)(...r).pipe(Ia(m8,[]))}),gp())}(n,e=_U(e),t)}function vU(n,e,t){const i=(e=_U(e)).map(r=>x0(n,r,"on",t));return(0,od.T)(...i)}function bU(n,e){return function(i,r){return mU(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function v8(n){return function(t){return t?mU(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function wU(n,e){return function(){return x0(n,"value","on",e)}}!function u8(n){n.INTERNAL.registerComponent(new Ka.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new A0(r,i)},"PUBLIC").setServiceProps({Reference:Yo,Query:Jr,Database:A0,DataSnapshot:Zh,enableLogging:W4,INTERNAL:l8,ServerValue:c8}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.3")}(Fk.Z);const E8=new u.OlP("angularfire2.realtimeDatabaseURL"),C8=new u.OlP("angularfire2.database.use-emulator");let aT=(()=>{class n{constructor(t,i,r,s,l,h,p,y,E,I,k,N,U,J,ce){this.schedulers=h;const Ue=p,Ke=(0,Ri.on)(t,l,i);y&&Nk(Ke,l,E,k,N,U,I,J),this.database=(0,Ri.cc)(`${Ke.name}.database.${r}`,"AngularFireDatabase",Ke.name,()=>{const nt=l.runOutsideAngular(()=>Ke.database(r||void 0));return Ue&&nt.useEmulator(...Ue),nt},[Ue])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>pU(this.database,t));let s=r;return i&&(s=i(r)),function b8(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:bU(i,"update"),set:bU(i,"set"),push:r=>i.push(r),remove:v8(i),snapshotChanges:r=>yU(n,r,t).pipe(hn.iC),stateChanges:r=>vU(n,r,t).pipe(hn.iC),auditTrail:r=>function g8(n,e,t){return function y8(n,e,t){return function _8(n,e){return x0(n,"value","on",e).pipe((0,ot.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function mq(...n){const e=(0,Ms.jO)(n);return(0,_n.e)((t,i)=>{const r=n.length,s=new Array(r);let l=n.map(()=>!1),h=!1;for(let p=0;p<r;p++)(0,hs.Xf)(n[p]).subscribe((0,Dn.x)(i,y=>{s[p]=y,!h&&!l[p]&&(l[p]=!0,(h=l.every(ao.y))&&(l=null))},Yy.Z));t.subscribe((0,Dn.x)(i,p=>{if(h){const y=[p,...s];i.next(e?e(...y):y)}}))})}(e),(0,ot.U)(([r,s])=>{const l=r.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:l,loadedKeys:h}}),function gq(n){return(0,_n.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,Dn.x)(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,ot.U)(r=>r.actions))}(n,vU(n,e).pipe(Ia((r,s)=>[...r,s],[])),t)}(n,r,t).pipe(hn.iC),valueChanges:(r,s)=>yU(n,r,t).pipe((0,ot.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),hn.iC)}}(s,this)}object(t){return function w8(n,e){return{query:n,snapshotChanges:()=>wU(n,e.schedulers.outsideAngular)().pipe(hn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>wU(n,e.schedulers.outsideAngular)().pipe(hn.iC,(0,ot.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>pU(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ri.Dh),u.LFG(Ri.xv,8),u.LFG(E8,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(hn.HU),u.LFG(C8,8),u.LFG(fd,8),u.LFG(xk,8),u.LFG(Mk,8),u.LFG(kk,8),u.LFG(Rk,8),u.LFG(Ok,8),u.LFG(Pk,8),u.LFG(e0,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),D8=(()=>{class n{constructor(){CI.Z.registerVersion("angularfire",hn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[aT]}),n})(),qR=(()=>{class n{constructor(t,i,r){this.frauth=t,this.afd=i,this.router=r}signUp(t,i){return this.frauth.createUserWithEmailAndPassword(t,i).then(r=>{this.saveUserData(r.user),this.router.navigate(["/sign-in"])}).catch(r=>{window.alert(r.message)})}signIn(t,i){return this.frauth.signInWithEmailAndPassword(t,i).then(()=>{this.router.navigate(["/dashboard/list"])}).catch(r=>{window.alert(r.message)})}saveUserData(t){return this.afd.object(`/users/${t.uid}`).set({email:t.email})}signOut(){return this.frauth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fd),u.LFG(aT),u.LFG(Xi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const I8=["*",[["mat-toolbar-row"]]],T8=["*","mat-toolbar-row"],S8=Qr(class{constructor(n){this._elementRef=n}});let A8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),x8=(()=>{class n extends S8{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(Ji),u.Y36(se))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,r){if(1&t&&u.Suo(r,A8,5),2&t){let s;u.iGM(s=u.CRH())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&u.ekj("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[u.qOj],ngContentSelectors:T8,decls:2,vars:0,template:function(t,i){1&t&&(u.F$t(I8),u.Hsn(0),u.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),M8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[En,En]}),n})(),k8=(()=>{class n{constructor(t,i){this.authService=t,this.dialog=i,this.status=!1}openSettingsDialog(){this.dialog.open(hI,{width:"450px"})}openMoreDialog(){this.dialog.open(_M,{width:"450px"})}signOut(){this.authService.signOut()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qR),u.Y36(Wg))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-dashboard"]],decls:21,vars:0,consts:[[1,"top-nav"],["routerLink","list"],["routerLinkActive","top-nav__active",1,"top-nav__item"],["routerLink","recipes"],["routerLink","drafts"],[1,"bottom-nav"],[1,"bottom-nav__btn",3,"click"]],template:function(t,i){1&t&&(u.TgZ(0,"mat-toolbar",0)(1,"a",1)(2,"div",2),u._uU(3,"List "),u.qZA()(),u.TgZ(4,"a",3)(5,"div",2),u._uU(6,"Recipes"),u.qZA()(),u.TgZ(7,"a",4)(8,"div",2),u._uU(9,"Drafts"),u.qZA()()(),u._UZ(10,"router-outlet"),u.TgZ(11,"nav",5)(12,"button",6),u.NdJ("click",function(){return i.openMoreDialog()}),u.TgZ(13,"mat-icon"),u._uU(14,"more_vert"),u.qZA()(),u.TgZ(15,"button",6),u.NdJ("click",function(){return i.openSettingsDialog()}),u.TgZ(16,"mat-icon"),u._uU(17,"settings"),u.qZA()(),u.TgZ(18,"button",6),u.NdJ("click",function(){return i.signOut()}),u.TgZ(19,"mat-icon"),u._uU(20,"exit_to_app"),u.qZA()()())},dependencies:[Yf,Wu,rE,Dh,x8],styles:['[_nghost-%COMP%]{position:relative;display:block;height:100%;max-height:100vh;overflow-y:scroll}.top-nav[_ngcontent-%COMP%]{display:flex;justify-content:space-around;background-color:#fff;font-weight:400}.top-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#313131}.top-nav__item[_ngcontent-%COMP%]{position:relative}.top-nav__active[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:-15px;left:50%;transform:translate(-50%);width:80px;height:6px;border-radius:15px;background-color:#673ab7}.bottom-nav[_ngcontent-%COMP%]{position:fixed;left:0;bottom:0;width:100%;display:flex;justify-content:space-around;align-items:center;height:5rem;background-color:#faf9fd;border-radius:25px 25px 0 0;box-shadow:0 0 2px #b7b7b7}.bottom-nav__btn[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#673ab7;transform:scale(1.3);cursor:pointer}']}),n})(),R8=(()=>{class n{constructor(t,i){this.db=t,this.frauth=i,this.useruid="",this.frauth.onAuthStateChanged(r=>{r&&(this.useruid=r.uid)})}getAllDrafts(){return this.db.list(`/users/${this.useruid}/drafts`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(aT),u.LFG(fd))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const EU=new u.OlP("CdkAccordion");let O8=0,P8=(()=>{class n{constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=Os.w0.EMPTY,this.closed=new u.vpe,this.opened=new u.vpe,this.destroyed=new u.vpe,this.expandedChange=new u.vpe,this.id="cdk-accordion-child-"+O8++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,l)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===l&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=ki(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=ki(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(EU,12),u.Y36(u.sBO),u.Y36(wM))},n.\u0275dir=u.lG2({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[u._Bn([{provide:EU,useValue:void 0}])]}),n})(),N8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const F8=["body"];function L8(n,e){}const V8=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],B8=["mat-expansion-panel-header","*","mat-action-row"];function U8(n,e){if(1&n&&u._UZ(0,"span",2),2&n){const t=u.oxw();u.Q6J("@indicatorRotate",t._getExpandedState())}}const H8=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],j8=["mat-panel-title","mat-panel-description","*"],CU=new u.OlP("MAT_ACCORDION"),DU="225ms cubic-bezier(0.4,0.0,0.2,1)",IU={indicatorRotate:Bl("indicatorRotate",[Ul("collapsed, void",Mr({transform:"rotate(0deg)"})),Ul("expanded",Mr({transform:"rotate(180deg)"})),Zo("expanded <=> collapsed, void => collapsed",Hs(DU))]),bodyExpansion:Bl("bodyExpansion",[Ul("collapsed, void",Mr({height:"0px",visibility:"hidden"})),Ul("expanded",Mr({height:"*",visibility:"visible"})),Zo("expanded <=> collapsed, void => collapsed",Hs(DU))])},TU=new u.OlP("MAT_EXPANSION_PANEL");let $8=(()=>{class n{constructor(t,i){this._template=t,this._expansionPanel=i}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc),u.Y36(TU,8))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),G8=0;const SU=new u.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let AU=(()=>{class n extends P8{constructor(t,i,r,s,l,h,p){super(t,i,r),this._viewContainerRef=s,this._animationMode=h,this._hideToggle=!1,this.afterExpand=new u.vpe,this.afterCollapse=new u.vpe,this._inputChanges=new kt.x,this._headerId="mat-expansion-panel-header-"+G8++,this._bodyAnimationDone=new kt.x,this.accordion=t,this._document=l,this._bodyAnimationDone.pipe(gp((y,E)=>y.fromState===E.fromState&&y.toState===E.toState)).subscribe(y=>{"void"!==y.fromState&&("expanded"===y.toState?this.afterExpand.emit():"collapsed"===y.toState&&this.afterCollapse.emit())}),p&&(this.hideToggle=p.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=ki(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Kr(null),kn(()=>this.expanded&&!this._portal),Zi(1)).subscribe(()=>{this._portal=new Np(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(CU,12),u.Y36(u.sBO),u.Y36(wM),u.Y36(u.s_b),u.Y36(se),u.Y36(u.QbO,8),u.Y36(SU,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(t,i,r){if(1&t&&u.Suo(r,$8,5),2&t){let s;u.iGM(s=u.CRH())&&(i._lazyContent=s.first)}},viewQuery:function(t,i){if(1&t&&u.Gf(F8,5),2&t){let r;u.iGM(r=u.CRH())&&(i._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,i){2&t&&u.ekj("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[u._Bn([{provide:CU,useValue:void 0},{provide:TU,useExisting:n}]),u.qOj,u.TTD],ngContentSelectors:B8,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,i){1&t&&(u.F$t(V8),u.Hsn(0),u.TgZ(1,"div",0,1),u.NdJ("@bodyExpansion.done",function(s){return i._bodyAnimationDone.next(s)}),u.TgZ(3,"div",2),u.Hsn(4,1),u.YNc(5,L8,0,0,"ng-template",3),u.qZA(),u.Hsn(6,2),u.qZA()),2&t&&(u.xp6(1),u.Q6J("@bodyExpansion",i._getExpandedState())("id",i.id),u.uIk("aria-labelledby",i._headerId),u.xp6(4),u.Q6J("cdkPortalOutlet",i._portal))},dependencies:[Fp],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[IU.bodyExpansion]},changeDetection:0}),n})();class z8{}const q8=hr(z8);let W8=(()=>{class n extends q8{constructor(t,i,r,s,l,h,p){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=h,this._parentChangeSubscription=Os.w0.EMPTY;const y=t.accordion?t.accordion._stateChanges.pipe(kn(E=>!(!E.hideToggle&&!E.togglePosition))):xi.E;this.tabIndex=parseInt(p||"")||0,this._parentChangeSubscription=(0,od.T)(t.opened,t.closed,y,t._inputChanges.pipe(kn(E=>!!(E.hideToggle||E.disabled||E.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(kn(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),l&&(this.expandedHeight=l.expandedHeight,this.collapsedHeight=l.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:mp(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(AU,1),u.Y36(u.SBq),u.Y36(jc),u.Y36(u.sBO),u.Y36(SU,8),u.Y36(u.QbO,8),u.$8M("tabindex"))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,i){1&t&&u.NdJ("click",function(){return i._toggle()})("keydown",function(s){return i._keydown(s)}),2&t&&(u.uIk("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),u.Udp("height",i._getHeaderHeight()),u.ekj("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[u.qOj],ngContentSelectors:j8,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,i){1&t&&(u.F$t(H8),u.TgZ(0,"span",0),u.Hsn(1),u.Hsn(2,1),u.Hsn(3,2),u.qZA(),u.YNc(4,U8,1,1,"span",1)),2&t&&(u.xp6(4),u.Q6J("ngIf",i._showToggle()))},dependencies:[Bn],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[IU.indicatorRotate]},changeDetection:0}),n})(),K8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),n})(),Z8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[us,En,N8,sd]}),n})();function Y8(n,e){if(1&n&&(u.O4$(),u._UZ(0,"circle",4)),2&n){const t=u.oxw(),i=u.MAs(1);u.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),u.uIk("r",t._getCircleRadius())}}function Q8(n,e){if(1&n&&(u.O4$(),u._UZ(0,"circle",4)),2&n){const t=u.oxw(),i=u.MAs(1);u.Udp("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),u.uIk("r",t._getCircleRadius())}}const J8=Qr(class{constructor(n){this._elementRef=n}},"primary"),e5=new u.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function t5(){return{diameter:100}}});class eu extends J8{constructor(e,t,i,r,s,l,h,p){super(e),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=Os.w0.EMPTY,this.mode="determinate";const y=eu._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),y.has(i.head)||y.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&h&&l&&p&&(this._resizeSubscription=h.change(150).subscribe(()=>{"indeterminate"===this.mode&&p.run(()=>l.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=ho(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=ho(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,ho(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=Hy(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){const t=50*(e.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,i=eu._diameters;let r=i.get(e);if(!r||!r.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),r||(r=new Set,i.set(e,r)),r.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}eu._diameters=new WeakMap,eu.\u0275fac=function(e){return new(e||eu)(u.Y36(u.SBq),u.Y36(Ji),u.Y36(se,8),u.Y36(u.QbO,8),u.Y36(e5),u.Y36(u.sBO),u.Y36(Vv),u.Y36(u.R0b))},eu.\u0275cmp=u.Xpm({type:eu,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(u.uIk("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),u.Udp("width",t.diameter,"px")("height",t.diameter,"px"),u.ekj("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[u.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(u.O4$(),u.TgZ(0,"svg",0,1),u.YNc(2,Y8,1,11,"circle",2),u.YNc(3,Q8,1,9,"circle",3),u.qZA()),2&e&&(u.Udp("width",t.diameter,"px")("height",t.diameter,"px"),u.Q6J("ngSwitch","indeterminate"===t.mode),u.uIk("viewBox",t._getViewBox()),u.xp6(2),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngSwitchCase",!1))},dependencies:[Ds,vr],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let r5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[En,us,En]}),n})();function s5(n,e){1&n&&u._UZ(0,"mat-spinner",2),2&n&&u.Q6J("diameter",50)}function o5(n,e){if(1&n&&(u.TgZ(0,"li",12),u._uU(1),u.qZA()),2&n){const t=u.oxw().$implicit,i=u.oxw().$implicit;u.xp6(1),u.hij(" ",i[t]," ")}}function a5(n,e){if(1&n&&(u.ynx(0),u.YNc(1,o5,2,1,"li",11),u.BQk()),2&n){const t=e.$implicit;u.xp6(1),u.Q6J("ngIf","key"!=t)}}function l5(n,e){if(1&n&&(u.TgZ(0,"mat-expansion-panel",3)(1,"mat-expansion-panel-header",4),u._uU(2),u.qZA(),u.TgZ(3,"mat-panel-description")(4,"div",5)(5,"ul",6),u.YNc(6,a5,2,1,"ng-container",7),u.qZA()(),u.TgZ(7,"div",8)(8,"button",9),u._uU(9,"Load draft"),u.qZA(),u.TgZ(10,"button",10),u._uU(11,"Add to current list"),u.qZA()()()()),2&n){const t=e.$implicit,i=u.oxw();u.xp6(2),u.hij(" ",t.key," "),u.xp6(4),u.Q6J("ngForOf",i.objectKeys(t))}}let c5=(()=>{class n{constructor(t,i){this.frauth=t,this.draftsService=i,this.Object=Object,this.item={}}ngOnInit(){this.frauth.onAuthStateChanged(t=>{t&&this.retrieveDrafts()})}objectKeys(t){return Object.keys(t)}retrieveDrafts(){this.subscription=this.draftsService.getAllDrafts().snapshotChanges().pipe((0,ot.U)(t=>t.map(i=>({key:i.payload.key,...i.payload.val()})))).subscribe(t=>{this.drafts=t})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(fd),u.Y36(R8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-drafts"]],decls:2,vars:2,consts:[[3,"diameter",4,"ngIf"],["class","card-list",4,"ngFor","ngForOf"],[3,"diameter"],[1,"card-list"],[1,"card-list__title"],[1,"card-list-wrap"],[1,"list"],[4,"ngFor","ngForOf"],[1,"draft-actions"],[1,"draft-actions__load"],[1,"draft-actions__add"],["class","list__item",4,"ngIf"],[1,"list__item"]],template:function(t,i){1&t&&(u.YNc(0,s5,1,1,"mat-spinner",0),u.YNc(1,l5,12,2,"mat-expansion-panel",1)),2&t&&(u.Q6J("ngIf",!i.drafts),u.xp6(1),u.Q6J("ngForOf",i.drafts))},dependencies:[yr,Bn,AU,W8,K8,eu],styles:['[_nghost-%COMP%]{display:block;margin-bottom:100px}mat-spinner[_ngcontent-%COMP%]{font-size:1rem;margin:2rem}mat-panel-description[_ngcontent-%COMP%]{align-items:flex-start}.card-list[_ngcontent-%COMP%]{margin:1rem 1.5rem 0;border:none;border-radius:10px;box-shadow:0 0 2px #b7b7b7!important;color:#313131}.card-list__title[_ngcontent-%COMP%]{position:relative;font-size:1.1rem;margin-left:15px}.card-list__title[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;transform:translateY(-50%);width:7px;height:7px;border-radius:50%;background-color:#673ab7}.card-list[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{padding:0;margin:0}.card-list[_ngcontent-%COMP%]   .list__item[_ngcontent-%COMP%]{font-size:1rem;color:#313131;padding:5px;margin-left:15px}.card-list[_ngcontent-%COMP%]   .list__item[_ngcontent-%COMP%]::marker{color:#673ab7}mat-panel-description[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0}.draft-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:2rem;width:100%}.draft-actions__add[_ngcontent-%COMP%], .draft-actions__load[_ngcontent-%COMP%]{border:none;border-radius:5px;padding:5px 10px;font-weight:600;color:#673ab7;background-color:#faf9fd;letter-spacing:1px;font-size:.8rem;box-shadow:0 0 2px #b7b7b7;font-family:Roboto}']}),n})(),u5=(()=>{class n{constructor(t,i){this.db=t,this.frauth=i,this.frauth.onAuthStateChanged(r=>{r&&(this.useruid=r.uid)})}getAllItems(){return this.db.list(`/users/${this.useruid}/items`)}getItem(t){return this.db.list(`/users/${this.useruid}/items${t}`)}addItem(t){return this.db.list(`/users/${this.useruid}/items`).push(t)}updateItem(t){return this.db.list(`/users/${this.useruid}/items`)}deleteItem(t){return this.db.list(`/users/${this.useruid}/items/${t}`).remove()}saveDraft(t,i){return this.db.object(`/users/${this.useruid}/drafts/${t}`).update(i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(aT),u.LFG(fd))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function d5(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",2)(1,"button",3),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.action())}),u._uU(2),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(2),u.Oqu(t.data.action)}}function h5(n,e){}const xU=new u.OlP("MatSnackBarData");class lT{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const f5=Math.pow(2,31)-1;class KR{constructor(e,t){this._overlayRef=t,this._afterDismissed=new kt.x,this._afterOpened=new kt.x,this._onAction=new kt.x,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,f5))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let p5=(()=>{class n{constructor(t,i){this.snackBarRef=t,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(KR),u.Y36(xU))},n.\u0275cmp=u.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,i){1&t&&(u.TgZ(0,"span",0),u._uU(1),u.qZA(),u.YNc(2,d5,3,1,"div",1)),2&t&&(u.xp6(1),u.Oqu(i.data.message),u.xp6(1),u.Q6J("ngIf",i.hasAction))},dependencies:[Bn,Eh],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),n})();const m5={snackBarState:Bl("state",[Ul("void, hidden",Mr({transform:"scale(0.8)",opacity:0})),Ul("visible",Mr({transform:"scale(1)",opacity:1})),Zo("* => visible",Hs("150ms cubic-bezier(0, 0, 0.2, 1)")),Zo("* => void, * => hidden",Hs("75ms cubic-bezier(0.4, 0.0, 1, 1)",Mr({opacity:0})))])};let g5=(()=>{class n extends Bg{constructor(t,i,r,s,l){super(),this._ngZone=t,this._elementRef=i,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=l,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new kt.x,this._onExit=new kt.x,this._onEnter=new kt.x,this._animationState="void",this.attachDomPortal=h=>{this._assertNotAttached();const p=this._portalOutlet.attachDomPortal(h);return this._afterPortalAttached(),p},this._live="assertive"!==l.politeness||l.announcementMessage?"off"===l.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),i}attachTemplatePortal(t){this._assertNotAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),i}onAnimationEnd(t){const{fromState:i,toState:r}=t;if(("void"===r&&"void"!==i||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Zi(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(r=>t.classList.add(r)):t.classList.add(i))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),i.appendChild(t),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.R0b),u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(Ji),u.Y36(lT))},n.\u0275dir=u.lG2({type:n,viewQuery:function(t,i){if(1&t&&u.Gf(Fp,7),2&t){let r;u.iGM(r=u.CRH())&&(i._portalOutlet=r.first)}},features:[u.qOj]}),n})(),_5=(()=>{class n extends g5{_afterPortalAttached(){super._afterPortalAttached(),"center"===this.snackBarConfig.horizontalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-top")}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["snack-bar-container"]],hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,i){1&t&&u.WFA("@state.done",function(s){return i.onAnimationEnd(s)}),2&t&&u.d8E("@state",i._animationState)},features:[u.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,i){1&t&&(u.TgZ(0,"div",0),u.YNc(1,h5,0,0,"ng-template",1),u.qZA(),u._UZ(2,"div")),2&t&&(u.xp6(2),u.uIk("aria-live",i._live)("role",i._role))},dependencies:[Fp],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[m5.snackBarState]}}),n})(),MU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Kv,sd,us,wv,En,En]}),n})();const kU=new u.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function y5(){return new lT}});let v5=(()=>{class n{constructor(t,i,r,s,l,h){this._overlay=t,this._live=i,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=l,this._defaultConfig=h,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,i){return this._attach(t,i)}openFromTemplate(t,i){return this._attach(t,i)}open(t,i="",r){const s={...this._defaultConfig,...r};return s.data={message:t,action:i},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,i){const s=u.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:lT,useValue:i}]}),l=new Ah(this.snackBarContainerComponent,i.viewContainerRef,s),h=t.attach(l);return h.instance.snackBarConfig=i,h.instance}_attach(t,i){const r={...new lT,...this._defaultConfig,...i},s=this._createOverlay(r),l=this._attachSnackBarContainer(s,r),h=new KR(l,s);if(t instanceof u.Rgc){const p=new Np(t,null,{$implicit:r.data,snackBarRef:h});h.instance=l.attachTemplatePortal(p)}else{const p=this._createInjector(r,h),y=new Ah(t,void 0,p),E=l.attachComponentPortal(y);h.instance=E.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Rl(s.detachments())).subscribe(p=>{s.overlayElement.classList.toggle(this.handsetCssClass,p.matches)}),r.announcementMessage&&l._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(h,r),this._openedSnackBarRef=h,this._openedSnackBarRef}_animateSnackBar(t,i){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),i.duration&&i.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(i.duration))}_createOverlay(t){const i=new zv;i.direction=t.direction;let r=this._overlay.position().global();const s="rtl"===t.direction,l="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,h=!l&&"center"!==t.horizontalPosition;return l?r.left("0"):h?r.right("0"):r.centerHorizontally(),"top"===t.verticalPosition?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(t,i){return u.zs3.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:KR,useValue:i},{provide:xU,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(zc),u.LFG(Tg),u.LFG(u.zs3),u.LFG(vp),u.LFG(n,12),u.LFG(kU))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),b5=(()=>{class n extends v5{constructor(t,i,r,s,l,h){super(t,i,r,s,l,h),this.simpleSnackBarComponent=p5,this.snackBarContainerComponent=_5,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(zc),u.LFG(Tg),u.LFG(u.zs3),u.LFG(vp),u.LFG(n,12),u.LFG(kU))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:MU}),n})();const w5=["*",[["mat-card-footer"]]],E5=["*","mat-card-footer"];let RU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),C5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),ZR=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.QbO,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:E5,decls:2,vars:0,template:function(t,i){1&t&&(u.F$t(w5),u.Hsn(0),u.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),n})(),D5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[En,En]}),n})();const I5=["input"],T5=function(n){return{enterDuration:n}},S5=["*"],A5=new u.OlP("mat-checkbox-default-options",{providedIn:"root",factory:OU});function OU(){return{color:"accent",clickAction:"check-indeterminate"}}let x5=0;const PU=OU(),M5={provide:po,useExisting:(0,u.Gpc)(()=>NU),multi:!0};class k5{}const R5=hr(Qr(td(oC(class{constructor(n){this._elementRef=n}}))));let O5=(()=>{class n extends R5{constructor(t,i,r,s,l,h,p){super(i),this._changeDetectorRef=r,this._ngZone=s,this._animationMode=h,this._options=p,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new u.vpe,this.indeterminateChange=new u.vpe,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||PU,this.color=this.defaultColor=this._options.color||PU.color,this.tabIndex=parseInt(l)||0,this.id=this._uniqueId=`${t}${++x5}`}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=ki(t)}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(t){const i=ki(t);i!=this.checked&&(this._checked=i,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const i=ki(t);i!==this.disabled&&(this._disabled=i,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const i=t!=this._indeterminate;this._indeterminate=ki(t),i&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(t){let i=this._currentCheckState,r=this._getAnimationTargetElement();if(i!==t&&r&&(this._currentAnimationClass.length>0&&r.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(i,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){r.classList.add(this._currentAnimationClass);const s=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{r.classList.remove(s)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const t=this._options?.clickAction;this.disabled||"noop"===t?!this.disabled&&"noop"===t&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==t&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(t){t.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(t,i){if("NoopAnimations"===this._animationMode)return"";switch(t){case 0:if(1===i)return this._animationClasses.uncheckedToChecked;if(3==i)return this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===i?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===i?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===i?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(t){const i=this._inputElement;i&&(i.nativeElement.indeterminate=t)}}return n.\u0275fac=function(t){u.$Z()},n.\u0275dir=u.lG2({type:n,viewQuery:function(t,i){if(1&t&&(u.Gf(I5,5),u.Gf(wh,5)),2&t){let r;u.iGM(r=u.CRH())&&(i._inputElement=r.first),u.iGM(r=u.CRH())&&(i.ripple=r.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[u.qOj]}),n})(),NU=(()=>{class n extends O5{constructor(t,i,r,s,l,h,p){super("mat-checkbox-",t,i,s,l,h,p),this._focusMonitor=r,this._animationClasses={uncheckedToChecked:"mat-checkbox-anim-unchecked-checked",uncheckedToIndeterminate:"mat-checkbox-anim-unchecked-indeterminate",checkedToUnchecked:"mat-checkbox-anim-checked-unchecked",checkedToIndeterminate:"mat-checkbox-anim-checked-indeterminate",indeterminateToChecked:"mat-checkbox-anim-indeterminate-checked",indeterminateToUnchecked:"mat-checkbox-anim-indeterminate-unchecked"}}_createChangeEvent(t){const i=new k5;return i.source=this,i.checked=t,i}_getAnimationTargetElement(){return this._elementRef.nativeElement}ngAfterViewInit(){super.ngAfterViewInit(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||this._onBlur()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onInputClick(t){t.stopPropagation(),super._handleInputClick()}focus(t,i){t?this._focusMonitor.focusVia(this._inputElement,t,i):this._inputElement.nativeElement.focus(i)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(jc),u.Y36(u.R0b),u.$8M("tabindex"),u.Y36(u.QbO,8),u.Y36(A5,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-checkbox"],hostVars:14,hostBindings:function(t,i){2&t&&(u.Ikx("id",i.id),u.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null),u.ekj("mat-checkbox-indeterminate",i.indeterminate)("mat-checkbox-checked",i.checked)("mat-checkbox-disabled",i.disabled)("mat-checkbox-label-before","before"==i.labelPosition)("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[u._Bn([M5]),u.qOj],ngContentSelectors:S5,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(t,i){if(1&t&&(u.F$t(),u.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),u.NdJ("change",function(s){return i._onInteractionEvent(s)})("click",function(s){return i._onInputClick(s)}),u.qZA(),u.TgZ(5,"span",5),u._UZ(6,"span",6),u.qZA(),u._UZ(7,"span",7),u.TgZ(8,"span",8),u.O4$(),u.TgZ(9,"svg",9),u._UZ(10,"path",10),u.qZA(),u.kcU(),u._UZ(11,"span",11),u.qZA()(),u.TgZ(12,"span",12,13),u.NdJ("cdkObserveContent",function(){return i._onLabelTextChange()}),u.TgZ(14,"span",14),u._uU(15,"\xa0"),u.qZA(),u.Hsn(16),u.qZA()()),2&t){const r=u.MAs(1),s=u.MAs(13);u.uIk("for",i.inputId),u.xp6(2),u.ekj("mat-checkbox-inner-container-no-side-margin",!s.textContent||!s.textContent.trim()),u.xp6(1),u.Q6J("id",i.inputId)("required",i.required)("checked",i.checked)("disabled",i.disabled)("tabIndex",i.tabIndex),u.uIk("value",i.value)("name",i.name)("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby)("aria-checked",i._getAriaChecked())("aria-describedby",i.ariaDescribedby),u.xp6(2),u.Q6J("matRippleTrigger",r)("matRippleDisabled",i._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",u.VKq(19,T5,"NoopAnimations"===i._animationMode?0:150))}},dependencies:[wh,Cg],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative}.mat-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:rgba(0,0,0,0);transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:rgba(0,0,0,0)}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}"],encapsulation:2,changeDetection:0}),n})(),FU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),F5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[kp,En,Hc,FU,En,FU]}),n})();const L5=["taskinput"];function V5(n,e){1&n&&u._UZ(0,"mat-spinner",19),2&n&&u.Q6J("diameter",50)}function B5(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"mat-icon",23),u.NdJ("click",function(){u.CHM(t);const r=u.oxw().$implicit,s=u.oxw();return u.KtG(s.deleteItem(r.key))}),u._uU(1,"close"),u.qZA()}}function U5(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",20)(1,"mat-checkbox",21),u.NdJ("click",function(){const r=u.CHM(t),s=r.$implicit,l=r.index,h=u.oxw();return h.tickItem(s.key),u.KtG(h.clickedIndex=l)}),u._uU(2),u.qZA(),u.YNc(3,B5,2,0,"mat-icon",22),u.qZA()}if(2&n){const t=e.$implicit,i=e.index,r=u.oxw();u.xp6(1),u.Q6J("checked",t.done),u.xp6(1),u.hij(" ",t.name," "),u.xp6(1),u.Q6J("ngIf",r.clickedIndex===i)}}let H5=(()=>{class n{constructor(t,i,r){this.dataService=t,this.frauth=i,this._snackBar=r,this.draftItems=[],this.item={},this.listtitle="shopping list name",this.itemscount=0,this.itemsticked=0,this.progresswidth=0,this.showclose=!1,this.clickedIndex=0}ngOnInit(){this.frauth.onAuthStateChanged(t=>{t&&this.retrieveItems()})}retrieveItems(){this.subscription=this.dataService.getAllItems().snapshotChanges().pipe((0,ot.U)(t=>t.map(i=>({key:i.payload.key,...i.payload.val()})))).subscribe(t=>{this.items=t,this.itemscount=this.items.length,this.checkHowManyItemsTicked(this.items)})}addItem(t){this.dataService.addItem({name:t,done:!1}),this.input.nativeElement.value=""}deleteItem(t){this.dataService.deleteItem(t),this._snackBar.open("Item removed","",{duration:1e3})}tickItem(t){this.showclose=!0;let i=!1;for(let r of this.items)r.key==t&&(i=r.done);this.dataService.updateItem(t).update(t,{done:!i})}checkHowManyItemsTicked(t){this.itemsticked=0;for(let i of t)1==i.done&&this.itemsticked++;this.progresswidth=Math.round(this.itemsticked/this.itemscount*100)}saveDraft(){this.items.map(t=>{this.draftItems.push(t.name)}),this.dataService.saveDraft(this.listtitle,this.draftItems),this._snackBar.open("Draft saved","",{duration:1e3}),this.draftItems=[]}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u5),u.Y36(fd),u.Y36(b5))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-list"]],viewQuery:function(t,i){if(1&t&&u.Gf(L5,5),2&t){let r;u.iGM(r=u.CRH())&&(i.input=r.first)}},decls:24,vars:7,consts:[[1,"input-wrap"],[1,"input-helper"],["type","text","name","taskinput","id","taskinput","placeholder","add new item...","required","",1,"task-input"],["taskinput",""],[1,"task-input__icon",3,"click"],[1,"list-actions"],[1,"list-actions__save",3,"click"],["routerLink","../drafts",1,"list-actions__load"],[1,"card-list"],["contenteditable","true",1,"card-list__title",3,"input"],["x",""],[1,"card-list__progress-text"],[1,"progress"],[1,"progress__back"],[1,"progress__front"],[1,"card-list-wrap"],[3,"diameter",4,"ngIf"],[1,"list"],["class","list__item",4,"ngFor","ngForOf"],[3,"diameter"],[1,"list__item"],["color","primary",3,"checked","click"],["class","close-icon",3,"click",4,"ngIf"],[1,"close-icon",3,"click"]],template:function(t,i){if(1&t){const r=u.EpF();u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"input",2,3),u.qZA(),u.TgZ(4,"mat-icon",4),u.NdJ("click",function(){u.CHM(r);const l=u.MAs(3);return u.KtG(i.addItem(l.value))}),u._uU(5,"add"),u.qZA()(),u.TgZ(6,"div",5)(7,"button",6),u.NdJ("click",function(){return i.saveDraft()}),u._uU(8,"Save as draft"),u.qZA(),u.TgZ(9,"button",7),u._uU(10,"Load draft"),u.qZA()(),u.TgZ(11,"mat-card",8)(12,"div",9,10),u.NdJ("input",function(){u.CHM(r);const l=u.MAs(13);return u.KtG(i.listtitle=l.innerText)}),u._uU(14),u.qZA(),u.TgZ(15,"div",11),u._uU(16),u.qZA(),u.TgZ(17,"div",12),u._UZ(18,"div",13)(19,"div",14),u.qZA(),u.TgZ(20,"div",15),u.YNc(21,V5,1,1,"mat-spinner",16),u.TgZ(22,"ul",17),u.YNc(23,U5,4,3,"li",18),u.qZA()()()}2&t&&(u.xp6(14),u.Oqu(i.listtitle),u.xp6(2),u.AsE("cart ",i.itemsticked,"/",i.itemscount,""),u.xp6(3),u.Udp("width",i.progresswidth,"%"),u.xp6(2),u.Q6J("ngIf",!i.items),u.xp6(2),u.Q6J("ngForOf",i.items))},dependencies:[yr,Bn,lp,ZR,Dh,NU,eu],styles:['[_nghost-%COMP%]{display:block;margin-bottom:100px}mat-spinner[_ngcontent-%COMP%]{margin-top:20px}.input-wrap[_ngcontent-%COMP%]{position:relative}.input-helper[_ngcontent-%COMP%]{margin:2.5rem 1.5rem}.task-input[_ngcontent-%COMP%]{width:calc(100% - 1.5rem - 20px);padding:15px 20px;border:none;border-radius:10px;box-shadow:0 0 2px #b7b7b7;background-color:#faf9fd;font-size:1.1rem;font-weight:400}.task-input__icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:2.5rem;transform:translateY(-50%)}.task-input[_ngcontent-%COMP%]::placeholder{font-size:1.1rem;font-weight:400}.task-input[_ngcontent-%COMP%]:focus, .task-input[_ngcontent-%COMP%]:active{outline:none}.list-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:.8rem 1.5rem}.list-actions__save[_ngcontent-%COMP%], .list-actions__load[_ngcontent-%COMP%]{position:relative;border:none;border-radius:5px;padding:5px 20px;font-weight:600;color:#673ab7;background-color:#faf9fd;letter-spacing:1px;box-shadow:0 0 2px #b7b7b7;font-family:Roboto;transition-duration:.4s;overflow:hidden}.list-actions__save[_ngcontent-%COMP%]:after, .list-actions__load[_ngcontent-%COMP%]:after{content:"";border-radius:5px;background:#673ab7;display:block;position:absolute;padding-top:300%;padding-left:350%;margin-left:-20px!important;margin-top:-120%;opacity:0;transition:all .8s}.list-actions__save[_ngcontent-%COMP%]:active:after, .list-actions__load[_ngcontent-%COMP%]:active:after{padding:0;margin:0;opacity:1;transition:0s}[contenteditable][_ngcontent-%COMP%]{outline:0px solid transparent}.card-list[_ngcontent-%COMP%]{margin:0 1.5rem 2.5rem;border:none;border-radius:10px;box-shadow:0 0 2px #b7b7b7!important;color:#313131}.card-list__title[_ngcontent-%COMP%]{position:relative;font-size:1.1rem;margin-left:15px}.card-list__title[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:-15px;transform:translateY(-50%);width:7px;height:7px;border-radius:50%;background-color:#673ab7}.card-list__progress-text[_ngcontent-%COMP%]{font-size:.7rem;color:#673ab7}.card-list[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{position:relative;height:10px;width:90%}.card-list[_ngcontent-%COMP%]   .progress__back[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:3px;width:100%;background-color:#673ab74d}.card-list[_ngcontent-%COMP%]   .progress__front[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:3px;width:10%;background-color:#673ab7}.card-list[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{list-style:none;padding:0}.card-list[_ngcontent-%COMP%]   .list__item[_ngcontent-%COMP%]{position:relative;font-size:1rem;margin:5px 0}.card-list[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:0;transform:translateY(-50%)}']}),n})(),j5=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-recipes"]],decls:2,vars:0,template:function(t,i){1&t&&(u.TgZ(0,"p"),u._uU(1,"Feature coming soon!"),u.qZA())},styles:["p[_ngcontent-%COMP%]{padding:15px 20px}"]}),n})();const $5=["connectionContainer"],G5=["inputContainer"],z5=["label"];function q5(n,e){1&n&&(u.ynx(0),u.TgZ(1,"div",14),u._UZ(2,"div",15)(3,"div",16)(4,"div",17),u.qZA(),u.TgZ(5,"div",18),u._UZ(6,"div",15)(7,"div",16)(8,"div",17),u.qZA(),u.BQk())}function W5(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",19),u.NdJ("cdkObserveContent",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.updateOutlineGap())}),u.Hsn(1,1),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function K5(n,e){if(1&n&&(u.ynx(0),u.Hsn(1,2),u.TgZ(2,"span"),u._uU(3),u.qZA(),u.BQk()),2&n){const t=u.oxw(2);u.xp6(3),u.Oqu(t._control.placeholder)}}function Z5(n,e){1&n&&u.Hsn(0,3,["*ngSwitchCase","true"])}function Y5(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," *"),u.qZA())}function Q5(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"label",20,21),u.NdJ("cdkObserveContent",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.updateOutlineGap())}),u.YNc(2,K5,4,1,"ng-container",12),u.YNc(3,Z5,1,0,"ng-content",12),u.YNc(4,Y5,2,0,"span",22),u.qZA()}if(2&n){const t=u.oxw();u.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),u.uIk("for",t._control.id)("aria-owns",t._control.id),u.xp6(2),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function X5(n,e){1&n&&(u.TgZ(0,"div",24),u.Hsn(1,4),u.qZA())}function J5(n,e){if(1&n&&(u.TgZ(0,"div",25),u._UZ(1,"span",26),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function eK(n,e){if(1&n&&(u.TgZ(0,"div"),u.Hsn(1,5),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState)}}function tK(n,e){if(1&n&&(u.TgZ(0,"div",30),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("id",t._hintLabelId),u.xp6(1),u.Oqu(t.hintLabel)}}function nK(n,e){if(1&n&&(u.TgZ(0,"div",27),u.YNc(1,tK,2,2,"div",28),u.Hsn(2,6),u._UZ(3,"div",29),u.Hsn(4,7),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",t.hintLabel)}}const iK=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],rK=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],sK=new u.OlP("MatError"),oK={transitionMessages:Bl("transitionMessages",[Ul("enter",Mr({opacity:1,transform:"translateY(0%)"})),Zo("void => enter",[Mr({opacity:0,transform:"translateY(-5px)"}),Hs("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let YR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n}),n})();const aK=new u.OlP("MatHint");let cT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-label"]]}),n})(),lK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const cK=new u.OlP("MatPrefix"),uK=new u.OlP("MatSuffix");let LU=0;const hK=Qr(class{constructor(n){this._elementRef=n}},"primary"),fK=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),BU=new u.OlP("MatFormField");let UU=(()=>{class n extends hK{constructor(t,i,r,s,l,h,p){super(t),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=l,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new kt.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+LU++,this._labelId="mat-form-field-label-"+LU++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=ki(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Kr(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Rl(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Rl(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,od.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Kr(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Kr(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Rl(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Pp(this._label.nativeElement,"transitionend").pipe(Zi(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const E=i.querySelectorAll(`${r}, ${s}`);for(let I=0;I<E.length;I++)E[I].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let l=0,h=0;const p=i.querySelectorAll(r),y=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const E=i.getBoundingClientRect();if(0===E.width&&0===E.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const I=this._getStartEnd(E),k=t.children,N=this._getStartEnd(k[0].getBoundingClientRect());let U=0;for(let J=0;J<k.length;J++)U+=k[J].offsetWidth;l=Math.abs(N-I)-5,h=U>0?.75*U+10:0}for(let E=0;E<p.length;E++)p[E].style.width=`${l}px`;for(let E=0;E<y.length;E++)y[E].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(dv,8),u.Y36(fK,8),u.Y36(Ji),u.Y36(u.R0b),u.Y36(u.QbO,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,YR,5),u.Suo(r,YR,7),u.Suo(r,cT,5),u.Suo(r,cT,7),u.Suo(r,lK,5),u.Suo(r,sK,5),u.Suo(r,aK,5),u.Suo(r,cK,5),u.Suo(r,uK,5)),2&t){let s;u.iGM(s=u.CRH())&&(i._controlNonStatic=s.first),u.iGM(s=u.CRH())&&(i._controlStatic=s.first),u.iGM(s=u.CRH())&&(i._labelChildNonStatic=s.first),u.iGM(s=u.CRH())&&(i._labelChildStatic=s.first),u.iGM(s=u.CRH())&&(i._placeholderChild=s.first),u.iGM(s=u.CRH())&&(i._errorChildren=s),u.iGM(s=u.CRH())&&(i._hintChildren=s),u.iGM(s=u.CRH())&&(i._prefixChildren=s),u.iGM(s=u.CRH())&&(i._suffixChildren=s)}},viewQuery:function(t,i){if(1&t&&(u.Gf($5,7),u.Gf(G5,5),u.Gf(z5,5)),2&t){let r;u.iGM(r=u.CRH())&&(i._connectionContainerRef=r.first),u.iGM(r=u.CRH())&&(i._inputContainerRef=r.first),u.iGM(r=u.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&u.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:BU,useExisting:n}]),u.qOj],ngContentSelectors:rK,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(u.F$t(iK),u.TgZ(0,"div",0)(1,"div",1,2),u.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),u.YNc(3,q5,9,0,"ng-container",3),u.YNc(4,W5,2,1,"div",4),u.TgZ(5,"div",5,6),u.Hsn(7),u.TgZ(8,"span",7),u.YNc(9,Q5,5,16,"label",8),u.qZA()(),u.YNc(10,X5,2,0,"div",9),u.qZA(),u.YNc(11,J5,2,4,"div",10),u.TgZ(12,"div",11),u.YNc(13,eK,2,1,"div",12),u.YNc(14,nK,5,2,"div",13),u.qZA()()),2&t&&(u.xp6(3),u.Q6J("ngIf","outline"==i.appearance),u.xp6(1),u.Q6J("ngIf",i._prefixChildren.length),u.xp6(5),u.Q6J("ngIf",i._hasFloatingLabel()),u.xp6(1),u.Q6J("ngIf",i._suffixChildren.length),u.xp6(1),u.Q6J("ngIf","outline"!=i.appearance),u.xp6(1),u.Q6J("ngSwitch",i._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},dependencies:[Bn,Ds,vr,Cg],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[oK.transitionMessages]},changeDetection:0}),n})(),HU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[us,En,Hc,En]}),n})();const jU=up({passive:!0});let pK=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return xi.E;const i=Ol(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new kt.x,l="cdk-text-field-autofilled",h=p=>{"cdk-text-field-autofill-start"!==p.animationName||i.classList.contains(l)?"cdk-text-field-autofill-end"===p.animationName&&i.classList.contains(l)&&(i.classList.remove(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(i.classList.add(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",h,jU),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",h,jU)}}),s}stopMonitoring(t){const i=Ol(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ji),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const mK=new u.OlP("MAT_INPUT_VALUE_ACCESSOR"),gK=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let _K=0;const yK=nd(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new kt.x}});let GU=(()=>{class n extends yK{constructor(t,i,r,s,l,h,p,y,E,I){super(h,s,l,r),this._elementRef=t,this._platform=i,this._autofillMonitor=y,this._formField=I,this._uid="mat-input-"+_K++,this.focused=!1,this.stateChanges=new kt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(U=>yE().has(U)),this._iOSKeyupListener=U=>{const J=U.target;!J.value&&0===J.selectionStart&&0===J.selectionEnd&&(J.setSelectionRange(1,1),J.setSelectionRange(0,0))};const k=this._elementRef.nativeElement,N=k.nodeName.toLowerCase();this._inputValueAccessor=p||k,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&E.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===N,this._isTextarea="textarea"===N,this._isInFormField=!!I,this._isNativeSelect&&(this.controlType=k.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=ki(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(ED.required)??!1}set required(t){this._required=ki(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&yE().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=ki(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,i=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(i!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=i,i?r.setAttribute("placeholder",i):r.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){gK.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(Ji),u.Y36(jl,10),u.Y36(r_,8),u.Y36(Tb,8),u.Y36(mv),u.Y36(mK,10),u.Y36(pK),u.Y36(u.R0b),u.Y36(BU,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,i){1&t&&u.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(u.Ikx("disabled",i.disabled)("required",i.required),u.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),u.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[u._Bn([{provide:YR,useExisting:n}]),u.qOj,u.TTD]}),n})(),vK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[mv],imports:[$U,HU,En,$U,HU]}),n})();const bK=[{path:"sign-in",component:(()=>{class n{constructor(t){this.authService=t}signIn(t,i){this.authService.signIn(t,i)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qR))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-in"]],decls:24,vars:0,consts:[[1,"container"],["color","primary",1,"card-icon"],[1,"login-subtitle"],[1,"signin-form"],["appearance","fill",1,"signin-form__full-width"],["type","email","matInput","","placeholder","Ex. user@gmail.com","formControlName","email"],["email",""],["type","password","matInput","","formControlName","password"],["password",""],[1,"signin-form__btns"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","routerLink","/register-user"]],template:function(t,i){if(1&t){const r=u.EpF();u.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-title")(3,"mat-icon",1),u._uU(4,"shopping_basket"),u.qZA(),u._uU(5," A-groceries "),u.qZA(),u.TgZ(6,"mat-card-subtitle",2),u._uU(7," Log in "),u.qZA(),u.TgZ(8,"form",3)(9,"mat-form-field",4)(10,"mat-label"),u._uU(11,"Email"),u.qZA(),u._UZ(12,"input",5,6),u.qZA(),u.TgZ(14,"mat-form-field",4)(15,"mat-label"),u._uU(16,"Password"),u.qZA(),u._UZ(17,"input",7,8),u.qZA()(),u.TgZ(19,"div",9)(20,"button",10),u.NdJ("click",function(){u.CHM(r);const l=u.MAs(13),h=u.MAs(18);return u.KtG(i.signIn(l.value,h.value))}),u._uU(21,"Log in"),u.qZA(),u.TgZ(22,"button",11),u._uU(23,"Create account"),u.qZA()()()()}},dependencies:[lp,ZR,RU,C5,Eh,Dh,UU,cT,GU],styles:[".container[_ngcontent-%COMP%]{position:relative;height:100vh}mat-card[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:50px}@media only screen and (max-width: 585px){mat-card[_ngcontent-%COMP%]{padding:30px}}.login-subtitle[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.card-icon[_ngcontent-%COMP%]{transform:scale(1.5);margin-right:1.2rem}.input-icon[_ngcontent-%COMP%]{float:right;transform:scale(1.2);padding:2px}mat-card-title[_ngcontent-%COMP%]{margin-bottom:20px;font-weight:900}.signin-form[_ngcontent-%COMP%]{min-width:250px;max-width:500px;width:100%;margin-top:1rem}.signin-form__full-width[_ngcontent-%COMP%]{width:100%}.signin-form__btns[_ngcontent-%COMP%]{margin-top:1rem}button[_ngcontent-%COMP%]{margin-right:1rem}"]}),n})()},{path:"register-user",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}signUp(t,i){this.authService.signUp(t,i)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qR))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-up"]],decls:22,vars:0,consts:[[1,"container"],["color","primary"],[1,"signin-form"],["appearance","fill",1,"signin-form__full-width"],["type","email","matInput","","placeholder","Ex. user@gmail.com","formControlName","email"],["email",""],["type","password","matInput","","formControlName","password"],["password",""],[1,"signin-form__btns"],["mat-raised-button","",3,"click"],["mat-raised-button","","routerLink","sign-in"]],template:function(t,i){if(1&t){const r=u.EpF();u.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-title")(3,"mat-icon",1),u._uU(4,"bookmark"),u.qZA(),u._uU(5," Register new account "),u.qZA(),u.TgZ(6,"form",2)(7,"mat-form-field",3)(8,"mat-label"),u._uU(9,"Email"),u.qZA(),u._UZ(10,"input",4,5),u.qZA(),u.TgZ(12,"mat-form-field",3)(13,"mat-label"),u._uU(14,"Password"),u.qZA(),u._UZ(15,"input",6,7),u.qZA()(),u.TgZ(17,"div",8)(18,"button",9),u.NdJ("click",function(){u.CHM(r);const l=u.MAs(11),h=u.MAs(16);return u.KtG(i.signUp(l.value,h.value))}),u._uU(19,"Make new account"),u.qZA(),u.TgZ(20,"button",10),u._uU(21,"Back"),u.qZA()()()()}},dependencies:[lp,ZR,RU,Eh,Dh,UU,cT,GU],styles:[".container[_ngcontent-%COMP%]{position:relative;height:100vh}mat-card[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:50px}@media only screen and (max-width: 585px){mat-card[_ngcontent-%COMP%]{padding:30px}}mat-icon[_ngcontent-%COMP%]{transform:scale(1.5);margin-right:1rem;margin-top:8px}mat-card-title[_ngcontent-%COMP%]{display:flex;margin-bottom:20px;font-weight:900;line-height:2rem}.signin-form[_ngcontent-%COMP%]{min-width:250px;max-width:500px;width:100%;margin-top:1rem}.signin-form__full-width[_ngcontent-%COMP%]{width:100%}.signin-form__btns[_ngcontent-%COMP%]{margin-top:1rem}button[_ngcontent-%COMP%]{margin-right:1rem}"]}),n})()},{path:"dashboard",component:k8,children:[{path:"list",component:H5},{path:"recipes",component:j5},{path:"drafts",component:c5}]},{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"**",redirectTo:"sign-in"}];let wK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Vy.forRoot(bK),Vy]}),n})();function zU(n){return new u.vHH(3e3,!1)}function nZ(){return typeof window<"u"&&typeof window.document<"u"}function QR(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Yh(n){switch(n.length){case 0:return new xh;case 1:return n[0];default:return new Jv(n)}}function qU(n,e,t,i,r=new Map,s=new Map){const l=[],h=[];let p=-1,y=null;if(i.forEach(E=>{const I=E.get("offset"),k=I==p,N=k&&y||new Map;E.forEach((U,J)=>{let ce=J,Ue=U;if("offset"!==J)switch(ce=e.normalizePropertyName(ce,l),Ue){case"!":Ue=r.get(J);break;case Vl:Ue=s.get(J);break;default:Ue=e.normalizeStyleValue(J,ce,Ue,l)}N.set(ce,Ue)}),k||h.push(N),y=N,p=I}),l.length)throw function GK(n){return new u.vHH(3502,!1)}();return h}function XR(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&JR(t,"start",n)));break;case"done":n.onDone(()=>i(t&&JR(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&JR(t,"destroy",n)))}}function JR(n,e,t){const s=eO(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(s._data=l),s}function eO(n,e,t,i,r="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!l}}function Qo(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function WU(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let tO=(n,e)=>!1,KU=(n,e,t)=>[],ZU=null;function nO(n){const e=n.parentNode||n.host;return e===ZU?null:e}(QR()||typeof Element<"u")&&(nZ()?(ZU=(()=>document.documentElement)(),tO=(n,e)=>{for(;e;){if(e===n)return!0;e=nO(e)}return!1}):tO=(n,e)=>n.contains(e),KU=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let um=null,YU=!1;const QU=tO,XU=KU;let JU=(()=>{class n{validateStyleProperty(t){return function rZ(n){um||(um=function sZ(){return typeof document<"u"?document.body:null}()||{},YU=!!um.style&&"WebkitAppearance"in um.style);let e=!0;return um.style&&!function iZ(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in um.style,!e&&YU&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in um.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return QU(t,i)}getParentElement(t){return nO(t)}query(t,i,r){return XU(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,l,h=[],p){return new xh(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),iO=(()=>{class n{}return n.NOOP=new JU,n})();const rO="ng-enter",uT="ng-leave",dT="ng-trigger",hT=".ng-trigger",t2="ng-animating",sO=".ng-animating";function Qh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:oO(parseFloat(e[1]),e[2])}function oO(n,e){return"s"===e?1e3*n:n}function fT(n,e,t){return n.hasOwnProperty("duration")?n:function lZ(n,e,t){let r,s=0,l="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(zU()),{duration:0,delay:0,easing:""};r=oO(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=oO(parseFloat(p),h[4]));const y=h[5];y&&(l=y)}else r=n;if(!t){let h=!1,p=e.length;r<0&&(e.push(function EK(){return new u.vHH(3100,!1)}()),h=!0),s<0&&(e.push(function CK(){return new u.vHH(3101,!1)}()),h=!0),h&&e.splice(p,0,zU())}return{duration:r,delay:s,easing:l}}(n,e,t)}function M0(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function n2(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Xh(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function s2(n,e,t){return t?e+":"+t+";":""}function o2(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=s2(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=s2(0,hZ(t),n.style[t]));n.setAttribute("style",e)}function tu(n,e,t){n.style&&(e.forEach((i,r)=>{const s=lO(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),QR()&&o2(n))}function dm(n,e){n.style&&(e.forEach((t,i)=>{const r=lO(i);n.style[r]=""}),QR()&&o2(n))}function k0(n){return Array.isArray(n)?1==n.length?n[0]:uD(n):n}const aO=new RegExp("{{\\s*(.+?)\\s*}}","g");function a2(n){let e=[];if("string"==typeof n){let t;for(;t=aO.exec(n);)e.push(t[1]);aO.lastIndex=0}return e}function pT(n,e,t){const i=n.toString(),r=i.replace(aO,(s,l)=>{let h=e[l];return null==h&&(t.push(function IK(n){return new u.vHH(3003,!1)}()),h=""),h.toString()});return r==i?n:r}function mT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const dZ=/-+([a-z0-9])/g;function lO(n){return n.replace(dZ,(...e)=>e[1].toUpperCase())}function hZ(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Xo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function TK(n){return new u.vHH(3004,!1)}()}}function l2(n,e){return window.getComputedStyle(n)[e]}function yZ(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function vZ(n,e,t){if(":"==n[0]){const p=function bZ(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function UK(n){return new u.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function BK(n){return new u.vHH(3015,!1)}()),e;const r=i[1],s=i[2],l=i[3];e.push(c2(r,l));"<"==s[0]&&!("*"==r&&"*"==l)&&e.push(c2(l,r))}(i,t,e)):t.push(n),t}const vT=new Set(["true","1"]),bT=new Set(["false","0"]);function c2(n,e){const t=vT.has(n)||bT.has(n),i=vT.has(e)||bT.has(e);return(r,s)=>{let l="*"==n||n==r,h="*"==e||e==s;return!l&&t&&"boolean"==typeof r&&(l=r?vT.has(n):bT.has(n)),!h&&i&&"boolean"==typeof s&&(h=s?vT.has(e):bT.has(e)),l&&h}}const wZ=new RegExp("s*:selfs*,?","g");function cO(n,e,t,i){return new EZ(n).build(e,t,i)}class EZ{constructor(e){this._driver=e}build(e,t,i){const r=new IZ(t);return this._resetContextStyleTimingState(r),Xo(this,k0(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function AK(){return new u.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,y=p.name;y.toString().split(/\s*,\s*/).forEach(E=>{p.name=E,s.push(this.visitState(p,t))}),p.name=y}else if(1==h.type){const p=this.visitTransition(h,t);i+=p.queryCount,r+=p.depCount,l.push(p)}else t.errors.push(function xK(){return new u.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:l,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,l=r||{};i.styles.forEach(h=>{h instanceof Map&&h.forEach(p=>{a2(p).forEach(y=>{l.hasOwnProperty(y)||s.add(y)})})}),s.size&&(mT(s.values()),t.errors.push(function MK(n,e){return new u.vHH(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Xo(this,k0(e.animation),t);return{type:1,matchers:yZ(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:hm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Xo(this,i,t)),options:hm(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(l=>{t.currentTime=i;const h=Xo(this,l,t);return r=Math.max(r,t.currentTime),h});return t.currentTime=r,{type:3,steps:s,options:hm(e.options)}}visitAnimate(e,t){const i=function SZ(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return uO(fT(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=uO(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=fT(t,e);return uO(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Mr({});if(5==s.type)r=this.visitKeyframes(s,t);else{let l=e.styles,h=!1;if(!l){h=!0;const y={};i.easing&&(y.easing=i.easing),l=Mr(y)}t.currentTime+=i.duration+i.delay;const p=this.visitStyle(l,t);p.isEmptyStep=h,r=p}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of r)"string"==typeof h?h===Vl?i.push(h):t.errors.push(new u.vHH(3002,!1)):i.push(n2(h));let s=!1,l=null;return i.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(l=h.get("easing"),h.delete("easing")),!s))for(let p of h.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:l,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((h,p)=>{const y=t.collectedStyles.get(t.currentQuerySelector),E=y.get(p);let I=!0;E&&(s!=r&&s>=E.startTime&&r<=E.endTime&&(t.errors.push(function RK(n,e,t,i,r){return new u.vHH(3010,!1)}()),I=!1),s=E.startTime),I&&y.set(p,{startTime:s,endTime:r}),t.options&&function uZ(n,e,t){const i=e.params||{},r=a2(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function DK(n){return new u.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function OK(){return new u.vHH(3011,!1)}()),i;let s=0;const l=[];let h=!1,p=!1,y=0;const E=e.steps.map(Ue=>{const Ke=this._makeStyleAst(Ue,t);let nt=null!=Ke.offset?Ke.offset:function TZ(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ke.styles),Qe=0;return null!=nt&&(s++,Qe=Ke.offset=nt),p=p||Qe<0||Qe>1,h=h||Qe<y,y=Qe,l.push(Qe),Ke});p&&t.errors.push(function PK(){return new u.vHH(3012,!1)}()),h&&t.errors.push(function NK(){return new u.vHH(3200,!1)}());const I=e.steps.length;let k=0;s>0&&s<I?t.errors.push(function FK(){return new u.vHH(3202,!1)}()):0==s&&(k=1/(I-1));const N=I-1,U=t.currentTime,J=t.currentAnimateTimings,ce=J.duration;return E.forEach((Ue,Ke)=>{const nt=k>0?Ke==N?1:k*Ke:l[Ke],Qe=nt*ce;t.currentTime=U+J.delay+Qe,J.duration=Qe,this._validateStyleAst(Ue,t),Ue.offset=nt,i.styles.push(Ue)}),i}visitReference(e,t){return{type:8,animation:Xo(this,k0(e.animation),t),options:hm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:hm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:hm(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function CZ(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(wZ,"")),n=n.replace(/@\*/g,hT).replace(/@\w+/g,t=>hT+"-"+t.slice(1)).replace(/:animating/g,sO),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Qo(t.collectedStyles,t.currentQuerySelector,new Map);const h=Xo(this,k0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:l,animation:h,originalSelector:e.selector,options:hm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function LK(){return new u.vHH(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:fT(e.timings,t.errors,!0);return{type:12,animation:Xo(this,k0(e.animation),t),timings:i,options:null}}}class IZ{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function hm(n){return n?(n=M0(n)).params&&(n.params=function DZ(n){return n?M0(n):null}(n.params)):n={},n}function uO(n,e,t){return{duration:n,delay:e,easing:t}}function dO(n,e,t,i,r,s,l=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:l,subTimeline:h}}class wT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const MZ=new RegExp(":enter","g"),RZ=new RegExp(":leave","g");function hO(n,e,t,i,r,s=new Map,l=new Map,h,p,y=[]){return(new OZ).buildKeyframes(n,e,t,i,r,s,l,h,p,y)}class OZ{buildKeyframes(e,t,i,r,s,l,h,p,y,E=[]){y=y||new wT;const I=new fO(e,t,y,r,s,E,[]);I.options=p;const k=p.delay?Qh(p.delay):0;I.currentTimeline.delayNextStep(k),I.currentTimeline.setStyles([l],null,I.errors,p),Xo(this,i,I);const N=I.timelines.filter(U=>U.containsAnimation());if(N.length&&h.size){let U;for(let J=N.length-1;J>=0;J--){const ce=N[J];if(ce.element===t){U=ce;break}}U&&!U.allowOnlyTimelineStyles()&&U.setStyles([h],null,I.errors,p)}return N.length?N.map(U=>U.buildKeyframes()):[dO(t,[],[],[],0,k,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(i,r,r.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const l=null!=i.duration?Qh(i.duration):null,h=null!=i.delay?Qh(i.delay):null;return 0!==l&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,l,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Xo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=ET);const l=Qh(s.delay);r.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Xo(this,l,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Qh(e.options.delay):0;e.steps.forEach(l=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),Xo(this,l,h),r=Math.max(r,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return fT(t.params?pT(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,h=t.createSubContext().currentTimeline;h.easing=i.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Qh(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ET);let l=i;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((y,E)=>{t.currentQueryIndex=E;const I=t.createSubContext(e.options,y);s&&I.delayNextStep(s),y===t.element&&(p=I.currentTimeline),Xo(this,e.animation,I),I.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,I.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),h=l*(t.currentQueryTotal-1);let p=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=i.currentStaggerTime}const E=t.currentTimeline;p&&E.delayNextStep(p);const I=E.currentTime;Xo(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-I+(r.startTime-i.currentTimeline.startTime)}}const ET={};class fO{constructor(e,t,i,r,s,l,h,p){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=l,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ET,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new CT(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Qh(i.duration)),null!=i.delay&&(r.delay=Qh(i.delay));const s=i.params;if(s){let l=r.params;l||(l=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!l.hasOwnProperty(h))&&(l[h]=pT(s[h],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new fO(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=ET,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new PZ(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,l){let h=[];if(r&&h.push(this.element),e.length>0){e=(e=e.replace(MZ,"."+this._enterClassName)).replace(RZ,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),h.push(...y)}return!s&&0==h.length&&l.push(function VK(n){return new u.vHH(3014,!1)}()),h}}class CT{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new CT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Vl),this._currentKeyframe.set(t,Vl);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},l=function NZ(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,Vl)}else Xh(r,t)}),t}(e,this._globalTimelineStyles);for(let[h,p]of l){const y=pT(p,s,i);this._pendingStyles.set(h,y),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)||Vl),this._updateStyle(h,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((h,p)=>{const y=Xh(h,new Map,this._backFill);y.forEach((E,I)=>{"!"===E?e.add(I):E===Vl&&t.add(I)}),i||y.set("offset",p/this.duration),r.push(y)});const s=e.size?mT(e.values()):[],l=t.size?mT(t.values()):[];if(i){const h=r[0],p=new Map(h);h.set("offset",0),p.set("offset",1),r=[h,p]}return dO(this.element,r,s,l,this.duration,this.startTime,this.easing,!1)}}class PZ extends CT{constructor(e,t,i,r,s,l,h=!1){super(e,t,l.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=i+t,h=t/l,p=Xh(e[0]);p.set("offset",0),s.push(p);const y=Xh(e[0]);y.set("offset",h2(h)),s.push(y);const E=e.length-1;for(let I=1;I<=E;I++){let k=Xh(e[I]);const N=k.get("offset");k.set("offset",h2((t+N*i)/l)),s.push(k)}i=l,t=0,r="",e=s}return dO(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function h2(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class pO{}const FZ=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class LZ extends pO{normalizePropertyName(e,t){return lO(e)}normalizeStyleValue(e,t,i,r){let s="";const l=i.toString().trim();if(FZ.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&r.push(function SK(n,e){return new u.vHH(3005,!1)}())}return l+s}}function f2(n,e,t,i,r,s,l,h,p,y,E,I,k){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:l,timelines:h,queriedElements:p,preStyleProps:y,postStyleProps:E,totalTime:I,errors:k}}const mO={};class p2{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function VZ(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,l,h,p,y,E){const I=[],k=this.ast.options&&this.ast.options.params||mO,U=this.buildStyles(i,h&&h.params||mO,I),J=p&&p.params||mO,ce=this.buildStyles(r,J,I),Ue=new Set,Ke=new Map,nt=new Map,Qe="void"===r,St={params:BZ(J,k),delay:this.ast.options?.delay},Ot=E?[]:hO(e,t,this.ast.animation,s,l,U,ce,St,y,I);let an=0;if(Ot.forEach(ia=>{an=Math.max(ia.duration+ia.delay,an)}),I.length)return f2(t,this._triggerName,i,r,Qe,U,ce,[],[],Ke,nt,an,I);Ot.forEach(ia=>{const Sd=ia.element,J3=Qo(Ke,Sd,new Set);ia.preStyleProps.forEach(Gm=>J3.add(Gm));const jw=Qo(nt,Sd,new Set);ia.postStyleProps.forEach(Gm=>jw.add(Gm)),Sd!==t&&Ue.add(Sd)});const $i=mT(Ue.values());return f2(t,this._triggerName,i,r,Qe,U,ce,Ot,$i,Ke,nt,an)}}function BZ(n,e){const t=M0(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class UZ{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=M0(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!==l&&(r[s]=l)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((l,h)=>{l&&(l=pT(l,r,t));const p=this.normalizer.normalizePropertyName(h,t);l=this.normalizer.normalizeStyleValue(h,p,l,t),i.set(p,l)})}),i}}class jZ{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new UZ(r.style,r.options&&r.options.params||{},i))}),m2(this.states,"true","1"),m2(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new p2(e,r,this.states))}),this.fallbackTransition=function $Z(n,e,t){return new p2(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(l=>l.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function m2(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const GZ=new wT;class zZ{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=cO(this._driver,t,i,[]);if(i.length)throw function zK(n){return new u.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=qU(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let l;const h=new Map;if(s?(l=hO(this._driver,t,s,rO,uT,new Map,new Map,i,GZ,r),l.forEach(E=>{const I=Qo(h,E.element,new Map);E.postStyleProps.forEach(k=>I.set(k,null))})):(r.push(function qK(){return new u.vHH(3300,!1)}()),l=[]),r.length)throw function WK(n){return new u.vHH(3504,!1)}();h.forEach((E,I)=>{E.forEach((k,N)=>{E.set(N,this._driver.computeStyle(I,N,Vl))})});const y=Yh(l.map(E=>{const I=h.get(E.element);return this._buildPlayer(E,new Map,I)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function KK(n){return new u.vHH(3301,!1)}();return t}listen(e,t,i,r){const s=eO(t,"","","");return XR(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const g2="ng-animate-queued",gO="ng-animate-disabled",YZ=[],_2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},QZ={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},el="__ng_removed";class _O{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function tY(n){return n??null}(i?e.value:e),i){const s=M0(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const R0="void",yO=new _O(R0);class XZ{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,tl(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function ZK(n,e){return new u.vHH(3302,!1)}();if(null==i||0==i.length)throw function YK(n){return new u.vHH(3303,!1)}();if(!function nY(n){return"start"==n||"done"==n}(i))throw function QK(n,e){return new u.vHH(3400,!1)}();const s=Qo(this._elementListeners,e,[]),l={name:t,phase:i,callback:r};s.push(l);const h=Qo(this._engine.statesByElement,e,new Map);return h.has(t)||(tl(e,dT),tl(e,dT+"-"+t),h.set(t,yO)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(l);p>=0&&s.splice(p,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function XK(n){return new u.vHH(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),l=new vO(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(tl(e,dT),tl(e,dT+"-"+t),this._engine.statesByElement.set(e,h=new Map));let p=h.get(t);const y=new _O(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),h.set(t,y),p||(p=yO),y.value!==R0&&p.value===y.value){if(!function sY(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const J=[],ce=s.matchStyles(p.value,p.params,J),Ue=s.matchStyles(y.value,y.params,J);J.length?this._engine.reportError(J):this._engine.afterFlush(()=>{dm(e,ce),tu(e,Ue)})}return}const k=Qo(this._engine.playersByElement,e,[]);k.forEach(J=>{J.namespaceId==this.id&&J.triggerName==t&&J.queued&&J.destroy()});let N=s.matchTransition(p.value,y.value,e,y.params),U=!1;if(!N){if(!r)return;N=s.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:N,fromState:p,toState:y,player:l,isFallbackTransition:U}),U||(tl(e,g2),l.onStart(()=>{k_(e,g2)})),l.onDone(()=>{let J=this.players.indexOf(l);J>=0&&this.players.splice(J,1);const ce=this._engine.playersByElement.get(e);if(ce){let Ue=ce.indexOf(l);Ue>=0&&ce.splice(Ue,1)}}),this.players.push(l),k.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,hT,!0);i.forEach(r=>{if(r[el])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(l=>l.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),l=new Map;if(s){const h=[];if(s.forEach((p,y)=>{if(l.set(y,p.value),this._triggers.has(y)){const E=this.trigger(e,y,R0,r);E&&h.push(E)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),i&&Yh(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const l=s.name;if(r.has(l))return;r.add(l);const p=this._triggers.get(l).fallbackTransition,y=i.get(l)||yO,E=new _O(R0),I=new vO(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:p,fromState:y,toState:E,player:I,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let l=e;for(;l=l.parentNode;)if(i.statesByElement.get(l)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[el];(!s||s===_2)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){tl(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,l=this._elementListeners.get(s);l&&l.forEach(h=>{if(h.name==i.triggerName){const p=eO(s,i.triggerName,i.fromState.value,i.toState.value);p._data=e,XR(i.player,h.phase,p,h.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,l=r.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class JZ{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new XZ(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let l=!1,h=this.driver.getParentElement(t);for(;h;){const p=r.get(h);if(p){const y=i.indexOf(p);i.splice(y+1,0,e),l=!0;break}h=this.driver.getParentElement(h)}l||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(DT(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!DT(t))return;const s=t[el];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),tl(e,gO)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),k_(e,gO))}removeNode(e,t,i,r){if(DT(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[el]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return DT(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,hT,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,sO,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Yh(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[el];if(t&&t.setForRemoval){if(e[el]=_2,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(gO)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)tl(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Yh(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function JK(n){return new u.vHH(3402,!1)}()}_flushAnimations(e,t){const i=new wT,r=[],s=new Map,l=[],h=new Map,p=new Map,y=new Map,E=new Set;this.disabledNodes.forEach(gt=>{E.add(gt);const Dt=this.driver.query(gt,".ng-animate-queued",!0);for(let Pt=0;Pt<Dt.length;Pt++)E.add(Dt[Pt])});const I=this.bodyNode,k=Array.from(this.statesByElement.keys()),N=b2(k,this.collectedEnterElements),U=new Map;let J=0;N.forEach((gt,Dt)=>{const Pt=rO+J++;U.set(Dt,Pt),gt.forEach(vn=>tl(vn,Pt))});const ce=[],Ue=new Set,Ke=new Set;for(let gt=0;gt<this.collectedLeaveElements.length;gt++){const Dt=this.collectedLeaveElements[gt],Pt=Dt[el];Pt&&Pt.setForRemoval&&(ce.push(Dt),Ue.add(Dt),Pt.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(vn=>Ue.add(vn)):Ke.add(Dt))}const nt=new Map,Qe=b2(k,Array.from(Ue));Qe.forEach((gt,Dt)=>{const Pt=uT+J++;nt.set(Dt,Pt),gt.forEach(vn=>tl(vn,Pt))}),e.push(()=>{N.forEach((gt,Dt)=>{const Pt=U.get(Dt);gt.forEach(vn=>k_(vn,Pt))}),Qe.forEach((gt,Dt)=>{const Pt=nt.get(Dt);gt.forEach(vn=>k_(vn,Pt))}),ce.forEach(gt=>{this.processLeaveNode(gt)})});const St=[],Ot=[];for(let gt=this._namespaceList.length-1;gt>=0;gt--)this._namespaceList[gt].drainQueuedTransitions(t).forEach(Pt=>{const vn=Pt.player,Ur=Pt.element;if(St.push(vn),this.collectedEnterElements.length){const Es=Ur[el];if(Es&&Es.setForMove){if(Es.previousTriggersValues&&Es.previousTriggersValues.has(Pt.triggerName)){const zm=Es.previousTriggersValues.get(Pt.triggerName),rl=this.statesByElement.get(Pt.element);if(rl&&rl.has(Pt.triggerName)){const KS=rl.get(Pt.triggerName);KS.value=zm,rl.set(Pt.triggerName,KS)}}return void vn.destroy()}}const du=!I||!this.driver.containsElement(I,Ur),ra=nt.get(Ur),bf=U.get(Ur),Ti=this._buildInstruction(Pt,i,bf,ra,du);if(Ti.errors&&Ti.errors.length)return void Ot.push(Ti);if(du)return vn.onStart(()=>dm(Ur,Ti.fromStyles)),vn.onDestroy(()=>tu(Ur,Ti.toStyles)),void r.push(vn);if(Pt.isFallbackTransition)return vn.onStart(()=>dm(Ur,Ti.fromStyles)),vn.onDestroy(()=>tu(Ur,Ti.toStyles)),void r.push(vn);const nz=[];Ti.timelines.forEach(Es=>{Es.stretchStartingKeyframe=!0,this.disabledNodes.has(Es.element)||nz.push(Es)}),Ti.timelines=nz,i.append(Ur,Ti.timelines),l.push({instruction:Ti,player:vn,element:Ur}),Ti.queriedElements.forEach(Es=>Qo(h,Es,[]).push(vn)),Ti.preStyleProps.forEach((Es,zm)=>{if(Es.size){let rl=p.get(zm);rl||p.set(zm,rl=new Set),Es.forEach((KS,M1)=>rl.add(M1))}}),Ti.postStyleProps.forEach((Es,zm)=>{let rl=y.get(zm);rl||y.set(zm,rl=new Set),Es.forEach((KS,M1)=>rl.add(M1))})});if(Ot.length){const gt=[];Ot.forEach(Dt=>{gt.push(function eZ(n,e){return new u.vHH(3505,!1)}())}),St.forEach(Dt=>Dt.destroy()),this.reportError(gt)}const an=new Map,$i=new Map;l.forEach(gt=>{const Dt=gt.element;i.has(Dt)&&($i.set(Dt,Dt),this._beforeAnimationBuild(gt.player.namespaceId,gt.instruction,an))}),r.forEach(gt=>{const Dt=gt.element;this._getPreviousPlayers(Dt,!1,gt.namespaceId,gt.triggerName,null).forEach(vn=>{Qo(an,Dt,[]).push(vn),vn.destroy()})});const ia=ce.filter(gt=>E2(gt,p,y)),Sd=new Map;v2(Sd,this.driver,Ke,y,Vl).forEach(gt=>{E2(gt,p,y)&&ia.push(gt)});const jw=new Map;N.forEach((gt,Dt)=>{v2(jw,this.driver,new Set(gt),p,"!")}),ia.forEach(gt=>{const Dt=Sd.get(gt),Pt=jw.get(gt);Sd.set(gt,new Map([...Array.from(Dt?.entries()??[]),...Array.from(Pt?.entries()??[])]))});const Gm=[],ez=[],tz={};l.forEach(gt=>{const{element:Dt,player:Pt,instruction:vn}=gt;if(i.has(Dt)){if(E.has(Dt))return Pt.onDestroy(()=>tu(Dt,vn.toStyles)),Pt.disabled=!0,Pt.overrideTotalTime(vn.totalTime),void r.push(Pt);let Ur=tz;if($i.size>1){let ra=Dt;const bf=[];for(;ra=ra.parentNode;){const Ti=$i.get(ra);if(Ti){Ur=Ti;break}bf.push(ra)}bf.forEach(Ti=>$i.set(Ti,Ur))}const du=this._buildAnimation(Pt.namespaceId,vn,an,s,jw,Sd);if(Pt.setRealPlayer(du),Ur===tz)Gm.push(Pt);else{const ra=this.playersByElement.get(Ur);ra&&ra.length&&(Pt.parentPlayer=Yh(ra)),r.push(Pt)}}else dm(Dt,vn.fromStyles),Pt.onDestroy(()=>tu(Dt,vn.toStyles)),ez.push(Pt),E.has(Dt)&&r.push(Pt)}),ez.forEach(gt=>{const Dt=s.get(gt.element);if(Dt&&Dt.length){const Pt=Yh(Dt);gt.setRealPlayer(Pt)}}),r.forEach(gt=>{gt.parentPlayer?gt.syncPlayerEvents(gt.parentPlayer):gt.destroy()});for(let gt=0;gt<ce.length;gt++){const Dt=ce[gt],Pt=Dt[el];if(k_(Dt,uT),Pt&&Pt.hasAnimation)continue;let vn=[];if(h.size){let du=h.get(Dt);du&&du.length&&vn.push(...du);let ra=this.driver.query(Dt,sO,!0);for(let bf=0;bf<ra.length;bf++){let Ti=h.get(ra[bf]);Ti&&Ti.length&&vn.push(...Ti)}}const Ur=vn.filter(du=>!du.destroyed);Ur.length?iY(this,Dt,Ur):this.processLeaveNode(Dt)}return ce.length=0,Gm.forEach(gt=>{this.players.push(gt),gt.onDone(()=>{gt.destroy();const Dt=this.players.indexOf(gt);this.players.splice(Dt,1)}),gt.play()}),Gm}elementContainsData(e,t){let i=!1;const r=t[el];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let l=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(l=h)}else{const h=this.playersByElement.get(e);if(h){const p=!s||s==R0;h.forEach(y=>{y.queued||!p&&y.triggerName!=r||l.push(y)})}}return(i||r)&&(l=l.filter(h=>!(i&&i!=h.namespaceId||r&&r!=h.triggerName))),l}_beforeAnimationBuild(e,t,i){const s=t.element,l=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,E=y!==s,I=Qo(i,y,[]);this._getPreviousPlayers(y,E,l,h,t.toState).forEach(N=>{const U=N.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),N.destroy(),I.push(N)})}dm(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,l){const h=t.triggerName,p=t.element,y=[],E=new Set,I=new Set,k=t.timelines.map(U=>{const J=U.element;E.add(J);const ce=J[el];if(ce&&ce.removedBeforeQueried)return new xh(U.duration,U.delay);const Ue=J!==p,Ke=function rY(n){const e=[];return w2(n,e),e}((i.get(J)||YZ).map(an=>an.getRealPlayer())).filter(an=>!!an.element&&an.element===J),nt=s.get(J),Qe=l.get(J),St=qU(0,this._normalizer,0,U.keyframes,nt,Qe),Ot=this._buildPlayer(U,St,Ke);if(U.subTimeline&&r&&I.add(J),Ue){const an=new vO(e,h,J);an.setRealPlayer(Ot),y.push(an)}return Ot});y.forEach(U=>{Qo(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function eY(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,U.element,U))}),E.forEach(U=>tl(U,t2));const N=Yh(k);return N.onDestroy(()=>{E.forEach(U=>k_(U,t2)),tu(p,t.toStyles)}),I.forEach(U=>{Qo(r,U,[]).push(N)}),N}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new xh(e.duration,e.delay)}}class vO{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new xh,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>XR(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Qo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function DT(n){return n&&1===n.nodeType}function y2(n,e){const t=n.style.display;return n.style.display=e??"none",t}function v2(n,e,t,i,r){const s=[];t.forEach(p=>s.push(y2(p)));const l=[];i.forEach((p,y)=>{const E=new Map;p.forEach(I=>{const k=e.computeStyle(y,I,r);E.set(I,k),(!k||0==k.length)&&(y[el]=QZ,l.push(y))}),n.set(y,E)});let h=0;return t.forEach(p=>y2(p,s[h++])),l}function b2(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const r=new Set(e),s=new Map;function l(h){if(!h)return 1;let p=s.get(h);if(p)return p;const y=h.parentNode;return p=t.has(y)?y:r.has(y)?1:l(y),s.set(h,p),p}return e.forEach(h=>{const p=l(h);1!==p&&t.get(p).push(h)}),t}function tl(n,e){n.classList?.add(e)}function k_(n,e){n.classList?.remove(e)}function iY(n,e,t){Yh(t).onDone(()=>n.processLeaveNode(e))}function w2(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof Jv?w2(i.players,e):e.push(i)}}function E2(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class IT{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new JZ(e,t,i),this._timelineEngine=new zZ(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const l=e+"-"+r;let h=this._triggerCache[l];if(!h){const p=[],E=cO(this._driver,s,p,[]);if(p.length)throw function $K(n,e){return new u.vHH(3404,!1)}();h=function HZ(n,e,t){return new jZ(n,e,t)}(r,E,this._normalizer),this._triggerCache[l]=h}this._transitionEngine.registerTrigger(t,r,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,l]=WU(i);this._timelineEngine.command(s,t,l,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[l,h]=WU(i);return this._timelineEngine.listen(l,t,h,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let aY=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&tu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(tu(this._element,this._initialStyles),this._endStyles&&(tu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(dm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(dm(this._element,this._endStyles),this._endStyles=null),tu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function bO(n){let e=null;return n.forEach((t,i)=>{(function lY(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class C2{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:l2(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class cY{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return QU(e,t)}getParentElement(e){return nO(e)}query(e,t,i){return XU(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,l=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const y=new Map,E=l.filter(N=>N instanceof C2);(function fZ(n,e){return 0===n||0===e})(i,r)&&E.forEach(N=>{N.currentSnapshot.forEach((U,J)=>y.set(J,U))});let I=function cZ(n){return n.length?n[0]instanceof Map?n:n.map(e=>n2(e)):[]}(t).map(N=>Xh(N));I=function pZ(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,l)=>{i.has(l)||r.push(l),i.set(l,s)}),r.length)for(let s=1;s<e.length;s++){let l=e[s];r.forEach(h=>l.set(h,l2(n,h)))}}return e}(e,I,y);const k=function oY(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=bO(e[0]),e.length>1&&(i=bO(e[e.length-1]))):e instanceof Map&&(t=bO(e)),t||i?new aY(n,t,i):null}(e,I);return new C2(e,I,p,k)}}let uY=(()=>{class n extends Qv{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?uD(t):t;return D2(this._renderer,null,i,"register",[r]),new dY(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class dY extends class lL{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new hY(this._id,e,t||{},this._renderer)}}class hY{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return D2(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function D2(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const I2="@.disabled";let fY=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,l)=>{const h=l?.parentNode(s);h&&l.removeChild(h,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let E=this._rendererCache.get(s);return E||(E=new T2("",s,this.engine),this._rendererCache.set(s,E)),E}const l=i.id,h=i.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=E=>{Array.isArray(E)?E.forEach(p):this.engine.registerTrigger(l,h,t,E.name,E)};return i.data.animation.forEach(p),new pY(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,h]=s;l(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(IT),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class T2{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==I2?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class pY extends T2{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==I2?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function mY(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),l="";return"@"!=s.charAt(0)&&([s,l]=function gY(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,l,h=>{this.factory.scheduleListenerCallback(h._data||-1,i,h)})}return this.delegate.listen(e,t,i)}}let _Y=(()=>{class n extends IT{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(se),u.LFG(iO),u.LFG(pO),u.LFG(u.z2F))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const S2=[{provide:Qv,useClass:uY},{provide:pO,useFactory:function yY(){return new LZ}},{provide:IT,useClass:_Y},{provide:u.FYo,useFactory:function vY(n,e,t){return new fY(n,e,t)},deps:[As,IT,u.R0b]}],A2=[{provide:iO,useFactory:()=>new cY},{provide:u.QbO,useValue:"BrowserAnimations"},...S2],bY=[{provide:iO,useClass:JU},{provide:u.QbO,useValue:"NoopAnimations"},...S2];let wY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?bY:A2}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:A2,imports:[dn]}),n})(),EY=(()=>{class n{constructor(){this.title="agroceries"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&u._UZ(0,"router-outlet")},dependencies:[Yf]}),n})();const x2="firebasestorage.googleapis.com",M2="storageBucket";class Oi extends F.ZR{constructor(e,t){super(wO(e),`Firebase Storage: ${t} (${wO(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Oi.prototype)}_codeEquals(e){return wO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function wO(n){return"storage/"+n}function EO(){return new Oi("unknown","An unknown error occurred, please check the error payload for server response.")}function k2(){return new Oi("canceled","User canceled the upload/download.")}function R2(){return new Oi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function R_(n){return new Oi("invalid-argument",n)}function O2(){return new Oi("app-deleted","The Firebase app was deleted.")}function P2(n){return new Oi("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function O0(n,e){return new Oi("invalid-format","String does not match format '"+n+"': "+e)}function P0(n){throw new Oi("internal-error","Internal error: "+n)}class vs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=vs.makeFromUrl(e,t)}catch{return new vs(e,"")}if(""===i.path)return i;throw function RY(n){return new Oi("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+r+"(/(.*))?$","i");function y(Qe){Qe.path_=decodeURIComponent(Qe.path)}const I=t.replace(/[.]/g,"\\."),nt=[{regex:h,indices:{bucket:1,path:3},postModify:function s(Qe){"/"===Qe.path.charAt(Qe.path.length-1)&&(Qe.path_=Qe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${I}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===x2?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Qe=0;Qe<nt.length;Qe++){const St=nt[Qe],Ot=St.regex.exec(e);if(Ot){let $i=Ot[St.indices.path];$i||($i=""),i=new vs(Ot[St.indices.bucket],$i),St.postModify(i);break}}if(null==i)throw function kY(n){return new Oi("invalid-url","Invalid URL '"+n+"'.")}(e);return i}}class FY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ST(n){return"string"==typeof n||n instanceof String}function N2(n){return CO()&&n instanceof Blob}function CO(){return typeof Blob<"u"}function DO(n,e,t,i){if(i<e)throw R_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw R_(`Invalid value for '${n}'. Expected ${t} or less.`)}function gd(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function F2(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var Jh=(()=>{return(n=Jh||(Jh={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Jh;var n})();class jY{constructor(e,t,i,r,s,l,h,p,y,E,I){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=E,this.connectionFactory_=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,N)=>{this.resolve_=k,this.reject_=N,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,l=this.reject_,h=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function BY(n){return void 0!==n}(p)?s():s(p)}catch(p){l(p)}else if(null!==h){const p=EO();p.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,p):p)}else l(r.canceled?this.appDelete_?O2():k2():function MY(){return new Oi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new AT(!1,null,!0)):this.backoffId_=function LY(n,e,t){let i=1,r=null,s=null,l=!1,h=0;function p(){return 2===h}let y=!1;function E(...ce){y||(y=!0,e.apply(null,ce))}function I(ce){r=setTimeout(()=>{r=null,n(N,p())},ce)}function k(){s&&clearTimeout(s)}function N(ce,...Ue){if(y)return void k();if(ce)return k(),void E.call(null,ce,...Ue);if(p()||l)return k(),void E.call(null,ce,...Ue);let nt;i<64&&(i*=2),1===h?(h=2,nt=0):nt=1e3*(i+Math.random()),I(nt)}let U=!1;function J(ce){U||(U=!0,k(),!y&&(null!==r?(ce||(h=2),clearTimeout(r),I(0)):ce||(h=1)))}return I(0),s=setTimeout(()=>{l=!0,J(!0)},t),J}((i,r)=>{if(r)return void i(!1,new AT(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const h=s.getErrorCode()===Jh.NO_ERROR,p=s.getStatus();if(!h||this.isRetryStatusCode_(p)){const E=s.getErrorCode()===Jh.ABORT;return void i(!1,new AT(!1,null,E))}const y=-1!==this.successCodes_.indexOf(p);i(!0,new AT(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function VY(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||s}}class AT{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function ZY(...n){const e=function KY(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(CO())return new Blob(n);throw new Oi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Jo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class IO{constructor(e,t){this.data=e,this.contentType=t||null}}function TO(n,e){switch(n){case Jo.RAW:return new IO(L2(e));case Jo.BASE64:case Jo.BASE64URL:return new IO(V2(n,e));case Jo.DATA_URL:return new IO(function JY(n){const e=new B2(n);return e.base64?V2(Jo.BASE64,e.rest):function XY(n){let e;try{e=decodeURIComponent(n)}catch{throw O0(Jo.DATA_URL,"Malformed data URL.")}return L2(e)}(e.rest)}(e),function e7(n){return new B2(n).contentType}(e))}throw EO()}function L2(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function V2(n,e){switch(n){case Jo.BASE64:{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw O0(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Jo.BASE64URL:{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw O0(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function QY(n){return atob(n)}(e)}catch{throw O0(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class B2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw O0(Jo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function t7(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class nu{constructor(e,t){let i=0,r="";N2(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(N2(this.data_)){const r=function YY(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new nu(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new nu(i,!0)}}static getBlob(...e){if(CO()){const t=e.map(i=>i instanceof nu?i.data_:i);return new nu(ZY.apply(null,t))}{const t=e.map(l=>ST(l)?TO(Jo.RAW,l).data:l.data_);let i=0;t.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)r[s++]=l[h]}),new nu(r,!0)}}uploadData(){return this.data_}}function SO(n){let e;try{e=JSON.parse(n)}catch{return null}return function HY(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function U2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function r7(n,e){return e}class Gs{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||r7}}let xT=null;function N0(){if(xT)return xT;const n=[];n.push(new Gs("bucket")),n.push(new Gs("generation")),n.push(new Gs("metageneration")),n.push(new Gs("name","fullPath",!0));const t=new Gs("name");t.xform=function e(s,l){return function s7(n){return!ST(n)||n.length<2?n:U2(n)}(l)},n.push(t);const r=new Gs("size");return r.xform=function i(s,l){return void 0!==l?Number(l):l},n.push(r),n.push(new Gs("timeCreated")),n.push(new Gs("updated")),n.push(new Gs("md5Hash",null,!0)),n.push(new Gs("cacheControl",null,!0)),n.push(new Gs("contentDisposition",null,!0)),n.push(new Gs("contentEncoding",null,!0)),n.push(new Gs("contentLanguage",null,!0)),n.push(new Gs("contentType",null,!0)),n.push(new Gs("metadata","customMetadata",!0)),xT=n,xT}function H2(n,e,t){const i=SO(e);return null===i?null:function a7(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const l=t[s];i[l.local]=l.xform(i,e[l.server])}return function o7(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new vs(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}function AO(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const j2="prefixes";class iu{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ru(n){if(!n)throw EO()}function MT(n,e){return function t(i,r){const s=H2(n,r,e);return ru(null!==s),s}}function O_(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function AY(){return new Oi("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function SY(){return new Oi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function TY(n){return new Oi("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function xY(n){return new Oi("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function F0(n){const e=O_(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function IY(n){return new Oi("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function G2(n,e,t){const r=gd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new iu(r,"GET",MT(n,t),l);return h.errorHandler=F0(e),h}function f7(n,e,t,i,r){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),i&&(s.pageToken=i),r&&(s.maxResults=r);const h=gd(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,E=new iu(h,"GET",function d7(n,e){return function t(i,r){const s=function u7(n,e,t){const i=SO(t);return null===i?null:function c7(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[j2])for(const r of t[j2]){const s=r.replace(/\/$/,""),l=n._makeStorageReference(new vs(e,s));i.prefixes.push(l)}if(t.items)for(const r of t.items){const s=n._makeStorageReference(new vs(e,r.name));i.items.push(s)}return i}(n,e,i)}(n,e,r);return ru(null!==s),s}}(n,e.bucket),y);return E.urlParams=s,E.errorHandler=O_(e),E}function q2(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function _7(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class kT{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function xO(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ru(!1)}return ru(!!t&&-1!==(e||["active"]).indexOf(t)),t}const w7={STATE_CHANGED:"state_changed"},zs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function MO(n){switch(n){case"running":case"pausing":case"canceling":return zs.RUNNING;case"paused":return zs.PAUSED;case"success":return zs.SUCCESS;case"canceled":return zs.CANCELED;default:return zs.ERROR}}class E7{constructor(e,t,i){if(function UY(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function P_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class D7 extends class C7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw P0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw P0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw P0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw P0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw P0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Zl(){return new D7}class Y2{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=N0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function y7(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),l=q2(e,i,r),h={name:l.fullPath},p=gd(s,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},I=AO(l,t),U=new iu(p,"POST",function N(J){let ce;xO(J);try{ce=J.getResponseHeader("X-Goog-Upload-URL")}catch{ru(!1)}return ru(ST(ce)),ce},n.maxUploadRetryTime);return U.urlParams=h,U.headers=E,U.body=I,U.errorHandler=O_(e),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Zl,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function v7(n,e,t,i){const p=new iu(t,"POST",function s(y){const E=xO(y,["active","final"]);let I=null;try{I=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ru(!1)}I||ru(!1);const k=Number(I);return ru(!isNaN(k)),new kT(k,i.size(),"final"===E)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=O_(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,Zl,t,i);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new kT(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let l;try{l=function b7(n,e,t,i,r,s,l,h){const p=new kT(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function PY(){return new Oi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let E=y;r>0&&(E=Math.min(E,r));const I=p.current,U={"X-Goog-Upload-Command":E===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},J=i.slice(I,I+E);if(null===J)throw R2();const nt=new iu(t,"POST",function ce(Qe,St){const Ot=xO(Qe,["active","final"]),an=p.current+E,$i=i.size();let ia;return ia="final"===Ot?MT(e,s)(Qe,St):null,new kT(an,$i,"final"===Ot,ia)},e.maxUploadRetryTime);return nt.headers=U,nt.body=J.uploadData(),nt.progressCallback=h||null,nt.errorHandler=O_(n),nt}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(l,Zl,r,s);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=G2(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Zl,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function W2(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let nt="";for(let Qe=0;Qe<2;Qe++)nt+=Math.random().toString().slice(2);return nt}();l["Content-Type"]="multipart/related; boundary="+p;const y=q2(e,i,r),E=AO(y,t),N=nu.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===N)throw R2();const U={name:y.fullPath},J=gd(s,n.host,n._protocol),Ue=n.maxUploadRetryTime,Ke=new iu(J,"POST",MT(n,t),Ue);return Ke.urlParams=U,Ke.headers=l,Ke.body=N.uploadData(),Ke.errorHandler=O_(e),Ke}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Zl,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=k2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=MO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new E7(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(MO(this._state)){case zs.SUCCESS:P_(this._resolve.bind(null,this.snapshot))();break;case zs.CANCELED:case zs.ERROR:P_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(MO(this._state)){case zs.RUNNING:case zs.PAUSED:e.next&&P_(e.next.bind(e,this.snapshot))();break;case zs.SUCCESS:e.complete&&P_(e.complete.bind(e))();break;default:e.error&&P_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class fm{constructor(e,t){this._service=e,this._location=t instanceof vs?t:vs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new fm(e,t)}get root(){const e=new vs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return U2(this._location.path)}get storage(){return this._service}get parent(){const e=function n7(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new vs(this._location.bucket,e);return new fm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw P2(e)}}function X2(n,e,t){return kO.apply(this,arguments)}function kO(){return(kO=(0,Ce.Z)(function*(n,e,t){const r=yield J2(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield X2(n,e,r.nextPageToken))})).apply(this,arguments)}function J2(n,e){null!=e&&"number"==typeof e.maxResults&&DO("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=f7(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,Zl)}function F7(n){n._throwIfRoot("getDownloadURL");const e=function p7(n,e,t){const r=gd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new iu(r,"GET",function h7(n,e){return function t(i,r){const s=H2(n,r,e);return ru(null!==s),function l7(n,e,t,i){const r=SO(e);if(null===r||!ST(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(y=>{const I=n.fullPath;return gd("/b/"+l(n.bucket)+"/o/"+l(I),t,i)+F2({alt:"media",token:y})})[0]}(s,r,n.host,n._protocol)}}(n,t),l);return h.errorHandler=F0(e),h}(n.storage,n._location,N0());return n.storage.makeRequestWithTokens(e,Zl).then(t=>{if(null===t)throw function NY(){return new Oi("no-download-url","The given file does not have any download URLs.")}();return t})}function eH(n,e){const t=function i7(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new vs(n._location.bucket,t);return new fm(n.storage,i)}function tH(n,e){if(n instanceof RO){const t=n;if(null==t._bucket)throw function OY(){return new Oi("no-default-bucket","No default bucket found. Did you set the '"+M2+"' property when initializing the app?")}();const i=new fm(t,t._bucket);return null!=e?tH(i,e):i}return void 0!==e?eH(n,e):n}function U7(n,e){if(e&&function V7(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof RO)return function B7(n,e){return new fm(n,e)}(n,e);throw R_("To use ref(service, url), the first argument must be a Storage instance.")}return tH(n,e)}function nH(n,e){const t=e?.[M2];return null==t?null:vs.makeFromBucketSpec(t,n)}class RO{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=x2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?vs.makeFromBucketSpec(r,this._host):nH(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?vs.makeFromBucketSpec(this._url,e):nH(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){DO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){DO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fm(this,e)}_makeRequest(e,t,i,r){if(this._deleted)return new FY(O2());{const s=function WY(n,e,t,i,r,s){const l=F2(n.urlParams),h=n.url+l,p=Object.assign({},n.headers);return function zY(n,e){e&&(n["X-Firebase-GMPID"]=e)}(p,e),function $Y(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(p,t),function GY(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(p,s),function qY(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(p,i),new jY(h,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(e,this._appId,i,r,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var i=this;return(0,Ce.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const iH="@firebase/storage";function oH(n,e){return U7(n=(0,F.m9)(n),e)}function Q7(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new RO(t,i,r,e,_s.SDK_VERSION)}!function X7(){(0,_s._registerComponent)(new Ka.wA("storage",Q7,"PUBLIC").setMultipleInstances(!0)),(0,_s.registerVersion)(iH,"0.9.9",""),(0,_s.registerVersion)(iH,"0.9.9","esm2017")}();class RT{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class aH{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new RT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new RT(i,this,this._ref))},t)}on(e,t,i,r){let s;return t&&(s="function"==typeof t?l=>t(new RT(l,this,this._ref)):{next:t.next?l=>t.next(new RT(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class lH{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new _d(e,this._service))}get items(){return this._delegate.items.map(e=>new _d(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class _d{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Z7(n,e){return eH(n,e)}(this._delegate,e);return new _d(t,this.storage)}get root(){return new _d(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new _d(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new aH(function j7(n,e,t){return function k7(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Y2(n,new nu(e),t)}(n=(0,F.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Jo.RAW,i){this._throwIfRoot("putString");const r=TO(t,e),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new aH(new Y2(this._delegate,new nu(r.data,!0),s),this)}listAll(){return function q7(n){return function O7(n){const e={prefixes:[],items:[]};return X2(n,e).then(()=>e)}(n=(0,F.m9)(n))}(this._delegate).then(e=>new lH(e,this.storage))}list(e){return function z7(n,e){return J2(n=(0,F.m9)(n),e)}(this._delegate,e||void 0).then(t=>new lH(t,this.storage))}getMetadata(){return function $7(n){return function P7(n){n._throwIfRoot("getMetadata");const e=G2(n.storage,n._location,N0());return n.storage.makeRequestWithTokens(e,Zl)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(e){return function G7(n,e){return function N7(n,e){n._throwIfRoot("updateMetadata");const t=function m7(n,e,t,i){const s=gd(e.fullServerUrl(),n.host,n._protocol),h=AO(t,i),y=n.maxOperationRetryTime,E=new iu(s,"PATCH",MT(n,i),y);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=h,E.errorHandler=F0(e),E}(n.storage,n._location,e,N0());return n.storage.makeRequestWithTokens(t,Zl)}(n=(0,F.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function W7(n){return F7(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function K7(n){return function L7(n){n._throwIfRoot("deleteObject");const e=function g7(n,e){const i=gd(e.fullServerUrl(),n.host,n._protocol),h=new iu(i,"DELETE",function l(p,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=F0(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Zl)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw P2(e)}}class cH{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(uH(e))throw R_("ref() expected a child path but got a URL, use refFromURL instead.");return new _d(oH(this._delegate,e),this)}refFromURL(e){if(!uH(e))throw R_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{vs.makeFromUrl(e,this._delegate.host)}catch{throw R_("refFromUrl() expected a valid full URL but got an invalid one.")}return new _d(oH(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function Y7(n,e,t,i={}){!function H7(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,F.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function uH(n){return/^[A-Za-z]+:\/\//.test(n)}function n9(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new cH(t,i)}function dH(n){const e=function r9(n){return new qn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const s=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){s()}}).pipe(Qy(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ot.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function OT(n){return{getDownloadURL:()=>Be(void 0).pipe(hn.fc,Ei(()=>n.getDownloadURL()),hn.iC),getMetadata:()=>Be(void 0).pipe(hn.fc,Ei(()=>n.getMetadata()),hn.iC),delete:()=>(0,nn.D)(n.delete()),child:e=>OT(n.child(e)),updateMetadata:e=>(0,nn.D)(n.updateMetadata(e)),put:(e,t)=>dH(n.put(e,t)),putString:(e,t,i)=>dH(n.putString(e,t,i)),list:e=>(0,nn.D)(n.list(e)),listAll:()=>(0,nn.D)(n.listAll())}}!function i9(n){const e={TaskState:zs,TaskEvent:w7,StringFormat:Jo,Storage:cH,Reference:_d};n.INTERNAL.registerComponent(new Ka.wA("storage-compat",n9,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(Fk.Z);const s9=new u.OlP("angularfire2.storageBucket"),o9=new u.OlP("angularfire2.storage.maxUploadRetryTime"),a9=new u.OlP("angularfire2.storage.maxOperationRetryTime"),l9=new u.OlP("angularfire2.storage.use-emulator");let c9=(()=>{class n{constructor(t,i,r,s,l,h,p,y,E,I){const k=(0,Ri.on)(t,l,i);this.storage=(0,Ri.cc)(`${k.name}.storage.${r}`,"AngularFireStorage",k.name,()=>{const N=l.runOutsideAngular(()=>k.storage(r||void 0)),U=E;return U&&N.useEmulator(...U),p&&N.setMaxUploadRetryTime(p),y&&N.setMaxOperationRetryTime(y),N},[p,y])}ref(t){return OT(this.storage.ref(t))}refFromURL(t){return OT(this.storage.refFromURL(t))}upload(t,i,r){return OT(this.storage.ref(t)).put(i,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ri.Dh),u.LFG(Ri.xv,8),u.LFG(s9,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(hn.HU),u.LFG(o9,8),u.LFG(a9,8),u.LFG(l9,8),u.LFG(e0,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),u9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),d9=(()=>{class n{constructor(){CI.Z.registerVersion("angularfire",hn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[c9],imports:[u9]}),n})();function OO(){return(0,_n.e)((n,e)=>{let t,i=!1;n.subscribe((0,Dn.x)(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}var ut,h9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yd={},PO=PO||{},Ut=h9||self;function PT(){}function NO(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function L0(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var FO="closure_uid_"+(1e9*Math.random()>>>0),p9=0;function m9(n,e,t){return n.call.apply(n.bind,arguments)}function g9(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function es(n,e,t){return(es=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m9:g9).apply(null,arguments)}function NT(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function ts(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[r].apply(i,l)}}function ef(){this.s=this.s,this.o=this.o}var y9={};ef.prototype.s=!1,ef.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function f9(n){return Object.prototype.hasOwnProperty.call(n,FO)&&n[FO]||(n[FO]=++p9)}(this);delete y9[n]}},ef.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hH=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},fH=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const i=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<i;s++)s in r&&e.call(t,r[s],s,n)};function pH(n){return Array.prototype.concat.apply([],arguments)}function LO(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function FT(n){return/^[\s\xa0]*$/.test(n)}var Ws,mH=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function qs(n,e){return-1!=n.indexOf(e)}function VO(n,e){return n<e?-1:n>e?1:0}e:{var gH=Ut.navigator;if(gH){var _H=gH.userAgent;if(_H){Ws=_H;break e}}Ws=""}function BO(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function yH(n){const e={};for(const t in n)e[t]=n[t];return e}var vH="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bH(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<vH.length;s++)t=vH[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function UO(n){return UO[" "](n),n}UO[" "]=PT;var LT,n,w9=qs(Ws,"Opera"),N_=qs(Ws,"Trident")||qs(Ws,"MSIE"),wH=qs(Ws,"Edge"),HO=wH||N_,EH=qs(Ws,"Gecko")&&!(qs(Ws.toLowerCase(),"webkit")&&!qs(Ws,"Edge"))&&!(qs(Ws,"Trident")||qs(Ws,"MSIE"))&&!qs(Ws,"Edge"),E9=qs(Ws.toLowerCase(),"webkit")&&!qs(Ws,"Edge");function CH(){var n=Ut.document;return n?n.documentMode:void 0}e:{var jO="",$O=(n=Ws,EH?/rv:([^\);]+)(\)|;)/.exec(n):wH?/Edge\/([\d\.]+)/.exec(n):N_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):E9?/WebKit\/(\S+)/.exec(n):w9?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if($O&&(jO=$O?$O[1]:""),N_){var GO=CH();if(null!=GO&&GO>parseFloat(jO)){LT=String(GO);break e}}LT=jO}var C9={};var I9=Ut.document&&N_&&(CH()||parseInt(LT,10))||void 0,T9=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",PT,e),Ut.removeEventListener("test",PT,e)}catch{}return n}();function bs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function V0(n,e){if(bs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(EH){e:{try{UO(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:S9[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&V0.Z.h.call(this)}}bs.prototype.h=function(){this.defaultPrevented=!0},ts(V0,bs);var S9={2:"touch",3:"pen",4:"mouse"};V0.prototype.h=function(){V0.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var B0="closure_listenable_"+(1e6*Math.random()|0),A9=0;function x9(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ia=r,this.key=++A9,this.ca=this.fa=!1}function VT(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function BT(n){this.src=n,this.g={},this.h=0}function qO(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=hH(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(VT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function WO(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==i)return r}return-1}BT.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=WO(n,e,i,r);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new x9(e,this.src,s,!!i,r)).fa=t,n.push(e)),e};var KO="closure_lm_"+(1e6*Math.random()|0),ZO={};function IH(n,e,t,i,r){if(i&&i.once)return SH(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)IH(n,e[s],t,i,r);return null}return t=JO(t),n&&n[B0]?n.N(e,t,L0(i)?!!i.capture:!!i,r):TH(n,e,t,!1,i,r)}function TH(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var l=L0(r)?!!r.capture:!!r,h=QO(n);if(h||(n[KO]=h=new BT(n)),(t=h.add(e,t,i,l,s)).proxy)return t;if(i=function M9(){var e=k9;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)T9||(r=l),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(xH(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function SH(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)SH(n,e[s],t,i,r);return null}return t=JO(t),n&&n[B0]?n.O(e,t,L0(i)?!!i.capture:!!i,r):TH(n,e,t,!0,i,r)}function AH(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)AH(n,e[s],t,i,r);else i=L0(i)?!!i.capture:!!i,t=JO(t),n&&n[B0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=WO(s=n.g[e],t,i,r))&&(VT(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=QO(n))&&(e=n.g[e.toString()],n=-1,e&&(n=WO(e,t,i,r)),(t=-1<n?e[n]:null)&&YO(t))}function YO(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[B0])qO(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(xH(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=QO(e))?(qO(t,n),0==t.h&&(t.src=null,e[KO]=null)):VT(n)}}}function xH(n){return n in ZO?ZO[n]:ZO[n]="on"+n}function k9(n,e){if(n.ca)n=!0;else{e=new V0(e,this);var t=n.listener,i=n.ia||n.src;n.fa&&YO(n),n=t.call(i,e)}return n}function QO(n){return(n=n[KO])instanceof BT?n:null}var XO="__closure_events_fn_"+(1e9*Math.random()>>>0);function JO(n){return"function"==typeof n?n:(n[XO]||(n[XO]=function(e){return n.handleEvent(e)}),n[XO])}function Pr(){ef.call(this),this.i=new BT(this),this.P=this,this.I=null}function ns(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new bs(e,n);else if(e instanceof bs)e.target=e.target||n;else{var r=e;bH(e=new bs(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];r=UT(l,i,!0,e)&&r}if(r=UT(l=e.g=n,i,!0,e)&&r,r=UT(l,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=UT(l=e.g=t[s],i,!1,e)&&r}function UT(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.ca&&l.capture==t){var h=l.listener,p=l.ia||l.src;l.fa&&qO(n.i,l),r=!1!==h.call(p,i)&&r}}return r&&!i.defaultPrevented}ts(Pr,ef),Pr.prototype[B0]=!0,Pr.prototype.removeEventListener=function(n,e,t,i){AH(this,n,e,t,i)},Pr.prototype.M=function(){if(Pr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)VT(t[i]);delete n.g[e],n.h--}}this.I=null},Pr.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Pr.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var eP=Ut.JSON.stringify;function R9(){var n=kH;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var nP,MH=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new P9,n=>n.reset());class P9{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function N9(n){Ut.setTimeout(()=>{throw n},0)}function tP(n,e){nP||function F9(){var n=Ut.Promise.resolve(void 0);nP=function(){n.then(L9)}}(),iP||(nP(),iP=!0),kH.add(n,e)}var iP=!1,kH=new class O9{constructor(){this.h=this.g=null}add(e,t){const i=MH.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function L9(){for(var n;n=R9();){try{n.h.call(n.g)}catch(t){N9(t)}var e=MH;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}iP=!1}function HT(n,e){Pr.call(this),this.h=n||1,this.g=e||Ut,this.j=es(this.kb,this),this.l=Date.now()}function rP(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function sP(n,e,t){if("function"==typeof n)t&&(n=es(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=es(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function RH(n){n.g=sP(()=>{n.g=null,n.i&&(n.i=!1,RH(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ts(HT,Pr),(ut=HT.prototype).da=!1,ut.S=null,ut.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ns(this,"tick"),this.da&&(rP(this),this.start()))}},ut.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){HT.Z.M.call(this),rP(this),delete this.g};class V9 extends ef{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:RH(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function U0(n){ef.call(this),this.h=n,this.g={}}ts(U0,ef);var OH=[];function PH(n,e,t,i){Array.isArray(t)||(t&&(OH[0]=t.toString()),t=OH);for(var r=0;r<t.length;r++){var s=IH(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function NH(n){BO(n.g,function(e,t){this.g.hasOwnProperty(t)&&YO(e)},n),n.g={}}function jT(){this.g=!0}function F_(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function j9(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<r.length;l++)r[l]=""}}}return eP(t)}catch{return e}}(n,t)+(i?" "+i:"")})}U0.prototype.M=function(){U0.Z.M.call(this),NH(this)},U0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jT.prototype.Aa=function(){this.g=!1},jT.prototype.info=function(){};var pm={},FH=null;function $T(){return FH=FH||new Pr}function LH(n){bs.call(this,pm.Ma,n)}function H0(n){const e=$T();ns(e,new LH(e,n))}function VH(n,e){bs.call(this,pm.STAT_EVENT,n),this.stat=e}function Ks(n){const e=$T();ns(e,new VH(e,n))}function BH(n,e){bs.call(this,pm.Na,n),this.size=e}function j0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}pm.Ma="serverreachability",ts(LH,bs),pm.STAT_EVENT="statevent",ts(VH,bs),pm.Na="timingevent",ts(BH,bs);var GT={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},UH={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function oP(){}function jH(){}oP.prototype.h=null;var cP,$0={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function aP(){bs.call(this,"d")}function lP(){bs.call(this,"c")}function zT(){}function G0(n,e,t,i){this.l=n,this.j=e,this.m=t,this.X=i||1,this.V=new U0(this),this.P=$9,this.W=new HT(n=HO?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new $H}function $H(){this.i=null,this.g="",this.h=!1}ts(aP,bs),ts(lP,bs),ts(zT,oP),zT.prototype.g=function(){return new XMLHttpRequest},zT.prototype.i=function(){return{}},cP=new zT;var $9=45e3,uP={},qT={};function dP(n,e,t){n.K=1,n.v=QT(vd(e)),n.s=t,n.U=!0,GH(n,null)}function GH(n,e){n.F=Date.now(),z0(n),n.A=vd(n.v);var t=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),JH(t.h,"t",i),n.C=0,t=n.l.H,n.h=new $H,n.g=Ej(n.l,t?e:null,!n.s),0<n.O&&(n.L=new V9(es(n.Ia,n,n.g),n.O)),PH(n.V,n.g,"readystatechange",n.gb),e=n.H?yH(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),H0(1),function B9(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var l="",h=s.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var E=y[0];y=y[1];var I=E.split("_");l=2<=I.length&&"type"==I[1]?l+(E+"=")+y+"&":l+(E+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function zH(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function qH(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=G9(n,t),r==qT){4==e&&(n.o=4,Ks(14),i=!1),F_(n.j,n.m,null,"[Incomplete Response]");break}if(r==uP){n.o=4,Ks(15),F_(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}F_(n.j,n.m,r,null),hP(n,r)}zH(n)&&r!=qT&&r!=uP&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ks(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),CP(e),e.L=!0,Ks(11))):(F_(n.j,n.m,t,"[Invalid Chunked Response]"),mm(n),q0(n))}function G9(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?qT:(t=Number(e.substring(t,i)),isNaN(t)?uP:(i+=1)+t>e.length?qT:(e=e.substr(i,t),n.C=i+t,e))}function z0(n){n.Y=Date.now()+n.P,WH(n,n.P)}function WH(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=j0(es(n.eb,n),e)}function WT(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function q0(n){0==n.l.G||n.I||yj(n.l,n)}function mm(n){WT(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,rP(n.W),NH(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function hP(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||mP(t.i,n)))if(t.I=n.N,!n.J&&mP(t.i,n)&&3==t.G){try{var i=t.Ca.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;iS(t),tS(t)}EP(t),Ks(18)}}else t.ta=r[1],0<t.ta-t.U&&37500>r[2]&&t.N&&0==t.A&&!t.v&&(t.v=j0(es(t.ab,t),6e3));if(1>=nj(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else ym(t,11)}else if((n.J||t.g==n)&&iS(t),!FT(e))for(r=t.Ca.g.parse(e),e=0;e<r.length;e++){let y=r[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const E=y[3];null!=E&&(t.ma=E,t.h.info("VER="+t.ma));const I=y[4];null!=I&&(t.za=I,t.h.info("SVER="+t.za));const k=y[5];null!=k&&"number"==typeof k&&0<k&&(t.K=i=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+i)),i=t;const N=n.g;if(N){const U=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var s=i.i;!s.g&&(qs(U,"spdy")||qs(U,"quic")||qs(U,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(gP(s,s.h),s.h=null))}if(i.D){const J=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;J&&(i.sa=J,_i(i.F,i.D,J))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((i=t).oa=wj(i,i.H?i.la:null,i.W),l.J){ij(i.i,l);var h=l,p=i.K;p&&h.setTimeout(p),h.B&&(WT(h),z0(h)),i.g=l}else gj(i);0<t.l.length&&nS(t)}else"stop"!=y[0]&&"close"!=y[0]||ym(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?ym(t,7):bP(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}H0(4)}catch{}}function fP(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(NO(n)||"string"==typeof n)fH(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(NO(n)||"string"==typeof n){t=[];for(var i=n.length,r=0;r<i;r++)t.push(r)}else for(r in t=[],i=0,n)t[i++]=r;i=function z9(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(NO(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length;for(var s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}}function L_(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var i=0;i<t;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof L_)for(t=n.T(),i=0;i<t.length;i++)this.set(t[i],n.get(t[i]));else for(i in n)this.set(i,n[i])}function pP(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var i=n.g[e];gm(n.h,i)&&(n.g[t++]=i),e++}n.g.length=t}if(n.i!=n.g.length){var r={};for(t=e=0;e<n.g.length;)gm(r,i=n.g[e])||(n.g[t++]=i,r[i]=1),e++;n.g.length=t}}function gm(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ut=G0.prototype).setTimeout=function(n){this.P=n},ut.gb=function(n){n=n.target;const e=this.L;e&&3==bd(n)?e.l():this.Ia(n)},ut.Ia=function(n){try{if(n==this.g)e:{const E=bd(this.g);var e=this.g.Da();const I=this.g.ba();if(!(3>E)&&(3!=E||HO||this.g&&(this.h.h||this.g.ga()||dj(this.g)))){this.I||4!=E||7==e||H0(8==e||0>=I?3:2),WT(this);var t=this.g.ba();this.N=t;t:if(zH(this)){var i=dj(this.g);n="";var r=i.length,s=4==bd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){mm(this),q0(this);var l="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function U9(n,e,t,i,r,s,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.X,E,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!FT(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Ks(12),mm(this),q0(this);break e}F_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,hP(this,t)}this.U?(qH(this,E,l),HO&&this.i&&3==E&&(PH(this.V,this.W,"tick",this.fb),this.W.start())):(F_(this.j,this.m,l,null),hP(this,l)),4==E&&mm(this),this.i&&!this.I&&(4==E?yj(this.l,this):(this.i=!1,z0(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ks(12)):(this.o=0,Ks(13)),mm(this),q0(this)}}}catch{}},ut.fb=function(){if(this.g){var n=bd(this.g),e=this.g.ga();this.C<e.length&&(WT(this),qH(this,n,e),this.i&&4!=n&&z0(this))}},ut.cancel=function(){this.I=!0,mm(this)},ut.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function H9(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(H0(3),Ks(17)),mm(this),this.o=2,q0(this)):WH(this,this.Y-n)},(ut=L_.prototype).R=function(){pP(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ut.T=function(){return pP(this),this.g.concat()},ut.get=function(n,e){return gm(this.h,n)?this.h[n]:e},ut.set=function(n,e){gm(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ut.forEach=function(n,e){for(var t=this.T(),i=0;i<t.length;i++){var r=t[i],s=this.get(r);n.call(e,s,r,this)}};var KH=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _m(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof _m){this.g=void 0!==e?e:n.g,KT(this,n.j),this.s=n.s,ZT(this,n.i),YT(this,n.m),this.l=n.l,e=n.h;var t=new Z0;t.i=e.i,e.g&&(t.g=new L_(e.g),t.h=e.h),ZH(this,t),this.o=n.o}else n&&(t=String(n).match(KH))?(this.g=!!e,KT(this,t[1]||"",!0),this.s=W0(t[2]||""),ZT(this,t[3]||"",!0),YT(this,t[4]),this.l=W0(t[5]||"",!0),ZH(this,t[6]||"",!0),this.o=W0(t[7]||"")):(this.g=!!e,this.h=new Z0(null,this.g))}function vd(n){return new _m(n)}function KT(n,e,t){n.j=t?W0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ZT(n,e,t){n.i=t?W0(e,!0):e}function YT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ZH(n,e,t){e instanceof Z0?(n.h=e,function eQ(n,e){e&&!n.j&&(tf(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(QH(this,i),JH(this,r,t))},n)),n.j=e}(n.h,n.g)):(t||(e=K0(e,X9)),n.h=new Z0(e,n.g))}function _i(n,e,t){n.h.set(e,t)}function QT(n){return _i(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function W0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function K0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Z9),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Z9(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}_m.prototype.toString=function(){var n=[],e=this.j;e&&n.push(K0(e,YH,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(K0(e,YH,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(K0(t,"/"==t.charAt(0)?Q9:Y9,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",K0(t,J9)),n.join("")};var YH=/[#\/\?@]/g,Y9=/[#\?:]/g,Q9=/[#\?]/g,X9=/[#\?@]/g,J9=/#/g;function Z0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function tf(n){n.g||(n.g=new L_,n.h=0,n.i&&function q9(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function QH(n,e){tf(n),e=V_(n,e),gm(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,gm((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&pP(n)))}function XH(n,e){return tf(n),e=V_(n,e),gm(n.g.h,e)}function JH(n,e,t){QH(n,e),0<t.length&&(n.i=null,n.g.set(V_(n,e),LO(t)),n.h+=t.length)}function V_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ej(n){this.l=n||nQ,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ea&&Ut.g.Ea()&&Ut.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=Z0.prototype).add=function(n,e){tf(this),this.i=null,n=V_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){tf(this),this.g.forEach(function(t,i){fH(t,function(r){n.call(e,r,i,this)},this)},this)},ut.T=function(){tf(this);for(var n=this.g.R(),e=this.g.T(),t=[],i=0;i<e.length;i++)for(var r=n[i],s=0;s<r.length;s++)t.push(e[i]);return t},ut.R=function(n){tf(this);var e=[];if("string"==typeof n)XH(this,n)&&(e=pH(e,this.g.get(V_(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=pH(e,n[t])}return e},ut.set=function(n,e){return tf(this),this.i=null,XH(this,n=V_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var i=e[t],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var l=r;""!==i[s]&&(l+="="+encodeURIComponent(String(i[s]))),n.push(l)}}return this.i=n.join("&")};var nQ=10;function tj(n){return!!n.h||!!n.g&&n.g.size>=n.j}function nj(n){return n.h?1:n.g?n.g.size:0}function mP(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function gP(n,e){n.g?n.g.add(e):n.h=e}function ij(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function rj(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return LO(n.i)}function _P(){}function iQ(){this.g=new _P}function rQ(n,e,t){const i=t||"";try{fP(n,function(r,s){let l=r;L0(r)&&(l=eP(r)),e.push(i+s+"="+encodeURIComponent(l))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function XT(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Y0(n){this.l=n.$b||null,this.j=n.ib||!1}function JT(n,e){Pr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=yP,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ej.prototype.cancel=function(){if(this.i=rj(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},_P.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},_P.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},ts(Y0,oP),Y0.prototype.g=function(){return new JT(this.l,this.j)},Y0.prototype.i=function(n){return function(){return n}}({}),ts(JT,Pr);var yP=0;function sj(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Q0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,X0(n)}function X0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=JT.prototype).open=function(n,e){if(this.readyState!=yP)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,X0(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Q0(this)),this.readyState=yP},ut.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,X0(this)),this.g&&(this.readyState=3,X0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sj(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ut.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Q0(this):X0(this),3==this.readyState&&sj(this)}},ut.Ua=function(n){this.g&&(this.response=this.responseText=n,Q0(this))},ut.Ta=function(n){this.g&&(this.response=n,Q0(this))},ut.ha=function(){this.g&&Q0(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(JT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var oQ=Ut.JSON.parse;function nr(n){Pr.call(this),this.headers=new L_,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=oj,this.K=this.L=!1}ts(nr,Pr);var oj="",aQ=/^https?$/i,lQ=["POST","PUT"];function uQ(n){return"content-type"==n.toLowerCase()}function aj(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,lj(n),eS(n)}function lj(n){n.D||(n.D=!0,ns(n,"complete"),ns(n,"error"))}function cj(n){if(n.h&&typeof PO<"u"&&(!n.C[1]||4!=bd(n)||2!=n.ba()))if(n.v&&4==bd(n))sP(n.Fa,0,n);else if(ns(n,"readystatechange"),4==bd(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===h){var r=String(n.H).match(KH)[1]||null;if(!r&&Ut.self&&Ut.self.location){var s=Ut.self.location.protocol;r=s.substr(0,s.length-1)}i=!aQ.test(r?r.toLowerCase():"")}t=i}if(t)ns(n,"complete"),ns(n,"success");else{n.m=6;try{var l=2<bd(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.ba()+"]",lj(n)}}finally{eS(n)}}}function eS(n,e){if(n.g){uj(n);const t=n.g,i=n.C[0]?PT:null;n.g=null,n.C=null,e||ns(n,"ready");try{t.onreadystatechange=i}catch{}}}function uj(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function bd(n){return n.g?n.g.readyState:0}function dj(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case oj:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function vP(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=function dQ(n){let e="";return BO(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):_i(n,e,t))}function J0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function hj(n){this.za=0,this.l=[],this.h=new jT,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=J0("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=J0("baseRetryDelayMs",5e3,n),this.$a=J0("retryDelaySeedMs",1e4,n),this.Ya=J0("forwardChannelMaxRetries",2,n),this.ra=J0("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new ej(n&&n.concurrentRequestLimit),this.Ca=new iQ,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function bP(n){if(fj(n),3==n.G){var e=n.V++,t=vd(n.F);_i(t,"SID",n.J),_i(t,"RID",e),_i(t,"TYPE","terminate"),ew(n,t),(e=new G0(n,n.h,e,void 0)).K=2,e.v=QT(vd(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(t=Ut.navigator.sendBeacon(e.v.toString(),"")),!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ej(e.l,null),e.g.ea(e.v)),e.F=Date.now(),z0(e)}bj(n)}function tS(n){n.g&&(CP(n),n.g.cancel(),n.g=null)}function fj(n){tS(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),iS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function wP(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&nS(n)}function nS(n){tj(n.i)||n.m||(n.m=!0,tP(n.Ha,n),n.C=0)}function pj(n,e){var t;t=e?e.m:n.V++;const i=vd(n.F);_i(i,"SID",n.J),_i(i,"RID",t),_i(i,"AID",n.U),ew(n,i),n.o&&n.s&&vP(i,n.o,n.s),t=new G0(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=mj(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),gP(n.i,t),dP(t,i,e)}function ew(n,e){n.j&&fP({},function(t,i){_i(e,i,t)})}function mj(n,e,t){t=Math.min(n.l.length,t);var i=n.j?es(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=r[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let y=r[p].h;const E=r[p].g;if(y-=s,0>y)s=Math.max(0,r[p].h-100),h=!1;else try{rQ(E,l,"req"+y+"_")}catch{i&&i(E)}}if(h){i=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,i}function gj(n){n.g||n.u||(n.Y=1,tP(n.Ga,n),n.A=0)}function EP(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=j0(es(n.Ga,n),vj(n,n.A)),n.A++,0))}function CP(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function _j(n){n.g=new G0(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=vd(n.oa);_i(e,"RID","rpc"),_i(e,"SID",n.J),_i(e,"CI",n.N?"0":"1"),_i(e,"AID",n.U),ew(n,e),_i(e,"TYPE","xmlhttp"),n.o&&n.s&&vP(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=QT(vd(e)),t.s=null,t.U=!0,GH(t,n)}function iS(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function yj(n,e){var t=null;if(n.g==e){iS(n),CP(n),n.g=null;var i=2}else{if(!mP(n.i,e))return;t=e.D,ij(n.i,e),i=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;ns(i=$T(),new BH(i,t,e,r)),nS(n)}else gj(n);else if(3==(r=e.o)||0==r&&0<n.I||!(1==i&&function hQ(n,e){return!(nj(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=j0(es(n.Ha,n,e),vj(n,n.C)),n.C++,0)))}(n,e)||2==i&&EP(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:ym(n,5);break;case 4:ym(n,10);break;case 3:ym(n,6);break;default:ym(n,2)}}function vj(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ym(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var i=es(n.jb,n);t||(t=new _m("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||KT(t,"https"),QT(t)),function sQ(n,e){const t=new jT;if(Ut.Image){const i=new Image;i.onload=NT(XT,t,i,"TestLoadImage: loaded",!0,e),i.onerror=NT(XT,t,i,"TestLoadImage: error",!1,e),i.onabort=NT(XT,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=NT(XT,t,i,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Ks(2);n.G=0,n.j&&n.j.va(e),bj(n),fj(n)}function bj(n){n.G=0,n.I=-1,n.j&&((0!=rj(n.i).length||0!=n.l.length)&&(n.i.i.length=0,LO(n.l),n.l.length=0),n.j.ua())}function wj(n,e,t){let i=function W9(n){return n instanceof _m?vd(n):new _m(n,void 0)}(t);if(""!=i.i)e&&ZT(i,e+"."+i.i),YT(i,i.m);else{const r=Ut.location;i=function K9(n,e,t,i){var r=new _m(null,void 0);return n&&KT(r,n),e&&ZT(r,e),t&&YT(r,t),i&&(r.l=i),r}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,t)}return n.aa&&BO(n.aa,function(r,s){_i(i,s,r)}),t=n.sa,(e=n.D)&&t&&_i(i,e,t),_i(i,"VER",n.ma),ew(n,i),i}function Ej(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new nr(t&&n.Ba&&!n.qa?new Y0({ib:!0}):n.qa)).L=n.H,e}function Cj(){}function rS(){if(N_&&!(10<=Number(I9)))throw Error("Environmental error: no available transport.")}function ea(n,e){Pr.call(this),this.g=new hj(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!FT(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!FT(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new B_(this)}function Dj(n){aP.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Ij(){lP.call(this),this.status=1}function B_(n){this.g=n}(ut=nr.prototype).ea=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():cP.g(),this.C=function HH(n){return n.h||(n.h=n.i())}(this.u?this.u:cP),this.g.onreadystatechange=es(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void aj(this,s)}n=t||"";const r=new L_(this.headers);i&&fP(i,function(s,l){r.set(l,s)}),i=function v9(n){e:{var e=uQ;const t=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<t;r++)if(r in i&&e.call(void 0,i[r],r,n)){e=r;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(r.T()),t=Ut.FormData&&n instanceof Ut.FormData,!(0<=hH(lQ,e))||i||t||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,l){this.g.setRequestHeader(l,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{uj(this),0<this.B&&((this.K=function cQ(n){return N_&&function D9(){return function b9(n){var e=C9;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=mH(String(LT)).split("."),t=mH("9").split("."),i=Math.max(e.length,t.length);for(let l=0;0==n&&l<i;l++){var r=e[l]||"",s=t[l]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=VO(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||VO(0==r[2].length,0==s[2].length)||VO(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=es(this.pa,this)):this.A=sP(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){aj(this,s)}},ut.pa=function(){typeof PO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ns(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ns(this,"complete"),ns(this,"abort"),eS(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),eS(this,!0)),nr.Z.M.call(this)},ut.Fa=function(){this.s||(this.F||this.v||this.l?cj(this):this.cb())},ut.cb=function(){cj(this)},ut.ba=function(){try{return 2<bd(this)?this.g.status:-1}catch{return-1}},ut.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),oQ(e)}},ut.Da=function(){return this.m},ut.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=hj.prototype).ma=8,ut.G=1,ut.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},ut.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new G0(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=yH(s),bH(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var i=this.l[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=mj(this,r,e),_i(t=vd(this.F),"RID",n),_i(t,"CVER",22),this.D&&_i(t,"X-HTTP-Session-Id",this.D),ew(this,t),this.o&&s&&vP(t,this.o,s),gP(this.i,r),this.Ra&&_i(t,"TYPE","init"),this.ja?(_i(t,"$req",e),_i(t,"SID","null"),r.$=!0,dP(r,t,null)):dP(r,t,e),this.G=2}}else 3==this.G&&(n?pj(this,n):0==this.l.length||tj(this.i)||pj(this))},ut.Ga=function(){if(this.u=null,_j(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=j0(es(this.bb,this),n)}},ut.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ks(10),tS(this),_j(this))},ut.ab=function(){null!=this.v&&(this.v=null,tS(this),EP(this),Ks(19))},ut.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ks(2)):(this.h.info("Failed to ping google.com"),Ks(1))},(ut=Cj.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Oa=function(){},rS.prototype.g=function(n,e){return new ea(n,e)},ts(ea,Pr),ea.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),tP(es(n.hb,n,e))),Ks(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=wj(n,null,n.W),nS(n)},ea.prototype.close=function(){bP(this.g)},ea.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,wP(this.g,e)}else this.v?((e={}).__data__=eP(n),wP(this.g,e)):wP(this.g,n)},ea.prototype.M=function(){this.g.j=null,delete this.j,bP(this.g),delete this.g,ea.Z.M.call(this)},ts(Dj,aP),ts(Ij,lP),ts(B_,Cj),B_.prototype.xa=function(){ns(this.g,"a")},B_.prototype.wa=function(n){ns(this.g,new Dj(n))},B_.prototype.va=function(n){ns(this.g,new Ij(n))},B_.prototype.ua=function(){ns(this.g,"b")},rS.prototype.createWebChannel=rS.prototype.g,ea.prototype.send=ea.prototype.u,ea.prototype.open=ea.prototype.m,ea.prototype.close=ea.prototype.close,GT.NO_ERROR=0,GT.TIMEOUT=8,GT.HTTP_ERROR=6,UH.COMPLETE="complete",jH.EventType=$0,$0.OPEN="a",$0.CLOSE="b",$0.ERROR="c",$0.MESSAGE="d",Pr.prototype.listen=Pr.prototype.N,nr.prototype.listenOnce=nr.prototype.O,nr.prototype.getLastError=nr.prototype.La,nr.prototype.getLastErrorCode=nr.prototype.Da,nr.prototype.getStatus=nr.prototype.ba,nr.prototype.getResponseJson=nr.prototype.Qa,nr.prototype.getResponseText=nr.prototype.ga,nr.prototype.send=nr.prototype.ea;var fQ=yd.createWebChannelTransport=function(){return new rS},pQ=yd.getStatEventTarget=function(){return $T()},DP=yd.ErrorCode=GT,mQ=yd.EventType=UH,gQ=yd.Event=pm,Tj=yd.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},_Q=yd.FetchXmlHttpFactory=Y0,sS=yd.WebChannel=jH,yQ=yd.XhrIo=nr;const Sj="@firebase/firestore";class Nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");let U_="9.9.0";const nf=new mo.Yd("@firebase/firestore");function IP(){return nf.logLevel}function Ve(n,...e){if(nf.logLevel<=mo.in.DEBUG){const t=e.map(TP);nf.debug(`Firestore (${U_}): ${n}`,...t)}}function ir(n,...e){if(nf.logLevel<=mo.in.ERROR){const t=e.map(TP);nf.error(`Firestore (${U_}): ${n}`,...t)}}function tw(n,...e){if(nf.logLevel<=mo.in.WARN){const t=e.map(TP);nf.warn(`Firestore (${U_}): ${n}`,...t)}}function TP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${U_}) INTERNAL ASSERTION FAILED: `+n;throw ir(e),new Error(e)}function Ft(n,e){n||dt()}function it(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Aj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nr.UNAUTHENTICATED))}shutdown(){}}class EQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class CQ{constructor(e){this.t=e,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let l=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Fr,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=l;e.enqueueRetryable((0,Ce.Z)(function*(){yield y.promise,yield s(i.currentUser)}))},p=y=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Fr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ft("string"==typeof i.accessToken),new Aj(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new Nr(e)}}class DQ{constructor(e,t,i){this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class IQ{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new DQ(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TQ{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const i=s=>{null!=s.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.p;return this.p=s.token,Ve("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ft("string"==typeof t.token),this.p=t.token,new xj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function SQ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class Mj{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=SQ(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function qt(n,e){return n<e?-1:n>e?1:0}function H_(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function kj(n){return n+"\0"}class yi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yi.fromMillis(Date.now())}static fromDate(e){return yi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new yi(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new yi(0,0))}static max(){return new Rt(new yi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nw{constructor(e,t,i){void 0===t?t=0:t>e.length&&dt(),void 0===i?i=e.length-t:i>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===nw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nw?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),l=t.get(r);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends nw{construct(e,t,i){return new fn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const AQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ji extends nw{construct(e,t,i){return new ji(e,t,i)}static isValidIdentifier(e){return AQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ji.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ji(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ne(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const h=e[r];if("\\"===h){if(r+1===e.length)throw new Ne(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ne(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,r+=2}else"`"===h?(l=!l,r++):"."!==h||l?(i+=h,r++):(s(),r++)}if(s(),l)throw new Ne(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ji(t)}static emptyPath(){return new ji([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(fn.fromString(e))}static fromName(e){return new tt(fn.fromString(e).popFirst(5))}static empty(){return new tt(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new fn(e.slice()))}}class oS{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function SP(n){return n.fields.find(e=>2===e.kind)}function vm(n){return n.fields.filter(e=>2!==e.kind)}oS.UNKNOWN_ID=-1;class aS{constructor(e,t){this.fieldPath=e,this.kind=t}}class iw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new iw(0,ta.min())}}function Rj(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Rt.fromTimestamp(1e9===i?new yi(t+1,0):new yi(t,i));return new ta(r,tt.empty(),e)}function Oj(n){return new ta(n.readTime,n.key,-1)}class ta{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ta(Rt.min(),tt.empty(),-1)}static max(){return new ta(Rt.max(),tt.empty(),-1)}}function AP(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:qt(n.largestBatchId,e.largestBatchId))}const Pj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function rf(n){return xP.apply(this,arguments)}function xP(){return xP=(0,Ce.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==Pj)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),xP.apply(this,arguments)}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,i)=>{t(e)})}static reject(e){return new he((t,i)=>{i(e)})}static waitFor(e){return new he((t,i)=>{let r=0,s=0,l=!1;e.forEach(h=>{++r,h.next(()=>{++s,l&&s===r&&t()},p=>i(p))}),l=!0,s===r&&t()})}static or(e){let t=he.resolve(!1);for(const i of e)t=t.next(r=>r?he.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new he((i,r)=>{const s=e.length,l=new Array(s);let h=0;for(let p=0;p<s;p++){const y=p;t(e[y]).next(E=>{l[y]=E,++h,h===s&&i(l)},E=>r(E))}})}static doWhile(e,t){return new he((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class lS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Fr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new rw(e,t.error)):this.T.resolve()},this.transaction.onerror=i=>{const r=MP(i.target.error);this.T.reject(new rw(e,r))}}static open(e,t,i,r){try{return new lS(t,e.transaction(r,i))}catch(s){throw new rw(t,s)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new MQ(t)}}class Yl{constructor(e,t,i){this.name=e,this.version=t,this.P=i,12.2===Yl.v((0,F.z$)())&&ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),bm(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,F.hl)())return!1;if(Yl.S())return!0;const e=(0,F.z$)(),t=Yl.v(e),i=0<t&&t<10,r=Yl.D(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static D(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}k(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{i(l.target.result)},s.onblocked=()=>{r(new rw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const h=l.target.error;r("VersionError"===h.name?new Ne(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ne(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new rw(e,h))},s.onupgradeneeded=l=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.P.O(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=i=>t.M(i)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,Ce.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.k(e);const p=lS.open(s.db,e,l?"readonly":"readwrite",i),y=r(p).next(E=>(p.R(),E)).catch(E=>(p.abort(E),he.reject(E))).toPromise();return y.catch(()=>{}),yield p.A,y}catch(p){const y=p,E="FirebaseError"!==y.name&&h<3;if(Ve("SimpleDb","Transaction failed with error:",y.message,"Retrying:",E),s.close(),!E)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class xQ{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return bm(this.$.delete())}}class rw extends Ne{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function sf(n){return"IndexedDbTransactionError"===n.name}class MQ{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),bm(i)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),bm(this.store.add(e))}get(e){return bm(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),bm(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),bm(this.store.count())}K(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.G(r,(l,h)=>{s.push(h)}).next(()=>s)}{const r=this.store.getAll(i.range);return new he((s,l)=>{r.onerror=h=>{l(h.target.error)},r.onsuccess=h=>{s(h.target.result)}})}}j(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new he((r,s)=>{i.onerror=l=>{s(l.target.error)},i.onsuccess=l=>{r(l.target.result)}})}W(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.H=!1;const r=this.cursor(i);return this.G(r,(s,l,h)=>h.delete())}J(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.G(r,t)}Y(e){const t=this.cursor({});return new he((i,r)=>{t.onerror=s=>{const l=MP(s.target.error);r(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():i()}):i()}})}G(e,t){const i=[];return new he((r,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void r();const p=new xQ(h),y=t(h.primaryKey,h.value,p);if(y instanceof he){const E=y.catch(I=>(p.done(),he.reject(I)));i.push(E)}p.isDone?r():null===p.U?h.continue():h.continue(p.U)}}).next(()=>he.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bm(n){return new he((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=MP(i.target.error);t(r)}})}let Fj=!1;function MP(n){const e=Yl.v((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Fj||(Fj=!0,setTimeout(()=>{throw i},0)),i}}return n}class kQ{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ce.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(i){sf(i)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield rf(i)}yield t.Z(1)}))}}class RQ{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Ce.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.et(i,e))})()}et(e,t){const i=new Set;let r=t,s=!0;return he.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!i.has(l))return Ve("IndexBackiller",`Processing collection: ${l}`),this.nt(e,l,r).next(h=>{r-=h,i.add(l)});s=!1})).next(()=>t-r)}nt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.st(r,s)).next(h=>(Ve("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}st(e,t){let i=e;return t.changes.forEach((r,s)=>{const l=Oj(s);AP(l,i)>0&&(i=l)}),new ta(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class vo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.it(i),this.rt=i=>t.writeSequenceNumber(i))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Lj(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Vj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}vo.ot=-1;class Pi{constructor(e,t){this.comparator=e,this.root=t||is.EMPTY}insert(e,t){return new Pi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,is.BLACK,null,null))}remove(e){return new Pi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,is.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cS(this.root,e,this.comparator,!1)}getReverseIterator(){return new cS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cS(this.root,e,this.comparator,!0)}}class cS{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class is{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??is.RED,this.left=r??is.EMPTY,this.right=s??is.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new is(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return is.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return is.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,is.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,is.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}is.EMPTY=null,is.RED=!0,is.BLACK=!1,is.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,i,r){return this}insert(n,e,t){return new is(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fn{constructor(e){this.comparator=e,this.data=new Pi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bj(this.data.getIterator())}getIteratorFrom(e){return new Bj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Fn(this.comparator);return t.data=e,t}}class Bj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function j_(n){return n.hasNext()?n.getNext():void 0}class na{constructor(e){this.fields=e,e.sort(ji.comparator)}static empty(){return new na([])}unionWith(e){let t=new Fn(ji.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new na(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return H_(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class fr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new fr(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new fr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fr.EMPTY_BYTE_STRING=new fr("");const PQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function af(n){if(Ft(!!n),"string"==typeof n){let e=0;const t=PQ.exec(n);if(Ft(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ni(n.seconds),nanos:Ni(n.nanos)}}function Ni(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Em(n){return"string"==typeof n?fr.fromBase64String(n):fr.fromUint8Array(n)}function kP(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Uj(n){const e=n.mapValue.fields.__previous_value__;return kP(e)?Uj(e):e}function sw(n){const e=af(n.mapValue.fields.__local_write_time__.timestampValue);return new yi(e.seconds,e.nanos)}class NQ{constructor(e,t,i,r,s,l,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class wd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wd&&e.projectId===this.projectId&&e.database===this.database}}function ow(n){return null==n}function aw(n){return 0===n&&1/n==-1/0}function Hj(n){return"number"==typeof n&&Number.isInteger(n)&&!aw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const lf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},uS={nullValue:"NULL_VALUE"};function Cm(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kP(n)?4:zj(n)?9007199254740991:10:dt()}function su(n,e){if(n===e)return!0;const t=Cm(n);if(t!==Cm(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sw(n).isEqual(sw(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=af(i.timestampValue),l=af(r.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,Em(n.bytesValue).isEqual(Em(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Ni(i.geoPointValue.latitude)===Ni(r.geoPointValue.latitude)&&Ni(i.geoPointValue.longitude)===Ni(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Ni(i.integerValue)===Ni(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Ni(i.doubleValue),l=Ni(r.doubleValue);return s===l?aw(s)===aw(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return H_(n.arrayValue.values||[],e.arrayValue.values||[],su);case 10:return function(i,r){const s=i.mapValue.fields||{},l=r.mapValue.fields||{};if(Lj(s)!==Lj(l))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===l[h]||!su(s[h],l[h])))return!1;return!0}(n,e);default:return dt()}var r}function lw(n,e){return void 0!==(n.values||[]).find(t=>su(t,e))}function cf(n,e){if(n===e)return 0;const t=Cm(n),i=Cm(e);if(t!==i)return qt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qt(n.booleanValue,e.booleanValue);case 2:return function(r,s){const l=Ni(r.integerValue||r.doubleValue),h=Ni(s.integerValue||s.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return jj(n.timestampValue,e.timestampValue);case 4:return jj(sw(n),sw(e));case 5:return qt(n.stringValue,e.stringValue);case 6:return function(r,s){const l=Em(r),h=Em(s);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const l=r.split("/"),h=s.split("/");for(let p=0;p<l.length&&p<h.length;p++){const y=qt(l[p],h[p]);if(0!==y)return y}return qt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const l=qt(Ni(r.latitude),Ni(s.latitude));return 0!==l?l:qt(Ni(r.longitude),Ni(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const l=r.values||[],h=s.values||[];for(let p=0;p<l.length&&p<h.length;++p){const y=cf(l[p],h[p]);if(y)return y}return qt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===lf.mapValue&&s===lf.mapValue)return 0;if(r===lf.mapValue)return 1;if(s===lf.mapValue)return-1;const l=r.fields||{},h=Object.keys(l),p=s.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let E=0;E<h.length&&E<y.length;++E){const I=qt(h[E],y[E]);if(0!==I)return I;const k=cf(l[h[E]],p[y[E]]);if(0!==k)return k}return qt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw dt()}}function jj(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return qt(n,e);const t=af(n),i=af(e),r=qt(t.seconds,i.seconds);return 0!==r?r:qt(t.nanos,i.nanos)}function $_(n){return RP(n)}function RP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=af(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Em(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const l of i.values||[])s?s=!1:r+=",",r+=RP(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",l=!0;for(const h of r)l?l=!1:s+=",",s+=`${h}:${RP(i.fields[h])}`;return s+"}"}(n.mapValue):dt();var e}function Dm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function OP(n){return!!n&&"integerValue"in n}function cw(n){return!!n&&"arrayValue"in n}function $j(n){return!!n&&"nullValue"in n}function Gj(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dS(n){return!!n&&"mapValue"in n}function uw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return wm(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=uw(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function zj(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function FQ(n){return"nullValue"in n?uS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Dm(wd.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function LQ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Dm(wd.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?lf:dt()}function qj(n,e){const t=cf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Wj(n,e){const t=cf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class rs{constructor(e){this.value=e}static empty(){return new rs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!dS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uw(t)}setAll(e){let t=ji.emptyPath(),i={},r=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,r),i={},r=[],t=h.popLast()}l?i[h.lastSegment()]=uw(l):r.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());dS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return su(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];dS(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){wm(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new rs(uw(this.value))}}function Kj(n){const e=[];return wm(n.fields,(t,i)=>{const r=new ji([t]);if(dS(i)){const s=Kj(i.mapValue).fields;if(0===s.length)e.push(r);else for(const l of s)e.push(r.child(l))}else e.push(r)}),new na(e)}class Qn{constructor(e,t,i,r,s,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Qn(e,0,Rt.min(),Rt.min(),rs.empty(),0)}static newFoundDocument(e,t,i){return new Qn(e,1,t,Rt.min(),i,0)}static newNoDocument(e,t){return new Qn(e,2,t,Rt.min(),rs.empty(),0)}static newUnknownDocument(e,t){return new Qn(e,3,t,Rt.min(),rs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class VQ{constructor(e,t=null,i=[],r=[],s=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=l,this.endAt=h,this.ut=null}}function Zj(n,e=null,t=[],i=[],r=null,s=null,l=null){return new VQ(n,e,t,i,r,s,l)}function Im(n){const e=it(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+$_(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),ow(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>$_(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>$_(i)).join(",")),e.ut=t}return e.ut}function dw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!WQ(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((t=n.filters[r]).op!==(i=e.filters[r]).op||!t.field.isEqual(i.field)||!su(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!e$(n.startAt,e.startAt)&&e$(n.endAt,e.endAt)}function hS(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function fS(n,e){return n.filters.filter(t=>t instanceof ss&&t.field.isEqual(e))}function Yj(n,e,t){let i=uS,r=!0;for(const s of fS(n,e)){let l=uS,h=!0;switch(s.op){case"<":case"<=":l=FQ(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,h=!1;break;case"!=":case"not-in":l=uS}qj({value:i,inclusive:r},{value:l,inclusive:h})<0&&(i=l,r=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];qj({value:i,inclusive:r},{value:l,inclusive:t.inclusive})<0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}function Qj(n,e,t){let i=lf,r=!0;for(const s of fS(n,e)){let l=lf,h=!0;switch(s.op){case">=":case">":l=LQ(s.value),h=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,h=!1;break;case"!=":case"not-in":l=lf}Wj({value:i,inclusive:r},{value:l,inclusive:h})>0&&(i=l,r=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];Wj({value:i,inclusive:r},{value:l,inclusive:t.inclusive})>0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}class ss extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,i):new UQ(e,t,i):"array-contains"===t?new $Q(e,i):"in"===t?new GQ(e,i):"not-in"===t?new zQ(e,i):"array-contains-any"===t?new qQ(e,i):new ss(e,t,i)}static ct(e,t,i){return"in"===t?new HQ(e,i):new jQ(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(cf(t,this.value)):null!==t&&Cm(this.value)===Cm(t)&&this.at(cf(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class UQ extends ss{constructor(e,t,i){super(e,t,i),this.key=tt.fromName(i.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.at(t)}}class HQ extends ss{constructor(e,t){super(e,"in",t),this.keys=Xj(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jQ extends ss{constructor(e,t){super(e,"not-in",t),this.keys=Xj(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Xj(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>tt.fromName(i.referenceValue))}class $Q extends ss{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cw(t)&&lw(t.arrayValue,this.value)}}class GQ extends ss{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&lw(this.value.arrayValue,t)}}class zQ extends ss{constructor(e,t){super(e,"not-in",t)}matches(e){if(lw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!lw(this.value.arrayValue,t)}}class qQ extends ss{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>lw(this.value.arrayValue,i))}}class uf{constructor(e,t){this.position=e,this.inclusive=t}}class G_{constructor(e,t="asc"){this.field=e,this.dir=t}}function WQ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Jj(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],l=n.position[r];if(i=s.field.isKeyField()?tt.comparator(tt.fromName(l.referenceValue),t.key):cf(l,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function e$(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!su(n.position[t],e.position[t]))return!1;return!0}class Ed{constructor(e,t=null,i=[],r=[],s=null,l="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=l,this.startAt=h,this.endAt=p,this.lt=null,this.ft=null}}function t$(n,e,t,i,r,s,l,h){return new Ed(n,e,t,i,r,s,l,h)}function z_(n){return new Ed(n)}function PP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function NP(n){for(const e of n.filters)if(e.ht())return e.field;return null}function FP(n){return null!==n.collectionGroup}function q_(n){const e=it(n);if(null===e.lt){e.lt=[];const t=NP(e),i=PP(e);if(null!==t&&null===i)t.isKeyField()||e.lt.push(new G_(t)),e.lt.push(new G_(ji.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new G_(ji.keyField(),s))}}}return e.lt}function nl(n){const e=it(n);if(!e.ft)if("F"===e.limitType)e.ft=Zj(e.path,e.collectionGroup,q_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of q_(e))t.push(new G_(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new uf(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new uf(e.startAt.position,e.startAt.inclusive):null;e.ft=Zj(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.ft}function n$(n,e,t){return new Ed(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hw(n,e){return dw(nl(n),nl(e))&&n.limitType===e.limitType}function i$(n){return`${Im(nl(n))}|lt:${n.limitType}`}function LP(n){return`Query(target=${function BQ(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${$_(i.value)}`;var i}).join(", ")}]`),ow(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>$_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>$_(t)).join(",")),`Target(${e})`}(nl(n))}; limitType=${n.limitType})`}function VP(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):tt.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,l){const h=Jj(r,s,l);return r.inclusive?h<=0:h<0}(t.startAt,q_(t),i)||t.endAt&&!function(r,s,l){const h=Jj(r,s,l);return r.inclusive?h>=0:h>0}(t.endAt,q_(t),i)));var t,i}function r$(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function s$(n){return(e,t)=>{let i=!1;for(const r of q_(n)){const s=ZQ(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function ZQ(n,e,t){const i=n.field.isKeyField()?tt.comparator(e.key,t.key):function(r,s,l){const h=s.data.field(r),p=l.data.field(r);return null!==h&&null!==p?cf(h,p):dt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return dt()}}function o$(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aw(e)?"-0":e}}function a$(n){return{integerValue:""+n}}function l$(n,e){return Hj(e)?a$(e):o$(n,e)}class pS{constructor(){this._=void 0}}function YQ(n,e,t){return n instanceof W_?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof Tm?u$(n,e):n instanceof Sm?d$(n,e):function(i,r){const s=c$(i,r),l=h$(s)+h$(i._t);return OP(s)&&OP(i._t)?a$(l):o$(i.wt,l)}(n,e)}function QQ(n,e,t){return n instanceof Tm?u$(n,e):n instanceof Sm?d$(n,e):t}function c$(n,e){return n instanceof K_?OP(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class W_ extends pS{}class Tm extends pS{constructor(e){super(),this.elements=e}}function u$(n,e){const t=f$(e);for(const i of n.elements)t.some(r=>su(r,i))||t.push(i);return{arrayValue:{values:t}}}class Sm extends pS{constructor(e){super(),this.elements=e}}function d$(n,e){let t=f$(e);for(const i of n.elements)t=t.filter(r=>!su(r,i));return{arrayValue:{values:t}}}class K_ extends pS{constructor(e,t){super(),this.wt=e,this._t=t}}function h$(n){return Ni(n.integerValue||n.doubleValue)}function f$(n){return cw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fw{constructor(e,t){this.field=e,this.transform=t}}class JQ{constructor(e,t){this.version=e,this.transformResults=t}}class Ii{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ii}static exists(e){return new Ii(void 0,e)}static updateTime(e){return new Ii(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class gS{}function p$(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Y_(n.key,Ii.none()):new Z_(n.key,n.data,Ii.none());{const t=n.data,i=rs.empty();let r=new Fn(ji.comparator);for(let s of e.fields)if(!r.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?i.delete(s):i.set(s,l),r=r.add(s)}return new Cd(n.key,i,new na(r.toArray()),Ii.none())}}function eX(n,e,t){n instanceof Z_?function(i,r,s){const l=i.value.clone(),h=_$(i.fieldTransforms,r,s.transformResults);l.setAll(h),r.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Cd?function(i,r,s){if(!mS(i.precondition,r))return void r.convertToUnknownDocument(s.version);const l=_$(i.fieldTransforms,r,s.transformResults),h=r.data;h.setAll(g$(i)),h.setAll(l),r.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function pw(n,e,t,i){return n instanceof Z_?function(r,s,l,h){if(!mS(r.precondition,s))return l;const p=r.value.clone(),y=y$(r.fieldTransforms,h,s);return p.setAll(y),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,i):n instanceof Cd?function(r,s,l,h){if(!mS(r.precondition,s))return l;const p=y$(r.fieldTransforms,h,s),y=s.data;return y.setAll(g$(r)),y.setAll(p),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===l?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(E=>E.field))}(n,e,t,i):(l=t,mS(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function tX(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=c$(i.transform,r||null);null!=s&&(null===t&&(t=rs.empty()),t.set(i.field,s))}return t||null}function m$(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&H_(t,i,(r,s)=>function XQ(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof Tm&&i instanceof Tm||t instanceof Sm&&i instanceof Sm?H_(t.elements,i.elements,su):t instanceof K_&&i instanceof K_?su(t._t,i._t):t instanceof W_&&i instanceof W_);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class Z_ extends gS{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Cd extends gS{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function g$(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function _$(n,e,t){const i=new Map;Ft(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],l=s.transform,h=e.data.field(s.field);i.set(s.field,QQ(l,h,t[r]))}return i}function y$(n,e,t){const i=new Map;for(const r of n){const s=r.transform,l=t.data.field(r.field);i.set(r.field,YQ(s,l,e))}return i}class Y_ extends gS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BP extends gS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nX{constructor(e){this.count=e}}var rr,pn;function v$(n){switch(n){default:return dt();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function b$(n){if(void 0===n)return ir("GRPC error has no .code"),_e.UNKNOWN;switch(n){case rr.OK:return _e.OK;case rr.CANCELLED:return _e.CANCELLED;case rr.UNKNOWN:return _e.UNKNOWN;case rr.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case rr.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case rr.INTERNAL:return _e.INTERNAL;case rr.UNAVAILABLE:return _e.UNAVAILABLE;case rr.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case rr.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case rr.NOT_FOUND:return _e.NOT_FOUND;case rr.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case rr.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case rr.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case rr.ABORTED:return _e.ABORTED;case rr.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case rr.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case rr.DATA_LOSS:return _e.DATA_LOSS;default:return dt()}}(pn=rr||(rr={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";class df{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wm(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return Vj(this.inner)}size(){return this.innerSize}}const iX=new Pi(tt.comparator);function bo(){return iX}const w$=new Pi(tt.comparator);function mw(...n){let e=w$;for(const t of n)e=e.insert(t.key,t);return e}function E$(n){let e=w$;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ou(){return gw()}function C$(){return gw()}function gw(){return new df(n=>n.toString(),(n,e)=>n.isEqual(e))}const rX=new Pi(tt.comparator),sX=new Fn(tt.comparator);function Kt(...n){let e=sX;for(const t of n)e=e.add(t);return e}const oX=new Fn(qt);function _S(){return oX}class _w{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,yw.createSynthesizedTargetChangeForCurrentChange(e,t)),new _w(Rt.min(),i,_S(),bo(),Kt())}}class yw{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new yw(fr.EMPTY_BYTE_STRING,t,Kt(),Kt(),Kt())}}class yS{constructor(e,t,i,r){this.gt=e,this.removedTargetIds=t,this.key=i,this.yt=r}}class D${constructor(e,t){this.targetId=e,this.It=t}}class I${constructor(e,t,i=fr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class T${constructor(){this.Tt=0,this.Et=A$(),this.At=fr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Kt(),t=Kt(),i=Kt();return this.Et.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:dt()}}),new yw(this.At,this.Rt,e,t,i)}Dt(){this.bt=!1,this.Et=A$()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class aX{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=bo(),this.Bt=S$(),this.Lt=new Fn(qt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const i=this.Qt(t);switch(e.state){case 0:this.jt(t)&&i.Vt(e.resumeToken);break;case 1:i.kt(),i.Pt||i.Dt(),i.Vt(e.resumeToken);break;case 2:i.kt(),i.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(i.Ot(),i.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),i.Vt(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((i,r)=>{this.jt(r)&&t(r)})}zt(e){const t=e.targetId,i=e.It.count,r=this.Ht(t);if(r){const s=r.target;if(hS(s))if(0===i){const l=new tt(s.path);this.Kt(t,l,Qn.newNoDocument(l,Rt.min()))}else Ft(1===i);else this.Jt(t)!==i&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((s,l)=>{const h=this.Ht(l);if(h){if(s.current&&hS(h.target)){const p=new tt(h.target.path);null!==this.$t.get(p)||this.Xt(l,p)||this.Kt(l,p,Qn.newNoDocument(p,e))}s.vt&&(t.set(l,s.St()),s.Dt())}});let i=Kt();this.Bt.forEach((s,l)=>{let h=!0;l.forEachWhile(p=>{const y=this.Ht(p);return!y||2===y.purpose||(h=!1,!1)}),h&&(i=i.add(s))}),this.$t.forEach((s,l)=>l.setReadTime(e));const r=new _w(e,t,this.Lt,this.$t,i);return this.$t=bo(),this.Bt=S$(),this.Lt=new Fn(qt),r}qt(e,t){if(!this.jt(e))return;const i=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,i),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,i){if(!this.jt(e))return;const r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),i&&(this.$t=this.$t.insert(t,i))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new T$,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Fn(qt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new T$),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function S$(){return new Pi(tt.comparator)}function A$(){return new Pi(tt.comparator)}const lX={asc:"ASCENDING",desc:"DESCENDING"},cX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class uX{constructor(e,t){this.databaseId=e,this.dt=t}}function vw(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function x$(n,e){return n.dt?e.toBase64():e.toUint8Array()}function dX(n,e){return vw(n,e.toTimestamp())}function Lr(n){return Ft(!!n),Rt.fromTimestamp(function(e){const t=af(e);return new yi(t.seconds,t.nanos)}(n))}function UP(n,e){return(t=n,new fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function M$(n){const e=fn.fromString(n);return Ft(B$(e)),e}function bw(n,e){return UP(n.databaseId,e.path)}function au(n,e){const t=M$(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(R$(t))}function HP(n,e){return UP(n.databaseId,e)}function k$(n){const e=M$(n);return 4===e.length?fn.emptyPath():R$(e)}function ww(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function R$(n){return Ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function O$(n,e,t){return{name:bw(n,e),fields:t.value.mapValue.fields}}function P$(n,e,t){const i=au(n,e.name),r=Lr(e.updateTime),s=new rs({mapValue:{fields:e.fields}}),l=Qn.newFoundDocument(i,r,s);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Ew(n,e){let t;if(e instanceof Z_)t={update:O$(n,e.key,e.value)};else if(e instanceof Y_)t={delete:bw(n,e.key)};else if(e instanceof Cd)t={update:O$(n,e.key,e.data),updateMask:bX(e.fieldMask)};else{if(!(e instanceof BP))return dt();t={verify:bw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const l=s.transform;if(l instanceof W_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Tm)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Sm)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof K_)return{fieldPath:s.field.canonicalString(),increment:l._t};throw dt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:dX(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:dt()),t;var r}function jP(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?Ii.updateTime(Lr(r.updateTime)):void 0!==r.exists?Ii.exists(r.exists):Ii.none():Ii.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,l){let h=null;"setToServerValue"in l?(Ft("REQUEST_TIME"===l.setToServerValue),h=new W_):"appendMissingElements"in l?h=new Tm(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Sm(l.removeAllFromArray.values||[]):"increment"in l?h=new K_(s,l.increment):dt();const p=ji.fromServerFormat(l.fieldPath);return new fw(p,h)}(n,r)):[];var r;if(e.update){const r=au(n,e.update.name),s=new rs({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new na((e.updateMask.fieldPaths||[]).map(y=>ji.fromServerFormat(y)));return new Cd(r,s,l,t,i)}return new Z_(r,s,t,i)}if(e.delete){const r=au(n,e.delete);return new Y_(r,t)}if(e.verify){const r=au(n,e.verify);return new BP(r,t)}return dt()}function N$(n,e){return{documents:[HP(n,e.path)]}}function F$(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=HP(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=HP(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const y=p.map(E=>function(I){if("=="===I.op){if(Gj(I.value))return{unaryFilter:{field:Q_(I.field),op:"IS_NAN"}};if($j(I.value))return{unaryFilter:{field:Q_(I.field),op:"IS_NULL"}}}else if("!="===I.op){if(Gj(I.value))return{unaryFilter:{field:Q_(I.field),op:"IS_NOT_NAN"}};if($j(I.value))return{unaryFilter:{field:Q_(I.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Q_(I.field),op:_X(I.op),value:I.value}}}(E));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);r&&(t.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:Q_((E=y).field),direction:gX(E.dir)};var E})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=(y=e.limit,n.dt||ow(y)?y:{value:y});var y,h,p;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function L$(n){let e=k$(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Ft(1===i);const E=t.from[0];E.allDescendants?r=E.collectionId:e=e.child(E.collectionId)}let s=[];t.where&&(s=V$(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(E=>{return new G_(X_((I=E).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let h=null;t.limit&&(h=function(E){let I;return I="object"==typeof E?E.value:E,ow(I)?null:I}(t.limit));let p=null;var E;t.startAt&&(p=new uf((E=t.startAt).values||[],!!E.before));let y=null;return t.endAt&&(y=function(E){return new uf(E.values||[],!E.before)}(t.endAt)),t$(e,r,l,s,h,"F",p,y)}function V$(n){return n?void 0!==n.unaryFilter?[vX(n)]:void 0!==n.fieldFilter?[yX(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>V$(e)).reduce((e,t)=>e.concat(t)):dt():[]}function gX(n){return lX[n]}function _X(n){return cX[n]}function Q_(n){return{fieldPath:n.canonicalString()}}function X_(n){return ji.fromServerFormat(n.fieldPath)}function yX(n){return ss.create(X_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function vX(n){switch(n.unaryFilter.op){case"IS_NAN":const e=X_(n.unaryFilter.field);return ss.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=X_(n.unaryFilter.field);return ss.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=X_(n.unaryFilter.field);return ss.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=X_(n.unaryFilter.field);return ss.create(r,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function bX(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function B$(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Zs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=U$(e)),e=wX(n.get(t),e);return U$(e)}function wX(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function U$(n){return n+"\x01\x01"}function lu(n){const e=n.length;if(Ft(e>=2),2===e)return Ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&dt(),n.charAt(l+1)){case"\x01":const h=n.substring(s,l);let p;0===r.length?p=h:(r+=h,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,l),r+="\0";break;case"\x11":r+=n.substring(s,l+1);break;default:dt()}s=l+2}return new fn(i)}const H$=["userId","batchId"];function vS(n,e){return[n,Zs(e)]}function j$(n,e,t){return[n,Zs(e),t]}const EX={},CX=["prefixPath","collectionGroup","readTime","documentId"],DX=["prefixPath","collectionGroup","documentId"],IX=["collectionGroup","readTime","prefixPath","documentId"],TX=["canonicalId","targetId"],SX=["targetId","path"],AX=["path","targetId"],xX=["collectionId","parent"],MX=["indexId","uid"],kX=["uid","sequenceNumber"],RX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],OX=["indexId","uid","orderedDocumentKey"],PX=["userId","collectionPath","documentId"],NX=["userId","collectionPath","largestBatchId"],FX=["userId","collectionGroup","largestBatchId"],$$=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],LX=[...$$,"documentOverlays"],G$=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],z$=G$,VX=[...z$,"indexConfiguration","indexState","indexEntries"];class $P extends Nj{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Vr(n,e){const t=it(n);return Yl.N(t.ee,e)}class GP{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&eX(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=pw(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=pw(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=C$();return this.mutations.forEach(r=>{const s=e.get(r.key),l=s.overlayedDocument;let h=this.applyToLocalView(l,s.mutatedFields);h=t.has(r.key)?null:h;const p=p$(l,h);null!==p&&i.set(r.key,p),l.isValidDocument()||l.convertToNoDocument(Rt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kt())}isEqual(e){return this.batchId===e.batchId&&H_(this.mutations,e.mutations,(t,i)=>m$(t,i))&&H_(this.baseMutations,e.baseMutations,(t,i)=>m$(t,i))}}class zP{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ft(e.mutations.length===i.length);let r=rX;const s=e.mutations;for(let l=0;l<s.length;l++)r=r.insert(s[l].key,i[l].version);return new zP(e,t,i,r)}}class qP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class hf{constructor(e,t,i,r,s=Rt.min(),l=Rt.min(),h=fr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new hf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new hf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new hf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class q${constructor(e){this.ne=e}}function W$(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:bS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:bw(r=n.ne,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:vw(r,s.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Am(e.version)};else{if(!e.isUnknownDocument())return dt();i.unknownDocument={path:t.path.toArray(),version:Am(e.version)}}var r,s;return i}function bS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Am(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xm(n){const e=new yi(n.seconds,n.nanoseconds);return Rt.fromTimestamp(e)}function Mm(n,e){const t=(e.baseMutations||[]).map(s=>jP(n.ne,s));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(l.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const i=e.mutations.map(s=>jP(n.ne,s)),r=yi.fromMillis(e.localWriteTimeMs);return new GP(e.batchId,r,t,i)}function Cw(n){const e=xm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?xm(n.lastLimboFreeSnapshotVersion):Rt.min();let i;var r;return void 0!==n.query.documents?(Ft(1===(r=n.query).documents.length),i=nl(z_(k$(r.documents[0])))):i=nl(L$(n.query)),new hf(i,n.targetId,0,n.lastListenSequenceNumber,e,t,fr.fromBase64String(n.resumeToken))}function K$(n,e){const t=Am(e.snapshotVersion),i=Am(e.lastLimboFreeSnapshotVersion);let r;r=hS(e.target)?N$(n.ne,e.target):F$(n.ne,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Im(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function WP(n){const e=L$({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?n$(e,e.limit,"L"):e}function KP(n,e){return new qP(e.largestBatchId,jP(n.ne,e.overlayMutation))}function Z$(n,e){const t=e.path.lastSegment();return[n,Zs(e.path.popLast()),t]}function Y$(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Am(i.readTime),documentKey:Zs(i.documentKey.path),largestBatchId:i.largestBatchId}}class UX{getBundleMetadata(e,t){return Q$(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:xm(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return Q$(e).put({bundleId:(i=t).id,createTime:Am(Lr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return X$(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:WP(r.bundledQuery),readTime:xm(r.readTime)};var r})}saveNamedQuery(e,t){return X$(e).put({name:(i=t).name,readTime:Am(Lr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Q$(n){return Vr(n,"bundles")}function X$(n){return Vr(n,"namedQueries")}class wS{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new wS(e,t.uid||"")}getOverlay(e,t){return Dw(e).get(Z$(this.userId,t)).next(i=>i?KP(this.wt,i):null)}getOverlays(e,t){const i=ou();return he.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,l)=>{const h=new qP(t,l);r.push(this.ie(e,h))}),he.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(l=>r.add(Zs(l.getCollectionPath())));const s=[];return r.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);s.push(Dw(e).W("collectionPathOverlayIndex",h))}),he.waitFor(s)}getOverlaysForCollection(e,t,i){const r=ou(),s=Zs(t),l=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Dw(e).K("collectionPathOverlayIndex",l).next(h=>{for(const p of h){const y=KP(this.wt,p);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=ou();let l;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dw(e).J({index:"collectionGroupOverlayIndex",range:h},(p,y,E)=>{const I=KP(this.wt,y);s.size()<r||I.largestBatchId===l?(s.set(I.getKey(),I),l=I.largestBatchId):E.done()}).next(()=>s)}ie(e,t){return Dw(e).put(function(i,r,s){const[l,h,p]=Z$(r,s.mutation.key);return{userId:r,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ew(i.ne,s.mutation)}}(this.wt,this.userId,t))}}function Dw(n){return Vr(n,"documentOverlays")}class km{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Ni(e.integerValue));else if("doubleValue"in e){const i=Ni(e.doubleValue);isNaN(i)?this.ce(t,13):(this.ce(t,15),aw(i)?t.ae(0):t.ae(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ce(t,20),"string"==typeof i?t.he(i):(t.he(`${i.seconds||""}`),t.ae(i.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Em(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?zj(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):dt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const i=e.fields||{};this.ce(t,55);for(const r of Object.keys(i))this.le(r,t),this.oe(i[r],t)}me(e,t){const i=e.values||[];this.ce(t,50);for(const r of i)this.oe(r,t)}_e(e,t){this.ce(t,37),tt.fromName(e).path.forEach(i=>{this.ce(t,60),this.ge(i,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function HX(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function J$(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=HX(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}km.ye=new km;class jX{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ie(i.value),i=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ae(i.value),i=t.next();this.Re()}be(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{const r=t.codePointAt(0);this.Ie(240|r>>>18),this.Ie(128|63&r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r)}}this.Te()}Pe(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=t.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}ve(e){const t=this.Ve(e),i=J$(t);this.Se(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}De(e){const t=this.Ve(e),i=J$(t);this.Se(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class $X{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class GX{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Iw{constructor(){this.Me=new jX,this.Fe=new $X(this.Me),this.$e=new GX(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Rm{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Rm(this.indexId,this.documentKey,this.arrayValue,i)}}function Om(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=eG(n.arrayValue,e.arrayValue),0!==t?t:(t=eG(n.directionalValue,e.directionalValue),0!==t?t:tt.comparator(n.documentKey,e.documentKey)))}function eG(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class zX{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const i=t;i.ht()?this.Ke=i:this.qe.push(i)}}Ge(e){const t=SP(e);if(void 0!==t&&!this.Qe(t))return!1;const i=vm(e);let r=0,s=0;for(;r<i.length&&this.Qe(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Ke){const l=i[r];if(!this.je(this.Ke,l)||!this.We(this.Ue[s++],l))return!1;++r}for(;r<i.length;++r){const l=i[r];if(s>=this.Ue.length||!this.We(this.Ue[s++],l))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class qX{constructor(){this.ze=new ZP}addToCollectionParentIndex(e,t){return this.ze.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(ta.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(ta.min())}updateCollectionGroup(e,t,i){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class ZP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Fn(fn.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Fn(fn.comparator)).toArray()}}const ES=new Uint8Array(0);class WX{constructor(e,t){this.user=e,this.databaseId=t,this.He=new ZP,this.Je=new df(i=>Im(i),(i,r)=>dw(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const s={collectionId:i,parent:Zs(r)};return tG(e).put(s)}return he.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[kj(t),""],!1,!0);return tG(e).K(r).next(s=>{for(const l of s){if(l.collectionId!==t)break;i.push(lu(l.parent))}return i})}addFieldIndex(e,t){const i=CS(e),r={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete r.indexId;const s=i.add(r);if(t.indexState){const l=Sw(e);return s.next(h=>{l.put(Y$(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=CS(e),r=Sw(e),s=Tw(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Tw(e);let r=!0;const s=new Map;return he.forEach(this.Ye(t),l=>this.Xe(e,l).next(h=>{r&&(r=!!h),s.set(l,h)})).next(()=>{if(r){let l=Kt();const h=[];return he.forEach(s,(p,y)=>{var E;Ve("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(nt=>`${nt.fieldPath}:${nt.kind}`).join(",")}`} to execute ${Im(t)}`);const I=function(nt,Qe){const St=SP(Qe);if(void 0===St)return null;for(const Ot of fS(nt,St.fieldPath))switch(Ot.op){case"array-contains-any":return Ot.value.arrayValue.values||[];case"array-contains":return[Ot.value]}return null}(y,p),k=function(nt,Qe){const St=new Map;for(const Ot of vm(Qe))for(const an of fS(nt,Ot.fieldPath))switch(an.op){case"==":case"in":St.set(Ot.fieldPath.canonicalString(),an.value);break;case"not-in":case"!=":return St.set(Ot.fieldPath.canonicalString(),an.value),Array.from(St.values())}return null}(y,p),N=function(nt,Qe){const St=[];let Ot=!0;for(const an of vm(Qe)){const $i=0===an.kind?Yj(nt,an.fieldPath,nt.startAt):Qj(nt,an.fieldPath,nt.startAt);St.push($i.value),Ot&&(Ot=$i.inclusive)}return new uf(St,Ot)}(y,p),U=function(nt,Qe){const St=[];let Ot=!0;for(const an of vm(Qe)){const $i=0===an.kind?Qj(nt,an.fieldPath,nt.endAt):Yj(nt,an.fieldPath,nt.endAt);St.push($i.value),Ot&&(Ot=$i.inclusive)}return new uf(St,Ot)}(y,p),J=this.Ze(p,y,N),ce=this.Ze(p,y,U),Ue=this.tn(p,y,k),Ke=this.en(p.indexId,I,J,N.inclusive,ce,U.inclusive,Ue);return he.forEach(Ke,nt=>i.j(nt,t.limit).next(Qe=>{Qe.forEach(St=>{const Ot=tt.fromSegments(St.documentKey);l.has(Ot)||(l=l.add(Ot),h.push(Ot))})}))}).next(()=>h)}return he.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,i,r,s,l,h){const p=(null!=t?t.length:1)*Math.max(i.length,s.length),y=p/(null!=t?t.length:1),E=[];for(let I=0;I<p;++I){const k=t?this.nn(t[I/y]):ES,N=this.sn(e,k,i[I%y],r),U=this.rn(e,k,s[I%y],l),J=h.map(ce=>this.sn(e,k,ce,!0));E.push(...this.createRange(N,U,J))}return E}sn(e,t,i,r){const s=new Rm(e,tt.empty(),t,i);return r?s:s.Le()}rn(e,t,i,r){const s=new Rm(e,tt.empty(),t,i);return r?s.Le():s}Xe(e,t){const i=new zX(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let l=null;for(const h of s)i.Ge(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let i=2;return he.forEach(this.Ye(t),r=>this.Xe(e,r).next(s=>{s?0!==i&&s.fields.length<function(l){let h=new Fn(ji.comparator),p=!1;for(const y of l.filters){const E=y;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?p=!0:h=h.add(E.field))}for(const y of l.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}on(e,t){const i=new Iw;for(const r of vm(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const l=i.Be(r.kind);km.ye.re(s,l)}return i.Oe()}nn(e){const t=new Iw;return km.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const i=new Iw;return km.ye.re(Dm(this.databaseId,t),i.Be(function(r){const s=vm(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.Oe()}tn(e,t,i){if(null===i)return[];let r=[];r.push(new Iw);let s=0;for(const l of vm(e)){const h=i[s++];for(const p of r)if(this.cn(t,l.fieldPath)&&cw(h))r=this.an(r,l,h);else{const y=p.Be(l.kind);km.ye.re(h,y)}}return this.hn(r)}Ze(e,t,i){return this.tn(e,t,i.position)}hn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Oe();return t}an(e,t,i){const r=[...e],s=[];for(const l of i.arrayValue.values||[])for(const h of r){const p=new Iw;p.seed(h.Oe()),km.ye.re(l,p.Be(t.kind)),s.push(p)}return s}cn(e,t){return!!e.filters.find(i=>i instanceof ss&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=CS(e),r=Sw(e);return(t?i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.K()).next(s=>{const l=[];return he.forEach(s,h=>r.get([h.indexId,this.uid]).next(p=>{l.push(function(y,E){const I=E?new iw(E.sequenceNumber,new ta(xm(E.readTime),new tt(lu(E.documentKey)),E.largestBatchId)):iw.empty(),k=y.fields.map(([N,U])=>new aS(ji.fromServerFormat(N),U));return new oS(y.indexId,y.collectionGroup,k,I)}(h,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:qt(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=CS(e),s=Sw(e);return this.ln(e).next(l=>r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>he.forEach(h,p=>s.put(Y$(p.indexId,this.user,l,i)))))}updateIndexEntries(e,t){const i=new Map;return he.forEach(t,(r,s)=>{const l=i.get(r.collectionGroup);return(l?he.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next(h=>(i.set(r.collectionGroup,h),he.forEach(h,p=>this.fn(e,r,p).next(y=>{const E=this.dn(s,p);return y.isEqual(E)?he.resolve():this._n(e,s,p,y,E)}))))})}wn(e,t,i,r){return Tw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(i,t.key),documentKey:t.key.path.toArray()})}mn(e,t,i,r){return Tw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(i,t.key),t.key.path.toArray()])}fn(e,t,i){const r=Tw(e);let s=new Fn(Om);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.un(i,t)])},(l,h)=>{s=s.add(new Rm(i.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}dn(e,t){let i=new Fn(Om);const r=this.on(t,e);if(null==r)return i;const s=SP(t);if(null!=s){const l=e.data.field(s.fieldPath);if(cw(l))for(const h of l.arrayValue.values||[])i=i.add(new Rm(t.indexId,e.key,this.nn(h),r))}else i=i.add(new Rm(t.indexId,e.key,ES,r));return i}_n(e,t,i,r,s){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,p,y,E,I){const k=h.getIterator(),N=p.getIterator();let U=j_(k),J=j_(N);for(;U||J;){let ce=!1,Ue=!1;if(U&&J){const Ke=y(U,J);Ke<0?Ue=!0:Ke>0&&(ce=!0)}else null!=U?Ue=!0:ce=!0;ce?(E(J),J=j_(N)):Ue?(I(U),U=j_(k)):(U=j_(k),J=j_(N))}}(r,s,Om,h=>{l.push(this.wn(e,t,i,h))},h=>{l.push(this.mn(e,t,i,h))}),he.waitFor(l)}ln(e){let t=1;return Sw(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((l,h)=>Om(l,h)).filter((l,h,p)=>!h||0!==Om(l,p[h-1]));const r=[];r.push(e);for(const l of i){const h=Om(l,e),p=Om(l,t);if(0===h)r[0]=e.Le();else if(h>0&&p<0)r.push(l),r.push(l.Le());else if(p>0)break}r.push(t);const s=[];for(let l=0;l<r.length;l+=2)s.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,ES,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,ES,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nG)}getMinOffset(e,t){return he.mapArray(this.Ye(t),i=>this.Xe(e,i).next(r=>r||dt())).next(nG)}}function tG(n){return Vr(n,"collectionParents")}function Tw(n){return Vr(n,"indexEntries")}function CS(n){return Vr(n,"indexConfiguration")}function Sw(n){return Vr(n,"indexState")}function nG(n){Ft(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;AP(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new ta(e.readTime,e.documentKey,t)}const iG={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wo{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new wo(e,wo.DEFAULT_COLLECTION_PERCENTILE,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function rG(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let h=0;const p=i.J({range:l},(E,I,k)=>(h++,k.delete()));s.push(p.next(()=>{Ft(1===h)}));const y=[];for(const E of t.mutations){const I=j$(e,E.key.path,t.batchId);s.push(r.delete(I)),y.push(E.key)}return he.waitFor(s).next(()=>y)}function DS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}wo.DEFAULT_COLLECTION_PERCENTILE=10,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wo.DEFAULT=new wo(41943040,wo.DEFAULT_COLLECTION_PERCENTILE,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wo.DISABLED=new wo(-1,0,0);class IS{constructor(e,t,i,r){this.userId=e,this.wt=t,this.indexManager=i,this.referenceDelegate=r,this.gn={}}static se(e,t,i,r){Ft(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new IS(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ff(e).J({index:"userMutationsIndex",range:i},(r,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=J_(e),l=ff(e);return l.add({}).next(h=>{Ft("number"==typeof h);const p=new GP(h,t,i,r),y=function(k,N,U){const J=U.baseMutations.map(Ue=>Ew(k.ne,Ue)),ce=U.mutations.map(Ue=>Ew(k.ne,Ue));return{userId:N,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:J,mutations:ce}}(this.wt,this.userId,p),E=[];let I=new Fn((k,N)=>qt(k.canonicalString(),N.canonicalString()));for(const k of r){const N=j$(this.userId,k.key.path,h);I=I.add(k.key.path.popLast()),E.push(l.put(y)),E.push(s.put(N,EX))}return I.forEach(k=>{E.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.gn[h]=p.keys()}),he.waitFor(E).next(()=>p)})}lookupMutationBatch(e,t){return ff(e).get(t).next(i=>i?(Ft(i.userId===this.userId),Mm(this.wt,i)):null)}yn(e,t){return this.gn[t]?he.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.gn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ff(e).J({index:"userMutationsIndex",range:r},(l,h,p)=>{h.userId===this.userId&&(Ft(h.batchId>=i),s=Mm(this.wt,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ff(e).J({index:"userMutationsIndex",range:t,reverse:!0},(r,s,l)=>{i=s.batchId,l.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ff(e).K("userMutationsIndex",t).next(i=>i.map(r=>Mm(this.wt,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=vS(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return J_(e).J({range:r},(l,h,p)=>{const[y,E,I]=l,k=lu(E);if(y===this.userId&&t.path.isEqual(k))return ff(e).get(I).next(N=>{if(!N)throw dt();Ft(N.userId===this.userId),s.push(Mm(this.wt,N))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Fn(qt);const r=[];return t.forEach(s=>{const l=vS(this.userId,s.path),h=IDBKeyRange.lowerBound(l),p=J_(e).J({range:h},(y,E,I)=>{const[k,N,U]=y,J=lu(N);k===this.userId&&s.path.isEqual(J)?i=i.add(U):I.done()});r.push(p)}),he.waitFor(r).next(()=>this.pn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=vS(this.userId,i),l=IDBKeyRange.lowerBound(s);let h=new Fn(qt);return J_(e).J({range:l},(p,y,E)=>{const[I,k,N]=p,U=lu(k);I===this.userId&&i.isPrefixOf(U)?U.length===r&&(h=h.add(N)):E.done()}).next(()=>this.pn(e,h))}pn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(ff(e).get(s).next(l=>{if(null===l)throw dt();Ft(l.userId===this.userId),i.push(Mm(this.wt,l))}))}),he.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return rG(e.ee,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),he.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return J_(e).J({range:i},(s,l,h)=>{if(s[0]===this.userId){const p=lu(s[1]);r.push(p)}else h.done()}).next(()=>{Ft(0===r.length)})})}containsKey(e,t){return sG(e,this.userId,t)}Tn(e){return oG(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sG(n,e,t){const i=vS(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let l=!1;return J_(n).J({range:s,H:!0},(h,p,y)=>{const[E,I,k]=h;E===e&&I===r&&(l=!0),y.done()}).next(()=>l)}function ff(n){return Vr(n,"mutations")}function J_(n){return Vr(n,"documentMutations")}function oG(n){return Vr(n,"mutationQueues")}class Pm{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Pm(0)}static Rn(){return new Pm(-1)}}class KX{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const i=new Pm(t.highestTargetId);return t.highestTargetId=i.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Rt.fromTimestamp(new yi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.bn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Pn(e,r)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(i=>(i.targetCount+=1,this.Vn(t,i),this.Pn(e,i))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ey(e).delete(t.targetId)).next(()=>this.bn(e)).next(i=>(Ft(i.targetCount>0),i.targetCount-=1,this.Pn(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return ey(e).J((l,h)=>{const p=Cw(h);p.sequenceNumber<=t&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(e,p)))}).next(()=>he.waitFor(s)).next(()=>r)}forEachTarget(e,t){return ey(e).J((i,r)=>{const s=Cw(r);t(s)})}bn(e){return aG(e).get("targetGlobalKey").next(t=>(Ft(null!==t),t))}Pn(e,t){return aG(e).put("targetGlobalKey",t)}vn(e,t){return ey(e).put(K$(this.wt,t))}Vn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Im(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return ey(e).J({range:r,index:"queryTargetsIndex"},(l,h,p)=>{const y=Cw(h);dw(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=pf(e);return t.forEach(l=>{const h=Zs(l.path);r.push(s.put({targetId:i,path:h})),r.push(this.referenceDelegate.addReference(e,i,l))}),he.waitFor(r)}removeMatchingKeys(e,t,i){const r=pf(e);return he.forEach(t,s=>{const l=Zs(s.path);return he.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=pf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=pf(e);let s=Kt();return r.J({range:i,H:!0},(l,h,p)=>{const y=lu(l[1]),E=new tt(y);s=s.add(E)}).next(()=>s)}containsKey(e,t){const i=Zs(t.path),r=IDBKeyRange.bound([i],[kj(i)],!1,!0);let s=0;return pf(e).J({index:"documentTargetsIndex",H:!0,range:r},([l,h],p,y)=>{0!==l&&(s++,y.done())}).next(()=>s>0)}te(e,t){return ey(e).get(t).next(i=>i?Cw(i):null)}}function ey(n){return Vr(n,"targets")}function aG(n){return Vr(n,"targetGlobal")}function pf(n){return Vr(n,"targetDocuments")}function lG([n,e],[t,i]){const r=qt(n,t);return 0===r?qt(e,i):r}class ZX{constructor(e){this.Sn=e,this.buffer=new Fn(lG),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();lG(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YX{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ce.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){sf(i)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield rf(i)}yield t.kn(3e5)}))}}class QX{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return he.resolve(vo.ot);const i=new ZX(t);return this.On.forEachTarget(e,r=>i.xn(r.sequenceNumber)).next(()=>this.On.Fn(e,r=>i.xn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.On.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(iG)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iG):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let i,r,s,l,h,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),r=this.params.maximumSequenceNumbersToCollect):r=I,l=Date.now(),this.nthSequenceNumber(e,r))).next(I=>(i=I,h=Date.now(),this.removeTargets(e,i,t))).next(I=>(s=I,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(I=>(y=Date.now(),IP()<=mo.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-E}ms\n\tDetermined least recently used ${r} in `+(h-l)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${I} documents in `+(y-p)+`ms\nTotal Duration: ${y-E}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:I})))}}class XX{constructor(e,t){this.db=e,this.garbageCollector=new QX(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Bn(e){let t=0;return this.Fn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(i,r)=>t(r))}addReference(e,t,i){return TS(e,i)}removeReference(e,t,i){return TS(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return TS(e,t)}Un(e,t){return function(i,r){let s=!1;return oG(i).Y(l=>sG(i,l,r).next(h=>(h&&(s=!0),he.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Ln(e,(l,h)=>{if(h<=t){const p=this.Un(e,l).next(y=>{if(!y)return s++,i.getEntry(e,l).next(()=>(i.removeEntry(l,Rt.min()),pf(e).delete([0,Zs(l.path)])))});r.push(p)}}).next(()=>he.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return TS(e,t)}Ln(e,t){const i=pf(e);let r,s=vo.ot;return i.J({index:"documentTargetsIndex"},([l,h],{path:p,sequenceNumber:y})=>{0===l?(s!==vo.ot&&t(new tt(lu(r)),s),s=y,r=p):s=vo.ot}).next(()=>{s!==vo.ot&&t(new tt(lu(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function TS(n,e){return pf(n).put((i=n.currentSequenceNumber,{targetId:0,path:Zs(e.path),sequenceNumber:i}));var i}class cG{constructor(){this.changes=new df(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?he.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class JX{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Nm(e).put(i)}removeEntry(e,t,i){return Nm(e).delete(function(r,s){const l=r.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],bS(s),l[l.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.qn(e,i)))}getEntry(e,t){let i=Qn.newInvalidDocument(t);return Nm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Aw(t))},(r,s)=>{i=this.Kn(t,s)}).next(()=>i)}Gn(e,t){let i={size:0,document:Qn.newInvalidDocument(t)};return Nm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Aw(t))},(r,s)=>{i={document:this.Kn(t,s),size:DS(s)}}).next(()=>i)}getEntries(e,t){let i=bo();return this.Qn(e,t,(r,s)=>{const l=this.Kn(r,s);i=i.insert(r,l)}).next(()=>i)}jn(e,t){let i=bo(),r=new Pi(tt.comparator);return this.Qn(e,t,(s,l)=>{const h=this.Kn(s,l);i=i.insert(s,h),r=r.insert(s,DS(l))}).next(()=>({documents:i,Wn:r}))}Qn(e,t,i){if(t.isEmpty())return he.resolve();let r=new Fn(fG);t.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(Aw(r.first()),Aw(r.last())),l=r.getIterator();let h=l.getNext();return Nm(e).J({index:"documentKeyIndex",range:s},(p,y,E)=>{const I=tt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&fG(h,I)<0;)i(h,null),h=l.getNext();h&&h.isEqual(I)&&(i(h,y),h=l.hasNext()?l.getNext():null),h?E.q(Aw(h)):E.done()}).next(()=>{for(;h;)i(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,i){const r=[t.popLast().toArray(),t.lastSegment(),bS(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nm(e).K(IDBKeyRange.bound(r,s,!0)).next(l=>{let h=bo();for(const p of l){const y=this.Kn(tt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,i,r){let s=bo();const l=hG(t,i),h=hG(t,ta.max());return Nm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(p,y,E)=>{const I=this.Kn(tt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(I.key,I),s.size===r&&E.done()}).next(()=>s)}newChangeBuffer(e){return new eJ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dG(e).get("remoteDocumentGlobalKey").next(t=>(Ft(!!t),t))}qn(e,t){return dG(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const i=function BX(n,e){let t;if(e.document)t=P$(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=tt.fromSegments(e.noDocument.path),r=xm(e.noDocument.readTime);t=Qn.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const i=tt.fromSegments(e.unknownDocument.path),r=xm(e.unknownDocument.version);t=Qn.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new yi(i[0],i[1]);return Rt.fromTimestamp(r)}(e.readTime)),t}(this.wt,t);if(!i.isNoDocument()||!i.version.isEqual(Rt.min()))return i}return Qn.newInvalidDocument(e)}}function uG(n){return new JX(n)}class eJ extends cG{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new df(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new Fn((s,l)=>qt(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const h=this.Hn.get(s);if(t.push(this.zn.removeEntry(e,s,h.readTime)),l.isValidDocument()){const p=W$(this.zn.wt,l);r=r.add(s.path.popLast()),i+=DS(p)-h.size,t.push(this.zn.addEntry(e,s,p))}else if(i-=h.size,this.trackRemovals){const p=W$(this.zn.wt,l.convertToNoDocument(Rt.min()));t.push(this.zn.addEntry(e,s,p))}}),r.forEach(s=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.zn.updateMetadata(e,i)),he.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(i=>(this.Hn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:i,Wn:r})=>(r.forEach((s,l)=>{this.Hn.set(s,{size:l,readTime:i.get(s).readTime})}),i))}}function dG(n){return Vr(n,"remoteDocumentGlobal")}function Nm(n){return Vr(n,"remoteDocumentsV14")}function Aw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hG(n,e){const t=e.documentKey.path.toArray();return[n,bS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fG(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=qt(t[s],i[s]),r)return r;return r=qt(t.length,i.length),r||(r=qt(t[t.length-2],i[i.length-2]),r||qt(t[t.length-1],i[i.length-1]))}class tJ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pG{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.getBaseDocument(e,t,i))).next(r=>(null!==i&&pw(i.mutation,r,na.empty(),yi.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Kt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Kt()){const r=ou();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let l=mw();return s.forEach((h,p)=>{l=l.insert(h,p.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const i=ou();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Kt()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,i,r){let s=bo();const l=gw(),h=gw();return t.forEach((p,y)=>{const E=i.get(y.key);r.has(y.key)&&(void 0===E||E.mutation instanceof Cd)?s=s.insert(y.key,y):void 0!==E&&(l.set(y.key,E.mutation.getFieldMask()),pw(E.mutation,y,E.mutation.getFieldMask(),yi.now()))}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((y,E)=>l.set(y,E)),t.forEach((y,E)=>{var I;return h.set(y,new tJ(E,null!==(I=l.get(y))&&void 0!==I?I:null))}),h))}recalculateAndSaveOverlays(e,t){const i=gw();let r=new Pi((l,h)=>l-h),s=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let E=i.get(p)||na.empty();E=h.applyToLocalView(y,E),i.set(p,E);const I=(r.get(h.batchId)||Kt()).add(p);r=r.insert(h.batchId,I)})}).next(()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,E=p.value,I=C$();E.forEach(k=>{if(!s.has(k)){const N=p$(t.get(k),i.get(k));null!==N&&I.set(k,N),s=s.add(k)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,I))}return he.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return tt.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):FP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const l=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):he.resolve(ou());let h=-1,p=s;return l.next(y=>he.forEach(y,(E,I)=>(h<I.largestBatchId&&(h=I.largestBatchId),s.get(E)?he.resolve():this.getBaseDocument(e,E,I).next(k=>{p=p.insert(E,k)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,p,y,Kt())).next(E=>({batchId:h,changes:E$(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next(i=>{let r=mw();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=mw();return this.indexManager.getCollectionParents(e,r).next(l=>he.forEach(l,h=>{const p=(y=t,E=h.child(r),new Ed(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.getDocumentsMatchingCollectionQuery(e,p,i).next(y=>{y.forEach((E,I)=>{s=s.insert(E,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(s=>{s.forEach((h,p)=>{const y=p.getKey();null===r.get(y)&&(r=r.insert(y,Qn.newInvalidDocument(y)))});let l=mw();return r.forEach((h,p)=>{const y=s.get(h);void 0!==y&&pw(y.mutation,p,na.empty(),yi.now()),VP(t,p)&&(l=l.insert(h,p))}),l})}getBaseDocument(e,t,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(e,t):he.resolve(Qn.newInvalidDocument(t))}}class nJ{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return he.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var i;return this.Jn.set(t.id,{id:(i=t).id,version:i.version,createTime:Lr(i.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(i=t).name,query:WP(i.bundledQuery),readTime:Lr(i.readTime)}),he.resolve();var i}}class iJ{constructor(){this.overlays=new Pi(tt.comparator),this.Xn=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ou();return he.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ie(e,t,s)}),he.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Xn.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(i)),he.resolve()}getOverlaysForCollection(e,t,i){const r=ou(),s=t.length+1,l=new tt(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return he.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Pi((y,E)=>y-E);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let E=s.get(y.largestBatchId);null===E&&(E=ou(),s=s.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const h=ou(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>h.set(y,E)),!(h.size()>=r)););return he.resolve(h)}ie(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const l=this.Xn.get(r.largestBatchId).delete(i.key);this.Xn.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new qP(t,i));let s=this.Xn.get(t);void 0===s&&(s=Kt(),this.Xn.set(t,s)),this.Xn.set(t,s.add(i.key))}}class YP{constructor(){this.Zn=new Fn(Br.ts),this.es=new Fn(Br.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const i=new Br(e,t);this.Zn=this.Zn.add(i),this.es=this.es.add(i)}ss(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.rs(new Br(e,t))}os(e,t){e.forEach(i=>this.removeReference(i,t))}us(e){const t=new tt(new fn([])),i=new Br(t,e),r=new Br(t,e+1),s=[];return this.es.forEachInRange([i,r],l=>{this.rs(l),s.push(l.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new tt(new fn([])),i=new Br(t,e),r=new Br(t,e+1);let s=Kt();return this.es.forEachInRange([i,r],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new Br(e,0),i=this.Zn.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Br{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return tt.comparator(e.key,t.key)||qt(e.ls,t.ls)}static ns(e,t){return qt(e.ls,t.ls)||tt.comparator(e.key,t.key)}}class rJ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Fn(Br.ts)}checkEmpty(e){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.fs;this.fs++;const l=new GP(s,t,i,r);this.mutationQueue.push(l);for(const h of r)this.ds=this.ds.add(new Br(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return he.resolve(l)}lookupMutationBatch(e,t){return he.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.ws(t+1),s=r<0?0:r;return he.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Br(t,0),r=new Br(t,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([i,r],l=>{const h=this._s(l.ls);s.push(h)}),he.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Fn(qt);return t.forEach(r=>{const s=new Br(r,0),l=new Br(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,l],h=>{i=i.add(h.ls)})}),he.resolve(this.gs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;tt.isDocumentKey(s)||(s=s.child(""));const l=new Br(new tt(s),0);let h=new Fn(qt);return this.ds.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(h=h.add(p.ls)),!0)},l),he.resolve(this.gs(h))}gs(e){const t=[];return e.forEach(i=>{const r=this._s(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Ft(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let i=this.ds;return he.forEach(t.mutations,r=>{const s=new Br(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=i})}In(e){}containsKey(e,t){const i=new Br(t,0),r=this.ds.firstAfterOrEqual(i);return he.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return he.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class sJ{constructor(e){this.ps=e,this.docs=new Pi(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,l=this.ps(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return he.resolve(i?i.document.mutableCopy():Qn.newInvalidDocument(t))}getEntries(e,t){let i=bo();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Qn.newInvalidDocument(r))}),he.resolve(i)}getAllFromCollection(e,t,i){let r=bo();const s=new tt(t.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:h,value:{document:p}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||AP(Oj(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return he.resolve(r)}getAllFromCollectionGroup(e,t,i,r){dt()}Is(e,t){return he.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new oJ(this)}getSize(e){return he.resolve(this.size)}}class oJ extends cG{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.zn.addEntry(e,r)):this.zn.removeEntry(i)}),he.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class aJ{constructor(e){this.persistence=e,this.Ts=new df(t=>Im(t),dw),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.Es=0,this.As=new YP,this.targetCount=0,this.Rs=Pm.An()}forEachTarget(e,t){return this.Ts.forEach((i,r)=>t(r)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Es&&(this.Es=t),he.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Pm(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.vn(t),he.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Ts.forEach((l,h)=>{h.sequenceNumber<=t&&null===i.get(h.targetId)&&(this.Ts.delete(l),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),he.waitFor(s).next(()=>r)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const i=this.Ts.get(t)||null;return he.resolve(i)}addMatchingKeys(e,t,i){return this.As.ss(t,i),he.resolve()}removeMatchingKeys(e,t,i){this.As.os(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(l=>{s.push(r.markPotentiallyOrphaned(e,l))}),he.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),he.resolve()}getMatchingKeysForTargetId(e,t){const i=this.As.hs(t);return he.resolve(i)}containsKey(e,t){return he.resolve(this.As.containsKey(t))}}class mG{constructor(e,t){this.bs={},this.overlays={},this.Ps=new vo(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new aJ(this),this.indexManager=new qX,this.remoteDocumentCache=new sJ(i=>this.referenceDelegate.Ss(i)),this.wt=new q$(t),this.Ds=new nJ(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iJ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.bs[e.toKey()];return i||(i=new rJ(t,this.referenceDelegate),this.bs[e.toKey()]=i),i}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,i){Ve("MemoryPersistence","Starting transaction:",e);const r=new lJ(this.Ps.next());return this.referenceDelegate.Cs(),i(r).next(s=>this.referenceDelegate.xs(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ns(e,t){return he.or(Object.values(this.bs).map(i=>()=>i.containsKey(e,t)))}}class lJ extends Nj{constructor(e){super(),this.currentSequenceNumber=e}}class SS{constructor(e){this.persistence=e,this.ks=new YP,this.Os=null}static Ms(e){return new SS(e)}get Fs(){if(this.Os)return this.Os;throw dt()}addReference(e,t,i){return this.ks.addReference(i,t),this.Fs.delete(i.toString()),he.resolve()}removeReference(e,t,i){return this.ks.removeReference(i,t),this.Fs.add(i.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),he.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(r=>this.Fs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Fs.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Fs,i=>{const r=tt.fromPath(i);return this.$s(e,r).next(s=>{s||t.removeEntry(r,Rt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(i=>{i?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return he.or([()=>he.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class cJ{constructor(e){this.wt=e}O(e,t,i,r){const s=new lS("createOrUpgrade",t);var h;i<1&&r>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",H$,{unique:!0}),h.createObjectStore("documentMutations"),gG(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=he.resolve();return i<3&&r>=3&&(0!==i&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),gG(e)),l=l.next(()=>function(h){const p=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Rt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),i<4&&r>=4&&(0!==i&&(l=l.next(()=>function(h,p){return p.store("mutations").K().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",H$,{unique:!0});const E=p.store("mutations"),I=y.map(k=>E.put(k));return he.waitFor(I)})}(e,s))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(l=l.next(()=>this.Bs(s))),i<6&&r>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(s)))),i<7&&r>=7&&(l=l.next(()=>this.Us(s))),i<8&&r>=8&&(l=l.next(()=>this.qs(e,s))),i<9&&r>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(l=l.next(()=>this.Ks(s))),i<11&&r>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(l=l.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:PX});p.createIndex("collectionPathOverlayIndex",NX,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",FX,{unique:!1})}(e)})),i<13&&r>=13&&(l=l.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:CX});p.createIndex("documentKeyIndex",DX),p.createIndex("collectionGroupIndex",IX)}(e)).next(()=>this.Gs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(l=l.next(()=>this.Qs(e,s))),i<15&&r>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:MX}).createIndex("sequenceNumberIndex",kX,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:RX}).createIndex("documentKeyIndex",OX,{unique:!1})}(e))),l}Ls(e){let t=0;return e.store("remoteDocuments").J((i,r)=>{t+=DS(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Bs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.K().next(r=>he.forEach(r,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.K("userMutationsIndex",l).next(h=>he.forEach(h,p=>{Ft(p.userId===s.userId);const y=Mm(this.wt,p);return rG(e,s.userId,y).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.J((l,h)=>{const p=new fn(l),y=[0,Zs(p)];s.push(t.get(y).next(E=>E?he.resolve():t.put({targetId:0,path:Zs(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>he.waitFor(s))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:xX});const i=t.store("collectionParents"),r=new ZP,s=l=>{if(r.add(l)){const h=l.lastSegment(),p=l.popLast();return i.put({collectionId:h,parent:Zs(p)})}};return t.store("remoteDocuments").J({H:!0},(l,h)=>{const p=new fn(l);return s(p.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,h,p],y)=>{const E=lu(h);return s(E.popLast())}))}Ks(e){const t=e.store("targets");return t.J((i,r)=>{const s=Cw(r),l=K$(this.wt,s);return t.put(l)})}Gs(e,t){const i=t.store("remoteDocuments"),r=[];return i.J((s,l)=>{const h=t.store("remoteDocumentsV14"),p=(y=l,y.document?new tt(fn.fromString(y.document.name).popFirst(5)):y.noDocument?tt.fromSegments(y.noDocument.path):y.unknownDocument?tt.fromSegments(y.unknownDocument.path):dt()).path.toArray();var y;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(h.put(E))}).next(()=>he.waitFor(r))}Qs(e,t){const i=t.store("mutations"),r=uG(this.wt),s=new mG(SS.Ms,this.wt.ne);return i.K().next(l=>{const h=new Map;return l.forEach(p=>{var y;let E=null!==(y=h.get(p.userId))&&void 0!==y?y:Kt();Mm(this.wt,p).keys().forEach(I=>E=E.add(I)),h.set(p.userId,E)}),he.forEach(h,(p,y)=>{const E=new Nr(y),I=wS.se(this.wt,E),k=s.getIndexManager(E),N=IS.se(E,this.wt,k,s.referenceDelegate);return new pG(r,N,I,k).recalculateAndSaveOverlaysForDocumentKeys(new $P(t,vo.ot),p).next()})})}}function gG(n){n.createObjectStore("targetDocuments",{keyPath:SX}).createIndex("documentTargetsIndex",AX,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",TX,{unique:!0}),n.createObjectStore("targetGlobal")}const QP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class XP{constructor(e,t,i,r,s,l,h,p,y,E,I=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.js=s,this.window=l,this.document=h,this.Ws=y,this.zs=E,this.Hs=I,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=k=>Promise.resolve(),!XP.V())throw new Ne(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XX(this,r),this.ei=t+"main",this.wt=new q$(p),this.ni=new Yl(this.ei,this.Hs,new cJ(this.wt)),this.Vs=new KX(this.referenceDelegate,this.wt),this.remoteDocumentCache=uG(this.wt),this.Ds=new UX,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===E&&ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(_e.FAILED_PRECONDITION,QP);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new vo(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var i=(0,Ce.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Ce.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>AS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(sf(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return xw(e).get("owner").next(t=>he.resolve(this.di(t)))}_i(e){return AS(e).delete(this.clientId)}wi(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Vr(i,"clientMetadata");return r.K().next(s=>{const l=e.gi(s,18e5),h=s.filter(p=>-1===l.indexOf(p));return he.forEach(h,p=>r.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.si)for(const i of t)e.si.removeItem(e.yi(i.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?he.resolve(!0):xw(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Ne(_e.FAILED_PRECONDITION,QP);return!1}}return!(!this.networkEnabled||!this.inForeground)||AS(e).K().next(i=>void 0===this.gi(i,5e3).find(r=>{if(this.clientId!==r.clientId){const l=!this.inForeground&&r.inForeground,h=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new $P(t,vo.ot);return e.li(i).next(()=>e._i(i))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(i=>this.mi(i.updateTimeMs,t)&&!this.pi(i.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>AS(e).K().next(t=>this.gi(t,18e5).map(i=>i.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return IS.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new WX(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return wS.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,i){Ve("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(l=this.Hs)?VX:14===l?z$:13===l?G$:12===l?LX:11===l?$$:void dt();var l;let h;return this.ni.runTransaction(e,r,s,p=>(h=new $P(p,this.Ps?this.Ps.next():vo.ot),"readwrite-primary"===t?this.ai(h).next(y=>!!y||this.hi(h)).next(y=>{if(!y)throw ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Ne(_e.FAILED_PRECONDITION,Pj);return i(h)}).next(y=>this.fi(h).next(()=>y)):this.bi(h).next(()=>i(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}bi(e){return xw(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(_e.FAILED_PRECONDITION,QP)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xw(e).put("owner",t)}static V(){return Yl.V()}li(e){const t=xw(e);return t.get("owner").next(i=>this.di(i)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}mi(e,t){const i=Date.now();return!(e<i-t||e>i&&(ir(`Detected an update time that is in the future: ${e} > ${i}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const i=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ir("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){ir("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xw(n){return Vr(n,"owner")}function AS(n){return Vr(n,"clientMetadata")}function JP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class eN{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Pi=i,this.vi=r}static Vi(e,t){let i=Kt(),r=Kt();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new eN(e,t.fromCache,i,r)}}class _G{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ci(e,t).next(s=>s||this.xi(e,t,r,i)).next(s=>s||this.Ni(e,t))}Ci(e,t){return he.resolve(null)}xi(e,t,i,r){return function KQ(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Rt.min())?this.Ni(e,t):this.Di.getDocuments(e,i).next(s=>{const l=this.ki(t,s);return this.Oi(t,l,i,r)?this.Ni(e,t):(IP()<=mo.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),LP(t)),this.Mi(e,l,t,Rj(r,-1)))})}ki(e,t){let i=new Fn(s$(e));return t.forEach((r,s)=>{VP(e,s)&&(i=i.add(s))}),i}Oi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ni(e,t){return IP()<=mo.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",LP(t)),this.Di.getDocumentsMatchingQuery(e,t,ta.min())}Mi(e,t,i,r){return this.Di.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class uJ{constructor(e,t,i,r){this.persistence=e,this.Fi=t,this.wt=r,this.$i=new Pi(qt),this.Bi=new df(s=>Im(s),dw),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(i)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pG(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function yG(n,e,t,i){return new uJ(n,e,t,i)}function vG(n,e){return tN.apply(this,arguments)}function tN(){return tN=(0,Ce.Z)(function*(n,e){const t=it(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.qi(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const l=[],h=[];let p=Kt();for(const y of r){l.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of s){h.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(i,p).next(y=>({Ki:y,removedBatchIds:l,addedBatchIds:h}))})})}),tN.apply(this,arguments)}function dJ(n,e){const t=it(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Ui.newChangeBuffer({trackRemovals:!0});return function(l,h,p,y){const E=p.batch,I=E.keys();let k=he.resolve();return I.forEach(N=>{k=k.next(()=>y.getEntry(h,N)).next(U=>{const J=p.docVersions.get(N);Ft(null!==J),U.version.compareTo(J)<0&&(E.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),y.addEntry(U)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(h,E))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let h=Kt();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(h=h.add(l.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function bG(n){const e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function hJ(n,e){const t=it(n),i=e.snapshotVersion;let r=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.Ui.newChangeBuffer({trackRemovals:!0});r=t.$i;const h=[];e.targetChanges.forEach((E,I)=>{const k=r.get(I);if(!k)return;h.push(t.Vs.removeMatchingKeys(s,E.removedDocuments,I).next(()=>t.Vs.addMatchingKeys(s,E.addedDocuments,I)));let N=k.withSequenceNumber(s.currentSequenceNumber);var U,J,ce;e.targetMismatches.has(I)?N=N.withResumeToken(fr.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,i)),r=r.insert(I,N),J=N,ce=E,(0===(U=k).resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0)&&h.push(t.Vs.updateTargetData(s,N))});let p=bo(),y=Kt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,E))}),h.push(wG(s,l,e.documentUpdates).next(E=>{p=E.Gi,y=E.Qi})),!i.isEqual(Rt.min())){const E=t.Vs.getLastRemoteSnapshotVersion(s).next(I=>t.Vs.setTargetsMetadata(s,s.currentSequenceNumber,i));h.push(E)}return he.waitFor(h).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(t.$i=r,s))}function wG(n,e,t){let i=Kt(),r=Kt();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let l=bo();return t.forEach((h,p)=>{const y=s.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(r=r.add(h)),p.isNoDocument()&&p.version.isEqual(Rt.min())?(e.removeEntry(h,p.readTime),l=l.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),l=l.insert(h,p)):Ve("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)}),{Gi:l,Qi:r}})}function fJ(n,e){const t=it(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function ty(n,e){const t=it(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Vs.getTargetData(i,e).next(s=>s?(r=s,he.resolve(r)):t.Vs.allocateTargetId(i).next(l=>(r=new hf(e,l,0,i.currentSequenceNumber),t.Vs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.$i.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.$i=t.$i.insert(i.targetId,i),t.Bi.set(e,i.targetId)),i})}function ny(n,e,t){return nN.apply(this,arguments)}function nN(){return nN=(0,Ce.Z)(function*(n,e,t){const i=it(n),r=i.$i.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!sf(l))throw l;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.$i=i.$i.remove(e),i.Bi.delete(r.target)}),nN.apply(this,arguments)}function xS(n,e,t){const i=it(n);let r=Rt.min(),s=Kt();return i.persistence.runTransaction("Execute query","readonly",l=>function(h,p,y){const E=it(h),I=E.Bi.get(y);return void 0!==I?he.resolve(E.$i.get(I)):E.Vs.getTargetData(p,y)}(i,l,nl(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Vs.getMatchingKeysForTargetId(l,h.targetId).next(p=>{s=p})}).next(()=>i.Fi.getDocumentsMatchingQuery(l,e,t?r:Rt.min(),t?s:Kt())).next(h=>(DG(i,r$(e),h),{documents:h,ji:s})))}function EG(n,e){const t=it(n),i=it(t.Vs),r=t.$i.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.te(s,e).next(l=>l?l.target:null))}function CG(n,e){const t=it(n),i=t.Li.get(e)||Rt.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Ui.getAllFromCollectionGroup(r,e,Rj(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(DG(t,e,r),r))}function DG(n,e,t){let i=Rt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Li.set(e,i)}function iN(){return iN=(0,Ce.Z)(function*(n,e,t,i){const r=it(n);let s=Kt(),l=bo();for(const y of t){const E=e.Wi(y.metadata.name);y.document&&(s=s.add(E));const I=e.zi(y);I.setReadTime(e.Hi(y.metadata.readTime)),l=l.insert(E,I)}const h=r.Ui.newChangeBuffer({trackRemovals:!0}),p=yield ty(r,(y=i,nl(z_(fn.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>wG(y,h,l).next(E=>(h.apply(y),E)).next(E=>r.Vs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>r.Vs.addMatchingKeys(y,s,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(y,E.Gi,E.Qi)).next(()=>E.Gi)))}),iN.apply(this,arguments)}function mJ(n,e){return rN.apply(this,arguments)}function rN(){return rN=(0,Ce.Z)(function*(n,e,t=Kt()){const i=yield ty(n,nl(WP(e.bundledQuery))),r=it(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const l=Lr(e.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r.Ds.saveNamedQuery(s,e);const h=i.withResumeToken(fr.EMPTY_BYTE_STRING,l);return r.$i=r.$i.insert(h.targetId,h),r.Vs.updateTargetData(s,h).next(()=>r.Vs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Vs.addMatchingKeys(s,t,i.targetId)).next(()=>r.Ds.saveNamedQuery(s,e))})}),rN.apply(this,arguments)}function IG(n,e){return`firestore_clients_${n}_${e}`}function TG(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function sN(n,e){return`firestore_targets_${n}_${e}`}class MS{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Ji(e,t,i){const r=JSON.parse(i);let s,l="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(s=new Ne(r.error.code,r.error.message))),l?new MS(e,t,r.state,s):(ir("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mw{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ji(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ne(i.error.code,i.error.message))),s?new Mw(e,i.state,r):(ir("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=_S();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=Hj(i.activeTargetIds[l]),s=s.add(i.activeTargetIds[l]);return r?new kS(e,s):(ir("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class oN{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new oN(t.clientId,t.onlineState):(ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class aN{constructor(){this.activeTargetIds=_S()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lN{constructor(e,t,i,r,s){this.window=e,this.js=t,this.persistenceKey=i,this.tr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Pi(qt),this.started=!1,this.ir=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=IG(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new aN),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.Ri();for(const r of t){if(r===e.tr)continue;const s=e.getItem(IG(e.persistenceKey,r));if(s){const l=kS.Ji(r,s);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const i=e.storage.getItem(e.lr);if(i){const r=e.wr(i);r&&e.mr(r)}for(const r of e.ir)e.nr(r);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,i){this.yr(e,t,i),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(sN(this.persistenceKey,e));if(i){const r=Mw.Ji(e,i);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sN(this.persistenceKey,e))}updateQueryState(e,t,i){this.Tr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.pr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Ve("SharedClientState","EVENT",i.key,i.newValue),i.key===this.rr)return void ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==i.key)if(t.cr.test(i.key)){if(null==i.newValue){const r=t.Rr(i.key);return t.br(r,null)}{const r=t.Pr(i.key,i.newValue);if(r)return t.br(r.clientId,r)}}else if(t.ar.test(i.key)){if(null!==i.newValue){const r=t.vr(i.key,i.newValue);if(r)return t.Vr(r)}}else if(t.hr.test(i.key)){if(null!==i.newValue){const r=t.Sr(i.key,i.newValue);if(r)return t.Dr(r)}}else if(i.key===t.lr){if(null!==i.newValue){const r=t.wr(i.newValue);if(r)return t.mr(r)}}else if(i.key===t.ur){const r=function(s){let l=vo.ot;if(null!=s)try{const h=JSON.parse(s);Ft("number"==typeof h),l=h}catch(h){ir("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(i.newValue);r!==vo.ot&&t.sequenceNumberHandler(r)}else if(i.key===t.dr){const r=t.Cr(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Nr(s)))}}else t.ir.push(i)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,i){const r=new MS(this.currentUser,e,t,i),s=TG(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Yi())}pr(e){const t=TG(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,i){const r=sN(this.persistenceKey,e),s=new Mw(e,t,i);this.setItem(r,s.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const i=this.Rr(e);return kS.Ji(i,t)}vr(e,t){const i=this.ar.exec(e),r=Number(i[1]);return MS.Ji(new Nr(void 0!==i[2]?i[2]:null),r,t)}Sr(e,t){const i=this.hr.exec(e),r=Number(i[1]);return Mw.Ji(r,t)}wr(e){return oN.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const i=t?this.sr.insert(e,t):this.sr.remove(e),r=this.gr(this.sr),s=this.gr(i),l=[],h=[];return s.forEach(p=>{r.has(p)||l.push(p)}),r.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Mr(l,h).then(()=>{this.sr=i})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=_S();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class SG{constructor(){this.Fr=new aN,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,i){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new aN,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gJ{Br(e){}shutdown(){}}class AG{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const _J={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class yJ{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class vJ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,i,r,s){const l=this.oo(e,t);Ve("RestConnection","Sending: ",l,i);const h={};return this.uo(h,r,s),this.co(e,l,h,i).then(p=>(Ve("RestConnection","Received: ",p),p),p=>{throw tw("RestConnection",`${e} failed with error: `,p,"url: ",l,"request:",i),p})}ao(e,t,i,r,s,l){return this.ro(e,t,i,r,s)}uo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+U_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}oo(e,t){return`${this.so}/v1/${t}:${_J[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,i,r){return new Promise((s,l)=>{const h=new yQ;h.listenOnce(mQ.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case DP.NO_ERROR:const y=h.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(y)),s(y);break;case DP.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),l(new Ne(_e.DEADLINE_EXCEEDED,"Request time out"));break;case DP.HTTP_ERROR:const E=h.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',E,"response text:",h.getResponseText()),E>0){const I=h.getResponseJson().error;if(I&&I.status&&I.message){const k=function(N){const U=N.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(U)>=0?U:_e.UNKNOWN}(I.status);l(new Ne(k,I.message))}else l(new Ne(_e.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Ne(_e.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(r);h.send(t,"POST",p,i,15)})}ho(e,t,i){const r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fQ(),l=pQ(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new _Q({})),this.uo(h.initMessageHeaders,t,i),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");Ve("Connection","Creating WebChannel: "+p,h);const y=s.createWebChannel(p,h);let E=!1,I=!1;const k=new yJ({jr:U=>{I?Ve("Connection","Not sending because WebChannel is closed:",U):(E||(Ve("Connection","Opening WebChannel transport."),y.open(),E=!0),Ve("Connection","WebChannel sending:",U),y.send(U))},Wr:()=>y.close()}),N=(U,J,ce)=>{U.listen(J,Ue=>{try{ce(Ue)}catch(Ke){setTimeout(()=>{throw Ke},0)}})};return N(y,sS.EventType.OPEN,()=>{I||Ve("Connection","WebChannel transport opened.")}),N(y,sS.EventType.CLOSE,()=>{I||(I=!0,Ve("Connection","WebChannel transport closed"),k.eo())}),N(y,sS.EventType.ERROR,U=>{I||(I=!0,tw("Connection","WebChannel transport errored:",U),k.eo(new Ne(_e.UNAVAILABLE,"The operation could not be completed")))}),N(y,sS.EventType.MESSAGE,U=>{var J;if(!I){const ce=U.data[0];Ft(!!ce);const Ue=ce,Ke=Ue.error||(null===(J=Ue[0])||void 0===J?void 0:J.error);if(Ke){Ve("Connection","WebChannel received error:",Ke);const nt=Ke.status;let Qe=function(Ot){const an=rr[Ot];if(void 0!==an)return b$(an)}(nt),St=Ke.message;void 0===Qe&&(Qe=_e.INTERNAL,St="Unknown error status: "+nt+" with message "+Ke.message),I=!0,k.eo(new Ne(Qe,St)),y.close()}else Ve("Connection","WebChannel received:",ce),k.no(ce)}}),N(l,gQ.STAT_EVENT,U=>{U.stat===Tj.PROXY?Ve("Connection","Detected buffering proxy"):U.stat===Tj.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.Zr()},0),k}}function xG(){return typeof window<"u"?window:null}function RS(){return typeof document<"u"?document:null}function kw(n){return new uX(n,!0)}class cN{constructor(e,t,i=1e3,r=1.5,s=6e4){this.js=e,this.timerId=t,this.lo=i,this.fo=r,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),i=Math.max(0,Date.now()-this.yo),r=Math.max(0,t-i);r>0&&Ve("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,r,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class MG{constructor(e,t,i,r,s,l,h,p){this.js=e,this.Ao=i,this.Ro=r,this.bo=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new cN(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ce.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Ce.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var i=this;return(0,Ce.Z)(function*(){i.Fo(),i.$o(),i.So.cancel(),i.Po++,4!==e?i.So.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(ir(t.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),i.So.po()):t&&t.code===_e.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Bo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Po===t&&this.Uo(i,r)},i=>{e(()=>{const r=new Ne(_e.UNKNOWN,"Fetching auth token failed: "+i.message);return this.qo(r)})})}Uo(e,t){const i=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{i(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(r=>{i(()=>this.qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}xo(){var e=this;this.state=5,this.So.Io((0,Ce.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bJ extends MG{constructor(e,t,i,r,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.wt=s}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function fX(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:dt(),r=e.targetChange.targetIds||[],s=function(p,y){return p.dt?(Ft(void 0===y||"string"==typeof y),fr.fromBase64String(y||"")):(Ft(void 0===y||y instanceof Uint8Array),fr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const y=void 0===p.code?_e.UNKNOWN:b$(p.code);return new Ne(y,p.message||"")}(l);t=new I$(i,r,s,h||null)}else if("documentChange"in e){const i=e.documentChange,r=au(n,i.document.name),s=Lr(i.document.updateTime),l=new rs({mapValue:{fields:i.document.fields}}),h=Qn.newFoundDocument(r,s,l);t=new yS(i.targetIds||[],i.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const i=e.documentDelete,r=au(n,i.document),s=i.readTime?Lr(i.readTime):Rt.min(),l=Qn.newNoDocument(r,s);t=new yS([],i.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const i=e.documentRemove,r=au(n,i.document);t=new yS([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return dt();{const i=e.filter,s=new nX(i.count||0);t=new D$(i.targetId,s)}}var p;return t}(this.wt,e),i=function(r){if(!("targetChange"in r))return Rt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Rt.min():s.readTime?Lr(s.readTime):Rt.min()}(e);return this.listener.Go(t,i)}Qo(e){const t={};t.database=ww(this.wt),t.addTarget=function(r,s){let l;const h=s.target;return l=hS(h)?{documents:N$(r,h)}:{query:F$(r,h)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=x$(r,s.resumeToken):s.snapshotVersion.compareTo(Rt.min())>0&&(l.readTime=vw(r,s.snapshotVersion.toTimestamp())),l}(this.wt,e);const i=function mX(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Mo(t)}jo(e){const t={};t.database=ww(this.wt),t.removeTarget=e,this.Mo(t)}}class wJ extends MG{constructor(e,t,i,r,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function pX(n,e){return n&&n.length>0?(Ft(void 0!==e),n.map(t=>function(i,r){let s=Lr(i.updateTime?i.updateTime:r);return s.isEqual(Rt.min())&&(s=Lr(r)),new JQ(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Lr(e.commitTime);return this.listener.Jo(i,t)}return Ft(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=ww(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Ew(this.wt,i))};this.Mo(t)}}class EJ extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=i,this.wt=r,this.Zo=!1}tu(){if(this.Zo)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.bo.ro(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ne(_e.UNKNOWN,r.toString())})}ao(e,t,i,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.bo.ao(e,t,i,s,l,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ne(_e.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class CJ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(ir(t),this.su=!1):Ve("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class DJ{constructor(e,t,i,r,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(h=>{i.enqueueAndForget((0,Ce.Z)(function*(){var p;mf(l)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Ce.Z)(function*(y){const E=it(y);E.lu.add(4),yield iy(E),E._u.set("Unknown"),E.lu.delete(4),yield Rw(E)}),function(y){return p.apply(this,arguments)})(l))}))}),this._u=new CJ(i,r)}}function Rw(n){return uN.apply(this,arguments)}function uN(){return uN=(0,Ce.Z)(function*(n){if(mf(n))for(const e of n.fu)yield e(!0)}),uN.apply(this,arguments)}function iy(n){return dN.apply(this,arguments)}function dN(){return dN=(0,Ce.Z)(function*(n){for(const e of n.fu)yield e(!1)}),dN.apply(this,arguments)}function OS(n,e){const t=it(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),pN(t)?fN(t):sy(t).Co()&&hN(t,e))}function Ow(n,e){const t=it(n),i=sy(t);t.hu.delete(e),i.Co()&&kG(t,e),0===t.hu.size&&(i.Co()?i.ko():mf(t)&&t._u.set("Unknown"))}function hN(n,e){n.wu.Nt(e.targetId),sy(n).Qo(e)}function kG(n,e){n.wu.Nt(e),sy(n).jo(e)}function fN(n){n.wu=new aX({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),sy(n).start(),n._u.iu()}function pN(n){return mf(n)&&!sy(n).Do()&&n.hu.size>0}function mf(n){return 0===it(n).lu.size}function RG(n){n.wu=void 0}function IJ(n){return mN.apply(this,arguments)}function mN(){return mN=(0,Ce.Z)(function*(n){n.hu.forEach((e,t)=>{hN(n,e)})}),mN.apply(this,arguments)}function TJ(n,e){return gN.apply(this,arguments)}function gN(){return gN=(0,Ce.Z)(function*(n,e){RG(n),pN(n)?(n._u.uu(e),fN(n)):n._u.set("Unknown")}),gN.apply(this,arguments)}function SJ(n,e,t){return _N.apply(this,arguments)}function _N(){return _N=(0,Ce.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof I$&&2===e.state&&e.cause)try{yield(i=(0,Ce.Z)(function*(r,s){const l=s.cause;for(const h of s.targetIds)r.hu.has(h)&&(yield r.remoteSyncer.rejectListen(h,l),r.hu.delete(h),r.wu.removeTarget(h))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield PS(n,i)}else if(e instanceof yS?n.wu.Ut(e):e instanceof D$?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Rt.min()))try{const i=yield bG(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const l=r.wu.Yt(s);return l.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=r.hu.get(p);y&&r.hu.set(p,y.withResumeToken(h.resumeToken,s))}}),l.targetMismatches.forEach(h=>{const p=r.hu.get(h);if(!p)return;r.hu.set(h,p.withResumeToken(fr.EMPTY_BYTE_STRING,p.snapshotVersion)),kG(r,h);const y=new hf(p.target,h,1,p.sequenceNumber);hN(r,y)}),r.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(i){Ve("RemoteStore","Failed to raise snapshot:",i),yield PS(n,i)}var i}),_N.apply(this,arguments)}function PS(n,e,t){return yN.apply(this,arguments)}function yN(){return yN=(0,Ce.Z)(function*(n,e,t){if(!sf(e))throw e;n.lu.add(1),yield iy(n),n._u.set("Offline"),t||(t=()=>bG(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Rw(n)}))}),yN.apply(this,arguments)}function OG(n,e){return e().catch(t=>PS(n,t,e))}function ry(n){return vN.apply(this,arguments)}function vN(){return vN=(0,Ce.Z)(function*(n){const e=it(n),t=gf(e);let i=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;AJ(e);)try{const r=yield fJ(e.localStore,i);if(null===r){0===e.au.length&&t.ko();break}i=r.batchId,xJ(e,r)}catch(r){yield PS(e,r)}PG(e)&&NG(e)}),vN.apply(this,arguments)}function AJ(n){return mf(n)&&n.au.length<10}function xJ(n,e){n.au.push(e);const t=gf(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function PG(n){return mf(n)&&!gf(n).Do()&&n.au.length>0}function NG(n){gf(n).start()}function MJ(n){return bN.apply(this,arguments)}function bN(){return bN=(0,Ce.Z)(function*(n){gf(n).Xo()}),bN.apply(this,arguments)}function kJ(n){return wN.apply(this,arguments)}function wN(){return wN=(0,Ce.Z)(function*(n){const e=gf(n);for(const t of n.au)e.Ho(t.mutations)}),wN.apply(this,arguments)}function RJ(n,e,t){return EN.apply(this,arguments)}function EN(){return EN=(0,Ce.Z)(function*(n,e,t){const i=n.au.shift(),r=zP.from(i,e,t);yield OG(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield ry(n)}),EN.apply(this,arguments)}function OJ(n,e){return CN.apply(this,arguments)}function CN(){return CN=(0,Ce.Z)(function*(n,e){var t;e&&gf(n).zo&&(yield(t=(0,Ce.Z)(function*(i,r){if(v$(s=r.code)&&s!==_e.ABORTED){const l=i.au.shift();gf(i).No(),yield OG(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),yield ry(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),PG(n)&&NG(n)}),CN.apply(this,arguments)}function FG(n,e){return DN.apply(this,arguments)}function DN(){return DN=(0,Ce.Z)(function*(n,e){const t=it(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const i=mf(t);t.lu.add(3),yield iy(t),i&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Rw(t)}),DN.apply(this,arguments)}function IN(n,e){return TN.apply(this,arguments)}function TN(){return TN=(0,Ce.Z)(function*(n,e){const t=it(n);e?(t.lu.delete(2),yield Rw(t)):e||(t.lu.add(2),yield iy(t),t._u.set("Unknown"))}),TN.apply(this,arguments)}function sy(n){return n.mu||(n.mu=function(e,t,i){const r=it(e);return r.tu(),new bJ(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:IJ.bind(null,n),Jr:TJ.bind(null,n),Go:SJ.bind(null,n)}),n.fu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.mu.No(),pN(n)?fN(n):n._u.set("Unknown")):(yield n.mu.stop(),RG(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function gf(n){return n.gu||(n.gu=function(e,t,i){const r=it(e);return r.tu(),new wJ(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:MJ.bind(null,n),Jr:OJ.bind(null,n),Yo:kJ.bind(null,n),Jo:RJ.bind(null,n)}),n.fu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.gu.No(),yield ry(n)):(yield n.gu.stop(),n.au.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class SN{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,i,r,s){const l=Date.now()+i,h=new SN(e,t,l,r,s);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oy(n,e){if(ir("AsyncQueue",`${e}: ${n}`),sf(n))return new Ne(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class ay{constructor(e){this.comparator=e?(t,i)=>e(t,i)||tt.comparator(t.key,i.key):(t,i)=>tt.comparator(t.key,i.key),this.keyedMap=mw(),this.sortedSet=new Pi(this.comparator)}static emptySet(e){return new ay(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ay)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new ay;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class LG{constructor(){this.yu=new Pi(tt.comparator)}track(e){const t=e.doc.key,i=this.yu.get(t);i?0!==e.type&&3===i.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==i.type?this.yu=this.yu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.yu=this.yu.remove(t):1===e.type&&2===i.type?this.yu=this.yu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):dt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,i)=>{e.push(i)}),e}}class ly{constructor(e,t,i,r,s,l,h,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,i,r){const s=[];return t.forEach(l=>{s.push({type:0,doc:l})}),new ly(e,t,ay.emptySet(t),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class PJ{constructor(){this.Iu=void 0,this.listeners=[]}}class NJ{constructor(){this.queries=new df(e=>i$(e),hw),this.onlineState="Unknown",this.Tu=new Set}}function AN(n,e){return xN.apply(this,arguments)}function xN(){return xN=(0,Ce.Z)(function*(n,e){const t=it(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new PJ),r)try{s.Iu=yield t.onListen(i)}catch(l){const h=oy(l,`Initialization of query '${LP(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,s),s.listeners.push(e),e.Eu(t.onlineState),s.Iu&&e.Au(s.Iu)&&RN(t)}),xN.apply(this,arguments)}function MN(n,e){return kN.apply(this,arguments)}function kN(){return kN=(0,Ce.Z)(function*(n,e){const t=it(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),kN.apply(this,arguments)}function FJ(n,e){const t=it(n);let i=!1;for(const r of e){const l=t.queries.get(r.query);if(l){for(const h of l.listeners)h.Au(r)&&(i=!0);l.Iu=r}}i&&RN(t)}function LJ(n,e,t){const i=it(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function RN(n){n.Tu.forEach(e=>{e.next()})}class ON{constructor(e,t,i){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=i||{}}Au(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new ly(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=ly.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class VJ{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class VG{constructor(e){this.wt=e}Wi(e){return au(this.wt,e)}zi(e){return e.metadata.exists?P$(this.wt,e.document,!1):Qn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Lr(e)}}class BJ{constructor(e,t,i){this.xu=e,this.localStore=t,this.wt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=BG(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const i=fn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,i=new VG(this.wt);for(const r of e)if(r.metadata.queries){const s=i.Wi(r.metadata.name);for(const l of r.metadata.queries){const h=(t.get(l)||Kt()).add(s);t.set(l,h)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function pJ(n,e,t,i){return iN.apply(this,arguments)}(e.localStore,new VG(e.wt),e.documents,e.xu.id),i=e.ku(e.documents);for(const r of e.queries)yield mJ(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function BG(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class UG{constructor(e){this.key=e}}class HG{constructor(e){this.key=e}}class jG{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Kt(),this.mutatedKeys=Kt(),this.Lu=s$(e),this.Uu=new ay(this.Lu)}get qu(){return this.Fu}Ku(e,t){const i=t?t.Gu:new LG,r=t?t.Uu:this.Uu;let s=t?t.mutatedKeys:this.mutatedKeys,l=r,h=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((E,I)=>{const k=r.get(E),N=VP(this.query,I)?I:null,U=!!k&&this.mutatedKeys.has(k.key),J=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let ce=!1;k&&N?k.data.isEqual(N.data)?U!==J&&(i.track({type:3,doc:N}),ce=!0):this.Qu(k,N)||(i.track({type:2,doc:N}),ce=!0,(p&&this.Lu(N,p)>0||y&&this.Lu(N,y)<0)&&(h=!0)):!k&&N?(i.track({type:0,doc:N}),ce=!0):k&&!N&&(i.track({type:1,doc:k}),ce=!0,(p||y)&&(h=!0)),ce&&(N?(l=l.add(N),s=J?s.add(E):s.delete(E)):(l=l.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const E="F"===this.query.limitType?l.last():l.first();l=l.delete(E.key),s=s.delete(E.key),i.track({type:1,doc:E})}return{Uu:l,Gu:i,Oi:h,mutatedKeys:s}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((y,E)=>function(I,k){const N=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return N(I)-N(k)}(y.type,E.type)||this.Lu(y.doc,E.doc)),this.ju(i);const l=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,p=h!==this.$u;return this.$u=h,0!==s.length||p?{snapshot:new ly(this.query,e.Uu,r,s,e.mutatedKeys,0===h,p,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new LG,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Kt(),this.Uu.forEach(i=>{this.Hu(i.key)&&(this.Bu=this.Bu.add(i.key))});const t=[];return e.forEach(i=>{this.Bu.has(i)||t.push(new HG(i))}),this.Bu.forEach(i=>{e.has(i)||t.push(new UG(i))}),t}Ju(e){this.Fu=e.ji,this.Bu=Kt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return ly.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class UJ{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class HJ{constructor(e){this.key=e,this.Xu=!1}}class jJ{constructor(e,t,i,r,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.Zu={},this.tc=new df(h=>i$(h),hw),this.ec=new Map,this.nc=new Set,this.sc=new Pi(tt.comparator),this.ic=new Map,this.rc=new YP,this.oc={},this.uc=new Map,this.cc=Pm.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function $J(n,e){return PN.apply(this,arguments)}function PN(){return PN=(0,Ce.Z)(function*(n,e){const t=r1(n);let i,r;const s=t.tc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.Yu();else{const l=yield ty(t.localStore,nl(e));t.isPrimaryClient&&OS(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,r=yield NN(t,e,i,"current"===h)}return r}),PN.apply(this,arguments)}function NN(n,e,t,i){return FN.apply(this,arguments)}function FN(){return FN=(0,Ce.Z)(function*(n,e,t,i){n.hc=(E,I,k)=>{return(N=(0,Ce.Z)(function*(U,J,ce,Ue){let Ke=J.view.Ku(ce);Ke.Oi&&(Ke=yield xS(U.localStore,J.query,!1).then(({documents:St})=>J.view.Ku(St,Ke)));const nt=Ue&&Ue.targetChanges.get(J.targetId),Qe=J.view.applyChanges(Ke,U.isPrimaryClient,nt);return qN(U,J.targetId,Qe.zu),Qe.snapshot}),function(U,J,ce,Ue){return N.apply(this,arguments)})(n,E,I,k);var N};const r=yield xS(n.localStore,e,!0),s=new jG(e,r.ji),l=s.Ku(r.documents),h=yw.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState),p=s.applyChanges(l,n.isPrimaryClient,h);qN(n,t,p.zu);const y=new UJ(e,t,s);return n.tc.set(e,y),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),p.snapshot}),FN.apply(this,arguments)}function GJ(n,e){return LN.apply(this,arguments)}function LN(){return LN=(0,Ce.Z)(function*(n,e){const t=it(n),i=t.tc.get(e),r=t.ec.get(i.targetId);if(r.length>1)return t.ec.set(i.targetId,r.filter(s=>!hw(s,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ny(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Ow(t.remoteStore,i.targetId),cy(t,i.targetId)}).catch(rf))):(cy(t,i.targetId),yield ny(t.localStore,i.targetId,!0))}),LN.apply(this,arguments)}function VN(){return VN=(0,Ce.Z)(function*(n,e,t){const i=s1(n);try{const r=yield function(s,l){const h=it(s),p=yi.now(),y=l.reduce((k,N)=>k.add(N.key),Kt());let E,I;return h.persistence.runTransaction("Locally write mutations","readwrite",k=>{let N=bo(),U=Kt();return h.Ui.getEntries(k,y).next(J=>{N=J,N.forEach((ce,Ue)=>{Ue.isValidDocument()||(U=U.add(ce))})}).next(()=>h.localDocuments.getOverlayedDocuments(k,N)).next(J=>{E=J;const ce=[];for(const Ue of l){const Ke=tX(Ue,E.get(Ue.key).overlayedDocument);null!=Ke&&ce.push(new Cd(Ue.key,Ke,Kj(Ke.value.mapValue),Ii.exists(!0)))}return h.mutationQueue.addMutationBatch(k,p,ce,l)}).next(J=>{I=J;const ce=J.applyToLocalDocumentSet(E,U);return h.documentOverlayCache.saveOverlays(k,J.batchId,ce)})}).then(()=>({batchId:I.batchId,changes:E$(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,l,h){let p=s.oc[s.currentUser.toKey()];p||(p=new Pi(qt)),p=p.insert(l,h),s.oc[s.currentUser.toKey()]=p}(i,r.batchId,t),yield Dd(i,r.changes),yield ry(i.remoteStore)}catch(r){const s=oy(r,"Failed to persist write");t.reject(s)}}),VN.apply(this,arguments)}function $G(n,e){return BN.apply(this,arguments)}function BN(){return BN=(0,Ce.Z)(function*(n,e){const t=it(n);try{const i=yield hJ(t.localStore,e);e.targetChanges.forEach((r,s)=>{const l=t.ic.get(s);l&&(Ft(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.Xu=!0:r.modifiedDocuments.size>0?Ft(l.Xu):r.removedDocuments.size>0&&(Ft(l.Xu),l.Xu=!1))}),yield Dd(t,i,e)}catch(i){yield rf(i)}}),BN.apply(this,arguments)}function GG(n,e,t){const i=it(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.tc.forEach((s,l)=>{const h=l.view.Eu(e);h.snapshot&&r.push(h.snapshot)}),function(s,l){const h=it(s);h.onlineState=l;let p=!1;h.queries.forEach((y,E)=>{for(const I of E.listeners)I.Eu(l)&&(p=!0)}),p&&RN(h)}(i.eventManager,e),r.length&&i.Zu.Go(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function qJ(n,e,t){return UN.apply(this,arguments)}function UN(){return UN=(0,Ce.Z)(function*(n,e,t){const i=it(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.ic.get(e),s=r&&r.key;if(s){let l=new Pi(tt.comparator);l=l.insert(s,Qn.newNoDocument(s,Rt.min()));const h=Kt().add(s),p=new _w(Rt.min(),new Map,new Fn(qt),l,h);yield $G(i,p),i.sc=i.sc.remove(s),i.ic.delete(e),WN(i)}else yield ny(i.localStore,e,!1).then(()=>cy(i,e,t)).catch(rf)}),UN.apply(this,arguments)}function WJ(n,e){return HN.apply(this,arguments)}function HN(){return HN=(0,Ce.Z)(function*(n,e){const t=it(n),i=e.batch.batchId;try{const r=yield dJ(t.localStore,e);zN(t,i,null),GN(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Dd(t,r)}catch(r){yield rf(r)}}),HN.apply(this,arguments)}function KJ(n,e,t){return jN.apply(this,arguments)}function jN(){return jN=(0,Ce.Z)(function*(n,e,t){const i=it(n);try{const r=yield function(s,l){const h=it(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.mutationQueue.lookupMutationBatch(p,l).next(E=>(Ft(null!==E),y=E.keys(),h.mutationQueue.removeMutationBatch(p,E))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,y,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>h.localDocuments.getDocuments(p,y))})}(i.localStore,e);zN(i,e,t),GN(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Dd(i,r)}catch(r){yield rf(r)}}),jN.apply(this,arguments)}function $N(){return $N=(0,Ce.Z)(function*(n,e){const t=it(n);mf(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const l=it(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===i)return void e.resolve();const r=t.uc.get(i)||[];r.push(e),t.uc.set(i,r)}catch(i){const r=oy(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),$N.apply(this,arguments)}function GN(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function zN(n,e,t){const i=it(n);let r=i.oc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.oc[i.currentUser.toKey()]=r}}function cy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.ec.get(e))n.tc.delete(i),t&&n.Zu.lc(i,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(i=>{n.rc.containsKey(i)||zG(n,i)})}function zG(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(Ow(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),WN(n))}function qN(n,e,t){for(const i of t)i instanceof UG?(n.rc.addReference(i.key,e),YJ(n,i)):i instanceof HG?(Ve("SyncEngine","Document no longer in limbo: "+i.key),n.rc.removeReference(i.key,e),n.rc.containsKey(i.key)||zG(n,i.key)):dt()}function YJ(n,e){const t=e.key,i=t.path.canonicalString();n.sc.get(t)||n.nc.has(i)||(Ve("SyncEngine","New document in limbo: "+t),n.nc.add(i),WN(n))}function WN(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new tt(fn.fromString(e)),i=n.cc.next();n.ic.set(i,new HJ(t)),n.sc=n.sc.insert(t,i),OS(n.remoteStore,new hf(nl(z_(t.path)),i,2,vo.ot))}}function Dd(n,e,t){return KN.apply(this,arguments)}function KN(){return KN=(0,Ce.Z)(function*(n,e,t){const i=it(n),r=[],s=[],l=[];var h;i.tc.isEmpty()||(i.tc.forEach((h,p)=>{l.push(i.hc(p,e,t).then(y=>{if(y){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),r.push(y);const E=eN.Vi(p.targetId,y);s.push(E)}}))}),yield Promise.all(l),i.Zu.Go(r),yield(h=(0,Ce.Z)(function*(p,y){const E=it(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>he.forEach(y,k=>he.forEach(k.Pi,N=>E.persistence.referenceDelegate.addReference(I,k.targetId,N)).next(()=>he.forEach(k.vi,N=>E.persistence.referenceDelegate.removeReference(I,k.targetId,N)))))}catch(I){if(!sf(I))throw I;Ve("LocalStore","Failed to update sequence numbers: "+I)}for(const I of y){const k=I.targetId;if(!I.fromCache){const N=E.$i.get(k),J=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);E.$i=E.$i.insert(k,J)}}}),function(p,y){return h.apply(this,arguments)})(i.localStore,s))}),KN.apply(this,arguments)}function QJ(n,e){return ZN.apply(this,arguments)}function ZN(){return ZN=(0,Ce.Z)(function*(n,e){const t=it(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const i=yield vG(t.localStore,e);t.currentUser=e,(r=t).uc.forEach(l=>{l.forEach(h=>{h.reject(new Ne(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.uc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Dd(t,i.Ki)}var r}),ZN.apply(this,arguments)}function XJ(n,e){const t=it(n),i=t.ic.get(e);if(i&&i.Xu)return Kt().add(i.key);{let r=Kt();const s=t.ec.get(e);if(!s)return r;for(const l of s){const h=t.tc.get(l);r=r.unionWith(h.view.qu)}return r}}function JJ(n,e){return YN.apply(this,arguments)}function YN(){return YN=(0,Ce.Z)(function*(n,e){const t=it(n),i=yield xS(t.localStore,e.query,!0),r=e.view.Ju(i);return t.isPrimaryClient&&qN(t,e.targetId,r.zu),r}),YN.apply(this,arguments)}function eee(n,e){return QN.apply(this,arguments)}function QN(){return QN=(0,Ce.Z)(function*(n,e){const t=it(n);return CG(t.localStore,e).then(i=>Dd(t,i))}),QN.apply(this,arguments)}function tee(n,e,t,i){return XN.apply(this,arguments)}function XN(){return XN=(0,Ce.Z)(function*(n,e,t,i){const r=it(n),s=yield function(l,h){const p=it(l),y=it(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.yn(E,h).next(I=>I?p.localDocuments.getDocuments(E,I):he.resolve(null)))}(r.localStore,e);var h;null!==s?("pending"===t?yield ry(r.remoteStore):"acknowledged"===t||"rejected"===t?(zN(r,e,i||null),GN(r,e),h=e,it(it(r.localStore).mutationQueue).In(h)):dt(),yield Dd(r,s)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),XN.apply(this,arguments)}function JN(){return JN=(0,Ce.Z)(function*(n,e){const t=it(n);if(r1(t),s1(t),!0===e&&!0!==t.ac){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield qG(t,i.toArray());t.ac=!0,yield IN(t.remoteStore,!0);for(const s of r)OS(t.remoteStore,s)}else if(!1===e&&!1!==t.ac){const i=[];let r=Promise.resolve();t.ec.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then(()=>(cy(t,l),ny(t.localStore,l,!0))),Ow(t.remoteStore,l)}),yield r,yield qG(t,i),function(s){const l=it(s);l.ic.forEach((h,p)=>{Ow(l.remoteStore,p)}),l.rc.cs(),l.ic=new Map,l.sc=new Pi(tt.comparator)}(t),t.ac=!1,yield IN(t.remoteStore,!1)}}),JN.apply(this,arguments)}function qG(n,e,t){return e1.apply(this,arguments)}function e1(){return e1=(0,Ce.Z)(function*(n,e,t){const i=it(n),r=[],s=[];for(const l of e){let h;const p=i.ec.get(l);if(p&&0!==p.length){h=yield ty(i.localStore,nl(p[0]));for(const y of p){const E=i.tc.get(y),I=yield JJ(i,E);I.snapshot&&s.push(I.snapshot)}}else{const y=yield EG(i.localStore,l);h=yield ty(i.localStore,y),yield NN(i,WG(y),l,!1)}r.push(h)}return i.Zu.Go(s),r}),e1.apply(this,arguments)}function WG(n){return t$(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function iee(n){const e=it(n);return it(it(e.localStore).persistence).Ri()}function ree(n,e,t,i){return t1.apply(this,arguments)}function t1(){return t1=(0,Ce.Z)(function*(n,e,t,i){const r=it(n);if(r.ac)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const s=r.ec.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield CG(r.localStore,r$(s[0])),h=_w.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Dd(r,l,h);break}case"rejected":yield ny(r.localStore,e,!0),cy(r,e,i);break;default:dt()}}),t1.apply(this,arguments)}function see(n,e,t){return n1.apply(this,arguments)}function n1(){return n1=(0,Ce.Z)(function*(n,e,t){const i=r1(n);if(i.ac){for(const r of e){if(i.ec.has(r)){Ve("SyncEngine","Adding an already active target "+r);continue}const s=yield EG(i.localStore,r),l=yield ty(i.localStore,s);yield NN(i,WG(s),l.targetId,!1),OS(i.remoteStore,l)}for(const r of t)i.ec.has(r)&&(yield ny(i.localStore,r,!1).then(()=>{Ow(i.remoteStore,r),cy(i,r)}).catch(rf))}}),n1.apply(this,arguments)}function r1(n){const e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$G.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qJ.bind(null,e),e.Zu.Go=FJ.bind(null,e.eventManager),e.Zu.lc=LJ.bind(null,e.eventManager),e}function s1(n){const e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KJ.bind(null,e),e}class KG{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.wt=kw(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return yG(this.persistence,new _G,e.initialUser,this.wt)}_c(e){return new mG(SS.Ms,this.wt)}dc(e){return new SG}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ZG extends KG{constructor(e,t,i){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,Ce.Z)(function*(){yield t().call(i,e),yield i.yc.initialize(i,e),yield s1(i.yc.syncEngine),yield ry(i.yc.remoteStore),yield i.persistence.ci(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return yG(this.persistence,new _G,e.initialUser,this.wt)}mc(e,t){return new YX(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const i=new RQ(t,this.persistence);return new kQ(e.asyncQueue,i)}_c(e){const t=JP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?wo.withCacheSize(this.cacheSizeBytes):wo.DEFAULT;return new XP(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,xG(),RS(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new SG}}class aee extends ZG{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,Ce.Z)(function*(){yield t().call(i,e);const r=i.yc.syncEngine;i.sharedClientState instanceof lN&&(i.sharedClientState.syncEngine={kr:tee.bind(null,r),Or:ree.bind(null,r),Mr:see.bind(null,r),Ri:iee.bind(null,r),Nr:eee.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.ci(function(){var s=(0,Ce.Z)(function*(l){yield function nee(n,e){return JN.apply(this,arguments)}(i.yc.syncEngine,l),i.gcScheduler&&(l&&!i.gcScheduler.started?i.gcScheduler.start():l||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(l&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():l||i.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}dc(e){const t=xG();if(!lN.V(t))throw new Ne(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=JP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lN(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class o1{initialize(e,t){var i=this;return(0,Ce.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>GG(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=QJ.bind(null,i.syncEngine),yield IN(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new NJ}createDatastore(e){const t=kw(e.databaseInfo.databaseId),i=new vJ(e.databaseInfo);return new EJ(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=h=>GG(this.syncEngine,h,0),l=AG.V()?new AG:new gJ,new DJ(t,i,r,s,l);var t,i,r,s,l}createSyncEngine(e,t){return function(i,r,s,l,h,p,y){const E=new jJ(i,r,s,l,h,p);return y&&(E.ac=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const i=it(t);Ve("RemoteStore","RemoteStore shutting down."),i.lu.add(5),yield iy(i),i.du.shutdown(),i._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function YG(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class NS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class lee{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Fr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(i=>{i&&i.Cu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.bc();if(null===t)return null;const i=e.Ac.decode(t),r=Number(i);isNaN(r)&&e.Pc(`length string (${i}) is not valid number`);const s=yield e.vc(r);return new VJ(JSON.parse(s),t.length+r)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ce.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}vc(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const i=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class cee{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ce.Z)(function*(s,l){const h=it(s),p=ww(h.wt)+"/documents",y={documents:l.map(N=>bw(h.wt,N))},E=yield h.ao("BatchGetDocuments",p,y,l.length),I=new Map;E.forEach(N=>{const U=function hX(n,e){return"found"in e?function(t,i){Ft(!!i.found);const r=au(t,i.found.name),s=Lr(i.found.updateTime),l=new rs({mapValue:{fields:i.found.fields}});return Qn.newFoundDocument(r,s,l)}(n,e):"missing"in e?function(t,i){Ft(!!i.missing),Ft(!!i.readTime);const r=au(t,i.missing),s=Lr(i.readTime);return Qn.newNoDocument(r,s)}(n,e):dt()}(h.wt,N);I.set(U.key.toString(),U)});const k=[];return l.forEach(N=>{const U=I.get(N.toString());Ft(!!U),k.push(U)}),k}),function(s,l){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Y_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=tt.fromPath(r);e.mutations.push(new BP(s,e.precondition(s)))}),yield(i=(0,Ce.Z)(function*(r,s){const l=it(r),h=ww(l.wt)+"/documents",p={writes:s.map(y=>Ew(l.wt,y))};yield l.ro("Commit",h,p)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=Rt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Ne(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ii.updateTime(t):Ii.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Rt.min()))throw new Ne(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ii.updateTime(t)}return Ii.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uee{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Dc=i.maxAttempts,this.So=new cN(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ce.Z)(function*(){const t=new cee(e.datastore),i=e.xc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Nc(s)}))}).catch(r=>{e.Nc(r)})}))}xc(e){try{const t=this.updateFunction(e);return!ow(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!v$(t)}return!1}}class dee{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Nr.UNAUTHENTICATED,this.clientId=Mj.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var l=(0,Ce.Z)(function*(h){Ve("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>(Ve("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=oy(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function QG(n,e){return a1.apply(this,arguments)}function a1(){return a1=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ce.Z)(function*(s){i.isEqual(s)||(yield vG(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),a1.apply(this,arguments)}function XG(n,e){return l1.apply(this,arguments)}function l1(){return l1=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield c1(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>FG(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>FG(e.remoteStore,s)),n.onlineComponents=e}),l1.apply(this,arguments)}function c1(n){return u1.apply(this,arguments)}function u1(){return u1=(0,Ce.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield QG(n,new KG)),n.offlineComponents}),u1.apply(this,arguments)}function FS(n){return d1.apply(this,arguments)}function d1(){return d1=(0,Ce.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield XG(n,new o1)),n.onlineComponents}),d1.apply(this,arguments)}function JG(n){return c1(n).then(e=>e.persistence)}function h1(n){return c1(n).then(e=>e.localStore)}function e3(n){return FS(n).then(e=>e.remoteStore)}function f1(n){return FS(n).then(e=>e.syncEngine)}function uy(n){return p1.apply(this,arguments)}function p1(){return p1=(0,Ce.Z)(function*(n){const e=yield FS(n),t=e.eventManager;return t.onListen=$J.bind(null,e.syncEngine),t.onUnlisten=GJ.bind(null,e.syncEngine),t}),p1.apply(this,arguments)}function t3(n,e,t={}){const i=new Fr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(r,s,l,h,p){const y=new NS({next:I=>{s.enqueueAndForget(()=>MN(r,E));const k=I.docs.has(l);!k&&I.fromCache?p.reject(new Ne(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&I.fromCache&&h&&"server"===h.source?p.reject(new Ne(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),E=new ON(z_(l.path),y,{includeMetadataChanges:!0,Du:!0});return AN(r,E)}(yield uy(n),n.asyncQueue,e,t,i)})),i.promise}function n3(n,e,t={}){const i=new Fr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(r,s,l,h,p){const y=new NS({next:I=>{s.enqueueAndForget(()=>MN(r,E)),I.fromCache&&"server"===h.source?p.reject(new Ne(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),E=new ON(l,y,{includeMetadataChanges:!0,Du:!0});return AN(r,E)}(yield uy(n),n.asyncQueue,e,t,i)})),i.promise}const r3=new Map;function m1(n,e,t){if(!t)throw new Ne(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function s3(n,e,t,i){if(!0===e&&!0===i)throw new Ne(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function o3(n){if(!tt.isDocumentKey(n))throw new Ne(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function a3(n){if(tt.isDocumentKey(n))throw new Ne(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function LS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=LS(n);throw new Ne(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function l3(n,e){if(e<=0)throw new Ne(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class c3{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,s3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pw{constructor(e,t,i){this._authCredentials=t,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c3({}),this._settingsFrozen=!1,e instanceof wd?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Ne(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wd(r.options.projectId)}(e))}get app(){if(!this._app)throw new Ne(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c3(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new wQ;switch(t.type){case"gapi":const i=t.client;return Ft(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new IQ(i,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=r3.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),r3.delete(e),t.terminate())}(this),Promise.resolve()}}class ai{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ai(this.firestore,e,this._key)}}class ws{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ws(this.firestore,e,this._query)}}class cu extends ws{constructor(e,t,i){super(e,t,z_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ai(this.firestore,null,new tt(e))}withConverter(e){return new cu(this.firestore,e,this._path)}}function u3(n,e,...t){if(n=(0,F.m9)(n),m1("collection","path",e),n instanceof Pw){const i=fn.fromString(e,...t);return a3(i),new cu(n,null,i)}{if(!(n instanceof ai||n instanceof cu))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(fn.fromString(e,...t));return a3(i),new cu(n.firestore,null,i)}}function VS(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=Mj.I()),m1("doc","path",e),n instanceof Pw){const i=fn.fromString(e,...t);return o3(i),new ai(n,null,new tt(i))}{if(!(n instanceof ai||n instanceof cu))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(fn.fromString(e,...t));return o3(i),new ai(n.firestore,n instanceof cu?n.converter:null,new tt(i))}}function d3(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof ai||n instanceof cu)&&(e instanceof ai||e instanceof cu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function h3(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof ws&&e instanceof ws&&n.firestore===e.firestore&&hw(n._query,e._query)&&n.converter===e.converter}class Eee{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new cN(this,"async_queue_retry"),this.Kc=()=>{const t=RS();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=RS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=RS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Fr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!sf(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(i=>{throw this.Bc=i,this.Lc=!1,ir("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(i)),i}).then(i=>(this.Lc=!1,i))));return this.Oc=t,t}enqueueAfterDelay(e,t,i){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const r=SN.createAndSchedule(this,e,t,i,s=>this.Wc(s));return this.$c.push(r),r}Gc(){this.Bc&&dt()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function g1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class Cee{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class vi extends Pw{constructor(e,t,i){super(e,t,i),this.type="firestore",this._queue=new Eee,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||f3(this),this._firestoreClient.terminate()}}function sr(n){return n._firestoreClient||f3(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function f3(n){var e;const t=n._freezeSettings(),i=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new NQ(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new dee(n._authCredentials,n._appCheckCredentials,n._queue,i)}function p3(n,e,t){const i=new Fr;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield QG(n,t),yield XG(n,e),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(l=s).name?l.code===_e.FAILED_PRECONDITION||l.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var l})).then(()=>i.promise)}function m3(n){if(n._initialized||n._terminated)throw new Ne(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Id{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ji(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class uu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uu(fr.fromBase64String(e))}catch(t){throw new Ne(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new uu(fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Fm{constructor(e){this._methodName=e}}class BS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}}const Oee=/^__.*__$/;class Pee{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Cd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Z_(e,this.data,t,this.fieldTransforms)}}class g3{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Cd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class US{constructor(e,t,i,r,s,l){this.settings=e,this.databaseId=t,this.wt=i,this.ignoreUndefinedProperties=r,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new US(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:i,na:!1});return r.sa(e),r}ia(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:i,na:!1});return r.Xc(),r}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return $S(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(_3(this.Zc)&&Oee.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Nee{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=i||kw(e)}aa(e,t,i,r=!1){return new US({Zc:e,methodName:t,ca:i,path:ji.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Lm(n){const e=n._freezeSettings(),t=kw(n._databaseId);return new Nee(n._databaseId,!!e.ignoreUndefinedProperties,t)}function HS(n,e,t,i,r,s={}){const l=n.aa(s.merge||s.mergeFields?2:0,e,t,r);b1("Data must be an object, but it was:",l,i);const h=b3(i,l);let p,y;if(s.merge)p=new na(l.fieldMask),y=l.fieldTransforms;else if(s.mergeFields){const E=[];for(const I of s.mergeFields){const k=w1(e,I,t);if(!l.contains(k))throw new Ne(_e.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);E3(E,k)||E.push(k)}p=new na(E),y=l.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,y=l.fieldTransforms;return new Pee(new rs(h),p,y)}class Nw extends Fm{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nw}}function y3(n,e,t){return new US({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class _1 extends Fm{_toFieldTransform(e){return new fw(e.path,new W_)}isEqual(e){return e instanceof _1}}class Fee extends Fm{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=y3(this,e,!0),i=this.ha.map(s=>Vm(s,t)),r=new Tm(i);return new fw(e.path,r)}isEqual(e){return this===e}}class Lee extends Fm{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=y3(this,e,!0),i=this.ha.map(s=>Vm(s,t)),r=new Sm(i);return new fw(e.path,r)}isEqual(e){return this===e}}class Vee extends Fm{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new K_(e.wt,l$(e.wt,this.la));return new fw(e.path,t)}isEqual(e){return this===e}}function y1(n,e,t,i){const r=n.aa(1,e,t);b1("Data must be an object, but it was:",r,i);const s=[],l=rs.empty();wm(i,(p,y)=>{const E=jS(e,p,t);y=(0,F.m9)(y);const I=r.ia(E);if(y instanceof Nw)s.push(E);else{const k=Vm(y,I);null!=k&&(s.push(E),l.set(E,k))}});const h=new na(s);return new g3(l,h,r.fieldTransforms)}function v1(n,e,t,i,r,s){const l=n.aa(1,e,t),h=[w1(e,i,t)],p=[r];if(s.length%2!=0)throw new Ne(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<s.length;k+=2)h.push(w1(e,s[k])),p.push(s[k+1]);const y=[],E=rs.empty();for(let k=h.length-1;k>=0;--k)if(!E3(y,h[k])){const N=h[k];let U=p[k];U=(0,F.m9)(U);const J=l.ia(N);if(U instanceof Nw)y.push(N);else{const ce=Vm(U,J);null!=ce&&(y.push(N),E.set(N,ce))}}const I=new na(y);return new g3(E,I,l.fieldTransforms)}function v3(n,e,t,i=!1){return Vm(t,n.aa(i?4:3,e))}function Vm(n,e){if(w3(n=(0,F.m9)(n)))return b1("Unsupported field value:",e,n),b3(n,e);if(n instanceof Fm)return function(t,i){if(!_3(i.Zc))throw i.oa(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.oa(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const l of t){let h=Vm(l,i.ra(s));null==h&&(h={nullValue:"NULL_VALUE"}),r.push(h),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return l$(i.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=yi.fromDate(t);return{timestampValue:vw(i.wt,r)}}if(t instanceof yi){const r=new yi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:vw(i.wt,r)}}if(t instanceof BS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof uu)return{bytesValue:x$(i.wt,t._byteString)};if(t instanceof ai){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:UP(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.oa(`Unsupported field value: ${LS(t)}`)}(n,e)}function b3(n,e){const t={};return Vj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wm(n,(i,r)=>{const s=Vm(r,e.ea(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function w3(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof yi||n instanceof BS||n instanceof uu||n instanceof ai||n instanceof Fm)}function b1(n,e,t){if(!w3(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=LS(t);throw e.oa("an object"===i?n+" a custom object":n+" "+i)}var i}function w1(n,e,t){if((e=(0,F.m9)(e))instanceof Id)return e._internalPath;if("string"==typeof e)return jS(n,e);throw $S("Field path arguments must be of type string or ",n,!1,void 0,t)}const Bee=new RegExp("[~\\*/\\[\\]]");function jS(n,e,t){if(e.search(Bee)>=0)throw $S(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Id(...e.split("."))._internalPath}catch{throw $S(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $S(n,e,t,i,r){const s=i&&!i.isEmpty(),l=void 0!==r;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||l)&&(p+=" (found",s&&(p+=` in field ${i}`),l&&(p+=` in document ${r}`),p+=")"),new Ne(_e.INVALID_ARGUMENT,h+n+p)}function E3(n,e){return n.some(t=>t.isEqual(e))}class Fw{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ai(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Uee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(GS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Uee extends Fw{data(){return super.data()}}function GS(n,e){return"string"==typeof e?jS(n,e):e instanceof Id?e._internalPath:e._delegate._internalPath}class Bm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Td extends Fw{constructor(e,t,i,r,s,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(GS("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Lw extends Td{data(e={}){return super.data(e)}}class _f{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Bm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Lw(this._firestore,this._userDataWriter,i.key,i,new Bm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new Lw(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Bm(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||3!==l.type).map(l=>{const h=new Lw(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Bm(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return 0!==l.type&&(p=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),y=s.indexOf(l.doc.key)),{type:Hee(l.type),doc:h,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Hee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function C3(n,e){return n instanceof Td&&e instanceof Td?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof _f&&e instanceof _f&&n._firestore===e._firestore&&h3(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function D3(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vw{}function yf(n,...e){for(const t of e)n=t._apply(n);return n}class jee extends Vw{constructor(e,t,i){super(),this.fa=e,this.da=t,this._a=i,this.type="where"}_apply(e){const t=Lm(e.firestore),i=function(r,s,l,h,p,y,E){let I;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){M3(E,y);const N=[];for(const U of E)N.push(x3(h,r,U));I={arrayValue:{values:N}}}else I=x3(h,r,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||M3(E,y),I=v3(l,"where",E,"in"===y||"not-in"===y);const k=ss.create(p,y,I);return function(N,U){if(U.ht()){const ce=NP(N);if(null!==ce&&!ce.isEqual(U.field))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ce.toString()}' and '${U.field.toString()}'`);const Ue=PP(N);null!==Ue&&k3(0,U.field,Ue)}const J=function(ce,Ue){for(const Ke of ce.filters)if(Ue.indexOf(Ke.op)>=0)return Ke.op;return null}(N,function(ce){switch(ce){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==J)throw new Ne(_e.INVALID_ARGUMENT,J===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${J.toString()}' filters.`)}(r,k),k}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new ws(e.firestore,e.converter,function(r,s){const l=r.filters.concat([s]);return new Ed(r.path,r.collectionGroup,r.explicitOrderBy.slice(),l,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}class Gee extends Vw{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new G_(r,s);return function(h,p){if(null===PP(h)){const y=NP(h);null!==y&&k3(0,y,p.field)}}(i,l),l}(e._query,this.fa,this.wa);return new ws(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Ed(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class I3 extends Vw{constructor(e,t,i){super(),this.type=e,this.ma=t,this.ga=i}_apply(e){return new ws(e.firestore,e.converter,n$(e._query,this.ma,this.ga))}}class T3 extends Vw{constructor(e,t,i){super(),this.type=e,this.ya=t,this.pa=i}_apply(e){const t=A3(e,this.type,this.ya,this.pa);return new ws(e.firestore,e.converter,(r=t,new Ed((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class S3 extends Vw{constructor(e,t,i){super(),this.type=e,this.ya=t,this.pa=i}_apply(e){const t=A3(e,this.type,this.ya,this.pa);return new ws(e.firestore,e.converter,(r=t,new Ed((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function A3(n,e,t,i){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof Fw)return function(r,s,l,h,p){if(!h)throw new Ne(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const E of q_(r))if(E.field.isKeyField())y.push(Dm(s,h.key));else{const I=h.data.field(E.field);if(kP(I))throw new Ne(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const k=E.field.canonicalString();throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}y.push(I)}return new uf(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Lm(n.firestore);return function(s,l,h,p,y,E){const I=s.explicitOrderBy;if(y.length>I.length)throw new Ne(_e.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let N=0;N<y.length;N++){const U=y[N];if(I[N].field.isKeyField()){if("string"!=typeof U)throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof U}`);if(!FP(s)&&-1!==U.indexOf("/"))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${U}' contains a slash.`);const J=s.path.child(fn.fromString(U));if(!tt.isDocumentKey(J))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const ce=new tt(J);k.push(Dm(l,ce))}else{const J=v3(h,p,U);k.push(J)}}return new uf(k,E)}(n._query,n.firestore._databaseId,r,e,t,i)}}function x3(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FP(e)&&-1!==t.indexOf("/"))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(fn.fromString(t));if(!tt.isDocumentKey(i))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Dm(n,new tt(i))}if(t instanceof ai)return Dm(n,t._key);throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${LS(t)}.`)}function M3(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function k3(n,e,t){if(!t.isEqual(e))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Xee={maxAttempts:5};class E1{convertValue(e,t="none"){switch(Cm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ni(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Em(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const i={};return wm(e.fields,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new BS(Ni(e.latitude),Ni(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Uj(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(sw(e));default:return null}}convertTimestamp(e){const t=af(e);return new yi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=fn.fromString(e);Ft(B$(i));const r=new wd(i.get(1),i.get(3)),s=new tt(i.popFirst(5));return r.isEqual(t)||ir(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function zS(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Jee extends E1{constructor(e){super(),this.firestore=e}convertBytes(e){return new uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ai(this.firestore,null,t)}}class R3{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Lm(e)}set(e,t,i){this._verifyNotCommitted();const r=vf(e,this._firestore),s=zS(r.converter,t,i),l=HS(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(l.toMutation(r._key,Ii.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=vf(e,this._firestore);let l;return l="string"==typeof(t=(0,F.m9)(t))||t instanceof Id?v1(this._dataReader,"WriteBatch.update",s._key,t,i,r):y1(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,Ii.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vf(e,this._firestore);return this._mutations=this._mutations.concat(new Y_(t._key,Ii.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vf(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new Ne(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Um extends E1{constructor(e){super(),this.firestore=e}convertBytes(e){return new uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ai(this.firestore,null,t)}}function O3(n,e,t){n=cn(n,ai);const i=cn(n.firestore,vi),r=zS(n.converter,e,t);return dy(i,[HS(Lm(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Ii.none())])}function P3(n,e,t,...i){n=cn(n,ai);const r=cn(n.firestore,vi),s=Lm(r);let l;return l="string"==typeof(e=(0,F.m9)(e))||e instanceof Id?v1(s,"updateDoc",n._key,e,t,i):y1(s,"updateDoc",n._key,e),dy(r,[l.toMutation(n._key,Ii.exists(!0))])}function N3(n,...e){var t,i,r;n=(0,F.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||g1(e[l])||(s=e[l],l++);const h={includeMetadataChanges:s.includeMetadataChanges};if(g1(e[l])){const I=e[l];e[l]=null===(t=I.next)||void 0===t?void 0:t.bind(I),e[l+1]=null===(i=I.error)||void 0===i?void 0:i.bind(I),e[l+2]=null===(r=I.complete)||void 0===r?void 0:r.bind(I)}let p,y,E;if(n instanceof ai)y=cn(n.firestore,vi),E=z_(n._key.path),p={next:I=>{e[l]&&e[l](C1(y,n,I))},error:e[l+1],complete:e[l+2]};else{const I=cn(n,ws);y=cn(I.firestore,vi),E=I._query;const k=new Um(y);p={next:N=>{e[l]&&e[l](new _f(y,k,I,N))},error:e[l+1],complete:e[l+2]},D3(n._query)}return function(I,k,N,U){const J=new NS(U),ce=new ON(k,J,N);return I.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return AN(yield uy(I),ce)})),()=>{J.Tc(),I.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return MN(yield uy(I),ce)}))}}(sr(y),E,h,p)}function dy(n,e){return function(t,i){const r=new Fr;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function zJ(n,e,t){return VN.apply(this,arguments)}(yield f1(t),i,r)})),r.promise}(sr(n),e)}function C1(n,e,t){const i=t.docs.get(e._key),r=new Um(n);return new Td(n,r,e._key,i,new Bm(t.hasPendingWrites,t.fromCache),e.converter)}class cte extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Lm(e)}get(e){const t=vf(e,this._firestore),i=new Jee(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return dt();const s=r[0];if(s.isFoundDocument())return new Fw(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new Fw(this._firestore,i,t._key,null,t.converter);throw dt()})}set(e,t,i){const r=vf(e,this._firestore),s=zS(r.converter,t,i),l=HS(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,l),this}update(e,t,i,...r){const s=vf(e,this._firestore);let l;return l="string"==typeof(t=(0,F.m9)(t))||t instanceof Id?v1(this._dataReader,"Transaction.update",s._key,t,i,r):y1(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=vf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vf(e,this._firestore),i=new Um(this._firestore);return super.get(e).then(r=>new Td(this._firestore,i,t._key,r._document,new Bm(!1,!1),t.converter))}}function D1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function L3(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function V3(){if(!function OQ(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){U_=_s.SDK_VERSION,(0,_s._registerComponent)(new Ka.wA("firestore",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),s=new vi(r,new CQ(t.getProvider("auth-internal")),new TQ(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s},"PUBLIC")),(0,_s.registerVersion)(Sj,"3.4.12",n),(0,_s.registerVersion)(Sj,"3.4.12","esm2017")}();class Bw{constructor(e){this._delegate=e}static fromBase64String(e){return V3(),new Bw(uu.fromBase64String(e))}static fromUint8Array(e){return L3(),new Bw(uu.fromUint8Array(e))}toBase64(){return V3(),this._delegate.toBase64()}toUint8Array(){return L3(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function I1(n){return function yte(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class vte{enableIndexedDbPersistence(e,t){return function Iee(n,e){m3(n=cn(n,vi));const t=sr(n),i=n._freezeSettings(),r=new o1;return p3(t,r,new ZG(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Tee(n){m3(n=cn(n,vi));const e=sr(n),t=n._freezeSettings(),i=new o1;return p3(e,i,new aee(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function See(n){if(n._initialized&&!n._terminated)throw new Ne(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(i){if(!Yl.V())return Promise.resolve();const r=i+"main";yield Yl.delete(r)}),function(i){return t.apply(this,arguments)})(JP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class B3{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof wd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&tw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function bee(n,e,t,i={}){var r;const s=(n=cn(n,Pw))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&tw("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let l,h;if("string"==typeof i.mockUserToken)l=i.mockUserToken,h=Nr.MOCK_USER;else{l=(0,F.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Ne(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Nr(p)}n._authCredentials=new EQ(new Aj(l,h))}}(this._delegate,e,t,i)}enableNetwork(){return function xee(n){return function hee(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield JG(n),t=yield e3(n);return e.setNetworkEnabled(!0),function(i){const r=it(i);return r.lu.delete(0),Rw(r)}(t)}))}(sr(n=cn(n,vi)))}(this._delegate)}disableNetwork(){return function Mee(n){return function fee(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield JG(n),t=yield e3(n);return e.setNetworkEnabled(!1),(i=(0,Ce.Z)(function*(r){const s=it(r);s.lu.add(0),yield iy(s),s._u.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(sr(n=cn(n,vi)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,s3("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Aee(n){return function(e){const t=new Fr;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function ZJ(n,e){return $N.apply(this,arguments)}(yield f1(e),t)})),t.promise}(sr(n=cn(n,vi)))}(this._delegate)}onSnapshotsInSync(e){return function lte(n,e){return function gee(n,e){const t=new NS(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return i=yield uy(n),r=t,it(i).Tu.add(r),void r.next();var i,r})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return i=yield uy(n),r=t,void it(i).Tu.delete(r);var i,r}))}}(sr(n=cn(n,vi)),g1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hy(this,u3(this._delegate,e))}catch(t){throw Ys(t,"collection()","Firestore.collection()")}}doc(e){try{return new il(this,VS(this._delegate,e))}catch(t){throw Ys(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qs(this,function wee(n,e){if(n=cn(n,Pw),m1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ws(n,null,(t=e,new Ed(fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ys(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ute(n,e,t){n=cn(n,vi);const i=Object.assign(Object.assign({},Xee),t);return function(r){if(r.maxAttempts<1)throw new Ne(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function _ee(n,e,t){const i=new Fr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const r=yield(s=n,FS(s).then(l=>l.datastore));var s;new uee(n.asyncQueue,r,t,e,i).run()})),i.promise}(sr(n),r=>e(new cte(n,r)),i)}(this._delegate,t=>e(new U3(this,t)))}batch(){return sr(this._delegate),new H3(new R3(this._delegate,e=>dy(this._delegate,e)))}loadBundle(e){return function kee(n,e){const t=sr(n=cn(n,vi)),i=new Cee;return function yee(n,e,t,i){const r=function(s,l){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return YG(p,y);if(p instanceof ArrayBuffer)return YG(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new lee(p,l);var p}(t,kw(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function oee(n,e,t){const i=it(n);var r;(r=(0,Ce.Z)(function*(s,l,h){try{const p=yield l.getMetadata();if(yield function(k,N){const U=it(k),J=Lr(N.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",ce=>U.Ds.getBundleMetadata(ce,N.id)).then(ce=>!!ce&&ce.createTime.compareTo(J)>=0)}(s.localStore,p))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(k=p).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);h._updateProgress(BG(p));const y=new BJ(p,s.localStore,l.wt);let E=yield l.fc();for(;E;){const k=yield y.Nu(E);k&&h._updateProgress(k),E=yield l.fc()}const I=yield y.complete();return yield Dd(s,I.Mu,void 0),yield function(k,N){const U=it(k);return U.persistence.runTransaction("Save bundle","readwrite",J=>U.Ds.saveBundleMetadata(J,N))}(s.localStore,p),h._completeWith(I.progress),Promise.resolve(I.Ou)}catch(p){return tw("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var k}),function(s,l,h){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield f1(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function Ree(n,e){return function vee(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,i){const r=it(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ds.getNamedQuery(s,i))}(yield h1(n),e)}))}(sr(n=cn(n,vi)),e).then(t=>t?new ws(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Qs(this,t):null)}}class qS extends E1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bw(new uu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return il.forKey(t,this.firestore,null)}}class U3{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qS(e)}get(e){const t=jm(e);return this._delegate.get(t).then(i=>new Uw(this._firestore,new Td(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=jm(e);return i?(D1("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=jm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=jm(e);return this._delegate.delete(t),this}}class H3{constructor(e){this._delegate=e}set(e,t,i){const r=jm(e);return i?(D1("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=jm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=jm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hm{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Lw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hw(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Hm.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Hm(e,new qS(e),t),r.set(t,s)),s}}Hm.INSTANCES=new WeakMap;class il{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qS(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new il(t,new ai(t._delegate,i,new tt(e)))}static forKey(e,t,i){return new il(t,new ai(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new hy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hy(this.firestore,u3(this._delegate,e))}catch(t){throw Ys(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof ai&&d3(this._delegate,e)}set(e,t){t=D1("DocumentReference.set",t);try{return t?O3(this._delegate,e,t):O3(this._delegate,e)}catch(i){throw Ys(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?P3(this._delegate,e):P3(this._delegate,e,t,...i)}catch(r){throw Ys(r,"updateDoc()","DocumentReference.update()")}}delete(){return function ote(n){return dy(cn(n.firestore,vi),[new Y_(n._key,Ii.none())])}(this._delegate)}onSnapshot(...e){const t=j3(e),i=$3(e,r=>new Uw(this.firestore,new Td(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return N3(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function tte(n){n=cn(n,ai);const e=cn(n.firestore,vi),t=sr(e),i=new Um(e);return function pee(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(i=(0,Ce.Z)(function*(r,s,l){try{const h=yield function(p,y){const E=it(p);return E.persistence.runTransaction("read document","readonly",I=>E.localDocuments.getDocument(I,y))}(r,s);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Ne(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=oy(h,`Failed to get document '${s} from cache`);l.reject(p)}}),function(r,s,l){return i.apply(this,arguments)})(yield h1(n),e,t);var i})),t.promise}(t,n._key).then(r=>new Td(e,i,n._key,r,new Bm(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function nte(n){n=cn(n,ai);const e=cn(n.firestore,vi);return t3(sr(e),n._key,{source:"server"}).then(t=>C1(e,n,t))}(this._delegate):function ete(n){n=cn(n,ai);const e=cn(n.firestore,vi);return t3(sr(e),n._key).then(t=>C1(e,n,t))}(this._delegate),t.then(i=>new Uw(this.firestore,new Td(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new il(this.firestore,this._delegate.withConverter(e?Hm.getInstance(this.firestore,e):null))}}function Ys(n,e,t){return n.message=n.message.replace(e,t),n}function j3(n){for(const e of n)if("object"==typeof e&&!I1(e))return e;return{}}function $3(n,e){var t,i;let r;return r=I1(n[0])?n[0]:I1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Uw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new il(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return C3(this._delegate,e._delegate)}}class Hw extends Uw{data(e){const t=this._delegate.data(e);return function bQ(n,e){n||dt()}(void 0!==t),t}}class Qs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qS(e)}where(e,t,i){try{return new Qs(this.firestore,yf(this._delegate,function $ee(n,e,t){const i=e,r=GS("where",n);return new jee(r,i,t)}(e,t,i)))}catch(r){throw Ys(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Qs(this.firestore,yf(this._delegate,function zee(n,e="asc"){const t=e,i=GS("orderBy",n);return new Gee(i,t)}(e,t)))}catch(i){throw Ys(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qs(this.firestore,yf(this._delegate,function qee(n){return l3("limit",n),new I3("limit",n,"F")}(e)))}catch(t){throw Ys(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Qs(this.firestore,yf(this._delegate,function Wee(n){return l3("limitToLast",n),new I3("limitToLast",n,"L")}(e)))}catch(t){throw Ys(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Qs(this.firestore,yf(this._delegate,function Kee(...n){return new T3("startAt",n,!0)}(...e)))}catch(t){throw Ys(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Qs(this.firestore,yf(this._delegate,function Zee(...n){return new T3("startAfter",n,!1)}(...e)))}catch(t){throw Ys(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Qs(this.firestore,yf(this._delegate,function Yee(...n){return new S3("endBefore",n,!1)}(...e)))}catch(t){throw Ys(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Qs(this.firestore,yf(this._delegate,function Qee(...n){return new S3("endAt",n,!0)}(...e)))}catch(t){throw Ys(t,"endAt()","Query.endAt()")}}isEqual(e){return h3(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function rte(n){n=cn(n,ws);const e=cn(n.firestore,vi),t=sr(e),i=new Um(e);return function mee(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(i=(0,Ce.Z)(function*(r,s,l){try{const h=yield xS(r,s,!0),p=new jG(s,h.ji),y=p.Ku(h.documents),E=p.applyChanges(y,!1);l.resolve(E.snapshot)}catch(h){const p=oy(h,`Failed to execute query '${s} against cache`);l.reject(p)}}),function(r,s,l){return i.apply(this,arguments)})(yield h1(n),e,t);var i})),t.promise}(t,n._query).then(r=>new _f(e,i,n,r))}(this._delegate):"server"===e?.source?function ste(n){n=cn(n,ws);const e=cn(n.firestore,vi),t=sr(e),i=new Um(e);return n3(t,n._query,{source:"server"}).then(r=>new _f(e,i,n,r))}(this._delegate):function ite(n){n=cn(n,ws);const e=cn(n.firestore,vi),t=sr(e),i=new Um(e);return D3(n._query),n3(t,n._query).then(r=>new _f(e,i,n,r))}(this._delegate),t.then(i=>new T1(this.firestore,new _f(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=j3(e),i=$3(e,r=>new T1(this.firestore,new _f(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return N3(this._delegate,t,i)}withConverter(e){return new Qs(this.firestore,this._delegate.withConverter(e?Hm.getInstance(this.firestore,e):null))}}class wte{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Hw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class T1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Qs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new wte(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Hw(this._firestore,i))})}isEqual(e){return C3(this._delegate,e._delegate)}}class hy extends Qs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new il(this.firestore,e):null}doc(e){try{return new il(this.firestore,void 0===e?VS(this._delegate):VS(this._delegate,e))}catch(t){throw Ys(t,"doc()","CollectionReference.doc()")}}add(e){return function ate(n,e){const t=cn(n.firestore,vi),i=VS(n),r=zS(n.converter,e);return dy(t,[HS(Lm(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Ii.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new il(this.firestore,t))}isEqual(e){return d3(this._delegate,e._delegate)}withConverter(e){return new hy(this.firestore,this._delegate.withConverter(e?Hm.getInstance(this.firestore,e):null))}}function jm(n){return cn(n,ai)}class S1{constructor(...e){this._delegate=new Id(...e)}static documentId(){return new S1(ji.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof Id&&this._delegate._internalPath.isEqual(e._internalPath)}}class $m{constructor(e){this._delegate=e}static serverTimestamp(){const e=function hte(){return new _1("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new $m(e)}static delete(){const e=function dte(){return new Nw("deleteField")}();return e._methodName="FieldValue.delete",new $m(e)}static arrayUnion(...e){const t=function fte(...n){return new Fee("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new $m(t)}static arrayRemove(...e){const t=function pte(...n){return new Lee("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new $m(t)}static increment(e){const t=function mte(n){return new Vee("increment",n)}(e);return t._methodName="FieldValue.increment",new $m(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ete={Firestore:B3,GeoPoint:BS,Timestamp:yi,Blob:Bw,Transaction:U3,WriteBatch:H3,DocumentReference:il,DocumentSnapshot:Uw,Query:Qs,QueryDocumentSnapshot:Hw,QuerySnapshot:T1,CollectionReference:hy,FieldPath:S1,FieldValue:$m,setLogLevel:function bte(n){!function vQ(n){nf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function G3(n,e){return function Ite(n,e=_p.z){return new qn.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function A1(n,e){return G3(n,e).pipe((0,ot.U)(t=>({payload:t,type:"query"})))}function WS(n,e){return A1(n,e).pipe(Kr(void 0),OO(),(0,ot.U)(([t,i])=>{const r=i.payload.docChanges(),s=r.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((l,h)=>{const p=r.find(E=>E.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(E=>E.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),s}))}function z3(n,e,t){return WS(n,t).pipe(Ia((i,r)=>function Ste(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function Ate(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return x1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return x1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return x1(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),gp(),(0,ot.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function x1(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function q3(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Dte(n){(function Cte(n,e){n.INTERNAL.registerComponent(new Ka.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},Ete)))})(n,(e,t)=>new B3(e,t,new vte)),n.registerVersion("@firebase/firestore-compat","0.1.21")}(Fk.Z);class W3{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=WS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ot.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Kr(void 0),OO(),kn(([i,r])=>r.length>0||!i),(0,ot.U)(([i,r])=>r),hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ia((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=q3(e);return z3(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return A1(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),hn.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(hn.iC)}add(e){return this.ref.add(e)}doc(e){return new K3(this.ref.doc(e),this.afs)}}class K3{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=Q3(i,t);return new W3(r,s,this.afs)}snapshotChanges(){return function Tte(n,e){return G3(n,e).pipe(Kr(void 0),OO(),(0,ot.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,nn.D)(this.ref.get(e)).pipe(hn.iC)}}class xte{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?WS(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),kn(t=>t.length>0),hn.iC):WS(this.query,this.afs.schedulers.outsideAngular).pipe(hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ia((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=q3(e);return z3(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return A1(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),hn.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(hn.iC)}}const Z3=new u.OlP("angularfire2.enableFirestorePersistence"),Y3=new u.OlP("angularfire2.firestore.persistenceSettings"),Mte=new u.OlP("angularfire2.firestore.settings"),kte=new u.OlP("angularfire2.firestore.use-emulator");function Q3(n,e=(t=>t)){return{query:e(n),ref:n}}let Rte=(()=>{class n{constructor(t,i,r,s,l,h,p,y,E,I,k,N,U,J,ce,Ue,Ke){this.schedulers=p;const nt=(0,Ri.on)(t,h,i),Qe=E;I&&Nk(nt,h,k,U,J,ce,N,Ue),[this.firestore,this.persistenceEnabled$]=(0,Ri.cc)(`${nt.name}.firestore`,"AngularFirestore",nt.name,()=>{const St=h.runOutsideAngular(()=>nt.firestore());if(s&&St.settings(s),Qe&&St.useEmulator(...Qe),r&&!Od(l)){const Ot=()=>{try{return(0,nn.D)(St.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(an){return typeof console<"u"&&console.warn(an),Be(!1)}};return[St,h.runOutsideAngular(Ot)]}return[St,Be(!1)]},[s,Qe,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=Q3(r,i),h=this.schedulers.ngZone.run(()=>s);return new W3(h,l,this)}collectionGroup(t,i){const r=i||(l=>l),s=this.firestore.collectionGroup(t);return new xte(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new K3(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ri.Dh),u.LFG(Ri.xv,8),u.LFG(Z3,8),u.LFG(Mte,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(hn.HU),u.LFG(Y3,8),u.LFG(kte,8),u.LFG(fd,8),u.LFG(xk,8),u.LFG(Mk,8),u.LFG(kk,8),u.LFG(Rk,8),u.LFG(Ok,8),u.LFG(Pk,8),u.LFG(e0,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ote=(()=>{class n{constructor(){CI.Z.registerVersion("angularfire",hn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Z3,useValue:!0},{provide:Y3,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Rte]}),n})();const X3_firebaseConfig={apiKey:"AIzaSyAKO8LuJ1BHNKXyl7SjJa_a9uX1o6MoEEs",authDomain:"angulargroceries.firebaseapp.com",databaseURL:"https://angulargroceries-default-rtdb.europe-west1.firebasedatabase.app",projectId:"angulargroceries",storageBucket:"angulargroceries.appspot.com",messagingSenderId:"1074478989562",appId:"1:1074478989562:web:7b3adf0abe204d37b54943"};let Pte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Ri.hO.initializeApp(X3_firebaseConfig),Ri.hO,pq,Ote,d9,D8]}),n})(),Nte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[En,En]}),n})(),Fte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[D5,wv,Rx,vK,Nte,M8,F5,Z8,MU,r5,gM,dI]}),n})(),Lte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[EY]}),n.\u0275inj=u.cJS({imports:[dn,wK,Pte,Fte,wY]}),n})();(0,u.G48)(),wu().bootstrapModule(Lte).catch(n=>console.error(n))},5867:(ft,xe,V)=>{V.d(xe,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=V(9681);(0,u.registerVersion)("firebase","9.9.0","app")},127:(ft,xe,V)=>{V.d(xe,{Z:()=>u.Z});var u=V(3942);u.Z.registerVersion("firebase","9.9.0","app-compat")},1451:(ft,xe,V)=>{V.r(xe);var u=V(5861),ie=V(3942),L=V(2090),pe=V(9681),le=V(655),ye=V(1877),se=V(4859);const ke=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},$e=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new ye.Yd("@firebase/auth");function rt(v,...m){et.logLevel<=ye.in.ERROR&&et.error(`Auth (${pe.SDK_VERSION}): ${v}`,...m)}function Re(v,...m){throw ze(v,...m)}function Ee(v,...m){return ze(v,...m)}function Te(v,m,_){const w=Object.assign(Object.assign({},$e()),{[m]:_});return new L.LL("auth","Firebase",w).create(m,{appName:v.name})}function je(v,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&Re(v,"argument-error"),Te(v,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(v,...m){if("string"!=typeof v){const _=m[0],w=[...m.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(_,...w)}return ge.create(v,...m)}function q(v,m,..._){if(!v)throw ze(m,..._)}function De(v){const m="INTERNAL ASSERTION FAILED: "+v;throw rt(m),new Error(m)}function ee(v,m){v||De(m)}const ae=new Map;function oe(v){ee(v instanceof Function,"Expected a class definition");let m=ae.get(v);return m?(ee(m instanceof v,"Instance stored in cache mismatched with class"),m):(m=new v,ae.set(v,m),m)}function Le(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function yt(){return"http:"===Yt()||"https:"===Yt()}function Yt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class un{constructor(m,_){this.shortDelay=m,this.longDelay=_,ee(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Gt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(yt()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jn(v,m){ee(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class mn{static initialize(m,_,w){this.fetchImpl=m,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void De("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void De("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void De("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Gi=new un(3e4,6e4);function en(v,m){return v.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:v.tenantId}):m}function zt(v,m,_,w){return os.apply(this,arguments)}function os(){return(os=(0,u.Z)(function*(v,m,_,w,M={}){return pr(v,M,(0,u.Z)(function*(){let P={},X={};w&&("GET"===m?X=w:P={body:JSON.stringify(w)});const de=(0,L.xO)(Object.assign({key:v.config.apiKey},X)).slice(1),He=yield v._getAdditionalHeaders();return He["Content-Type"]="application/json",v.languageCode&&(He["X-Firebase-Locale"]=v.languageCode),mn.fetch()(Xs(v,v.config.apiHost,_,de),Object.assign({method:m,headers:He,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function pr(v,m,_){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,u.Z)(function*(v,m,_){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},sn),m);try{const M=new ar(v),P=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const X=yield P.json();if("needConfirmation"in X)throw Hr(v,"account-exists-with-different-credential",X);if(P.ok&&!("errorMessage"in X))return X;{const de=P.ok?X.errorMessage:X.error.message,[He,st]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===He)throw Hr(v,"credential-already-in-use",X);if("EMAIL_EXISTS"===He)throw Hr(v,"email-already-in-use",X);if("USER_DISABLED"===He)throw Hr(v,"user-disabled",X);const wt=w[He]||He.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw Te(v,wt,st);Re(v,wt)}}catch(M){if(M instanceof L.ZR)throw M;Re(v,"network-request-failed")}})).apply(this,arguments)}function or(v,m,_,w){return as.apply(this,arguments)}function as(){return(as=(0,u.Z)(function*(v,m,_,w,M={}){const P=yield zt(v,m,_,w,M);return"mfaPendingCredential"in P&&Re(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Xs(v,m,_,w){const M=`${m}${_}?${w}`;return v.config.emulator?jn(v.config,M):`${v.config.apiScheme}://${M}`}class ar{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(Ee(this.auth,"network-request-failed")),Gi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hr(v,m,_){const w={appName:v.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const M=Ee(v,m,w);return M.customData._tokenResponse=_,M}function lr(){return(lr=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function $n(v,m){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function ls(v,m){return cs.apply(this,arguments)}function cs(){return(cs=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Ln(v){if(v)try{const m=new Date(Number(v));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Eo(){return(Eo=(0,u.Z)(function*(v,m=!1){const _=(0,L.m9)(v),w=yield _.getIdToken(m),M=qe(w);q(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const P="object"==typeof M.firebase?M.firebase:void 0,X=P?.sign_in_provider;return{claims:M,token:w,authTime:Ln(Qt(M.auth_time)),issuedAtTime:Ln(Qt(M.iat)),expirationTime:Ln(Qt(M.exp)),signInProvider:X||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function Qt(v){return 1e3*Number(v)}function qe(v){var m;const[_,w,M]=v.split(".");if(void 0===_||void 0===w||void 0===M)return rt("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,L.tV)(w);return P?JSON.parse(P):(rt("Failed to decode base64 JWT payload"),null)}catch(P){return rt("Caught error parsing JWT payload as JSON",null===(m=P)||void 0===m?void 0:m.toString()),null}}function zi(v,m){return li.apply(this,arguments)}function li(){return(li=(0,u.Z)(function*(v,m,_=!1){if(_)return m;try{return yield m}catch(w){throw w instanceof L.ZR&&xt(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function xt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class gr{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(m);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),w)}iteration(){var m=this;return(0,u.Z)(function*(){var _;try{yield m.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(_=w)||void 0===_?void 0:_.code)&&m.schedule(!0))}m.schedule()})()}}class ci{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ln(this.lastLoginAt),this.creationTime=Ln(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jr(v){return ln.apply(this,arguments)}function ln(){return(ln=(0,u.Z)(function*(v){var m;const _=v.auth,w=yield v.getIdToken(),M=yield zi(v,ls(_,{idToken:w}));q(M?.users.length,_,"internal-error");const P=M.users[0];v._notifyReloadListener(P);const X=null!==(m=P.providerUserInfo)&&void 0!==m&&m.length?j(P.providerUserInfo):[],de=W(v.providerData,X),wt=!!v.isAnonymous&&!(v.email&&P.passwordHash||de?.length),_t={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:de,metadata:new ci(P.createdAt,P.lastLoginAt),isAnonymous:wt};Object.assign(v,_t)})).apply(this,arguments)}function $(){return($=(0,u.Z)(function*(v){const m=(0,L.m9)(v);yield jr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function W(v,m){return[...v.filter(w=>!m.some(M=>M.providerId===w.providerId)),...m]}function j(v){return v.map(m=>{var{providerId:_}=m,w=(0,le._T)(m,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Q(){return(Q=(0,u.Z)(function*(v,m){const _=yield pr(v,{},(0,u.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:M,apiKey:P}=v.config,X=Xs(v,M,"/v1/token",`key=${P}`),de=yield v._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",mn.fetch()(X,{method:"POST",headers:de,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Oe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){q(m.idToken,"internal-error"),q(typeof m.idToken<"u","internal-error"),q(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function It(v){const m=qe(v);return q(m,"internal-error"),q(typeof m.exp<"u","internal-error"),q(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var w=this;return(0,u.Z)(function*(){return q(!w.accessToken||w.refreshToken,m,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(m,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var w=this;return(0,u.Z)(function*(){const{accessToken:M,refreshToken:P,expiresIn:X}=yield function Y(v,m){return Q.apply(this,arguments)}(m,_);w.updateTokensAndExpiration(M,P,Number(X))})()}updateTokensAndExpiration(m,_,w){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(m,_){const{refreshToken:w,accessToken:M,expirationTime:P}=_,X=new Oe;return w&&(q("string"==typeof w,"internal-error",{appName:m}),X.refreshToken=w),M&&(q("string"==typeof M,"internal-error",{appName:m}),X.accessToken=M),P&&(q("number"==typeof P,"internal-error",{appName:m}),X.expirationTime=P),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Oe,this.toJSON())}_performRefresh(){return De("not implemented")}}function We(v,m){q("string"==typeof v||typeof v>"u","internal-error",{appName:m})}class pt{constructor(m){var{uid:_,auth:w,stsTokenManager:M}=m,P=(0,le._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new ci(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,u.Z)(function*(){const w=yield zi(_,_.stsTokenManager.getToken(_.auth,m));return q(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(m){return function mr(v){return Eo.apply(this,arguments)}(this,m)}reload(){return function cr(v){return $.apply(this,arguments)}(this)}_assign(m){this!==m&&(q(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new pt(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var w=this;return(0,u.Z)(function*(){let M=!1;m.idToken&&m.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(m),M=!0),_&&(yield jr(w)),yield w.auth._persistUserIfCurrent(w),M&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var m=this;return(0,u.Z)(function*(){const _=yield m.getIdToken();return yield zi(m,function vt(v,m){return lr.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var w,M,P,X,de,He,st,wt;const _t=null!==(w=_.displayName)&&void 0!==w?w:void 0,Mi=null!==(M=_.email)&&void 0!==M?M:void 0,pi=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,Fc=null!==(X=_.photoURL)&&void 0!==X?X:void 0,hh=null!==(de=_.tenantId)&&void 0!==de?de:void 0,sp=null!==(He=_._redirectEventId)&&void 0!==He?He:void 0,fh=null!==(st=_.createdAt)&&void 0!==st?st:void 0,Ay=null!==(wt=_.lastLoginAt)&&void 0!==wt?wt:void 0,{uid:Ua,emailVerified:op,isAnonymous:ph,providerData:Lc,stsTokenManager:zu}=_;q(Ua&&zu,m,"internal-error");const gg=Oe.fromJSON(this.name,zu);q("string"==typeof Ua,m,"internal-error"),We(_t,m.name),We(Mi,m.name),q("boolean"==typeof op,m,"internal-error"),q("boolean"==typeof ph,m,"internal-error"),We(pi,m.name),We(Fc,m.name),We(hh,m.name),We(sp,m.name),We(fh,m.name),We(Ay,m.name);const mh=new pt({uid:Ua,auth:m,email:Mi,emailVerified:op,displayName:_t,isAnonymous:ph,photoURL:Fc,phoneNumber:pi,tenantId:hh,stsTokenManager:gg,createdAt:fh,lastLoginAt:Ay});return Lc&&Array.isArray(Lc)&&(mh.providerData=Lc.map(Vc=>Object.assign({},Vc))),sp&&(mh._redirectEventId=sp),mh}static _fromIdTokenResponse(m,_,w=!1){return(0,u.Z)(function*(){const M=new Oe;M.updateFromServerResponse(_);const P=new pt({uid:_.localId,auth:m,stsTokenManager:M,isAnonymous:w});return yield jr(P),P})()}}const tn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,w){var M=this;return(0,u.Z)(function*(){M.storage[_]=w})()}_get(_){var w=this;return(0,u.Z)(function*(){const M=w.storage[_];return void 0===M?null:M})()}_remove(_){var w=this;return(0,u.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return v.type="NONE",v})();function bi(v,m,_){return`firebase:${v}:${m}:${_}`}class Ht{constructor(m,_,w){this.persistence=m,this.auth=_,this.userKey=w;const{config:M,name:P}=this.auth;this.fullUserKey=bi(this.userKey,M.apiKey,P),this.fullPersistenceKey=bi("persistence",M.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,u.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?pt._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,u.Z)(function*(){if(_.persistence===m)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,w="authUser"){return(0,u.Z)(function*(){if(!_.length)return new Ht(oe(tn),m,w);const M=(yield Promise.all(_.map(function(){var st=(0,u.Z)(function*(wt){if(yield wt._isAvailable())return wt});return function(wt){return st.apply(this,arguments)}}()))).filter(st=>st);let P=M[0]||oe(tn);const X=bi(w,m.config.apiKey,m.name);let de=null;for(const st of _)try{const wt=yield st._get(X);if(wt){const _t=pt._fromJSON(m,wt);st!==P&&(de=_t),P=st;break}}catch{}const He=M.filter(st=>st._shouldAllowMigration);return P._shouldAllowMigration&&He.length?(P=He[0],de&&(yield P._set(X,de.toJSON())),yield Promise.all(_.map(function(){var st=(0,u.Z)(function*(wt){if(wt!==P)try{yield wt._remove(X)}catch{}});return function(wt){return st.apply(this,arguments)}}())),new Ht(P,m,w)):new Ht(P,m,w)})()}}function jt(v){const m=v.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(qi(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(An(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Mt(m))return"Blackberry";if(on(m))return"Webos";if(Jn(m))return"Safari";if((m.includes("chrome/")||Si(m))&&!m.includes("edge/"))return"Chrome";if(Ze(m))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function An(v=(0,L.z$)()){return/firefox\//i.test(v)}function Jn(v=(0,L.z$)()){const m=v.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Si(v=(0,L.z$)()){return/crios\//i.test(v)}function qi(v=(0,L.z$)()){return/iemobile/i.test(v)}function Ze(v=(0,L.z$)()){return/android/i.test(v)}function Mt(v=(0,L.z$)()){return/blackberry/i.test(v)}function on(v=(0,L.z$)()){return/webos/i.test(v)}function Pn(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function xn(v=(0,L.z$)()){return Pn(v)||Ze(v)||on(v)||Mt(v)||/windows phone/i.test(v)||qi(v)}function $r(v,m=[]){let _;switch(v){case"Browser":_=jt((0,L.z$)());break;case"Worker":_=`${jt((0,L.z$)())}-${v}`;break;default:_=v}const w=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${pe.SDK_VERSION}/${w}`}class Lt{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const w=P=>new Promise((X,de)=>{try{X(m(P))}catch(He){de(He)}});w.onAbort=_,this.queue.push(w);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,u.Z)(function*(){var w;if(_.auth.currentUser===m)return;const M=[];try{for(const P of _.queue)yield P(m),P.onAbort&&M.push(P.onAbort)}catch(P){M.reverse();for(const X of M)try{X()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=P)||void 0===w?void 0:w.message})}})()}}class Ql{constructor(m,_,w){this.app=m,this.heartbeatServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oa(this),this.idTokenSubscription=new oa(this),this.beforeStateQueue=new Lt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(m,_){var w=this;return _&&(this._popupRedirectResolver=oe(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var M,P;if(!w._deleted&&(w.persistenceManager=yield Ht.create(w,m),!w._deleted)){if(null!==(M=w._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,u.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,u.Z)(function*(){var w;const M=yield _.assertedPersistence.getCurrentUser();let P=M,X=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const de=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,He=P?._redirectEventId,st=yield _.tryRedirectSignIn(m);(!de||de===He)&&st?.user&&(P=st.user,X=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(X)try{yield _.beforeStateQueue.runMiddleware(P)}catch(de){P=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(de))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return q(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(m){var _=this;return(0,u.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,u.Z)(function*(){var w;try{yield jr(m)}catch(M){if("auth/network-request-failed"!==(null===(w=M)||void 0===w?void 0:w.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Je(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var m=this;return(0,u.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,u.Z)(function*(){const w=m?(0,L.m9)(m):null;return w&&q(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(m,_=!1){var w=this;return(0,u.Z)(function*(){if(!w._deleted)return m&&q(w.tenantId===m.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(m)),w.queue((0,u.Z)(function*(){yield w.directlySetCurrentUser(m),w.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,u.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(oe(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new L.LL("auth","Firebase",m())}onAuthStateChanged(m,_,w){return this.registerStateListener(this.authStateSubscription,m,_,w)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,w){return this.registerStateListener(this.idTokenSubscription,m,_,w)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var w=this;return(0,u.Z)(function*(){const M=yield w.getOrInitRedirectPersistenceManager(_);return null===m?M.removeCurrentUser():M.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const w=m&&oe(m)||_._popupRedirectResolver;q(w,_,"argument-error"),_.redirectPersistenceManager=yield Ht.create(_,[oe(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,u.Z)(function*(){var w,M;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===m?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,u.Z)(function*(){if(m===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,w,M){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),X=this._isInitialized?Promise.resolve():this._initializationPromise;return q(X,this,"internal-error"),X.then(()=>P(this.currentUser)),"function"==typeof _?m.addObserver(_,w,M):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==m&&(_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh()),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=$r(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,u.Z)(function*(){var _;const w={"X-Client-Version":m.clientVersion};m.app.options.appId&&(w["X-Firebase-gmpid"]=m.app.options.appId);const M=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return M&&(w["X-Firebase-Client"]=M),w})()}}function Mn(v){return(0,L.m9)(v)}class oa{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ei(v){const m=v.indexOf(":");return m<0?"":v.substr(0,m+1)}function Cs(v){if(!v)return null;const m=Number(v);return isNaN(m)?null:m}class _r{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return De("not implemented")}_getIdTokenResponse(m){return De("not implemented")}_linkToIdToken(m,_){return De("not implemented")}_getReauthenticationResolver(m){return De("not implemented")}}function Ai(v,m){return gn.apply(this,arguments)}function gn(){return(gn=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:resetPassword",en(v,m))})).apply(this,arguments)}function Ad(v,m){return hu.apply(this,arguments)}function hu(){return(hu=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function ol(v,m){return la.apply(this,arguments)}function la(){return(la=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:update",en(v,m))})).apply(this,arguments)}function al(){return(al=(0,u.Z)(function*(v,m){return or(v,"POST","/v1/accounts:signInWithPassword",en(v,m))})).apply(this,arguments)}function yr(v,m){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:sendOobCode",en(v,m))})).apply(this,arguments)}function wf(v,m){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,u.Z)(function*(v,m){return yr(v,m)})).apply(this,arguments)}function ur(v,m){return ll.apply(this,arguments)}function ll(){return(ll=(0,u.Z)(function*(v,m){return yr(v,m)})).apply(this,arguments)}function cl(v,m){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,u.Z)(function*(v,m){return yr(v,m)})).apply(this,arguments)}function vr(v,m){return ca.apply(this,arguments)}function ca(){return(ca=(0,u.Z)(function*(v,m){return yr(v,m)})).apply(this,arguments)}function Xl(){return(Xl=(0,u.Z)(function*(v,m){return or(v,"POST","/v1/accounts:signInWithEmailLink",en(v,m))})).apply(this,arguments)}function xd(){return(xd=(0,u.Z)(function*(v,m){return or(v,"POST","/v1/accounts:signInWithEmailLink",en(v,m))})).apply(this,arguments)}class Jl extends _r{constructor(m,_,w,M=null){super("password",w),this._email=m,this._password=_,this._tenantId=M}static _fromEmailAndPassword(m,_){return new Jl(m,_,"password")}static _fromEmailAndCode(m,_,w=null){return new Jl(m,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,u.Z)(function*(){switch(_.signInMethod){case"password":return function eo(v,m){return al.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function $w(v,m){return Xl.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:Re(m,"internal-error")}})()}_linkToIdToken(m,_){var w=this;return(0,u.Z)(function*(){switch(w.signInMethod){case"password":return Ad(m,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Ef(v,m){return xd.apply(this,arguments)}(m,{idToken:_,email:w._email,oobCode:w._password});default:Re(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Do(v,m){return br.apply(this,arguments)}function br(){return(br=(0,u.Z)(function*(v,m){return or(v,"POST","/v1/accounts:signInWithIdp",en(v,m))})).apply(this,arguments)}class Is extends _r{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new Is(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):Re("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:w,signInMethod:M}=_,P=(0,le._T)(_,["providerId","signInMethod"]);if(!w||!M)return null;const X=new Is(w,M);return X.idToken=P.idToken||void 0,X.accessToken=P.accessToken||void 0,X.secret=P.secret,X.nonce=P.nonce,X.pendingToken=P.pendingToken||null,X}_getIdTokenResponse(m){return Do(m,this.buildRequest())}_linkToIdToken(m,_){const w=this.buildRequest();return w.idToken=_,Do(m,w)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Do(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,L.xO)(_)}return m}}function Wm(v,m){return Md.apply(this,arguments)}function Md(){return(Md=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:sendVerificationCode",en(v,m))})).apply(this,arguments)}function to(){return(to=(0,u.Z)(function*(v,m){return or(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,m))})).apply(this,arguments)}function kd(){return(kd=(0,u.Z)(function*(v,m){const _=yield or(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,m));if(_.temporaryProof)throw Hr(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Zm={USER_NOT_FOUND:"user-not-found"};function ec(){return(ec=(0,u.Z)(function*(v,m){return or(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Zm)})).apply(this,arguments)}class Ts extends _r{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new Ts({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new Ts({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function fu(v,m){return to.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function Km(v,m){return kd.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Ym(v,m){return ec.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:w,verificationCode:M}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:w,code:M}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:w,phoneNumber:M,temporaryProof:P}=m;return w||_||M||P?new Ts({verificationId:_,verificationCode:w,phoneNumber:M,temporaryProof:P}):null}}class tc{constructor(m){var _,w,M,P,X,de;const He=(0,L.zd)((0,L.pd)(m)),st=null!==(_=He.apiKey)&&void 0!==_?_:null,wt=null!==(w=He.oobCode)&&void 0!==w?w:null,_t=function fy(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=He.mode)&&void 0!==M?M:null);q(st&&wt&&_t,"argument-error"),this.apiKey=st,this.operation=_t,this.code=wt,this.continueUrl=null!==(P=He.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(X=He.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(de=He.tenantId)&&void 0!==de?de:null}static parseLink(m){const _=function Rd(v){const m=(0,L.zd)((0,L.pd)(v)).link,_=m?(0,L.zd)((0,L.pd)(m)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||_||m||v}(m);try{return new tc(_)}catch{return null}}}let pu=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,w){return Jl._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const M=tc.parseLink(w);return q(M,"argument-error"),Jl._fromEmailAndCode(_,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class wr{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class io extends wr{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class ua extends io{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return q("providerId"in _&&"signInMethod"in _,"argument-error"),Is._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return q(m.idToken||m.accessToken,"argument-error"),Is._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return ua.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return ua.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:P,nonce:X,providerId:de}=m;if(!w&&!M&&!_&&!P||!de)return null;try{return new ua(de)._credential({idToken:_,accessToken:w,nonce:X,pendingToken:P})}catch{return null}}}let mu=(()=>{class v extends io{constructor(){super("facebook.com")}static credential(_){return Is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),ul=(()=>{class v extends io{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return Is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:M}=_;if(!w&&!M)return null;try{return v.credential(w,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),dl=(()=>{class v extends io{constructor(){super("github.com")}static credential(_){return Is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class da extends _r{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Do(m,this.buildRequest())}_linkToIdToken(m,_){const w=this.buildRequest();return w.idToken=_,Do(m,w)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Do(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:w,signInMethod:M,pendingToken:P}=_;return w&&M&&P&&w===M?new da(w,P):null}static _create(m,_){return new da(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class In extends wr{constructor(m){q(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return In.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return In.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=da.fromJSON(m);return q(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:w}=m;if(!_||!w)return null;try{return da._create(w,_)}catch{return null}}}let nc=(()=>{class v extends io{constructor(){super("twitter.com")}static credential(_,w){return Is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:M}=_;if(!w||!M)return null;try{return v.credential(w,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function ic(v,m){return hl.apply(this,arguments)}function hl(){return(hl=(0,u.Z)(function*(v,m){return or(v,"POST","/v1/accounts:signUp",en(v,m))})).apply(this,arguments)}class dr{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,w,M=!1){return(0,u.Z)(function*(){const P=yield pt._fromIdTokenResponse(m,w,M),X=Od(w);return new dr({user:P,providerId:X,_tokenResponse:w,operationType:_})})()}static _forOperation(m,_,w){return(0,u.Z)(function*(){yield m._updateTokensIfNecessary(w,!0);const M=Od(w);return new dr({user:m,providerId:M,_tokenResponse:w,operationType:_})})()}}function Od(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Pd(){return(Pd=(0,u.Z)(function*(v){var m;const _=Mn(v);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new dr({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield ic(_,{returnSecureToken:!0}),M=yield dr._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Nd extends L.ZR{constructor(m,_,w,M){var P;super(_.code,_.message),this.operationType=w,this.user=M,Object.setPrototypeOf(this,Nd.prototype),this.customData={appName:m.name,tenantId:null!==(P=m.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(m,_,w,M){return new Nd(m,_,w,M)}}function fl(v,m,_,w){return("reauthenticate"===m?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Nd._fromErrorAndOperation(v,P,m,w):P})}function ti(v){return new Set(v.map(({providerId:m})=>m).filter(m=>!!m))}function Io(){return(Io=(0,u.Z)(function*(v,m){const _=(0,L.m9)(v);yield To(!0,_,m);const{providerUserInfo:w}=yield $n(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),M=ti(w||[]);return _.providerData=_.providerData.filter(P=>M.has(P.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function ro(v,m){return wi.apply(this,arguments)}function wi(){return(wi=(0,u.Z)(function*(v,m,_=!1){const w=yield zi(v,m._linkToIdToken(v.auth,yield v.getIdToken()),_);return dr._forOperation(v,"link",w)})).apply(this,arguments)}function To(v,m,_){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,u.Z)(function*(v,m,_){yield jr(m);const M=!1===v?"provider-already-linked":"no-such-provider";q(ti(m.providerData).has(_)===v,m.auth,M)})).apply(this,arguments)}function ha(v,m){return Er.apply(this,arguments)}function Er(){return(Er=(0,u.Z)(function*(v,m,_=!1){var w;const{auth:M}=v,P="reauthenticate";try{const X=yield zi(v,fl(M,P,m,v),_);q(X.idToken,M,"internal-error");const de=qe(X.idToken);q(de,M,"internal-error");const{sub:He}=de;return q(v.uid===He,M,"user-mismatch"),dr._forOperation(v,P,X)}catch(X){throw"auth/user-not-found"===(null===(w=X)||void 0===w?void 0:w.code)&&Re(M,"user-mismatch"),X}})).apply(this,arguments)}function so(v,m){return pl.apply(this,arguments)}function pl(){return(pl=(0,u.Z)(function*(v,m,_=!1){const w="signIn",M=yield fl(v,w,m),P=yield dr._fromIdTokenResponse(v,w,M);return _||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function at(v,m){return sc.apply(this,arguments)}function sc(){return(sc=(0,u.Z)(function*(v,m){return so(Mn(v),m)})).apply(this,arguments)}function gu(v,m){return _u.apply(this,arguments)}function _u(){return(_u=(0,u.Z)(function*(v,m){const _=(0,L.m9)(v);return yield To(!1,_,m.providerId),ro(_,m)})).apply(this,arguments)}function oc(v,m){return So.apply(this,arguments)}function So(){return(So=(0,u.Z)(function*(v,m){return ha((0,L.m9)(v),m)})).apply(this,arguments)}function Ao(v,m){return fa.apply(this,arguments)}function fa(){return(fa=(0,u.Z)(function*(v,m){return or(v,"POST","/v1/accounts:signInWithCustomToken",en(v,m))})).apply(this,arguments)}function Se(){return(Se=(0,u.Z)(function*(v,m){const _=Mn(v),w=yield Ao(_,{token:m,returnSecureToken:!0}),M=yield dr._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Bt{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?pa._fromServerResponse(m,_):Re(m,"internal-error")}}class pa extends Bt{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new pa(_)}}function xo(v,m,_){var w;q((null===(w=_.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),q(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(q(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(q(_.android.packageName.length>0,v,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function ma(){return(ma=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v),M={requestType:"PASSWORD_RESET",email:m};_&&xo(w,M,_),yield ur(w,M)})).apply(this,arguments)}function Cr(){return(Cr=(0,u.Z)(function*(v,m,_){yield Ai((0,L.m9)(v),{oobCode:m,newPassword:_})})).apply(this,arguments)}function ga(){return(ga=(0,u.Z)(function*(v,m){yield ol((0,L.m9)(v),{oobCode:m})})).apply(this,arguments)}function _a(v,m){return lc.apply(this,arguments)}function lc(){return(lc=(0,u.Z)(function*(v,m){const _=(0,L.m9)(v),w=yield Ai(_,{oobCode:m}),M=w.requestType;switch(q(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(w.mfaInfo,_,"internal-error");default:q(w.email,_,"internal-error")}let P=null;return w.mfaInfo&&(P=Bt._fromServerResponse(Mn(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:M}})).apply(this,arguments)}function As(){return(As=(0,u.Z)(function*(v,m){const{data:_}=yield _a((0,L.m9)(v),m);return _.email})).apply(this,arguments)}function Gr(){return(Gr=(0,u.Z)(function*(v,m,_){const w=Mn(v),M=yield ic(w,{returnSecureToken:!0,email:m,password:_}),P=yield dr._fromIdTokenResponse(w,"signIn",M);return yield w._updateCurrentUser(P.user),P})).apply(this,arguments)}function zr(){return(zr=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v),M={requestType:"EMAIL_SIGNIN",email:m};q(_.handleCodeInApp,w,"argument-error"),_&&xo(w,M,_),yield cl(w,M)})).apply(this,arguments)}function ya(){return(ya=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v),M=pu.credentialWithLink(m,_||Le());return q(M._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),at(w,M)})).apply(this,arguments)}function If(v,m){return va.apply(this,arguments)}function va(){return(va=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:createAuthUri",en(v,m))})).apply(this,arguments)}function cc(){return(cc=(0,u.Z)(function*(v,m){const w={identifier:m,continueUri:yt()?Le():"http://localhost"},{signinMethods:M}=yield If((0,L.m9)(v),w);return M||[]})).apply(this,arguments)}function vu(){return(vu=(0,u.Z)(function*(v,m){const _=(0,L.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};m&&xo(_.auth,M,m);const{email:P}=yield wf(_.auth,M);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function _l(){return(_l=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:m};_&&xo(w.auth,P,_);const{email:X}=yield vr(w.auth,P);X!==v.email&&(yield v.reload())})).apply(this,arguments)}function bu(v,m){return uc.apply(this,arguments)}function uc(){return(uc=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function hc(){return(hc=(0,u.Z)(function*(v,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const w=(0,L.m9)(v),P={idToken:yield w.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},X=yield zi(w,bu(w.auth,P));w.displayName=X.displayName||null,w.photoURL=X.photoUrl||null;const de=w.providerData.find(({providerId:He})=>"password"===He);de&&(de.displayName=w.displayName,de.photoURL=w.photoURL),yield w._updateTokensIfNecessary(X)})).apply(this,arguments)}function pc(v,m,_){return ni.apply(this,arguments)}function ni(){return(ni=(0,u.Z)(function*(v,m,_){const{auth:w}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};m&&(P.email=m),_&&(P.password=_);const X=yield zi(v,Ad(w,P));yield v._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class dn{constructor(m,_,w={}){this.isNewUser=m,this.providerId=_,this.profile=w}}class Vd extends dn{constructor(m,_,w,M){super(m,_,w),this.username=M}}class Bd extends dn{constructor(m,_){super(m,"facebook.com",_)}}class Eu extends Vd{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Tf extends dn{constructor(m,_){super(m,"google.com",_)}}class mc extends Vd{constructor(m,_,w){super(m,"twitter.com",_,w)}}function Sf(v){const{user:m,_tokenResponse:_}=v;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function xs(v){var m,_;if(!v)return null;const{providerId:w}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const X=null===(_=null===(m=qe(v.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(X)return new dn(P,"anonymous"!==X&&"custom"!==X?X:null)}if(!w)return null;switch(w){case"facebook.com":return new Bd(P,M);case"github.com":return new Eu(P,M);case"google.com":return new Tf(P,M);case"twitter.com":return new mc(P,M,v.screenName||null);case"custom":case"anonymous":return new dn(P,null);default:return new dn(P,w,M)}}(_)}class Ca{constructor(m,_){this.type=m,this.credential=_}static _fromIdtoken(m){return new Ca("enroll",m)}static _fromMfaPendingCredential(m){return new Ca("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,w;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Ca._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(w=m.multiFactorSession)&&void 0!==w&&w.idToken)return Ca._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Po{constructor(m,_,w){this.session=m,this.hints=_,this.signInResolver=w}static _fromError(m,_){const w=Mn(m),M=_.customData._serverResponse,P=(M.mfaInfo||[]).map(de=>Bt._fromServerResponse(w,de));q(M.mfaPendingCredential,w,"internal-error");const X=Ca._fromMfaPendingCredential(M.mfaPendingCredential);return new Po(X,P,function(){var de=(0,u.Z)(function*(He){const st=yield He._process(w,X);delete M.mfaInfo,delete M.mfaPendingCredential;const wt=Object.assign(Object.assign({},M),{idToken:st.idToken,refreshToken:st.refreshToken});switch(_.operationType){case"signIn":const _t=yield dr._fromIdTokenResponse(w,_.operationType,wt);return yield w._updateCurrentUser(_t.user),_t;case"reauthenticate":return q(_.user,w,"internal-error"),dr._forOperation(_.user,_.operationType,wt);default:Re(w,"internal-error")}});return function(He){return de.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,u.Z)(function*(){return _.signInResolver(m)})()}}function jd(v,m){return zt(v,"POST","/v2/accounts/mfaEnrollment:start",en(v,m))}class xf{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>Bt._fromServerResponse(m.auth,w)))})}static _fromUser(m){return new xf(m)}getSession(){var m=this;return(0,u.Z)(function*(){return Ca._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,_){var w=this;return(0,u.Z)(function*(){const M=m,P=yield w.getSession(),X=yield zi(w.user,M._process(w.user.auth,P,_));return yield w.user._updateTokensIfNecessary(X),w.user.reload()})()}unenroll(m){var _=this;return(0,u.Z)(function*(){var w;const M="string"==typeof m?m:m.uid,P=yield _.user.getIdToken(),X=yield zi(_.user,function Xm(v,m){return zt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",en(v,m))}(_.user.auth,{idToken:P,mfaEnrollmentId:M}));_.enrolledFactors=_.enrolledFactors.filter(({uid:de})=>de!==M),yield _.user._updateTokensIfNecessary(X);try{yield _.user.reload()}catch(de){if("auth/user-token-expired"!==(null===(w=de)||void 0===w?void 0:w.code))throw de}})()}}const No=new WeakMap,Fo="__sak";class yc{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Fo,"1"),this.storage.removeItem(Fo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const oo=(()=>{class v extends yc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function kf(){const v=(0,L.z$)();return Jn(v)||Pn(v)}()&&function sl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=xn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const M=this.storage.getItem(w),P=this.localCache[w];M!==P&&_(w,P,M)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((de,He,st)=>{this.notifyListeners(de,st)});const M=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(M);if(_.newValue!==de)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!w)return}const P=()=>{const de=this.storage.getItem(M);!w&&this.localCache[M]===de||this.notifyListeners(M,de)},X=this.storage.getItem(M);!function Js(){return(0,L.w1)()&&10===document.documentMode}()||X===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,w){this.localCache[_]=w;const M=this.listeners[_];if(M)for(const P of Array.from(M))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var M=()=>super._set,P=this;return(0,u.Z)(function*(){yield M().call(P,_,w),P.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,M=this;return(0,u.Z)(function*(){const P=yield w().call(M,_);return M.localCache[_]=JSON.stringify(P),P})()}_remove(_){var w=()=>super._remove,M=this;return(0,u.Z)(function*(){yield w().call(M,_),delete M.localCache[_]})()}}return v.type="LOCAL",v})(),Wr=(()=>{class v extends yc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return v.type="SESSION",v})();let Of=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(P=>P.isListeningto(_));if(w)return w;const M=new v(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,u.Z)(function*(){const M=_,{eventId:P,eventType:X,data:de}=M.data,He=w.handlersMap[X];if(!He?.size)return;M.ports[0].postMessage({status:"ack",eventId:P,eventType:X});const st=Array.from(He).map(function(){var _t=(0,u.Z)(function*(Mi){return Mi(M.origin,de)});return function(Mi){return _t.apply(this,arguments)}}()),wt=yield function $d(v){return Promise.all(v.map(function(){var m=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return m.apply(this,arguments)}}()))}(st);M.ports[0].postMessage({status:"done",eventId:P,eventType:X,response:wt})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function nn(v="",m=10){let _="";for(let w=0;w<m;w++)_+=Math.floor(10*Math.random());return v+_}class Ms{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,w=50){var M=this;return(0,u.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let X,de;return new Promise((He,st)=>{const wt=nn("",20);P.port1.start();const _t=setTimeout(()=>{st(new Error("unsupported_event"))},w);de={messageChannel:P,onMessage(Mi){const pi=Mi;if(pi.data.eventId===wt)switch(pi.data.status){case"ack":clearTimeout(_t),X=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),He(pi.data.response);break;default:clearTimeout(_t),clearTimeout(X),st(new Error("invalid_response"))}}},M.handlers.add(de),P.port1.addEventListener("message",de.onMessage),M.target.postMessage({eventType:m,eventId:wt,data:_},[P.port2])}).finally(()=>{de&&M.removeMessageHandler(de)})})()}}function Be(){return window}function ii(){return typeof Be().WorkerGlobalScope<"u"&&"function"==typeof Be().importScripts}function vl(){return(vl=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ec="firebaseLocalStorageDb",Lo="firebaseLocalStorage",ao="fbase_key";class ot{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Cc(v,m){return v.transaction([Lo],m?"readwrite":"readonly").objectStore(Lo)}function ks(){const v=indexedDB.open(Ec,1);return new Promise((m,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Lo,{keyPath:ao})}catch(M){_(M)}}),v.addEventListener("success",(0,u.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Lo)?m(w):(w.close(),yield function Da(){const v=indexedDB.deleteDatabase(Ec);return new ot(v).toPromise()}(),m(yield ks()))}))})}function bl(v,m,_){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,u.Z)(function*(v,m,_){const w=Cc(v,!0).put({[ao]:m,value:_});return new ot(w).toPromise()})).apply(this,arguments)}function Dr(){return(Dr=(0,u.Z)(function*(v,m){const _=Cc(v,!1).get(m),w=yield new ot(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Iu(v,m){const _=Cc(v,!0).delete(m);return new ot(_).toPromise()}const Bo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield ks()),_.db})()}_withRetries(_){var w=this;return(0,u.Z)(function*(){let M=0;for(;;)try{const P=yield w._openDb();return yield _(P)}catch(P){if(M++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return ii()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=Of._getInstance(function wc(){return ii()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,u.Z)(function*(M,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(M,P){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,u.Z)(function*(M,P){return["keyChanged"]});return function(M,P){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var w,M;if(_.activeServiceWorker=yield function qn(){return vl.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Ms(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(M=P[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,u.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function bc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield ks();return yield bl(_,Fo,"1"),yield Iu(_,Fo),!0}catch{}return!1})()}_withPendingWrite(_){var w=this;return(0,u.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var M=this;return(0,u.Z)(function*(){return M._withPendingWrite((0,u.Z)(function*(){return yield M._withRetries(P=>bl(P,_,w)),M.localCache[_]=w,M.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,u.Z)(function*(){const M=yield w._withRetries(P=>function Dc(v,m){return Dr.apply(this,arguments)}(P,_));return w.localCache[_]=M,M})()}_remove(_){var w=this;return(0,u.Z)(function*(){return w._withPendingWrite((0,u.Z)(function*(){return yield w._withRetries(M=>Iu(M,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const w=yield _._withRetries(X=>{const de=Cc(X,!1).getAll();return new ot(de).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const M=[],P=new Set;for(const{fbase_key:X,value:de}of w)P.add(X),JSON.stringify(_.localCache[X])!==JSON.stringify(de)&&(_.notifyListeners(X,de),M.push(X));for(const X of Object.keys(_.localCache))_.localCache[X]&&!P.has(X)&&(_.notifyListeners(X,null),M.push(X));return M})()}notifyListeners(_,w){this.localCache[_]=w;const M=this.listeners[_];if(M)for(const P of Array.from(M))P(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Rs(v,m){return zt(v,"POST","/v2/accounts/mfaSignIn:start",en(v,m))}function Tr(){return(Tr=(0,u.Z)(function*(v){return(yield zt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function fs(v){return new Promise((m,_)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=m,w.onerror=M=>{const P=Ee("internal-error");P.customData=M,_(P)},w.type="text/javascript",w.charset="UTF-8",function hs(){var v,m;return null!==(m=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==m?m:document}().appendChild(w)})}function xi(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Zt=1e12;class Pf{constructor(m){this.auth=m,this.counter=Zt,this._widgets=new Map}render(m,_){const w=this.counter;return this._widgets.set(w,new Ei(m,this.auth.name,_||{})),this.counter++,w}reset(m){var _;const w=m||Zt;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Zt))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,u.Z)(function*(){var w;return null===(w=_._widgets.get(m||Zt))||void 0===w||w.execute(),""})()}}class Ei{constructor(m,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof m?document.getElementById(m):m;q(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Zi(v){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Kr=xi("rcb"),Jm=new un(3e4,6e4);class kn{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Be().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return q(function Zr(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Be().grecaptcha):new Promise((w,M)=>{const P=Be().setTimeout(()=>{M(Ee(m,"network-request-failed"))},Jm.get());Be()[Kr]=()=>{Be().clearTimeout(P),delete Be()[Kr];const de=Be().grecaptcha;if(!de)return void M(Ee(m,"internal-error"));const He=de.render;de.render=(st,wt)=>{const _t=He(st,wt);return this.counter++,_t},this.hostLanguage=_,w(de)},fs(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Kr,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),M(Ee(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=Be().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Yi{load(m){return(0,u.Z)(function*(){return new Pf(m)})()}clearedOneInstance(){}}const wl="recaptcha",Wn={theme:"light",type:"image"};class Tu{constructor(m,_=Object.assign({},Wn),w){this.parameters=_,this.type=wl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(w),this.isInvisible="invisible"===this.parameters.size,q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof m?document.getElementById(m):m;q(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Yi:new kn,this.validateStartingState()}verify(){var m=this;return(0,u.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),w=m.getAssertedRecaptcha();return w.getResponse(_)||new Promise(P=>{const X=de=>{!de||(m.tokenChangeListeners.delete(X),P(de))};m.tokenChangeListeners.add(X),m.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof m)m(_);else if("string"==typeof m){const w=Be()[m];"function"==typeof w&&w(_)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,u.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,u.Z)(function*(){q(yt()&&!ii(),m.auth,"internal-error"),yield function El(){let v=null;return new Promise(m=>{"complete"!==document.readyState?(v=()=>m(),window.addEventListener("load",v)):m()}).catch(m=>{throw v&&window.removeEventListener("load",v),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Ki(v){return Tr.apply(this,arguments)}(m.auth);q(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Su{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=Ts._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function Rn(){return(Rn=(0,u.Z)(function*(v,m,_){const w=Mn(v),M=yield Ho(w,m,(0,L.m9)(_));return new Su(M,P=>at(w,P))})).apply(this,arguments)}function Tc(){return(Tc=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v);yield To(!1,w,"phone");const M=yield Ho(w.auth,m,(0,L.m9)(_));return new Su(M,P=>gu(w,P))})).apply(this,arguments)}function Li(){return(Li=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v),M=yield Ho(w.auth,m,(0,L.m9)(_));return new Su(M,P=>oc(w,P))})).apply(this,arguments)}function Ho(v,m,_){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,u.Z)(function*(v,m,_){var w;const M=yield _.verify();try{let P;if(q("string"==typeof M,v,"argument-error"),q(_.type===wl,v,"argument-error"),P="string"==typeof m?{phoneNumber:m}:m,"session"in P){const X=P.session;if("phoneNumber"in P)return q("enroll"===X.type,v,"internal-error"),(yield jd(v,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{q("signin"===X.type,v,"internal-error");const de=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return q(de,v,"missing-multi-factor-info"),(yield Rs(v,{mfaPendingCredential:X.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield Wm(v,{phoneNumber:P.phoneNumber,recaptchaToken:M});return X}}finally{_._reset()}})).apply(this,arguments)}function xu(){return(xu=(0,u.Z)(function*(v,m){yield ro((0,L.m9)(v),m)})).apply(this,arguments)}let Sc=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Mn(_)}verifyPhoneNumber(_,w){return Ho(this.auth,_,(0,L.m9)(w))}static credential(_,w){return Ts._fromVerification(_,w)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:M}=_;return w&&M?Ts._fromTokenResponse(w,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ns(v,m){return m?oe(m):(q(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Vi extends _r{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Do(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Do(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Do(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function Mu(v){return so(v.auth,new Vi(v),v.bypassAuthState)}function lo(v){const{auth:m,user:_}=v;return q(_,m,"internal-error"),ha(_,new Vi(v),v.bypassAuthState)}function zd(v){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,u.Z)(function*(v){const{auth:m,user:_}=v;return q(_,m,"internal-error"),ro(_,new Vi(v),v.bypassAuthState)})).apply(this,arguments)}class Ac{constructor(m,_,w,M,P=!1){this.auth=m,this.resolver=w,this.user=M,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,u.Z)(function*(w,M){m.pendingPromise={resolve:w,reject:M};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(P){m.reject(P)}});return function(w,M){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,u.Z)(function*(){const{urlResponse:w,sessionId:M,postBody:P,tenantId:X,error:de,type:He}=m;if(de)return void _.reject(de);const st={auth:_.auth,requestUri:w,sessionId:M,tenantId:X||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(He)(st))}catch(wt){_.reject(wt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Mu;case"linkViaPopup":case"linkViaRedirect":return zd;case"reauthViaPopup":case"reauthViaRedirect":return lo;default:Re(this.auth,"internal-error")}}resolve(m){ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ku=new un(2e3,1e4);function Cl(){return(Cl=(0,u.Z)(function*(v,m,_){const w=Mn(v);je(v,m,wr);const M=Ns(w,_);return new jo(w,"signInViaPopup",m,M).executeNotNull()})).apply(this,arguments)}function qd(){return(qd=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v);je(w.auth,m,wr);const M=Ns(w.auth,_);return new jo(w.auth,"reauthViaPopup",m,M,w).executeNotNull()})).apply(this,arguments)}function Sa(){return(Sa=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v);je(w.auth,m,wr);const M=Ns(w.auth,_);return new jo(w.auth,"linkViaPopup",m,M,w).executeNotNull()})).apply(this,arguments)}let jo=(()=>{class v extends Ac{constructor(_,w,M,P,X){super(_,w,P,X),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const w=yield _.execute();return q(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,u.Z)(function*(){ee(1===_.filter.length,"Popup operations only handle one event");const w=nn();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(Ee(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,M;this.pollId=null!==(M=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,ku.get())};_()}}return v.currentPopupAction=null,v})();const Fs=new Map;class Aa extends Ac{constructor(m,_,w=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,u.Z)(function*(){let w=Fs.get(_.auth._key());if(!w){try{const P=(yield function Ff(v,m){return Ls.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;w=()=>Promise.resolve(P)}catch(M){w=()=>Promise.reject(M)}Fs.set(_.auth._key(),w)}return _.bypassAuthState||Fs.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,w=this;return(0,u.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(w,m);if("unknown"!==m.type){if(m.eventId){const M=yield w.auth._redirectUserForId(m.eventId);if(M)return w.user=M,_().call(w,m);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Ls(){return(Ls=(0,u.Z)(function*(v,m){const _=Kn(m),w=xc(v);if(!(yield w._isAvailable()))return!1;const M="true"===(yield w._get(_));return yield w._remove(_),M})).apply(this,arguments)}function Ou(v,m){return ri.apply(this,arguments)}function ri(){return(ri=(0,u.Z)(function*(v,m){return xc(v)._set(Kn(m),"true")})).apply(this,arguments)}function Ma(v,m){Fs.set(v._key(),m)}function xc(v){return oe(v._redirectPersistence)}function Kn(v){return bi("pendingRedirect",v.config.apiKey,v.name)}function T(){return(T=(0,u.Z)(function*(v,m,_){const w=Mn(v);je(v,m,wr);const M=Ns(w,_);return yield Ou(M,w),M._openRedirect(w,m,"signInViaRedirect")})).apply(this,arguments)}function H(){return(H=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v);je(w.auth,m,wr);const M=Ns(w.auth,_);yield Ou(M,w.auth);const P=yield ct(w);return M._openRedirect(w.auth,m,"reauthViaRedirect",P)})).apply(this,arguments)}function Ae(){return(Ae=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v);je(w.auth,m,wr);const M=Ns(w.auth,_);yield To(!1,w,m.providerId),yield Ou(M,w.auth);const P=yield ct(w);return M._openRedirect(w.auth,m,"linkViaRedirect",P)})).apply(this,arguments)}function ht(){return(ht=(0,u.Z)(function*(v,m){return yield Mn(v)._initializationPromise,Tt(v,m,!1)})).apply(this,arguments)}function Tt(v,m){return At.apply(this,arguments)}function At(){return(At=(0,u.Z)(function*(v,m,_=!1){const w=Mn(v),M=Ns(w,m),X=yield new Aa(w,M,_).execute();return X&&!_&&(delete X.user._redirectEventId,yield w._persistUserIfCurrent(X.user),yield w._setRedirectUser(null,m)),X})).apply(this,arguments)}function ct(v){return mt.apply(this,arguments)}function mt(){return(mt=(0,u.Z)(function*(v){const m=nn(`${v.uid}:::`);return v._redirectEventId=m,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),m})).apply(this,arguments)}class Dl{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(m,w)&&(_=!0,this.sendToConsumer(m,w),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function ka(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xr(v);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var w;if(m.error&&!xr(m)){const M=(null===(w=m.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(Ee(this.auth,M))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const w=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&w}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ar(m))}saveEventToCache(m){this.cachedEventUids.add(Ar(m)),this.lastProcessedEventTime=Date.now()}}function Ar(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(m=>m).join("-")}function xr({type:v,error:m}){return"unknown"===v&&"auth/no-auth-event"===m?.code}function Il(v){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,u.Z)(function*(v,m={}){return zt(v,"GET","/v1/projects",m)})).apply(this,arguments)}const Yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ps=/^https?/;function Mc(){return(Mc=(0,u.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:m}=yield Il(v);for(const _ of m)try{if(py(_))return}catch{}Re(v,"unauthorized-domain")})).apply(this,arguments)}function py(v){const m=Le(),{protocol:_,hostname:w}=new URL(m);if(v.startsWith("chrome-extension://")){const X=new URL(v);return""===X.hostname&&""===w?"chrome-extension:"===_&&v.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&X.hostname===w}if(!ps.test(_))return!1;if(Yr.test(v))return w===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(w)}const Lf=new un(3e4,6e4);function Oa(){const v=Be().___jsl;if(v?.H)for(const m of Object.keys(v.H))if(v.H[m].r=v.H[m].r||[],v.H[m].L=v.H[m].L||[],v.H[m].r=[...v.H[m].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let Pu=null;function eg(v){return Pu=Pu||function Vf(v){return new Promise((m,_)=>{var w,M,P;function X(){Oa(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Oa(),_(Ee(v,"network-request-failed"))},timeout:Lf.get()})}if(null!==(M=null===(w=Be().gapi)||void 0===w?void 0:w.iframes)&&void 0!==M&&M.Iframe)m(gapi.iframes.getContext());else{if(null===(P=Be().gapi)||void 0===P||!P.load){const de=xi("iframefcb");return Be()[de]=()=>{gapi.load?X():_(Ee(v,"network-request-failed"))},fs(`https://apis.google.com/js/api.js?onload=${de}`).catch(He=>_(He))}X()}}).catch(m=>{throw Pu=null,m})}(v),Pu}const Gw=new un(5e3,15e3),Uf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},my=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ng(v){const m=v.config;q(m.authDomain,v,"auth-domain-config-required");const _=m.emulator?jn(m,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:m.apiKey,appName:v.name,v:pe.SDK_VERSION},M=my.get(v.config.apiHost);M&&(w.eid=M);const P=v._getFrameworks();return P.length&&(w.fw=P.join(",")),`${_}?${(0,L.xO)(w).slice(1)}`}function Nu(){return Nu=(0,u.Z)(function*(v){const m=yield eg(v),_=Be().gapi;return q(_,v,"internal-error"),m.open({where:document.body,url:ng(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uf,dontclear:!0},w=>new Promise(function(){var M=(0,u.Z)(function*(P,X){yield w.restyle({setHideOnLeave:!1});const de=Ee(v,"network-request-failed"),He=Be().setTimeout(()=>{X(de)},Gw.get());function st(){Be().clearTimeout(He),P(w)}w.ping(st).then(st,()=>{X(de)})});return function(P,X){return M.apply(this,arguments)}}()))}),Nu.apply(this,arguments)}const Tl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fu{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Gf(v,m,_,w,M,P){q(v.config.authDomain,v,"auth-domain-config-required"),q(v.config.apiKey,v,"invalid-api-key");const X={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:w,v:pe.SDK_VERSION,eventId:M};if(m instanceof wr){m.setDefaultLanguage(v.languageCode),X.providerId=m.providerId||"",(0,L.xb)(m.getCustomParameters())||(X.customParameters=JSON.stringify(m.getCustomParameters()));for(const[He,st]of Object.entries(P||{}))X[He]=st}if(m instanceof io){const He=m.getScopes().filter(st=>""!==st);He.length>0&&(X.scopes=He.join(","))}v.tenantId&&(X.tid=v.tenantId);const de=X;for(const He of Object.keys(de))void 0===de[He]&&delete de[He];return`${function Zd({config:v}){return v.emulator?jn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(de).slice(1)}`}const Yd="webStorageSupport";class uo extends class Vs{constructor(m){this.factorId=m}_process(m,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,w);case"signin":return this._finalizeSignIn(m,_.credential);default:return De("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new uo(m)}_finalizeEnroll(m,_,w){return function Qm(v,m){return zt(v,"POST","/v2/accounts/mfaEnrollment:finalize",en(v,m))}(m,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function ds(v,m){return zt(v,"POST","/v2/accounts/mfaSignIn:finalize",en(v,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gy=(()=>{class v{constructor(){}static assertion(_){return uo._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var kc="@firebase/auth";class _y{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(w=>{var M;m((null===(M=w)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Bs(){return window}function Xd(){return(Xd=(0,u.Z)(function*(v,m,_){var w;const{BuildInfo:M}=Bs();ee(m.sessionId,"AuthEvent did not contain a session ID");const P=yield Bu(m.sessionId),X={};return Pn()?X.ibi=M.packageName:Ze()?X.apn=M.packageName:Re(v,"operation-not-supported-in-this-environment"),M.displayName&&(X.appDisplayName=M.displayName),X.sessionId=P,Gf(v,_,m.type,void 0,null!==(w=m.eventId)&&void 0!==w?w:void 0,X)})).apply(this,arguments)}function Lu(){return(Lu=(0,u.Z)(function*(v){const{BuildInfo:m}=Bs(),_={};Pn()?_.iosBundleId=m.packageName:Ze()?_.androidPackageName=m.packageName:Re(v,"operation-not-supported-in-this-environment"),yield Il(v,_)})).apply(this,arguments)}function ms(){return(ms=(0,u.Z)(function*(v,m,_){const{cordova:w}=Bs();let M=()=>{};try{yield new Promise((P,X)=>{let de=null;function He(){var _t;P();const Mi=null===(_t=w.plugins.browsertab)||void 0===_t?void 0:_t.close;"function"==typeof Mi&&Mi(),"function"==typeof _?.close&&_.close()}function st(){de||(de=window.setTimeout(()=>{X(Ee(v,"redirect-cancelled-by-user"))},2e3))}function wt(){"visible"===document?.visibilityState&&st()}m.addPassiveListener(He),document.addEventListener("resume",st,!1),Ze()&&document.addEventListener("visibilitychange",wt,!1),M=()=>{m.removePassiveListener(He),document.removeEventListener("resume",st,!1),document.removeEventListener("visibilitychange",wt,!1),de&&window.clearTimeout(de)}})}finally{M()}})).apply(this,arguments)}function Bu(v){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,u.Z)(function*(v){const m=eh(v),_=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(_)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function eh(v){if(ee(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const m=new ArrayBuffer(v.length),_=new Uint8Array(m);for(let w=0;w<v.length;w++)_[w]=v.charCodeAt(w);return _}!function yy(v){(0,pe._registerComponent)(new se.wA("auth",(m,{options:_})=>{const w=m.getProvider("app").getImmediate(),M=m.getProvider("heartbeat"),{apiKey:P,authDomain:X}=w.options;return((de,He)=>{q(P&&!P.includes(":"),"invalid-api-key",{appName:de.name}),q(!X?.includes(":"),"argument-error",{appName:de.name});const st={apiKey:P,authDomain:X,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$r(v)},wt=new Ql(de,He,st);return function fe(v,m){const _=m?.persistence||[],w=(Array.isArray(_)?_:[_]).map(oe);m?.errorMap&&v._updateErrorMap(m.errorMap),v._initializeWithPersistence(w,m?.popupRedirectResolver)}(wt,_),wt})(w,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,w)=>{m.getProvider("auth-internal").initialize()})),(0,pe._registerComponent)(new se.wA("auth-internal",m=>{const _=Mn(m.getProvider("auth").getImmediate());return new _y(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,pe.registerVersion)(kc,"0.20.5",function Wf(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,pe.registerVersion)(kc,"0.20.5","esm2017")}("Browser");class vy extends Dl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(m)),super.onEvent(m)}initialized(){var m=this;return(0,u.Z)(function*(){yield m.initPromise})()}}function Fa(v){return La.apply(this,arguments)}function La(){return(La=(0,u.Z)(function*(v){const m=yield th()._get(nh(v));return m&&(yield th()._remove(nh(v))),m})).apply(this,arguments)}function Ww(){const v=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const w=Math.floor(Math.random()*m.length);v.push(m.charAt(w))}return v.join("")}function th(){return oe(oo)}function nh(v){return bi("authEvent",v.config.apiKey,v.name)}function Qf(v){if(!v?.includes("?"))return{};const[m,..._]=v.split("?");return(0,L.zd)(_.join("?"))}function rh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function Va(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function lg(v=(0,L.z$)()){return!("file:"!==Va()&&"ionic:"!==Va()&&"capacitor:"!==Va()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Iy(){try{const v=self.localStorage,m=nn();if(v)return v.setItem(m,"1"),v.removeItem(m),!function Al(v=(0,L.z$)()){return function sh(){return(0,L.w1)()&&11===document?.documentMode}()||function Dy(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch{return cg()&&(0,L.hl)()}return!1}function cg(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function xl(){return(function ep(){return"http:"===Va()||"https:"===Va()}()||(0,L.ru)()||lg())&&!function Cy(){return(0,L.b$)()||(0,L.UG)()}()&&Iy()&&!cg()}function oh(){return lg()&&typeof document<"u"}function Go(){return(Go=(0,u.Z)(function*(){return!!oh()&&new Promise(v=>{const m=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),v(!0)})})})).apply(this,arguments)}const Qi={LOCAL:"local",NONE:"none",SESSION:"session"},Ba=q,ug="persistence";function tp(v){return np.apply(this,arguments)}function np(){return(np=(0,u.Z)(function*(v){yield v._initializationPromise;const m=ip(),_=bi(ug,v.config.apiKey,v.name);m&&m.setItem(_,v._getPersistence())})).apply(this,arguments)}function ip(){var v;try{return(null===(v=function Oc(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const lh=q;class Us{constructor(){this.browserResolver=oe(class zf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wr,this._completeRedirectFn=Tt,this._overrideRedirectResult=Ma}_openPopup(m,_,w,M){var P=this;return(0,u.Z)(function*(){var X;ee(null===(X=P.eventManagers[m._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const de=Gf(m,_,w,Le(),M);return function $f(v,m,_,w=500,M=600){const P=Math.max((window.screen.availHeight-M)/2,0).toString(),X=Math.max((window.screen.availWidth-w)/2,0).toString();let de="";const He=Object.assign(Object.assign({},Tl),{width:w.toString(),height:M.toString(),top:P,left:X}),st=(0,L.z$)().toLowerCase();_&&(de=Si(st)?"_blank":_),An(st)&&(m=m||"http://localhost",He.scrollbars="yes");const wt=Object.entries(He).reduce((Mi,[pi,Fc])=>`${Mi}${pi}=${Fc},`,"");if(function zn(v=(0,L.z$)()){var m;return Pn(v)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(st)&&"_self"!==de)return function ig(v,m){const _=document.createElement("a");_.href=v,_.target=m;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(m||"",de),new Fu(null);const _t=window.open(m||"",de,wt);q(_t,v,"popup-blocked");try{_t.focus()}catch{}return new Fu(_t)}(m,de,nn())})()}_openRedirect(m,_,w,M){var P=this;return(0,u.Z)(function*(){return yield P._originValidation(m),function kt(v){Be().location.href=v}(Gf(m,_,w,Le(),M)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:M,promise:P}=this.eventManagers[_];return M?Promise.resolve(M):(ee(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(m);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(m){var _=this;return(0,u.Z)(function*(){const w=yield function Kd(v){return Nu.apply(this,arguments)}(m),M=new Dl(m);return w.register("authEvent",P=>(q(P?.authEvent,m,"invalid-auth-event"),{status:M.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:M},_.iframes[m._key()]=w,M})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Yd,{type:Yd},M=>{var P;const X=null===(P=M?.[0])||void 0===P?void 0:P[Yd];void 0!==X&&_(!!X),Re(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Wd(v){return Mc.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return xn()||Jn()||Pn()}}),this.cordovaResolver=oe(class Xf{constructor(){this._redirectPersistence=Wr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Tt,this._overrideRedirectResult=Ma}_initialize(m){var _=this;return(0,u.Z)(function*(){const w=m._key();let M=_.eventManagers.get(w);return M||(M=new vy(m),_.eventManagers.set(w,M),_.attachCallbackListeners(m,M)),M})()}_openPopup(m){Re(m,"operation-not-supported-in-this-environment")}_openRedirect(m,_,w,M){var P=this;return(0,u.Z)(function*(){!function Rc(v){var m,_,w,M,P,X,de,He,st,wt;const _t=Bs();q("function"==typeof(null===(m=_t?.universalLinks)||void 0===m?void 0:m.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof(null===(_=_t?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q("function"==typeof(null===(P=null===(M=null===(w=_t?.cordova)||void 0===w?void 0:w.plugins)||void 0===M?void 0:M.browsertab)||void 0===P?void 0:P.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(He=null===(de=null===(X=_t?.cordova)||void 0===X?void 0:X.plugins)||void 0===de?void 0:de.browsertab)||void 0===He?void 0:He.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(wt=null===(st=_t?.cordova)||void 0===st?void 0:st.InAppBrowser)||void 0===wt?void 0:wt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const X=yield P._initialize(m);yield X.initialized(),X.resetRedirect(),function xa(){Fs.clear()}(),yield P._originValidation(m);const de=function by(v,m,_=null){return{type:m,eventId:_,urlResponse:null,sessionId:Ww(),postBody:null,tenantId:v.tenantId,error:Ee(v,"no-auth-event")}}(m,w,M);yield function Zf(v,m){return th()._set(nh(v),m)}(m,de);const He=yield function sg(v,m,_){return Xd.apply(this,arguments)}(m,de,_),st=yield function Vu(v){const{cordova:m}=Bs();return new Promise(_=>{m.plugins.browsertab.isAvailable(w=>{let M=null;w?m.plugins.browsertab.openUrl(v):M=m.InAppBrowser.open(v,function sa(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(M)})})}(He);return function og(v,m,_){return ms.apply(this,arguments)}(m,X,st)})()}_isIframeWebStorageSupported(m,_){throw new Error("Method not implemented.")}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function zw(v){return Lu.apply(this,arguments)}(m)),this.originValidationPromises[_]}attachCallbackListeners(m,_){const{universalLinks:w,handleOpenURL:M,BuildInfo:P}=Bs(),X=setTimeout((0,u.Z)(function*(){yield Fa(m),_.onEvent(rh())}),500),de=function(){var wt=(0,u.Z)(function*(_t){clearTimeout(X);const Mi=yield Fa(m);let pi=null;Mi&&_t?.url&&(pi=function Yf(v,m){var _,w;const M=function Kw(v){const m=Qf(v),_=m.link?decodeURIComponent(m.link):void 0,w=Qf(_).link,M=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return Qf(M).link||M||w||_||v}(m);if(M.includes("/__/auth/callback")){const P=Qf(M),X=P.firebaseError?function ag(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,de=null===(w=null===(_=X?.code)||void 0===_?void 0:_.split("auth/"))||void 0===w?void 0:w[1],He=de?Ee(de):null;return He?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:He,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:M,postBody:null}}return null}(Mi,_t.url)),_.onEvent(pi||rh())});return function(Mi){return wt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,de);const He=M,st=`${P.packageName.toLowerCase()}://`;Bs().handleOpenURL=function(){var wt=(0,u.Z)(function*(_t){if(_t.toLowerCase().startsWith(st)&&de({url:_t}),"function"==typeof He)try{He(_t)}catch(Mi){console.error(Mi)}});return function(_t){return wt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Wr,this._completeRedirectFn=Tt,this._overrideRedirectResult=Ma}_initialize(m){var _=this;return(0,u.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,_,w,M){var P=this;return(0,u.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(m,_,w,M)})()}_openRedirect(m,_,w,M){var P=this;return(0,u.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(m,_,w,M)})()}_isIframeWebStorageSupported(m,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,_)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return oh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,u.Z)(function*(){if(m.underlyingResolver)return;const _=yield function Uu(){return Go.apply(this,arguments)}();m.underlyingResolver=_?m.cordovaResolver:m.browserResolver})()}}function Hu(v){return v.unwrap()}function Pc(v){return pg(v)}function pg(v){const{_tokenResponse:m}=v instanceof L.ZR?v.customData:v;if(!m)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return Sc.credentialFromResult(v);const _=m.providerId;if(!_||"password"===_)return null;let w;switch(_){case"google.com":w=ul;break;case"facebook.com":w=mu;break;case"github.com":w=dl;break;case"twitter.com":w=nc;break;default:const{oauthIdToken:M,oauthAccessToken:P,oauthTokenSecret:X,pendingToken:de,nonce:He}=m;return P||X||M||de?de?_.startsWith("saml.")?da._create(_,de):Is._fromParams({providerId:_,signInMethod:_,pendingToken:de,idToken:M,accessToken:P}):new ua(_).credential({idToken:M,accessToken:P,rawNonce:He}):null}return v instanceof L.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function wn(v,m){return m.catch(_=>{throw _ instanceof L.ZR&&function fg(v,m){var _,w;const M=null===(_=m.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=m)||void 0===w?void 0:w.code))m.resolver=new rp(v,function di(v,m){var _;const w=(0,L.m9)(v),M=m;return q(m.customData.operationType,w,"argument-error"),q(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),Po._fromError(w,M)}(v,m));else if(M){const P=pg(m),X=m;P&&(X.credential=P,X.tenantId=M.tenantId||void 0,X.email=M.email||void 0,X.phoneNumber=M.phoneNumber||void 0)}}(v,_),_}).then(_=>{const M=_.user;return{operationType:_.operationType,credential:Pc(_),additionalUserInfo:Sf(_),user:Tn.getOrCreate(M)}})}function ju(v,m){return ch.apply(this,arguments)}function ch(){return(ch=(0,u.Z)(function*(v,m){const _=yield m;return{verificationId:_.verificationId,confirm:w=>wn(v,_.confirm(w))}})).apply(this,arguments)}class rp{constructor(m,_){this.resolver=_,this.auth=function hg(v){return v.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return wn(Hu(this.auth),this.resolver.resolveSignIn(m))}}class Tn{constructor(m){this._delegate=m,this.multiFactor=function Mf(v){const m=(0,L.m9)(v);return No.has(m)||No.set(m,xf._fromUser(m)),No.get(m)}(m)}static getOrCreate(m){return Tn.USER_MAP.has(m)||Tn.USER_MAP.set(m,new Tn(m)),Tn.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var _=this;return(0,u.Z)(function*(){return wn(_.auth,gu(_._delegate,m))})()}linkWithPhoneNumber(m,_){var w=this;return(0,u.Z)(function*(){return ju(w.auth,function yn(v,m,_){return Tc.apply(this,arguments)}(w._delegate,m,_))})()}linkWithPopup(m){var _=this;return(0,u.Z)(function*(){return wn(_.auth,function Vt(v,m,_){return Sa.apply(this,arguments)}(_._delegate,m,Us))})()}linkWithRedirect(m){var _=this;return(0,u.Z)(function*(){return yield tp(Mn(_.auth)),function te(v,m,_){return function ue(v,m,_){return Ae.apply(this,arguments)}(v,m,_)}(_._delegate,m,Us)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var _=this;return(0,u.Z)(function*(){return wn(_.auth,oc(_._delegate,m))})()}reauthenticateWithPhoneNumber(m,_){return ju(this.auth,function Uo(v,m,_){return Li.apply(this,arguments)}(this._delegate,m,_))}reauthenticateWithPopup(m){return wn(this.auth,function Nf(v,m,_){return qd.apply(this,arguments)}(this._delegate,m,Us))}reauthenticateWithRedirect(m){var _=this;return(0,u.Z)(function*(){return yield tp(Mn(_.auth)),function S(v,m,_){return function R(v,m,_){return H.apply(this,arguments)}(v,m,_)}(_._delegate,m,Us)})()}sendEmailVerification(m){return function gl(v,m){return vu.apply(this,arguments)}(this._delegate,m)}unlink(m){var _=this;return(0,u.Z)(function*(){return yield function rc(v,m){return Io.apply(this,arguments)}(_._delegate,m),_})()}updateEmail(m){return function fc(v,m){return pc((0,L.m9)(v),m,null)}(this._delegate,m)}updatePassword(m){return function wu(v,m){return pc((0,L.m9)(v),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function Au(v,m){return xu.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function dc(v,m){return hc.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,_){return function wa(v,m,_){return _l.apply(this,arguments)}(this._delegate,m,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Tn.USER_MAP=new WeakMap;const zo=q;let $u=(()=>{class v{constructor(_,w){if(this.app=_,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=_.options;zo(M,"invalid-api-key",{appName:_.name}),zo(M,"invalid-api-key",{appName:_.name});const P=typeof window<"u"?Us:void 0;this._delegate=w.initialize({options:{persistence:Ty(M,_.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Tn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,w){!function Co(v,m,_){const w=Mn(v);q(w._canInitEmulator,w,"emulator-config-failed"),q(/^https?:\/\//.test(m),w,"invalid-emulator-scheme");const M=!!_?.disableWarnings,P=ei(m),{host:X,port:de}=function aa(v){const m=ei(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(m.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(w);if(M){const P=M[1];return{host:P,port:Cs(w.substr(P.length+1))}}{const[P,X]=w.split(":");return{host:P,port:Cs(X)}}}(m);w.config.emulator={url:`${P}//${X}${null===de?"":`:${de}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:X,port:de,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Wi(){function v(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,w)}applyActionCode(_){return function ml(v,m){return ga.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return _a(this._delegate,_)}confirmPasswordReset(_,w){return function Mo(v,m,_){return Cr.apply(this,arguments)}(this._delegate,_,w)}createUserWithEmailAndPassword(_,w){var M=this;return(0,u.Z)(function*(){return wn(M._delegate,function ui(v,m,_){return Gr.apply(this,arguments)}(M._delegate,_,w))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function ba(v,m){return cc.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Fd(v,m){return"EMAIL_SIGNIN"===tc.parseLink(m)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,u.Z)(function*(){zo(xl(),_._delegate,"operation-not-supported-in-this-environment");const w=yield function Ye(v,m){return ht.apply(this,arguments)}(_._delegate,Us);return w?wn(_._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Ey(v,m){Mn(v)._logFramework(m)}(this._delegate,_)}onAuthStateChanged(_,w,M){const{next:P,error:X,complete:de}=Gu(_,w,M);return this._delegate.onAuthStateChanged(P,X,de)}onIdTokenChanged(_,w,M){const{next:P,error:X,complete:de}=Gu(_,w,M);return this._delegate.onIdTokenChanged(P,X,de)}sendSignInLinkToEmail(_,w){return function ko(v,m,_){return zr.apply(this,arguments)}(this._delegate,_,w)}sendPasswordResetEmail(_,w){return function Nn(v,m,_){return ma.apply(this,arguments)}(this._delegate,_,w||void 0)}setPersistence(_){var w=this;return(0,u.Z)(function*(){let M;switch(function dg(v,m){Ba(Object.values(Qi).includes(m),v,"invalid-persistence-type"),(0,L.b$)()?Ba(m!==Qi.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?Ba(m===Qi.NONE,v,"unsupported-persistence-type"):cg()?Ba(m===Qi.NONE||m===Qi.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):Ba(m===Qi.NONE||Iy(),v,"unsupported-persistence-type")}(w._delegate,_),_){case Qi.SESSION:M=Wr;break;case Qi.LOCAL:M=(yield oe(Bo)._isAvailable())?Bo:oo;break;case Qi.NONE:M=tn;break;default:return Re("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return wn(this._delegate,function Un(v){return Pd.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return wn(this._delegate,at(this._delegate,_))}signInWithCustomToken(_){return wn(this._delegate,function ac(v,m){return Se.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,w){return wn(this._delegate,function yu(v,m,_){return at((0,L.m9)(v),pu.credential(m,_))}(this._delegate,_,w))}signInWithEmailLink(_,w){return wn(this._delegate,function Ld(v,m,_){return ya.apply(this,arguments)}(this._delegate,_,w))}signInWithPhoneNumber(_,w){return ju(this._delegate,function Gd(v,m,_){return Rn.apply(this,arguments)}(this._delegate,_,w))}signInWithPopup(_){var w=this;return(0,u.Z)(function*(){return zo(xl(),w._delegate,"operation-not-supported-in-this-environment"),wn(w._delegate,function Ru(v,m,_){return Cl.apply(this,arguments)}(w._delegate,_,Us))})()}signInWithRedirect(_){var w=this;return(0,u.Z)(function*(){return zo(xl(),w._delegate,"operation-not-supported-in-this-environment"),yield tp(w._delegate),function hi(v,m,_){return function co(v,m,_){return T.apply(this,arguments)}(v,m,_)}(w._delegate,_,Us)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Df(v,m){return As.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Qi,v})();function Gu(v,m,_){let w=v;"function"!=typeof v&&({next:w,error:m,complete:_}=v);const M=w;return{next:X=>M(X&&Tn.getOrCreate(X)),error:m,complete:_}}function Ty(v,m){const _=function ah(v,m){const _=ip();if(!_)return[];const w=bi(ug,v,m);switch(_.getItem(w)){case Qi.NONE:return[tn];case Qi.LOCAL:return[Bo,Wr];case Qi.SESSION:return[Wr];default:return[]}}(v,m);if(typeof self<"u"&&!_.includes(Bo)&&_.push(Bo),typeof window<"u")for(const w of[oo,Wr])_.includes(w)||_.push(w);return _.includes(tn)||_.push(tn),_}class uh{constructor(){this.providerId="phone",this._delegate=new Sc(Hu(ie.Z.auth()))}static credential(m,_){return Sc.credential(m,_)}verifyPhoneNumber(m,_){return this._delegate.verifyPhoneNumber(m,_)}unwrap(){return this._delegate}}uh.PHONE_SIGN_IN_METHOD=Sc.PHONE_SIGN_IN_METHOD,uh.PROVIDER_ID=Sc.PROVIDER_ID;const dh=q;class Nc{constructor(m,_,w=ie.Z.app()){var M;dh(null===(M=w.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Tu(m,_,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function mg(v){v.INTERNAL.registerComponent(new se.wA("auth-compat",m=>{const _=m.getProvider("app-compat").getImmediate(),w=m.getProvider("auth");return new $u(_,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:pu,FacebookAuthProvider:mu,GithubAuthProvider:dl,GoogleAuthProvider:ul,OAuthProvider:ua,SAMLAuthProvider:In,PhoneAuthProvider:uh,PhoneMultiFactorGenerator:gy,RecaptchaVerifier:Nc,TwitterAuthProvider:nc,Auth:$u,AuthCredential:_r,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.18")}(ie.Z)},8306:(ft,xe,V)=>{V.d(xe,{y:()=>z});var u=V(930),ie=V(727),L=V(8822),pe=V(4671);var se=V(2416),me=V(576),ve=V(2806);let z=(()=>{class Me{constructor($e){$e&&(this._subscribe=$e)}lift($e){const ge=new Me;return ge.source=this,ge.operator=$e,ge}subscribe($e,ge,be){const et=function Ge(Me){return Me&&Me instanceof u.Lv||function ne(Me){return Me&&(0,me.m)(Me.next)&&(0,me.m)(Me.error)&&(0,me.m)(Me.complete)}(Me)&&(0,ie.Nn)(Me)}($e)?$e:new u.Hp($e,ge,be);return(0,ve.x)(()=>{const{operator:rt,source:Re}=this;et.add(rt?rt.call(et,Re):Re?this._subscribe(et):this._trySubscribe(et))}),et}_trySubscribe($e){try{return this._subscribe($e)}catch(ge){$e.error(ge)}}forEach($e,ge){return new(ge=G(ge))((be,et)=>{const rt=new u.Hp({next:Re=>{try{$e(Re)}catch(Ee){et(Ee),rt.unsubscribe()}},error:et,complete:be});this.subscribe(rt)})}_subscribe($e){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe($e)}[L.L](){return this}pipe(...$e){return function ye(Me){return 0===Me.length?pe.y:1===Me.length?Me[0]:function($e){return Me.reduce((ge,be)=>be(ge),$e)}}($e)(this)}toPromise($e){return new($e=G($e))((ge,be)=>{let et;this.subscribe(rt=>et=rt,rt=>be(rt),()=>ge(et))})}}return Me.create=ke=>new Me(ke),Me})();function G(Me){var ke;return null!==(ke=Me??se.v.Promise)&&void 0!==ke?ke:Promise}},7579:(ft,xe,V)=>{V.d(xe,{x:()=>se});var u=V(8306),ie=V(727);const pe=(0,V(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=V(8737),ye=V(2806);let se=(()=>{class ve extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const ne=new me(this,this);return ne.operator=G,ne}_throwIfClosed(){if(this.closed)throw new pe}next(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(G)}})}error(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:ne}=this;for(;ne.length;)ne.shift().error(G)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:ne,isStopped:Ge,observers:Me}=this;return ne||Ge?ie.Lc:(this.currentObservers=null,Me.push(G),new ie.w0(()=>{this.currentObservers=null,(0,le.P)(Me,G)}))}_checkFinalizedStatuses(G){const{hasError:ne,thrownError:Ge,isStopped:Me}=this;ne?G.error(Ge):Me&&G.complete()}asObservable(){const G=new u.y;return G.source=this,G}}return ve.create=(z,G)=>new me(z,G),ve})();class me extends se{constructor(z,G){super(),this.destination=z,this.source=G}next(z){var G,ne;null===(ne=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===ne||ne.call(G,z)}error(z){var G,ne;null===(ne=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===ne||ne.call(G,z)}complete(){var z,G;null===(G=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===G||G.call(z)}_subscribe(z){var G,ne;return null!==(ne=null===(G=this.source)||void 0===G?void 0:G.subscribe(z))&&void 0!==ne?ne:ie.Lc}}},930:(ft,xe,V)=>{V.d(xe,{Hp:()=>$e,Lv:()=>ne});var u=V(576),ie=V(727),L=V(2416),pe=V(7849),le=V(5032);const ye=ve("C",void 0,void 0);function ve(Re,Ee,Te){return{kind:Re,value:Ee,error:Te}}var z=V(3410),G=V(2806);class ne extends ie.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,ie.Nn)(Ee)&&Ee.add(this)):this.destination=rt}static create(Ee,Te,je){return new $e(Ee,Te,je)}next(Ee){this.isStopped?et(function me(Re){return ve("N",Re,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?et(function se(Re){return ve("E",void 0,Re)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?et(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Me(Re,Ee){return Ge.call(Re,Ee)}class ke{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Ee)}catch(je){ge(je)}}error(Ee){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Ee)}catch(je){ge(je)}else ge(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Te){ge(Te)}}}class $e extends ne{constructor(Ee,Te,je){let ze;if(super(),(0,u.m)(Ee)||!Ee)ze={next:Ee??void 0,error:Te??void 0,complete:je??void 0};else{let q;this&&L.v.useDeprecatedNextContext?(q=Object.create(Ee),q.unsubscribe=()=>this.unsubscribe(),ze={next:Ee.next&&Me(Ee.next,q),error:Ee.error&&Me(Ee.error,q),complete:Ee.complete&&Me(Ee.complete,q)}):ze=Ee}this.destination=new ke(ze)}}function ge(Re){L.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Re):(0,pe.h)(Re)}function et(Re,Ee){const{onStoppedNotification:Te}=L.v;Te&&z.z.setTimeout(()=>Te(Re,Ee))}const rt={closed:!0,next:le.Z,error:function be(Re){throw Re},complete:le.Z}},727:(ft,xe,V)=>{V.d(xe,{Lc:()=>ye,w0:()=>le,Nn:()=>se});var u=V(576);const L=(0,V(3888).d)(ve=>function(G){ve(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((ne,Ge)=>`${Ge+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var pe=V(8737);class le{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Me of G)Me.remove(this);else G.remove(this);const{initialTeardown:ne}=this;if((0,u.m)(ne))try{ne()}catch(Me){z=Me instanceof L?Me.errors:[Me]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Me of Ge)try{me(Me)}catch(ke){z=z??[],ke instanceof L?z=[...z,...ke.errors]:z.push(ke)}}if(z)throw new L(z)}}add(z){var G;if(z&&z!==this)if(this.closed)me(z);else{if(z instanceof le){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(z)}}_hasParent(z){const{_parentage:G}=this;return G===z||Array.isArray(G)&&G.includes(z)}_addParent(z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(z),G):G?[G,z]:z}_removeParent(z){const{_parentage:G}=this;G===z?this._parentage=null:Array.isArray(G)&&(0,pe.P)(G,z)}remove(z){const{_finalizers:G}=this;G&&(0,pe.P)(G,z),z instanceof le&&z._removeParent(this)}}le.EMPTY=(()=>{const ve=new le;return ve.closed=!0,ve})();const ye=le.EMPTY;function se(ve){return ve instanceof le||ve&&"closed"in ve&&(0,u.m)(ve.remove)&&(0,u.m)(ve.add)&&(0,u.m)(ve.unsubscribe)}function me(ve){(0,u.m)(ve)?ve():ve.unsubscribe()}},2416:(ft,xe,V)=>{V.d(xe,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ft,xe,V)=>{V.d(xe,{E:()=>ie});const ie=new(V(8306).y)(le=>le.complete())},8996:(ft,xe,V)=>{V.d(xe,{D:()=>Ee});var u=V(8421),ie=V(5363),L=V(9468),ye=V(8306),me=V(2202),ve=V(576),z=V(9672);function ne(Te,je){if(!Te)throw new Error("Iterable cannot be null");return new ye.y(ze=>{(0,z.f)(ze,je,()=>{const q=Te[Symbol.asyncIterator]();(0,z.f)(ze,je,()=>{q.next().then(De=>{De.done?ze.complete():ze.next(De.value)})},0,!0)})})}var Ge=V(3670),Me=V(8239),ke=V(1144),$e=V(6495),ge=V(2206),be=V(4532),et=V(3260);function Ee(Te,je){return je?function Re(Te,je){if(null!=Te){if((0,Ge.c)(Te))return function pe(Te,je){return(0,u.Xf)(Te).pipe((0,L.R)(je),(0,ie.Q)(je))}(Te,je);if((0,ke.z)(Te))return function se(Te,je){return new ye.y(ze=>{let q=0;return je.schedule(function(){q===Te.length?ze.complete():(ze.next(Te[q++]),ze.closed||this.schedule())})})}(Te,je);if((0,Me.t)(Te))return function le(Te,je){return(0,u.Xf)(Te).pipe((0,L.R)(je),(0,ie.Q)(je))}(Te,je);if((0,ge.D)(Te))return ne(Te,je);if((0,$e.T)(Te))return function G(Te,je){return new ye.y(ze=>{let q;return(0,z.f)(ze,je,()=>{q=Te[me.h](),(0,z.f)(ze,je,()=>{let De,ee;try{({value:De,done:ee}=q.next())}catch(ae){return void ze.error(ae)}ee?ze.complete():ze.next(De)},0,!0)}),()=>(0,ve.m)(q?.return)&&q.return()})}(Te,je);if((0,et.L)(Te))return function rt(Te,je){return ne((0,et.Q)(Te),je)}(Te,je)}throw(0,be.z)(Te)}(Te,je):(0,u.Xf)(Te)}},8421:(ft,xe,V)=>{V.d(xe,{Xf:()=>Ge});var u=V(655),ie=V(1144),L=V(8239),pe=V(8306),le=V(3670),ye=V(2206),se=V(4532),me=V(6495),ve=V(3260),z=V(576),G=V(7849),ne=V(8822);function Ge(Re){if(Re instanceof pe.y)return Re;if(null!=Re){if((0,le.c)(Re))return function Me(Re){return new pe.y(Ee=>{const Te=Re[ne.L]();if((0,z.m)(Te.subscribe))return Te.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,ie.z)(Re))return function ke(Re){return new pe.y(Ee=>{for(let Te=0;Te<Re.length&&!Ee.closed;Te++)Ee.next(Re[Te]);Ee.complete()})}(Re);if((0,L.t)(Re))return function $e(Re){return new pe.y(Ee=>{Re.then(Te=>{Ee.closed||(Ee.next(Te),Ee.complete())},Te=>Ee.error(Te)).then(null,G.h)})}(Re);if((0,ye.D)(Re))return be(Re);if((0,me.T)(Re))return function ge(Re){return new pe.y(Ee=>{for(const Te of Re)if(Ee.next(Te),Ee.closed)return;Ee.complete()})}(Re);if((0,ve.L)(Re))return function et(Re){return be((0,ve.Q)(Re))}(Re)}throw(0,se.z)(Re)}function be(Re){return new pe.y(Ee=>{(function rt(Re,Ee){var Te,je,ze,q;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Te=(0,u.KL)(Re);!(je=yield Te.next()).done;)if(Ee.next(je.value),Ee.closed)return}catch(De){ze={error:De}}finally{try{je&&!je.done&&(q=Te.return)&&(yield q.call(Te))}finally{if(ze)throw ze.error}}Ee.complete()})})(Re,Ee).catch(Te=>Ee.error(Te))})}},6451:(ft,xe,V)=>{V.d(xe,{T:()=>ye});var u=V(8189),ie=V(8421),L=V(515),pe=V(3269),le=V(8996);function ye(...se){const me=(0,pe.yG)(se),ve=(0,pe._6)(se,1/0),z=se;return z.length?1===z.length?(0,ie.Xf)(z[0]):(0,u.J)(ve)((0,le.D)(z,me)):L.E}},5403:(ft,xe,V)=>{V.d(xe,{x:()=>ie});var u=V(930);function ie(pe,le,ye,se,me){return new L(pe,le,ye,se,me)}class L extends u.Lv{constructor(le,ye,se,me,ve,z){super(le),this.onFinalize=ve,this.shouldUnsubscribe=z,this._next=ye?function(G){try{ye(G)}catch(ne){le.error(ne)}}:super._next,this._error=me?function(G){try{me(G)}catch(ne){le.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch(G){le.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(ft,xe,V)=>{V.d(xe,{U:()=>L});var u=V(4482),ie=V(5403);function L(pe,le){return(0,u.e)((ye,se)=>{let me=0;ye.subscribe((0,ie.x)(se,ve=>{se.next(pe.call(le,ve,me++))}))})}},8189:(ft,xe,V)=>{V.d(xe,{J:()=>L});var u=V(5577),ie=V(4671);function L(pe=1/0){return(0,u.z)(ie.y,pe)}},5577:(ft,xe,V)=>{V.d(xe,{z:()=>me});var u=V(4004),ie=V(8421),L=V(4482),pe=V(9672),le=V(5403),se=V(576);function me(ve,z,G=1/0){return(0,se.m)(z)?me((ne,Ge)=>(0,u.U)((Me,ke)=>z(ne,Me,Ge,ke))((0,ie.Xf)(ve(ne,Ge))),G):("number"==typeof z&&(G=z),(0,L.e)((ne,Ge)=>function ye(ve,z,G,ne,Ge,Me,ke,$e){const ge=[];let be=0,et=0,rt=!1;const Re=()=>{rt&&!ge.length&&!be&&z.complete()},Ee=je=>be<ne?Te(je):ge.push(je),Te=je=>{Me&&z.next(je),be++;let ze=!1;(0,ie.Xf)(G(je,et++)).subscribe((0,le.x)(z,q=>{Ge?.(q),Me?Ee(q):z.next(q)},()=>{ze=!0},void 0,()=>{if(ze)try{for(be--;ge.length&&be<ne;){const q=ge.shift();ke?(0,pe.f)(z,ke,()=>Te(q)):Te(q)}Re()}catch(q){z.error(q)}}))};return ve.subscribe((0,le.x)(z,Ee,()=>{rt=!0,Re()})),()=>{$e?.()}}(ne,Ge,ve,G)))}},5363:(ft,xe,V)=>{V.d(xe,{Q:()=>pe});var u=V(9672),ie=V(4482),L=V(5403);function pe(le,ye=0){return(0,ie.e)((se,me)=>{se.subscribe((0,L.x)(me,ve=>(0,u.f)(me,le,()=>me.next(ve),ye),()=>(0,u.f)(me,le,()=>me.complete(),ye),ve=>(0,u.f)(me,le,()=>me.error(ve),ye)))})}},3099:(ft,xe,V)=>{V.d(xe,{B:()=>le});var u=V(8421),ie=V(7579),L=V(930),pe=V(4482);function le(se={}){const{connector:me=(()=>new ie.x),resetOnError:ve=!0,resetOnComplete:z=!0,resetOnRefCountZero:G=!0}=se;return ne=>{let Ge,Me,ke,$e=0,ge=!1,be=!1;const et=()=>{Me?.unsubscribe(),Me=void 0},rt=()=>{et(),Ge=ke=void 0,ge=be=!1},Re=()=>{const Ee=Ge;rt(),Ee?.unsubscribe()};return(0,pe.e)((Ee,Te)=>{$e++,!be&&!ge&&et();const je=ke=ke??me();Te.add(()=>{$e--,0===$e&&!be&&!ge&&(Me=ye(Re,G))}),je.subscribe(Te),!Ge&&$e>0&&(Ge=new L.Hp({next:ze=>je.next(ze),error:ze=>{be=!0,et(),Me=ye(rt,ve,ze),je.error(ze)},complete:()=>{ge=!0,et(),Me=ye(rt,z),je.complete()}}),(0,u.Xf)(Ee).subscribe(Ge))})(ne)}}function ye(se,me,...ve){if(!0===me)return void se();if(!1===me)return;const z=new L.Hp({next:()=>{z.unsubscribe(),se()}});return me(...ve).subscribe(z)}},9468:(ft,xe,V)=>{V.d(xe,{R:()=>ie});var u=V(4482);function ie(L,pe=0){return(0,u.e)((le,ye)=>{ye.add(L.schedule(()=>le.subscribe(ye),pe))})}},8505:(ft,xe,V)=>{V.d(xe,{b:()=>le});var u=V(576),ie=V(4482),L=V(5403),pe=V(4671);function le(ye,se,me){const ve=(0,u.m)(ye)||se||me?{next:ye,error:se,complete:me}:ye;return ve?(0,ie.e)((z,G)=>{var ne;null===(ne=ve.subscribe)||void 0===ne||ne.call(ve);let Ge=!0;z.subscribe((0,L.x)(G,Me=>{var ke;null===(ke=ve.next)||void 0===ke||ke.call(ve,Me),G.next(Me)},()=>{var Me;Ge=!1,null===(Me=ve.complete)||void 0===Me||Me.call(ve),G.complete()},Me=>{var ke;Ge=!1,null===(ke=ve.error)||void 0===ke||ke.call(ve,Me),G.error(Me)},()=>{var Me,ke;Ge&&(null===(Me=ve.unsubscribe)||void 0===Me||Me.call(ve)),null===(ke=ve.finalize)||void 0===ke||ke.call(ve)}))}):pe.y}},4408:(ft,xe,V)=>{V.d(xe,{o:()=>le});var u=V(727);class ie extends u.w0{constructor(se,me){super()}schedule(se,me=0){return this}}const L={setInterval(ye,se,...me){const{delegate:ve}=L;return ve?.setInterval?ve.setInterval(ye,se,...me):setInterval(ye,se,...me)},clearInterval(ye){const{delegate:se}=L;return(se?.clearInterval||clearInterval)(ye)},delegate:void 0};var pe=V(8737);class le extends ie{constructor(se,me){super(se,me),this.scheduler=se,this.work=me,this.pending=!1}schedule(se,me=0){if(this.closed)return this;this.state=se;const ve=this.id,z=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(z,ve,me)),this.pending=!0,this.delay=me,this.id=this.id||this.requestAsyncId(z,this.id,me),this}requestAsyncId(se,me,ve=0){return L.setInterval(se.flush.bind(se,this),ve)}recycleAsyncId(se,me,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return me;L.clearInterval(me)}execute(se,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(se,me);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,me){let z,ve=!1;try{this.work(se)}catch(G){ve=!0,z=G||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:se,scheduler:me}=this,{actions:ve}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,pe.P)(ve,this),null!=se&&(this.id=this.recycleAsyncId(me,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(ft,xe,V)=>{V.d(xe,{v:()=>L});var u=V(6063);class ie{constructor(le,ye=ie.now){this.schedulerActionCtor=le,this.now=ye}schedule(le,ye=0,se){return new this.schedulerActionCtor(this,le).schedule(se,ye)}}ie.now=u.l.now;class L extends ie{constructor(le,ye=ie.now){super(le,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:ye}=this;if(this._active)return void ye.push(le);let se;this._active=!0;do{if(se=le.execute(le.state,le.delay))break}while(le=ye.shift());if(this._active=!1,se){for(;le=ye.shift();)le.unsubscribe();throw se}}}},4986:(ft,xe,V)=>{V.d(xe,{P:()=>pe,z:()=>L});var u=V(4408);const L=new(V(7565).v)(u.o),pe=L},6063:(ft,xe,V)=>{V.d(xe,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(ft,xe,V)=>{V.d(xe,{z:()=>u});const u={setTimeout(ie,L,...pe){const{delegate:le}=u;return le?.setTimeout?le.setTimeout(ie,L,...pe):setTimeout(ie,L,...pe)},clearTimeout(ie){const{delegate:L}=u;return(L?.clearTimeout||clearTimeout)(ie)},delegate:void 0}},2202:(ft,xe,V)=>{V.d(xe,{h:()=>ie});const ie=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ft,xe,V)=>{V.d(xe,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ft,xe,V)=>{V.d(xe,{_6:()=>ye,jO:()=>pe,yG:()=>le});var u=V(576),ie=V(3532);function L(se){return se[se.length-1]}function pe(se){return(0,u.m)(L(se))?se.pop():void 0}function le(se){return(0,ie.K)(L(se))?se.pop():void 0}function ye(se,me){return"number"==typeof L(se)?se.pop():me}},8737:(ft,xe,V)=>{function u(ie,L){if(ie){const pe=ie.indexOf(L);0<=pe&&ie.splice(pe,1)}}V.d(xe,{P:()=>u})},3888:(ft,xe,V)=>{function u(ie){const pe=ie(le=>{Error.call(le),le.stack=(new Error).stack});return pe.prototype=Object.create(Error.prototype),pe.prototype.constructor=pe,pe}V.d(xe,{d:()=>u})},2806:(ft,xe,V)=>{V.d(xe,{O:()=>pe,x:()=>L});var u=V(2416);let ie=null;function L(le){if(u.v.useDeprecatedSynchronousErrorHandling){const ye=!ie;if(ye&&(ie={errorThrown:!1,error:null}),le(),ye){const{errorThrown:se,error:me}=ie;if(ie=null,se)throw me}}else le()}function pe(le){u.v.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=le)}},9672:(ft,xe,V)=>{function u(ie,L,pe,le=0,ye=!1){const se=L.schedule(function(){pe(),ye?ie.add(this.schedule(null,le)):this.unsubscribe()},le);if(ie.add(se),!ye)return se}V.d(xe,{f:()=>u})},4671:(ft,xe,V)=>{function u(ie){return ie}V.d(xe,{y:()=>u})},1144:(ft,xe,V)=>{V.d(xe,{z:()=>u});const u=ie=>ie&&"number"==typeof ie.length&&"function"!=typeof ie},2206:(ft,xe,V)=>{V.d(xe,{D:()=>ie});var u=V(576);function ie(L){return Symbol.asyncIterator&&(0,u.m)(L?.[Symbol.asyncIterator])}},576:(ft,xe,V)=>{function u(ie){return"function"==typeof ie}V.d(xe,{m:()=>u})},3670:(ft,xe,V)=>{V.d(xe,{c:()=>L});var u=V(8822),ie=V(576);function L(pe){return(0,ie.m)(pe[u.L])}},6495:(ft,xe,V)=>{V.d(xe,{T:()=>L});var u=V(2202),ie=V(576);function L(pe){return(0,ie.m)(pe?.[u.h])}},8239:(ft,xe,V)=>{V.d(xe,{t:()=>ie});var u=V(576);function ie(L){return(0,u.m)(L?.then)}},3260:(ft,xe,V)=>{V.d(xe,{L:()=>pe,Q:()=>L});var u=V(655),ie=V(576);function L(le){return(0,u.FC)(this,arguments,function*(){const se=le.getReader();try{for(;;){const{value:me,done:ve}=yield(0,u.qq)(se.read());if(ve)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(me)}}finally{se.releaseLock()}})}function pe(le){return(0,ie.m)(le?.getReader)}},3532:(ft,xe,V)=>{V.d(xe,{K:()=>ie});var u=V(576);function ie(L){return L&&(0,u.m)(L.schedule)}},4482:(ft,xe,V)=>{V.d(xe,{A:()=>ie,e:()=>L});var u=V(576);function ie(pe){return(0,u.m)(pe?.lift)}function L(pe){return le=>{if(ie(le))return le.lift(function(ye){try{return pe(ye,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ft,xe,V)=>{function u(){}V.d(xe,{Z:()=>u})},7849:(ft,xe,V)=>{V.d(xe,{h:()=>L});var u=V(2416),ie=V(3410);function L(pe){ie.z.setTimeout(()=>{const{onUnhandledError:le}=u.v;if(!le)throw pe;le(pe)})}},4532:(ft,xe,V)=>{function u(ie){return new TypeError(`You provided ${null!==ie&&"object"==typeof ie?"an invalid object":`'${ie}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(xe,{z:()=>u})},655:(ft,xe,V)=>{function pe(ee,ae){var oe={};for(var we in ee)Object.prototype.hasOwnProperty.call(ee,we)&&ae.indexOf(we)<0&&(oe[we]=ee[we]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var fe=0;for(we=Object.getOwnPropertySymbols(ee);fe<we.length;fe++)ae.indexOf(we[fe])<0&&Object.prototype.propertyIsEnumerable.call(ee,we[fe])&&(oe[we[fe]]=ee[we[fe]])}return oe}function me(ee,ae,oe,we){return new(oe||(oe=Promise))(function(Le,yt){function Yt(un){try{Je(we.next(un))}catch(jn){yt(jn)}}function Gt(un){try{Je(we.throw(un))}catch(jn){yt(jn)}}function Je(un){un.done?Le(un.value):function fe(Le){return Le instanceof oe?Le:new oe(function(yt){yt(Le)})}(un.value).then(Yt,Gt)}Je((we=we.apply(ee,ae||[])).next())})}function ge(ee){return this instanceof ge?(this.v=ee,this):new ge(ee)}function be(ee,ae,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,we=oe.apply(ee,ae||[]),Le=[];return fe={},yt("next"),yt("throw"),yt("return"),fe[Symbol.asyncIterator]=function(){return this},fe;function yt(mn){we[mn]&&(fe[mn]=function(sn){return new Promise(function(Gi,en){Le.push([mn,sn,Gi,en])>1||Yt(mn,sn)})})}function Yt(mn,sn){try{!function Gt(mn){mn.value instanceof ge?Promise.resolve(mn.value.v).then(Je,un):jn(Le[0][2],mn)}(we[mn](sn))}catch(Gi){jn(Le[0][3],Gi)}}function Je(mn){Yt("next",mn)}function un(mn){Yt("throw",mn)}function jn(mn,sn){mn(sn),Le.shift(),Le.length&&Yt(Le[0][0],Le[0][1])}}function rt(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,ae=ee[Symbol.asyncIterator];return ae?ae.call(ee):(ee=function ne(ee){var ae="function"==typeof Symbol&&Symbol.iterator,oe=ae&&ee[ae],we=0;if(oe)return oe.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&we>=ee.length&&(ee=void 0),{value:ee&&ee[we++],done:!ee}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),oe={},we("next"),we("throw"),we("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function we(Le){oe[Le]=ee[Le]&&function(yt){return new Promise(function(Yt,Gt){!function fe(Le,yt,Yt,Gt){Promise.resolve(Gt).then(function(Je){Le({value:Je,done:Yt})},yt)}(Yt,Gt,(yt=ee[Le](yt)).done,yt.value)})}}}V.d(xe,{FC:()=>be,KL:()=>rt,_T:()=>pe,mG:()=>me,qq:()=>ge})},4650:(ft,xe,V)=>{V.d(xe,{$8M:()=>Rs,$Z:()=>IA,AFp:()=>Ib,AaK:()=>me,AsE:()=>Tv,BQk:()=>bv,CHM:()=>pa,CRH:()=>OM,CZH:()=>o_,CqO:()=>lx,D6c:()=>Wb,EJc:()=>XD,EiD:()=>ih,EpF:()=>ox,F$t:()=>Eh,F4k:()=>ax,FYo:()=>cM,FiY:()=>Ae,G48:()=>dk,Gf:()=>kM,GfV:()=>xh,Gpc:()=>G,Hsn:()=>hx,Ikx:()=>Ov,JOm:()=>pi,JVY:()=>kc,KtG:()=>xo,L6k:()=>rg,LAX:()=>Wf,LFG:()=>Kn,LSH:()=>Va,Lbi:()=>YD,MAs:()=>wh,MMx:()=>nb,NdJ:()=>mC,O4$:()=>Vd,OlP:()=>Zt,Oqu:()=>Iv,PXZ:()=>RL,Q6J:()=>kp,QGY:()=>pC,QP$:()=>Ph,QbO:()=>QM,Qsj:()=>dD,R0b:()=>Hi,RDi:()=>my,Rgc:()=>ud,SBq:()=>Zo,Sil:()=>ek,Suo:()=>RM,TTD:()=>wr,TgZ:()=>_v,Udp:()=>kC,VKq:()=>yD,WFA:()=>gC,X6Q:()=>h_,XFs:()=>vt,Xpm:()=>j,Xts:()=>vE,Y36:()=>pp,YKP:()=>Xv,YNc:()=>dC,Yjl:()=>Ht,Yz7:()=>sn,ZZ4:()=>p_,_Bn:()=>Gg,_UZ:()=>fC,_Vd:()=>Bl,_c5:()=>qb,_uU:()=>Cx,aQg:()=>Gb,c2e:()=>Sb,cJS:()=>en,cg1:()=>Fv,d8E:()=>Pv,dDg:()=>sk,deG:()=>Pf,dqk:()=>qe,eBb:()=>_y,eFA:()=>ck,ekj:()=>RC,eoX:()=>Ob,f3M:()=>co,g9A:()=>ZD,h0i:()=>Hs,hGG:()=>m_,hM9:()=>hL,hij:()=>rd,iGM:()=>MM,ifc:()=>Qt,ip1:()=>WD,kL8:()=>HC,kcU:()=>Eu,lG2:()=>bi,lqb:()=>dp,lri:()=>rI,mCW:()=>Vu,n5z:()=>Ic,oAB:()=>pt,oxw:()=>vC,pB0:()=>yy,q3G:()=>si,q4F:()=>Jv,qLn:()=>Oc,qOj:()=>Ju,qZA:()=>yv,qzn:()=>uo,rWj:()=>Rb,sBO:()=>Bb,sIi:()=>En,s_b:()=>jp,soG:()=>Lh,tb:()=>QD,tp0:()=>ht,uIk:()=>pv,vHH:()=>ke,vpe:()=>Wa,wAp:()=>Et,xp6:()=>Ji,ynx:()=>vv,z2F:()=>Kp,z3N:()=>Vs,zSh:()=>CE,zs3:()=>kl});var u=V(7579),ie=V(727),L=V(8306),pe=V(6451),le=V(3099);function ye(o){for(let a in o)if(o[a]===ye)return a;throw Error("Could not find renamed property on target object.")}function se(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function me(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(me).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function ve(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const z=ye({__forward_ref__:ye});function G(o){return o.__forward_ref__=G,o.toString=function(){return me(this())},o}function ne(o){return Ge(o)?o():o}function Ge(o){return"function"==typeof o&&o.hasOwnProperty(z)&&o.__forward_ref__===G}class ke extends Error{constructor(a,c){super(function $e(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,c)),this.code=a}}function ge(o){return"string"==typeof o?o:null==o?"":String(o)}function Ee(o,a){throw new ke(-201,!1)}function Gt(o,a){null==o&&function Je(o,a,c,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${c} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function sn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function en(o){return{providers:o.providers||[],imports:o.imports||[]}}function zt(o){return os(o,as)||os(o,ar)}function os(o,a){return o.hasOwnProperty(a)?o[a]:null}function or(o){return o&&(o.hasOwnProperty(Xs)||o.hasOwnProperty(Hr))?o[Xs]:null}const as=ye({\u0275prov:ye}),Xs=ye({\u0275inj:ye}),ar=ye({ngInjectableDef:ye}),Hr=ye({ngInjectorDef:ye});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let lr;function Gn(o){const a=lr;return lr=o,a}function ls(o,a,c){const d=zt(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&vt.Optional?null:void 0!==a?a:void Ee(me(o))}function Ln(o){return{toString:o}.toString()}var Xn=(()=>((Xn=Xn||{})[Xn.OnPush=0]="OnPush",Xn[Xn.Default=1]="Default",Xn))(),Qt=(()=>{return(o=Qt||(Qt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Qt;var o})();const qe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),li={},xt=[],gr=ye({\u0275cmp:ye}),ci=ye({\u0275dir:ye}),jr=ye({\u0275pipe:ye}),ln=ye({\u0275mod:ye}),cr=ye({\u0275fac:ye}),$=ye({__NG_ELEMENT_ID__:ye});let W=0;function j(o){return Ln(()=>{const c=!0===o.standalone,d={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Xn.OnPush,directiveDefs:null,pipeDefs:null,standalone:c,dependencies:c&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||xt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Qt.Emulated,id:"c"+W++,styles:o.styles||xt,_:null,setInput:null,schemas:o.schemas||null,tView:null},g=o.dependencies,b=o.features;return f.inputs=tn(o.inputs,d),f.outputs=tn(o.outputs),b&&b.forEach(C=>C(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(Q).filter(Oe):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map(Jn).filter(Oe):null,f})}function Q(o){return jt(o)||An(o)}function Oe(o){return null!==o}const We={};function pt(o){return Ln(()=>{const a={type:o.type,bootstrap:o.bootstrap||xt,declarations:o.declarations||xt,imports:o.imports||xt,exports:o.exports||xt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(We[o.id]=o.type),a})}function tn(o,a){if(null==o)return li;const c={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),c[f]=d,a&&(a[f]=g)}return c}const bi=j;function Ht(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function jt(o){return o[gr]||null}function An(o){return o[ci]||null}function Jn(o){return o[jr]||null}function Si(o,a){const c=o[ln]||null;if(!c&&!0===a)throw new Error(`Type ${me(o)} does not have '\u0275mod' property.`);return c}function Bn(o){return Array.isArray(o)&&"object"==typeof o[1]}function ur(o){return Array.isArray(o)&&!0===o[1]}function ll(o){return 0!=(8&o.flags)}function cl(o){return 2==(2&o.flags)}function Ds(o){return 1==(1&o.flags)}function vr(o){return null!==o.template}function ca(o){return 0!=(256&o[2])}function no(o,a){return o.hasOwnProperty(cr)?o[cr]:null}class pu{constructor(a,c,d){this.previousValue=a,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function wr(){return io}function io(o){return o.type.prototype.ngOnChanges&&(o.setInput=mu),ua}function ua(){const o=dl(this),a=o?.current;if(a){const c=o.previous;if(c===li)o.previous=a;else for(let d in a)c[d]=a[d];o.current=null,this.ngOnChanges(a)}}function mu(o,a,c,d){const f=dl(o)||function Cf(o,a){return o[ul]=a}(o,{previous:li,current:null}),g=f.current||(f.current={}),b=f.previous,C=this.declaredInputs[c],D=b[C];g[C]=new pu(D&&D.currentValue,a,b===li),o[d]=a}wr.ngInherit=!0;const ul="__ngSimpleChanges__";function dl(o){return o[ul]||null}function Un(o){for(;Array.isArray(o);)o=o[0];return o}function fl(o,a){return Un(a[o])}function ti(o,a){return Un(a[o.index])}function Io(o,a){return o.data[a]}function wi(o,a){const c=a[o];return Bn(c)?c:c[0]}function To(o){return 4==(4&o[2])}function Ss(o){return 64==(64&o[2])}function Er(o,a){return null==a?null:o[a]}function so(o){o[18]=0}function pl(o,a){o[5]+=a;let c=o,d=o[3];for(;null!==d&&(1===a&&1===c[5]||-1===a&&0===c[5]);)d[5]+=a,c=d,d=d[3]}const at={lFrame:uc(null),bindingsEnabled:!0};function Ao(){return at.bindingsEnabled}function Se(){return at.lFrame.lView}function Bt(){return at.lFrame.tView}function pa(o){return at.lFrame.contextLView=o,o[8]}function xo(o){return at.lFrame.contextLView=null,o}function Nn(){let o=ma();for(;null!==o&&64===o.type;)o=o.parent;return o}function ma(){return at.lFrame.currentTNode}function Cr(o,a){const c=at.lFrame;c.currentTNode=o,c.isParent=a}function ml(){return at.lFrame.isParent}function ga(){at.lFrame.isParent=!1}function ko(){return at.lFrame.bindingIndex++}function zr(o){const a=at.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}function ya(o,a){const c=at.lFrame;c.bindingIndex=c.bindingRootIndex=o,va(a)}function va(o){at.lFrame.currentDirectiveIndex=o}function ba(o){const a=at.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function cc(){return at.lFrame.currentQueryIndex}function gl(o){at.lFrame.currentQueryIndex=o}function vu(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function wa(o,a,c){if(c&vt.SkipSelf){let f=a,g=o;for(;!(f=f.parent,null!==f||c&vt.Host||(f=vu(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,o=g}const d=at.lFrame=bu();return d.currentTNode=a,d.lView=o,!0}function _l(o){const a=bu(),c=o[1];at.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function bu(){const o=at.lFrame,a=null===o?null:o.child;return null===a?uc(o):a}function uc(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function dc(){const o=at.lFrame;return at.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const hc=dc;function fc(){const o=dc();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function ni(){return at.lFrame.selectedIndex}function xs(o){at.lFrame.selectedIndex=o}function dn(){const o=at.lFrame;return Io(o.tView,o.selectedIndex)}function Vd(){at.lFrame.currentNamespace="svg"}function Eu(){!function Tf(){at.lFrame.currentNamespace=null}()}function Ud(o,a){for(let c=a.directiveStart,d=a.directiveEnd;c<d;c++){const g=o.data[c].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:x,ngOnDestroy:O}=g;b&&(o.contentHooks||(o.contentHooks=[])).push(-c,b),C&&((o.contentHooks||(o.contentHooks=[])).push(c,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(c,C)),D&&(o.viewHooks||(o.viewHooks=[])).push(-c,D),x&&((o.viewHooks||(o.viewHooks=[])).push(c,x),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(c,x)),null!=O&&(o.destroyHooks||(o.destroyHooks=[])).push(c,O)}}function Af(o,a,c){Ro(o,a,3,c)}function gc(o,a,c,d){(3&o[2])===c&&Ro(o,a,c,d)}function Hd(o,a){let c=o[2];(3&c)===a&&(c&=2047,c+=1,o[2]=c)}function Ro(o,a,c,d){const g=d??-1,b=a.length-1;let C=0;for(let D=void 0!==d?65535&o[18]:0;D<b;D++)if("number"==typeof a[D+1]){if(C=a[D],null!=d&&C>=d)break}else a[D]<0&&(o[18]+=65536),(C<g||-1==g)&&(Cu(o,c,a,D),o[18]=(4294901760&o[18])+D+2),D++}function Cu(o,a,c,d){const f=c[d]<0,g=c[d+1],C=o[f?-c[d]:c[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{g.call(C)}finally{}}}else try{g.call(C)}finally{}}class Ea{constructor(a,c,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function No(o,a,c){let d=0;for(;d<c.length;){const f=c[d];if("number"==typeof f){if(0!==f)break;d++;const g=c[d++],b=c[d++],C=c[d++];o.setAttribute(a,b,C,g)}else{const g=f,b=c[++d];Fo(g)?o.setProperty(a,g,b):o.setAttribute(a,g,b),d++}}return d}function Mf(o){return 3===o||4===o||6===o}function Fo(o){return 64===o.charCodeAt(0)}function yc(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?c=f:0===c||kf(o,c,f,null,-1===c||2===c?a[++d]:null)}}return o}function kf(o,a,c,d,f){let g=0,b=o.length;if(-1===a)b=-1;else for(;g<o.length;){const C=o[g++];if("number"==typeof C){if(C===a){b=-1;break}if(C>a){b=g-1;break}}}for(;g<o.length;){const C=o[g];if("number"==typeof C)break;if(C===c){if(null===d)return void(null!==f&&(o[g+1]=f));if(d===o[g+1])return void(o[g+2]=f)}g++,null!==d&&g++,null!==f&&g++}-1!==b&&(o.splice(b,0,a),g=b+1),o.splice(g++,0,c),null!==d&&o.splice(g++,0,d),null!==f&&o.splice(g++,0,f)}function Rf(o){return-1!==o}function yl(o){return 32767&o}function oo(o,a){let c=function qr(o){return o>>16}(o),d=a;for(;c>0;)d=d[15],c--;return d}let vc=!0;function Wr(o){const a=vc;return vc=o,a}let Ms=0;const Be={};function ii(o,a){const c=vl(o,a);if(-1!==c)return c;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,qn(d.data,o),qn(a,null),qn(d.blueprint,null));const f=bc(o,a),g=o.injectorIndex;if(Rf(f)){const b=yl(f),C=oo(f,a),D=C[1].data;for(let x=0;x<8;x++)a[g+x]=C[b+x]|D[b+x]}return a[g+8]=f,g}function qn(o,a){o.push(0,0,0,0,0,0,0,0,a)}function vl(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function bc(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,d=null,f=a;for(;null!==f;){if(d=Bo(f),null===d)return-1;if(c++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function wc(o,a,c){!function kt(o,a,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty($)&&(d=c[$]),null==d&&(d=c[$]=Ms++);const f=255&d;a.data[o+(f>>5)]|=1<<f}(o,a,c)}function Du(o,a,c){if(c&vt.Optional)return o;Ee()}function Lo(o,a,c,d){if(c&vt.Optional&&void 0===d&&(d=null),0==(c&(vt.Self|vt.Host))){const f=o[9],g=Gn(void 0);try{return f?f.get(a,d,c&vt.Optional):ls(a,d,c&vt.Optional)}finally{Gn(g)}}return Du(d,0,c)}function ao(o,a,c,d=vt.Default,f){if(null!==o){if(1024&a[2]){const b=function Vo(o,a,c,d,f){let g=o,b=a;for(;null!==g&&null!==b&&1024&b[2]&&!(256&b[2]);){const C=ot(g,b,c,d|vt.Self,Be);if(C!==Be)return C;let D=g.parent;if(!D){const x=b[21];if(x){const O=x.get(c,Be,d);if(O!==Be)return O}D=Bo(b),b=b[15]}g=D}return f}(o,a,c,d,Be);if(b!==Be)return b}const g=ot(o,a,c,d,Be);if(g!==Be)return g}return Lo(a,c,d,f)}function ot(o,a,c,d,f){const g=function bl(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty($)?o[$]:void 0;return"number"==typeof a?a>=0?255&a:Iu:a}(c);if("function"==typeof g){if(!wa(a,o,d))return d&vt.Host?Du(f,0,d):Lo(a,c,d,f);try{const b=g(d);if(null!=b||d&vt.Optional)return b;Ee()}finally{hc()}}else if("number"==typeof g){let b=null,C=vl(o,a),D=-1,x=d&vt.Host?a[16][6]:null;for((-1===C||d&vt.SkipSelf)&&(D=-1===C?bc(o,a):a[C+8],-1!==D&&Dc(d,!1)?(b=a[1],C=yl(D),a=oo(D,a)):C=-1);-1!==C;){const O=a[1];if(Dn(g,C,O.data)){const B=Cc(C,a,c,b,d,x);if(B!==Be)return B}D=a[C+8],-1!==D&&Dc(d,a[1].data[C+8]===x)&&Dn(g,C,a)?(b=O,C=yl(D),a=oo(D,a)):C=-1}}return f}function Cc(o,a,c,d,f,g){const b=a[1],C=b.data[o+8],O=Da(C,b,c,null==d?cl(C)&&vc:d!=b&&0!=(3&C.type),f&vt.Host&&g===C);return null!==O?ks(a,b,O,C):Be}function Da(o,a,c,d,f){const g=o.providerIndexes,b=a.data,C=1048575&g,D=o.directiveStart,O=g>>20,K=f?C+O:o.directiveEnd;for(let re=d?C:C+O;re<K;re++){const Ie=b[re];if(re<D&&c===Ie||re>=D&&Ie.type===c)return re}if(f){const re=b[D];if(re&&vr(re)&&re.type===c)return D}return null}function ks(o,a,c,d){let f=o[c];const g=a.data;if(function _c(o){return o instanceof Ea}(f)){const b=f;b.resolving&&function et(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new ke(-200,`Circular dependency in DI detected for ${o}${c}`)}(function be(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ge(o)}(g[c]));const C=Wr(b.canSeeViewProviders);b.resolving=!0;const D=b.injectImpl?Gn(b.injectImpl):null;wa(o,d,vt.Default);try{f=o[c]=b.factory(void 0,g,o,d),a.firstCreatePass&&c>=d.directiveStart&&function Sf(o,a,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(d){const b=io(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(o,b),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,b)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-o,f),g&&((c.preOrderHooks||(c.preOrderHooks=[])).push(o,g),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,g))}(c,g[c],a)}finally{null!==D&&Gn(D),Wr(C),b.resolving=!1,hc()}}return f}function Dn(o,a,c){return!!(c[a+(o>>5)]&1<<o)}function Dc(o,a){return!(o&vt.Self||o&vt.Host&&a)}class Dr{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,d){return ao(this._tNode,this._lView,a,d,c)}}function Iu(){return new Dr(Nn(),Se())}function Ic(o){return Ln(()=>{const a=o.prototype.constructor,c=a[cr]||Ir(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const g=f[cr]||Ir(f);if(g&&g!==c)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Ir(o){return Ge(o)?()=>{const a=Ir(ne(o));return a&&a()}:no(o)}function Bo(o){const a=o[1],c=a.type;return 2===c?a.declTNode:1===c?o[6]:null}function Rs(o){return function Ec(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const g=c[f];if(Mf(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(g===a)return c[f+1];f+=2}}}return null}(Nn(),o)}const Ki="__parameters__";function xi(o,a,c){return Ln(()=>{const d=function fs(o){return function(...c){if(o){const d=o(...c);for(const f in d)this[f]=d[f]}}}(a);function f(...g){if(this instanceof f)return d.apply(this,g),this;const b=new f(...g);return C.annotation=b,C;function C(D,x,O){const B=D.hasOwnProperty(Ki)?D[Ki]:Object.defineProperty(D,Ki,{value:[]})[Ki];for(;B.length<=O;)B.push(null);return(B[O]=B[O]||[]).push(b),D}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Zt{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=sn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Pf=new Zt("AnalyzeForEntryComponents");function Rn(o,a){void 0===a&&(a=o);for(let c=0;c<o.length;c++){let d=o[c];Array.isArray(d)?(a===o&&(a=o.slice(0,c)),Rn(d,a)):a!==o&&a.push(d)}return a}function yn(o,a){o.forEach(c=>Array.isArray(c)?yn(c,a):a(c))}function Tc(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function Uo(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Li(o,a){const c=[];for(let d=0;d<o;d++)c.push(a);return c}function Vi(o,a,c){let d=lo(o,a);return d>=0?o[1|d]=c:(d=~d,function Au(o,a,c,d){let f=o.length;if(f==a)o.push(c,d);else if(1===f)o.push(d,o[0]),o[0]=c;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=c,o[a+1]=d}}(o,d,a,c)),d}function Mu(o,a){const c=lo(o,a);if(c>=0)return o[1|c]}function lo(o,a){return function Ta(o,a,c){let d=0,f=o.length>>c;for(;f!==d;){const g=d+(f-d>>1),b=o[g<<c];if(a===b)return g<<c;b>a?f=g:d=g+1}return~(f<<c)}(o,a,1)}const Sr={},Fs="__NG_DI_FLAG__",Aa="ngTempTokenPath",Ls=/\n/gm,ri="__source";let xa;function Ma(o){const a=xa;return xa=o,a}function xc(o,a=vt.Default){if(void 0===xa)throw new ke(-203,!1);return null===xa?ls(o,void 0,a):xa.get(o,a&vt.Optional?null:void 0,a)}function Kn(o,a=vt.Default){return(function $n(){return lr}()||xc)(ne(o),a)}function co(o,a=vt.Default){return Kn(o,a)}function T(o){const a=[];for(let c=0;c<o.length;c++){const d=ne(o[c]);if(Array.isArray(d)){if(0===d.length)throw new ke(900,!1);let f,g=vt.Default;for(let b=0;b<d.length;b++){const C=d[b],D=R(C);"number"==typeof D?-1===D?f=C.token:g|=D:f=C}a.push(Kn(f,g))}else a.push(Kn(d))}return a}function S(o,a){return o[Fs]=a,o.prototype[Fs]=a,o}function R(o){return o[Fs]}const Ae=S(xi("Optional"),8),ht=S(xi("SkipSelf"),4);let Uf,Kd;function my(o){Uf=o}function Tl(o){return function Nu(){if(void 0===Kd&&(Kd=null,qe.trustedTypes))try{Kd=qe.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Kd}()?.createHTML(o)||o}class Na{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Gf extends Na{getTypeName(){return"HTML"}}class Zd extends Na{getTypeName(){return"Style"}}class Yd extends Na{getTypeName(){return"Script"}}class zf extends Na{getTypeName(){return"URL"}}class qf extends Na{getTypeName(){return"ResourceURL"}}function Vs(o){return o instanceof Na?o.changingThisBreaksApplicationSecurity:o}function uo(o,a){const c=function gy(o){return o instanceof Na&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===a}function kc(o){return new Gf(o)}function rg(o){return new Zd(o)}function _y(o){return new Yd(o)}function Wf(o){return new zf(o)}function yy(o){return new qf(o)}class Bs{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(Tl(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class Kf{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const d=this.inertDocument.createElement("body");c.appendChild(d)}}getInertBodyElement(a){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=Tl(a),c;const d=this.inertDocument.createElement("body");return d.innerHTML=Tl(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const c=a.attributes;for(let f=c.length-1;0<f;f--){const b=c.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const Xd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Lu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Vu(o){return(o=String(o)).match(Xd)||o.match(Lu)?o:"unsafe:"+o}function ms(o){const a={};for(const c of o.split(","))a[c]=!0;return a}function Rc(...o){const a={};for(const c of o)for(const d in c)c.hasOwnProperty(d)&&(a[d]=!0);return a}const Bu=ms("area,br,col,hr,img,wbr"),Jd=ms("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),eh=ms("rp,rt"),Zf=Rc(Bu,Rc(Jd,ms("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Rc(eh,ms("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Rc(eh,Jd)),Fa=ms("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),La=ms("srcset"),th=Rc(Fa,La,ms("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ms("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),nh=ms("script,style,template");class ag{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let c=a.firstChild,d=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?d=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,d&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let f=this.checkClobberedElement(c,c.nextSibling);if(f){c=f;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(a){const c=a.nodeName.toLowerCase();if(!Zf.hasOwnProperty(c))return this.sanitizedSomething=!0,!nh.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const d=a.attributes;for(let f=0;f<d.length;f++){const g=d.item(f),b=g.name,C=b.toLowerCase();if(!th.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let D=g.value;Fa[C]&&(D=Vu(D)),La[C]&&(o=D,D=(o=String(o)).split(",").map(a=>Vu(a.trim())).join(", ")),this.buf.push(" ",b,'="',wy(D),'"')}var o;return this.buf.push(">"),!0}endElement(a){const c=a.nodeName.toLowerCase();Zf.hasOwnProperty(c)&&!Bu.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(a){this.buf.push(wy(a))}checkClobberedElement(a,c){if(c&&(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return c}}const Kw=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qf=/([^\#-~ |!])/g;function wy(o){return o.replace(/&/g,"&amp;").replace(Kw,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Qf,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Xf;function ih(o,a){let c=null;try{Xf=Xf||function Qd(o){const a=new Kf(o);return function sg(){try{return!!(new window.DOMParser).parseFromString(Tl(""),"text/html")}catch{return!1}}()?new Bs(a):a}(o);let d=a?String(a):"";c=Xf.getInertBodyElement(d);let f=5,g=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=g,g=c.innerHTML,c=Xf.getInertBodyElement(d)}while(d!==g);return Tl((new ag).sanitizeChildren(rh(c)||c))}finally{if(c){const d=rh(c)||c;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function rh(o){return"content"in o&&function Ey(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var si=(()=>((si=si||{})[si.NONE=0]="NONE",si[si.HTML=1]="HTML",si[si.STYLE=2]="STYLE",si[si.SCRIPT=3]="SCRIPT",si[si.URL=4]="URL",si[si.RESOURCE_URL=5]="RESOURCE_URL",si))();function Va(o){const a=function xl(){const o=Se();return o&&o[12]}();return a?a.sanitize(si.URL,o)||"":uo(o,"URL")?Vs(o):Vu(ge(o))}function Go(o){return o.ngOriginalError}class Oc{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&Go(a);for(;c&&Go(c);)c=Go(c);return c||null}}const lh=new Map;let Us=0;const rp="__ngContext__";function Tn(o,a){Bn(a)?(o[rp]=a[20],function hg(o){lh.set(o[20],o)}(a)):o[rp]=a}function zo(o){const a=o[rp];return"number"==typeof a?function Pc(o){return lh.get(o)||null}(a):a||null}function $u(o){const a=zo(o);return a?Bn(a)?a:a.lView:null}const _=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(qe))();function de(o){return o instanceof Function?o():o}var pi=(()=>((pi=pi||{})[pi.Important=1]="Important",pi[pi.DashCase=2]="DashCase",pi))();function hh(o,a){return undefined(o,a)}function Ua(o){const a=o[3];return ur(a)?a[3]:a}function Lc(o){return gg(o[13])}function zu(o){return gg(o[4])}function gg(o){for(;null!==o&&!ur(o);)o=o[4];return o}function Vc(o,a,c,d,f){if(null!=d){let g,b=!1;ur(d)?g=d:Bn(d)&&(b=!0,d=d[0]);const C=Un(d);0===o&&null!==c?null==f?Xi(a,c,C):qu(a,c,C,f||null,!0):1===o&&null!==c?qu(a,c,C,f||null,!0):2===o?function Ha(o,a,c){const d=Wu(o,a);d&&function iE(o,a,c,d){o.removeChild(a,c,d)}(o,d,a,c)}(a,C,b):3===o&&a.destroyNode(C),null!=g&&function tA(o,a,c,d,f){const g=c[7];g!==Un(c)&&Vc(a,o,d,g,f);for(let C=10;C<c.length;C++){const D=c[C];Ku(D[1],D,o,a,d,g)}}(a,o,g,c,f)}}function My(o,a,c){return o.createElement(a,c)}function _g(o,a){const c=o[9],d=c.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,pl(f,-1)),c.splice(d,1)}function ap(o,a){if(o.length<=10)return;const c=10+a,d=o[c];if(d){const f=d[17];null!==f&&f!==o&&_g(f,d),a>0&&(o[c-1][4]=d[4]);const g=Uo(o,10+a);!function Yw(o,a){Ku(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const b=g[19];null!==b&&b.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function Xw(o,a){if(!(128&a[2])){const c=a[11];c.destroyNode&&Ku(o,a,c,3,null,null),function QS(o){let a=o[13];if(!a)return Ry(o[1],o);for(;a;){let c=null;if(Bn(a))c=a[13];else{const d=a[10];d&&(c=d)}if(!c){for(;a&&!a[4]&&a!==o;)Bn(a)&&Ry(a[1],a),a=a[3];null===a&&(a=o),Bn(a)&&Ry(a[1],a),c=a&&a[4]}a=c}}(a)}}function Ry(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function JS(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let d=0;d<c.length;d+=2){const f=a[c[d]];if(!(f instanceof Ea)){const g=c[d+1];if(Array.isArray(g))for(let b=0;b<g.length;b+=2){const C=f[g[b]],D=g[b+1];try{D.call(C)}finally{}}else try{g.call(f)}finally{}}}}(o,a),function Jw(o,a){const c=o.cleanup,d=a[7];let f=-1;if(null!==c)for(let g=0;g<c.length-1;g+=2)if("string"==typeof c[g]){const b=c[g+1],C="function"==typeof b?b(a):Un(a[b]),D=d[f=c[g+2]],x=c[g+3];"boolean"==typeof x?C.removeEventListener(c[g],D,x):x>=0?d[f=x]():d[f=-x].unsubscribe(),g+=2}else{const b=d[f=c[g+1]];c[g].call(b)}if(null!==d){for(let g=f+1;g<d.length;g++)d[g]();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const c=a[17];if(null!==c&&ur(a[3])){c!==a[3]&&_g(c,a);const d=a[19];null!==d&&d.detachView(o)}!function fg(o){lh.delete(o[20])}(a)}}function eE(o,a,c){return function tE(o,a,c){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return c[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===Qt.None||f===Qt.Emulated)return null}return ti(d,c)}(o,a.parent,c)}function qu(o,a,c,d,f){o.insertBefore(a,c,d,f)}function Xi(o,a,c){o.appendChild(a,c)}function nE(o,a,c,d,f){null!==d?qu(o,a,c,d,f):Xi(o,a,c)}function Wu(o,a){return o.parentNode(a)}function sE(o,a,c){return oE(o,a,c)}let oE=function Oy(o,a,c){return 40&o.type?ti(o,c):null};function Py(o,a,c,d){const f=eE(o,d,a),g=a[11],C=sE(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(c))for(let D=0;D<c.length;D++)nE(g,f,c[D],C,!1);else nE(g,f,c,C,!1)}function cp(o,a){if(null!==a){const c=a.type;if(3&c)return ti(a,o);if(4&c)return Fy(-1,o[a.index]);if(8&c){const d=a.child;if(null!==d)return cp(o,d);{const f=o[a.index];return ur(f)?Fy(-1,f):Un(f)}}if(32&c)return hh(a,o)()||Un(o[a.index]);{const d=Ny(o,a);return null!==d?Array.isArray(d)?d[0]:cp(Ua(o[16]),d):cp(o,a.next)}}return null}function Ny(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Fy(o,a){const c=10+o+1;if(c<a.length){const d=a[c],f=d[1].firstChild;if(null!==f)return cp(d,f)}return a[7]}function aE(o,a,c,d,f,g,b){for(;null!=c;){const C=d[c.index],D=c.type;if(b&&0===a&&(C&&Tn(Un(C),d),c.flags|=4),64!=(64&c.flags))if(8&D)aE(o,a,c.child,d,f,g,!1),Vc(a,o,f,C,g);else if(32&D){const x=hh(c,d);let O;for(;O=x();)Vc(a,o,f,O,g);Vc(a,o,f,C,g)}else 16&D?Ly(o,a,d,c,f,g):Vc(a,o,f,C,g);c=b?c.projectionNext:c.next}}function Ku(o,a,c,d,f,g){aE(c,d,o.firstChild,a,f,g,!1)}function Ly(o,a,c,d,f,g){const b=c[16],D=b[6].projection[d.projection];if(Array.isArray(D))for(let x=0;x<D.length;x++)Vc(a,o,f,D[x],g);else aE(o,a,D,b[3],f,g,!0)}function Vy(o,a,c){o.setAttribute(a,"style",c)}function By(o,a,c){""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c)}function cE(o,a,c){let d=o.length;for(;;){const f=o.indexOf(a,c);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=a.length;if(f+g===d||o.charCodeAt(f+g)<=32)return f}c=f+1}}const uE="ng-template";function dE(o,a,c){let d=0;for(;d<o.length;){let f=o[d++];if(c&&"class"===f){if(f=o[d],-1!==cE(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function hE(o){return 4===o.type&&o.value!==uE}function iA(o,a,c){return a===(4!==o.type||c?o.value:uE)}function rA(o,a,c){let d=4;const f=o.attrs||[],g=function mE(o){for(let a=0;a<o.length;a++)if(Mf(o[a]))return a;return o.length}(f);let b=!1;for(let C=0;C<a.length;C++){const D=a[C];if("number"!=typeof D){if(!b)if(4&d){if(d=2|1&d,""!==D&&!iA(o,D,c)||""===D&&1===a.length){if(qo(d))return!1;b=!0}}else{const x=8&d?D:a[++C];if(8&d&&null!==o.attrs){if(!dE(o.attrs,x,c)){if(qo(d))return!1;b=!0}continue}const B=fE(8&d?"class":D,f,hE(o),c);if(-1===B){if(qo(d))return!1;b=!0;continue}if(""!==x){let K;K=B>g?"":f[B+1].toLowerCase();const re=8&d?K:null;if(re&&-1!==cE(re,x,0)||2&d&&x!==K){if(qo(d))return!1;b=!0}}}}else{if(!b&&!qo(d)&&!qo(D))return!1;if(b&&qo(D))continue;b=!1,d=D|1&d}}return qo(d)||b}function qo(o){return 0==(1&o)}function fE(o,a,c,d){if(null===a)return-1;let f=0;if(d||!c){let g=!1;for(;f<a.length;){const b=a[f];if(b===o)return f;if(3===b||6===b)g=!0;else{if(1===b||2===b){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=g?1:2}return-1}return function oA(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const d=o[c];if("number"==typeof d)return-1;if(d===a)return c;c++}return-1}(a,o)}function pE(o,a,c=!1){for(let d=0;d<a.length;d++)if(rA(o,a[d],c))return!0;return!1}function Uy(o,a){e:for(let c=0;c<a.length;c++){const d=a[c];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function gE(o,a){return o?":not("+a.trim()+")":a}function aA(o){let a=o[0],c=1,d=2,f="",g=!1;for(;c<o.length;){let b=o[c];if("string"==typeof b)if(2&d){const C=o[++c];f+="["+b+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+b:4&d&&(f+=" "+b);else""!==f&&!qo(b)&&(a+=gE(g,f),f=""),d=b,g=g||!qo(d);c++}return""!==f&&(a+=gE(g,f)),a}const Nt={};function Ji(o){cA(Bt(),Se(),ni()+o,!1)}function cA(o,a,c,d){if(!d)if(3==(3&a[2])){const g=o.preOrderCheckHooks;null!==g&&Af(a,g,c)}else{const g=o.preOrderHooks;null!==g&&gc(a,g,0,c)}xs(c)}const vE=new Zt("ENVIRONMENT_INITIALIZER"),bg=new Zt("INJECTOR_DEF_TYPES");function dA(...o){return{\u0275providers:Hy(0,o)}}function Hy(o,...a){const c=[],d=new Set;let f;return yn(a,g=>{const b=g;Ml(b,c,[],d)&&(f||(f=[]),f.push(b))}),void 0!==f&&wg(f,c),c}function wg(o,a){for(let c=0;c<o.length;c++){const{providers:f}=o[c];yn(f,g=>{a.push(g)})}}function Ml(o,a,c,d){if(!(o=ne(o)))return!1;let f=null,g=or(o);const b=!g&&jt(o);if(g||b){if(b&&!b.standalone)return!1;f=o}else{const D=o.ngModule;if(g=or(D),!g)return!1;f=D}const C=d.has(f);if(b){if(C)return!1;if(d.add(f),b.dependencies){const D="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const x of D)Ml(x,a,c,d)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let x;d.add(f);try{yn(g.imports,O=>{Ml(O,a,c,d)&&(x||(x=[]),x.push(O))})}finally{}void 0!==x&&wg(x,a)}if(!C){const x=no(f)||(()=>new f);a.push({provide:f,useFactory:x,deps:xt},{provide:bg,useValue:f,multi:!0},{provide:vE,useValue:()=>Kn(f),multi:!0})}const D=g.providers;null==D||C||yn(D,O=>{a.push(O)})}}return f!==o&&void 0!==o.providers}const P1=ye({provide:String,useValue:ye});function wE(o){return null!==o&&"object"==typeof o&&P1 in o}function Qu(o){return"function"==typeof o}const jy=new Zt("INJECTOR",-1);class EE{get(a,c=Sr){if(c===Sr){const d=new Error(`NullInjectorError: No provider for ${me(a)}!`);throw d.name="NullInjectorError",d}return c}}const CE=new Zt("Set Injector scope."),$y={},DE={};let Gy;function IE(){return void 0===Gy&&(Gy=new EE),Gy}class dp{}class mA extends dp{constructor(a,c,d,f){super(),this.parent=c,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,SE(a,b=>this.processProvider(b)),this.records.set(jy,hp(void 0,this)),f.has("environment")&&this.records.set(dp,hp(void 0,this));const g=this.records.get(CE);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(bg.multi,xt,vt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}get(a,c=Sr,d=vt.Default){this.assertNotDestroyed();const f=Ma(this),g=Gn(void 0);try{if(!(d&vt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const D=function B1(o){return"function"==typeof o||"object"==typeof o&&o instanceof Zt}(a)&&zt(a);C=D&&this.injectableDefInScope(D)?hp(TE(a),$y):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(d&vt.Self?IE():this.parent).get(a,c=d&vt.Optional&&c===Sr?null:c)}catch(b){if("NullInjectorError"===b.name){if((b[Aa]=b[Aa]||[]).unshift(me(a)),f)throw b;return function H(o,a,c,d){const f=o[Aa];throw a[ri]&&f.unshift(a[ri]),o.message=function te(o,a,c,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=me(a);if(Array.isArray(a))f=a.map(me).join(" -> ");else if("object"==typeof a){let g=[];for(let b in a)if(a.hasOwnProperty(b)){let C=a[b];g.push(b+":"+("string"==typeof C?JSON.stringify(C):me(C)))}f=`{${g.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${o.replace(Ls,"\n  ")}`}("\n"+o.message,f,c,d),o.ngTokenPath=f,o[Aa]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{Gn(g),Ma(f)}}resolveInjectorInitializers(){const a=Ma(this),c=Gn(void 0);try{const d=this.get(vE.multi,xt,vt.Self);for(const f of d)f()}finally{Ma(a),Gn(c)}}toString(){const a=[],c=this.records;for(const d of c.keys())a.push(me(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processProvider(a){let c=Qu(a=ne(a))?a:ne(a&&a.provide);const d=function F1(o){return wE(o)?hp(void 0,o.useValue):hp(gA(o),$y)}(a);if(Qu(a)||!0!==a.multi)this.records.get(c);else{let f=this.records.get(c);f||(f=hp(void 0,$y,!0),f.factory=()=>T(f.multi),this.records.set(c,f)),c=a,f.multi.push(a)}this.records.set(c,d)}hydrate(a,c){return c.value===$y&&(c.value=DE,c.value=c.factory()),"object"==typeof c.value&&c.value&&function V1(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=ne(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function TE(o){const a=zt(o),c=null!==a?a.factory:no(o);if(null!==c)return c;if(o instanceof Zt)throw new ke(204,!1);if(o instanceof Function)return function N1(o){const a=o.length;if(a>0)throw Li(a,"?"),new ke(204,!1);const c=function pr(o){const a=o&&(o[as]||o[ar]);if(a){const c=function Fi(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),a}return null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new ke(204,!1)}function gA(o,a,c){let d;if(Qu(o)){const f=ne(o);return no(f)||TE(f)}if(wE(o))d=()=>ne(o.useValue);else if(function fA(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...T(o.deps||[]));else if(function hA(o){return!(!o||!o.useExisting)}(o))d=()=>Kn(ne(o.useExisting));else{const f=ne(o&&(o.useClass||o.provide));if(!function L1(o){return!!o.deps}(o))return no(f)||TE(f);d=()=>new f(...T(o.deps))}return d}function hp(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function U1(o){return!!o.\u0275providers}function SE(o,a){for(const c of o)Array.isArray(c)?SE(c,a):U1(c)?SE(c.\u0275providers,a):a(c)}function _A(o,a=null,c=null,d){const f=yA(o,a,c,d);return f.resolveInjectorInitializers(),f}function yA(o,a=null,c=null,d,f=new Set){const g=[c||xt,dA(o)];return d=d||("object"==typeof o?void 0:me(o)),new mA(g,a||IE(),d||null,f)}let kl=(()=>{class o{static create(c,d){if(Array.isArray(c))return _A({name:""},d,c,"");{const f=c.name??"";return _A({name:f},c.parent,c.providers,f)}}}return o.THROW_IF_NOT_FOUND=Sr,o.NULL=new EE,o.\u0275prov=sn({token:o,providedIn:"any",factory:()=>Kn(jy)}),o.__NG_ELEMENT_ID__=-1,o})();function pp(o,a=vt.Default){const c=Se();return null===c?Kn(o,a):ao(Nn(),c,ne(o),a)}function IA(){throw new Error("invalid")}function qy(o,a){return o<<17|a<<2}function ja(o){return o>>17&32767}function NE(o){return 2|o}function Bc(o){return(131068&o)>>2}function FE(o,a){return-131069&o|a<<2}function LE(o){return 1|o}function FA(o,a){const c=o.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const f=c[d],g=c[d+1];if(-1!==g){const b=o.data[g];gl(f),b.contentQueries(2,a[g],g)}}}function yp(o,a,c,d,f,g,b,C,D,x,O){const B=a.blueprint.slice();return B[0]=f,B[2]=76|d,(null!==O||o&&1024&o[2])&&(B[2]|=1024),so(B),B[3]=B[15]=o,B[8]=c,B[10]=b||o&&o[10],B[11]=C||o&&o[11],B[12]=D||o&&o[12]||null,B[9]=x||o&&o[9]||null,B[6]=g,B[20]=function Hu(){return Us++}(),B[21]=O,B[16]=2==a.type?o[16]:B,B}function _h(o,a,c,d,f){let g=o.data[a];if(null===g)g=function Cg(o,a,c,d,f){const g=ma(),b=ml(),D=o.data[a]=function hF(o,a,c,d,f,g){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?g:g&&g.parent,c,a,d,f);return null===o.firstChild&&(o.firstChild=D),null!==g&&(b?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D)),D}(o,a,c,d,f),function Fd(){return at.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=c,g.value=d,g.attrs=f;const b=function Mo(){const o=at.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===b?-1:b.injectorIndex}return Cr(g,!0),g}function Hc(o,a,c,d){if(0===c)return-1;const f=a.length;for(let g=0;g<c;g++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function Xy(o,a,c){_l(a);try{const d=o.viewQuery;null!==d&&Tg(1,d,c);const f=o.template;null!==f&&GE(o,a,f,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&FA(o,a),o.staticViewQueries&&Tg(2,o.viewQuery,c);const g=o.components;null!==g&&function Qy(o,a){for(let c=0;c<a.length;c++)XE(o,a[c])}(a,g)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,fc()}}function yh(o,a,c,d){const f=a[2];if(128!=(128&f)){_l(a);try{so(a),function yu(o){return at.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&GE(o,a,c,2,d);const b=3==(3&f);if(b){const x=o.preOrderCheckHooks;null!==x&&Af(a,x,null)}else{const x=o.preOrderHooks;null!==x&&gc(a,x,0,null),Hd(a,0)}if(function yF(o){for(let a=Lc(o);null!==a;a=zu(a)){if(!a[2])continue;const c=a[9];for(let d=0;d<c.length;d++){const f=c[d],g=f[3];0==(512&f[2])&&pl(g,1),f[2]|=512}}}(a),function _F(o){for(let a=Lc(o);null!==a;a=zu(a))for(let c=10;c<a.length;c++){const d=a[c],f=d[1];Ss(d)&&yh(f,d,f.template,d[8])}}(a),null!==o.contentQueries&&FA(o,a),b){const x=o.contentCheckHooks;null!==x&&Af(a,x)}else{const x=o.contentHooks;null!==x&&gc(a,x,1),Hd(a,1)}!function Ol(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)xs(~f);else{const g=f,b=c[++d],C=c[++d];ya(b,g),C(2,a[g])}}}finally{xs(-1)}}(o,a);const C=o.components;null!==C&&function _p(o,a){for(let c=0;c<a.length;c++)vF(o,a[c])}(a,C);const D=o.viewQuery;if(null!==D&&Tg(2,D,d),b){const x=o.viewCheckHooks;null!==x&&Af(a,x)}else{const x=o.viewHooks;null!==x&&gc(a,x,2),Hd(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,pl(a[3],-1))}finally{fc()}}}function vh(o,a,c,d){const f=a[10],b=To(a);try{!b&&f.begin&&f.begin(),b&&Xy(o,a,d),yh(o,a,c,d)}finally{!b&&f.end&&f.end()}}function GE(o,a,c,d,f){const g=ni(),b=2&d;try{xs(-1),b&&a.length>22&&cA(o,a,22,!1),c(d,f)}finally{xs(g)}}function zE(o,a,c){if(ll(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const b=o.data[g];b.contentQueries&&b.contentQueries(1,c[g],g)}}}function Jy(o,a,c){!Ao()||(function BA(o,a,c,d){const f=c.directiveStart,g=c.directiveEnd;o.firstCreatePass||ii(c,a),Tn(d,a);const b=c.initialInputs;for(let C=f;C<g;C++){const D=o.data[C],x=vr(D);x&&GA(a,c,D);const O=ks(a,o,C,c);Tn(O,a),null!==b&&zA(0,C-f,O,D,0,b),x&&(wi(c.index,a)[8]=O)}}(o,a,c,ti(c,a)),128==(128&c.flags)&&function UA(o,a,c){const d=c.directiveStart,f=c.directiveEnd,g=c.index,b=function If(){return at.lFrame.currentDirectiveIndex}();try{xs(g);for(let C=d;C<f;C++){const D=o.data[C],x=a[C];va(C),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&ZE(D,x)}}finally{xs(-1),va(b)}}(o,a,c))}function vp(o,a,c=ti){const d=a.localNames;if(null!==d){let f=a.index+1;for(let g=0;g<d.length;g+=2){const b=d[g+1],C=-1===b?c(a,o):o[b];o[f++]=C}}}function ev(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=tv(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function tv(o,a,c,d,f,g,b,C,D,x){const O=22+d,B=O+f,K=function qE(o,a){const c=[];for(let d=0;d<a;d++)c.push(d<o?null:Nt);return c}(O,B),re="function"==typeof x?x():x;return K[1]={type:o,blueprint:K,template:c,queries:null,viewQuery:C,declTNode:a,data:K.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:D,consts:re,incompleteFirstPass:!1}}function nv(o,a,c,d){const f=bp(a);null===c?f.push(d):(f.push(c),o.firstCreatePass&&jc(o).push(d,f.length-1))}function WE(o,a,c){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(a,f):c[d]=[a,f]}return c}function fo(o,a,c,d,f,g,b,C){const D=ti(a,c);let O,x=a.inputs;!C&&null!=x&&(O=x[d])?(uv(o,c,O,d,f),cl(a)&&function pF(o,a){const c=wi(a,o);16&c[2]||(c[2]|=32)}(c,a.index)):3&a.type&&(d=function LA(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=b?b(f,a.value||"",d):f,g.setProperty(D,d,f))}function KE(o,a,c,d){let f=!1;if(Ao()){const g=function HA(o,a,c){const d=o.directiveRegistry;let f=null;if(d)for(let g=0;g<d.length;g++){const b=d[g];pE(c,b.selectors,!1)&&(f||(f=[]),wc(ii(c,a),o,b.type),vr(b)?(YE(o,c),f.unshift(b)):f.push(b))}return f}(o,a,c),b=null===d?null:{"":-1};if(null!==g){f=!0,iv(c,o.data.length,g.length);for(let O=0;O<g.length;O++){const B=g[O];B.providersResolver&&B.providersResolver(B)}let C=!1,D=!1,x=Hc(o,a,g.length,null);for(let O=0;O<g.length;O++){const B=g[O];c.mergedAttrs=yc(c.mergedAttrs,B.hostAttrs),rv(o,c,a,x,B),$A(x,B,b),null!==B.contentQueries&&(c.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(c.flags|=128);const K=B.type.prototype;!C&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(c.index),C=!0),!D&&(K.ngOnChanges||K.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(c.index),D=!0),x++}!function fF(o,a){const d=a.directiveEnd,f=o.data,g=a.attrs,b=[];let C=null,D=null;for(let x=a.directiveStart;x<d;x++){const O=f[x],B=O.inputs,K=null===g||hE(a)?null:ov(B,g);b.push(K),C=WE(B,x,C),D=WE(O.outputs,x,D)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=C,a.outputs=D}(o,c)}b&&function jA(o,a,c){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const g=c[a[f+1]];if(null==g)throw new ke(-301,!1);d.push(a[f],g)}}}(c,d,b)}return c.mergedAttrs=yc(c.mergedAttrs,c.attrs),f}function VA(o,a,c,d,f,g){const b=g.hostBindings;if(b){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const D=~a.index;(function Dg(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(C)!=D&&C.push(D),C.push(d,f,b)}}function ZE(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function YE(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function $A(o,a,c){if(c){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)c[a.exportAs[d]]=o;vr(a)&&(c[""]=o)}}function iv(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}function rv(o,a,c,d,f){o.data[d]=f;const g=f.factory||(f.factory=no(f.type)),b=new Ea(g,vr(f),pp);o.blueprint[d]=b,c[d]=b,VA(o,a,0,d,Hc(o,c,f.hostVars,Nt),f)}function GA(o,a,c){const d=ti(a,o),f=ev(c),g=o[10],b=Ig(o,yp(o,f,null,c.onPush?32:16,d,a,g,g.createRenderer(d,c),null,null,null));o[a.index]=b}function $a(o,a,c,d,f,g){const b=ti(o,a);!function sv(o,a,c,d,f,g,b){if(null==g)o.removeAttribute(a,f,c);else{const C=null==b?ge(g):b(g,d||"",f);o.setAttribute(a,f,C,c)}}(a[11],b,g,o.value,c,d,f)}function zA(o,a,c,d,f,g){const b=g[a];if(null!==b){const C=d.setInput;for(let D=0;D<b.length;){const x=b[D++],O=b[D++],B=b[D++];null!==C?d.setInput(c,B,x,O):c[O]=B}}}function ov(o,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,o[f],a[d+1])),d+=2}else d+=2;else d+=4}return c}function qA(o,a,c,d){return new Array(o,!0,!1,a,null,0,d,c,null,null)}function vF(o,a){const c=wi(a,o);if(Ss(c)){const d=c[1];48&c[2]?yh(d,c,d.template,c[8]):c[5]>0&&QE(c)}}function QE(o){for(let d=Lc(o);null!==d;d=zu(d))for(let f=10;f<d.length;f++){const g=d[f];if(512&g[2]){const b=g[1];yh(b,g,b.template,g[8])}else g[5]>0&&QE(g)}const c=o[1].components;if(null!==c)for(let d=0;d<c.length;d++){const f=wi(c[d],o);Ss(f)&&f[5]>0&&QE(f)}}function XE(o,a){const c=wi(a,o),d=c[1];(function JE(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(d,c),Xy(d,c,c[8])}function Ig(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function av(o){for(;o;){o[2]|=32;const a=Ua(o);if(ca(o)&&!a)return o;o=a}return null}function tC(o){!function Xu(o){for(let a=0;a<o.components.length;a++){const c=o.components[a],d=$u(c);if(null!==d){const f=d[1];vh(f,d,f.template,c)}}}(o[8])}function Tg(o,a,c){gl(0),a(o,c)}const WA=(()=>Promise.resolve(null))();function bp(o){return o[7]||(o[7]=[])}function jc(o){return o.cleanup||(o.cleanup=[])}function KA(o,a,c){return(null===o||vr(o))&&(c=function Pd(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(c[a.index])),c[11]}function cv(o,a){const c=o[9],d=c?c.get(Oc,null):null;d&&d.handleError(a)}function uv(o,a,c,d,f){for(let g=0;g<c.length;){const b=c[g++],C=c[g++],D=a[b],x=o.data[b];null!==x.setInput?x.setInput(D,f,d,C):D[C]=f}}function Wo(o,a,c){const d=fl(a,o);!function Zw(o,a,c){o.setValue(a,c)}(o[11],d,c)}function wp(o,a,c){let d=c?o.styles:null,f=c?o.classes:null,g=0;if(null!==a)for(let b=0;b<a.length;b++){const C=a[b];"number"==typeof C?g=C:1==g?f=ve(f,C):2==g&&(d=ve(d,C+": "+a[++b]+";"))}c?o.styles=d:o.stylesWithoutHost=d,c?o.classes=f:o.classesWithoutHost=f}function XA(){const o=Nn();Ud(Se()[1],o)}function Ju(o){let a=function JA(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const d=[o];for(;a;){let f;if(vr(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ke(903,!1);f=a.\u0275dir}if(f){if(c){d.push(f);const b=o;b.inputs=iC(o.inputs),b.declaredInputs=iC(o.declaredInputs),b.outputs=iC(o.outputs);const C=f.hostBindings;C&&IF(o,C);const D=f.viewQuery,x=f.contentQueries;if(D&&CF(o,D),x&&DF(o,x),se(o.inputs,f.inputs),se(o.declaredInputs,f.declaredInputs),se(o.outputs,f.outputs),vr(f)&&f.data.animation){const O=o.data;O.animation=(O.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let b=0;b<g.length;b++){const C=g[b];C&&C.ngInherit&&C(o),C===Ju&&(c=!1)}}a=Object.getPrototypeOf(a)}!function nC(o){let a=0,c=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=yc(f.hostAttrs,c=yc(c,f.hostAttrs))}}(d)}function iC(o){return o===li?{}:o===xt?[]:o}function CF(o,a){const c=o.viewQuery;o.viewQuery=c?(d,f)=>{a(d,f),c(d,f)}:a}function DF(o,a){const c=o.contentQueries;o.contentQueries=c?(d,f,g)=>{a(d,f,g),c(d,f,g)}:a}function IF(o,a){const c=o.hostBindings;o.hostBindings=c?(d,f)=>{a(d,f),c(d,f)}:a}let hv=null;function ed(){if(!hv){const o=qe.Symbol;if(o&&o.iterator)hv=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<a.length;++c){const d=a[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(hv=d)}}}return hv}function En(o){return!!sC(o)&&(Array.isArray(o)||!(o instanceof Map)&&ed()in o)}function sC(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function hr(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function pv(o,a,c,d){const f=Se();return hr(f,ko(),a)&&(Bt(),$a(dn(),f,o,a,c,d)),pv}function Dp(o,a,c,d,f,g){const C=function nd(o,a,c,d){const f=hr(o,a,c);return hr(o,a+1,d)||f}(o,function Gr(){return at.lFrame.bindingIndex}(),c,f);return zr(2),C?a+ge(c)+d+ge(f)+g:Nt}function dC(o,a,c,d,f,g,b,C){const D=Se(),x=Bt(),O=o+22,B=x.firstCreatePass?function ix(o,a,c,d,f,g,b,C,D){const x=a.consts,O=_h(a,o,4,b||null,Er(x,C));KE(a,c,O,Er(x,D)),Ud(a,O);const B=O.tViews=tv(2,O,d,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,x);return null!==a.queries&&(a.queries.template(a,O),B.queries=a.queries.embeddedTView(O)),O}(O,x,D,a,c,d,f,g,b):x.data[O];Cr(B,!1);const K=D[11].createComment("");Py(x,D,K,B),Tn(K,D),Ig(D,D[O]=qA(K,D,K,B)),Ds(B)&&Jy(x,D,B),null!=b&&vp(D,B,C)}function wh(o){return function ro(o,a){return o[a]}(function lc(){return at.lFrame.contextLView}(),22+o)}function kp(o,a,c){const d=Se();return hr(d,ko(),a)&&fo(Bt(),dn(),d,o,a,d[11],c,!1),kp}function hC(o,a,c,d,f){const b=f?"class":"style";uv(o,c,a.inputs[b],b,d)}function _v(o,a,c,d){const f=Se(),g=Bt(),b=22+o,C=f[11],D=f[b]=My(C,a,function mc(){return at.lFrame.currentNamespace}()),x=g.firstCreatePass?function kF(o,a,c,d,f,g,b){const C=a.consts,x=_h(a,o,2,f,Er(C,g));return KE(a,c,x,Er(C,b)),null!==x.attrs&&wp(x,x.attrs,!1),null!==x.mergedAttrs&&wp(x,x.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,x),x}(b,g,f,0,a,c,d):g.data[b];Cr(x,!0);const O=x.mergedAttrs;null!==O&&No(C,D,O);const B=x.classes;null!==B&&By(C,D,B);const K=x.styles;return null!==K&&Vy(C,D,K),64!=(64&x.flags)&&Py(g,f,D,x),0===function _u(){return at.lFrame.elementDepthCount}()&&Tn(D,f),function oc(){at.lFrame.elementDepthCount++}(),Ds(x)&&(Jy(g,f,x),zE(g,x,f)),null!==d&&vp(f,x),_v}function yv(){let o=Nn();ml()?ga():(o=o.parent,Cr(o,!1));const a=o;!function So(){at.lFrame.elementDepthCount--}();const c=Bt();return c.firstCreatePass&&(Ud(c,o),ll(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function jd(o){return 0!=(16&o.flags)}(a)&&hC(c,a,Se(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Qm(o){return 0!=(32&o.flags)}(a)&&hC(c,a,Se(),a.stylesWithoutHost,!1),yv}function fC(o,a,c,d){return _v(o,a,c,d),yv(),fC}function vv(o,a,c){const d=Se(),f=Bt(),g=o+22,b=f.firstCreatePass?function RF(o,a,c,d,f){const g=a.consts,b=Er(g,d),C=_h(a,o,8,"ng-container",b);return null!==b&&wp(C,b,!0),KE(a,c,C,Er(g,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(g,f,d,a,c):f.data[g];Cr(b,!0);const C=d[g]=d[11].createComment("");return Py(f,d,C,b),Tn(C,d),Ds(b)&&(Jy(f,d,b),zE(f,b,d)),null!=c&&vp(d,b),vv}function bv(){let o=Nn();const a=Bt();return ml()?ga():(o=o.parent,Cr(o,!1)),a.firstCreatePass&&(Ud(a,o),ll(o)&&a.queries.elementEnd(o)),bv}function ox(){return Se()}function pC(o){return!!o&&"function"==typeof o.then}function ax(o){return!!o&&"function"==typeof o.subscribe}const lx=ax;function mC(o,a,c,d){const f=Se(),g=Bt(),b=Nn();return _C(g,f,f[11],b,o,a,0,d),mC}function gC(o,a){const c=Nn(),d=Se(),f=Bt();return _C(f,d,KA(ba(f.data),c,d),c,o,a),gC}function _C(o,a,c,d,f,g,b,C){const D=Ds(d),O=o.firstCreatePass&&jc(o),B=a[8],K=bp(a);let re=!0;if(3&d.type||C){const Xe=ti(d,a),lt=C?C(Xe):Xe,Ct=K.length,Pe=C?Wt=>C(Un(Wt[d.index])):d.index;let bt=null;if(!C&&D&&(bt=function cx(o,a,c,d){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const b=f[g];if(b===c&&f[g+1]===d){const C=a[7],D=f[g+2];return C.length>D?C[D]:null}"string"==typeof b&&(g+=2)}return null}(o,a,f,d.index)),null!==bt)(bt.__ngLastListenerFn__||bt).__ngNextListenerFn__=g,bt.__ngLastListenerFn__=g,re=!1;else{g=yC(d,a,B,g,!1);const Wt=c.listen(lt,f,g);K.push(g,Wt),O&&O.push(f,Pe,Ct,Ct+1)}}else g=yC(d,a,B,g,!1);const Ie=d.outputs;let Fe;if(re&&null!==Ie&&(Fe=Ie[f])){const Xe=Fe.length;if(Xe)for(let lt=0;lt<Xe;lt+=2){const On=a[Fe[lt]][Fe[lt+1]].subscribe(g),Gl=K.length;K.push(g,On),O&&O.push(f,d.index,Gl,-(Gl+1))}}}function ux(o,a,c,d){try{return!1!==c(d)}catch(f){return cv(o,f),!1}}function yC(o,a,c,d,f){return function g(b){if(b===Function)return d;av(2&o.flags?wi(o.index,a):a);let D=ux(a,0,d,b),x=g.__ngNextListenerFn__;for(;x;)D=ux(a,0,x,b)&&D,x=x.__ngNextListenerFn__;return f&&!1===D&&(b.preventDefault(),b.returnValue=!1),D}}function vC(o=1){return function wu(o){return(at.lFrame.contextLView=function pc(o,a){for(;o>0;)a=a[15],o--;return a}(o,at.lFrame.contextLView))[8]}(o)}function dx(o,a){let c=null;const d=function sA(o){const a=o.attrs;if(null!=a){const c=a.indexOf(5);if(0==(1&c))return a[c+1]}return null}(o);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===d?pE(o,g,!0):Uy(d,g))return f}else c=f}return c}function Eh(o){const a=Se()[16][6];if(!a.projection){const d=a.projection=Li(o?o.length:1,null),f=d.slice();let g=a.child;for(;null!==g;){const b=o?dx(g,o):0;null!==b&&(f[b]?f[b].projectionNext=g:d[b]=g,f[b]=g),g=g.next}}}function hx(o,a=0,c){const d=Se(),f=Bt(),g=_h(f,22+o,16,null,c||null);null===g.projection&&(g.projection=a),ga(),64!=(64&g.flags)&&function lE(o,a,c){Ly(a[11],0,a,c,eE(o,c,a),sE(c.parent||a[6],c,a))}(f,d,g)}function mx(o,a,c,d,f){const g=o[c+1],b=null===a;let C=d?ja(g):Bc(g),D=!1;for(;0!==C&&(!1===D||b);){const O=o[C+1];gx(o[C],a)&&(D=!0,o[C+1]=d?LE(O):NE(O)),C=d?ja(O):Bc(O)}D&&(o[c+1]=d?NE(g):LE(g))}function gx(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&lo(o,a)>=0}function kC(o,a,c){return Ga(o,a,c,!1),kC}function RC(o,a){return Ga(o,a,null,!0),RC}function Ga(o,a,c,d){const f=Se(),g=Bt(),b=zr(2);g.firstUpdatePass&&function yx(o,a,c,d){const f=o.data;if(null===f[c+1]){const g=f[ni()],b=function _x(o,a){return a>=o.expandoStartIndex}(o,c);(function Ex(o,a){return 0!=(o.flags&(a?16:32))})(g,d)&&null===a&&!b&&(a=!1),a=function FF(o,a,c,d){const f=ba(o);let g=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(c=Rg(c=OC(null,o,a,c,d),a.attrs,d),g=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==f)if(c=OC(f,o,a,c,d),null===g){let D=function LF(o,a,c){const d=c?a.classBindings:a.styleBindings;if(0!==Bc(d))return o[ja(d)]}(o,a,d);void 0!==D&&Array.isArray(D)&&(D=OC(null,o,a,D[1],d),D=Rg(D,a.attrs,d),function VF(o,a,c,d){o[ja(c?a.classBindings:a.styleBindings)]=d}(o,a,d,D))}else g=function BF(o,a,c){let d;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)d=Rg(d,o[g].hostAttrs,c);return Rg(d,a.attrs,c)}(o,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),c}(f,g,a,d),function Mg(o,a,c,d,f,g){let b=g?a.classBindings:a.styleBindings,C=ja(b),D=Bc(b);o[d]=c;let O,x=!1;if(Array.isArray(c)){const B=c;O=B[1],(null===O||lo(B,O)>0)&&(x=!0)}else O=c;if(f)if(0!==D){const K=ja(o[C+1]);o[d+1]=qy(K,C),0!==K&&(o[K+1]=FE(o[K+1],d)),o[C+1]=function rF(o,a){return 131071&o|a<<17}(o[C+1],d)}else o[d+1]=qy(C,0),0!==C&&(o[C+1]=FE(o[C+1],d)),C=d;else o[d+1]=qy(D,0),0===C?C=d:o[D+1]=FE(o[D+1],d),D=d;x&&(o[d+1]=NE(o[d+1])),mx(o,O,d,!0),mx(o,O,d,!1),function $c(o,a,c,d,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&lo(g,a)>=0&&(c[d+1]=LE(c[d+1]))}(a,O,o,d,g),b=qy(C,D),g?a.classBindings=b:a.styleBindings=b}(f,g,a,c,b,d)}}(g,o,b,d),a!==Nt&&hr(f,b,a)&&function bx(o,a,c,d,f,g,b,C){if(!(3&a.type))return;const D=o.data,x=D[C+1];Dv(function kA(o){return 1==(1&o)}(x)?wx(D,a,c,f,Bc(x),b):void 0)||(Dv(g)||function MA(o){return 2==(2&o)}(x)&&(g=wx(D,null,c,f,C,b)),function nA(o,a,c,d,f){if(a)f?o.addClass(c,d):o.removeClass(c,d);else{let g=-1===d.indexOf("-")?void 0:pi.DashCase;null==f?o.removeStyle(c,d,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=pi.Important),o.setStyle(c,d,f,g))}}(d,b,fl(ni(),c),f,g))}(g,g.data[ni()],f,f[11],o,f[b+1]=function jF(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=me(Vs(o)))),o}(a,c),d,b)}function OC(o,a,c,d,f){let g=null;const b=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<b&&(g=a[C],d=Rg(d,g.hostAttrs,f),g!==o);)C++;return null!==o&&(c.directiveStylingLast=C),d}function Rg(o,a,c){const d=c?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const b=a[g];"number"==typeof b?f=b:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Vi(o,b,!!c||a[++g]))}return void 0===o?null:o}function wx(o,a,c,d,f,g){const b=null===a;let C;for(;f>0;){const D=o[f],x=Array.isArray(D),O=x?D[1]:D,B=null===O;let K=c[f+1];K===Nt&&(K=B?xt:void 0);let re=B?Mu(K,d):O===d?K:void 0;if(x&&!Dv(re)&&(re=Mu(D,d)),Dv(re)&&(C=re,b))return C;const Ie=o[f+1];f=b?ja(Ie):Bc(Ie)}if(null!==a){let D=g?a.residualClasses:a.residualStyles;null!=D&&(C=Mu(D,d))}return C}function Dv(o){return void 0!==o}function Cx(o,a=""){const c=Se(),d=Bt(),f=o+22,g=d.firstCreatePass?_h(d,f,1,a,null):d.data[f],b=c[f]=function xy(o,a){return o.createText(a)}(c[11],a);Py(d,c,b,g),Cr(g,!1)}function Iv(o){return rd("",o,""),Iv}function rd(o,a,c){const d=Se(),f=function Cp(o,a,c,d){return hr(o,ko(),c)?a+ge(c)+d:Nt}(d,o,a,c);return f!==Nt&&Wo(d,ni(),f),rd}function Tv(o,a,c,d,f){const g=Se(),b=Dp(g,o,a,c,d,f);return b!==Nt&&Wo(g,ni(),b),Tv}function Ov(o,a,c){const d=Se();return hr(d,ko(),a)&&fo(Bt(),dn(),d,o,a,d[11],c,!0),Ov}function Pv(o,a,c){const d=Se();if(hr(d,ko(),a)){const g=Bt(),b=dn();fo(g,b,d,o,a,KA(ba(g.data),b,d),c,!0)}return Pv}const Th=void 0;var Nv=["en",[["a","p"],["AM","PM"],Th],[["AM","PM"],Th,Th],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Th,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Th,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Th,"{1} 'at' {0}",Th],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Lx(o){const c=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let Ll={};function Fv(o){const a=function Bx(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=jC(a);if(c)return c;const d=a.split("-")[0];if(c=jC(d),c)return c;if("en"===d)return Nv;throw new ke(701,!1)}function HC(o){return Fv(o)[Et.PluralCase]}function jC(o){return o in Ll||(Ll[o]=qe.ng&&qe.ng.common&&qe.ng.common.locales&&qe.ng.common.locales[o]),Ll[o]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const Sh="en-US";let jx=Sh;function Vp(o,a,c,d,f){if(o=ne(o),Array.isArray(o))for(let g=0;g<o.length;g++)Vp(o[g],a,c,d,f);else{const g=Bt(),b=Se();let C=Qu(o)?o:ne(o.provide),D=gA(o);const x=Nn(),O=1048575&x.providerIndexes,B=x.directiveStart,K=x.providerIndexes>>20;if(Qu(o)||!o.multi){const re=new Ea(D,f,pp),Ie=Zv(C,a,f?O:O+K,B);-1===Ie?(wc(ii(x,b),g,C),$g(g,o,a.length),a.push(C),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),c.push(re),b.push(re)):(c[Ie]=re,b[Ie]=re)}else{const re=Zv(C,a,O+K,B),Ie=Zv(C,a,O,O+K),Fe=re>=0&&c[re],Xe=Ie>=0&&c[Ie];if(f&&!Xe||!f&&!Fe){wc(ii(x,b),g,C);const lt=function cD(o,a,c,d,f){const g=new Ea(o,c,pp);return g.multi=[],g.index=a,g.componentProviders=0,lD(g,f,d&&!c),g}(f?oM:sM,c.length,f,d,D);!f&&Xe&&(c[Ie].providerFactory=lt),$g(g,o,a.length,0),a.push(C),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),c.push(lt),b.push(lt)}else $g(g,o,re>-1?re:Ie,lD(c[f?Ie:re],D,!f&&d));!f&&d&&Xe&&c[Ie].componentProviders++}}}function $g(o,a,c,d){const f=Qu(a),g=function pA(o){return!!o.useClass}(a);if(f||g){const D=(g?ne(a.useClass):a).prototype.ngOnDestroy;if(D){const x=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const O=x.indexOf(c);-1===O?x.push(c,[d,D]):x[O+1].push(d,D)}else x.push(c,D)}}}function lD(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function Zv(o,a,c,d){for(let f=c;f<d;f++)if(a[f]===o)return f;return-1}function sM(o,a,c,d){return Yv(this.multi,[])}function oM(o,a,c,d){const f=this.multi;let g;if(this.providerFactory){const b=this.providerFactory.componentProviders,C=ks(c,c[1],this.providerFactory.index,d);g=C.slice(0,b),Yv(f,g);for(let D=b;D<C.length;D++)g.push(C[D])}else g=[],Yv(f,g);return g}function Yv(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function Gg(o,a=[]){return c=>{c.providersResolver=(d,f)=>function aD(o,a,c){const d=Bt();if(d.firstCreatePass){const f=vr(o);Vp(c,d.data,d.blueprint,f,!0),Vp(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class Vl{resolveComponentFactory(a){throw function aM(o){const a=Error(`No component factory found for ${me(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Bl=(()=>{class o{}return o.NULL=new Vl,o})();class Hs{}class Xv{}class Mr{}function Ul(){return Bp(Nn(),Se())}function Bp(o,a){return new Zo(ti(o,a))}let Zo=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=Ul,o})();function cL(o){return o instanceof Zo?o.nativeElement:o}class cM{}let dD=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function uL(){const o=Se(),c=wi(Nn().index,o);return(Bn(c)?c:o)[11]}(),o})(),hD=(()=>{class o{}return o.\u0275prov=sn({token:o,providedIn:"root",factory:()=>null}),o})();class xh{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Jv=new xh("14.0.6"),Up={};function zg(o,a,c,d,f=!1){for(;null!==c;){const g=a[c.index];if(null!==g&&d.push(Un(g)),ur(g))for(let C=10;C<g.length;C++){const D=g[C],x=D[1].firstChild;null!==x&&zg(D[1],D,x,d)}const b=c.type;if(8&b)zg(o,a,c.child,d);else if(32&b){const C=hh(c,a);let D;for(;D=C();)d.push(D)}else if(16&b){const C=Ny(a,c);if(Array.isArray(C))d.push(...C);else{const D=Ua(a[16]);zg(D[1],D,C,d,!0)}}c=f?c.projectionNext:c.next}return d}class qa{constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,c=a[1];return zg(c,a,c.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(ur(a)){const c=a[8],d=c?c.indexOf(this):-1;d>-1&&(ap(a,d),Uo(c,d))}this._attachedToViewContainer=!1}Xw(this._lView[1],this._lView)}onDestroy(a){nv(this._lView[1],this._lView,null,a)}markForCheck(){av(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function lv(o,a,c){const d=a[10];d.begin&&d.begin();try{yh(o,a,o.template,c)}catch(f){throw cv(a,f),f}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function YS(o,a){Ku(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ke(902,!1);this._appRef=a}}class uM extends qa{constructor(a){super(a),this._view=a}detectChanges(){tC(this._view)}checkNoChanges(){}get context(){return null}}class Mh extends Bl{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=jt(a);return new qg(c,this.ngModule)}}function fD(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class eb{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,d){const f=this.injector.get(a,Up,d);return f!==Up||c===Up?f:this.parentInjector.get(a,c,d)}}class qg extends Mr{constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function lA(o){return o.map(aA).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return fD(this.componentDef.inputs)}get outputs(){return fD(this.componentDef.outputs)}create(a,c,d,f){let g=(f=f||this.ngModule)instanceof dp?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const b=g?new eb(a,g):a,C=b.get(cM,null);if(null===C)throw new ke(407,!1);const D=b.get(hD,null),x=C.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",B=d?function dF(o,a,c){return o.selectRootElement(a,c===Qt.ShadowDom)}(x,d,this.componentDef.encapsulation):My(C.createRenderer(null,this.componentDef),O,function dM(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(O)),K=this.componentDef.onPush?288:272,re=function QA(o,a){return{components:[],scheduler:o||_,clean:WA,playerHandler:a||null,flags:0}}(),Ie=tv(0,null,null,1,0,null,null,null,null,null),Fe=yp(null,Ie,re,K,null,null,C,x,D,b,null);let Xe,lt;_l(Fe);try{const Ct=function ZA(o,a,c,d,f,g){const b=c[1];c[22]=o;const D=_h(b,22,2,"#host",null),x=D.mergedAttrs=a.hostAttrs;null!==x&&(wp(D,x,!0),null!==o&&(No(f,o,x),null!==D.classes&&By(f,o,D.classes),null!==D.styles&&Vy(f,o,D.styles)));const O=d.createRenderer(o,a),B=yp(c,ev(a),null,a.onPush?32:16,c[22],D,d,O,g||null,null,null);return b.firstCreatePass&&(wc(ii(D,c),b,a.type),YE(b,D),iv(D,c.length,1)),Ig(c,B),c[22]=B}(B,this.componentDef,Fe,C,x);if(B)if(d)No(x,B,["ng-version",Jv.full]);else{const{attrs:Pe,classes:bt}=function R1(o){const a=[],c=[];let d=1,f=2;for(;d<o.length;){let g=o[d];if("string"==typeof g)2===f?""!==g&&a.push(g,o[++d]):8===f&&c.push(g);else{if(!qo(f))break;f=g}d++}return{attrs:a,classes:c}}(this.componentDef.selectors[0]);Pe&&No(x,B,Pe),bt&&bt.length>0&&By(x,B,bt.join(" "))}if(lt=Io(Ie,22),void 0!==c){const Pe=lt.projection=[];for(let bt=0;bt<this.ngContentSelectors.length;bt++){const Wt=c[bt];Pe.push(null!=Wt?Array.from(Wt):null)}}Xe=function YA(o,a,c,d,f){const g=c[1],b=function gF(o,a,c){const d=Nn();o.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),rv(o,d,a,Hc(o,a,1,null),c));const f=ks(a,o,d.directiveStart,d);Tn(f,a);const g=ti(d,a);return g&&Tn(g,a),f}(g,c,a);if(d.components.push(b),o[8]=b,null!==f)for(const D of f)D(b,a);if(a.contentQueries){const D=Nn();a.contentQueries(1,b,D.directiveStart)}const C=Nn();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(xs(C.index),VA(c[1],C,0,C.directiveStart,C.directiveEnd,a),ZE(a,b)),b}(Ct,this.componentDef,Fe,re,[XA]),Xy(Ie,Fe,null)}finally{fc()}return new pD(this.componentType,Xe,Bp(lt,Fe),Fe,lt)}}class pD extends class uD{}{constructor(a,c,d,f,g){super(),this.location=d,this._rootLView=f,this._tNode=g,this.instance=c,this.hostView=this.changeDetectorRef=new uM(f),this.componentType=a}get injector(){return new Dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function hL(o,a){return new mD(o,a??null)}class mD extends Hs{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Mh(this);const d=Si(a);this._bootstrapComponents=de(d.bootstrap),this._r3Injector=yA(a,c,[{provide:Hs,useValue:this},{provide:Bl,useValue:this.componentFactoryResolver}],me(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(a)}get(a,c=kl.THROW_IF_NOT_FOUND,d=vt.Default){return a===kl||a===Hs||a===jy?this:this._r3Injector.get(a,c,d)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class tb extends Xv{constructor(a){super(),this.moduleType=a}create(a){return new mD(this.moduleType,a)}}class fM extends Hs{constructor(a,c,d){super(),this.componentFactoryResolver=new Mh(this),this.instance=null;const f=new mA([...a,{provide:Hs,useValue:this},{provide:Bl,useValue:this.componentFactoryResolver}],c||IE(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function nb(o,a=null,c=null){return new fM(o,a,c).injector}function yD(o,a,c,d){return function Hl(o,a,c,d,f,g){const b=a+c;return hr(o,b,f)?function Qr(o,a,c){return o[a]=c}(o,b+1,g?d.call(g,f):d(f)):function Ci(o,a){const c=o[a];return c===Nt?void 0:c}(o,b+1)}(Se(),function ui(){const o=at.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}(),o,a,c,d)}function Yg(o){return a=>{setTimeout(o,void 0,a)}}const Wa=class xD extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,d){let f=a,g=c||(()=>null),b=d;if(a&&"object"==typeof a){const D=a;f=D.next?.bind(D),g=D.error?.bind(D),b=D.complete?.bind(D)}this.__isAsync&&(g=Yg(g),f&&(f=Yg(f)),b&&(b=Yg(b)));const C=super.subscribe({next:f,error:g,complete:b});return a instanceof ie.w0&&a.add(C),C}};function MD(){return this._results[ed()]()}class Qg{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=ed(),d=Qg.prototype;d[c]||(d[c]=MD)}get changes(){return this._changes||(this._changes=new Wa)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const d=this;d.dirty=!1;const f=Rn(a);(this._changesDetected=!function Gd(o,a,c){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],g=a[d];if(c&&(f=c(f),g=c(g)),g!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ud=(()=>{class o{}return o.__NG_ELEMENT_ID__=RD,o})();const kD=ud,lb=class extends kD{constructor(a,c,d){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(a,c){const d=this._declarationTContainer.tViews,f=yp(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,c||null);f[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(f[19]=b.createEmbeddedView(d)),Xy(d,f,a),new qa(f)}};function RD(){return Hp(Nn(),Se())}function Hp(o,a){return 4&o.type?new lb(a,o,Bp(o,a)):null}let jp=(()=>{class o{}return o.__NG_ELEMENT_ID__=cb,o})();function cb(){return kr(Nn(),Se())}const Xg=jp,ub=class extends Xg{constructor(a,c,d){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=d}get element(){return Bp(this._hostTNode,this._hostLView)}get injector(){return new Dr(this._hostTNode,this._hostLView)}get parentInjector(){const a=bc(this._hostTNode,this._hostLView);if(Rf(a)){const c=oo(a,this._hostLView),d=yl(a);return new Dr(c[1].data[d+8],c)}return new Dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=db(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,c,d){let f,g;"number"==typeof d?f=d:null!=d&&(f=d.index,g=d.injector);const b=a.createEmbeddedView(c||{},g);return this.insert(b,f),b}createComponent(a,c,d,f,g){const b=a&&!function El(o){return"function"==typeof o}(a);let C;if(b)C=c;else{const B=c||{};C=B.index,d=B.injector,f=B.projectableNodes,g=B.environmentInjector||B.ngModuleRef}const D=b?a:new qg(jt(a)),x=d||this.parentInjector;if(!g&&null==D.ngModule){const K=(b?x:this.parentInjector).get(dp,null);K&&(g=K)}const O=D.create(x,f,void 0,g);return this.insert(O.hostView,C),O}insert(a,c){const d=a._lView,f=d[1];if(function ha(o){return ur(o[3])}(d)){const O=this.indexOf(a);if(-1!==O)this.detach(O);else{const B=d[3],K=new ub(B,B[6],B[3]);K.detach(K.indexOf(a))}}const g=this._adjustIndex(c),b=this._lContainer;!function XS(o,a,c,d){const f=10+d,g=c.length;d>0&&(c[f-1][4]=a),d<g-10?(a[4]=c[f],Tc(c,10+d,a)):(c.push(a),a[4]=null),a[3]=c;const b=a[17];null!==b&&c!==b&&function Qw(o,a){const c=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===c?o[9]=[a]:c.push(a)}(b,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=64}(f,d,b,g);const C=Fy(g,b),D=d[11],x=Wu(D,b[7]);return null!==x&&function ky(o,a,c,d,f,g){d[0]=f,d[6]=a,Ku(o,d,c,1,f,g)}(f,b[6],D,d,x,C),a.attachToViewContainerRef(),Tc(Jg(b),g,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=db(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),d=ap(this._lContainer,c);d&&(Uo(Jg(this._lContainer),c),Xw(d[1],d))}detach(a){const c=this._adjustIndex(a,-1),d=ap(this._lContainer,c);return d&&null!=Uo(Jg(this._lContainer),c)?new qa(d):null}_adjustIndex(a,c=0){return a??this.length+c}};function db(o){return o[8]}function Jg(o){return o[8]||(o[8]=[])}function kr(o,a){let c;const d=a[o.index];if(ur(d))c=d;else{let f;if(8&o.type)f=Un(d);else{const g=a[11];f=g.createComment("");const b=ti(o,a);qu(g,Wu(g,b),f,function rE(o,a){return o.nextSibling(a)}(g,b),!1)}a[o.index]=c=qA(d,a,f,o),Ig(a,c)}return new ub(c,o,a)}class PD{constructor(a){this.queryList=a,this.matches=null}clone(){return new PD(this.queryList)}setDirty(){this.queryList.setDirty()}}class hb{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const d=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let g=0;g<d;g++){const b=c.getByIndex(g);f.push(this.queries[b.indexInDeclarationView].clone())}return new hb(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==VD(a,c).matches&&this.queries[c].setDirty()}}class ND{constructor(a,c,d=null){this.predicate=a,this.flags=c,this.read=d}}class $p{constructor(a=[]){this.queries=a}elementStart(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,g=this.getByIndex(d).embeddedTView(a,f);g&&(g.indexInDeclarationView=d,null!==c?c.push(g):c=[g])}return null!==c?new $p(c):null}template(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Rh{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new Rh(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const g=d[f];this.matchTNodeWithReadOption(a,c,SM(c,g)),this.matchTNodeWithReadOption(a,c,Da(c,a,g,!1,!1))}else d===ud?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,Da(c,a,d,!1,!1))}matchTNodeWithReadOption(a,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Zo||f===jp||f===ud&&4&c.type)this.addMatch(c.index,-2);else{const g=Da(c,a,f,!1,!1);null!==g&&this.addMatch(c.index,g)}else this.addMatch(c.index,d)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function SM(o,a){const c=o.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===a)return c[d+1];return null}function AM(o,a,c,d){return-1===c?function fb(o,a){return 11&o.type?Bp(o,a):4&o.type?Hp(o,a):null}(a,o):-2===c?function gL(o,a,c){return c===Zo?Bp(a,o):c===ud?Hp(a,o):c===jp?kr(a,o):void 0}(o,a,d):ks(o,o[1],c,a)}function xM(o,a,c,d){const f=a[19].queries[d];if(null===f.matches){const g=o.data,b=c.matches,C=[];for(let D=0;D<b.length;D+=2){const x=b[D];C.push(x<0?null:AM(a,g[x],b[D+1],c.metadata.read))}f.matches=C}return f.matches}function FD(o,a,c,d){const f=o.queries.getByIndex(c),g=f.matches;if(null!==g){const b=xM(o,a,f,c);for(let C=0;C<g.length;C+=2){const D=g[C];if(D>0)d.push(b[C/2]);else{const x=g[C+1],O=a[-D];for(let B=10;B<O.length;B++){const K=O[B];K[17]===K[3]&&FD(K[1],K,x,d)}if(null!==O[9]){const B=O[9];for(let K=0;K<B.length;K++){const re=B[K];FD(re[1],re,x,d)}}}}}return d}function MM(o){const a=Se(),c=Bt(),d=cc();gl(d+1);const f=VD(c,d);if(o.dirty&&To(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?FD(c,a,d,[]):xM(c,a,f,d);o.reset(g,cL),o.notifyOnChanges()}return!0}return!1}function kM(o,a,c){const d=Bt();d.firstCreatePass&&(LD(d,new ND(o,a,c),-1),2==(2&a)&&(d.staticViewQueries=!0)),pb(d,Se(),a)}function RM(o,a,c,d){const f=Bt();if(f.firstCreatePass){const g=Nn();LD(f,new ND(a,c,d),g.index),function NM(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(f,o),2==(2&c)&&(f.staticContentQueries=!0)}pb(f,Se(),c)}function OM(){return function PM(o,a){return o[19].queries[a].queryList}(Se(),cc())}function pb(o,a,c){const d=new Qg(4==(4&c));nv(o,a,d,d.destroy),null===a[19]&&(a[19]=new hb),a[19].queries.push(new PD(d))}function LD(o,a,c){null===o.queries&&(o.queries=new $p),o.queries.track(new Rh(a,c))}function VD(o,a){return o.queries.getByIndex(a)}function Ph(o){const a=jt(o)||An(o)||Jn(o);return null!==a&&a.standalone}function s_(...o){}const WD=new Zt("Application Initializer");let o_=(()=>{class o{constructor(c){this.appInits=c,this.resolve=s_,this.reject=s_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(pC(g))c.push(g);else if(lx(g)){const b=new Promise((C,D)=>{g.subscribe({complete:C,error:D})});c.push(b)}}Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(Kn(WD,8))},o.\u0275prov=sn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Ib=new Zt("AppId",{providedIn:"root",factory:function KD(){return`${a_()}${a_()}${a_()}`}});function a_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ZD=new Zt("Platform Initializer"),YD=new Zt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),QD=new Zt("appBootstrapListener"),QM=new Zt("AnimationModuleType");let Sb=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=sn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Lh=new Zt("LocaleId",{providedIn:"root",factory:()=>co(Lh,vt.Optional|vt.SkipSelf)||function XM(){return typeof $localize<"u"&&$localize.locale||Sh}()}),XD=new Zt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class JD{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let ek=(()=>{class o{compileModuleSync(c){return new tb(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),g=de(Si(c).declarations).reduce((b,C)=>{const D=jt(C);return D&&b.push(new qg(D)),b},[]);return new JD(d,g)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=sn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const nk=(()=>Promise.resolve(0))();function l_(o){typeof Zone>"u"?nk.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Hi{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wa(!1),this.onMicrotaskEmpty=new Wa(!1),this.onStable=new Wa(!1),this.onError=new Wa(!1),typeof Zone>"u")throw new ke(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function tI(){let o=qe.requestAnimationFrame,a=qe.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function nI(o){const a=()=>{!function rk(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(qe,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Mb(o),o.isCheckStableRunning=!0,c_(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Mb(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,g,b,C)=>{try{return iI(o),c.invokeTask(f,g,b,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),u_(o)}},onInvoke:(c,d,f,g,b,C,D)=>{try{return iI(o),c.invoke(f,g,b,C,D)}finally{o.shouldCoalesceRunChangeDetection&&a(),u_(o)}},onHasTask:(c,d,f,g)=>{c.hasTask(f,g),d===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,Mb(o),c_(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(c,d,f,g)=>(c.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hi.isInAngularZone())throw new ke(909,!1)}static assertNotInAngularZone(){if(Hi.isInAngularZone())throw new ke(909,!1)}run(a,c,d){return this._inner.run(a,c,d)}runTask(a,c,d,f){const g=this._inner,b=g.scheduleEventTask("NgZoneEvent: "+f,a,ik,s_,s_);try{return g.runTask(b,c,d)}finally{g.cancelTask(b)}}runGuarded(a,c,d){return this._inner.runGuarded(a,c,d)}runOutsideAngular(a){return this._outer.run(a)}}const ik={};function c_(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Mb(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function iI(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function u_(o){o._nesting--,c_(o)}class kb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wa,this.onMicrotaskEmpty=new Wa,this.onStable=new Wa,this.onError=new Wa}run(a,c,d){return a.apply(c,d)}runGuarded(a,c,d){return a.apply(c,d)}runOutsideAngular(a){return a()}runTask(a,c,d,f){return a.apply(c,d)}}const rI=new Zt(""),Rb=new Zt("");let d_,sk=(()=>{class o{constructor(c,d,f){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,d_||(function ok(o){d_=o}(f),f.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hi.assertNotInAngularZone(),l_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())l_(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==g),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:g,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,f){return[]}}return o.\u0275fac=function(c){return new(c||o)(Kn(Hi),Kn(Ob),Kn(Rb))},o.\u0275prov=sn({token:o,factory:o.\u0275fac}),o})(),Ob=(()=>{class o{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return d_?.findTestabilityInTree(this,c,d)??null}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=sn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Kc=null;const Pb=new Zt("AllowMultipleToken"),sI=new Zt("PlatformDestroyListeners");class RL{constructor(a,c){this.name=a,this.token=c}}function ck(o,a,c=[]){const d=`Platform: ${a}`,f=new Zt(d);return(g=[])=>{let b=Nb();if(!b||b.injector.get(Pb,!1)){const C=[...c,...g,{provide:f,useValue:!0}];o?o(C):function ak(o){if(Kc&&!Kc.get(Pb,!1))throw new ke(400,!1);Kc=o;const a=o.get(oI);(function lk(o){const a=o.get(ZD,null);a&&a.forEach(c=>c())})(o)}(function uk(o=[],a){return kl.create({name:a,providers:[{provide:CE,useValue:"platform"},{provide:sI,useValue:new Set([()=>Kc=null])},...o]})}(C,d))}return function PL(o){const a=Nb();if(!a)throw new ke(401,!1);return a}()}}function Nb(){return Kc?.get(oI)??null}let oI=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const f=function aI(o,a){let c;return c="noop"===o?new kb:("zone.js"===o?void 0:o)||new Hi(a),c}(d?.ngZone,function Fb(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(d)),g=[{provide:Hi,useValue:f}];return f.run(()=>{const b=kl.create({providers:g,parent:this.injector,name:c.moduleType.name}),C=c.create(b),D=C.injector.get(Oc,null);if(!D)throw new ke(402,!1);return f.runOutsideAngular(()=>{const x=f.onError.subscribe({next:O=>{D.handleError(O)}});C.onDestroy(()=>{Zp(this._modules,C),x.unsubscribe()})}),function lI(o,a,c){try{const d=c();return pC(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(D,f,()=>{const x=C.injector.get(o_);return x.runInitializers(),x.donePromise.then(()=>(function $x(o){Gt(o,"Expected localeId to be defined"),"string"==typeof o&&(jx=o.toLowerCase().replace(/_/g,"-"))}(C.injector.get(Lh,Sh)||Sh),this._moduleDoBootstrap(C),C))})})}bootstrapModule(c,d=[]){const f=Lb({},d);return function ML(o,a,c){const d=new tb(c);return Promise.resolve(d)}(0,0,c).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(c){const d=c.injector.get(Kp);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new ke(403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(sI,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(Kn(kl))},o.\u0275prov=sn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function Lb(o,a){return Array.isArray(a)?a.reduce(Lb,o):{...o,...a}}let Kp=(()=>{class o{constructor(c,d,f){this._zone=c,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new L.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),b=new L.y(C=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Hi.assertNotInAngularZone(),l_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Hi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{D.unsubscribe(),x.unsubscribe()}});this.isStable=(0,pe.T)(g,b.pipe((0,le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const f=c instanceof Mr;if(!this._injector.get(o_).done)throw!f&&Ph(c),new ke(405,false);let b;b=f?c:this._injector.get(Bl).resolveComponentFactory(c),this.componentTypes.push(b.componentType);const C=function kL(o){return o.isBoundToModule}(b)?void 0:this._injector.get(Hs),x=b.create(kl.NULL,[],d||b.selector,C),O=x.location.nativeElement,B=x.injector.get(rI,null);return B?.registerApplication(O),x.onDestroy(()=>{this.detachView(x.hostView),Zp(this.components,x),B?.unregisterApplication(O)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new ke(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;Zp(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(QD,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>Zp(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new ke(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(c){return new(c||o)(Kn(Hi),Kn(kl),Kn(Oc))},o.\u0275prov=sn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Zp(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}let dI=!0,hI=!1;function h_(){return hI=!0,dI}function dk(){if(hI)throw new Error("Cannot enable prod mode after platform setup.");dI=!1}let Bb=(()=>{class o{}return o.__NG_ELEMENT_ID__=hn,o})();function hn(o){return function Ri(o,a,c){if(cl(o)&&!c){const d=wi(o.index,a);return new qa(d,d)}return 47&o.type?new qa(a[16],a):null}(Nn(),Se(),16==(16&o))}class mo{constructor(){}supports(a){return En(a)}create(a){return new gk(a)}}const yI=(o,a)=>a;class gk{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||yI}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,d=this._removalsHead,f=0,g=null;for(;c||d;){const b=!d||c&&c.currentIndex<Yp(d,f,g)?c:d,C=Yp(b,f,g),D=b.currentIndex;if(b===d)f--,d=d._nextRemoved;else if(c=c._next,null==b.previousIndex)f++;else{g||(g=[]);const x=C-f,O=D-f;if(x!=O){for(let K=0;K<x;K++){const re=K<g.length?g[K]:g[K]=0,Ie=re+K;O<=Ie&&Ie<x&&(g[K]=re+1)}g[b.previousIndex]=O-x}}C!==D&&a(b,C,D)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!En(a))throw new ke(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,b,c=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)g=a[C],b=this._trackByFn(C,g),null!==c&&Object.is(c.trackById,b)?(d&&(c=this._verifyReinsertion(c,g,b,C)),Object.is(c.item,g)||this._addIdentityChange(c,g)):(c=this._mismatch(c,g,b,C),d=!0),c=c._next}else f=0,function MF(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[ed()]();let d;for(;!(d=c.next()).done;)a(d.value)}}(a,C=>{b=this._trackByFn(f,C),null!==c&&Object.is(c.trackById,b)?(d&&(c=this._verifyReinsertion(c,C,b,f)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,b,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,d,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,g,f)):a=this._addAfter(new _k(c,d),g,f),a}_verifyReinsertion(a,c,d,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,c,d),this._addToMoves(a,d),a}_moveAfter(a,c,d){return this._unlink(a),this._insertAfter(a,c,d),this._addToMoves(a,d),a}_addAfter(a,c,d){return this._insertAfter(a,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,d){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new go),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,d=a._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new go),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class _k{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tr{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const c=a._prevDup,d=a._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class go{constructor(){this.map=new Map}put(a){const c=a.trackById;let d=this.map.get(c);d||(d=new tr,this.map.set(c,d)),d.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yp(o,a,c){const d=o.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+a+f}class f_{constructor(){}supports(a){return a instanceof Map||sC(a)}create(){return new yk}}class yk{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||sC(a)))throw new ke(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const g=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,g)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const d=a._prev;return c._next=a,c._prev=d,a._prev=c,d&&(d._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const g=f._prev,b=f._next;return g&&(g._next=b),b&&(b._prev=g),f._next=null,f._prev=null,f}const d=new vk(a);return this._records.set(a,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(d=>c(a[d],d))}}class vk{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vI(){return new p_([new mo])}let p_=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||vI()),deps:[[o,new ht,new Ae]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new ke(901,!1)}}return o.\u0275prov=sn({token:o,providedIn:"root",factory:vI}),o})();function bI(){return new Gb([new f_])}let Gb=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||bI()),deps:[[o,new ht,new Ae]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new ke(901,!1)}}return o.\u0275prov=sn({token:o,providedIn:"root",factory:bI}),o})();const qb=ck(null,"core",[]);let m_=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(Kn(Kp))},o.\u0275mod=pt({type:o}),o.\u0275inj=en({}),o})();function Wb(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(ft,xe,V)=>{V.d(xe,{Z:()=>ke});var u=V(2090),ie=V(4859),L=V(9681),pe=V(1877);class le{constructor(ge,be){this._delegate=ge,this.firebase=be,(0,L._addComponent)(ge,new ie.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(ge,be=L._DEFAULT_ENTRY_NAME){var et;this._delegate.checkDestroyed();const rt=this._delegate.container.getProvider(ge);return!rt.isInitialized()&&"EXPLICIT"===(null===(et=rt.getComponent())||void 0===et?void 0:et.instantiationMode)&&rt.initialize(),rt.getImmediate({identifier:be})}_removeServiceInstance(ge,be=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(be)}_addComponent(ge){(0,L._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,L._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ve(){const $e=function me($e){const ge={},be={__esModule:!0,initializeApp:function Re(ze,q={}){const De=L.initializeApp(ze,q);if((0,u.r3)(ge,De.name))return ge[De.name];const ee=new $e(De,be);return ge[De.name]=ee,ee},app:rt,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Te(ze){const q=ze.name,De=q.replace("-compat","");if(L._registerComponent(ze)&&"PUBLIC"===ze.type){const ee=(ae=rt())=>{if("function"!=typeof ae[De])throw se.create("invalid-app-argument",{appName:q});return ae[De]()};void 0!==ze.serviceProps&&(0,u.ZB)(ee,ze.serviceProps),be[De]=ee,$e.prototype[De]=function(...ae){return this._getService.bind(this,q).apply(this,ze.multipleInstances?ae:[])}}return"PUBLIC"===ze.type?be[De]:null},removeApp:function et(ze){delete ge[ze]},useAsService:function je(ze,q){return"serverAuth"===q?null:q},modularAPIs:L}};function rt(ze){if(!(0,u.r3)(ge,ze=ze||L._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:ze});return ge[ze]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ee(){return Object.keys(ge).map(ze=>ge[ze])}}),rt.App=$e,be}(le);return $e.INTERNAL=Object.assign(Object.assign({},$e.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function ge(be){(0,u.ZB)($e,be)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),$e}(),G=new pe.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const $e=self.firebase.SDK_VERSION;$e&&$e.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=z;!function Me($e){(0,L.registerVersion)("@firebase/app-compat","0.1.29",$e)}()},9681:(ft,xe,V)=>{V.r(xe),V.d(xe,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>as,_DEFAULT_ENTRY_NAME:()=>Gt,_addComponent:()=>mn,_addOrOverwriteComponent:()=>sn,_apps:()=>un,_clearComponents:()=>os,_components:()=>jn,_getProvider:()=>en,_registerComponent:()=>Gi,_removeServiceInstance:()=>zt,deleteApp:()=>vt,getApp:()=>ar,getApps:()=>Hr,initializeApp:()=>Xs,onLog:()=>Gn,registerVersion:()=>$n,setLogLevel:()=>ls});var u=V(5861),ie=V(4859),L=V(1877),pe=V(2090),le=V(8766);class ye{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map(Q=>{if(function se(j){return"VERSION"===j.getComponent()?.type}(Q)){const Oe=Q.getImmediate();return`${Oe.library}/${Oe.version}`}return null}).filter(Q=>Q).join(" ")}}const me="@firebase/app",z=new L.Yd("@firebase/app"),Gt="[DEFAULT]",Je={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},un=new Map,jn=new Map;function mn(j,Y){try{j.container.addComponent(Y)}catch(Q){z.debug(`Component ${Y.name} failed to register with FirebaseApp ${j.name}`,Q)}}function sn(j,Y){j.container.addOrOverwriteComponent(Y)}function Gi(j){const Y=j.name;if(jn.has(Y))return z.debug(`There were multiple attempts to register component ${Y}.`),!1;jn.set(Y,j);for(const Q of un.values())mn(Q,j);return!0}function en(j,Y){const Q=j.container.getProvider("heartbeat").getImmediate({optional:!0});return Q&&Q.triggerHeartbeat(),j.container.getProvider(Y)}function zt(j,Y,Q=Gt){en(j,Y).clearInstance(Q)}function os(){jn.clear()}const Fi=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class or{constructor(Y,Q,Oe){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},Q),this._name=Q.name,this._automaticDataCollectionEnabled=Q.automaticDataCollectionEnabled,this._container=Oe,this.container.addComponent(new ie.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}}const as="9.9.0";function Xs(j,Y={}){"object"!=typeof Y&&(Y={name:Y});const Q=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},Y),Oe=Q.name;if("string"!=typeof Oe||!Oe)throw Fi.create("bad-app-name",{appName:String(Oe)});const We=un.get(Oe);if(We){if((0,pe.vZ)(j,We.options)&&(0,pe.vZ)(Q,We.config))return We;throw Fi.create("duplicate-app",{appName:Oe})}const pt=new ie.H0(Oe);for(const tn of jn.values())pt.addComponent(tn);const bn=new or(j,Q,pt);return un.set(Oe,bn),bn}function ar(j=Gt){const Y=un.get(j);if(!Y)throw Fi.create("no-app",{appName:j});return Y}function Hr(){return Array.from(un.values())}function vt(j){return lr.apply(this,arguments)}function lr(){return(lr=(0,u.Z)(function*(j){const Y=j.name;un.has(Y)&&(un.delete(Y),yield Promise.all(j.container.getProviders().map(Q=>Q.delete())),j.isDeleted=!0)})).apply(this,arguments)}function $n(j,Y,Q){var Oe;let We=null!==(Oe=Je[j])&&void 0!==Oe?Oe:j;Q&&(We+=`-${Q}`);const pt=We.match(/\s|\//),bn=Y.match(/\s|\//);if(pt||bn){const tn=[`Unable to register library "${We}" with version "${Y}":`];return pt&&tn.push(`library name "${We}" contains illegal characters (whitespace or "/")`),pt&&bn&&tn.push("and"),bn&&tn.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void z.warn(tn.join(" "))}Gi(new ie.wA(`${We}-version`,()=>({library:We,version:Y}),"VERSION"))}function Gn(j,Y){if(null!==j&&"function"!=typeof j)throw Fi.create("invalid-log-argument");(0,L.Am)(j,Y)}function ls(j){(0,L.Ub)(j)}const Xn="firebase-heartbeat-store";let mr=null;function Eo(){return mr||(mr=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(j,Y)=>{0===Y&&j.createObjectStore(Xn)}}).catch(j=>{throw Fi.create("storage-open",{originalErrorMessage:j.message})})),mr}function qe(){return(qe=(0,u.Z)(function*(j){var Y;try{return(yield Eo()).transaction(Xn).objectStore(Xn).get(li(j))}catch(Q){throw Fi.create("storage-get",{originalErrorMessage:null===(Y=Q)||void 0===Y?void 0:Y.message})}})).apply(this,arguments)}function It(j,Y){return zi.apply(this,arguments)}function zi(){return(zi=(0,u.Z)(function*(j,Y){var Q;try{const We=(yield Eo()).transaction(Xn,"readwrite");return yield We.objectStore(Xn).put(Y,li(j)),We.done}catch(Oe){throw Fi.create("storage-set",{originalErrorMessage:null===(Q=Oe)||void 0===Q?void 0:Q.message})}})).apply(this,arguments)}function li(j){return`${j.name}!${j.options.appId}`}class ci{constructor(Y){this.container=Y,this._heartbeatsCache=null;const Q=this.container.getProvider("app").getImmediate();this._storage=new cr(Q),this._heartbeatsCachePromise=this._storage.read().then(Oe=>(this._heartbeatsCache=Oe,Oe))}triggerHeartbeat(){var Y=this;return(0,u.Z)(function*(){const Oe=Y.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),We=jr();if(null===Y._heartbeatsCache&&(Y._heartbeatsCache=yield Y._heartbeatsCachePromise),Y._heartbeatsCache.lastSentHeartbeatDate!==We&&!Y._heartbeatsCache.heartbeats.some(pt=>pt.date===We))return Y._heartbeatsCache.heartbeats.push({date:We,agent:Oe}),Y._heartbeatsCache.heartbeats=Y._heartbeatsCache.heartbeats.filter(pt=>{const bn=new Date(pt.date).valueOf();return Date.now()-bn<=2592e6}),Y._storage.overwrite(Y._heartbeatsCache)})()}getHeartbeatsHeader(){var Y=this;return(0,u.Z)(function*(){if(null===Y._heartbeatsCache&&(yield Y._heartbeatsCachePromise),null===Y._heartbeatsCache||0===Y._heartbeatsCache.heartbeats.length)return"";const Q=jr(),{heartbeatsToSend:Oe,unsentEntries:We}=function ln(j,Y=1024){const Q=[];let Oe=j.slice();for(const We of j){const pt=Q.find(bn=>bn.agent===We.agent);if(pt){if(pt.dates.push(We.date),$(Q)>Y){pt.dates.pop();break}}else if(Q.push({agent:We.agent,dates:[We.date]}),$(Q)>Y){Q.pop();break}Oe=Oe.slice(1)}return{heartbeatsToSend:Q,unsentEntries:Oe}}(Y._heartbeatsCache.heartbeats),pt=(0,pe.L)(JSON.stringify({version:2,heartbeats:Oe}));return Y._heartbeatsCache.lastSentHeartbeatDate=Q,We.length>0?(Y._heartbeatsCache.heartbeats=We,yield Y._storage.overwrite(Y._heartbeatsCache)):(Y._heartbeatsCache.heartbeats=[],Y._storage.overwrite(Y._heartbeatsCache)),pt})()}}function jr(){return(new Date).toISOString().substring(0,10)}class cr{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,pe.hl)()&&(0,pe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Y=this;return(0,u.Z)(function*(){return(yield Y._canUseIndexedDBPromise)&&(yield function Qt(j){return qe.apply(this,arguments)}(Y.app))||{heartbeats:[]}})()}overwrite(Y){var Q=this;return(0,u.Z)(function*(){var Oe;if(yield Q._canUseIndexedDBPromise){const pt=yield Q.read();return It(Q.app,{lastSentHeartbeatDate:null!==(Oe=Y.lastSentHeartbeatDate)&&void 0!==Oe?Oe:pt.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}})()}add(Y){var Q=this;return(0,u.Z)(function*(){var Oe;if(yield Q._canUseIndexedDBPromise){const pt=yield Q.read();return It(Q.app,{lastSentHeartbeatDate:null!==(Oe=Y.lastSentHeartbeatDate)&&void 0!==Oe?Oe:pt.lastSentHeartbeatDate,heartbeats:[...pt.heartbeats,...Y.heartbeats]})}})()}}function $(j){return(0,pe.L)(JSON.stringify({version:2,heartbeats:j})).length}!function W(j){Gi(new ie.wA("platform-logger",Y=>new ye(Y),"PRIVATE")),Gi(new ie.wA("heartbeat",Y=>new ci(Y),"PRIVATE")),$n(me,"0.7.28",j),$n(me,"0.7.28","esm2017"),$n("fire-js","")}("")},4859:(ft,xe,V)=>{V.d(xe,{H0:()=>me,wA:()=>L,zt:()=>le});var u=V(5861),ie=V(2090);class L{constructor(z,G,ne){this.name=z,this.instanceFactory=G,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const pe="[DEFAULT]";class le{constructor(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){const ne=new ie.BH;if(this.instancesDeferred.set(G,ne),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:G});Ge&&ne.resolve(Ge)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(z){var G;const ne=this.normalizeInstanceIdentifier(z?.identifier),Ge=null!==(G=z?.optional)&&void 0!==G&&G;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Me){if(Ge)return null;throw Me}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function se(ve){return"EAGER"===ve.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:pe})}catch{}for(const[G,ne]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(G);try{const Me=this.getOrInitializeService({instanceIdentifier:Ge});ne.resolve(Me)}catch{}}}}clearInstance(z=pe){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,u.Z)(function*(){const G=Array.from(z.instances.values());yield Promise.all([...G.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...G.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=pe){return this.instances.has(z)}getOptions(z=pe){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:G={}}=z,ne=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ne,options:G});for(const[Me,ke]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Me)&&ke.resolve(Ge);return Ge}onInit(z,G){var ne;const Ge=this.normalizeInstanceIdentifier(G),Me=null!==(ne=this.onInitCallbacks.get(Ge))&&void 0!==ne?ne:new Set;Me.add(z),this.onInitCallbacks.set(Ge,Me);const ke=this.instances.get(Ge);return ke&&z(ke,Ge),()=>{Me.delete(z)}}invokeOnInitCallbacks(z,G){const ne=this.onInitCallbacks.get(G);if(ne)for(const Ge of ne)try{Ge(z,G)}catch{}}getOrInitializeService({instanceIdentifier:z,options:G={}}){let ne=this.instances.get(z);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=z,ve===pe?void 0:ve),options:G}),this.instances.set(z,ne),this.instancesOptions.set(z,G),this.invokeOnInitCallbacks(ne,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ne)}catch{}var ve;return ne||null}normalizeInstanceIdentifier(z=pe){return this.component?this.component.multipleInstances?z:pe:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const G=this.getProvider(z.name);if(G.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);G.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const G=new le(z,this);return this.providers.set(z,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(ft,xe,V)=>{V.d(xe,{Am:()=>ve,Ub:()=>me,Yd:()=>se,in:()=>ie});const u=[];var ie=(()=>{return(z=ie||(ie={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",ie;var z})();const L={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},pe=ie.INFO,le={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},ye=(z,G,...ne)=>{if(G<z.logLevel)return;const Ge=(new Date).toISOString(),Me=le[G];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Me](`[${Ge}]  ${z.name}:`,...ne)};class se{constructor(G){this.name=G,this._logLevel=pe,this._logHandler=ye,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in ie))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...G),this._logHandler(this,ie.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...G),this._logHandler(this,ie.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...G),this._logHandler(this,ie.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...G),this._logHandler(this,ie.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...G),this._logHandler(this,ie.ERROR,...G)}}function me(z){u.forEach(G=>{G.setLogLevel(z)})}function ve(z,G){for(const ne of u){let Ge=null;G&&G.level&&(Ge=L[G.level]),ne.userLogHandler=null===z?null:(Me,ke,...$e)=>{const ge=$e.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch{return null}}).filter(be=>be).join(" ");ke>=(Ge??Me.logLevel)&&z({level:ie[ke].toLowerCase(),message:ge,args:$e,type:Me.name})}}}},8766:(ft,xe,V)=>{V.d(xe,{Lj:()=>Re,X3:()=>rt});var u=V(5861);let L,pe;const se=new WeakMap,me=new WeakMap,ve=new WeakMap,z=new WeakMap,G=new WeakMap;let Me={get(q,De,ee){if(q instanceof IDBTransaction){if("done"===De)return me.get(q);if("objectStoreNames"===De)return q.objectStoreNames||ve.get(q);if("store"===De)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return be(q[De])},set:(q,De,ee)=>(q[De]=ee,!0),has:(q,De)=>q instanceof IDBTransaction&&("done"===De||"store"===De)||De in q};function ge(q){return"function"==typeof q?function $e(q){return q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(q)?function(...De){return q.apply(et(this),De),be(se.get(this))}:function(...De){return be(q.apply(et(this),De))}:function(De,...ee){const ae=q.call(et(this),De,...ee);return ve.set(ae,De.sort?De.sort():[De]),be(ae)}}(q):(q instanceof IDBTransaction&&function Ge(q){if(me.has(q))return;const De=new Promise((ee,ae)=>{const oe=()=>{q.removeEventListener("complete",we),q.removeEventListener("error",fe),q.removeEventListener("abort",fe)},we=()=>{ee(),oe()},fe=()=>{ae(q.error||new DOMException("AbortError","AbortError")),oe()};q.addEventListener("complete",we),q.addEventListener("error",fe),q.addEventListener("abort",fe)});me.set(q,De)}(q),((q,De)=>De.some(ee=>q instanceof ee))(q,function le(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(q,Me):q)}function be(q){if(q instanceof IDBRequest)return function ne(q){const De=new Promise((ee,ae)=>{const oe=()=>{q.removeEventListener("success",we),q.removeEventListener("error",fe)},we=()=>{ee(be(q.result)),oe()},fe=()=>{ae(q.error),oe()};q.addEventListener("success",we),q.addEventListener("error",fe)});return De.then(ee=>{ee instanceof IDBCursor&&se.set(ee,q)}).catch(()=>{}),G.set(De,q),De}(q);if(z.has(q))return z.get(q);const De=ge(q);return De!==q&&(z.set(q,De),G.set(De,q)),De}const et=q=>G.get(q);function rt(q,De,{blocked:ee,upgrade:ae,blocking:oe,terminated:we}={}){const fe=indexedDB.open(q,De),Le=be(fe);return ae&&fe.addEventListener("upgradeneeded",yt=>{ae(be(fe.result),yt.oldVersion,yt.newVersion,be(fe.transaction))}),ee&&fe.addEventListener("blocked",()=>ee()),Le.then(yt=>{we&&yt.addEventListener("close",()=>we()),oe&&yt.addEventListener("versionchange",()=>oe())}).catch(()=>{}),Le}function Re(q,{blocked:De}={}){const ee=indexedDB.deleteDatabase(q);return De&&ee.addEventListener("blocked",()=>De()),be(ee).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],je=new Map;function ze(q,De){if(!(q instanceof IDBDatabase)||De in q||"string"!=typeof De)return;if(je.get(De))return je.get(De);const ee=De.replace(/FromIndex$/,""),ae=De!==ee,oe=Te.includes(ee);if(!(ee in(ae?IDBIndex:IDBObjectStore).prototype)||!oe&&!Ee.includes(ee))return;const we=function(){var fe=(0,u.Z)(function*(Le,...yt){const Yt=this.transaction(Le,oe?"readwrite":"readonly");let Gt=Yt.store;return ae&&(Gt=Gt.index(yt.shift())),(yield Promise.all([Gt[ee](...yt),oe&&Yt.done]))[0]});return function(yt){return fe.apply(this,arguments)}}();return je.set(De,we),we}!function ke(q){Me=q(Me)}(q=>({...q,get:(De,ee,ae)=>ze(De,ee)||q.get(De,ee,ae),has:(De,ee)=>!!ze(De,ee)||q.has(De,ee)}))},5861:(ft,xe,V)=>{function u(L,pe,le,ye,se,me,ve){try{var z=L[me](ve),G=z.value}catch(ne){return void le(ne)}z.done?pe(G):Promise.resolve(G).then(ye,se)}function ie(L){return function(){var pe=this,le=arguments;return new Promise(function(ye,se){var me=L.apply(pe,le);function ve(G){u(me,ye,se,ve,z,"next",G)}function z(G){u(me,ye,se,ve,z,"throw",G)}ve(void 0)})}}V.d(xe,{Z:()=>ie})}},ft=>{ft(ft.s=5663)}]);