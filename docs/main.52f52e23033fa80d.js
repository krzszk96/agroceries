"use strict";(self.webpackChunkagroceries=self.webpackChunkagroceries||[]).push([[179],{2011:(ft,xe,V)=>{V.d(xe,{Dh:()=>me,GT:()=>ye,cc:()=>Me,hO:()=>Ge,on:()=>z,pX:()=>le,xv:()=>ve});var u=V(4650),re=V(127),L=V(5813);ft=V.hmd(ft);const pe=["ngOnDestroy"],le=(be,Je,it,Re={})=>new Proxy(be,{get:(Ce,Te)=>it.runOutsideAngular(()=>{var je;if(be[Te])return!(null===(je=Re?.spy)||void 0===je)&&je.get&&Re.spy.get(Te,be[Te]),be[Te];if(pe.indexOf(Te)>-1)return()=>{};const ze=Je.toPromise().then(q=>{const Ie=q&&q[Te];return"function"==typeof Ie?Ie.bind(q):Ie&&Ie.then?Ie.then(ee=>it.run(()=>ee)):it.run(()=>Ie)});return new Proxy(()=>{},{get:(q,Ie)=>ze[Ie],apply:(q,Ie,ee)=>ze.then(ae=>{var se;const Ee=ae&&ae(...ee);return!(null===(se=Re?.spy)||void 0===se)&&se.apply&&Re.spy.apply(Te,ee,Ee),Ee})})})}),ye=(be,Je)=>{Je.forEach(it=>{Object.getOwnPropertyNames(it.prototype||it).forEach(Re=>{Object.defineProperty(be.prototype,Re,Object.getOwnPropertyDescriptor(it.prototype||it,Re))})})};class oe{constructor(Je){return Je}}const me=new u.OlP("angularfire2.app.options"),ve=new u.OlP("angularfire2.app.name");function z(be,Je,it){const Ce="object"==typeof it&&it||{};Ce.name=Ce.name||"string"==typeof it&&it||"[DEFAULT]";const je=re.Z.apps.filter(ze=>ze&&ze.name===Ce.name)[0]||Je.runOutsideAngular(()=>re.Z.initializeApp(be,Ce));try{JSON.stringify(be)!==JSON.stringify(je.options)&&G("error",`${je.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new oe(je)}const G=(be,...Je)=>{(0,u.X6Q)()&&typeof console<"u"&&console[be](...Je)},ne={provide:oe,useFactory:z,deps:[me,u.R0b,[new u.FiY,ve]]};let Ge=(()=>{class be{constructor(it){re.Z.registerVersion("angularfire",L.q4.full,"core"),re.Z.registerVersion("angularfire",L.q4.full,"app-compat"),re.Z.registerVersion("angular",u.q4F.full,it.toString())}static initializeApp(it,Re){return{ngModule:be,providers:[{provide:me,useValue:it},{provide:ve,useValue:Re}]}}}return be.\u0275fac=function(it){return new(it||be)(u.LFG(u.Lbi))},be.\u0275mod=u.oAB({type:be}),be.\u0275inj=u.cJS({providers:[ne]}),be})();function Me(be,Je,it,Re,Ce){const[,Te,je]=globalThis.\u0275AngularfireInstanceCache.find(ze=>ze[0]===be)||[];if(Te)return function ke(be,Je){try{return be.toString()===Je.toString()}catch{return be===Je}}(Ce,je)||(ge("error",`${Je} was already initialized on the ${it} Firebase App with different settings.${$e?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ce,was:je})),Te;{const ze=Re();return globalThis.\u0275AngularfireInstanceCache.push([be,ze,Ce]),ze}}const $e=!!ft.hot,ge=(be,...Je)=>{(0,u.X6Q)()&&typeof console<"u"&&console[be](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ft,xe,V)=>{V.d(xe,{q4:()=>Bu,iC:()=>Vc,fc:()=>Va,HU:()=>hp,vb:()=>Qo,JM:()=>Fa});var u=V(4650),re=V(5867),L=V(5861),pe=V(9681),le=V(2090),ye=V(4859),oe=V(1877),me=V(8766);const ve="@firebase/installations",z="0.5.12",ne=`w:${z}`,Ge="FIS_v2",Je=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function it(T){return T instanceof le.ZR&&T.code.includes("request-failed")}function Re({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Ce(T){return{token:T.token,requestStatus:2,expiresIn:ae(T.expiresIn),creationTime:Date.now()}}function Te(T,S){return je.apply(this,arguments)}function je(){return(je=(0,L.Z)(function*(T,S){const H=(yield S.json()).error;return Je.create("request-failed",{requestName:T,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function ze({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function q(T,{refreshToken:S}){const R=ze(T);return R.append("Authorization",function se(T){return`${Ge} ${T}`}(S)),R}function Ie(T){return ee.apply(this,arguments)}function ee(){return(ee=(0,L.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function ae(T){return Number(T.replace("s","000"))}function Ee(T,S){return fe.apply(this,arguments)}function fe(){return(fe=(0,L.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:R}){const H=Re(T),te=ze(T),ue=S.getImmediate({optional:!0});if(ue){const Dt=yield ue.getHeartbeatsHeader();Dt&&te.append("x-firebase-client",Dt)}const Ye={method:"POST",headers:te,body:JSON.stringify({fid:R,authVersion:Ge,appId:T.appId,sdkVersion:ne})},ht=yield Ie(()=>fetch(H,Ye));if(ht.ok){const Dt=yield ht.json();return{fid:Dt.fid||R,registrationStatus:2,refreshToken:Dt.refreshToken,authToken:Ce(Dt.authToken)}}throw yield Te("Create Installation",ht)})).apply(this,arguments)}function Fe(T){return new Promise(S=>{setTimeout(S,T)})}const Xt=/^[cdef][\w-]{21}$/;function Xe(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const R=function dn(T){return function vt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Xt.test(R)?R:""}catch{return""}}function $n(T){return`${T.appName}!${T.appId}`}const gn=new Map;function rn(T,S){const R=$n(T);zt(R,S),function us(T,S){const R=function Pr(){return!mi&&"BroadcastChannel"in self&&(mi=new BroadcastChannel("[Firebase] FID Change"),mi.onmessage=T=>{zt(T.data.key,T.data.fid)}),mi}();R&&R.postMessage({key:T,fid:S}),function ni(){0===gn.size&&mi&&(mi.close(),mi=null)}()}(R,S)}function zt(T,S){const R=gn.get(T);if(R)for(const H of R)H(S)}let mi=null;const ri="firebase-installations-store";let $i=null;function bt(){return $i||($i=(0,me.X3)("firebase-installations-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(ri)}})),$i}function ii(T,S){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,L.Z)(function*(T,S){const R=$n(T),te=(yield bt()).transaction(ri,"readwrite"),ue=te.objectStore(ri),Ae=yield ue.get(R);return yield ue.put(S,R),yield te.done,(!Ae||Ae.fid!==S.fid)&&rn(T,S.fid),S})).apply(this,arguments)}function zn(T){return hs.apply(this,arguments)}function hs(){return(hs=(0,L.Z)(function*(T){const S=$n(T),H=(yield bt()).transaction(ri,"readwrite");yield H.objectStore(ri).delete(S),yield H.done})).apply(this,arguments)}function fs(T,S){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,L.Z)(function*(T,S){const R=$n(T),te=(yield bt()).transaction(ri,"readwrite"),ue=te.objectStore(ri),Ae=yield ue.get(R),Ye=S(Ae);return void 0===Ye?yield ue.delete(R):yield ue.put(Ye,R),yield te.done,Ye&&(!Ae||Ae.fid!==Ye.fid)&&rn(T,Ye.fid),Ye})).apply(this,arguments)}function Jn(T){return gi.apply(this,arguments)}function gi(){return(gi=(0,L.Z)(function*(T){let S;const R=yield fs(T.appConfig,H=>{const te=ko(H),ue=Jt(T,te);return S=ue.registrationPromise,ue.installationEntry});return""===R.fid?{installationEntry:yield S}:{installationEntry:R,registrationPromise:S}})).apply(this,arguments)}function ko(T){return _i(T||{fid:Xe(),registrationStatus:0})}function Jt(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Je.create("app-offline"))};const R={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},H=function qe(T,S){return It.apply(this,arguments)}(T,R);return{installationEntry:R,registrationPromise:H}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:jr(T)}:{installationEntry:S}}function It(){return(It=(0,L.Z)(function*(T,S){try{const R=yield Ee(T,S);return ii(T.appConfig,R)}catch(R){throw it(R)&&409===R.customData.serverCode?yield zn(T.appConfig):yield ii(T.appConfig,{fid:S.fid,registrationStatus:0}),R}})).apply(this,arguments)}function jr(T){return ur.apply(this,arguments)}function ur(){return(ur=(0,L.Z)(function*(T){let S=yield Mt(T.appConfig);for(;1===S.registrationStatus;)yield Fe(100),S=yield Mt(T.appConfig);if(0===S.registrationStatus){const{installationEntry:R,registrationPromise:H}=yield Jn(T);return H||R}return S})).apply(this,arguments)}function Mt(T){return fs(T,S=>{if(!S)throw Je.create("installation-not-found");return _i(S)})}function _i(T){return function dr(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function Gi(T,S){return ln.apply(this,arguments)}function ln(){return(ln=(0,L.Z)(function*({appConfig:T,heartbeatServiceProvider:S},R){const H=si(T,R),te=q(T,R),ue=S.getImmediate({optional:!0});if(ue){const Dt=yield ue.getHeartbeatsHeader();Dt&&te.append("x-firebase-client",Dt)}const Ye={method:"POST",headers:te,body:JSON.stringify({installation:{sdkVersion:ne,appId:T.appId}})},ht=yield Ie(()=>fetch(H,Ye));if(ht.ok)return Ce(yield ht.json());throw yield Te("Generate Auth Token",ht)})).apply(this,arguments)}function si(T,{fid:S}){return`${Re(T)}/${S}/authTokens:generate`}function $(T){return W.apply(this,arguments)}function W(){return(W=(0,L.Z)(function*(T,S=!1){let R;const H=yield fs(T.appConfig,ue=>{if(!pt(ue))throw Je.create("not-registered");const Ae=ue.authToken;if(!S&&wn(Ae))return ue;if(1===Ae.requestStatus)return R=j(T,S),ue;{if(!navigator.onLine)throw Je.create("app-offline");const Ye=wr(ue);return R=Oe(T,Ye),Ye}});return R?yield R:H.authToken})).apply(this,arguments)}function j(T,S){return K.apply(this,arguments)}function K(){return(K=(0,L.Z)(function*(T,S){let R=yield Y(T.appConfig);for(;1===R.authToken.requestStatus;)yield Fe(100),R=yield Y(T.appConfig);const H=R.authToken;return 0===H.requestStatus?$(T,S):H})).apply(this,arguments)}function Y(T){return fs(T,S=>{if(!pt(S))throw Je.create("not-registered");return function jt(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Oe(T,S){return We.apply(this,arguments)}function We(){return(We=(0,L.Z)(function*(T,S){try{const R=yield Gi(T,S),H=Object.assign(Object.assign({},S),{authToken:R});return yield ii(T.appConfig,H),R}catch(R){if(!it(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const H=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield ii(T.appConfig,H)}else yield zn(T.appConfig);throw R}})).apply(this,arguments)}function pt(T){return void 0!==T&&2===T.registrationStatus}function wn(T){return 2===T.requestStatus&&!function tn(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function wr(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function Sn(){return(Sn=(0,L.Z)(function*(T){const S=T,{installationEntry:R,registrationPromise:H}=yield Jn(S);return H?H.catch(console.error):$(S).catch(console.error),R.fid})).apply(this,arguments)}function Tr(){return(Tr=(0,L.Z)(function*(T,S=!1){const R=T;return yield $r(R),(yield $(R,S)).token})).apply(this,arguments)}function $r(T){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,L.Z)(function*(T){const{registrationPromise:S}=yield Jn(T);S&&(yield S)})).apply(this,arguments)}function zi(T){return Je.create("missing-app-config-values",{valueName:T})}const Ft="installations",xn=T=>{const S=T.getProvider("app").getImmediate(),R=function fl(T){if(!T||!T.options)throw zi("App Configuration");if(!T.name)throw zi("App Name");const S=["projectId","apiKey","appId"];for(const R of S)if(!T.options[R])throw zi(R);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:R,heartbeatServiceProvider:(0,pe._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},ma=T=>{const S=T.getProvider("app").getImmediate(),R=(0,pe._getProvider)(S,Ft).getImmediate();return{getId:()=>function $t(T){return Sn.apply(this,arguments)}(R),getToken:te=>function er(T){return Tr.apply(this,arguments)}(R,te)}};(function Ro(){(0,pe._registerComponent)(new ye.wA(Ft,xn,"PUBLIC")),(0,pe._registerComponent)(new ye.wA("installations-internal",ma,"PRIVATE"))})(),(0,pe.registerVersion)(ve,z),(0,pe.registerVersion)(ve,z,"esm2017");const tr="@firebase/remote-config",Sr=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Xf{constructor(S,R,H,te){this.client=S,this.storage=R,this.storageCache=H,this.logger=te}isCachedDataFresh(S,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-R,te=H<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${te}.`),te}fetch(S){var R=this;return(0,L.Z)(function*(){const[H,te]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(te&&R.isCachedDataFresh(S.cacheMaxAgeMillis,H))return te;S.eTag=te&&te.eTag;const ue=yield R.client.fetch(S),Ae=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Ae.push(R.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Ae),ue})()}}function zd(T=navigator){return T.languages&&T.languages[0]||T.language}class lc{constructor(S,R,H,te,ue,Ae){this.firebaseInstallations=S,this.sdkVersion=R,this.namespace=H,this.projectId=te,this.apiKey=ue,this.appId=Ae}fetch(S){var R=this;return(0,L.Z)(function*(){var H,te,ue;const[Ae,Ye]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,At={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},lt={sdk_version:R.sdkVersion,app_instance_id:Ae,app_instance_id_token:Ye,app_id:R.appId,language_code:zd()},mt={method:"POST",headers:At,body:JSON.stringify(lt)},mr=fetch(Dt,mt),Rl=new Promise((Xi,_s)=>{S.signal.addEventListener(()=>{const ch=new Error("The operation was aborted.");ch.name="AbortError",_s(ch)})});let Ai;try{yield Promise.race([mr,Rl]),Ai=yield mr}catch(Xi){let _s="fetch-client-network";throw"AbortError"===(null===(H=Xi)||void 0===H?void 0:H.name)&&(_s="fetch-timeout"),Sr.create(_s,{originalErrorMessage:null===(te=Xi)||void 0===te?void 0:te.message})}let xi=Ai.status;const Ua=Ai.headers.get("ETag")||void 0;let Ol,Ha;if(200===Ai.status){let Xi;try{Xi=yield Ai.json()}catch(_s){throw Sr.create("fetch-client-parse",{originalErrorMessage:null===(ue=_s)||void 0===ue?void 0:ue.message})}Ol=Xi.entries,Ha=Xi.state}if("INSTANCE_STATE_UNSPECIFIED"===Ha?xi=500:"NO_CHANGE"===Ha?xi=304:("NO_TEMPLATE"===Ha||"EMPTY_CONFIG"===Ha)&&(Ol={}),304!==xi&&200!==xi)throw Sr.create("fetch-status",{httpStatus:xi});return{status:xi,eTag:Ua,config:Ol}})()}}class vg{constructor(S,R){this.client=S,this.storage=R}fetch(S){var R=this;return(0,L.Z)(function*(){const H=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(S,H)})()}attemptFetch(S,{throttleEndTimeMillis:R,backoffCount:H}){var te=this;return(0,L.Z)(function*(){yield function Oo(T,S){return new Promise((R,H)=>{const te=Math.max(S-Date.now(),0),ue=setTimeout(R,te);T.addEventListener(()=>{clearTimeout(ue),H(Sr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,R);try{const ue=yield te.client.fetch(S);return yield te.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function bi(T){if(!(T instanceof le.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ue))throw ue;const Ae={throttleEndTimeMillis:Date.now()+(0,le.$s)(H),backoffCount:H+1};return yield te.storage.setThrottleMetadata(Ae),te.attemptFetch(S,Ae)}})()}}class qd{constructor(S,R,H,te,ue){this.app=S,this._client=R,this._storageCache=H,this._storage=te,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Eu(T,S){var R;const H=T.target.error||void 0;return Sr.create(S,{originalErrorMessage:H&&(null===(R=H)||void 0===R?void 0:R.message)})}const oo="app_namespace_store";class Cg{constructor(S,R,H,te=function Eg(){return new Promise((T,S)=>{var R;try{const H=indexedDB.open("firebase_remote_config",1);H.onerror=te=>{S(Eu(te,"storage-open"))},H.onsuccess=te=>{T(te.target.result)},H.onupgradeneeded=te=>{0===te.oldVersion&&te.target.result.createObjectStore(oo,{keyPath:"compositeKey"})}}catch(H){S(Sr.create("storage-open",{originalErrorMessage:null===(R=H)||void 0===R?void 0:R.message}))}})}()){this.appId=S,this.appName=R,this.namespace=H,this.openDbPromise=te}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var R=this;return(0,L.Z)(function*(){const H=yield R.openDbPromise;return new Promise((te,ue)=>{var Ae;const ht=H.transaction([oo],"readonly").objectStore(oo),Dt=R.createCompositeKey(S);try{const At=ht.get(Dt);At.onerror=lt=>{ue(Eu(lt,"storage-get"))},At.onsuccess=lt=>{const mt=lt.target.result;te(mt?mt.value:void 0)}}catch(At){ue(Sr.create("storage-get",{originalErrorMessage:null===(Ae=At)||void 0===Ae?void 0:Ae.message}))}})})()}set(S,R){var H=this;return(0,L.Z)(function*(){const te=yield H.openDbPromise;return new Promise((ue,Ae)=>{var Ye;const Dt=te.transaction([oo],"readwrite").objectStore(oo),At=H.createCompositeKey(S);try{const lt=Dt.put({compositeKey:At,value:R});lt.onerror=mt=>{Ae(Eu(mt,"storage-set"))},lt.onsuccess=()=>{ue()}}catch(lt){Ae(Sr.create("storage-set",{originalErrorMessage:null===(Ye=lt)||void 0===Ye?void 0:Ye.message}))}})})()}delete(S){var R=this;return(0,L.Z)(function*(){const H=yield R.openDbPromise;return new Promise((te,ue)=>{var Ae;const ht=H.transaction([oo],"readwrite").objectStore(oo),Dt=R.createCompositeKey(S);try{const At=ht.delete(Dt);At.onerror=lt=>{ue(Eu(lt,"storage-delete"))},At.onsuccess=()=>{te()}}catch(At){ue(Sr.create("storage-delete",{originalErrorMessage:null===(Ae=At)||void 0===Ae?void 0:Ae.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class cc{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,L.Z)(function*(){const R=S.storage.getLastFetchStatus(),H=S.storage.getLastSuccessfulFetchTimestampMillis(),te=S.storage.getActiveConfig(),ue=yield R;ue&&(S.lastFetchStatus=ue);const Ae=yield H;Ae&&(S.lastSuccessfulFetchTimestampMillis=Ae);const Ye=yield te;Ye&&(S.activeConfig=Ye)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function uc(){return ao.apply(this,arguments)}function ao(){return(ao=(0,L.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}!function As(){(0,pe._registerComponent)(new ye.wA("remote-config",function T(S,{instanceIdentifier:R}){const H=S.getProvider("app").getImmediate(),te=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Sr.create("registration-window");if(!(0,le.hl)())throw Sr.create("indexed-db-unavailable");const{projectId:ue,apiKey:Ae,appId:Ye}=H.options;if(!ue)throw Sr.create("registration-project-id");if(!Ae)throw Sr.create("registration-api-key");if(!Ye)throw Sr.create("registration-app-id");const ht=new Cg(Ye,H.name,R=R||"firebase"),Dt=new cc(ht),At=new oe.Yd(tr);At.logLevel=oe.in.ERROR;const lt=new lc(te,pe.SDK_VERSION,R,ue,Ae,Ye),mt=new vg(lt,ht),mr=new Xf(mt,ht,Dt,At),Rl=new qd(H,mr,Dt,ht,At);return function Qf(T){const S=(0,le.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Rl),Rl},"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)(tr,"0.3.11"),(0,pe.registerVersion)(tr,"0.3.11","esm2017")}();const Cu="/firebase-messaging-sw.js",wi="/firebase-cloud-messaging-push-scope",lo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Iu="google.c.a.c_id",yl="google.c.a.c_l",vl="google.c.a.ts",Jf="google.c.a.e";var xs=(()=>{return(T=xs||(xs={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",xs;var T})();function Dn(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function dc(T){const R=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(R),te=new Uint8Array(H.length);for(let ue=0;ue<H.length;++ue)te[ue]=H.charCodeAt(ue);return te}const hc="fcm_token_details_db",ai="fcm_token_object_Store";function Zd(T){return jn.apply(this,arguments)}function jn(){return jn=(0,L.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(hc))return null;let S=null;return(yield(0,me.X3)(hc,5,{upgrade:(H=(0,L.Z)(function*(te,ue,Ae,Ye){var ht;if(ue<2||!te.objectStoreNames.contains(ai))return;const Dt=Ye.objectStore(ai),At=yield Dt.index("fcmSenderId").get(T);if(yield Dt.clear(),At)if(2===ue){const lt=At;if(!lt.auth||!lt.p256dh||!lt.endpoint)return;S={token:lt.fcmToken,createTime:null!==(ht=lt.createTime)&&void 0!==ht?ht:Date.now(),subscriptionOptions:{auth:lt.auth,p256dh:lt.p256dh,endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:"string"==typeof lt.vapidKey?lt.vapidKey:Dn(lt.vapidKey)}}}else if(3===ue){const lt=At;S={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:Dn(lt.auth),p256dh:Dn(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:Dn(lt.vapidKey)}}}else if(4===ue){const lt=At;S={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:Dn(lt.auth),p256dh:Dn(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:Dn(lt.vapidKey)}}}}),function(ue,Ae,Ye,ht){return H.apply(this,arguments)})})).close(),yield(0,me.Lj)(hc),yield(0,me.Lj)("fcm_vapid_details_db"),yield(0,me.Lj)("undefined"),Yd(S)?S:null;var H}),jn.apply(this,arguments)}function Yd(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const nr="firebase-messaging-store";let fc=null;function Po(){return fc||(fc=(0,me.X3)("firebase-messaging-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(nr)}})),fc}function co(T){return Er.apply(this,arguments)}function Er(){return(Er=(0,L.Z)(function*(T){const S=uo(T),H=yield(yield Po()).transaction(nr).objectStore(nr).get(S);if(H)return H;{const te=yield Zd(T.appConfig.senderId);if(te)return yield No(T,te),te}})).apply(this,arguments)}function No(T,S){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,L.Z)(function*(T,S){const R=uo(T),te=(yield Po()).transaction(nr,"readwrite");return yield te.objectStore(nr).put(S,R),yield te.done,S})).apply(this,arguments)}function wa(T){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,L.Z)(function*(T){const S=uo(T),H=(yield Po()).transaction(nr,"readwrite");yield H.objectStore(nr).delete(S),yield H.done})).apply(this,arguments)}function uo({appConfig:T}){return T.appId}const at=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function pc(T,S){return Du.apply(this,arguments)}function Du(){return(Du=(0,L.Z)(function*(T,S){var R;const H=yield gc(T),te=Vt(S),ue={method:"POST",headers:H,body:JSON.stringify(te)};let Ae;try{Ae=yield(yield fetch(Ea(T.appConfig),ue)).json()}catch(Ye){throw at.create("token-subscribe-failed",{errorInfo:null===(R=Ye)||void 0===R?void 0:R.toString()})}if(Ae.error)throw at.create("token-subscribe-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw at.create("token-subscribe-no-token");return Ae.token})).apply(this,arguments)}function Tu(T,S){return mc.apply(this,arguments)}function mc(){return(mc=(0,L.Z)(function*(T,S){var R;const H=yield gc(T),te=Vt(S.subscriptionOptions),ue={method:"PATCH",headers:H,body:JSON.stringify(te)};let Ae;try{Ae=yield(yield fetch(`${Ea(T.appConfig)}/${S.token}`,ue)).json()}catch(Ye){throw at.create("token-update-failed",{errorInfo:null===(R=Ye)||void 0===R?void 0:R.toString()})}if(Ae.error)throw at.create("token-update-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw at.create("token-update-no-token");return Ae.token})).apply(this,arguments)}function Fo(T,S){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,L.Z)(function*(T,S){var R;const te={method:"DELETE",headers:yield gc(T)};try{const Ae=yield(yield fetch(`${Ea(T.appConfig)}/${S}`,te)).json();if(Ae.error)throw at.create("token-unsubscribe-failed",{errorInfo:Ae.error.message})}catch(ue){throw at.create("token-unsubscribe-failed",{errorInfo:null===(R=ue)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function Ea({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function gc(T){return Se.apply(this,arguments)}function Se(){return(Se=(0,L.Z)(function*({appConfig:T,installations:S}){const R=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Vt({p256dh:T,auth:S,endpoint:R,vapidKey:H}){const te={web:{endpoint:R,auth:S,p256dh:T}};return H!==lo&&(te.web.applicationPubKey=H),te}const Ca=6048e5;function Vo(T){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,L.Z)(function*(T){const S=yield _c(T.swRegistration,T.vapidKey),R={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:Dn(S.getKey("auth")),p256dh:Dn(S.getKey("p256dh"))},H=yield co(T.firebaseDependencies);if(H){if(ks(H.subscriptionOptions,R))return Date.now()>=H.createTime+Ca?Ci(T,{token:H.token,createTime:Date.now(),subscriptionOptions:R}):H.token;try{yield Fo(T.firebaseDependencies,H.token)}catch(te){console.warn(te)}return Da(T.firebaseDependencies,R)}return Da(T.firebaseDependencies,R)})).apply(this,arguments)}function Ia(T){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,L.Z)(function*(T){const S=yield co(T.firebaseDependencies);S&&(yield Fo(T.firebaseDependencies,S.token),yield wa(T.firebaseDependencies));const R=yield T.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Ci(T,S){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,L.Z)(function*(T,S){try{const R=yield Tu(T.firebaseDependencies,S),H=Object.assign(Object.assign({},S),{token:R,createTime:Date.now()});return yield No(T.firebaseDependencies,H),R}catch(R){throw yield Ia(T),R}})).apply(this,arguments)}function Da(T,S){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,L.Z)(function*(T,S){const H={token:yield pc(T,S),createTime:Date.now(),subscriptionOptions:S};return yield No(T,H),H.token})).apply(this,arguments)}function _c(T,S){return ep.apply(this,arguments)}function ep(){return(ep=(0,L.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:dc(S)})})).apply(this,arguments)}function ks(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function hr(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Wi(T,S){if(!S.notification)return;T.notification={};const R=S.notification.title;R&&(T.notification.title=R);const H=S.notification.body;H&&(T.notification.body=H);const te=S.notification.image;te&&(T.notification.image=te)}(S,T),function Su(T,S){!S.data||(T.data=S.data)}(S,T),function Uo(T,S){var R,H,te,ue,Ae;if(!(S.fcmOptions||null!==(R=S.notification)&&void 0!==R&&R.click_action))return;T.fcmOptions={};const Ye=null!==(te=null===(H=S.fcmOptions)||void 0===H?void 0:H.link)&&void 0!==te?te:null===(ue=S.notification)||void 0===ue?void 0:ue.click_action;Ye&&(T.fcmOptions.link=Ye);const ht=null===(Ae=S.fcmOptions)||void 0===Ae?void 0:Ae.analytics_label;ht&&(T.fcmOptions.analyticsLabel=ht)}(S,T),S}function Ki(T){return"object"==typeof T&&!!T&&Iu in T}function Xd(T,S){const R=[];for(let H=0;H<T.length;H++)R.push(T.charAt(H)),H<S.length&&R.push(S.charAt(H));return R.join("")}function Sa(T){return at.create("missing-app-config-values",{valueName:T})}Xd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class tp{constructor(S,R,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const te=function Jd(T){if(!T||!T.options)throw Sa("App Configuration Object");if(!T.name)throw Sa("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:R}=T;for(const H of S)if(!R[H])throw Sa(H);return{appName:T.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:te,installations:R,analyticsProvider:H}}_delete(){return Promise.resolve()}}function Aa(T){return xa.apply(this,arguments)}function xa(){return(xa=(0,L.Z)(function*(T){var S;try{T.swRegistration=yield navigator.serviceWorker.register(Cu,{scope:wi}),T.swRegistration.update().catch(()=>{})}catch(R){throw at.create("failed-service-worker-registration",{browserErrorMessage:null===(S=R)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function yc(T,S){return Il.apply(this,arguments)}function Il(){return(Il=(0,L.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield Aa(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw at.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function Au(T,S){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,L.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=lo)})).apply(this,arguments)}function xu(){return(xu=(0,L.Z)(function*(T,S){if(!navigator)throw at.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw at.create("permission-blocked");return yield Au(T,S?.vapidKey),yield yc(T,S?.serviceWorkerRegistration),Vo(T)})).apply(this,arguments)}function vc(T,S,R){return bc.apply(this,arguments)}function bc(){return(bc=(0,L.Z)(function*(T,S,R){const H=wc(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:R[Iu],message_name:R[yl],message_time:R[vl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function wc(T){switch(T){case xs.NOTIFICATION_CLICKED:return"notification_open";case xs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Mu(){return(Mu=(0,L.Z)(function*(T,S){const R=S.data;if(!R.isFirebaseMessaging)return;T.onMessageHandler&&R.messageType===xs.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(hr(R)):T.onMessageHandler.next(hr(R)));const H=R.data;Ki(H)&&"1"===H[Jf]&&(yield vc(T,R.messageType,H))})).apply(this,arguments)}const Cc="@firebase/messaging",Rs=T=>{const S=new tp(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Ec(T,S){return Mu.apply(this,arguments)}(S,R)),S},hn=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:H=>function Dl(T,S){return xu.apply(this,arguments)}(S,H)}};function th(){return ku.apply(this,arguments)}function ku(){return(ku=(0,L.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function eh(){(0,pe._registerComponent)(new ye.wA("messaging",Rs,"PUBLIC")),(0,pe._registerComponent)(new ye.wA("messaging-internal",hn,"PRIVATE")),(0,pe.registerVersion)(Cc,"0.9.16"),(0,pe.registerVersion)(Cc,"0.9.16","esm2017")}();const Ru="analytics",jo="firebase_id",Ra="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$o="https://www.googletagmanager.com/gtag/js",fr=new oe.Yd("@firebase/analytics");function ih(T){return Promise.all(T.map(S=>S.catch(R=>R)))}function Ig(T,S){const R=document.createElement("script");R.src=`${$o}?l=${T}&id=${S}`,R.async=!0,document.head.appendChild(R)}function sp(T,S,R,H,te,ue){return Go.apply(this,arguments)}function Go(){return(Go=(0,L.Z)(function*(T,S,R,H,te,ue){const Ae=H[te];try{if(Ae)yield S[Ae];else{const ht=(yield ih(R)).find(Dt=>Dt.measurementId===te);ht&&(yield S[ht.appId])}}catch(Ye){fr.error(Ye)}T("config",te,ue)})).apply(this,arguments)}function op(T,S,R,H,te){return zo.apply(this,arguments)}function zo(){return(zo=(0,L.Z)(function*(T,S,R,H,te){try{let ue=[];if(te&&te.send_to){let Ae=te.send_to;Array.isArray(Ae)||(Ae=[Ae]);const Ye=yield ih(R);for(const ht of Ae){const Dt=Ye.find(lt=>lt.measurementId===ht),At=Dt&&S[Dt.appId];if(!At){ue=[];break}ue.push(At)}}0===ue.length&&(ue=Object.values(S)),yield Promise.all(ue),T("event",H,te||{})}catch(ue){fr.error(ue)}})).apply(this,arguments)}function lp(){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes($o))return S;return null}const Zi=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),sh=new class Yi{constructor(S={},R=1e3){this.throttleMetadata=S,this.intervalMillis=R}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,R){this.throttleMetadata[S]=R}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function cp(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function nn(T){return Os.apply(this,arguments)}function Os(){return(Os=(0,L.Z)(function*(T){var S;const{appId:R,apiKey:H}=T,te={method:"GET",headers:cp(H)},ue=Ra.replace("{app-id}",R),Ae=yield fetch(ue,te);if(200!==Ae.status&&304!==Ae.status){let Ye="";try{const ht=yield Ae.json();null!==(S=ht.error)&&void 0!==S&&S.message&&(Ye=ht.error.message)}catch{}throw Zi.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:Ye})}return Ae.json()})).apply(this,arguments)}function Ue(T){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,L.Z)(function*(T,S=sh,R){const{appId:H,apiKey:te,measurementId:ue}=T.options;if(!H)throw Zi.create("no-app-id");if(!te){if(ue)return{measurementId:ue,appId:H};throw Zi.create("no-api-key")}const Ae=S.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Mc;return setTimeout((0,L.Z)(function*(){Ye.abort()}),void 0!==R?R:6e4),ir({appId:H,apiKey:te,measurementId:ue},Ae,Ye,S)})).apply(this,arguments)}function ir(T,S,R){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,L.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:R},H,te=sh){var ue,Ae;const{appId:Ye,measurementId:ht}=T;try{yield Sl(H,S)}catch(Dt){if(ht)return fr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${null===(ue=Dt)||void 0===ue?void 0:ue.message}]`),{appId:Ye,measurementId:ht};throw Dt}try{const Dt=yield nn(T);return te.deleteThrottleMetadata(Ye),Dt}catch(Dt){const At=Dt;if(!xc(At)){if(te.deleteThrottleMetadata(Ye),ht)return fr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${At?.message}]`),{appId:Ye,measurementId:ht};throw Dt}const lt=503===Number(null===(Ae=At?.customData)||void 0===Ae?void 0:Ae.httpStatus)?(0,le.$s)(R,te.intervalMillis,30):(0,le.$s)(R,te.intervalMillis),mt={throttleEndTimeMillis:Date.now()+lt,backoffCount:R+1};return te.setThrottleMetadata(Ye,mt),fr.debug(`Calling attemptFetch again in ${lt} millis`),ir(T,mt,H,te)}})).apply(this,arguments)}function Sl(T,S){return new Promise((R,H)=>{const te=Math.max(S-Date.now(),0),ue=setTimeout(R,te);T.addEventListener(()=>{clearTimeout(ue),H(Zi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function xc(T){if(!(T instanceof le.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Mc{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let kc,Ii;function qo(){return(qo=(0,L.Z)(function*(T,S,R,H,te){if(te&&te.global)T("event",R,H);else{const ue=yield S;T("event",R,Object.assign(Object.assign({},H),{send_to:ue}))}})).apply(this,arguments)}function Pu(T){Ii=T}function Pc(T){kc=T}function Di(){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,L.Z)(function*(){var T;if(!(0,le.hl)())return fr.warn(Zi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(S){return fr.warn(Zi.create("indexeddb-unavailable",{errorInfo:null===(T=S)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function Ns(){return(Ns=(0,L.Z)(function*(T,S,R,H,te,ue,Ae){var Ye;const ht=Ue(T);ht.then(mr=>{R[mr.measurementId]=mr.appId,T.options.measurementId&&mr.measurementId!==T.options.measurementId&&fr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${mr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mr=>fr.error(mr)),S.push(ht);const Dt=Di().then(mr=>{if(mr)return H.getId()}),[At,lt]=yield Promise.all([ht,Dt]);lp()||Ig(ue,At.measurementId),Ii&&(te("consent","default",Ii),Pu(void 0)),te("js",new Date);const mt=null!==(Ye=Ae?.config)&&void 0!==Ye?Ye:{};return mt.origin="firebase",mt.update=!0,null!=lt&&(mt[jo]=lt),te("config",At.measurementId,mt),kc&&(te("set",kc),Pc(void 0)),At.measurementId})).apply(this,arguments)}class ps{constructor(S){this.app=S}_delete(){return delete zr[this.app.options.appId],Promise.resolve()}}let zr={},Ti=[];const ms={};let mo,yn,po="dataLayer",Qt=!1;function gs(T,S,R){!function Cr(){const T=[];if((0,le.ru)()&&T.push("This is a browser extension environment."),(0,le.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((H,te)=>`(${te+1}) ${H}`).join(" "),R=Zi.create("invalid-analytics-context",{errorInfo:S});fr.warn(R.message)}}();const H=T.options.appId;if(!H)throw Zi.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Zi.create("no-api-key");fr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zr[H])throw Zi.create("already-exists",{id:H});if(!Qt){!function Dg(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(po);const{wrappedGtag:ue,gtagCore:Ae}=function ap(T,S,R,H,te){let ue=function(...Ae){window[H].push(arguments)};return window[te]&&"function"==typeof window[te]&&(ue=window[te]),window[te]=function Sc(T,S,R,H){function ue(){return(ue=(0,L.Z)(function*(Ae,Ye,ht){try{"event"===Ae?yield op(T,S,R,Ye,ht):"config"===Ae?yield sp(T,S,R,H,Ye,ht):"consent"===Ae?T("consent","update",ht):T("set",Ye)}catch(Dt){fr.error(Dt)}})).apply(this,arguments)}return function te(Ae,Ye,ht){return ue.apply(this,arguments)}}(ue,T,S,R),{gtagCore:ue,wrappedGtag:window[te]}}(zr,Ti,ms,po,"gtag");yn=ue,mo=Ae,Qt=!0}return zr[H]=function Ko(T,S,R,H,te,ue,Ae){return Ns.apply(this,arguments)}(T,Ti,ms,S,mo,po,R),new ps(T)}function Pa(){return sr.apply(this,arguments)}function sr(){return(sr=(0,L.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const oh="@firebase/analytics";!function vn(){(0,pe._registerComponent)(new ye.wA(Ru,(S,{options:R})=>gs(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,pe._registerComponent)(new ye.wA("analytics-internal",function T(S){try{const R=S.getProvider(Ru).getImmediate();return{logEvent:(H,te,ue)=>function Ml(T,S,R,H){T=(0,le.m9)(T),function Ou(T,S,R,H,te){return qo.apply(this,arguments)}(yn,zr[T.app.options.appId],S,R,H).catch(te=>fr.error(te))}(R,H,te,ue)}}catch(R){throw Zi.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,pe.registerVersion)(oh,"0.8.0"),(0,pe.registerVersion)(oh,"0.8.0","esm2017")}();var Nc=V(4408),Nr=V(7565);const Ls=new class Yo extends Nr.v{}(class Zo extends Nc.o{constructor(S,R){super(S,R),this.scheduler=S,this.work=R}schedule(S,R=0){return R>0?super.schedule(S,R):(this.delay=R,this.state=S,this.scheduler.flush(this),this)}execute(S,R){return R>0||this.closed?super.execute(S,R):this._execute(S,R)}requestAsyncId(S,R,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(S,R,H):S.flush(this)}});var Vu=V(4986),Fc=V(8505),Vs=V(5363),Fr=V(9468);const Bu=new u.GfV("7.4.1"),go="__angularfire_symbol__analyticsIsSupportedValue",ah="__angularfire_symbol__analyticsIsSupported",Na="__angularfire_symbol__remoteConfigIsSupportedValue",Lc="__angularfire_symbol__remoteConfigIsSupported",Uu="__angularfire_symbol__messagingIsSupportedValue",Hu="__angularfire_symbol__messagingIsSupported";function Fa(T,S,R){if(S){if(1===S.length)return S[0];const ue=S.filter(Ae=>Ae.app===R);if(1===ue.length)return ue[0]}return R.container.getProvider(T).getImmediate({optional:!0})}globalThis[ah]||(globalThis[ah]=Pa().then(T=>globalThis[go]=T).catch(()=>globalThis[go]=!1)),globalThis[Hu]||(globalThis[Hu]=th().then(T=>globalThis[Uu]=T).catch(()=>globalThis[Uu]=!1)),globalThis[Lc]||(globalThis[Lc]=uc().then(T=>globalThis[Na]=T).catch(()=>globalThis[Na]=!1));const Qo=(T,S)=>{const R=S?[S]:(0,re.C6)(),H=[];return R.forEach(te=>{te.container.getProvider(T).instances.forEach(Ae=>{H.includes(Ae)||H.push(Ae)})}),H};function Si(){}class Bs{constructor(S,R=Ls){this.zone=S,this.delegate=R}now(){return this.delegate.now()}schedule(S,R,H){const te=this.zone;return this.delegate.schedule(function(Ae){te.runGuarded(()=>{S.apply(this,[Ae])})},R,H)}}class La{constructor(S){this.zone=S,this.task=null}call(S,R){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Si,{},Si,Si)),R.pipe((0,Fc.b)({next:H,complete:H,error:H})).subscribe(S).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let hp=(()=>{class T{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Bs(Zone.current)),this.insideAngular=R.run(()=>new Bs(Zone.current,Vu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(R){return new(R||T)(u.LFG(u.R0b))},T.\u0275prov=u.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Us(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Va(T){return T.pipe((0,Vs.Q)(Us().outsideAngular))}function Vc(T){return Us(),function Zn(T){return function(R){return(R=R.lift(new La(T.ngZone))).pipe((0,Fr.R)(T.outsideAngular),(0,Vs.Q)(T.insideAngular))}}(Us())(T)}},2090:(ft,xe,V)=>{V.d(xe,{$s:()=>dr,BH:()=>Ge,DV:()=>en,Dv:()=>fs,G6:()=>ze,GJ:()=>rn,L:()=>me,LL:()=>fe,Mn:()=>Te,Pz:()=>Gt,Sg:()=>Me,UG:()=>ge,UI:()=>us,US:()=>ye,Wj:()=>gi,Yr:()=>je,ZB:()=>G,ZR:()=>Ee,b$:()=>it,cI:()=>Xt,d:()=>Re,dS:()=>Jt,eu:()=>Ie,g5:()=>L,gK:()=>Bn,gQ:()=>$i,h$:()=>oe,hl:()=>q,hu:()=>re,jU:()=>be,lb:()=>ko,m9:()=>si,ne:()=>bt,p$:()=>z,pd:()=>ri,r3:()=>Hr,ru:()=>Je,tV:()=>ve,uI:()=>$e,ug:()=>qe,vZ:()=>mi,w1:()=>Ce,w9:()=>gn,xO:()=>ds,xb:()=>zt,z$:()=>ke,zI:()=>ee,zd:()=>no});const re=function($,W){if(!$)throw L(W)},L=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},pe=function($){const W=[];let j=0;for(let K=0;K<$.length;K++){let Y=$.charCodeAt(K);Y<128?W[j++]=Y:Y<2048?(W[j++]=Y>>6|192,W[j++]=63&Y|128):55296==(64512&Y)&&K+1<$.length&&56320==(64512&$.charCodeAt(K+1))?(Y=65536+((1023&Y)<<10)+(1023&$.charCodeAt(++K)),W[j++]=Y>>18|240,W[j++]=Y>>12&63|128,W[j++]=Y>>6&63|128,W[j++]=63&Y|128):(W[j++]=Y>>12|224,W[j++]=Y>>6&63|128,W[j++]=63&Y|128)}return W},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,W){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let Y=0;Y<$.length;Y+=3){const Oe=$[Y],We=Y+1<$.length,pt=We?$[Y+1]:0,wn=Y+2<$.length,tn=wn?$[Y+2]:0;let $t=(15&pt)<<2|tn>>6,Sn=63&tn;wn||(Sn=64,We||($t=64)),K.push(j[Oe>>2],j[(3&Oe)<<4|pt>>4],j[$t],j[Sn])}return K.join("")},encodeString($,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa($):this.encodeByteArray(pe($),W)},decodeString($,W){return this.HAS_NATIVE_SUPPORT&&!W?atob($):function($){const W=[];let j=0,K=0;for(;j<$.length;){const Y=$[j++];if(Y<128)W[K++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Oe=$[j++];W[K++]=String.fromCharCode((31&Y)<<6|63&Oe)}else if(Y>239&&Y<365){const wn=((7&Y)<<18|(63&$[j++])<<12|(63&$[j++])<<6|63&$[j++])-65536;W[K++]=String.fromCharCode(55296+(wn>>10)),W[K++]=String.fromCharCode(56320+(1023&wn))}else{const Oe=$[j++],We=$[j++];W[K++]=String.fromCharCode((15&Y)<<12|(63&Oe)<<6|63&We)}}return W.join("")}(this.decodeStringToByteArray($,W))},decodeStringToByteArray($,W){this.init_();const j=W?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let Y=0;Y<$.length;){const Oe=j[$.charAt(Y++)],pt=Y<$.length?j[$.charAt(Y)]:0;++Y;const tn=Y<$.length?j[$.charAt(Y)]:64;++Y;const jt=Y<$.length?j[$.charAt(Y)]:64;if(++Y,null==Oe||null==pt||null==tn||null==jt)throw Error();K.push(Oe<<2|pt>>4),64!==tn&&(K.push(pt<<4&240|tn>>2),64!==jt&&K.push(tn<<6&192|jt))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},oe=function($){const W=pe($);return ye.encodeByteArray(W,!0)},me=function($){return oe($).replace(/\./g,"")},ve=function($){try{return ye.decodeString($,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function z($){return G(void 0,$)}function G($,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return W}for(const j in W)!W.hasOwnProperty(j)||!ne(j)||($[j]=G($[j],W[j]));return $}function ne($){return"__proto__"!==$}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,j)=>{this.resolve=W,this.reject=j})}wrapCallback(W){return(j,K)=>{j?this.reject(j):this.resolve(K),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(j):W(j,K))}}}function Me($,W){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=W||"demo-project",Y=$.iat||0,Oe=$.sub||$.user_id;if(!Oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const We=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:Y,exp:Y+3600,auth_time:Y,sub:Oe,user_id:Oe,firebase:{sign_in_provider:"custom",identities:{}}},$);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(We)),""].join(".")}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function $e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function be(){return"object"==typeof self&&self.self===self}function Je(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function it(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Re(){return ke().indexOf("Electron/")>=0}function Ce(){const $=ke();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Te(){return ke().indexOf("MSAppHost/")>=0}function je(){return!1}function ze(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){return"object"==typeof indexedDB}function Ie(){return new Promise(($,W)=>{try{let j=!0;const K="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(K);Y.onsuccess=()=>{Y.result.close(),j||self.indexedDB.deleteDatabase(K),$(!0)},Y.onupgradeneeded=()=>{j=!1},Y.onerror=()=>{var Oe;W((null===(Oe=Y.error)||void 0===Oe?void 0:Oe.message)||"")}}catch(j){W(j)}})}function ee(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ee extends Error{constructor(W,j,K){super(j),this.code=W,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,Ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fe.prototype.create)}}class fe{constructor(W,j,K){this.service=W,this.serviceName=j,this.errors=K}create(W,...j){const K=j[0]||{},Y=`${this.service}/${W}`,Oe=this.errors[W],We=Oe?function Fe($,W){return $.replace(vt,(j,K)=>{const Y=W[K];return null!=Y?String(Y):`<${K}?>`})}(Oe,K):"Error";return new Ee(Y,`${this.serviceName}: ${We} (${Y}).`,K)}}const vt=/\{\$([^}]+)}/g;function Xt($){return JSON.parse($)}function Gt($){return JSON.stringify($)}const Xe=function($){let W={},j={},K={},Y="";try{const Oe=$.split(".");W=Xt(ve(Oe[0])||""),j=Xt(ve(Oe[1])||""),Y=Oe[2],K=j.d||{},delete j.d}catch{}return{header:W,claims:j,data:K,signature:Y}},gn=function($){const j=Xe($).claims;return!!j&&"object"==typeof j&&j.hasOwnProperty("iat")},rn=function($){const W=Xe($).claims;return"object"==typeof W&&!0===W.admin};function Hr($,W){return Object.prototype.hasOwnProperty.call($,W)}function en($,W){if(Object.prototype.hasOwnProperty.call($,W))return $[W]}function zt($){for(const W in $)if(Object.prototype.hasOwnProperty.call($,W))return!1;return!0}function us($,W,j){const K={};for(const Y in $)Object.prototype.hasOwnProperty.call($,Y)&&(K[Y]=W.call(j,$[Y],Y,$));return K}function mi($,W){if($===W)return!0;const j=Object.keys($),K=Object.keys(W);for(const Y of j){if(!K.includes(Y))return!1;const Oe=$[Y],We=W[Y];if(Pr(Oe)&&Pr(We)){if(!mi(Oe,We))return!1}else if(Oe!==We)return!1}for(const Y of K)if(!j.includes(Y))return!1;return!0}function Pr($){return null!==$&&"object"==typeof $}function ds($){const W=[];for(const[j,K]of Object.entries($))Array.isArray(K)?K.forEach(Y=>{W.push(encodeURIComponent(j)+"="+encodeURIComponent(Y))}):W.push(encodeURIComponent(j)+"="+encodeURIComponent(K));return W.length?"&"+W.join("&"):""}function no($){const W={};return $.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[Y,Oe]=K.split("=");W[decodeURIComponent(Y)]=decodeURIComponent(Oe)}}),W}function ri($){const W=$.indexOf("?");if(!W)return"";const j=$.indexOf("#",W);return $.substring(W,j>0?j:void 0)}class $i{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,j){j||(j=0);const K=this.W_;if("string"==typeof W)for(let jt=0;jt<16;jt++)K[jt]=W.charCodeAt(j)<<24|W.charCodeAt(j+1)<<16|W.charCodeAt(j+2)<<8|W.charCodeAt(j+3),j+=4;else for(let jt=0;jt<16;jt++)K[jt]=W[j]<<24|W[j+1]<<16|W[j+2]<<8|W[j+3],j+=4;for(let jt=16;jt<80;jt++){const $t=K[jt-3]^K[jt-8]^K[jt-14]^K[jt-16];K[jt]=4294967295&($t<<1|$t>>>31)}let tn,wr,Y=this.chain_[0],Oe=this.chain_[1],We=this.chain_[2],pt=this.chain_[3],wn=this.chain_[4];for(let jt=0;jt<80;jt++){jt<40?jt<20?(tn=pt^Oe&(We^pt),wr=1518500249):(tn=Oe^We^pt,wr=1859775393):jt<60?(tn=Oe&We|pt&(Oe|We),wr=2400959708):(tn=Oe^We^pt,wr=3395469782);const $t=(Y<<5|Y>>>27)+tn+wn+wr+K[jt]&4294967295;wn=pt,pt=We,We=4294967295&(Oe<<30|Oe>>>2),Oe=Y,Y=$t}this.chain_[0]=this.chain_[0]+Y&4294967295,this.chain_[1]=this.chain_[1]+Oe&4294967295,this.chain_[2]=this.chain_[2]+We&4294967295,this.chain_[3]=this.chain_[3]+pt&4294967295,this.chain_[4]=this.chain_[4]+wn&4294967295}update(W,j){if(null==W)return;void 0===j&&(j=W.length);const K=j-this.blockSize;let Y=0;const Oe=this.buf_;let We=this.inbuf_;for(;Y<j;){if(0===We)for(;Y<=K;)this.compress_(W,Y),Y+=this.blockSize;if("string"==typeof W){for(;Y<j;)if(Oe[We]=W.charCodeAt(Y),++We,++Y,We===this.blockSize){this.compress_(Oe),We=0;break}}else for(;Y<j;)if(Oe[We]=W[Y],++We,++Y,We===this.blockSize){this.compress_(Oe),We=0;break}}this.inbuf_=We,this.total_+=j}digest(){const W=[];let j=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Y=this.blockSize-1;Y>=56;Y--)this.buf_[Y]=255&j,j/=256;this.compress_(this.buf_);let K=0;for(let Y=0;Y<5;Y++)for(let Oe=24;Oe>=0;Oe-=8)W[K]=this.chain_[Y]>>Oe&255,++K;return W}}function bt($,W){const j=new ii($,W);return j.subscribe.bind(j)}class ii{constructor(W,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{W(this)}).catch(K=>{this.error(K)})}next(W){this.forEachObserver(j=>{j.next(W)})}error(W){this.forEachObserver(j=>{j.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,j,K){let Y;if(void 0===W&&void 0===j&&void 0===K)throw new Error("Missing Observer.");Y=function zn($,W){if("object"!=typeof $||null===$)return!1;for(const j of W)if(j in $&&"function"==typeof $[j])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:j,complete:K},void 0===Y.next&&(Y.next=hs),void 0===Y.error&&(Y.error=hs),void 0===Y.complete&&(Y.complete=hs);const Oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),Oe}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,W)}sendOne(W,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{j(this.observers[W])}catch(K){typeof console<"u"&&console.error&&console.error(K)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hs(){}const fs=function($,W,j,K){let Y;if(K<W?Y="at least "+W:K>j&&(Y=0===j?"none":"no more than "+j),Y)throw new Error($+" failed: Was called with "+K+(1===K?" argument.":" arguments.")+" Expects "+Y+".")};function Bn($,W){return`${$} failed: ${W} argument `}function gi($,W,j,K){if((!K||j)&&"function"!=typeof j)throw new Error(Bn($,W)+"must be a valid function.")}function ko($,W,j,K){if((!K||j)&&("object"!=typeof j||null===j))throw new Error(Bn($,W)+"must be a valid context object.")}const Jt=function($){const W=[];let j=0;for(let K=0;K<$.length;K++){let Y=$.charCodeAt(K);if(Y>=55296&&Y<=56319){const Oe=Y-55296;K++,re(K<$.length,"Surrogate pair missing trail surrogate."),Y=65536+(Oe<<10)+($.charCodeAt(K)-56320)}Y<128?W[j++]=Y:Y<2048?(W[j++]=Y>>6|192,W[j++]=63&Y|128):Y<65536?(W[j++]=Y>>12|224,W[j++]=Y>>6&63|128,W[j++]=63&Y|128):(W[j++]=Y>>18|240,W[j++]=Y>>12&63|128,W[j++]=Y>>6&63|128,W[j++]=63&Y|128)}return W},qe=function($){let W=0;for(let j=0;j<$.length;j++){const K=$.charCodeAt(j);K<128?W++:K<2048?W+=2:K>=55296&&K<=56319?(W+=4,j++):W+=3}return W};function dr($,W=1e3,j=2){const K=W*Math.pow(j,$),Y=Math.round(.5*K*(Math.random()-.5)*2);return Math.min(144e5,K+Y)}function si($){return $&&$._delegate?$._delegate:$}},5215:(ft,xe,V)=>{var u=V(4650);let re=null;function L(){return re}const oe=new u.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function ve(){return(0,u.LFG)(G)}()},providedIn:"platform"}),n})();const z=new u.OlP("Location Initialized");let G=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ge(){return new G((0,u.LFG)(oe))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function $e(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function be(){const n=(0,u.LFG)(oe).location;return new it((0,u.LFG)(me),n&&n.origin||"")}()},providedIn:"root"}),n})();const Je=new u.OlP("appBaseHref");let it=(()=>{class n extends ge{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+$e(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const l=this.prepareExternalUrl(i+$e(s));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){const l=this.prepareExternalUrl(i+$e(s));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(me),u.LFG(Je,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let l=this.prepareExternalUrl(i+$e(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){let l=this.prepareExternalUrl(i+$e(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(me),u.LFG(Je,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=ke(ze(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+$e(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=$e,n.joinWithSlash=Me,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(u.LFG(ge))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Te(){return new Ce((0,u.LFG)(ge))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}let oc=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class ml{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vi=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ml(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,l),Un(h,i)}});for(let i=0,s=r.length;i<s;i++){const h=r.get(i).context;h.index=i,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Un(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Un(n,e){n.context.$implicit=e.item}let Hn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new oi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class oi{constructor(){this.$implicit=null,this.ngIf=null}}function gl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class _l{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let so=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),qi=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new _l(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(so,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),xs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const Dn="browser";function Zd(n){return"server"===n}let wl=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new nr((0,u.LFG)(oe),window)}),n})();class nr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Po(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=fc(this.window.history)||fc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function fc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ms extends class No extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){re||(re=n)}(new Ms)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ei(){return wa=wa||document.querySelector("base"),wa?wa.getAttribute("href"):null}();return null==t?null:function El(n){uo=uo||document.createElement("a"),uo.setAttribute("href",n);const e=uo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){wa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Gd(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let uo,wa=null;const at=new u.OlP("TRANSITION_ID"),Du=[{provide:u.ip1,useFactory:function pc(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[at,oe,u.zs3],multi:!0}];let mc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Fo=new u.OlP("EventManagerPlugins");let Lo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const l=i[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Fo),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Ea{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let gc=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends gc{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Vt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Vt))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Vt(n){L().remove(n)}const Ca={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Vo=/%COMP%/g;function Ta(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ta(n,i,t):(i=i.replace(Vo,n),t.push(i))}return t}function _c(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ks=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new hr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ki(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new Xd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ta(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Lo),u.LFG(Se),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class hr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ca[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Uo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Uo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Ca[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ca[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,_c(r)):this.eventManager.addEventListener(e,t,_c(r))}}function Uo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ki extends hr{constructor(e,t,r,i){super(e),this.component=r;const s=Ta(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Cl(n){return"_ngcontent-%COMP%".replace(Vo,n)}(i+"-"+r.id),this.hostAttr=function Da(n){return"_nghost-%COMP%".replace(Vo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Xd extends hr{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ta(i.id,i.styles,[]);for(let l=0;l<s.length;l++){const h=document.createElement("style");h.textContent=s[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Jd=(()=>{class n extends Ea{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Sa=["alt","control","meta","shift"],Aa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xa={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},yc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Il=(()=>{class n extends Ea{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),l=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let l="";if(Sa.forEach(p=>{const y=r.indexOf(p);y>-1&&(r.splice(y,1),l+=p+".")}),l+=s,0!=r.length||0===s.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function Au(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&xa.hasOwnProperty(e)&&(e=xa[e]))}return Aa[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Sa.forEach(s=>{s!=i&&yc[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Mu=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:Dn},{provide:u.g9A,useValue:function vc(){Ms.makeCurrent()},multi:!0},{provide:oe,useFactory:function wc(){return(0,u.RDi)(document),document},deps:[]}]),Cc=new u.OlP(""),rr=[{provide:u.rWj,useClass:class Tu{addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let s=i.length,l=!1;const h=function(p){l=l||p,s--,0==s&&r(l)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],Rs=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function bc(){return new u.qLn},deps:[]},{provide:Fo,useClass:Jd,multi:!0,deps:[oe,u.R0b,u.Lbi]},{provide:Fo,useClass:Il,multi:!0,deps:[oe]},{provide:ks,useClass:ks,deps:[Lo,Se,u.AFp]},{provide:u.FYo,useExisting:ks},{provide:gc,useExisting:Se},{provide:Se,useClass:Se,deps:[oe]},{provide:Lo,useClass:Lo,deps:[Fo,u.R0b]},{provide:class Er{},useClass:mc,deps:[]},[]];let hn=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:at,useExisting:u.AFp},Du]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Cc,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[...Rs,...rr],imports:[xs,u.hGG]}),n})(),Ic=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function np(){return new Ic((0,u.LFG)(oe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Ac=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):u.LFG(sh),r},providedIn:"root"}),n})(),sh=(()=>{class n extends Ac{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case u.q3G.NONE:return r;case u.q3G.HTML:return(0,u.qzn)(r,"HTML")?(0,u.z3N)(r):(0,u.EiD)(this._doc,String(r)).toString();case u.q3G.STYLE:return(0,u.qzn)(r,"Style")?(0,u.z3N)(r):r;case u.q3G.SCRIPT:if((0,u.qzn)(r,"Script"))return(0,u.z3N)(r);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.qzn)(r,"URL")?(0,u.z3N)(r):(0,u.mCW)(String(r));case u.q3G.RESOURCE_URL:if((0,u.qzn)(r,"ResourceURL"))return(0,u.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,u.JVY)(t)}bypassSecurityTrustStyle(t){return(0,u.L6k)(t)}bypassSecurityTrustScript(t){return(0,u.eBb)(t)}bypassSecurityTrustUrl(t){return(0,u.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,u.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Yi(n){return new sh(n.get(oe))}(u.LFG(u.zs3)),r},providedIn:"root"}),n})();var nn=V(8996),Os=V(3269);function Ue(...n){const e=(0,Os.yG)(n);return(0,nn.D)(n,e)}var Wt=V(7579);class ir extends Wt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Wn=V(8306);const{isArray:Sl}=Array,{getPrototypeOf:xc,prototype:Mc,keys:kc}=Object;function Ou(n){if(1===n.length){const e=n[0];if(Sl(e))return{args:e,keys:null};if(function qo(n){return n&&"object"==typeof n&&xc(n)===Mc}(e)){const t=kc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var fo=V(4671),ot=V(4004);const{isArray:Rc}=Array;function Ps(n){return(0,ot.U)(e=>function Oa(n,e){return Rc(e)?n(...e):n(e)}(n,e))}function Al(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var In=V(5403),Oc=V(9672);function Ii(...n){const e=(0,Os.yG)(n),t=(0,Os.jO)(n),{args:r,keys:i}=Ou(n);if(0===r.length)return(0,nn.D)([],e);const s=new Wn.y(function Pu(n,e,t=fo.y){return r=>{Pc(e,()=>{const{length:i}=n,s=new Array(i);let l=i,h=i;for(let p=0;p<i;p++)Pc(e,()=>{const y=(0,nn.D)(n[p],e);let E=!1;y.subscribe((0,In.x)(r,D=>{s[p]=D,E||(E=!0,h--),h||r.next(t(s.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Al(i,l):fo.y));return t?s.pipe(Ps(t)):s}function Pc(n,e,t){n?(0,Oc.f)(t,n,e):e()}var Di=V(576);function Wo(n,e){const t=(0,Di.m)(n)?n:()=>n,r=i=>i.error(t());return new Wn.y(e?i=>e.schedule(r,0,i):r)}const Ns=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ps=V(8189);function Ti(...n){return function zr(){return(0,ps.J)(1)}()((0,nn.D)(n,(0,Os.yG)(n)))}var ms=V(8421);function po(n){return new Wn.y(e=>{(0,ms.Xf)(n()).subscribe(e)})}var Ar=V(515),mo=V(727),yn=V(4482);function Qt(){return(0,yn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,In.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class up extends Wn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,yn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mo.w0;const t=this.getSubject();e.add(this.source.subscribe((0,In.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mo.w0.EMPTY)}return e}refCount(){return Qt()(this)}}function Cr(n,e){return(0,yn.e)((t,r)=>{let i=null,s=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,In.x)(r,p=>{i?.unsubscribe();let y=0;const E=s++;(0,ms.Xf)(n(p,E)).subscribe(i=(0,In.x)(r,D=>r.next(e?e(p,D,E,y++):D),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function gs(n){return n<=0?()=>Ar.E:(0,yn.e)((e,t)=>{let r=0;e.subscribe((0,In.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Fs(...n){const e=(0,Os.yG)(n);return(0,yn.e)((t,r)=>{(e?Ti(n,t,e):Ti(n,t)).subscribe(r)})}function Tg(n,e,t,r,i){return(s,l)=>{let h=t,p=e,y=0;s.subscribe((0,In.x)(l,E=>{const D=y++;p=h?n(p,E,D):(h=!0,E),r&&l.next(p)},i&&(()=>{h&&l.next(p),l.complete()})))}}function Pa(n,e){return(0,yn.e)(Tg(n,e,arguments.length>=2,!0))}function sr(n,e){return(0,yn.e)((t,r)=>{let i=0;t.subscribe((0,In.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Qi(n){return(0,yn.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,In.x)(t,void 0,void 0,l=>{s=(0,ms.Xf)(n(l,Qi(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}var qr=V(5577);function xl(n,e){return(0,Di.m)(e)?(0,qr.z)(n,e,1):(0,qr.z)(n,1)}function Kn(n){return n<=0?()=>Ar.E:(0,yn.e)((e,t)=>{let r=[];e.subscribe((0,In.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Nu(n=Ml){return(0,yn.e)((e,t)=>{let r=!1;e.subscribe((0,In.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ml(){return new Ns}function Fu(n){return(0,yn.e)((e,t)=>{let r=!1;e.subscribe((0,In.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Mn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?sr((i,s)=>n(i,s,r)):fo.y,gs(1),t?Fu(e):Nu(()=>new Ns))}var vn=V(8505);function Zo(n){return(0,yn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Nr{constructor(e,t){this.id=e,this.url=t}}class Yo extends Nr{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ls extends Nr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Lu extends Nr{constructor(e,t,r){super(e,t),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vu extends Nr{constructor(e,t,r){super(e,t),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Fc extends Nr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vs extends Nr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fr extends Nr{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Bu extends Nr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class go extends Nr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ah{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Na{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Lc{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uu{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hu{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kl{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dp{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Lt="primary";class Fa{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Qo(n){return new Fa(n)}const Si="Redirecting to ",Bs="ngNavigationCancelingError";function La(n){const e=Error("NavigationCancelingError: "+(n||""));return e[Bs]=!0,e}function Us(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const l=r[s],h=n[s];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function or(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Va(n[i],e[i]))return!1;return!0}function Va(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Ba(n){return Array.prototype.concat.apply([],n)}function Vc(n){return n.length>0?n[n.length-1]:null}function pr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function _o(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,nn.D)(Promise.resolve(n)):Ue(n)}const T=!1,R={exact:function Ae(n,e,t){if(!Ai(n.segments,e.segments)||!At(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ae(n.children[r],e.children[r],t))return!1;return!0},subset:ht},H={exact:function ue(n,e){return or(n,e)},subset:function Ye(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Va(n[t],e[t]))},ignored:()=>!0};function te(n,e,t){return R[t.paths](n.root,e.root,t.matrixParams)&&H[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ht(n,e,t){return Dt(n,e,e.segments,t)}function Dt(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ai(i,t)||e.hasChildren()||!At(i,t,r))}if(n.segments.length===t.length){if(!Ai(n.segments,t)||!At(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!ht(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ai(n.segments,i)&&At(n.segments,i,r)&&n.children[Lt])&&Dt(n.children[Lt],e,s,r)}}function At(n,e,t){return e.every((r,i)=>H[t](n[i].parameters,r.parameters))}class lt{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qo(this.queryParams)),this._queryParamMap}toString(){return Ha.serialize(this)}}class mt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,pr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xi(this)}}class mr{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Qo(this.parameters)),this._parameterMap}toString(){return $u(this)}}function Ai(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ua{}class Ol{parse(e){const t=new Gu(e);return new lt(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${_s(e.root,!0)}`,r=function IE(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Bc(t)}=${Bc(i)}`).join("&"):`${Bc(t)}=${Bc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function sv(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ha=new Ol;function Xi(n){return n.segments.map(e=>$u(e)).join("/")}function _s(n,e){if(!n.hasChildren())return Xi(n);if(e){const t=n.children[Lt]?_s(n.children[Lt],!1):"",r=[];return pr(n.children,(i,s)=>{s!==Lt&&r.push(`${s}:${_s(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function xi(n,e){let t=[];return pr(n.children,(r,i)=>{i===Lt&&(t=t.concat(e(r,i)))}),pr(n.children,(r,i)=>{i!==Lt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Lt?[_s(n.children[Lt],!1)]:[`${i}:${_s(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${Xi(n)}/${t[0]}`:`${Xi(n)}/(${t.join("//")})`}}function ch(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bc(n){return ch(n).replace(/%3B/gi,";")}function fp(n){return ch(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ja(n){return decodeURIComponent(n)}function pp(n){return ja(n.replace(/\+/g,"%20"))}function $u(n){return`${fp(n.path)}${function Sg(n){return Object.keys(n).map(e=>`;${fp(e)}=${fp(n[e])}`).join("")}(n.parameters)}`}const Ag=/^[^\/()?;=#]+/;function mp(n){const e=n.match(Ag);return e?e[0]:""}const gp=/^[^=?&#]+/,xg=/^[^&#]+/;class Gu{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mt([],{}):new mt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new mt(e,t)),r}parseSegment(){const e=mp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,T);return this.capture(e),new mr(ja(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=mp(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=mp(this.remaining);i&&(r=i,this.capture(r))}e[ja(t)]=ja(r)}parseQueryParam(e){const t=function ov(n){const e=n.match(gp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function uh(n){const e=n.match(xg);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=pp(t),s=pp(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=mp(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new u.vHH(4010,T);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Lt);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[Lt]:new mt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,T)}}class Pl{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_p(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=_p(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=yp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return yp(e,this._root).map(t=>t.value)}}function _p(n,e){if(n===e.value)return e;for(const t of e.children){const r=_p(n,t);if(r)return r}return null}function yp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=yp(n,t);if(r.length)return r.unshift(e),r}return[]}class $a{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Xo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class zu extends Pl{constructor(e,t){super(e),this.snapshot=t,wp(this,e)}toString(){return this.snapshot.toString()}}function vp(n,e){const t=function Mg(n,e){const l=new dh([],{},{},"",{},Lt,e,null,n.root,-1,{});return new hh("",new $a(l,[]))}(n,e),r=new ir([new mr("",{})]),i=new ir({}),s=new ir({}),l=new ir({}),h=new ir(""),p=new Nl(r,i,l,h,s,Lt,e,t.root);return p.snapshot=t.root,new zu(new $a(p,[]),t)}class Nl{constructor(e,t,r,i,s,l,h,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=h,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ot.U)(e=>Qo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ot.U)(e=>Qo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ga(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function bp(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class dh{constructor(e,t,r,i,s,l,h,p,y,E,D,k){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=h,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=E,this._correctedLastPathIndex=k??E,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hh extends Pl{constructor(e,t){super(t),this.url=e,wp(this,t)}toString(){return Ep(this._root)}}function wp(n,e){e.value._routerState=n,e.children.forEach(t=>wp(n,t))}function Ep(n){const e=n.children.length>0?` { ${n.children.map(Ep).join(", ")} } `:"";return`${n.value}${e}`}function Hs(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,or(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),or(e.params,t.params)||n.params.next(t.params),function ju(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!or(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),or(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function yo(n,e){const t=or(n.params,e.params)&&function Rl(n,e){return Ai(n,e)&&n.every((t,r)=>or(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||yo(n.parent,e.parent))}function Uc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function kg(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Uc(n,r,i);return Uc(n,r)})}(n,e,t);return new $a(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>Uc(n,h)),l}}const r=function lv(n){return new Nl(new ir(n.url),new ir(n.params),new ir(n.queryParams),new ir(n.fragment),new ir(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Uc(n,s));return new $a(r,i)}}function fh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function js(n){return"object"==typeof n&&null!=n&&n.outlets}function Ip(n,e,t,r,i){let s={};if(r&&pr(r,(h,p)=>{s[p]=Array.isArray(h)?h.map(y=>`${y}`):`${h}`}),n===e)return new lt(t,s,i);const l=Rg(n,e,t);return new lt(l,s,i)}function Rg(n,e,t){const r={};return pr(n.children,(i,s)=>{r[s]=i===e?t:Rg(i,e,t)}),new mt(n.segments,r)}class ph{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fh(r[0]))throw new u.vHH(4003,false);const i=r.find(js);if(i&&i!==Vc(r))throw new u.vHH(4004,false)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Hc(n,e,t){if(n||(n=new mt([],{})),0===n.segments.length&&n.hasChildren())return Ku(n,e,t);const r=function mh(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const l=n.segments[i],h=t[r];if(js(h))break;const p=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!dv(p,y,l))return s;r+=2}else{if(!dv(p,{},l))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new mt(n.segments.slice(0,r.pathIndex),{});return s.children[Lt]=new mt(n.segments.slice(r.pathIndex),n.children),Ku(s,0,i)}return r.match&&0===i.length?new mt(n.segments,{}):r.match&&!n.hasChildren()?gh(n,e,t):r.match?Ku(n,0,i):gh(n,e,t)}function Ku(n,e,t){if(0===t.length)return new mt(n.segments,{});{const r=function ys(n){return js(n[0])?n[0].outlets:{[Lt]:n}}(t),i={};return pr(r,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[l]=Hc(n.children[l],e,s))}),pr(n.children,(s,l)=>{void 0===r[l]&&(i[l]=s)}),new mt(n.segments,i)}}function gh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(js(s)){const p=TE(s.outlets);return new mt(r,p)}if(0===i&&fh(t[0])){r.push(new mr(n.segments[e].path,uv(t[0]))),i++;continue}const l=js(s)?s.outlets[Lt]:`${s}`,h=i<t.length-1?t[i+1]:null;l&&h&&fh(h)?(r.push(new mr(l,uv(h))),i+=2):(r.push(new mr(l,{})),i++)}return new mt(r,{})}function TE(n){const e={};return pr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=gh(new mt([],{}),0,t))}),e}function uv(n){const e={};return pr(n,(t,r)=>e[r]=`${t}`),e}function dv(n,e,t){return n==t.path&&or(e,t.parameters)}class Dp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new za,this.attachRef=null}}class za{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Dp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}const qa=!1;let Tp=(()=>{class n{constructor(t,r,i,s,l){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=i||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,qa);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,qa);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,qa);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new u.vHH(4013,qa);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new SE(t,h,i.injector);if(r&&function _h(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(l);this.activated=i.createComponent(y,i.length,p)}else this.activated=i.createComponent(l,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(za),u.Y36(u.s_b),u.$8M("name"),u.Y36(u.sBO),u.Y36(u.lqb))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class SE{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Nl?this.route:e===za?this.childContexts:this.parent.get(e,t)}}let yh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},dependencies:[Tp],encapsulation:2}),n})();function Pg(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function xp(n){const e=n.children&&n.children.map(xp),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=yh),t}function vs(n){return n.outlet||Lt}function Wa(n,e){const t=n.filter(r=>vs(r)===e);return t.push(...n.filter(r=>vs(r)!==e)),t}function Mp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class pv{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Hs(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Xo(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,i[l],r),delete i[l]}),pr(i,(s,l)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Xo(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Xo(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Xo(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new kl(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Uu(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Hs(i),i===s)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Hs(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=Mp(i.snapshot),p=h?.get(u._Vd)??null;l.attachRef=null,l.route=i,l.resolver=p,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}function wh(n){return"function"==typeof n}function Fl(n){return n instanceof lt}const Zu=Symbol("INITIAL_VALUE");function Jo(){return Cr(n=>Ii(n.map(e=>e.pipe(gs(1),Fs(Zu)))).pipe(Pa((e,t)=>{let r=!1;return t.reduce((i,s,l)=>i!==Zu?i:(s===Zu&&(r=!0),r||!1!==s&&l!==t.length-1&&!Fl(s)?i:s),e)},Zu),sr(e=>e!==Zu),(0,ot.U)(e=>Fl(e)?e:!0===e),gs(1)))}const jc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Wr(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...jc}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Us)(t,n,e);if(!i)return{...jc};const s={};pr(i.posParams,(h,p)=>{s[p]=h.path});const l=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Ka(n,e,t,r,i="corrected"){if(t.length>0&&function kp(n,e,t){return t.some(r=>Ch(n,e,r)&&vs(r)!==Lt)}(n,t,r)){const l=new mt(e,function Vg(n,e,t,r){const i={};i[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&vs(s)!==Lt){const l=new mt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[vs(s)]=l}return i}(n,e,r,new mt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function Rp(n,e,t){return t.some(r=>Ch(n,e,r))}(n,t,r)){const l=new mt(n.segments,function Lg(n,e,t,r,i,s){const l={};for(const h of r)if(Ch(n,t,h)&&!i[vs(h)]){const p=new mt([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,l[vs(h)]=p}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const s=new mt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Ch(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Op(n,e,t,r){return!!(vs(n)===r||r!==Lt&&Ch(e,t,n))&&("**"===n.path||Wr(e,n,t).matched)}function Ih(n,e,t){return 0===e.length&&!n.children[t]}const $s=!1;class Yu{constructor(e){this.segmentGroup=e||null}}class Bg{constructor(e){this.urlTree=e}}function $c(n){return Wo(new Yu(n))}function Ug(n){return Wo(new Bg(n))}class Dh{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Ka(this.urlTree.root,[],[],this.config).segmentGroup,t=new mt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Lt).pipe((0,ot.U)(s=>this.createUrlTree(Tn(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qi(s=>{if(s instanceof Bg)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Yu?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Lt).pipe((0,ot.U)(i=>this.createUrlTree(Tn(i),e.queryParams,e.fragment))).pipe(Qi(i=>{throw i instanceof Yu?this.noMatchError(i):i}))}noMatchError(e){return new u.vHH(4002,$s)}createUrlTree(e,t,r){const i=e.segments.length>0?new mt([],{[Lt]:e}):e;return new lt(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ot.U)(s=>new mt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,nn.D)(i).pipe(xl(s=>{const l=r.children[s],h=Wa(t,s);return this.expandSegmentGroup(e,h,l,s).pipe((0,ot.U)(p=>({segment:p,outlet:s})))}),Pa((s,l)=>(s[l.outlet]=l.segment,s),{}),function oh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?sr((i,s)=>n(i,s,r)):fo.y,Kn(1),t?Fu(e):Nu(()=>new Ns))}())}expandSegment(e,t,r,i,s,l){return(0,nn.D)(r).pipe(xl(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,l).pipe(Qi(y=>{if(y instanceof Yu)return Ue(null);throw y}))),Mn(h=>!!h),Qi((h,p)=>{if(h instanceof Ns||"EmptyError"===h.name)return Ih(t,i,s)?Ue(new mt([],{})):$c(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,l,h){return Op(i,t,s,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l):$c(t):$c(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ug(s):this.lineralizeSegments(r,s).pipe((0,qr.z)(l=>{const h=new mt(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){const{matched:h,consumedSegments:p,remainingSegments:y,positionalParamSegments:E}=Wr(t,i,s);if(!h)return $c(t);const D=this.applyRedirectCommands(p,i.redirectTo,E);return i.redirectTo.startsWith("/")?Ug(D):this.lineralizeSegments(i,D).pipe((0,qr.z)(k=>this.expandSegment(e,t,r,k.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return e=Pg(r,e),r.loadChildren?(r._loadedRoutes?Ue({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ot.U)(D=>(r._loadedRoutes=D.routes,r._loadedInjector=D.injector,new mt(i,{})))):Ue(new mt(i,{}));const{matched:l,consumedSegments:h,remainingSegments:p}=Wr(t,r,i);return l?(e=Pg(r,e),this.getChildConfig(e,r,i).pipe((0,qr.z)(E=>{const D=E.injector??e,k=E.routes,{segmentGroup:N,slicedSegments:B}=Ka(t,h,p,k),J=new mt(N.segments,N.children);if(0===B.length&&J.hasChildren())return this.expandChildren(D,k,J).pipe((0,ot.U)(nt=>new mt(h,nt)));if(0===k.length&&0===B.length)return Ue(new mt(h,{}));const ce=vs(r)===s;return this.expandSegment(D,J,k,B,ce?Lt:s,!0).pipe((0,ot.U)(Ke=>new mt(h.concat(Ke.segments),Ke.children)))}))):$c(t)}getChildConfig(e,t,r){return t.children?Ue({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ue({routes:t._loadedRoutes,injector:t._loadedInjector}):this.runCanLoadGuards(e,t,r).pipe((0,qr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,vn.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function En(n){return Wo(La($s))}())):Ue({routes:[],injector:e})}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Ue(i.map(l=>{const h=e.get(l);return _o(function gv(n){return n&&wh(n.canLoad)}(h)?h.canLoad(t,r):h(t,r))})).pipe(Jo(),(0,vn.b)(l=>{if(!Fl(l))return;const h=La(Si+this.urlSerializer.serialize(l));throw h.url=l,h}),(0,ot.U)(l=>!0===l)):Ue(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ue(r);if(i.numberOfChildren>1||!i.children[Lt])return Wo(new u.vHH(4e3,$s));i=i.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new lt(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return pr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let l={};return pr(t.children,(h,p)=>{l[p]=this.createSegmentGroup(e,h,r,i)}),new mt(s,l)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new u.vHH(4001,$s);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Tn(n){const e={};for(const r of Object.keys(n.children)){const s=Tn(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Pp(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new mt(n.segments.concat(e.segments),e.children)}return n}(new mt(n.segments,e))}class Xu{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ju{constructor(e,t){this.component=e,this.route=t}}function _v(n,e,t){const r=n._root;return Gc(r,e?e._root:null,t,[r.value])}function Sh(n,e,t){return(Mp(e)??t).get(n)}function Gc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Xo(e);return n.children.forEach(l=>{(function yv(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const p=function jg(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ai(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ai(n.url,e.url)||!or(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yo(n,e)||!or(n.queryParams,e.queryParams);default:return!yo(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new Xu(r)):(s.data=l.data,s._resolvedData=l._resolvedData),Gc(n,e,s.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Ju(h.outlet.component,l))}else l&&v(e,h,i),i.canActivateChecks.push(new Xu(r)),Gc(n,null,s.component?h?h.children:null:t,r,i)})(l,s[l.value.outlet],t,r.concat([l.value]),i),delete s[l.value.outlet]}),pr(s,(l,h)=>v(l,t.getContext(h),i)),i}function v(n,e,t){const r=Xo(n),i=n.value;pr(r,(s,l)=>{v(s,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Ju(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Et{}function _t(n){return new Wn.y(e=>e.error(n))}class gr{constructor(e,t,r,i,s,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=l}recognize(){const e=Ka(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Lt);if(null===t)return null;const r=new dh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new $a(r,t),s=new hh(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=Ga(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const l=t.children[s],h=Wa(e,s),p=this.processSegmentGroup(h,l,s);if(null===p)return null;r.push(...p)}const i=xh(r);return function zc(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const l=this.processSegmentAgainstRoute(s,t,r,i);if(null!==l)return l}return Ih(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Op(e,t,r,i))return null;let s,l=[],h=[];if("**"===e.path){const N=r.length>0?Vc(r).parameters:{},B=Fp(t)+r.length;s=new dh(r,N,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qc(e),vs(e),e.component??e._loadedComponent??null,e,Za(t),B,ed(e),B)}else{const N=Wr(t,e,r);if(!N.matched)return null;l=N.consumedSegments,h=N.remainingSegments;const B=Fp(t)+l.length;s=new dh(l,N.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qc(e),vs(e),e.component??e._loadedComponent??null,e,Za(t),B,ed(e),B)}const p=function Ah(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:y,slicedSegments:E}=Ka(t,l,h,p.filter(N=>void 0===N.redirectTo),this.relativeLinkResolution);if(0===E.length&&y.hasChildren()){const N=this.processChildren(p,y);return null===N?null:[new $a(s,N)]}if(0===p.length&&0===E.length)return[new $a(s,[])];const D=vs(e)===i,k=this.processSegment(p,y,E,D?Lt:i);return null===k?null:[new $a(s,k)]}}function Np(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function xh(n){const e=[],t=new Set;for(const r of n){if(!Np(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=xh(r.children);e.push(new $a(r.value,i))}return e.filter(r=>!t.has(r))}function Za(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Fp(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function qc(n){return n.data||{}}function ed(n){return n.resolve||{}}const kh=Symbol("RouteTitle");function ME(n){return"string"==typeof n.title||null===n.title}function Ev(n){return Cr(e=>{const t=n(e);return t?(0,nn.D)(t).pipe((0,ot.U)(()=>e)):Ue(e)})}class XS extends class QS{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Gg=new u.OlP("ROUTES");let Lp=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ue(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=_o(t.loadComponent()).pipe((0,vn.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Zo(()=>{this.componentLoaders.delete(t)})),i=new up(r,()=>new Wt.x).pipe(Qt());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ue({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ot.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,y,E=!1;Array.isArray(h)?y=h:(p=h.create(t).injector,y=Ba(p.get(Gg,[],u.XFs.Self|u.XFs.Optional)));return{routes:y.map(xp),injector:p}}),Zo(()=>{this.childrenLoaders.delete(r)})),l=new up(s,()=>new Wt.x).pipe(Qt());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return _o(t()).pipe((0,qr.z)(r=>r instanceof u.YKP||Array.isArray(r)?Ue(r):(0,nn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3),u.LFG(u.Sil))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Cv{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function JS(n){throw n}function PE(n,e,t){return e.parse("/")}const NE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},td={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Kr=(()=>{class n{constructor(t,r,i,s,l,h,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Wt.x,this.errorHandler=JS,this.malformedUriErrorHandler=PE,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ue(void 0),this.urlHandlingStrategy=new Cv,this.routeReuseStrategy=new XS,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(Lp),this.configLoader.onLoadEndListener=k=>this.triggerEvent(new Na(k)),this.configLoader.onLoadStartListener=k=>this.triggerEvent(new ah(k)),this.ngModule=l.get(u.h0i),this.console=l.get(u.c2e);const D=l.get(u.R0b);this.isNgZoneEnabled=D instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function S(){return new lt(new mt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vp(this.currentUrlTree,this.rootComponentType),this.transitions=new ir({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(sr(i=>0!==i.id),(0,ot.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Cr(i=>{let s=!1,l=!1;return Ue(i).pipe((0,vn.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Cr(h=>{const p=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return LE(h.source)&&(this.browserUrlTree=h.extractedUrl),Ue(h).pipe(Cr(D=>{const k=this.transitions.getValue();return r.next(new Yo(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),k!==this.transitions.getValue()?Ar.E:Promise.resolve(D)}),function ea(n,e,t,r){return Cr(i=>function Qu(n,e,t,r,i){return new Dh(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ot.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,vn.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects}}),function $g(n,e,t,r,i){return(0,qr.z)(s=>function xr(n,e,t,r,i="emptyOnly",s="legacy"){try{const l=new gr(n,e,t,r,i,s).recognize();return null===l?_t(new Et):Ue(l)}catch(l){return _t(l)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe((0,ot.U)(l=>({...s,targetSnapshot:l}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,vn.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const N=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(N,D)}this.browserUrlTree=D.urlAfterRedirects}const k=new Fc(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(k)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:N,source:B,restoredState:J,extras:ce}=h,Be=new Yo(k,this.serializeUrl(N),B,J);r.next(Be);const Ke=vp(N,this.rootComponentType).snapshot;return Ue({...h,targetSnapshot:Ke,urlAfterRedirects:N,extras:{...ce,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),Ar.E}),(0,vn.b)(h=>{const p=new Vs(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,ot.U)(h=>({...h,guards:_v(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function m(n,e){return(0,qr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?Ue({...t,guardsResult:!0}):function _(n,e,t,r){return(0,nn.D)(n).pipe((0,qr.z)(i=>function He(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ue(s.map(h=>{const p=Sh(h,e,i);return _o(function Eh(n){return n&&wh(n.canDeactivate)}(p)?p.canDeactivate(n,e,t,r):p(n,e,t,r)).pipe(Mn())})).pipe(Jo()):Ue(!0)}(i.component,i.route,t,e,r)),Mn(i=>!0!==i,!0))}(l,r,i,n).pipe((0,qr.z)(h=>h&&function mv(n){return"boolean"==typeof n}(h)?function w(n,e,t,r){return(0,nn.D)(e).pipe(xl(i=>Ti(function P(n,e){return null!==n&&e&&e(new Lc(n)),Ue(!0)}(i.route.parent,r),function M(n,e){return null!==n&&e&&e(new Hu(n)),Ue(!0)}(i.route,r),function de(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function Th(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>po(()=>Ue(l.guards.map(p=>{const y=Sh(p,l.node,t);return _o(function Ll(n){return n&&wh(n.canActivateChild)}(y)?y.canActivateChild(r,n):y(r,n)).pipe(Mn())})).pipe(Jo())));return Ue(s).pipe(Jo())}(n,i.path,t),function X(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ue(!0);const i=r.map(s=>po(()=>{const l=Sh(s,e,t);return _o(function Fg(n){return n&&wh(n.canActivate)}(l)?l.canActivate(e,n):l(e,n)).pipe(Mn())}));return Ue(i).pipe(Jo())}(n,i.route,t))),Mn(i=>!0!==i,!0))}(r,s,n,e):Ue(h)),(0,ot.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,vn.b)(h=>{if(Fl(h.guardsResult)){const y=La(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw y.url=h.guardsResult,y}const p=new Fr(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),sr(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),Ev(h=>{if(h.guards.canActivateChecks.length)return Ue(h).pipe((0,vn.b)(p=>{const y=new Bu(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),Cr(p=>{let y=!1;return Ue(p).pipe(function Wc(n,e){return(0,qr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ue(t);let s=0;return(0,nn.D)(i).pipe(xl(l=>function bv(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!ME(i)&&(s[kh]=i.title),function xE(n,e,t,r){const i=function ZS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Ue({});const s={};return(0,nn.D)(i).pipe((0,qr.z)(l=>function wv(n,e,t,r){const i=Sh(n,e,r);return _o(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe(Mn(),(0,vn.b)(h=>{s[l]=h}))),Kn(1),function Nc(n){return(0,ot.U)(()=>n)}(s),Qi(l=>l instanceof Ns?Ar.E:Wo(l)))}(s,n,e,r).pipe((0,ot.U)(l=>(n._resolvedData=l,n.data=Ga(n,t).resolve,i&&ME(i)&&(n.data[kh]=i.title),null)))}(l.route,r,n,e)),(0,vn.b)(()=>s++),Kn(1),(0,qr.z)(l=>s===i.length?Ue(t):Ar.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,vn.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,vn.b)(p=>{const y=new go(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),Ev(h=>{const p=y=>{const E=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,vn.b)(D=>{y.component=D}),(0,ot.U)(()=>{})));for(const D of y.children)E.push(...p(D));return E};return Ii(p(h.targetSnapshot.root)).pipe(Fu(),gs(1))}),Ev(()=>this.afterPreactivation()),(0,ot.U)(h=>{const p=function av(n,e,t){const r=Uc(n,e._root,t?t._root:void 0);return new zu(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return{...h,targetRouterState:p}}),(0,vn.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,ot.U)(r=>(new pv(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,vn.b)({next(){s=!0},complete(){s=!0}}),Zo(()=>{s||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Qi(h=>{if(l=!0,function hp(n){return n&&n[Bs]}(h)){const p=Fl(h.url);p||(this.navigated=!0,this.restoreHistory(i,!0));const y=new Lu(i.id,this.serializeUrl(i.extractedUrl),h.message);if(r.next(y),p){const E=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||LE(i.source)};this.scheduleNavigation(E,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new Vu(i.id,this.serializeUrl(i.extractedUrl),h);r.next(p);try{i.resolve(this.errorHandler(h))}catch(y){i.reject(y)}}return Ar.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const h={...s};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(xp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:l,queryParamsHandling:h,preserveFragment:p}=r,y=i||this.routerState.root,E=p?this.currentUrlTree.fragment:l;let D=null;switch(h){case"merge":D={...this.currentUrlTree.queryParams,...s};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),function cv(n,e,t,r,i){if(0===t.length)return Ip(e.root,e.root,e.root,r,i);const s=function DE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ph(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return pr(s.outlets,(p,y)=>{h[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===l?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new ph(t,e,r)}(t);return s.toRoot()?Ip(e.root,e.root,new mt([],{}),r,i):function l(p){const y=function Wu(n,e,t,r){return n.isAbsolute?new qu(e.root,!0,0):-1===r?new qu(t,t===e.root,0):function Og(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new u.vHH(4005,!1);i=r.segments.length}return new qu(r,!1,i-s)}(t,r+(fh(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,p),E=y.processChildren?Ku(y.segmentGroup,y.index,s.commands):Hc(y.segmentGroup,y.index,s.commands);return Ip(e.root,y.segmentGroup,E,r,i)}(n.snapshot?._lastPathIndex)}(y,this.currentUrlTree,t,D,E??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Fl(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function FE(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new u.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...NE}:!1===r?{...td}:r,Fl(t))return te(this.currentUrlTree,t,i);const s=this.parseUrl(t);return te(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ls(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,l){if(this.disposed)return Promise.resolve(!1);let h,p,y;l?(h=l.resolve,p=l.reject,y=l.promise):y=new Promise((k,N)=>{h=k,p=N});const E=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),D=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:E,targetPageId:D,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:h,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(k=>Promise.reject(k))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Lu(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function LE(n){return"imperative"!==n}let Vp=(()=>{class n{constructor(t,r,i,s,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=l,this.commands=null,this.onChanges=new Wt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:(0,u.D6c)(this.skipLocationChange),replaceUrl:(0,u.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,u.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Kr),u.Y36(Nl),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})(),nd=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Wt.x,this.subscription=t.events.subscribe(s=>{s instanceof Ls&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,l){if(0!==t||r||i||s||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:(0,u.D6c)(this.skipLocationChange),replaceUrl:(0,u.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,u.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Kr),u.Y36(Nl),u.Y36(ge))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&u.uIk("target",r.target)("href",r.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})(),VE=(()=>{class n{constructor(t,r,i,s,l,h){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=l,this.linkWithHref=h,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new u.vpe,this.routerEventsSubscription=t.events.subscribe(p=>{p instanceof Ls&&this.update()})}ngAfterContentInit(){Ue(this.links.changes,this.linksWithHrefs.changes,Ue(null)).pipe((0,ps.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,nn.D)(t).pipe((0,ps.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function BE(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Kr),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(Vp,8),u.Y36(nd,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,Vp,5),u.Suo(i,nd,5)),2&t){let s;u.iGM(s=u.CRH())&&(r.links=s),u.iGM(s=u.CRH())&&(r.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[u.TTD]}),n})();class Iv{buildTitle(e){let t,r=e.root;for(;void 0!==r;)t=this.getResolvedTitleForRoute(r)??t,r=r.children.find(i=>i.outlet===Lt);return t}getResolvedTitleForRoute(e){return e.data[kh]}}let UE=(()=>{class n extends Iv{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ic))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class zg{}let Bp=(()=>{class n{constructor(t,r,i,s,l){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(sr(t=>t instanceof Ls),xl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,u.MMx)(s.providers,t,`Route: ${s.path}`));const l=s._injector??t,h=s._loadedInjector??l;s.loadChildren&&!s._loadedRoutes||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(l,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,nn.D)(i).pipe((0,ps.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ue(null);const s=i.pipe((0,qr.z)(l=>null===l?Ue(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,nn.D)([s,l]).pipe((0,ps.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Kr),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(zg),u.LFG(Lp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Tv=new u.OlP("");let Sv=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Yo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ls&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof dp&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new dp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const rd=new u.OlP("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),jE=new u.OlP("ROUTER_FORROOT_GUARD"),Av=new u.OlP(""),tA=[Ce,{provide:Ua,useClass:Ol},{provide:Kr,useFactory:function qE(n,e,t,r,i,s,l={},h,p,y,E){const D=new Kr(null,n,e,t,r,i,Ba(s));return y&&(D.urlHandlingStrategy=y),E&&(D.routeReuseStrategy=E),D.titleStrategy=p??h,function rA(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,D),D},deps:[Ua,za,Ce,u.zs3,u.Sil,Gg,rd,UE,[Iv,new u.FiY],[class RE{},new u.FiY],[class YS{},new u.FiY]]},za,{provide:Nl,useFactory:function iA(n){return n.routerState.root},deps:[Kr]},Lp];function nA(){return new u.PXZ("Router",Kr)}let xv=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[tA,[],zE(t),{provide:jE,useFactory:GE,deps:[[Kr,new u.FiY,new u.tp0]]},{provide:rd,useValue:r||{}},r?.useHash?{provide:ge,useClass:Re}:{provide:ge,useClass:it},{provide:Tv,useFactory:()=>{const n=(0,u.f3M)(Kr),e=(0,u.f3M)(wl),t=(0,u.f3M)(rd);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Sv(n,e,t)}},r?.preloadingStrategy?lA(r.preloadingStrategy):[],{provide:u.PXZ,multi:!0,useFactory:nA},r?.initialNavigation?KE(r):[],[{provide:WE,useFactory:ta},{provide:u.tb,multi:!0,useExisting:WE}]]}}static forChild(t){return{ngModule:n,providers:[zE(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(jE,8),u.LFG(Kr,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function GE(n){return"guarded"}function zE(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:Gg,multi:!0,useValue:n}]}function ta(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const r=n.get(Kr),i=n.get(ZE);null===n.get(kv,null,u.XFs.Optional)&&r.initialNavigation(),n.get(Av,null,u.XFs.Optional)?.setUpPreloading(),n.get(Tv,null,u.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const WE=new u.OlP("");function KE(n){return["disabled"===n.initialNavigation?[{provide:u.ip1,multi:!0,useFactory:()=>{const n=(0,u.f3M)(Kr);return()=>{n.setUpLocationChangeListener()}}},{provide:kv,useValue:"disabled"}]:[],"enabledBlocking"===n.initialNavigation?[{provide:kv,useValue:"enabledBlocking"},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:n=>{const e=n.get(z,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(i=>{const s=n.get(Kr),l=n.get(ZE);(function r(i){const s=n.get(Kr);s.events.pipe(sr(l=>l instanceof Ls||l instanceof Lu||l instanceof Vu),(0,ot.U)(l=>{if(l instanceof Ls)return!0;const h=s.navigationId!==l.id,p=l instanceof Lu&&-1!==l.reason.indexOf(Si);return!(!h&&!p)&&null}),sr(l=>null!==l),gs(1)).subscribe(()=>{i()})})(()=>{i(!0),t=!0}),s.afterPreactivation=()=>(i(!0),t||l.closed?Ue(void 0):l),s.initialNavigation()}))}}]:[]]}const ZE=new u.OlP("",{factory:()=>new Wt.x}),kv=new u.OlP("");function lA(n){return[Bp,{provide:Av,useExisting:Bp},{provide:zg,useExisting:n}]}var xt=V(6451),Up=V(5363),QE=V(6063);class XE extends Wt.x{constructor(e=1/0,t=1/0,r=QE.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:l}=this;t||(r.push(e),!i&&r.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let l=0;l<s.length&&!e.closed;l+=r?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const l=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=l;p+=2)h=p;h&&r.splice(0,h+1)}}}var Rv=V(3099);function JE(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Rv.B)({connector:()=>new XE(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Ov(n,e){return(0,Di.m)(e)?Cr(()=>n,e):Cr(()=>n)}var Pv=V(9468),cn=V(5813),Mr=V(2011);V(5867);var we=V(5861),Ji=V(9681),Gs=V(4859),F=V(2090),Mi=V(1877);const Lv=new Map,Vv={activated:!1,tokenObservers:[]},gA={initialized:!1,enabled:!1};function Zr(n){return Lv.get(n)||Vv}function vo(n,e){Lv.set(n,e)}function Vl(){return gA}class oC{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function Qa(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const li=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function aC(n){if(!Zr(n).activated)throw li.create("use-before-activation",{appName:n.name})}function cC(n,e){return Hv.apply(this,arguments)}function Hv(){return(Hv=(0,we.Z)(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const N=yield l.getHeartbeatsHeader();N&&(s["X-Firebase-Client"]=N)}const h={method:"POST",body:JSON.stringify(e),headers:s};let p,y;try{p=yield fetch(n,h)}catch(N){throw li.create("fetch-network-error",{originalErrorMessage:null===(r=N)||void 0===r?void 0:r.message})}if(200!==p.status)throw li.create("fetch-status-error",{httpStatus:p.status});try{y=yield p.json()}catch(N){throw li.create("fetch-parse-error",{originalErrorMessage:null===(i=N)||void 0===i?void 0:i.message})}const E=y.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw li.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const D=1e3*Number(E[1]),k=Date.now();return{token:y.token,expireTimeMillis:k+D,issuedAtTimeMillis:k}})).apply(this,arguments)}function wA(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Nh="firebase-app-check-store";let Kg=null;function jv(){return Kg||(Kg=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(li.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Nh,{keyPath:"compositeKey"})}}catch(r){e(li.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Kg)}function Zg(){return(Zg=(0,we.Z)(function*(n,e){const r=(yield jv()).transaction(Nh,"readwrite"),s=r.objectStore(Nh).put({compositeKey:n,value:e});return new Promise((l,h)=>{s.onsuccess=p=>{l()},r.onerror=p=>{var y;h(li.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const id=new Mi.Yd("@firebase/app-check");function fC(n,e){return(0,F.hl)()?function IA(n,e){return function dC(n,e){return Zg.apply(this,arguments)}(function $v(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{id.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Gv(){return Vl().enabled}function pC(){return zv.apply(this,arguments)}function zv(){return(zv=(0,we.Z)(function*(){const n=Vl();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const LN={error:"UNKNOWN_ERROR"};function VN(n){return F.US.encodeString(JSON.stringify(n),!1)}function Fh(n){return mC.apply(this,arguments)}function mC(){return(mC=(0,we.Z)(function*(n,e=!1){const t=n.app;aC(t);const r=Zr(t);let s,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&Lh(p)&&(i=p)}if(!e&&i&&Lh(i))return{token:i.token};let h,l=!1;if(Gv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=cC(wA(t,yield pC()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),l=!0);const p=yield r.exchangeTokenPromise;return yield fC(t,p),vo(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),l=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?id.warn(p.message):id.error(p),s=p}return i?(h={token:i.token},vo(t,Object.assign(Object.assign({},r),{token:i})),yield fC(t,i)):h=yC(s),l&&Wv(t,h),h})).apply(this,arguments)}function _C(n,e){const t=Zr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),vo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function SA(n){const{app:e}=n,t=Zr(e);let r=t.tokenRefresher;r||(r=function BN(n){const{app:e}=n;return new oC((0,we.Z)(function*(){let r;if(r=Zr(e).token?yield Fh(n,!0):yield Fh(n),r.error)throw r.error}),()=>!0,()=>{const t=Zr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),vo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Wv(n,e){const t=Zr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Lh(n){return n.expireTimeMillis-Date.now()>0}function yC(n){return{token:VN(LN),error:n}}class AA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Zr(this.app);for(const t of e)_C(this.app,t.next);return Promise.resolve()}}const OA="app-check-internal";!function IC(){(0,Ji._registerComponent)(new Gs.wA("app-check",n=>function vC(n,e){return new AA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(OA).initialize()})),(0,Ji._registerComponent)(new Gs.wA(OA,n=>function bC(n){return{getToken:e=>Fh(n,e),addTokenListener:e=>function gC(n,e,t,r){const{app:i}=n,s=Zr(i),l={next:t,error:r,type:e};if(vo(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,l]})),s.token&&Lh(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),SA(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>SA(n))}(n,"INTERNAL",e),removeTokenListener:e=>_C(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ji.registerVersion)("@firebase/app-check","0.5.11")}();class sd{constructor(){return(0,cn.vb)("app-check")}}typeof window<"u"&&window;var Gp=V(127);const Jv=new u.OlP("angularfire2.auth.use-emulator"),Xa=new u.OlP("angularfire2.auth.settings"),i_=new u.OlP("angularfire2.auth.tenant-id"),eb=new u.OlP("angularfire2.auth.langugage-code"),zp=new u.OlP("angularfire2.auth.use-device-language"),tb=new u.OlP("angularfire.auth.persistence"),s_=(n,e,t,r,i,s,l,h)=>(0,Mr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),l)for(const[y,E]of Object.entries(l))p.settings[y]=E;return h&&p.setPersistence(h),p},[t,r,i,s,l,h]);let Ul=(()=>{class n{constructor(t,r,i,s,l,h,p,y,E,D,k,N){const B=new Wt.x,J=Ue(void 0).pipe((0,Up.Q)(l.outsideAngular),Cr(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,1451)))),(0,ot.U)(()=>(0,Mr.on)(t,s,r)),(0,ot.U)(ce=>s_(ce,s,h,y,E,D,p,k)),JE({bufferSize:1,refCount:!1}));if(Zd(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ue(null);else{J.pipe(Mn()).subscribe();const Be=J.pipe(Cr(Qe=>Qe.getRedirectResult().then(St=>St,()=>null)),cn.iC,JE({bufferSize:1,refCount:!1})),Ke=J.pipe(Cr(Qe=>new Wn.y(St=>({unsubscribe:s.runOutsideAngular(()=>Qe.onAuthStateChanged(Ot=>St.next(Ot),Ot=>St.error(Ot),()=>St.complete()))})))),nt=J.pipe(Cr(Qe=>new Wn.y(St=>({unsubscribe:s.runOutsideAngular(()=>Qe.onIdTokenChanged(Ot=>St.next(Ot),Ot=>St.error(Ot),()=>St.complete()))}))));this.authState=Be.pipe(Ov(Ke),(0,Pv.R)(l.outsideAngular),(0,Up.Q)(l.insideAngular)),this.user=Be.pipe(Ov(nt),(0,Pv.R)(l.outsideAngular),(0,Up.Q)(l.insideAngular)),this.idToken=this.user.pipe(Cr(Qe=>Qe?(0,nn.D)(Qe.getIdToken()):Ue(null))),this.idTokenResult=this.user.pipe(Cr(Qe=>Qe?(0,nn.D)(Qe.getIdTokenResult()):Ue(null))),this.credential=(0,xt.T)(Be,B,this.authState.pipe(sr(Qe=>!Qe))).pipe((0,ot.U)(Qe=>Qe?.user?Qe:null),(0,Pv.R)(l.outsideAngular),(0,Up.Q)(l.insideAngular))}return(0,Mr.pX)(this,J,s,{spy:{apply:(ce,Be,Ke)=>{(ce.startsWith("signIn")||ce.startsWith("createUser"))&&Ke.then(nt=>B.next(nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Mr.Dh),u.LFG(Mr.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(cn.HU),u.LFG(Jv,8),u.LFG(Xa,8),u.LFG(i_,8),u.LFG(eb,8),u.LFG(zp,8),u.LFG(tb,8),u.LFG(sd,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),NA=(()=>{class n{constructor(){Gp.Z.registerVersion("angularfire",cn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Ul]}),n})();var Zc=V(4986);function Hl(n,e=fo.y){return n=n??nb,(0,yn.e)((t,r)=>{let i,s=!0;t.subscribe((0,In.x)(r,l=>{const h=e(l);(s||!n(i,h))&&(s=!1,i=h,r.next(l))}))})}function nb(n,e){return n===e}var ad=V(5032);V(1451);var a_=V(3942);const rb="@firebase/database";let Wp="";function ib(n){Wp=n}class sb{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class FA{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const LA=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new sb(e)}}catch{}return new FA},ld=LA("localStorage"),c_=LA("sessionStorage"),Bh=new Mi.Yd("@firebase/database"),ob=function(){let n=1;return function(){return n++}}(),AC=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const r=t.digest();return F.US.encodeByteArray(r)},Kp=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Kp.apply(null,r):e+="object"==typeof r?(0,F.Pz)(r):r,e+=" "}return e};let Lr=null,xC=!0;const MC=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Bh.logLevel=Mi.in.VERBOSE,Lr=Bh.log.bind(Bh),e&&c_.set("logging_enabled",!0)):"function"==typeof n?Lr=n:(Lr=null,c_.remove("logging_enabled"))},ci=function(...n){if(!0===xC&&(xC=!1,null===Lr&&!0===c_.get("logging_enabled")&&MC(!0)),Lr){const e=Kp.apply(null,n);Lr(e)}},Zp=function(n){return function(...e){ci(n,...e)}},Yp=function(...n){const e="FIREBASE INTERNAL ERROR: "+Kp(...n);Bh.error(e)},ra=function(...n){const e=`FIREBASE FATAL ERROR: ${Kp(...n)}`;throw Bh.error(e),new Error(e)},ki=function(...n){const e="FIREBASE WARNING: "+Kp(...n);Bh.warn(e)},u_=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},jl="[MIN_NAME]",ia="[MAX_NAME]",cd=function(n,e){if(n===e)return 0;if(n===jl||e===ia)return-1;if(e===jl||n===ia)return 1;{const t=f_(n),r=f_(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},BA=function(n,e){return n===e?0:n<e?-1:1},Uh=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(e))},d_=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,F.Pz)(e[r]),t+=":",t+=d_(n[e[r]]);return t+="}",t},RC=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function kn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const h_=function(n){(0,F.hu)(!u_(n),"Invalid JSON number");const r=1023;let i,s,l,h,p;0===n?(s=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const E=y.join("");let D="";for(p=0;p<64;p+=8){let k=parseInt(E.substr(p,8),2).toString(16);1===k.length&&(k="0"+k),D+=k}return D.toLowerCase()},OC=new RegExp("^-?(0*)\\d{1,10}$"),PC=-2147483648,ab=2147483647,f_=function(n){if(OC.test(n)){const e=Number(n);if(e>=PC&&e<=ab)return e}return null},Yc=function(n){try{n()}catch(e){setTimeout(()=>{throw ki("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Qp=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class p_{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ki(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class lb{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ci("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ki(e)}}let Xp=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const g_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ub="websocket",db="long_polling";class y_{constructor(e,t,r,i,s=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ld.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ld.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ja(n,e,t){let r;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===ub)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==db)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function FC(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return kn(t,(s,l)=>{i.push(s+"="+l)}),r+i.join("&")}class v_{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const LC={},hb={};function fb(n){const e=n.toString();return LC[e]||(LC[e]=new v_),LC[e]}class WA{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Yc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class el{constructor(e,t,r,i,s,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Zp(e),this.stats_=fb(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),Ja(t,db,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new WA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new mb((...s)=>{const[l,h,p,y,E]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&g_.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){el.forceAllow_=!0}static forceDisallow(){el.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!el.forceAllow_&&(el.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,F.h$)(t),i=RC(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class mb{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=ob(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=mb.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){ci("frame writing exception"),h.stack&&ci(h.stack),ci(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ci("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ci("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Vr=null;typeof MozWebSocket<"u"?Vr=MozWebSocket:typeof WebSocket<"u"&&(Vr=WebSocket);let bo=(()=>{class n{constructor(t,r,i,s,l,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Zp(this.connId),this.stats_=fb(r),this.connURL=n.connectionURL_(r,h,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,l){const h={v:"5"};return!(0,F.Yr)()&&typeof location<"u"&&location.hostname&&g_.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),s&&(h.ac=s),l&&(h.p=l),Ja(t,ub,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ld.set("previous_websocket_failure",!0);try{let i;if((0,F.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Wp}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new Vr(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Vr&&!n.forceDisallow_}static previouslyFailed(){return ld.isInMemoryStorage||!0===ld.get("previous_websocket_failure")}markConnectionHealthy(){ld.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,F.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,F.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=RC(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),nm=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[el,bo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=bo&&bo.isAvailable();let i=r&&!bo.previouslyFailed();if(t.webSocketOnly&&(r||ki("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[bo];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class vb{constructor(e,t,r,i,s,l,h,p,y,E){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Zp("c:"+this.id+":"),this.transportManager_=new nm(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Qp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Uh("t",e),r=Uh("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Uh("t",e),r=Uh("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Uh("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Yp("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yp("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ki("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Qp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ld.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class bb{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class wb{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class rm extends wb{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new rm}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Cn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function fn(){return new Cn("")}function Kt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function $l(n){return n.pieces_.length-n.pieceNum_}function Rn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Cn(n.pieces_,e)}function E_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function pd(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function jC(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Cn(e,0)}function On(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Cn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Cn(t,0)}function Ut(n){return n.pieceNum_>=n.pieces_.length}function ui(n,e){const t=Kt(n),r=Kt(e);if(null===t)return e;if(t===r)return ui(Rn(n),Rn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function rx(n,e){const t=pd(n,0),r=pd(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=cd(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function zh(n,e){if($l(n)!==$l(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function es(n,e){let t=n.pieceNum_,r=e.pieceNum_;if($l(n)>$l(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class $C{constructor(e,t){this.errorPrefix_=t,this.parts_=pd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);Tb(this)}}function Tb(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Jc(n))}function Jc(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class im extends wb{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new im}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const md=1e3;let qh,eu=(()=>{class n extends bb{constructor(t,r,i,s,l,h,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=Zp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=md,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");im.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&rm.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,l={r:s,a:t,b:r};this.log_((0,F.Pz)(l)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new F.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const p=h.d;"ok"===h.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const y=p.d,E=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==E&&this.removeListen_(i,s),t.onComplete&&t.onComplete(E,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const i=(0,F.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ki(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,F.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const l=s.s,h=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const l={p:t};s&&(l.q=i,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Yp("Unrecognized action received from server: "+(0,F.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=md,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=md,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=md),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,we.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,y=null;const E=function(){y?y.close():(p=!0,s())};t.realtime_={close:E,sendRequest:function(N){(0,F.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(N)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[N,B]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);p?ci("getToken() completed but was canceled"):(ci("getToken() completed. Creating connection."),t.authToken_=N&&N.accessToken,t.appCheckToken_=B&&B.token,y=new vb(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,J=>{ki(J+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(N){t.log_("Failed to get token: "+N),p||(t.repoInfo_.nodeAdmin&&ki(N),E())}}})()}interrupt(t){ci("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ci("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=md,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>d_(l)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Cn(t).toString();let s;if(this.listens.has(i)){const l=this.listens.get(i);s=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){ci("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ci("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Wp.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=rm.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Zt(e,t)}}class sm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Zt(jl,e),i=new Zt(jl,t);return 0!==this.compare(r,i)}minPost(){return Zt.MIN}}class Ab extends sm{static get __EMPTY_NODE(){return qh}static set __EMPTY_NODE(e){qh=e}compare(e,t){return cd(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Zt.MIN}maxPost(){return new Zt(ia,qh)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Zt(e,qh)}toString(){return".key"}}const sa=new Ab;class om{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let QC,Eo=(()=>{class n{constructor(t,r,i,s,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??ts.EMPTY_NODE,this.right=l??ts.EMPTY_NODE}copy(t,r,i,s,l){return new n(t??this.key,r??this.value,i??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const l=i(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===l?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ts.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ts.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ts{constructor(e,t=ts.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ts(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Eo.BLACK,null,null))}remove(e){return new ts(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Eo.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new om(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new om(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new om(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new om(this.root_,null,this.comparator_,!0,e)}}function YC(n,e){return cd(n.name,e.name)}function C_(n,e){return cd(n,e)}ts.EMPTY_NODE=new class ZC{copy(e,t,r,i,s){return this}insert(e,t,r){return new Eo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const XC=function(n){return"number"==typeof n?"number:"+h_(n):"string:"+n},xb=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===QC||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===QC||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let JC,Mb,eI,Yn=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),xb(this.priorityNode_)}static set __childrenNodeConstructor(t){JC=t}static get __childrenNodeConstructor(){return JC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ut(t)?this:".priority"===Kt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Kt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,F.hu)(".priority"!==i||1===$l(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Rn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+XC(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?h_(this.value_):this.value_,this.lazyHash_=AC(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,F.hu)(s>=0,"Unknown leaf type: "+r),(0,F.hu)(l>=0,"Unknown leaf type: "+i),s===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Pn=new class ax extends sm{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?cd(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Zt.MIN}maxPost(){return new Zt(ia,new Yn("[PRIORITY-POST]",eI))}makePost(e,t){const r=Mb(e);return new Zt(t,new Yn("[PRIORITY-POST]",r))}toString(){return".priority"}},nI=Math.log(2);class Wh{constructor(e){this.count=parseInt(Math.log(e+1)/nI,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const I_=function(n,e,t,r){n.sort(e);const i=function(p,y){const E=y-p;let D,k;if(0===E)return null;if(1===E)return D=n[p],k=t?t(D):D,new Eo(k,D.node,Eo.BLACK,null,null);{const N=parseInt(E/2,10)+p,B=i(p,N),J=i(N+1,y);return D=n[N],k=t?t(D):D,new Eo(k,D.node,Eo.BLACK,B,J)}},h=function(p){let y=null,E=null,D=n.length;const k=function(B,J){const ce=D-B,Be=D;D-=B;const Ke=i(ce+1,Be),nt=n[ce],Qe=t?t(nt):nt;N(new Eo(Qe,nt.node,J,null,Ke))},N=function(B){y?(y.left=B,y=B):(E=B,y=B)};for(let B=0;B<p.count;++B){const J=p.nextBitIsOne(),ce=Math.pow(2,p.count-(B+1));J?k(ce,Eo.BLACK):(k(ce,Eo.BLACK),k(ce,Eo.RED))}return E}(new Wh(n.length));return new ts(r||e,h)};let kb;const gd={};class Gl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(gd&&Pn,"ChildrenNode.ts has not been loaded"),kb=kb||new Gl({".priority":gd},{".priority":Pn}),kb}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ts?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==sa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Zt.Wrap);let h,l=s.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=s.getNext();h=i?I_(r,e.getCompare()):gd;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const E=Object.assign({},this.indexes_);return E[p]=h,new Gl(E,y)}addToIndexes(e,t){const r=(0,F.UI)(this.indexes_,(i,s)=>{const l=(0,F.DV)(this.indexSet_,s);if((0,F.hu)(l,"Missing index implementation for "+s),i===gd){if(l.isDefinedOn(e.node)){const h=[],p=t.getIterator(Zt.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&h.push(y),y=p.getNext();return h.push(e),I_(h,l.getCompare())}return gd}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new Zt(e.name,h))),p.insert(e,e.node)}});return new Gl(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,F.UI)(this.indexes_,i=>{if(i===gd)return i;{const s=t.get(e.name);return s?i.remove(new Zt(e.name,s)):i}});return new Gl(r,this.indexSet_)}}let Kh,Ht=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&xb(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Kh||(Kh=new n(new ts(C_),null,Gl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Kh}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Kh:r}}getChild(t){const r=Kt(t);return null===r?this:this.getImmediateChild(r).getChild(Rn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Zt(t,r);let s,l;r.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?Kh:this.priorityNode_;return new n(s,h,l)}}updateChild(t,r){const i=Kt(t);if(null===i)return r;{(0,F.hu)(".priority"!==Kt(t)||1===$l(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Rn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,l=!0;if(this.forEachChild(Pn,(h,p)=>{r[h]=p.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):l=!1}),!t&&l&&s<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+XC(this.getPriority().val())+":"),this.forEachChild(Pn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":AC(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const l=s.getPredecessorKey(new Zt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Zt.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Zt.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===_d?-1:0}withIndex(t){if(t===sa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===sa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Pn),s=r.getIterator(Pn);let l=i.getNext(),h=s.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=s.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===sa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const _d=new class Rb extends Ht{constructor(){super(new ts(C_),Ht.EMPTY_NODE,Gl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ht.EMPTY_NODE}isEmpty(){return!1}};function lr(n,e=null){if(null===n)return Ht.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Yn(n,lr(e));if(n instanceof Array){let t=Ht.EMPTY_NODE;return kn(n,(r,i)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const s=lr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(lr(e))}{const t=[];let r=!1;if(kn(n,(l,h)=>{if("."!==l.substring(0,1)){const p=lr(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new Zt(l,p)))}}),0===t.length)return Ht.EMPTY_NODE;const s=I_(t,YC,l=>l.name,C_);if(r){const l=I_(t,Pn.getCompare());return new Ht(s,lr(e),new Gl({".priority":l},{".priority":Pn}))}return new Ht(s,lr(e),Gl.Default)}}Object.defineProperties(Zt,{MIN:{value:new Zt(jl,Ht.EMPTY_NODE)},MAX:{value:new Zt(ia,_d)}}),Ab.__EMPTY_NODE=Ht.EMPTY_NODE,Yn.__childrenNodeConstructor=Ht,function sx(n){QC=n}(_d),function tI(n){eI=n}(_d),function ox(n){Mb=n}(lr);class Ob extends sm{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!Ut(e)&&".priority"!==Kt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?cd(e.name,t.name):s}makePost(e,t){const r=lr(e),i=Ht.EMPTY_NODE.updateChild(this.indexPath_,r);return new Zt(t,i)}maxPost(){const e=Ht.EMPTY_NODE.updateChild(this.indexPath_,_d);return new Zt(ia,e)}toString(){return pd(this.indexPath_,0).join("/")}}const zs=new class rl extends sm{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?cd(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Zt.MIN}maxPost(){return Zt.MAX}makePost(e,t){const r=lr(e);return new Zt(t,r)}toString(){return".value"}},Ri="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",lx=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Ri.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let l=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=Ri.charAt(e[i]);return(0,F.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),iI=function(n){if(n===""+ab)return"-";const e=f_(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return ia;const s=Ri.charAt(Ri.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},sI=function(n){if(n===""+PC)return jl;const e=f_(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+ab:(delete t[t.length-1],t.join("")):(t[t.length-1]=Ri.charAt(Ri.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function T_(n){return{type:"value",snapshotNode:n}}function il(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function am(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Zh(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class S_{constructor(e){this.index_=e}updateChild(e,t,r,i,s,l){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(am(t,h)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(il(t,r)):l.trackChildChange(Zh(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Pn,(i,s)=>{t.hasChild(i)||r.trackChildChange(am(i,s))}),t.isLeafNode()||t.forEachChild(Pn,(i,s)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(s)||r.trackChildChange(Zh(i,s,l))}else r.trackChildChange(il(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ht.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Yh{constructor(e){this.indexedFilter_=new S_(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Yh.getStartPost_(e),this.endPost_=Yh.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,l){return this.matches(new Zt(t,r))||(r=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ht.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ht.EMPTY_NODE);const s=this;return t.forEachChild(Pn,(l,h)=>{s.matches(new Zt(l,h))||(i=i.updateImmediateChild(l,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class A_{constructor(e){this.rangedFilter_=new Yh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,l){return this.rangedFilter_.matches(new Zt(t,r))||(r=Ht.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,l):this.fullLimitUpdateChild_(e,t,r,s,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Ht.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const h=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let s,l,h,p;if(i=t.withIndex(this.index_),i=i.updatePriority(Ht.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();h=(k,N)=>D(N,k)}else p=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,E=!1;for(;p.hasNext();){const D=p.getNext();!E&&h(s,D)<=0&&(E=!0),E&&y<this.limit_&&h(D,l)<=0?y++:i=i.updateImmediateChild(D.name,Ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let l;if(this.reverse_){const D=this.index_.getCompare();l=(k,N)=>D(N,k)}else l=this.index_.getCompare();const h=e;(0,F.hu)(h.numChildren()===this.limit_,"");const p=new Zt(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),E=this.rangedFilter_.matches(p);if(h.hasChild(t)){const D=h.getImmediateChild(t);let k=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=k&&(k.name===t||h.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const N=null==k?1:l(k,p);if(E&&!r.isEmpty()&&N>=0)return s?.trackChildChange(Zh(t,r,D)),h.updateImmediateChild(t,r);{s?.trackChildChange(am(t,D));const J=h.updateImmediateChild(t,Ht.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(s?.trackChildChange(il(k.name,k.node)),J.updateImmediateChild(k.name,k.node)):J}}return r.isEmpty()?e:E&&l(y,p)>=0?(null!=s&&(s.trackChildChange(am(y.name,y.node)),s.trackChildChange(il(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Ht.EMPTY_NODE)):e}}class x_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ia}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Pn}copy(){const e=new x_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Qh(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function M_(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function lm(n,e){const t=n.copy();return t.index_=e,t}function Lb(n){const e={};if(n.isDefault())return e;let t;return n.index_===Pn?t="$priority":n.index_===zs?t="$value":n.index_===sa?t="$key":((0,F.hu)(n.index_ instanceof Ob,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Pz)(t),n.startSet_&&(e.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Vb(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Pn&&(e.i=n.index_.toString()),e}class cm extends bb{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Zp("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=cm.getListenId_(e,r),h={};this.listens_[l]=h;const p=Lb(e._queryParams);this.restRequest_(s+".json",p,(y,E)=>{let D=E;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(s,D,!1,r),(0,F.DV)(this.listens_,l)===h){let k;k=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(k,null)}})}unlisten(e,t){const r=cm.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Lb(e._queryParams),r=e._path.toString(),i=new F.BH;return this.restRequest_(r+".json",t,(s,l)=>{let h=l;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,F.cI)(h.responseText)}catch{ki("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&ki("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class cI{constructor(){this.rootNode_=Ht.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function k_(){return{value:null,children:new Map}}function Xh(n,e,t){if(Ut(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Kt(e);n.children.has(r)||n.children.set(r,k_()),Xh(n.children.get(r),e=Rn(e),t)}}function Bb(n,e){if(Ut(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Pn,(r,i)=>{Xh(n,new Cn(r),i)}),Bb(n,e)}}if(n.children.size>0){const t=Kt(e);return e=Rn(e),n.children.has(t)&&Bb(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Ub(n,e,t){null!==n.value?t(e,n.value):function ux(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Ub(i,new Cn(e.toString()+"/"+r),t)})}class dx{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&kn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class px{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new dx(e);const r=1e4+2e4*Math.random();Qp(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;kn(e,(i,s)=>{s>0&&(0,F.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Qp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Co=(()=>{return(n=Co||(Co={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Co;var n})();function $b(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class R_{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Co.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ut(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Cn(e));return new R_(fn(),t,this.revert)}}return(0,F.hu)(Kt(this.path)===e,"operationForChild called for unrelated child."),new R_(Rn(this.path),this.affectedTree,this.revert)}}class um{constructor(e,t){this.source=e,this.path=t,this.type=Co.LISTEN_COMPLETE}operationForChild(e){return Ut(this.path)?new um(this.source,fn()):new um(this.source,Rn(this.path))}}class yd{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Co.OVERWRITE}operationForChild(e){return Ut(this.path)?new yd(this.source,fn(),this.snap.getImmediateChild(e)):new yd(this.source,Rn(this.path),this.snap)}}class Jh{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Co.MERGE}operationForChild(e){if(Ut(this.path)){const t=this.children.subtree(new Cn(e));return t.isEmpty()?null:t.value?new yd(this.source,fn(),t.value):new Jh(this.source,fn(),t)}return(0,F.hu)(Kt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Jh(this.source,Rn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class zl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ut(e))return this.isFullyInitialized()&&!this.filtered_;const t=Kt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class dI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ef(n,e,t,r,i,s){const l=r.filter(h=>h.type===t);l.sort((h,p)=>function pI(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new Zt(e.childName,e.snapshotNode),i=new Zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),l.forEach(h=>{const p=function fI(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(p,n.query_))})})}function dm(n,e){return{eventCache:n,serverCache:e}}function tf(n,e,t,r){return dm(new zl(e,t,r),n.serverCache)}function Gb(n,e,t,r){return dm(n.eventCache,new zl(e,t,r))}function nf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ql(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Wl;class Ln{constructor(e,t=(()=>(Wl||(Wl=new ts(BA)),Wl))()){this.value=e,this.children=t}static fromObject(e){let t=new Ln(null);return kn(e,(r,i)=>{t=t.set(new Cn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:fn(),value:this.value};if(Ut(e))return null;{const r=Kt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Rn(e),t);return null!=s?{path:On(new Cn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ut(e))return this;{const t=Kt(e),r=this.children.get(t);return null!==r?r.subtree(Rn(e)):new Ln(null)}}set(e,t){if(Ut(e))return new Ln(t,this.children);{const r=Kt(e),s=(this.children.get(r)||new Ln(null)).set(Rn(e),t),l=this.children.insert(r,s);return new Ln(this.value,l)}}remove(e){if(Ut(e))return this.children.isEmpty()?new Ln(null):new Ln(null,this.children);{const t=Kt(e),r=this.children.get(t);if(r){const i=r.remove(Rn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Ln(null):new Ln(this.value,s)}return this}}get(e){if(Ut(e))return this.value;{const t=Kt(e),r=this.children.get(t);return r?r.get(Rn(e)):null}}setTree(e,t){if(Ut(e))return t;{const r=Kt(e),s=(this.children.get(r)||new Ln(null)).setTree(Rn(e),t);let l;return l=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Ln(this.value,l)}}fold(e){return this.fold_(fn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(On(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,fn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Ut(e))return null;{const s=Kt(e),l=this.children.get(s);return l?l.findOnPath_(Rn(e),On(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,fn(),t)}foreachOnPath_(e,t,r){if(Ut(e))return this;{this.value&&r(t,this.value);const i=Kt(e),s=this.children.get(i);return s?s.foreachOnPath_(Rn(e),On(t,i),r):new Ln(null)}}foreach(e){this.foreach_(fn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(On(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Oi{constructor(e){this.writeTree_=e}static empty(){return new Oi(new Ln(null))}}function O_(n,e,t){if(Ut(e))return new Oi(new Ln(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const l=ui(i,e);return s=s.updateChild(l,t),new Oi(n.writeTree_.set(i,s))}{const i=new Ln(t),s=n.writeTree_.setTree(e,i);return new Oi(s)}}}function hm(n,e,t){let r=n;return kn(t,(i,s)=>{r=O_(r,On(e,i),s)}),r}function gx(n,e){if(Ut(e))return Oi.empty();{const t=n.writeTree_.setTree(e,new Ln(null));return new Oi(t)}}function P_(n,e){return null!=tu(n,e)}function tu(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ui(t.path,e)):null}function _x(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Pn,(r,i)=>{e.push(new Zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Zt(r,i.value))}),e}function yt(n,e){if(Ut(e))return n;{const t=tu(n,e);return new Oi(null!=t?new Ln(t):n.writeTree_.subtree(e))}}function zb(n){return n.writeTree_.isEmpty()}function rf(n,e){return mI(fn(),n.writeTree_,e)}function mI(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,F.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=mI(On(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(On(n,".priority"),r)),t}}function Kl(n,e){return Zb(e,n)}function QN(n,e){if(n.snap)return es(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&es(On(n.path,t),e))return!0;return!1}function _I(n){return n.visible}function yI(n,e,t){let r=Oi.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const l=s.path;let h;if(s.snap)es(t,l)?(h=ui(t,l),r=O_(r,h,s.snap)):es(l,t)&&(h=ui(l,t),r=O_(r,fn(),s.snap.getChild(h)));else{if(!s.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(es(t,l))h=ui(t,l),r=hm(r,h,s.children);else if(es(l,t))if(h=ui(l,t),Ut(h))r=hm(r,fn(),s.children);else{const p=(0,F.DV)(s.children,Kt(h));if(p){const y=p.getChild(Rn(h));r=O_(r,fn(),y)}}}}}return r}function qb(n,e,t,r,i){if(r||i){const s=yt(n.visibleWrites,e);return!i&&zb(s)?t:i||null!=t||P_(s,fn())?rf(yI(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(es(y.path,e)||es(e,y.path))},e),t||Ht.EMPTY_NODE):null}{const s=tu(n.visibleWrites,e);if(null!=s)return s;{const l=yt(n.visibleWrites,e);return zb(l)?t:null!=t||P_(l,fn())?rf(l,t||Ht.EMPTY_NODE):null}}}function nu(n,e,t,r){return qb(n.writeTree,n.treePath,e,t,r)}function Wb(n,e){return function vI(n,e,t){let r=Ht.EMPTY_NODE;const i=tu(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Pn,(s,l)=>{r=r.updateImmediateChild(s,l)}),r;if(t){const s=yt(n.visibleWrites,e);return t.forEachChild(Pn,(l,h)=>{const p=rf(yt(s,new Cn(l)),h);r=r.updateImmediateChild(l,p)}),_x(s).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return _x(yt(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function EI(n,e,t,r){return function bI(n,e,t,r,i){(0,F.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=On(e,t);if(P_(n.visibleWrites,s))return null;{const l=yt(n.visibleWrites,s);return zb(l)?i.getChild(t):rf(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function L_(n,e){return function vx(n,e){return tu(n.visibleWrites,e)}(n.writeTree,On(n.treePath,e))}function B_(n,e,t){return function wI(n,e,t,r){const i=On(e,t),s=tu(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?rf(yt(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Kb(n,e){return Zb(On(n.treePath,e),n.writeTree)}function Zb(n,e){return{treePath:n,writeTree:e}}class Ex{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Zh(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,am(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,il(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Zh(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const sf=new class fm{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Yb{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new zl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return B_(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ql(this.viewCache_),s=function V_(n,e,t,r,i,s){return function bx(n,e,t,r,i,s,l){let h;const p=yt(n.visibleWrites,e),y=tu(p,fn());if(null!=y)h=y;else{if(null==t)return[];h=rf(p,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const E=[],D=l.getCompare(),k=s?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let N=k.getNext();for(;N&&E.length<i;)0!==D(N,r)&&E.push(N),N=k.getNext();return E}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function Qb(n,e,t,r,i,s){const l=e.eventCache;if(null!=L_(r,t))return e;{let h,p;if(Ut(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=ql(e),D=Wb(r,y instanceof Ht?y:Ht.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),D,s)}else{const y=nu(r,ql(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=Kt(t);if(".priority"===y){(0,F.hu)(1===$l(t),"Can't have a priority with additional path components");const E=l.getNode();p=e.serverCache.getNode();const D=EI(r,t,E,p);h=null!=D?n.filter.updatePriority(E,D):l.getNode()}else{const E=Rn(t);let D;if(l.isCompleteForChild(y)){p=e.serverCache.getNode();const k=EI(r,t,l.getNode(),p);D=null!=k?l.getNode().getImmediateChild(y).updateChild(E,k):l.getNode().getImmediateChild(y)}else D=B_(r,y,e.serverCache);h=null!=D?n.filter.updateChild(l.getNode(),y,D,E,i,s):l.getNode()}}return tf(e,h,l.isFullyInitialized()||Ut(t),n.filter.filtersNodes())}}function U_(n,e,t,r,i,s,l,h){const p=e.serverCache;let y;const E=l?n.filter:n.filter.getIndexedFilter();if(Ut(t))y=E.updateFullNode(p.getNode(),r,null);else if(E.filtersNodes()&&!p.isFiltered()){const N=p.getNode().updateChild(t,r);y=E.updateFullNode(p.getNode(),N,null)}else{const N=Kt(t);if(!p.isCompleteForPath(t)&&$l(t)>1)return e;const B=Rn(t),ce=p.getNode().getImmediateChild(N).updateChild(B,r);y=".priority"===N?E.updatePriority(p.getNode(),ce):E.updateChild(p.getNode(),N,ce,B,sf,null)}const D=Gb(e,y,p.isFullyInitialized()||Ut(t),E.filtersNodes());return Qb(n,D,t,i,new Yb(i,D,s),h)}function H_(n,e,t,r,i,s,l){const h=e.eventCache;let p,y;const E=new Yb(i,e,s);if(Ut(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),p=tf(e,y,!0,n.filter.filtersNodes());else{const D=Kt(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=tf(e,y,h.isFullyInitialized(),h.isFiltered());else{const k=Rn(t),N=h.getNode().getImmediateChild(D);let B;if(Ut(k))B=r;else{const J=E.getCompleteChild(D);B=null!=J?".priority"===E_(k)&&J.getChild(jC(k)).isEmpty()?J:J.updateChild(k,r):Ht.EMPTY_NODE}p=N.equals(B)?e:tf(e,n.filter.updateChild(h.getNode(),D,B,k,E,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function DI(n,e){return n.eventCache.isCompleteForChild(e)}function Tx(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function TI(n,e,t,r,i,s,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=Ut(t)?r:new Ln(null).setTree(t,r);const E=e.serverCache.getNode();return y.children.inorderTraversal((D,k)=>{if(E.hasChild(D)){const B=Tx(0,e.serverCache.getNode().getImmediateChild(D),k);p=U_(n,p,new Cn(D),B,i,s,l,h)}}),y.children.inorderTraversal((D,k)=>{const N=!e.serverCache.isCompleteForChild(D)&&void 0===k.value;if(!E.hasChild(D)&&!N){const J=Tx(0,e.serverCache.getNode().getImmediateChild(D),k);p=U_(n,p,new Cn(D),J,i,s,l,h)}}),p}class j_{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new S_(r.getIndex()),s=function oI(n){return n.loadsAllData()?new S_(n.getIndex()):n.hasLimit()?new A_(n):new Yh(n)}(r);this.processor_=function Cx(n){return{filter:n}}(s);const l=t.serverCache,h=t.eventCache,p=i.updateFullNode(Ht.EMPTY_NODE,l.getNode(),null),y=s.updateFullNode(Ht.EMPTY_NODE,h.getNode(),null),E=new zl(p,l.isFullyInitialized(),i.filtersNodes()),D=new zl(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=dm(D,E),this.eventGenerator_=new dI(this.query_)}get query(){return this.query_}}function AI(n,e){const t=ql(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ut(e)&&!t.getImmediateChild(Kt(e)).isEmpty())?t.getChild(e):null}function af(n){return 0===n.eventRegistrations_.length}function xI(n,e,t){const r=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function MI(n,e,t,r){e.type===Co.MERGE&&null!==e.source.queryId&&((0,F.hu)(ql(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(nf(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function CI(n,e,t,r,i){const s=new Ex;let l,h;if(t.type===Co.OVERWRITE){const y=t;y.source.fromUser?l=H_(n,e,y.path,y.snap,r,i,s):((0,F.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!Ut(y.path),l=U_(n,e,y.path,y.snap,r,i,h,s))}else if(t.type===Co.MERGE){const y=t;y.source.fromUser?l=function Dx(n,e,t,r,i,s,l){let h=e;return r.foreach((p,y)=>{const E=On(t,p);DI(e,Kt(E))&&(h=H_(n,h,E,y,i,s,l))}),r.foreach((p,y)=>{const E=On(t,p);DI(e,Kt(E))||(h=H_(n,h,E,y,i,s,l))}),h}(n,e,y.path,y.children,r,i,s):((0,F.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),l=TI(n,e,y.path,y.children,r,i,h,s))}else if(t.type===Co.ACK_USER_WRITE){const y=t;l=y.revert?function SI(n,e,t,r,i,s){let l;if(null!=L_(r,t))return e;{const h=new Yb(r,e,i),p=e.eventCache.getNode();let y;if(Ut(t)||".priority"===Kt(t)){let E;if(e.serverCache.isFullyInitialized())E=nu(r,ql(e));else{const D=e.serverCache.getNode();(0,F.hu)(D instanceof Ht,"serverChildren would be complete if leaf node"),E=Wb(r,D)}y=n.filter.updateFullNode(p,E,s)}else{const E=Kt(t);let D=B_(r,E,e.serverCache);null==D&&e.serverCache.isCompleteForChild(E)&&(D=p.getImmediateChild(E)),y=null!=D?n.filter.updateChild(p,E,D,Rn(t),h,s):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(p,E,Ht.EMPTY_NODE,Rn(t),h,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=nu(r,ql(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=L_(r,fn()),tf(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function XN(n,e,t,r,i,s,l){if(null!=L_(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(Ut(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return U_(n,e,t,p.getNode().getChild(t),i,s,h,l);if(Ut(t)){let y=new Ln(null);return p.getNode().forEachChild(sa,(E,D)=>{y=y.set(new Cn(E),D)}),TI(n,e,t,y,i,s,h,l)}return e}{let y=new Ln(null);return r.foreach((E,D)=>{const k=On(t,E);p.isCompleteForPath(k)&&(y=y.set(E,p.getNode().getChild(k)))}),TI(n,e,t,y,i,s,h,l)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==Co.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);l=function JN(n,e,t,r,i){const s=e.serverCache;return Qb(n,Gb(e,s.getNode(),s.isFullyInitialized()||Ut(t),s.isFiltered()),t,r,sf,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function II(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=nf(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(T_(nf(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,i,e,t,r);return function Ix(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,F.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,kI(n,s.changes,s.viewCache.eventCache.getNode(),null)}function kI(n,e,t,r){return function hI(n,e,t,r){const i=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function cx(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),ef(n,i,"child_removed",e,r,t),ef(n,i,"child_added",e,r,t),ef(n,i,"child_moved",s,r,t),ef(n,i,"child_changed",e,r,t),ef(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let pm,z_;class RI{constructor(){this.views=new Map}}function $_(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,F.hu)(null!=s,"SyncTree gave us an op for an invalid query."),MI(s,e,t,r)}{let s=[];for(const l of n.views.values())s=s.concat(MI(l,e,t,r));return s}}function Xb(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=nu(t,i?r:null),p=!1;h?p=!0:r instanceof Ht?(h=Wb(t,r),p=!1):(h=Ht.EMPTY_NODE,p=!1);const y=dm(new zl(h,p,!1),new zl(r,i,!1));return new j_(e,y)}return l}function Jb(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ru(n,e){let t=null;for(const r of n.views.values())t=t||AI(r,e);return t}function G_(n,e){return e._queryParams.loadsAllData()?mm(n):n.views.get(e._queryIdentifier)}function PI(n,e){return null!=G_(n,e)}function Zl(n){return null!=mm(n)}function mm(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let e0=1;class NI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ln(null),this.pendingWriteTree_=function wx(){return{visibleWrites:Oi.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function q_(n,e,t,r,i){return function yx(n,e,t,r,i){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=O_(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?cf(n,new yd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function iu(n,e,t=!1){const r=function F_(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function _r(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&QN(h,r.path)?i=!1:es(r.path,h.path)&&(s=!0)),l--}return!!i&&(s?(function gI(n){n.visibleWrites=yI(n.allWrites,_I,fn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=gx(n.visibleWrites,r.path):kn(r.children,p=>{n.visibleWrites=gx(n.visibleWrites,On(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new Ln(null);return null!=r.snap?s=s.set(fn(),!0):kn(r.children,l=>{s=s.set(new Cn(l),!0)}),cf(n,new R_(r.path,s,t))}return[]}function gm(n,e,t){return cf(n,new yd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function W_(n,e,t,r){const i=e._path,s=n.syncPointTree_.get(i);let l=[];if(s&&("default"===e._queryIdentifier||PI(s,e))){const h=function Ox(n,e,t,r){const i=e._queryIdentifier,s=[];let l=[];const h=Zl(n);if("default"===i)for(const[p,y]of n.views.entries())l=l.concat(xI(y,t,r)),af(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(i);p&&(l=l.concat(xI(p,t,r)),af(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!Zl(n)&&s.push(new(function lf(){return(0,F.hu)(pm,"Reference.ts has not been loaded"),pm}())(e._repo,e._path)),{removed:s,events:l}}(s,e,t,r);(function Rx(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const p=h.removed;l=h.events;const y=-1!==p.findIndex(D=>D._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(i,(D,k)=>Zl(k));if(y&&!E){const D=n.syncPointTree_.subtree(i);if(!D.isEmpty()){const k=function jx(n){return n.fold((e,t,r)=>{if(t&&Zl(t))return[mm(t)];{let i=[];return t&&(i=Jb(t)),kn(r,(s,l)=>{i=i.concat(l)}),i}})}(D);for(let N=0;N<k.length;++N){const B=k[N],J=B.query,ce=Z_(n,B);n.listenProvider_.startListening(hf(J),uf(n,J),ce.hashFn,ce.onComplete)}}}!E&&p.length>0&&!r&&(y?n.listenProvider_.stopListening(hf(e),null):p.forEach(D=>{const k=n.queryToTagMap.get(df(D));n.listenProvider_.stopListening(hf(D),k)})),function $x(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=df(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,p)}return l}function t0(n,e,t,r){const i=n0(n,r);if(null!=i){const s=r0(i),l=s.path,h=s.queryId,p=ui(l,e);return ym(n,l,new yd($b(h),p,t))}return[]}function LI(n,e){const t=n._path;let r=null,i=!1;e.syncPointTree_.foreachOnPath(t,(y,E)=>{const D=ui(y,t);r=r||ru(E,D),i=i||Zl(E)});let l,s=e.syncPointTree_.get(t);s?(i=i||Zl(s),r=r||ru(s,fn())):(s=new RI,e.syncPointTree_=e.syncPointTree_.set(t,s)),null!=r?l=!0:(l=!1,r=Ht.EMPTY_NODE,e.syncPointTree_.subtree(t).foreachChild((E,D)=>{const k=ru(D,fn());k&&(r=r.updateImmediateChild(E,k))}));const h=PI(s,n);if(!h&&!n._queryParams.loadsAllData()){const y=df(n);(0,F.hu)(!e.queryToTagMap.has(y),"View does not exist, but we have a tag");const E=function UI(){return e0++}();e.queryToTagMap.set(y,E),e.tagToQueryMap.set(E,y)}return{syncPoint:s,writesCache:Kl(e.pendingWriteTree_,t),serverCache:r,serverCacheComplete:l,foundAncestorDefaultView:i,viewAlreadyExists:h}}function VI(n,e,t){const{syncPoint:r,serverCache:i,writesCache:s,serverCacheComplete:l,viewAlreadyExists:h,foundAncestorDefaultView:p}=LI(e,n);let y=function OI(n,e,t,r,i,s){const l=Xb(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function xx(n,e){n.eventRegistrations_.push(e)}(l,t),function Mx(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Pn,(s,l)=>{r.push(il(s,l))}),t.isFullyInitialized()&&r.push(T_(t.getNode())),kI(n,r,t.getNode(),e)}(l,t)}(r,e,t,s,i,l);if(!h&&!p){const E=G_(r,e);y=y.concat(function e1(n,e,t){const r=e._path,i=uf(n,e),s=Z_(n,t),l=n.listenProvider_.startListening(hf(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,F.hu)(!Zl(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,E,D)=>{if(!Ut(y)&&E&&Zl(E))return[mm(E).query];{let k=[];return E&&(k=k.concat(Jb(E).map(N=>N.query))),kn(D,(N,B)=>{k=k.concat(B)}),k}});for(let y=0;y<p.length;++y){const E=p[y];n.listenProvider_.stopListening(hf(E),uf(n,E))}}return l}(n,e,E))}return y}function _m(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,h)=>{const y=ru(h,ui(l,e));if(y)return y});return qb(i,e,s,t,!0)}function cf(n,e){return BI(e,n.syncPointTree_,null,Kl(n.pendingWriteTree_,fn()))}function BI(n,e,t,r){if(Ut(n.path))return K_(n,e,t,r);{const i=e.get(fn());null==t&&null!=i&&(t=ru(i,fn()));let s=[];const l=Kt(n.path),h=n.operationForChild(l),p=e.children.get(l);if(p&&h){const y=t?t.getImmediateChild(l):null,E=Kb(r,l);s=s.concat(BI(h,p,y,E))}return i&&(s=s.concat($_(i,n,r,t))),s}}function K_(n,e,t,r){const i=e.get(fn());null==t&&null!=i&&(t=ru(i,fn()));let s=[];return e.children.inorderTraversal((l,h)=>{const p=t?t.getImmediateChild(l):null,y=Kb(r,l),E=n.operationForChild(l);E&&(s=s.concat(K_(E,h,p,y)))}),i&&(s=s.concat($_(i,n,r,t))),s}function Z_(n,e){const t=e.query,r=uf(n,t);return{hashFn:()=>(function Sx(n){return n.viewCache_.serverCache.getNode()}(e)||Ht.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Bx(n,e,t){const r=n0(n,t);if(r){const i=r0(r),s=i.path,l=i.queryId,h=ui(s,e);return ym(n,s,new um($b(l),h))}return[]}(n,t._path,r):function Vx(n,e){return cf(n,new um({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function YN(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return W_(n,t,null,s)}}}}function uf(n,e){const t=df(e);return n.queryToTagMap.get(t)}function df(n){return n._path.toString()+"$"+n._queryIdentifier}function n0(n,e){return n.tagToQueryMap.get(e)}function r0(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Cn(n.substr(0,e))}}function ym(n,e,t){const r=n.syncPointTree_.get(e);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),$_(r,t,Kl(n.pendingWriteTree_,e),null)}function hf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Nx(){return(0,F.hu)(z_,"Reference.ts has not been loaded"),z_}())(n._repo,n._path):n}class s0{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new s0(t)}node(){return this.node_}}class vd{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=On(this.path_,e);return new vd(this.syncTree_,t)}node(){return _m(this.syncTree_,this.path_)}}const o0=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Gx(n[".sv"],e,t):"object"==typeof n[".sv"]?HI(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Gx=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},HI=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,F.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},jI=function(n,e,t,r){return wd(e,new vd(t,n),r)},su=function(n,e,t){return wd(n,new s0(e),t)};function wd(n,e,t){const r=n.getPriority().val(),i=o0(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,h=o0(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new Yn(h,lr(i)):n}{const l=n;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new Yn(i))),l.forEachChild(Pn,(h,p)=>{const y=wd(p,e.getImmediateChild(h),t);y!==p&&(s=s.updateImmediateChild(h,y))}),s}}class a0{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function l0(n,e){let t=e instanceof Cn?e:new Cn(e),r=n,i=Kt(t);for(;null!==i;){const s=(0,F.DV)(r.node.children,i)||{children:{},childCount:0};r=new a0(i,r,s),t=Rn(t),i=Kt(t)}return r}function ou(n){return n.node.value}function c0(n,e){n.node.value=e,Ed(n)}function $I(n){return n.node.childCount>0}function vm(n,e){kn(n.node.children,(t,r)=>{e(new a0(t,n,r))})}function u0(n,e,t,r){t&&!r&&e(n),vm(n,i=>{u0(i,e,!0,r)}),t&&r&&e(n)}function au(n){return new Cn(null===n.parent?n.name:au(n.parent)+"/"+n.name)}function Ed(n){null!==n.parent&&function qx(n,e,t){const r=function zx(n){return void 0===ou(n)&&!$I(n)}(t),i=(0,F.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Ed(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Ed(n))}(n.parent,n.name,n)}const h0=/[\[\].#$\/\u0000-\u001F\u007F]/,GI=/[\[\].#$\u0000-\u001F\u007F]/,f0=10485760,Y_=function(n){return"string"==typeof n&&0!==n.length&&!h0.test(n)},Q_=function(n){return"string"==typeof n&&0!==n.length&&!GI.test(n)},X_=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!u_(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},sl=function(n,e,t,r){r&&void 0===e||bm((0,F.gK)(n,"value"),e,t)},bm=function(n,e,t){const r=t instanceof Cn?new $C(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Jc(r));if("function"==typeof e)throw new Error(n+"contains a function "+Jc(r)+" with contents = "+e.toString());if(u_(e))throw new Error(n+"contains "+e.toString()+" "+Jc(r));if("string"==typeof e&&e.length>f0/3&&(0,F.ug)(e)>f0)throw new Error(n+"contains a string greater than "+f0+" utf8 bytes "+Jc(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(kn(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!Y_(l)))throw new Error(n+" contains an invalid key ("+l+") "+Jc(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function GC(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),Tb(n)})(r,l),bm(n,h,r),function Db(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Jc(r)+" in addition to actual children.")}},J_=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];kn(e,(l,h)=>{const p=new Cn(l);if(bm(i,h,On(t,p)),".priority"===E_(p)&&!X_(h))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=pd(r);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!Y_(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(rx);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&es(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},p0=function(n,e,t){if(!t||void 0!==e){if(u_(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!X_(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Cd=function(n,e,t,r){if(!(r&&void 0===t||Y_(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},wm=function(n,e,t,r){if(!(r&&void 0===t||Q_(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},bs=function(n,e){if(".info"===Kt(e))throw new Error(n+" failed = Can't modify data under /.info/")},m0=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Y_(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Q_(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class qI{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Em(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!zh(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function g0(n,e,t){Em(n,t),WI(n,r=>zh(r,e))}function Io(n,e,t){Em(n,t),WI(n,r=>es(r,e)||es(e,r))}function WI(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Zx(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Zx(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Lr&&ci("event: "+t.toString()),Yc(r)}}}const KI="repo_interrupt";class t1{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=k_(),this.transactionQueueTree_=new a0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function QI(n){const t=n.infoData_.getNode(new Cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Cm(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:QI(n)})}function Yx(n,e,t,r,i){n.dataUpdateCount++;const s=new Cn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const p=(0,F.UI)(t,y=>lr(y));l=function FI(n,e,t,r){const i=n0(n,r);if(i){const s=r0(i),l=s.path,h=s.queryId,p=ui(l,e),y=Ln.fromObject(t);return ym(n,l,new Jh($b(h),p,y))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=lr(t);l=t0(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,F.UI)(t,y=>lr(y));l=function Lx(n,e,t){const r=Ln.fromObject(t);return cf(n,new Jh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=lr(t);l=gm(n.serverSyncTree_,s,p)}let h=s;l.length>0&&(h=ff(n,s)),Io(n.eventQueue_,h,l)}function Qx(n,e){_0(n,"connected",e),!1===e&&function eM(n){lu(n,"onDisconnectEvents");const e=Cm(n),t=k_();Ub(n.onDisconnect_,fn(),(i,s)=>{const l=jI(i,s,n.serverSyncTree_,e);Xh(t,i,l)});let r=[];Ub(t,fn(),(i,s)=>{r=r.concat(gm(n.serverSyncTree_,i,s));const l=w0(n,i);ff(n,l)}),n.onDisconnect_=k_(),Io(n.eventQueue_,fn(),r)}(n)}function _0(n,e,t){const r=new Cn("/.info/"+e),i=lr(t);n.infoData_.updateSnapshot(r,i);const s=gm(n.infoSyncTree_,r,i);Io(n.eventQueue_,r,s)}function ey(n){return n.nextWriteId_++}function XI(n,e){const t=function Hx(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,E)=>{const D=ui(y,t);r=r||ru(E,D)});let i=n.syncPointTree_.get(t);i?r=r||ru(i,fn()):(i=new RI,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,l=s?new zl(r,!0,!1):null;return function Ax(n){return nf(n.viewCache_)}(Xb(i,e,Kl(n.pendingWriteTree_,e._path),s?l.getNode():Ht.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=lr(r).withIndex(e._queryParams.getIndex());if(e._queryParams.loadsAllData())gm(n.serverSyncTree_,e._path,i);else{const l=function Ux(n,e){const{syncPoint:t,serverCache:r,writesCache:i,serverCacheComplete:s}=LI(e,n),l=Xb(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),e._queryParams.loadsAllData()?null:uf(n,e)}(n.serverSyncTree_,e);t0(n.serverSyncTree_,e._path,i,l)}return W_(n.serverSyncTree_,e,null).length>0&&lu(n,"unexpected cancel events in repoGetValue"),i},r=>(lu(n,"get for query "+(0,F.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}function y0(n,e,t,r,i){lu(n,"set",{path:e.toString(),value:t,priority:r});const s=Cm(n),l=lr(t,r),h=_m(n.serverSyncTree_,e),p=su(l,h,s),y=ey(n),E=q_(n.serverSyncTree_,e,p,y,!0);Em(n.eventQueue_,E),n.server_.put(e.toString(),l.val(!0),(k,N)=>{const B="ok"===k;B||ki("set at "+e+" failed: "+k);const J=iu(n.serverSyncTree_,y,!B);Io(n.eventQueue_,e,J),Yl(0,i,k,N)});const D=w0(n,e);ff(n,D),Io(n.eventQueue_,D,[])}function tM(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Bb(n.onDisconnect_,e),Yl(0,t,r,i)})}function JI(n,e,t,r){const i=lr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,l)=>{"ok"===s&&Xh(n.onDisconnect_,e,i),Yl(0,r,s,l)})}function Id(n,e,t){let r;r=".info"===Kt(e._path)?W_(n.infoSyncTree_,e,t):W_(n.serverSyncTree_,e,t),g0(n.eventQueue_,e._path,r)}function v0(n){n.persistentConnection_&&n.persistentConnection_.interrupt(KI)}function lu(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ci(t,...e)}function Yl(n,e,t,r){e&&Yc(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const l=new Error(s);l.code=i,e(l)}})}function b0(n,e,t){return _m(n.serverSyncTree_,e,t)||Ht.EMPTY_NODE}function ty(n,e=n.transactionQueueTree_){if(e||cu(n,e),ou(e)){const t=rD(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function n1(n,e,t){const r=t.map(y=>y.currentWriteId),i=b0(n,e,r);let s=i;const l=i.hash();for(let y=0;y<t.length;y++){const E=t[y];(0,F.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const D=ui(e,E.path);s=s.updateChild(D,E.currentOutputSnapshotRaw)}const h=s.val(!0),p=e;n.server_.put(p.toString(),h,y=>{lu(n,"transaction put response",{path:p.toString(),status:y});let E=[];if("ok"===y){const D=[];for(let k=0;k<t.length;k++)t[k].status=2,E=E.concat(iu(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&D.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();cu(n,l0(n.transactionQueueTree_,e)),ty(n,n.transactionQueueTree_),Io(n.eventQueue_,e,E);for(let k=0;k<D.length;k++)Yc(D[k])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{ki("transaction at "+p.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}ff(n,e)}},l)}(n,au(e),t)}else $I(e)&&vm(e,t=>{ty(n,t)})}function ff(n,e){const t=nD(n,e),r=au(t);return function sM(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],y=ui(t,p.path);let D,E=!1;if((0,F.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)E=!0,D=p.abortReason,i=i.concat(iu(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)E=!0,D="maxretry",i=i.concat(iu(n.serverSyncTree_,p.currentWriteId,!0));else{const k=b0(n,p.path,l);p.currentInputSnapshot=k;const N=e[h].update(k.val());if(void 0!==N){bm("transaction failed: Data returned ",N,p.path);let B=lr(N);"object"==typeof N&&null!=N&&(0,F.r3)(N,".priority")||(B=B.updatePriority(k.getPriority()));const ce=p.currentWriteId,Be=Cm(n),Ke=su(B,k,Be);p.currentOutputSnapshotRaw=B,p.currentOutputSnapshotResolved=Ke,p.currentWriteId=ey(n),l.splice(l.indexOf(ce),1),i=i.concat(q_(n.serverSyncTree_,p.path,Ke,p.currentWriteId,p.applyLocally)),i=i.concat(iu(n.serverSyncTree_,ce,!0))}else E=!0,D="nodata",i=i.concat(iu(n.serverSyncTree_,p.currentWriteId,!0))}Io(n.eventQueue_,t,i),i=[],E&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===D?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(D),!1,null)))}cu(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Yc(r[h]);ty(n,n.transactionQueueTree_)}(n,rD(n,t),r),r}function nD(n,e){let t,r=n.transactionQueueTree_;for(t=Kt(e);null!==t&&void 0===ou(r);)r=l0(r,t),t=Kt(e=Rn(e));return r}function rD(n,e){const t=[];return iD(n,e,t),t.sort((r,i)=>r.order-i.order),t}function iD(n,e,t){const r=ou(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);vm(e,i=>{iD(n,i,t)})}function cu(n,e){const t=ou(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,c0(e,t.length>0?t:void 0)}vm(e,r=>{cu(n,r)})}function w0(n,e){const t=au(nD(n,e)),r=l0(n.transactionQueueTree_,e);return function d0(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Im(n,i)}),Im(n,r),u0(r,i=>{Im(n,i)}),t}function Im(n,e){const t=ou(e);if(t){const r=[];let i=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,F.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,F.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(iu(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?c0(e,void 0):t.length=s+1,Io(n.eventQueue_,au(e),i);for(let l=0;l<r.length;l++)Yc(r[l])}}const Dm=function(n,e){const t=Tm(n),r=t.namespace;return"firebase.com"===t.domain&&ra(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ra("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ki("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new y_(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Cn(t.pathString)}},Tm=function(n){let e="",t="",r="",i="",s="",l=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let E=n.indexOf("/");-1===E&&(E=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(E,D)),E<D&&(i=function ol(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(E,D)));const k=function oM(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ki(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(l="https"===h||"wss"===h,p=parseInt(e.substring(y+1),10)):y=e.length;const N=e.slice(0,y);if("localhost"===N.toLowerCase())t="localhost";else if(N.split(".").length<=2)t=N;else{const B=e.indexOf(".");r=e.substring(0,B).toLowerCase(),t=e.substring(B+1),s=r}"ns"in k&&(s=k.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:s}};class sD{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class oD{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class aD{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Sm{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return tM(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){bs("OnDisconnect.remove",this._path);const e=new F.BH;return JI(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){bs("OnDisconnect.set",this._path),sl("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return JI(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){bs("OnDisconnect.setWithPriority",this._path),sl("OnDisconnect.setWithPriority",e,this._path,!1),p0("OnDisconnect.setWithPriority",t,!1);const r=new F.BH;return function nM(n,e,t,r,i){const s=lr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(l,h)=>{"ok"===l&&Xh(n.onDisconnect_,e,s),Yl(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){bs("OnDisconnect.update",this._path),J_("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function rM(n,e,t,r){if((0,F.xb)(t))return ci("onDisconnect().update() called with empty data.  Don't do anything."),void Yl(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&kn(t,(l,h)=>{const p=lr(h);Xh(n.onDisconnect_,On(e,l),p)}),Yl(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class di{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ut(this._path)?null:E_(this._path)}get ref(){return new qs(this._repo,this._path)}get _queryIdentifier(){const e=Vb(this._queryParams),t=d_(e);return"{}"===t?"default":t}get _queryObject(){return Vb(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof di))return!1;const t=this._repo===e._repo,r=zh(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ib(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function ny(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function uu(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===sa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==jl)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==ia)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Pn){if(null!=e&&!X_(e)||null!=t&&!X_(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof Ob||n.getIndex()===zs,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Am(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class qs extends di{constructor(e,t){super(e,t,new x_,!1)}get parent(){const e=jC(this._path);return null===e?null:new qs(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ql{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Cn(e),r=Dd(this.ref,e);return new Ql(this._node.getChild(t),r,Pn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ql(i,Dd(this.ref,r),Pn)))}hasChild(e){const t=new Cn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function E0(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?Dd(n._root,e):n._root}function lD(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=Dm(e,n._repo.repoInfo_.nodeAdmin);m0("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ra("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),E0(n,t.path.toString())}function Dd(n,e){return null===Kt((n=(0,F.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),wm("child","path",t,!1)):wm("child","path",e,!1),new qs(n._repo,On(n._path,e));var t}function ry(n,e){n=(0,F.m9)(n),bs("set",n._path),sl("set",e,n._path,!1);const t=new F.BH;return y0(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function aM(n,e){J_("update",e,n._path,!1);const t=new F.BH;return function Jx(n,e,t,r){lu(n,"update",{path:e.toString(),value:t});let i=!0;const s=Cm(n),l={};if(kn(t,(h,p)=>{i=!1,l[h]=jI(On(e,h),lr(p),n.serverSyncTree_,s)}),i)ci("update() called with empty data.  Don't do anything."),Yl(0,r,"ok",void 0);else{const h=ey(n),p=function Fx(n,e,t,r){!function N_(n,e,t,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=hm(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Ln.fromObject(t);return cf(n,new Jh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);Em(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,E)=>{const D="ok"===y;D||ki("update at "+e+" failed: "+y);const k=iu(n.serverSyncTree_,h,!D),N=k.length>0?ff(n,e):e;Io(n.eventQueue_,N,k),Yl(0,r,y,E)}),kn(t,y=>{const E=w0(n,On(e,y));ff(n,E)}),Io(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}class iy{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new sD("value",this,new Ql(e.snapshotNode,new qs(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new oD(this,e,t):null}matches(e){return e instanceof iy&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class sy{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new oD(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const r=Dd(new qs(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new sD(e.type,this,new Ql(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof sy&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function pf(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,y=(E,D)=>{Id(n._repo,n,h),p(E,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new aD(t,s||void 0),h="value"===e?new iy(l):new sy(e,l);return function iM(n,e,t){let r;r=".info"===Kt(e._path)?VI(n.infoSyncTree_,e,t):VI(n.serverSyncTree_,e,t),g0(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>Id(n._repo,n,h)}function xm(n,e,t,r){return pf(n,"value",e,t,r)}function S0(n,e,t,r){return pf(n,"child_added",e,t,r)}function A0(n,e,t,r){return pf(n,"child_changed",e,t,r)}function x0(n,e,t,r){return pf(n,"child_moved",e,t,r)}function M0(n,e,t,r){return pf(n,"child_removed",e,t,r)}function cD(n,e,t){let r=null;const i=t?new aD(t):null;"value"===e?r=new iy(i):e&&(r=new sy(e,i)),Id(n._repo,n,r)}class Do{}class k0 extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){sl("endAt",this._value,e._path,!0);const t=M_(e._queryParams,this._value,this._key);if(Am(t),uu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new di(e._repo,e._path,t,e._orderByCalled)}}class uD extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){sl("endBefore",this._value,e._path,!1);const t=function lI(n,e,t){let r,i;return n.index_===sa?("string"==typeof e&&(e=sI(e)),i=M_(n,e,t)):(r=null==t?jl:sI(t),i=M_(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Am(t),uu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new di(e._repo,e._path,t,e._orderByCalled)}}class Pi extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){sl("startAt",this._value,e._path,!0);const t=Qh(e._queryParams,this._value,this._key);if(Am(t),uu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new di(e._repo,e._path,t,e._orderByCalled)}}class dM extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){sl("startAfter",this._value,e._path,!1);const t=function Fb(n,e,t){let r;if(n.index_===sa)"string"==typeof e&&(e=iI(e)),r=Qh(n,e,t);else{let i;i=null==t?ia:iI(t),r=Qh(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Am(t),uu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new di(e._repo,e._path,t,e._orderByCalled)}}class r1 extends Do{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new di(e._repo,e._path,function aI(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class dD extends Do{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new di(e._repo,e._path,function Nb(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Mm extends Do{constructor(e){super(),this._path=e}_apply(e){ny(e,"orderByChild");const t=new Cn(this._path);if(Ut(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ob(t),i=lm(e._queryParams,r);return uu(i),new di(e._repo,e._path,i,!0)}}class R0 extends Do{_apply(e){ny(e,"orderByKey");const t=lm(e._queryParams,sa);return uu(t),new di(e._repo,e._path,t,!0)}}class fD extends Do{_apply(e){ny(e,"orderByPriority");const t=lm(e._queryParams,Pn);return uu(t),new di(e._repo,e._path,t,!0)}}class gM extends Do{_apply(e){ny(e,"orderByValue");const t=lm(e._queryParams,zs);return uu(t),new di(e._repo,e._path,t,!0)}}class _M extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(sl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new k0(this._value,this._key)._apply(new Pi(this._value,this._key)._apply(e))}}function To(n,...e){let t=(0,F.m9)(n);for(const r of e)t=r._apply(t);return t}(function kx(n){(0,F.hu)(!pm,"__referenceConstructor has already been defined"),pm=n})(qs),function Px(n){(0,F.hu)(!z_,"__referenceConstructor has already been defined"),z_=n}(qs);const _f={};function P0(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||ra("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ci("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,l=Dm(s,i),h=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${h.namespace}`,l=Dm(s,i),h=l.repoInfo):p=!l.repoInfo.secure;const E=i&&p?new Xp(Xp.OWNER):new lb(n.name,n.options,e);m0("Invalid Firebase Database URL",l),Ut(l.path)||ra("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function mD(n,e,t,r){let i=_f[e.name];i||(i={},_f[e.name]=i);let s=i[n.toURLString()];return s&&ra("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new t1(n,false,t,r),i[n.toURLString()]=s,s}(h,n,E,new p_(n.name,t));return new vM(D,n)}class vM{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function YI(n,e,t){if(n.stats_=fb(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new cm(n.repoInfo_,(r,i,s,l)=>{Yx(n,r,i,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Qx(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new eu(n.repoInfo_,e,(r,i,s,l)=>{Yx(n,r,i,s,l)},r=>{Qx(n,r)},r=>{!function Xx(n,e){kn(e,(t,r)=>{_0(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function qA(n,e){const t=n.toString();return hb[t]||(hb[t]=e()),hb[t]}(n.repoInfo_,()=>new px(n.stats_,n.server_)),n.infoData_=new cI,n.infoSyncTree_=new NI({startListening:(r,i,s,l)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=gm(n.infoSyncTree_,r._path,p),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),_0(n,"connected",!1),n.serverSyncTree_=new NI({startListening:(r,i,s,l)=>(n.server_.listen(r,s,i,(h,p)=>{const y=l(h,p);Io(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new qs(this._repo,fn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function yM(n,e){const t=_f[e];(!t||t[n.key]!==n)&&ra(`Database ${e}(${n.repoInfo_}) has already been deleted.`),v0(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ra("Cannot call "+e+" on a deleted database.")}}function N0(){nm.IS_TRANSPORT_INITIALIZED&&ki("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function F0(){N0(),el.forceDisallow()}function a1(){N0(),bo.forceDisallow(),el.forceAllow()}function EM(n,e){MC(n,e)}const _D={".sv":"timestamp"};class vD{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}eu.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},eu.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function gD(n){ib(Ji.SDK_VERSION),(0,Ji._registerComponent)(new Gs.wA("database",(e,{instanceIdentifier:t})=>P0(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ji.registerVersion)(rb,"0.13.3",n),(0,Ji.registerVersion)(rb,"0.13.3","esm2017")}();const wD=new Mi.Yd("@firebase/database-compat"),L0=function(n){wD.warn("FIREBASE WARNING: "+n)};class AM{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,L0("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class d1{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Xl{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),wm("DataSnapshot.child","path",e,!1),new Xl(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),wm("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Xl(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new So(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ni{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const l=Ni.getCancelAndContextArgs_("Query.on",r,i),h=(y,E)=>{t.call(l.context,new Xl(this.database,y),E)};h.userCallback=t,h.context=l.context;const p=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(e){case"value":return xm(this._delegate,h,p),t;case"child_added":return S0(this._delegate,h,p),t;case"child_removed":return M0(this._delegate,h,p),t;case"child_changed":return A0(this._delegate,h,p),t;case"child_moved":return x0(this._delegate,h,p),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,cD(this._delegate,e,i)}else cD(this._delegate,e)}get(){return function lM(n){return XI((n=(0,F.m9)(n))._repo,n).then(e=>new Ql(e,new qs(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(e=>new Xl(this.database,e))}once(e,t,r,i){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const s=Ni.getCancelAndContextArgs_("Query.once",r,i),l=new F.BH,h=(y,E)=>{const D=new Xl(this.database,y);t&&t.call(s.context,D,E),l.resolve(D)};h.userCallback=t,h.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),l.reject(y)};switch(e){case"value":xm(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":S0(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":M0(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":A0(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":x0(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new Ni(this.database,To(this._delegate,function s1(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new r1(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new Ni(this.database,To(this._delegate,function hD(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new dD(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new Ni(this.database,To(this._delegate,function fM(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return wm("orderByChild","path",n,!1),new Mm(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new Ni(this.database,To(this._delegate,function pM(){return new R0}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new Ni(this.database,To(this._delegate,function mM(){return new fD}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new Ni(this.database,To(this._delegate,function gf(){return new gM}()))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new Ni(this.database,To(this._delegate,function mf(n=null,e){return Cd("startAt","key",e,!0),new Pi(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new Ni(this.database,To(this._delegate,function hM(n,e){return Cd("startAfter","key",e,!0),new dM(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new Ni(this.database,To(this._delegate,function cM(n,e){return Cd("endAt","key",e,!0),new k0(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new Ni(this.database,To(this._delegate,function uM(n,e){return Cd("endBefore","key",e,!0),new uD(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new Ni(this.database,To(this._delegate,function O0(n,e){return Cd("equalTo","key",e,!0),new _M(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ni))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,F.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,F.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new So(this.database,new qs(this._delegate._repo,this._delegate._path))}}class So extends Ni{constructor(e,t){super(e,new di(t._repo,t._path,new x_,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new So(this.database,Dd(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new So(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new So(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const r=ry(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,L0("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}bs("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const r=aM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function T0(n,e,t){if(bs("setWithPriority",n._path),sl("setWithPriority",e,n._path,!1),p0("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return y0(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function I0(n){return bs("remove",n._path),ry(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function IM(n,e,t){var r;if(n=(0,F.m9)(n),bs("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new F.BH,h=xm(n,()=>{});return function tD(n,e,t,r,i,s){lu(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:ob(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=b0(n,e,void 0);l.currentInputSnapshot=h;const p=l.update(h.val());if(void 0===p)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{bm("transaction failed: Data returned ",p,l.path),l.status=0;const y=l0(n.transactionQueueTree_,e),E=ou(y)||[];let D;E.push(l),c0(y,E),"object"==typeof p&&null!==p&&(0,F.r3)(p,".priority")?(D=(0,F.DV)(p,".priority"),(0,F.hu)(X_(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(_m(n.serverSyncTree_,e)||Ht.EMPTY_NODE).getPriority().val();const k=Cm(n),N=lr(p,D),B=su(N,h,k);l.currentOutputSnapshotRaw=N,l.currentOutputSnapshotResolved=B,l.currentWriteId=ey(n);const J=q_(n.serverSyncTree_,e,B,l.currentWriteId,l.applyLocally);Io(n.eventQueue_,e,J),ty(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,E)=>{let D=null;p?s.reject(p):(D=new Ql(E,new qs(n._repo,n._path),Pn),s.resolve(new vD(y,D)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new d1(s.committed,new Xl(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const r=function D0(n,e){n=(0,F.m9)(n),bs("setPriority",n._path),p0("setPriority",e,!1);const t=new F.BH;return y0(n._repo,On(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const r=function C0(n,e){n=(0,F.m9)(n),bs("push",n._path),sl("push",e,n._path,!0);const t=QI(n._repo),r=lx(t),i=Dd(n,r),s=Dd(n,r);let l;return l=null!=e?ry(s,e).then(()=>s):Promise.resolve(s),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new So(this.database,l));t&&i.then(()=>t(null),l=>t(l));const s=new So(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return bs("Reference.onDisconnect",this._delegate._path),new AM(new Sm(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class ay{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:F0,forceLongPolling:a1}}useEmulator(e,t,r={}){!function c1(n,e,t,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ra("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ra('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Xp(Xp.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);s=new Xp(l)}!function o1(n,e,t,r){n.repoInfo_=new y_(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof So){const t=lD(this._delegate,e.toString());return new So(this,t)}{const t=E0(this._delegate,e);return new So(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=lD(this._delegate,e);return new So(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function bM(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),v0(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function wM(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function eD(n){n.persistentConnection_&&n.persistentConnection_.resume(KI)}(n._repo)}(this._delegate)}}ay.ServerValue={TIMESTAMP:function CM(){return _D}(),increment:n=>function yD(n){return{".sv":{increment:n}}}(n)};var f1=Object.freeze({__proto__:null,initStandalone:function h1({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){ib(t);const l=new Gs.zt("auth-internal",new Gs.H0("database-standalone"));return l.setComponent(new Gs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new ay(P0(n,l,void 0,e,s),n),namespace:i}}});const p1=ay.ServerValue;function xM(n){return null==n}function V0(n){return"function"==typeof n.set}function km(n,e){return V0(e)?e:n.ref(e)}function B0(n,e){if(function g1(n){return"string"==typeof n}(n))return e.stringCase();if(V0(n))return e.firebaseCase();if(function ly(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function vf(n,e,t="on",r=Zc.z){return new Wn.y(i=>{let s=null;return s=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,ot.U)(i=>{const{snapshot:s,prevKey:l}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:l,key:h}}),(0,Rv.B)())}function cy(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function MM(n,e){const{payload:t,prevKey:r,key:i}=e,s=cy(n,i),l=function CD(n,e){if(xM(e))return 0;{const t=cy(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function U0(n){return(xM(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function kM(n,e,t){return function _1(n,e,t){return vf(n,"value","once",t).pipe(Cr(r=>{const i=[Ue(r)];return e.forEach(s=>i.push(vf(n,s,"on",t))),(0,xt.T)(...i).pipe(Pa(MM,[]))}),Hl())}(n,e=U0(e),t)}function ID(n,e,t){const r=(e=U0(e)).map(i=>vf(n,i,"on",t));return(0,xt.T)(...r)}function DD(n,e){return function(r,i){return B0(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function y1(n){return function(t){return t?B0(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function PM(n,e){return function(){return vf(n,"value","on",e)}}!function m1(n){n.INTERNAL.registerComponent(new Gs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new ay(i,r)},"PUBLIC").setServiceProps({Reference:So,Query:Ni,Database:ay,DataSnapshot:Xl,enableLogging:EM,INTERNAL:f1,ServerValue:p1}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.3")}(a_.Z);const FM=new u.OlP("angularfire2.realtimeDatabaseURL"),LM=new u.OlP("angularfire2.database.use-emulator");let hy,H0=(()=>{class n{constructor(t,r,i,s,l,h,p,y,E,D,k,N,B,J,ce){this.schedulers=h;const Be=p,Ke=(0,Mr.on)(t,l,r);y&&s_(Ke,l,E,k,N,B,D,J),this.database=(0,Mr.cc)(`${Ke.name}.database.${i}`,"AngularFireDatabase",Ke.name,()=>{const nt=l.runOutsideAngular(()=>Ke.database(i||void 0));return Be&&nt.useEmulator(...Be),nt},[Be])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>km(this.database,t));let s=i;return r&&(s=r(i)),function v1(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:DD(r,"update"),set:DD(r,"set"),push:i=>r.push(i),remove:y1(r),snapshotChanges:i=>kM(n,i,t).pipe(cn.iC),stateChanges:i=>ID(n,i,t).pipe(cn.iC),auditTrail:i=>function RM(n,e,t){return function uy(n,e,t){return function OM(n,e){return vf(n,"value","on",e).pipe((0,ot.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function o_(...n){const e=(0,Os.jO)(n);return(0,yn.e)((t,r)=>{const i=n.length,s=new Array(i);let l=n.map(()=>!1),h=!1;for(let p=0;p<i;p++)(0,ms.Xf)(n[p]).subscribe((0,In.x)(r,y=>{s[p]=y,!h&&!l[p]&&(l[p]=!0,(h=l.every(fo.y))&&(l=null))},ad.Z));t.subscribe((0,In.x)(r,p=>{if(h){const y=[p,...s];r.next(e?e(...y):y)}}))})}(e),(0,ot.U)(([i,s])=>{const l=i.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:l,loadedKeys:h}}),function qp(n){return(0,yn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,In.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ot.U)(i=>i.actions))}(n,ID(n,e).pipe(Pa((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(cn.iC),valueChanges:(i,s)=>kM(n,i,t).pipe((0,ot.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),cn.iC)}}(s,this)}object(t){return function NM(n,e){return{query:n,snapshotChanges:()=>PM(n,e.schedulers.outsideAngular)().pipe(cn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>PM(n,e.schedulers.outsideAngular)().pipe(cn.iC,(0,ot.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>km(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Mr.Dh),u.LFG(Mr.xv,8),u.LFG(FM,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(cn.HU),u.LFG(LM,8),u.LFG(Ul,8),u.LFG(Jv,8),u.LFG(Xa,8),u.LFG(i_,8),u.LFG(eb,8),u.LFG(zp,8),u.LFG(tb,8),u.LFG(sd,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),VM=(()=>{class n{constructor(){Gp.Z.registerVersion("angularfire",cn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[H0]}),n})(),dy=(()=>{class n{constructor(t,r,i){this.frauth=t,this.afd=r,this.router=i}signUp(t,r){return this.frauth.createUserWithEmailAndPassword(t,r).then(i=>{this.saveUserData(i.user),this.router.navigate(["/sign-in"])}).catch(i=>{window.alert(i.message)})}signIn(t,r){return this.frauth.signInWithEmailAndPassword(t,r).then(()=>{this.router.navigate(["/dashboard/list"])}).catch(i=>{window.alert(i.message)})}saveUserData(t){return this.afd.object(`/users/${t.uid}`).set({email:t.email})}signOut(){return this.frauth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ul),u.LFG(H0),u.LFG(Kr))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{hy=typeof Intl<"u"&&Intl.v8BreakIterator}catch{hy=!1}let bf,ws=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function ai(n){return n===Dn}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!hy)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fy=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function TD(){if(bf)return bf;if("object"!=typeof document||!document)return bf=new Set(fy),bf;let n=document.createElement("input");return bf=new Set(fy.filter(e=>(n.setAttribute("type",e),n.type===e))),bf}let hi,Td,my;function wf(n){return function BM(){if(null==hi&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>hi=!0}))}finally{hi=hi||!1}return hi}()?n:!!n.capture}function j0(){if(null==Td){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Td=!1,Td;if("scrollBehavior"in document.documentElement.style)Td=!0;else{const n=Element.prototype.scrollTo;Td=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Td}function Sd(n){return n.composedPath?n.composedPath()[0]:n.target}function gy(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function _y(n){return sr((e,t)=>n<=t)}function ec(n){return(0,yn.e)((e,t)=>{(0,ms.Xf)(n).subscribe((0,In.x)(t,()=>t.complete(),ad.Z)),!t.closed&&e.subscribe(t)})}function fi(n){return null!=n&&"false"!=`${n}`}function yy(n,e=0){return function Y0(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function VD(n){return Array.isArray(n)?n:[n]}function Yr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function xd(n){return n instanceof u.SBq?n.nativeElement:n}function hk(n,e=Zc.z){return(0,yn.e)((t,r)=>{let i=null,s=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function p(){const y=l+n,E=e.now();if(E<y)return i=this.schedule(void 0,y-E),void r.add(i);h()}t.subscribe((0,In.x)(r,y=>{s=y,l=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}const K1=new Set;let vy,yG=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):bG}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function vG(n){if(!K1.has(n))try{vy||(vy=document.createElement("style"),vy.setAttribute("type","text/css"),document.head.appendChild(vy)),vy.sheet&&(vy.sheet.insertRule(`@media ${n} {body{ }}`,0),K1.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ws))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bG(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let fk=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Wt.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Z1(VD(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=Ii(Z1(VD(t)).map(l=>this._registerQuery(l).observable));return s=Ti(s.pipe(gs(1)),s.pipe(_y(1),hk(0))),s.pipe((0,ot.U)(l=>{const h={matches:!1,breakpoints:{}};return l.forEach(({matches:p,query:y})=>{h.matches=h.matches||p,h.breakpoints[y]=p}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Wn.y(l=>{const h=p=>this._zone.run(()=>l.next(p));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(Fs(r),(0,ot.U)(({matches:l})=>({query:t,matches:l})),ec(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(yG),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Z1(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function J1(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function eF(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const xG=new u.OlP("cdk-input-modality-detector-options"),MG={ignoreKeys:[18,17,224,91,16]},by=wf({passive:!0,capture:!0});let kG=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new ir(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(h=>h===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Sd(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(J1(l)?"keyboard":"mouse"),this._mostRecentTarget=Sd(l))},this._onTouchstart=l=>{eF(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Sd(l))},this._options={...MG,...s},this.modalityDetected=this._modality.pipe(_y(1)),this.modalityChanged=this.modalityDetected.pipe(Hl()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,by),i.addEventListener("mousedown",this._onMousedown,by),i.addEventListener("touchstart",this._onTouchstart,by)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,by),document.removeEventListener("mousedown",this._onMousedown,by),document.removeEventListener("touchstart",this._onTouchstart,by))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ws),u.LFG(u.R0b),u.LFG(oe),u.LFG(xG,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const RG=new u.OlP("liveAnnouncerElement",{providedIn:"root",factory:function OG(){return null}}),PG=new u.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let nF=(()=>{class n{constructor(t,r,i,s){this._ngZone=r,this._defaultOptions=s,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let s,l;return 1===r.length&&"number"==typeof r[0]?l=r[0]:[s,l]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=i&&i.politeness?i.politeness:"polite"),null==l&&i&&(l=i.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(h=>this._currentResolve=h)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof l&&(this._previousTimeout=setTimeout(()=>this.clear(),l)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(RG,8),u.LFG(u.R0b),u.LFG(oe),u.LFG(PG,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const NG=new u.OlP("cdk-focus-monitor-default-options"),BD=wf({passive:!0,capture:!0});let pk=(()=>{class n{constructor(t,r,i,s,l){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Wt.x,this._rootNodeFocusAndBlurListener=h=>{for(let y=Sd(h);y;y=y.parentElement)"focus"===h.type?this._onFocus(h,y):this._onBlur(h,y)},this._document=s,this._detectionMode=l?.detectionMode||0}monitor(t,r=!1){const i=xd(t);if(!this._platform.isBrowser||1!==i.nodeType)return Ue(null);const s=function SD(n){if(function HM(){if(null==my){const n=typeof document<"u"?document.head:null;my=!(!n||!n.createShadowRoot&&!n.attachShadow)}return my}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),l=this._elementInfo.get(i);if(l)return r&&(l.checkChildren=!0),l.subject;const h={checkChildren:r,subject:new Wt.x,rootNode:s};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const r=xd(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=xd(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,p])=>this._originChanged(h,r,p)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Sd(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,BD),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,BD)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ec(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,BD),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,BD),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let l=0;l<s.length;l++)if(s[l].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(ws),u.LFG(kG),u.LFG(oe,8),u.LFG(NG,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rF="cdk-high-contrast-black-on-white",iF="cdk-high-contrast-white-on-black",mk="cdk-high-contrast-active";let FG=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,u.f3M)(fk).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(mk,rF,iF),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(mk,rF):2===r&&t.add(mk,iF)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ws),u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LG=new u.OlP("cdk-dir-doc",{providedIn:"root",factory:function VG(){return(0,u.f3M)(oe)}}),BG=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let sF=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new u.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function UG(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?BG.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(LG,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Q0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const jG=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function HG(){return!0}});let Qr=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!gy()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(FG),u.LFG(jG,8),u.LFG(oe))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Q0,Q0]}),n})();function lF(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=fi(e)}}}function X0(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function cF(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=fi(e)}}}function uF(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?yy(t):this.defaultTabIndex}}}function $G(n){return class extends n{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let dF=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class zG{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const hF={enterDuration:225,exitDuration:150},gk=wf({passive:!0}),fF=["mousedown","touchstart"],pF=["mouseup","mouseleave","touchend","touchcancel"];class WG{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=xd(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...hF,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const l=r.radius||function KG(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,p=t-i.top,y=s.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=h-l+"px",E.style.top=p-l+"px",E.style.height=2*l+"px",E.style.width=2*l+"px",null!=r.color&&(E.style.backgroundColor=r.color),E.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(E);const D=window.getComputedStyle(E),N=D.transitionDuration,B="none"===D.transitionProperty||"0s"===N||"0s, 0s"===N,J=new zG(this,E,r,B);E.style.transform="scale3d(1, 1, 1)",J.state=0,r.persistent||(this._mostRecentTransientRipple=J);let ce=null;return!B&&(y||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Be=()=>this._finishRippleTransition(J),Ke=()=>this._destroyRipple(J);E.addEventListener("transitionend",Be),E.addEventListener("transitioncancel",Ke),ce={onTransitionEnd:Be,onTransitionCancel:Ke}}),this._activeRipples.set(J,ce),(B||!y)&&this._finishRippleTransition(J),J}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...hF,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=xd(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(fF))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(pF),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=J1(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!eF(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,gk)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(fF.forEach(e=>{this._triggerElement.removeEventListener(e,this,gk)}),this._pointerUpEventsRegistered&&pF.forEach(e=>{this._triggerElement.removeEventListener(e,this,gk)}))}}const ZG=new u.OlP("mat-ripple-global-options");let UD=(()=>{class n{constructor(t,r,i,s,l){this._elementRef=t,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new WG(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(ws),u.Y36(ZG,8),u.Y36(u.QbO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),mF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Qr,Qr]}),n})();function gF(...n){const e=(0,Os.jO)(n),{args:t,keys:r}=Ou(n),i=new Wn.y(s=>{const{length:l}=t;if(!l)return void s.complete();const h=new Array(l);let p=l,y=l;for(let E=0;E<l;E++){let D=!1;(0,ms.Xf)(t[E]).subscribe((0,In.x)(s,k=>{D||(D=!0,y--),h[E]=k},()=>p--,void 0,()=>{(!p||!D)&&(y||s.next(r?Al(r,h):h),s.complete())}))}});return e?i.pipe(Ps(e)):i}class YG{}class If{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof If?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new If;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof If?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===s.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class QG{encodeKey(e){return _F(e)}encodeValue(e){return _F(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const JG=/%(\d[a-f0-9])/gi,ez={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _F(n){return encodeURIComponent(n).replace(JG,(e,t)=>ez[t]??e)}function HD(n){return`${n}`}class Df{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new QG,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function XG(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[l,h]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(l)||[];p.push(h),t.set(l,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(HD):[HD(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Df({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(HD(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(HD(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class tz{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function yF(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function vF(n){return typeof Blob<"u"&&n instanceof Blob}function bF(n){return typeof FormData<"u"&&n instanceof FormData}class ew{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function nz(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new If),this.context||(this.context=new tz),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new Df,this.urlWithParams=t}serializeBody(){return null===this.body?null:yF(this.body)||vF(this.body)||bF(this.body)||function rz(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Df?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||bF(this.body)?null:vF(this.body)?this.body.type||null:yF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Df?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,y=e.params||this.params;const E=e.context??this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((D,k)=>D.set(k,e.setHeaders[k]),p)),e.setParams&&(y=Object.keys(e.setParams).reduce((D,k)=>D.set(k,e.setParams[k]),y)),new ew(t,r,s,{params:y,headers:p,context:E,reportProgress:h,responseType:i,withCredentials:l})}}var ns=(()=>((ns=ns||{})[ns.Sent=0]="Sent",ns[ns.UploadProgress=1]="UploadProgress",ns[ns.ResponseHeader=2]="ResponseHeader",ns[ns.DownloadProgress=3]="DownloadProgress",ns[ns.Response=4]="Response",ns[ns.User=5]="User",ns))();class _k extends class iz{constructor(e,t=200,r="OK"){this.headers=e.headers||new If,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=ns.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new _k({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function yk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let EF=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof ew)s=t;else{let p,y;p=i.headers instanceof If?i.headers:new If(i.headers),i.params&&(y=i.params instanceof Df?i.params:new Df({fromObject:i.params})),s=new ew(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=Ue(s).pipe(xl(p=>this.handler.handle(p)));if(t instanceof ew||"events"===i.observe)return l;const h=l.pipe(sr(p=>p instanceof _k));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,ot.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,ot.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,ot.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,ot.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Df).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,yk(i,r))}post(t,r,i={}){return this.request("POST",t,yk(i,r))}put(t,r,i={}){return this.request("PUT",t,yk(i,r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(YG))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const oz=["*"];let jD;function tw(n){return function az(){if(void 0===jD&&(jD=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(jD=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return jD}()?.createHTML(n)||n}function CF(n){return Error(`Unable to find icon with the name "${n}"`)}function IF(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function DF(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Rm{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let $D=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new Rm(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const l=this._sanitizer.sanitize(u.q3G.HTML,i);if(!l)throw DF(i);const h=tw(l);return this._addSvgIconConfig(t,r,new Rm("",h,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Rm(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(u.q3G.HTML,r);if(!s)throw DF(r);const l=tw(s);return this._addSvgIconSetConfig(t,new Rm("",l,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,t);if(!r)throw IF(t);const i=this._cachedIconsByUrl.get(r);return i?Ue(GD(i)):this._loadSvgIconFromConfig(new Rm(t,null)).pipe((0,vn.b)(s=>this._cachedIconsByUrl.set(r,s)),(0,ot.U)(s=>GD(s)))}getNamedSvgIcon(t,r=""){const i=TF(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const l=this._iconSetConfigs.get(r);return l?this._getSvgFromIconSetConfigs(t,l):Wo(CF(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Ue(GD(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,ot.U)(r=>GD(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Ue(i):gF(r.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(Qi(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(u.q3G.RESOURCE_URL,l.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),Ue(null)})))).pipe((0,ot.U)(()=>{const l=this._extractIconWithNameFromAnySet(t,r);if(!l)throw CF(t);return l}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const l=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(l,t,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,vn.b)(r=>t.svgText=r),(0,ot.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Ue(null):this._fetchIcon(t).pipe((0,vn.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const l=s.cloneNode(!0);if(l.removeAttribute("id"),"svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l,i);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l),i);const h=this._svgElementFromString(tw("<svg></svg>"));return h.appendChild(l),this._setSvgAttributes(h,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(tw("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:l,value:h}=i[s];"id"!==l&&r.setAttribute(l,h)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,s=i?.withCredentials??!1;if(!this._httpClient)throw function lz(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const l=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,r);if(!l)throw IF(r);const h=this._inProgressUrlFetches.get(l);if(h)return h;const p=this._httpClient.get(l,{responseType:"text",withCredentials:s}).pipe((0,ot.U)(y=>tw(y)),Zo(()=>this._inProgressUrlFetches.delete(l)),(0,Rv.B)());return this._inProgressUrlFetches.set(l,p),p}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(TF(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return uz(s)?new Rm(s.url,null,s.options):new Rm(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(EF,8),u.LFG(Ac),u.LFG(oe,8),u.LFG(u.qLn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function GD(n){return n.cloneNode(!0)}function TF(n,e){return n+":"+e}function uz(n){return!(!n.url||!n.options)}const dz=X0(class{constructor(n){this._elementRef=n}}),hz=new u.OlP("MAT_ICON_DEFAULT_OPTIONS"),fz=new u.OlP("mat-icon-location",{providedIn:"root",factory:function pz(){const n=(0,u.f3M)(oe),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),SF=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],mz=SF.map(n=>`[${n}]`).join(", "),gz=/^url\(['"]?#(.*?)['"]?\)$/;let zD=(()=>{class n extends dz{constructor(t,r,i,s,l,h){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=l,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=mo.w0.EMPTY,h&&(h.color&&(this.color=this.defaultColor=h.color),h.fontSet&&(this.fontSet=h.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=fi(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?[this._iconRegistry.classNameForFontAlias(this.fontSet)]:this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(l=>{s.setAttribute(l.name,`url('${t}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(mz),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)SF.forEach(l=>{const h=r[s],p=h.getAttribute(l),y=p?p.match(gz):null;if(y){let E=i.get(h);E||(E=[],i.set(h,E)),E.push({name:l,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(gs(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36($D),u.$8M("aria-hidden"),u.Y36(fz),u.Y36(u.qLn),u.Y36(hz,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(u.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),u.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[u.qOj],ngContentSelectors:oz,decls:1,vars:0,template:function(t,r){1&t&&(u.F$t(),u.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),_z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Qr,Qr]}),n})();const yz=["*",[["mat-toolbar-row"]]],vz=["*","mat-toolbar-row"],bz=X0(class{constructor(n){this._elementRef=n}});let wz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),Ez=(()=>{class n extends bz{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(ws),u.Y36(oe))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&u.Suo(i,wz,5),2&t){let s;u.iGM(s=u.CRH())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&u.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[u.qOj],ngContentSelectors:vz,decls:2,vars:0,template:function(t,r){1&t&&(u.F$t(yz),u.Hsn(0),u.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),Cz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Qr,Qr]}),n})(),Iz=(()=>{class n{constructor(t){this.authService=t,this.status=!1}signOut(){this.authService.signOut()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(dy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-dashboard"]],decls:21,vars:1,consts:[[1,"top-nav"],["routerLink","list"],["routerLinkActive","top-nav__active",1,"top-nav__item"],["routerLink","recipes"],["routerLink","drafts"],[1,"bottom-nav",3,"ngClass"],[1,"bottom-nav__btn"],[1,"bottom-nav__btn",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"mat-toolbar",0)(1,"a",1)(2,"div",2),u._uU(3,"List "),u.qZA()(),u.TgZ(4,"a",3)(5,"div",2),u._uU(6,"Recipes"),u.qZA()(),u.TgZ(7,"a",4)(8,"div",2),u._uU(9,"Drafts"),u.qZA()()(),u._UZ(10,"router-outlet"),u.TgZ(11,"nav",5)(12,"button",6)(13,"mat-icon"),u._uU(14,"more_vert"),u.qZA()(),u.TgZ(15,"button",7),u.NdJ("click",function(){return r.status=!r.status}),u.TgZ(16,"mat-icon"),u._uU(17,"settings"),u.qZA()(),u.TgZ(18,"button",7),u.NdJ("click",function(){return r.signOut()}),u.TgZ(19,"mat-icon"),u._uU(20,"exit_to_app"),u.qZA()()()),2&t&&(u.xp6(11),u.Q6J("ngClass",r.status?"up":"down"))},dependencies:[oc,Tp,nd,VE,zD,Ez],styles:['[_nghost-%COMP%]{position:relative;display:block;height:100%;max-height:100vh;overflow-y:scroll}.top-nav[_ngcontent-%COMP%]{display:flex;justify-content:space-around;background-color:#fff;font-weight:400}.top-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#313131}.top-nav__item[_ngcontent-%COMP%]{position:relative}.top-nav__active[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:-15px;left:50%;transform:translate(-50%);width:80px;height:6px;border-radius:15px;background-color:#673ab7}.bottom-nav[_ngcontent-%COMP%]{position:fixed;left:0;bottom:0;width:100%;display:flex;justify-content:space-around;align-items:center;height:5rem;background-color:#faf9fd;border-radius:25px 25px 0 0;box-shadow:0 0 2px #b7b7b7}.bottom-nav__btn[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#673ab7;transform:scale(1.3);cursor:pointer}']}),n})(),Dz=(()=>{class n{constructor(t,r){this.db=t,this.frauth=r,this.useruid="",this.frauth.onAuthStateChanged(i=>{i&&(this.useruid=i.uid)})}getAllDrafts(){return this.db.list(`/users/${this.useruid}/drafts`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(H0),u.LFG(Ul))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AF=(()=>{class n{constructor(){this._listeners=[]}notify(t,r){for(let i of this._listeners)i(t,r)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(r=>t!==r)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xF=new u.OlP("CdkAccordion");let Tz=0,Sz=(()=>{class n{constructor(t,r,i){this.accordion=t,this._changeDetectorRef=r,this._expansionDispatcher=i,this._openCloseAllSubscription=mo.w0.EMPTY,this.closed=new u.vpe,this.opened=new u.vpe,this.destroyed=new u.vpe,this.expandedChange=new u.vpe,this.id="cdk-accordion-child-"+Tz++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=i.listen((s,l)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===l&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=fi(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=fi(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xF,12),u.Y36(u.sBO),u.Y36(AF))},n.\u0275dir=u.lG2({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[u._Bn([{provide:xF,useValue:void 0}])]}),n})(),Az=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();class vk{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class bk extends vk{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class wk extends vk{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class xz extends vk{constructor(e){super(),this.element=e instanceof u.SBq?e.nativeElement:e}}class Ek{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof bk?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof wk?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof xz?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Mz extends Ek{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=l=>{const h=l.element,p=this._document.createComment("dom-portal");h.parentNode.insertBefore(p,h),this.outletElement.appendChild(h),this._attachedPortal=l,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(h,p)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||u.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Ck=(()=>{class n extends Ek{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new u.vpe,this.attachDomPortal=s=>{const l=s.element,h=this._document.createComment("dom-portal");s.setAttachedHost(this),l.parentNode.insertBefore(h,l),this._getRootNode().appendChild(l),this._attachedPortal=s,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(l,h)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),l=r.createComponent(s,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=t,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u._Vd),u.Y36(u.s_b),u.Y36(oe))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[u.qOj]}),n})(),Ik=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();class MF{}const Md="*";function qD(n,e){return{type:7,name:n,definitions:e,options:{}}}function nw(n,e=null){return{type:4,styles:e,timings:n}}function kF(n,e=null){return{type:2,steps:n,options:e}}function tc(n){return{type:6,styles:n,offset:null}}function Om(n,e,t){return{type:0,name:n,styles:e,options:t}}function rw(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function RF(n){Promise.resolve(null).then(n)}class iw{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){RF(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class OF{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?RF(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++r==s&&this._onDestroy()}),l.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,h)=>Math.max(l,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Rz=["body"];function Oz(n,e){}const Pz=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Nz=["mat-expansion-panel-header","*","mat-action-row"];function Fz(n,e){if(1&n&&u._UZ(0,"span",2),2&n){const t=u.oxw();u.Q6J("@indicatorRotate",t._getExpandedState())}}const Lz=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Vz=["mat-panel-title","mat-panel-description","*"],PF=new u.OlP("MAT_ACCORDION"),NF="225ms cubic-bezier(0.4,0.0,0.2,1)",FF={indicatorRotate:qD("indicatorRotate",[Om("collapsed, void",tc({transform:"rotate(0deg)"})),Om("expanded",tc({transform:"rotate(180deg)"})),rw("expanded <=> collapsed, void => collapsed",nw(NF))]),bodyExpansion:qD("bodyExpansion",[Om("collapsed, void",tc({height:"0px",visibility:"hidden"})),Om("expanded",tc({height:"*",visibility:"visible"})),rw("expanded <=> collapsed, void => collapsed",nw(NF))])},LF=new u.OlP("MAT_EXPANSION_PANEL");let Bz=(()=>{class n{constructor(t,r){this._template=t,this._expansionPanel=r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc),u.Y36(LF,8))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),Uz=0;const VF=new u.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let BF=(()=>{class n extends Sz{constructor(t,r,i,s,l,h,p){super(t,r,i),this._viewContainerRef=s,this._animationMode=h,this._hideToggle=!1,this.afterExpand=new u.vpe,this.afterCollapse=new u.vpe,this._inputChanges=new Wt.x,this._headerId="mat-expansion-panel-header-"+Uz++,this._bodyAnimationDone=new Wt.x,this.accordion=t,this._document=l,this._bodyAnimationDone.pipe(Hl((y,E)=>y.fromState===E.fromState&&y.toState===E.toState)).subscribe(y=>{"void"!==y.fromState&&("expanded"===y.toState?this.afterExpand.emit():"collapsed"===y.toState&&this.afterCollapse.emit())}),p&&(this.hideToggle=p.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=fi(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Fs(null),sr(()=>this.expanded&&!this._portal),gs(1)).subscribe(()=>{this._portal=new wk(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,r=this._body.nativeElement;return t===r||r.contains(t)}return!1}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(PF,12),u.Y36(u.sBO),u.Y36(AF),u.Y36(u.s_b),u.Y36(oe),u.Y36(u.QbO,8),u.Y36(VF,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(t,r,i){if(1&t&&u.Suo(i,Bz,5),2&t){let s;u.iGM(s=u.CRH())&&(r._lazyContent=s.first)}},viewQuery:function(t,r){if(1&t&&u.Gf(Rz,5),2&t){let i;u.iGM(i=u.CRH())&&(r._body=i.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,r){2&t&&u.ekj("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[u._Bn([{provide:PF,useValue:void 0},{provide:LF,useExisting:n}]),u.qOj,u.TTD],ngContentSelectors:Nz,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,r){1&t&&(u.F$t(Pz),u.Hsn(0),u.TgZ(1,"div",0,1),u.NdJ("@bodyExpansion.done",function(s){return r._bodyAnimationDone.next(s)}),u.TgZ(3,"div",2),u.Hsn(4,1),u.YNc(5,Oz,0,0,"ng-template",3),u.qZA(),u.Hsn(6,2),u.qZA()),2&t&&(u.xp6(1),u.Q6J("@bodyExpansion",r._getExpandedState())("id",r.id),u.uIk("aria-labelledby",r._headerId),u.xp6(4),u.Q6J("cdkPortalOutlet",r._portal))},dependencies:[Ck],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[FF.bodyExpansion]},changeDetection:0}),n})();class Hz{}const jz=uF(Hz);let $z=(()=>{class n extends jz{constructor(t,r,i,s,l,h,p){super(),this.panel=t,this._element=r,this._focusMonitor=i,this._changeDetectorRef=s,this._animationMode=h,this._parentChangeSubscription=mo.w0.EMPTY;const y=t.accordion?t.accordion._stateChanges.pipe(sr(E=>!(!E.hideToggle&&!E.togglePosition))):Ar.E;this.tabIndex=parseInt(p||"")||0,this._parentChangeSubscription=(0,xt.T)(t.opened,t.closed,y,t._inputChanges.pipe(sr(E=>!!(E.hideToggle||E.disabled||E.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(sr(()=>t._containsFocus())).subscribe(()=>i.focusVia(r,"program")),l&&(this.expandedHeight=l.expandedHeight,this.collapsedHeight=l.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:(function Z0(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey})(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,r){t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(BF,1),u.Y36(u.SBq),u.Y36(pk),u.Y36(u.sBO),u.Y36(VF,8),u.Y36(u.QbO,8),u.$8M("tabindex"))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),2&t&&(u.uIk("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),u.Udp("height",r._getHeaderHeight()),u.ekj("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[u.qOj],ngContentSelectors:Vz,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,r){1&t&&(u.F$t(Lz),u.TgZ(0,"span",0),u.Hsn(1),u.Hsn(2,1),u.Hsn(3,2),u.qZA(),u.YNc(4,Fz,1,1,"span",1)),2&t&&(u.xp6(4),u.Q6J("ngIf",r._showToggle()))},dependencies:[Hn],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[FF.indicatorRotate]},changeDetection:0}),n})(),Gz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),n})(),zz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[xs,Qr,Az,Ik]}),n})();function qz(n,e){if(1&n&&(u.TgZ(0,"li",10),u._uU(1),u.qZA()),2&n){const t=u.oxw().$implicit,r=u.oxw().$implicit;u.xp6(1),u.hij(" ",r[t]," ")}}function Wz(n,e){if(1&n&&(u.ynx(0),u.YNc(1,qz,2,1,"li",9),u.BQk()),2&n){const t=e.$implicit;u.xp6(1),u.Q6J("ngIf","key"!=t)}}function Kz(n,e){if(1&n&&(u.TgZ(0,"mat-expansion-panel",1)(1,"mat-expansion-panel-header",2),u._uU(2),u.qZA(),u.TgZ(3,"mat-panel-description")(4,"div",3)(5,"ul",4),u.YNc(6,Wz,2,1,"ng-container",5),u.qZA()(),u.TgZ(7,"div",6)(8,"button",7),u._uU(9,"Load draft"),u.qZA(),u.TgZ(10,"button",8),u._uU(11,"Add to current list"),u.qZA()()()()),2&n){const t=e.$implicit,r=u.oxw();u.xp6(2),u.hij(" ",t.key," "),u.xp6(4),u.Q6J("ngForOf",r.objectKeys(t))}}let Zz=(()=>{class n{constructor(t,r){this.frauth=t,this.draftsService=r,this.Object=Object,this.item={}}ngOnInit(){this.frauth.onAuthStateChanged(t=>{t&&this.retrieveDrafts()})}objectKeys(t){return Object.keys(t)}retrieveDrafts(){this.draftsService.getAllDrafts().snapshotChanges().pipe((0,ot.U)(t=>t.map(r=>({key:r.payload.key,...r.payload.val()})))).subscribe(t=>{this.drafts=t})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ul),u.Y36(Dz))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-drafts"]],decls:1,vars:1,consts:[["class","card-list",4,"ngFor","ngForOf"],[1,"card-list"],[1,"card-list__title"],[1,"card-list-wrap"],[1,"list"],[4,"ngFor","ngForOf"],[1,"draft-actions"],[1,"draft-actions__load"],[1,"draft-actions__add"],["class","list__item",4,"ngIf"],[1,"list__item"]],template:function(t,r){1&t&&u.YNc(0,Kz,12,2,"mat-expansion-panel",0),2&t&&u.Q6J("ngForOf",r.drafts)},dependencies:[vi,Hn,BF,$z,Gz],styles:['[_nghost-%COMP%]{display:block;margin-bottom:100px}mat-panel-description[_ngcontent-%COMP%]{align-items:flex-start}.card-list[_ngcontent-%COMP%]{margin:1rem 1.5rem 0;border:none;border-radius:10px;box-shadow:0 0 2px #b7b7b7!important;color:#313131}.card-list__title[_ngcontent-%COMP%]{position:relative;font-size:1.1rem;margin-left:15px}.card-list__title[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;transform:translateY(-50%);width:7px;height:7px;border-radius:50%;background-color:#673ab7}.card-list[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{padding:0;margin:0}.card-list[_ngcontent-%COMP%]   .list__item[_ngcontent-%COMP%]{font-size:1rem;color:#313131;padding:5px;margin-left:15px}.card-list[_ngcontent-%COMP%]   .list__item[_ngcontent-%COMP%]::marker{color:#673ab7}mat-panel-description[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0}.draft-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:2rem;width:100%}.draft-actions__add[_ngcontent-%COMP%], .draft-actions__load[_ngcontent-%COMP%]{border:none;border-radius:5px;padding:5px 10px;font-weight:600;color:#673ab7;background-color:#faf9fd;letter-spacing:1px;font-size:.8rem;box-shadow:0 0 2px #b7b7b7;font-family:Roboto}']}),n})(),Yz=(()=>{class n{constructor(t,r){this.db=t,this.frauth=r,this.frauth.onAuthStateChanged(i=>{i&&(this.useruid=i.uid)})}getAllItems(){return this.db.list(`/users/${this.useruid}/items`)}getItem(t){return this.db.list(`/users/${this.useruid}/items${t}`)}addItem(t){return this.db.list(`/users/${this.useruid}/items`).push(t)}updateItem(t){return this.db.list(`/users/${this.useruid}/items`)}deleteItem(t){return this.db.list(`/users/${this.useruid}/items/${t}`).remove()}saveDraft(t,r){return this.db.object(`/users/${this.useruid}/drafts/${t}`).update(r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(H0),u.LFG(Ul))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Qz=V(1144);const Xz=["addListener","removeListener"],Jz=["addEventListener","removeEventListener"],e3=["on","off"];function WD(n,e,t,r){if((0,Di.m)(t)&&(r=t,t=void 0),r)return WD(n,e,t).pipe(Ps(r));const[i,s]=function r3(n){return(0,Di.m)(n.addEventListener)&&(0,Di.m)(n.removeEventListener)}(n)?Jz.map(l=>h=>n[l](e,h,t)):function t3(n){return(0,Di.m)(n.addListener)&&(0,Di.m)(n.removeListener)}(n)?Xz.map(UF(n,e)):function n3(n){return(0,Di.m)(n.on)&&(0,Di.m)(n.off)}(n)?e3.map(UF(n,e)):[];if(!i&&(0,Qz.z)(n))return(0,qr.z)(l=>WD(l,e,t))((0,ms.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Wn.y(l=>{const h=(...p)=>l.next(1<p.length?p:p[0]);return i(h),()=>s(h)})}function UF(n,e){return t=>r=>n[t](e,r)}var HF=V(4408);const sw={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=sw;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new mo.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=sw;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=sw;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var jF=V(7565);new class o3 extends jF.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class s3 extends HF.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=sw.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(sw.cancelAnimationFrame(t),e._scheduled=void 0)}});let Tk,l3=1;const KD={};function $F(n){return n in KD&&(delete KD[n],!0)}const c3={setImmediate(n){const e=l3++;return KD[e]=!0,Tk||(Tk=Promise.resolve()),Tk.then(()=>$F(e)&&n()),e},clearImmediate(n){$F(n)}},{setImmediate:u3,clearImmediate:d3}=c3,ZD={setImmediate(...n){const{delegate:e}=ZD;return(e?.setImmediate||u3)(...n)},clearImmediate(n){const{delegate:e}=ZD;return(e?.clearImmediate||d3)(n)},delegate:void 0};new class f3 extends jF.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class h3 extends HF.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=ZD.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(ZD.clearImmediate(t),e._scheduled=void 0)}});var g3=V(3532);function GF(n,e=Zc.z){return function m3(n){return(0,yn.e)((e,t)=>{let r=!1,i=null,s=null,l=!1;const h=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const y=i;i=null,t.next(y)}l&&t.complete()},p=()=>{s=null,l&&t.complete()};e.subscribe((0,In.x)(t,y=>{r=!0,i=y,s||(0,ms.Xf)(n(y)).subscribe(s=(0,In.x)(t,h,p))},()=>{l=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>function y3(n=0,e,t=Zc.P){let r=-1;return null!=e&&((0,g3.K)(e)?t=e:r=e),new Wn.y(i=>{let s=function _3(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e))}let b3=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Wt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Wn.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(GF(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ue()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(sr(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=xd(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>WD(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(ws),u.LFG(oe,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zF=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Wt.x,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(GF(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ws),u.LFG(u.R0b),u.LFG(oe,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),WF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Q0,qF,Q0,qF]}),n})();const KF=j0();class E3{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Yr(-this._previousScrollPosition.left),e.style.top=Yr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",l=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),KF&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),KF&&(r.scrollBehavior=s,i.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class C3{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class ZF{enable(){}disable(){}attach(){}}function Sk(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function YF(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class I3{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Sk(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let D3=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new ZF,this.close=l=>new C3(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new E3(this._viewportRuler,this._document),this.reposition=l=>new I3(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(b3),u.LFG(zF),u.LFG(u.R0b),u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class QF{constructor(e){if(this.scrollStrategy=new ZF,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class T3{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let XF=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),S3=(()=>{class n extends XF{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){const h=s[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(i)):h.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),A3=(()=>{class n extends XF{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Sd(s)},this._clickListener=s=>{const l=Sd(s),h="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const E=p[y];if(E._outsidePointerEvents.observers.length<1||!E.hasAttached())continue;if(E.overlayElement.contains(l)||E.overlayElement.contains(h))break;const D=E._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(s)):D.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe),u.LFG(ws),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JF=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||gy()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),gy()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe),u.LFG(ws))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class x3{constructor(e,t,r,i,s,l,h,p,y,E=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=l,this._document=h,this._location=p,this._outsideClickDispatcher=y,this._animationsDisabled=E,this._backdropElement=null,this._backdropClick=new Wt.x,this._attachments=new Wt.x,this._detachments=new Wt.x,this._locationChanges=mo.w0.EMPTY,this._backdropClickHandler=D=>this._backdropClick.next(D),this._backdropTransitionendHandler=D=>{this._disposeBackdrop(D.target)},this._keydownEvents=new Wt.x,this._outsidePointerEvents=new Wt.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(gs(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Yr(this._config.width),e.height=Yr(this._config.height),e.minWidth=Yr(this._config.minWidth),e.minHeight=Yr(this._config.minHeight),e.maxWidth=Yr(this._config.maxWidth),e.maxHeight=Yr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=VD(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(ec((0,xt.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const eL="cdk-overlay-connected-position-bounding-box",M3=/([A-Za-z%]+)$/;class k3{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Wt.x,this._resizeSubscription=mo.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(eL),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let l;for(let h of this._preferredPositions){let p=this._getOriginPoint(e,i,h),y=this._getOverlayPoint(p,t,h),E=this._getOverlayFit(y,t,r,h);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,p);this._canFitWithFlexibleDimensions(E,y,r)?s.push({position:h,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,h)}):(!l||l.overlayFit.visibleArea<E.visibleArea)&&(l={overlayFit:E,overlayPoint:y,originPoint:p,position:h,overlayRect:t})}if(s.length){let h=null,p=-1;for(const y of s){const E=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);E>p&&(p=E,h=y)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Pm(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(eL),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const l=this._isRtl()?e.right:e.left,h=this._isRtl()?e.left:e.right;i="start"==r.originX?l:h}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=nL(t);let{x:l,y:h}=e,p=this._getOffset(i,"x"),y=this._getOffset(i,"y");p&&(l+=p),y&&(h+=y);let k=0-h,N=h+s.height-r.height,B=this._subtractOverflows(s.width,0-l,l+s.width-r.width),J=this._subtractOverflows(s.height,k,N),ce=B*J;return{visibleArea:ce,isCompletelyWithinViewport:s.width*s.height===ce,fitsInViewportVertically:J===s.height,fitsInViewportHorizontally:B==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,l=tL(this._overlayRef.getConfig().minHeight),h=tL(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=h&&h<=s;return(e.fitsInViewportVertically||null!=l&&l<=i)&&y}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=nL(t),s=this._viewportRect,l=Math.max(e.x+i.width-s.width,0),h=Math.max(e.y+i.height-s.height,0),p=Math.max(s.top-r.top-e.y,0),y=Math.max(s.left-r.left-e.x,0);let E=0,D=0;return E=i.width<=s.width?y||-l:e.x<this._viewportMargin?s.left-r.left-e.x:0,D=i.height<=s.height?p||-h:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:E,y:D},{x:e.x+E,y:e.y+D}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new T3(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,l,h,E,D,k;if("top"===t.overlayY)l=e.y,s=r.height-l+this._viewportMargin;else if("bottom"===t.overlayY)h=r.height-e.y+2*this._viewportMargin,s=r.height-h+this._viewportMargin;else{const N=Math.min(r.bottom-e.y+r.top,e.y),B=this._lastBoundingBoxSize.height;s=2*N,l=e.y-N,s>B&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.y-B/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)k=r.width-e.x+this._viewportMargin,E=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)D=e.x,E=r.right-e.x;else{const N=Math.min(r.right-e.x+r.left,e.x),B=this._lastBoundingBoxSize.width;E=2*N,D=e.x-N,E>B&&!this._isInitialRender&&!this._growAfterOpen&&(D=e.x-B/2)}return{top:l,left:D,bottom:h,right:k,width:E,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;i.height=Yr(r.height),i.top=Yr(r.top),i.bottom=Yr(r.bottom),i.width=Yr(r.width),i.left=Yr(r.left),i.right=Yr(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Yr(s)),l&&(i.maxWidth=Yr(l))}this._lastBoundingBoxSize=r,Pm(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Pm(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Pm(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(i){const E=this._viewportRuler.getViewportScrollPosition();Pm(r,this._getExactOverlayY(t,e,E)),Pm(r,this._getExactOverlayX(t,e,E))}else r.position="static";let h="",p=this._getOffset(t,"x"),y=this._getOffset(t,"y");p&&(h+=`translateX(${p}px) `),y&&(h+=`translateY(${y}px)`),r.transform=h.trim(),l.maxHeight&&(i?r.maxHeight=Yr(l.maxHeight):s&&(r.maxHeight="")),l.maxWidth&&(i?r.maxWidth=Yr(l.maxWidth):s&&(r.maxWidth="")),Pm(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Yr(s.y),i}_getExactOverlayX(e,t,r){let l,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),l=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===l?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Yr(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:YF(e,r),isOriginOutsideView:Sk(e,r),isOverlayClipped:YF(t,r),isOverlayOutsideView:Sk(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&VD(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof u.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Pm(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function tL(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(M3);return t&&"px"!==t?null:parseFloat(e)}return n||null}function nL(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const rL="cdk-global-overlay-wrapper";class R3{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(rL),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:l,maxHeight:h}=r,p=!("100%"!==i&&"100vw"!==i||l&&"100%"!==l&&"100vw"!==l),y=!("100%"!==s&&"100vh"!==s||h&&"100%"!==h&&"100vh"!==h),E=this._xPosition,D=this._xOffset,k="rtl"===this._overlayRef.getConfig().direction;let N="",B="",J="";p?J="flex-start":"center"===E?(J="center",k?B=D:N=D):k?"left"===E||"end"===E?(J="flex-end",N=D):("right"===E||"start"===E)&&(J="flex-start",B=D):"left"===E||"start"===E?(J="flex-start",N=D):("right"===E||"end"===E)&&(J="flex-end",B=D),e.position=this._cssPosition,e.marginLeft=p?"0":N,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=p?"0":B,t.justifyContent=J,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(rL),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let O3=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new R3}flexibleConnectedTo(t){return new k3(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(zF),u.LFG(oe),u.LFG(ws),u.LFG(JF))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P3=0,YD=(()=>{class n{constructor(t,r,i,s,l,h,p,y,E,D,k,N){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=l,this._injector=h,this._ngZone=p,this._document=y,this._directionality=E,this._location=D,this._outsideClickDispatcher=k,this._animationsModuleType=N}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),l=new QF(t);return l.direction=l.direction||this._directionality.value,new x3(s,r,i,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+P3++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(u.z2F)),new Mz(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(D3),u.LFG(JF),u.LFG(u._Vd),u.LFG(O3),u.LFG(S3),u.LFG(u.zs3),u.LFG(u.R0b),u.LFG(oe),u.LFG(sF),u.LFG(Ce),u.LFG(A3),u.LFG(u.QbO,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const L3={provide:new u.OlP("cdk-connected-overlay-scroll-strategy"),deps:[YD],useFactory:function F3(n){return()=>n.scrollStrategies.reposition()}};let V3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[YD,L3],imports:[Q0,Ik,WF,WF]}),n})();const B3=["mat-button",""],U3=["*"],j3=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],$3=X0(lF(cF(class{constructor(n){this._elementRef=n}})));let Ak=(()=>{class n extends $3{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of j3)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(pk),u.Y36(u.QbO,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&u.Gf(UD,5),2&t){let i;u.iGM(i=u.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(u.uIk("disabled",r.disabled||null),u.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[u.qOj],attrs:B3,ngContentSelectors:U3,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(u.F$t(),u.TgZ(0,"span",0),u.Hsn(1),u.qZA(),u._UZ(2,"span",1)(3,"span",2)),2&t&&(u.xp6(2),u.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),u.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[UD],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}"],encapsulation:2,changeDetection:0}),n})(),iL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[mF,Qr,Qr]}),n})();function G3(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",2)(1,"button",3),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.action())}),u._uU(2),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(2),u.Oqu(t.data.action)}}function z3(n,e){}const sL=new u.OlP("MatSnackBarData");class QD{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const q3=Math.pow(2,31)-1;class xk{constructor(e,t){this._overlayRef=t,this._afterDismissed=new Wt.x,this._afterOpened=new Wt.x,this._onAction=new Wt.x,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,q3))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let W3=(()=>{class n{constructor(t,r){this.snackBarRef=t,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xk),u.Y36(sL))},n.\u0275cmp=u.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"span",0),u._uU(1),u.qZA(),u.YNc(2,G3,3,1,"div",1)),2&t&&(u.xp6(1),u.Oqu(r.data.message),u.xp6(1),u.Q6J("ngIf",r.hasAction))},dependencies:[Hn,Ak],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),n})();const K3={snackBarState:qD("state",[Om("void, hidden",tc({transform:"scale(0.8)",opacity:0})),Om("visible",tc({transform:"scale(1)",opacity:1})),rw("* => visible",nw("150ms cubic-bezier(0, 0, 0.2, 1)")),rw("* => void, * => hidden",nw("75ms cubic-bezier(0.4, 0.0, 1, 1)",tc({opacity:0})))])};let Z3=(()=>{class n extends Ek{constructor(t,r,i,s,l){super(),this._ngZone=t,this._elementRef=r,this._changeDetectorRef=i,this._platform=s,this.snackBarConfig=l,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Wt.x,this._onExit=new Wt.x,this._onEnter=new Wt.x,this._animationState="void",this.attachDomPortal=h=>{this._assertNotAttached();const p=this._portalOutlet.attachDomPortal(h);return this._afterPortalAttached(),p},this._live="assertive"!==l.politeness||l.announcementMessage?"off"===l.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),r}attachTemplatePortal(t){this._assertNotAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),r}onAnimationEnd(t){const{fromState:r,toState:i}=t;if(("void"===i&&"void"!==r||"hidden"===i)&&this._completeExit(),"visible"===i){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(gs(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(i=>t.classList.add(i)):t.classList.add(r))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&r){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(i=document.activeElement),t.removeAttribute("aria-hidden"),r.appendChild(t),i?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.R0b),u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(ws),u.Y36(QD))},n.\u0275dir=u.lG2({type:n,viewQuery:function(t,r){if(1&t&&u.Gf(Ck,7),2&t){let i;u.iGM(i=u.CRH())&&(r._portalOutlet=i.first)}},features:[u.qOj]}),n})(),Y3=(()=>{class n extends Z3{_afterPortalAttached(){super._afterPortalAttached(),"center"===this.snackBarConfig.horizontalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-top")}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["snack-bar-container"]],hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,r){1&t&&u.WFA("@state.done",function(s){return r.onAnimationEnd(s)}),2&t&&u.d8E("@state",r._animationState)},features:[u.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,z3,0,0,"ng-template",1),u.qZA(),u._UZ(2,"div")),2&t&&(u.xp6(2),u.uIk("aria-live",r._live)("role",r._role))},dependencies:[Ck],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[K3.snackBarState]}}),n})(),oL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[V3,Ik,xs,iL,Qr,Qr]}),n})();const aL=new u.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function Q3(){return new QD}});let X3=(()=>{class n{constructor(t,r,i,s,l,h){this._overlay=t,this._live=r,this._injector=i,this._breakpointObserver=s,this._parentSnackBar=l,this._defaultConfig=h,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,r){return this._attach(t,r)}openFromTemplate(t,r){return this._attach(t,r)}open(t,r="",i){const s={...this._defaultConfig,...i};return s.data={message:t,action:r},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,r){const s=u.zs3.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:QD,useValue:r}]}),l=new bk(this.snackBarContainerComponent,r.viewContainerRef,s),h=t.attach(l);return h.instance.snackBarConfig=r,h.instance}_attach(t,r){const i={...new QD,...this._defaultConfig,...r},s=this._createOverlay(i),l=this._attachSnackBarContainer(s,i),h=new xk(l,s);if(t instanceof u.Rgc){const p=new wk(t,null,{$implicit:i.data,snackBarRef:h});h.instance=l.attachTemplatePortal(p)}else{const p=this._createInjector(i,h),y=new bk(t,void 0,p),E=l.attachComponentPortal(y);h.instance=E.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(ec(s.detachments())).subscribe(p=>{s.overlayElement.classList.toggle(this.handsetCssClass,p.matches)}),i.announcementMessage&&l._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(h,i),this._openedSnackBarRef=h,this._openedSnackBarRef}_animateSnackBar(t,r){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),r.duration&&r.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(r.duration))}_createOverlay(t){const r=new QF;r.direction=t.direction;let i=this._overlay.position().global();const s="rtl"===t.direction,l="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,h=!l&&"center"!==t.horizontalPosition;return l?i.left("0"):h?i.right("0"):i.centerHorizontally(),"top"===t.verticalPosition?i.top("0"):i.bottom("0"),r.positionStrategy=i,this._overlay.create(r)}_createInjector(t,r){return u.zs3.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:xk,useValue:r},{provide:sL,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(YD),u.LFG(nF),u.LFG(u.zs3),u.LFG(fk),u.LFG(n,12),u.LFG(aL))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),J3=(()=>{class n extends X3{constructor(t,r,i,s,l,h){super(t,r,i,s,l,h),this.simpleSnackBarComponent=W3,this.snackBarContainerComponent=Y3,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(YD),u.LFG(nF),u.LFG(u.zs3),u.LFG(fk),u.LFG(n,12),u.LFG(aL))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:oL}),n})();const eq=["*",[["mat-card-footer"]]],tq=["*","mat-card-footer"];let lL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),nq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),Mk=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.QbO,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:tq,decls:2,vars:0,template:function(t,r){1&t&&(u.F$t(eq),u.Hsn(0),u.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),n})(),rq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Qr,Qr]}),n})();const nc=new u.OlP("NgValueAccessor");function Tf(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function dL(n){return null!=n&&"number"==typeof n.length}const rs=new u.OlP("NgValidators"),Sf=new u.OlP("NgAsyncValidators"),cq=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class uq{static min(e){return function hL(n){return e=>{if(Tf(e.value)||Tf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function fL(n){return e=>{if(Tf(e.value)||Tf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function pL(n){return Tf(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function mL(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function gL(n){return Tf(n.value)||cq.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function _L(n){return e=>Tf(e.value)||!dL(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function yL(n){return e=>dL(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function vL(n){if(!n)return XD;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Tf(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return DL(e)}static composeAsync(e){return TL(e)}}function XD(n){return null}function bL(n){return null!=n}function wL(n){return(0,u.QGY)(n)?(0,nn.D)(n):n}function EL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function CL(n,e){return e.map(t=>t(n))}function IL(n){return n.map(e=>function dq(n){return!n.validate}(e)?e:t=>e.validate(t))}function DL(n){if(!n)return null;const e=n.filter(bL);return 0==e.length?null:function(t){return EL(CL(t,e))}}function Rk(n){return null!=n?DL(IL(n)):null}function TL(n){if(!n)return null;const e=n.filter(bL);return 0==e.length?null:function(t){return gF(CL(t,e).map(wL)).pipe((0,ot.U)(EL))}}function Ok(n){return null!=n?TL(IL(n)):null}function SL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function AL(n){return n._rawValidators}function xL(n){return n._rawAsyncValidators}function Pk(n){return n?Array.isArray(n)?n:[n]:[]}function JD(n,e){return Array.isArray(n)?n.includes(e):n===e}function ML(n,e){const t=Pk(e);return Pk(n).forEach(i=>{JD(t,i)||t.push(i)}),t}function kL(n,e){return Pk(e).filter(t=>!JD(n,t))}class RL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Rk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ok(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ws extends RL{get formDirective(){return null}get path(){return null}}class kd extends RL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}const ow="VALID",tT="INVALID",wy="PENDING",aw="DISABLED";function Vk(n){return(nT(n)?n.validators:n)||null}function NL(n){return Array.isArray(n)?Rk(n):n||null}function Bk(n,e){return(nT(e)?e.asyncValidators:n)||null}function FL(n){return Array.isArray(n)?Ok(n):n||null}function nT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class BL{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=NL(this._rawValidators),this._composedAsyncValidatorFn=FL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ow}get invalid(){return this.status===tT}get pending(){return this.status==wy}get disabled(){return this.status===aw}get enabled(){return this.status!==aw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=NL(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=FL(e)}addValidators(e){this.setValidators(ML(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ML(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(kL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(kL(e,this._rawAsyncValidators))}hasValidator(e){return JD(this._rawValidators,e)}hasAsyncValidator(e){return JD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=wy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=aw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ow,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ow||this.status===wy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?aw:ow}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=wy,this._hasOwnPendingAsyncValidator=!0;const t=wL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?aw:this.errors?tT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wy)?wy:this._anyControlsHaveStatus(tT)?tT:ow}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){nT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Uk extends BL{constructor(e,t,r){super(Vk(t),Bk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function VL(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new u.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function LL(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[t])throw new u.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function lw(n,e){Hk(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Eq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&UL(n,e)})}(n,e),function Iq(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Cq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&UL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function wq(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function iT(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),oT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function sT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Hk(n,e){const t=AL(n);null!==e.validator?n.setValidators(SL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=xL(n);null!==e.asyncValidator?n.setAsyncValidators(SL(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();sT(e._rawValidators,i),sT(e._rawAsyncValidators,i)}function oT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=AL(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=xL(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return sT(e._rawValidators,r),sT(e._rawAsyncValidators,r),t}function UL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function HL(n,e){Hk(n,e)}function $L(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const xq={provide:Ws,useExisting:(0,u.Gpc)(()=>aT)},cw=(()=>Promise.resolve(null))();let aT=(()=>{class n extends Ws{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new Uk({},Rk(t),Ok(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){cw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),lw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){cw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){cw.then(()=>{const r=this._findContainer(t.path),i=new Uk({});HL(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){cw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){cw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,$L(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(rs,10),u.Y36(Sf,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([xq]),u.qOj]}),n})();function GL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function zL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const qL=class extends BL{constructor(e=null,t,r){super(Vk(t),Bk(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=zL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){GL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){GL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){zL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Uq={provide:Ws,useExisting:(0,u.Gpc)(()=>lT)};let lT=(()=>{class n extends Ws{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(oT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return lw(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){iT(t.control||null,t,!1),function Aq(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,$L(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(iT(r||null,t),(n=>n instanceof qL)(i)&&(lw(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);HL(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Dq(n,e){return oT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Hk(this.form,this),this._oldForm&&oT(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(rs,10),u.Y36(Sf,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([Uq]),u.qOj,u.TTD]}),n})(),pV=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sW=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=xd(t);return new Wn.y(i=>{const l=this._observeElement(r).subscribe(i);return()=>{l.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new Wt.x,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pV))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mV=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new u.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=fi(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=yy(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(hk(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(sW),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),gV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[pV]}),n})();const oW=["input"],aW=function(n){return{enterDuration:n}},lW=["*"],cW=new u.OlP("mat-checkbox-default-options",{providedIn:"root",factory:_V});function _V(){return{color:"accent",clickAction:"check-indeterminate"}}let uW=0;const yV=_V(),dW={provide:nc,useExisting:(0,u.Gpc)(()=>vV),multi:!0};class hW{}const fW=uF(X0(cF(lF(class{constructor(n){this._elementRef=n}}))));let pW=(()=>{class n extends fW{constructor(t,r,i,s,l,h,p){super(r),this._changeDetectorRef=i,this._ngZone=s,this._animationMode=h,this._options=p,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new u.vpe,this.indeterminateChange=new u.vpe,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||yV,this.color=this.defaultColor=this._options.color||yV.color,this.tabIndex=parseInt(l)||0,this.id=this._uniqueId=`${t}${++uW}`}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=fi(t)}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(t){const r=fi(t);r!=this.checked&&(this._checked=r,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const r=fi(t);r!==this.disabled&&(this._disabled=r,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const r=t!=this._indeterminate;this._indeterminate=fi(t),r&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(t){let r=this._currentCheckState,i=this._getAnimationTargetElement();if(r!==t&&i&&(this._currentAnimationClass.length>0&&i.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(r,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){i.classList.add(this._currentAnimationClass);const s=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{i.classList.remove(s)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const t=this._options?.clickAction;this.disabled||"noop"===t?!this.disabled&&"noop"===t&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==t&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(t){t.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(t,r){if("NoopAnimations"===this._animationMode)return"";switch(t){case 0:if(1===r)return this._animationClasses.uncheckedToChecked;if(3==r)return this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===r?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===r?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===r?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(t){const r=this._inputElement;r&&(r.nativeElement.indeterminate=t)}}return n.\u0275fac=function(t){u.$Z()},n.\u0275dir=u.lG2({type:n,viewQuery:function(t,r){if(1&t&&(u.Gf(oW,5),u.Gf(UD,5)),2&t){let i;u.iGM(i=u.CRH())&&(r._inputElement=i.first),u.iGM(i=u.CRH())&&(r.ripple=i.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[u.qOj]}),n})(),vV=(()=>{class n extends pW{constructor(t,r,i,s,l,h,p){super("mat-checkbox-",t,r,s,l,h,p),this._focusMonitor=i,this._animationClasses={uncheckedToChecked:"mat-checkbox-anim-unchecked-checked",uncheckedToIndeterminate:"mat-checkbox-anim-unchecked-indeterminate",checkedToUnchecked:"mat-checkbox-anim-checked-unchecked",checkedToIndeterminate:"mat-checkbox-anim-checked-indeterminate",indeterminateToChecked:"mat-checkbox-anim-indeterminate-checked",indeterminateToUnchecked:"mat-checkbox-anim-indeterminate-unchecked"}}_createChangeEvent(t){const r=new hW;return r.source=this,r.checked=t,r}_getAnimationTargetElement(){return this._elementRef.nativeElement}ngAfterViewInit(){super.ngAfterViewInit(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||this._onBlur()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onInputClick(t){t.stopPropagation(),super._handleInputClick()}focus(t,r){t?this._focusMonitor.focusVia(this._inputElement,t,r):this._inputElement.nativeElement.focus(r)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(pk),u.Y36(u.R0b),u.$8M("tabindex"),u.Y36(u.QbO,8),u.Y36(cW,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-checkbox"],hostVars:14,hostBindings:function(t,r){2&t&&(u.Ikx("id",r.id),u.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null),u.ekj("mat-checkbox-indeterminate",r.indeterminate)("mat-checkbox-checked",r.checked)("mat-checkbox-disabled",r.disabled)("mat-checkbox-label-before","before"==r.labelPosition)("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[u._Bn([dW]),u.qOj],ngContentSelectors:lW,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(t,r){if(1&t&&(u.F$t(),u.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),u.NdJ("change",function(s){return r._onInteractionEvent(s)})("click",function(s){return r._onInputClick(s)}),u.qZA(),u.TgZ(5,"span",5),u._UZ(6,"span",6),u.qZA(),u._UZ(7,"span",7),u.TgZ(8,"span",8),u.O4$(),u.TgZ(9,"svg",9),u._UZ(10,"path",10),u.qZA(),u.kcU(),u._UZ(11,"span",11),u.qZA()(),u.TgZ(12,"span",12,13),u.NdJ("cdkObserveContent",function(){return r._onLabelTextChange()}),u.TgZ(14,"span",14),u._uU(15,"\xa0"),u.qZA(),u.Hsn(16),u.qZA()()),2&t){const i=u.MAs(1),s=u.MAs(13);u.uIk("for",r.inputId),u.xp6(2),u.ekj("mat-checkbox-inner-container-no-side-margin",!s.textContent||!s.textContent.trim()),u.xp6(1),u.Q6J("id",r.inputId)("required",r.required)("checked",r.checked)("disabled",r.disabled)("tabIndex",r.tabIndex),u.uIk("value",r.value)("name",r.name)("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby)("aria-checked",r._getAriaChecked())("aria-describedby",r.ariaDescribedby),u.xp6(2),u.Q6J("matRippleTrigger",i)("matRippleDisabled",r._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",u.VKq(19,aW,"NoopAnimations"===r._animationMode?0:150))}},dependencies:[UD,mV],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative}.mat-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:rgba(0,0,0,0);transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:rgba(0,0,0,0)}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}"],encapsulation:2,changeDetection:0}),n})(),bV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),_W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[mF,Qr,gV,bV,Qr,bV]}),n})();const yW=["taskinput"];function vW(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"mat-icon",21),u.NdJ("click",function(){u.CHM(t);const i=u.oxw().$implicit,s=u.oxw();return u.KtG(s.deleteItem(i.key))}),u._uU(1,"close"),u.qZA()}}function bW(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",18)(1,"mat-checkbox",19),u.NdJ("click",function(){const i=u.CHM(t),s=i.$implicit,l=i.index,h=u.oxw();return h.tickItem(s.key),u.KtG(h.clickedIndex=l)}),u._uU(2),u.qZA(),u.YNc(3,vW,2,0,"mat-icon",20),u.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=u.oxw();u.xp6(1),u.Q6J("checked",t.done),u.xp6(1),u.hij(" ",t.name," "),u.xp6(1),u.Q6J("ngIf",i.clickedIndex===r)}}let wW=(()=>{class n{constructor(t,r,i){this.dataService=t,this.frauth=r,this._snackBar=i,this.draftItems=[],this.item={},this.listtitle="shopping list name",this.itemscount=0,this.itemsticked=0,this.progresswidth=0,this.showclose=!1,this.clickedIndex=0}ngOnInit(){this.frauth.onAuthStateChanged(t=>{t&&this.retrieveItems()})}retrieveItems(){this.dataService.getAllItems().snapshotChanges().pipe((0,ot.U)(t=>t.map(r=>({key:r.payload.key,...r.payload.val()})))).subscribe(t=>{this.items=t,this.itemscount=this.items.length,this.checkHowManyItemsTicked(this.items)})}addItem(t){this.dataService.addItem({name:t,done:!1}),this.input.nativeElement.value=""}deleteItem(t){this.dataService.deleteItem(t),this._snackBar.open("Item removed","",{duration:1e3})}tickItem(t){this.showclose=!0;let r=!1;for(let i of this.items)i.key==t&&(r=i.done);this.dataService.updateItem(t).update(t,{done:!r})}checkHowManyItemsTicked(t){this.itemsticked=0;for(let r of t)1==r.done&&this.itemsticked++;this.progresswidth=Math.round(this.itemsticked/this.itemscount*100)}saveDraft(){this.items.map(t=>{this.draftItems.push(t.name)}),this.dataService.saveDraft(this.listtitle,this.draftItems),this._snackBar.open("Draft saved","",{duration:1e3}),this.draftItems=[]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Yz),u.Y36(Ul),u.Y36(J3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-list"]],viewQuery:function(t,r){if(1&t&&u.Gf(yW,5),2&t){let i;u.iGM(i=u.CRH())&&(r.input=i.first)}},decls:23,vars:6,consts:[[1,"input-wrap"],[1,"input-helper"],["type","text","name","taskinput","id","taskinput","placeholder","add new item...","required","",1,"task-input"],["taskinput",""],[1,"task-input__icon",3,"click"],[1,"list-actions"],[1,"list-actions__save",3,"click"],["routerLink","../drafts",1,"list-actions__load"],[1,"card-list"],["contenteditable","true",1,"card-list__title",3,"input"],["x",""],[1,"card-list__progress-text"],[1,"progress"],[1,"progress__back"],[1,"progress__front"],[1,"card-list-wrap"],[1,"list"],["class","list__item",4,"ngFor","ngForOf"],[1,"list__item"],["color","primary",3,"checked","click"],["class","close-icon",3,"click",4,"ngIf"],[1,"close-icon",3,"click"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"input",2,3),u.qZA(),u.TgZ(4,"mat-icon",4),u.NdJ("click",function(){u.CHM(i);const l=u.MAs(3);return u.KtG(r.addItem(l.value))}),u._uU(5,"add"),u.qZA()(),u.TgZ(6,"div",5)(7,"button",6),u.NdJ("click",function(){return r.saveDraft()}),u._uU(8,"Save as draft"),u.qZA(),u.TgZ(9,"button",7),u._uU(10,"Load draft"),u.qZA()(),u.TgZ(11,"mat-card",8)(12,"div",9,10),u.NdJ("input",function(){u.CHM(i);const l=u.MAs(13);return u.KtG(r.listtitle=l.innerText)}),u._uU(14),u.qZA(),u.TgZ(15,"div",11),u._uU(16),u.qZA(),u.TgZ(17,"div",12),u._UZ(18,"div",13)(19,"div",14),u.qZA(),u.TgZ(20,"div",15)(21,"ul",16),u.YNc(22,bW,4,3,"li",17),u.qZA()()()}2&t&&(u.xp6(14),u.Oqu(r.listtitle),u.xp6(2),u.AsE("cart ",r.itemsticked,"/",r.itemscount,""),u.xp6(3),u.Udp("width",r.progresswidth,"%"),u.xp6(3),u.Q6J("ngForOf",r.items))},dependencies:[vi,Hn,Vp,Mk,zD,vV],styles:['[_nghost-%COMP%]{display:block;margin-bottom:100px}.input-wrap[_ngcontent-%COMP%]{position:relative}.input-helper[_ngcontent-%COMP%]{margin:2.5rem 1.5rem}.task-input[_ngcontent-%COMP%]{width:calc(100% - 1.5rem - 20px);padding:15px 20px;border:none;border-radius:10px;box-shadow:0 0 2px #b7b7b7;background-color:#faf9fd;font-size:1.1rem;font-weight:400}.task-input__icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:2.5rem;transform:translateY(-50%)}.task-input[_ngcontent-%COMP%]::placeholder{font-size:1.1rem;font-weight:400}.task-input[_ngcontent-%COMP%]:focus, .task-input[_ngcontent-%COMP%]:active{outline:none}.list-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:.8rem 1.5rem}.list-actions__save[_ngcontent-%COMP%], .list-actions__load[_ngcontent-%COMP%]{position:relative;border:none;border-radius:5px;padding:5px 20px;font-weight:600;color:#673ab7;background-color:#faf9fd;letter-spacing:1px;box-shadow:0 0 2px #b7b7b7;font-family:Roboto;transition-duration:.4s;overflow:hidden}.list-actions__save[_ngcontent-%COMP%]:after, .list-actions__load[_ngcontent-%COMP%]:after{content:"";border-radius:5px;background:#673ab7;display:block;position:absolute;padding-top:300%;padding-left:350%;margin-left:-20px!important;margin-top:-120%;opacity:0;transition:all .8s}.list-actions__save[_ngcontent-%COMP%]:active:after, .list-actions__load[_ngcontent-%COMP%]:active:after{padding:0;margin:0;opacity:1;transition:0s}[contenteditable][_ngcontent-%COMP%]{outline:0px solid transparent}.card-list[_ngcontent-%COMP%]{margin:0 1.5rem 2.5rem;border:none;border-radius:10px;box-shadow:0 0 2px #b7b7b7!important;color:#313131}.card-list__title[_ngcontent-%COMP%]{position:relative;font-size:1.1rem;margin-left:15px}.card-list__title[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:-15px;transform:translateY(-50%);width:7px;height:7px;border-radius:50%;background-color:#673ab7}.card-list__progress-text[_ngcontent-%COMP%]{font-size:.7rem;color:#673ab7}.card-list[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{position:relative;height:10px;width:90%}.card-list[_ngcontent-%COMP%]   .progress__back[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:3px;width:100%;background-color:#673ab74d}.card-list[_ngcontent-%COMP%]   .progress__front[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:3px;width:10%;background-color:#673ab7}.card-list[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{list-style:none;padding:0}.card-list[_ngcontent-%COMP%]   .list__item[_ngcontent-%COMP%]{position:relative;font-size:1rem;margin:5px 0}.card-list[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:0;transform:translateY(-50%)}']}),n})(),EW=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-recipes"]],decls:2,vars:0,template:function(t,r){1&t&&(u.TgZ(0,"p"),u._uU(1,"recipes works!"),u.qZA())},styles:["p[_ngcontent-%COMP%]{padding:15px 20px}"]}),n})();const CW=["connectionContainer"],IW=["inputContainer"],DW=["label"];function TW(n,e){1&n&&(u.ynx(0),u.TgZ(1,"div",14),u._UZ(2,"div",15)(3,"div",16)(4,"div",17),u.qZA(),u.TgZ(5,"div",18),u._UZ(6,"div",15)(7,"div",16)(8,"div",17),u.qZA(),u.BQk())}function SW(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",19),u.NdJ("cdkObserveContent",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.updateOutlineGap())}),u.Hsn(1,1),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function AW(n,e){if(1&n&&(u.ynx(0),u.Hsn(1,2),u.TgZ(2,"span"),u._uU(3),u.qZA(),u.BQk()),2&n){const t=u.oxw(2);u.xp6(3),u.Oqu(t._control.placeholder)}}function xW(n,e){1&n&&u.Hsn(0,3,["*ngSwitchCase","true"])}function MW(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," *"),u.qZA())}function kW(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"label",20,21),u.NdJ("cdkObserveContent",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.updateOutlineGap())}),u.YNc(2,AW,4,1,"ng-container",12),u.YNc(3,xW,1,0,"ng-content",12),u.YNc(4,MW,2,0,"span",22),u.qZA()}if(2&n){const t=u.oxw();u.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),u.uIk("for",t._control.id)("aria-owns",t._control.id),u.xp6(2),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function RW(n,e){1&n&&(u.TgZ(0,"div",24),u.Hsn(1,4),u.qZA())}function OW(n,e){if(1&n&&(u.TgZ(0,"div",25),u._UZ(1,"span",26),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function PW(n,e){if(1&n&&(u.TgZ(0,"div"),u.Hsn(1,5),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState)}}function NW(n,e){if(1&n&&(u.TgZ(0,"div",30),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("id",t._hintLabelId),u.xp6(1),u.Oqu(t.hintLabel)}}function FW(n,e){if(1&n&&(u.TgZ(0,"div",27),u.YNc(1,NW,2,2,"div",28),u.Hsn(2,6),u._UZ(3,"div",29),u.Hsn(4,7),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",t.hintLabel)}}const LW=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],VW=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],BW=new u.OlP("MatError"),UW={transitionMessages:qD("transitionMessages",[Om("enter",tc({opacity:1,transform:"translateY(0%)"})),rw("void => enter",[tc({opacity:0,transform:"translateY(-5px)"}),nw("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Yk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n}),n})();const HW=new u.OlP("MatHint");let cT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-label"]]}),n})(),jW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const $W=new u.OlP("MatPrefix"),GW=new u.OlP("MatSuffix");let wV=0;const qW=X0(class{constructor(n){this._elementRef=n}},"primary"),WW=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),CV=new u.OlP("MatFormField");let IV=(()=>{class n extends qW{constructor(t,r,i,s,l,h,p){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=s,this._platform=l,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Wt.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+wV++,this._labelId="mat-form-field-label-"+wV++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=fi(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Fs(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(ec(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(ec(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,xt.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Fs(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Fs(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(ec(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,WD(this._label.nativeElement,"transitionend").pipe(gs(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const E=r.querySelectorAll(`${i}, ${s}`);for(let D=0;D<E.length;D++)E[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let l=0,h=0;const p=r.querySelectorAll(i),y=r.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const E=r.getBoundingClientRect();if(0===E.width&&0===E.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(E),k=t.children,N=this._getStartEnd(k[0].getBoundingClientRect());let B=0;for(let J=0;J<k.length;J++)B+=k[J].offsetWidth;l=Math.abs(N-D)-5,h=B>0?.75*B+10:0}for(let E=0;E<p.length;E++)p[E].style.width=`${l}px`;for(let E=0;E<y.length;E++)y[E].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(sF,8),u.Y36(WW,8),u.Y36(ws),u.Y36(u.R0b),u.Y36(u.QbO,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,Yk,5),u.Suo(i,Yk,7),u.Suo(i,cT,5),u.Suo(i,cT,7),u.Suo(i,jW,5),u.Suo(i,BW,5),u.Suo(i,HW,5),u.Suo(i,$W,5),u.Suo(i,GW,5)),2&t){let s;u.iGM(s=u.CRH())&&(r._controlNonStatic=s.first),u.iGM(s=u.CRH())&&(r._controlStatic=s.first),u.iGM(s=u.CRH())&&(r._labelChildNonStatic=s.first),u.iGM(s=u.CRH())&&(r._labelChildStatic=s.first),u.iGM(s=u.CRH())&&(r._placeholderChild=s.first),u.iGM(s=u.CRH())&&(r._errorChildren=s),u.iGM(s=u.CRH())&&(r._hintChildren=s),u.iGM(s=u.CRH())&&(r._prefixChildren=s),u.iGM(s=u.CRH())&&(r._suffixChildren=s)}},viewQuery:function(t,r){if(1&t&&(u.Gf(CW,7),u.Gf(IW,5),u.Gf(DW,5)),2&t){let i;u.iGM(i=u.CRH())&&(r._connectionContainerRef=i.first),u.iGM(i=u.CRH())&&(r._inputContainerRef=i.first),u.iGM(i=u.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&u.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:CV,useExisting:n}]),u.qOj],ngContentSelectors:VW,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(u.F$t(LW),u.TgZ(0,"div",0)(1,"div",1,2),u.NdJ("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),u.YNc(3,TW,9,0,"ng-container",3),u.YNc(4,SW,2,1,"div",4),u.TgZ(5,"div",5,6),u.Hsn(7),u.TgZ(8,"span",7),u.YNc(9,kW,5,16,"label",8),u.qZA()(),u.YNc(10,RW,2,0,"div",9),u.qZA(),u.YNc(11,OW,2,4,"div",10),u.TgZ(12,"div",11),u.YNc(13,PW,2,1,"div",12),u.YNc(14,FW,5,2,"div",13),u.qZA()()),2&t&&(u.xp6(3),u.Q6J("ngIf","outline"==r.appearance),u.xp6(1),u.Q6J("ngIf",r._prefixChildren.length),u.xp6(5),u.Q6J("ngIf",r._hasFloatingLabel()),u.xp6(1),u.Q6J("ngIf",r._suffixChildren.length),u.xp6(1),u.Q6J("ngIf","outline"!=r.appearance),u.xp6(1),u.Q6J("ngSwitch",r._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},dependencies:[Hn,so,qi,mV],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[UW.transitionMessages]},changeDetection:0}),n})(),DV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[xs,Qr,gV,Qr]}),n})();const TV=wf({passive:!0});let KW=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Ar.E;const r=xd(t),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new Wt.x,l="cdk-text-field-autofilled",h=p=>{"cdk-text-field-autofill-start"!==p.animationName||r.classList.contains(l)?"cdk-text-field-autofill-end"===p.animationName&&r.classList.contains(l)&&(r.classList.remove(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(r.classList.add(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,TV),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",h,TV)}}),s}stopMonitoring(t){const r=xd(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ws),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),SV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const ZW=new u.OlP("MAT_INPUT_VALUE_ACCESSOR"),YW=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let QW=0;const XW=$G(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r,this.stateChanges=new Wt.x}});let AV=(()=>{class n extends XW{constructor(t,r,i,s,l,h,p,y,E,D){super(h,s,l,i),this._elementRef=t,this._platform=r,this._autofillMonitor=y,this._formField=D,this._uid="mat-input-"+QW++,this.focused=!1,this.stateChanges=new Wt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(B=>TD().has(B)),this._iOSKeyupListener=B=>{const J=B.target;!J.value&&0===J.selectionStart&&0===J.selectionEnd&&(J.setSelectionRange(1,1),J.setSelectionRange(0,0))};const k=this._elementRef.nativeElement,N=k.nodeName.toLowerCase();this._inputValueAccessor=p||k,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&E.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===N,this._isTextarea="textarea"===N,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=k.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=fi(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(uq.required)??!1}set required(t){this._required=fi(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&TD().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=fi(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,r=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(r!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=r,r?i.setAttribute("placeholder",r):i.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){YW.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(ws),u.Y36(kd,10),u.Y36(aT,8),u.Y36(lT,8),u.Y36(dF),u.Y36(ZW,10),u.Y36(KW),u.Y36(u.R0b),u.Y36(CV,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&u.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(u.Ikx("disabled",r.disabled)("required",r.required),u.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),u.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[u._Bn([{provide:Yk,useExisting:n}]),u.qOj,u.TTD]}),n})(),JW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[dF],imports:[SV,DV,Qr,SV,DV]}),n})();const e6=[{path:"sign-in",component:(()=>{class n{constructor(t){this.authService=t}signIn(t,r){this.authService.signIn(t,r)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(dy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-in"]],decls:24,vars:0,consts:[[1,"container"],["color","primary",1,"card-icon"],[1,"login-subtitle"],[1,"signin-form"],["appearance","fill",1,"signin-form__full-width"],["type","email","matInput","","placeholder","Ex. user@gmail.com","formControlName","email"],["email",""],["type","password","matInput","","formControlName","password"],["password",""],[1,"signin-form__btns"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","routerLink","/register-user"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-title")(3,"mat-icon",1),u._uU(4,"shopping_basket"),u.qZA(),u._uU(5," A-groceries "),u.qZA(),u.TgZ(6,"mat-card-subtitle",2),u._uU(7," Log in "),u.qZA(),u.TgZ(8,"form",3)(9,"mat-form-field",4)(10,"mat-label"),u._uU(11,"Email"),u.qZA(),u._UZ(12,"input",5,6),u.qZA(),u.TgZ(14,"mat-form-field",4)(15,"mat-label"),u._uU(16,"Password"),u.qZA(),u._UZ(17,"input",7,8),u.qZA()(),u.TgZ(19,"div",9)(20,"button",10),u.NdJ("click",function(){u.CHM(i);const l=u.MAs(13),h=u.MAs(18);return u.KtG(r.signIn(l.value,h.value))}),u._uU(21,"Log in"),u.qZA(),u.TgZ(22,"button",11),u._uU(23,"Create account"),u.qZA()()()()}},dependencies:[Vp,Mk,lL,nq,Ak,zD,IV,cT,AV],styles:[".container[_ngcontent-%COMP%]{position:relative;height:100vh}mat-card[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:50px}@media only screen and (max-width: 585px){mat-card[_ngcontent-%COMP%]{padding:30px}}.login-subtitle[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.card-icon[_ngcontent-%COMP%]{transform:scale(1.5);margin-right:1.2rem}.input-icon[_ngcontent-%COMP%]{float:right;transform:scale(1.2);padding:2px}mat-card-title[_ngcontent-%COMP%]{margin-bottom:20px;font-weight:900}.signin-form[_ngcontent-%COMP%]{min-width:250px;max-width:500px;width:100%;margin-top:1rem}.signin-form__full-width[_ngcontent-%COMP%]{width:100%}.signin-form__btns[_ngcontent-%COMP%]{margin-top:1rem}button[_ngcontent-%COMP%]{margin-right:1rem}"]}),n})()},{path:"register-user",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}signUp(t,r){this.authService.signUp(t,r)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(dy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-up"]],decls:22,vars:0,consts:[[1,"container"],["color","primary"],[1,"signin-form"],["appearance","fill",1,"signin-form__full-width"],["type","email","matInput","","placeholder","Ex. user@gmail.com","formControlName","email"],["email",""],["type","password","matInput","","formControlName","password"],["password",""],[1,"signin-form__btns"],["mat-raised-button","",3,"click"],["mat-raised-button","","routerLink","sign-in"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-title")(3,"mat-icon",1),u._uU(4,"bookmark"),u.qZA(),u._uU(5," Register new account "),u.qZA(),u.TgZ(6,"form",2)(7,"mat-form-field",3)(8,"mat-label"),u._uU(9,"Email"),u.qZA(),u._UZ(10,"input",4,5),u.qZA(),u.TgZ(12,"mat-form-field",3)(13,"mat-label"),u._uU(14,"Password"),u.qZA(),u._UZ(15,"input",6,7),u.qZA()(),u.TgZ(17,"div",8)(18,"button",9),u.NdJ("click",function(){u.CHM(i);const l=u.MAs(11),h=u.MAs(16);return u.KtG(r.signUp(l.value,h.value))}),u._uU(19,"Make new account"),u.qZA(),u.TgZ(20,"button",10),u._uU(21,"Back"),u.qZA()()()()}},dependencies:[Vp,Mk,lL,Ak,zD,IV,cT,AV],styles:[".container[_ngcontent-%COMP%]{position:relative;height:100vh}mat-card[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:50px}@media only screen and (max-width: 585px){mat-card[_ngcontent-%COMP%]{padding:30px}}mat-icon[_ngcontent-%COMP%]{transform:scale(1.5);margin-right:1rem;margin-top:8px}mat-card-title[_ngcontent-%COMP%]{display:flex;margin-bottom:20px;font-weight:900;line-height:2rem}.signin-form[_ngcontent-%COMP%]{min-width:250px;max-width:500px;width:100%;margin-top:1rem}.signin-form__full-width[_ngcontent-%COMP%]{width:100%}.signin-form__btns[_ngcontent-%COMP%]{margin-top:1rem}button[_ngcontent-%COMP%]{margin-right:1rem}"]}),n})()},{path:"dashboard",component:Iz,children:[{path:"list",component:wW},{path:"recipes",component:EW},{path:"drafts",component:Zz}]},{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"**",redirectTo:"sign-in"}];let t6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[xv.forRoot(e6),xv]}),n})();function xV(n){return new u.vHH(3e3,!1)}function F6(){return typeof window<"u"&&typeof window.document<"u"}function Qk(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Af(n){switch(n.length){case 0:return new iw;case 1:return n[0];default:return new OF(n)}}function MV(n,e,t,r,i=new Map,s=new Map){const l=[],h=[];let p=-1,y=null;if(r.forEach(E=>{const D=E.get("offset"),k=D==p,N=k&&y||new Map;E.forEach((B,J)=>{let ce=J,Be=B;if("offset"!==J)switch(ce=e.normalizePropertyName(ce,l),Be){case"!":Be=i.get(J);break;case Md:Be=s.get(J);break;default:Be=e.normalizeStyleValue(J,ce,Be,l)}N.set(ce,Be)}),k||h.push(N),y=N,p=D}),l.length)throw function I6(n){return new u.vHH(3502,!1)}();return h}function Xk(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Jk(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Jk(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Jk(t,"destroy",n)))}}function Jk(n,e,t){const s=eR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(s._data=l),s}function eR(n,e,t,r,i="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!l}}function oa(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function kV(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let tR=(n,e)=>!1,RV=(n,e,t)=>[],OV=null;function nR(n){const e=n.parentNode||n.host;return e===OV?null:e}(Qk()||typeof Element<"u")&&(F6()?(OV=(()=>document.documentElement)(),tR=(n,e)=>{for(;e;){if(e===n)return!0;e=nR(e)}return!1}):tR=(n,e)=>n.contains(e),RV=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Lm=null,PV=!1;const NV=tR,FV=RV;let LV=(()=>{class n{validateStyleProperty(t){return function V6(n){Lm||(Lm=function B6(){return typeof document<"u"?document.body:null}()||{},PV=!!Lm.style&&"WebkitAppearance"in Lm.style);let e=!0;return Lm.style&&!function L6(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Lm.style,!e&&PV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Lm.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return NV(t,r)}getParentElement(t){return nR(t)}query(t,r,i){return FV(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,l,h=[],p){return new iw(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),rR=(()=>{class n{}return n.NOOP=new LV,n})();const iR="ng-enter",uT="ng-leave",dT="ng-trigger",hT=".ng-trigger",BV="ng-animating",sR=".ng-animating";function xf(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:oR(parseFloat(e[1]),e[2])}function oR(n,e){return"s"===e?1e3*n:n}function fT(n,e,t){return n.hasOwnProperty("duration")?n:function j6(n,e,t){let i,s=0,l="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(xV()),{duration:0,delay:0,easing:""};i=oR(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=oR(parseFloat(p),h[4]));const y=h[5];y&&(l=y)}else i=n;if(!t){let h=!1,p=e.length;i<0&&(e.push(function n6(){return new u.vHH(3100,!1)}()),h=!0),s<0&&(e.push(function r6(){return new u.vHH(3101,!1)}()),h=!0),h&&e.splice(p,0,xV())}return{duration:i,delay:s,easing:l}}(n,e,t)}function uw(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function UV(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Mf(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function jV(n,e,t){return t?e+":"+t+";":""}function $V(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=jV(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=jV(0,q6(t),n.style[t]));n.setAttribute("style",e)}function du(n,e,t){n.style&&(e.forEach((r,i)=>{const s=lR(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),Qk()&&$V(n))}function Vm(n,e){n.style&&(e.forEach((t,r)=>{const i=lR(r);n.style[i]=""}),Qk()&&$V(n))}function dw(n){return Array.isArray(n)?1==n.length?n[0]:kF(n):n}const aR=new RegExp("{{\\s*(.+?)\\s*}}","g");function GV(n){let e=[];if("string"==typeof n){let t;for(;t=aR.exec(n);)e.push(t[1]);aR.lastIndex=0}return e}function pT(n,e,t){const r=n.toString(),i=r.replace(aR,(s,l)=>{let h=e[l];return null==h&&(t.push(function s6(n){return new u.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function mT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const z6=/-+([a-z0-9])/g;function lR(n){return n.replace(z6,(...e)=>e[1].toUpperCase())}function q6(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function aa(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function o6(n){return new u.vHH(3004,!1)}()}}function zV(n,e){return window.getComputedStyle(n)[e]}function X6(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function J6(n,e,t){if(":"==n[0]){const p=function e4(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function b6(n){return new u.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function v6(n){return new u.vHH(3015,!1)}()),e;const i=r[1],s=r[2],l=r[3];e.push(qV(i,l));"<"==s[0]&&!("*"==i&&"*"==l)&&e.push(qV(l,i))}(r,t,e)):t.push(n),t}const vT=new Set(["true","1"]),bT=new Set(["false","0"]);function qV(n,e){const t=vT.has(n)||bT.has(n),r=vT.has(e)||bT.has(e);return(i,s)=>{let l="*"==n||n==i,h="*"==e||e==s;return!l&&t&&"boolean"==typeof i&&(l=i?vT.has(n):bT.has(n)),!h&&r&&"boolean"==typeof s&&(h=s?vT.has(e):bT.has(e)),l&&h}}const t4=new RegExp("s*:selfs*,?","g");function cR(n,e,t,r){return new n4(n).build(e,t,r)}class n4{constructor(e){this._driver=e}build(e,t,r){const i=new s4(t);return this._resetContextStyleTimingState(i),aa(this,dw(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function l6(){return new u.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,y=p.name;y.toString().split(/\s*,\s*/).forEach(E=>{p.name=E,s.push(this.visitState(p,t))}),p.name=y}else if(1==h.type){const p=this.visitTransition(h,t);r+=p.queryCount,i+=p.depCount,l.push(p)}else t.errors.push(function c6(){return new u.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,l=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(p=>{GV(p).forEach(y=>{l.hasOwnProperty(y)||s.add(y)})})}),s.size&&(mT(s.values()),t.errors.push(function u6(n,e){return new u.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=aa(this,dw(e.animation),t);return{type:1,matchers:X6(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Bm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>aa(this,r,t)),options:Bm(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(l=>{t.currentTime=r;const h=aa(this,l,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:s,options:Bm(e.options)}}visitAnimate(e,t){const r=function a4(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return uR(fT(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=uR(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=fT(t,e);return uR(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:tc({});if(5==s.type)i=this.visitKeyframes(s,t);else{let l=e.styles,h=!1;if(!l){h=!0;const y={};r.easing&&(y.easing=r.easing),l=tc(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(l,t);p.isEmptyStep=h,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===Md?r.push(h):t.errors.push(new u.vHH(3002,!1)):r.push(UV(h));let s=!1,l=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(l=h.get("easing"),h.delete("easing")),!s))for(let p of h.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((h,p)=>{const y=t.collectedStyles.get(t.currentQuerySelector),E=y.get(p);let D=!0;E&&(s!=i&&s>=E.startTime&&i<=E.endTime&&(t.errors.push(function h6(n,e,t,r,i){return new u.vHH(3010,!1)}()),D=!1),s=E.startTime),D&&y.set(p,{startTime:s,endTime:i}),t.options&&function G6(n,e,t){const r=e.params||{},i=GV(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function i6(n){return new u.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function f6(){return new u.vHH(3011,!1)}()),r;let s=0;const l=[];let h=!1,p=!1,y=0;const E=e.steps.map(Be=>{const Ke=this._makeStyleAst(Be,t);let nt=null!=Ke.offset?Ke.offset:function o4(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ke.styles),Qe=0;return null!=nt&&(s++,Qe=Ke.offset=nt),p=p||Qe<0||Qe>1,h=h||Qe<y,y=Qe,l.push(Qe),Ke});p&&t.errors.push(function p6(){return new u.vHH(3012,!1)}()),h&&t.errors.push(function m6(){return new u.vHH(3200,!1)}());const D=e.steps.length;let k=0;s>0&&s<D?t.errors.push(function g6(){return new u.vHH(3202,!1)}()):0==s&&(k=1/(D-1));const N=D-1,B=t.currentTime,J=t.currentAnimateTimings,ce=J.duration;return E.forEach((Be,Ke)=>{const nt=k>0?Ke==N?1:k*Ke:l[Ke],Qe=nt*ce;t.currentTime=B+J.delay+Qe,J.duration=Qe,this._validateStyleAst(Be,t),Be.offset=nt,r.styles.push(Be)}),r}visitReference(e,t){return{type:8,animation:aa(this,dw(e.animation),t),options:Bm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Bm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Bm(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function r4(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(t4,"")),n=n.replace(/@\*/g,hT).replace(/@\w+/g,t=>hT+"-"+t.slice(1)).replace(/:animating/g,sR),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,oa(t.collectedStyles,t.currentQuerySelector,new Map);const h=aa(this,dw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:h,originalSelector:e.selector,options:Bm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function _6(){return new u.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:fT(e.timings,t.errors,!0);return{type:12,animation:aa(this,dw(e.animation),t),timings:r,options:null}}}class s4{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Bm(n){return n?(n=uw(n)).params&&(n.params=function i4(n){return n?uw(n):null}(n.params)):n={},n}function uR(n,e,t){return{duration:n,delay:e,easing:t}}function dR(n,e,t,r,i,s,l=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:l,subTimeline:h}}class wT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const u4=new RegExp(":enter","g"),h4=new RegExp(":leave","g");function hR(n,e,t,r,i,s=new Map,l=new Map,h,p,y=[]){return(new f4).buildKeyframes(n,e,t,r,i,s,l,h,p,y)}class f4{buildKeyframes(e,t,r,i,s,l,h,p,y,E=[]){y=y||new wT;const D=new fR(e,t,y,i,s,E,[]);D.options=p;const k=p.delay?xf(p.delay):0;D.currentTimeline.delayNextStep(k),D.currentTimeline.setStyles([l],null,D.errors,p),aa(this,r,D);const N=D.timelines.filter(B=>B.containsAnimation());if(N.length&&h.size){let B;for(let J=N.length-1;J>=0;J--){const ce=N[J];if(ce.element===t){B=ce;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([h],null,D.errors,p)}return N.length?N.map(B=>B.buildKeyframes()):[dR(t,[],[],[],0,k,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const l=null!=r.duration?xf(r.duration):null,h=null!=r.delay?xf(r.delay):null;return 0!==l&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,l,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),aa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=ET);const l=xf(s.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>aa(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?xf(e.options.delay):0;e.steps.forEach(l=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),aa(this,l,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return fT(t.params?pT(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?xf(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ET);let l=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((y,E)=>{t.currentQueryIndex=E;const D=t.createSubContext(e.options,y);s&&D.delayNextStep(s),y===t.element&&(p=D.currentTimeline),aa(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),h=l*(t.currentQueryTotal-1);let p=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=r.currentStaggerTime}const E=t.currentTimeline;p&&E.delayNextStep(p);const D=E.currentTime;aa(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const ET={};class fR{constructor(e,t,r,i,s,l,h,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=l,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ET,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new CT(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=xf(r.duration)),null!=r.delay&&(i.delay=xf(r.delay));const s=r.params;if(s){let l=i.params;l||(l=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!l.hasOwnProperty(h))&&(l[h]=pT(s[h],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new fR(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=ET,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new p4(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,l){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(u4,"."+this._enterClassName)).replace(h4,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!s&&0==h.length&&l.push(function y6(n){return new u.vHH(3014,!1)}()),h}}class CT{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new CT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Md),this._currentKeyframe.set(t,Md);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},l=function m4(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Md)}else Mf(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,p]of l){const y=pT(p,s,r);this._pendingStyles.set(h,y),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)||Md),this._updateStyle(h,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,p)=>{const y=Mf(h,new Map,this._backFill);y.forEach((E,D)=>{"!"===E?e.add(D):E===Md&&t.add(D)}),r||y.set("offset",p/this.duration),i.push(y)});const s=e.size?mT(e.values()):[],l=t.size?mT(t.values()):[];if(r){const h=i[0],p=new Map(h);h.set("offset",0),p.set("offset",1),i=[h,p]}return dR(this.element,i,s,l,this.duration,this.startTime,this.easing,!1)}}class p4 extends CT{constructor(e,t,r,i,s,l,h=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=r+t,h=t/l,p=Mf(e[0]);p.set("offset",0),s.push(p);const y=Mf(e[0]);y.set("offset",ZV(h)),s.push(y);const E=e.length-1;for(let D=1;D<=E;D++){let k=Mf(e[D]);const N=k.get("offset");k.set("offset",ZV((t+N*r)/l)),s.push(k)}r=l,t=0,i="",e=s}return dR(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function ZV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class pR{}const g4=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class _4 extends pR{normalizePropertyName(e,t){return lR(e)}normalizeStyleValue(e,t,r,i){let s="";const l=r.toString().trim();if(g4.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function a6(n,e){return new u.vHH(3005,!1)}())}return l+s}}function YV(n,e,t,r,i,s,l,h,p,y,E,D,k){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:l,timelines:h,queriedElements:p,preStyleProps:y,postStyleProps:E,totalTime:D,errors:k}}const mR={};class QV{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function y4(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,l,h,p,y,E){const D=[],k=this.ast.options&&this.ast.options.params||mR,B=this.buildStyles(r,h&&h.params||mR,D),J=p&&p.params||mR,ce=this.buildStyles(i,J,D),Be=new Set,Ke=new Map,nt=new Map,Qe="void"===i,St={params:v4(J,k),delay:this.ast.options?.delay},Ot=E?[]:hR(e,t,this.ast.animation,s,l,B,ce,St,y,D);let an=0;if(Ot.forEach(ha=>{an=Math.max(ha.duration+ha.delay,an)}),D.length)return YV(t,this._triggerName,r,i,Qe,B,ce,[],[],Ke,nt,an,D);Ot.forEach(ha=>{const $d=ha.element,F$=oa(Ke,$d,new Set);ha.preStyleProps.forEach(_g=>F$.add(_g));const EE=oa(nt,$d,new Set);ha.postStyleProps.forEach(_g=>EE.add(_g)),$d!==t&&Be.add($d)});const Ur=mT(Be.values());return YV(t,this._triggerName,r,i,Qe,B,ce,Ot,Ur,Ke,nt,an)}}function v4(n,e){const t=uw(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class b4{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=uw(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!==l&&(i[s]=l)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((l,h)=>{l&&(l=pT(l,i,t));const p=this.normalizer.normalizePropertyName(h,t);l=this.normalizer.normalizeStyleValue(h,p,l,t),r.set(p,l)})}),r}}class E4{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new b4(i.style,i.options&&i.options.params||{},r))}),XV(this.states,"true","1"),XV(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new QV(e,i,this.states))}),this.fallbackTransition=function C4(n,e,t){return new QV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function XV(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const I4=new wT;class D4{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=cR(this._driver,t,r,[]);if(r.length)throw function D6(n){return new u.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=MV(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let l;const h=new Map;if(s?(l=hR(this._driver,t,s,iR,uT,new Map,new Map,r,I4,i),l.forEach(E=>{const D=oa(h,E.element,new Map);E.postStyleProps.forEach(k=>D.set(k,null))})):(i.push(function T6(){return new u.vHH(3300,!1)}()),l=[]),i.length)throw function S6(n){return new u.vHH(3504,!1)}();h.forEach((E,D)=>{E.forEach((k,N)=>{E.set(N,this._driver.computeStyle(D,N,Md))})});const y=Af(l.map(E=>{const D=h.get(E.element);return this._buildPlayer(E,new Map,D)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function A6(n){return new u.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=eR(t,"","","");return Xk(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const JV="ng-animate-queued",gR="ng-animate-disabled",M4=[],eB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},k4={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ll="__ng_removed";class _R{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function N4(n){return n??null}(r?e.value:e),r){const s=uw(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const hw="void",yR=new _R(hw);class R4{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,cl(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function x6(n,e){return new u.vHH(3302,!1)}();if(null==r||0==r.length)throw function M6(n){return new u.vHH(3303,!1)}();if(!function F4(n){return"start"==n||"done"==n}(r))throw function k6(n,e){return new u.vHH(3400,!1)}();const s=oa(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};s.push(l);const h=oa(this._engine.statesByElement,e,new Map);return h.has(t)||(cl(e,dT),cl(e,dT+"-"+t),h.set(t,yR)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(l);p>=0&&s.splice(p,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function R6(n){return new u.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),l=new vR(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(cl(e,dT),cl(e,dT+"-"+t),this._engine.statesByElement.set(e,h=new Map));let p=h.get(t);const y=new _R(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),h.set(t,y),p||(p=yR),y.value!==hw&&p.value===y.value){if(!function B4(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const J=[],ce=s.matchStyles(p.value,p.params,J),Be=s.matchStyles(y.value,y.params,J);J.length?this._engine.reportError(J):this._engine.afterFlush(()=>{Vm(e,ce),du(e,Be)})}return}const k=oa(this._engine.playersByElement,e,[]);k.forEach(J=>{J.namespaceId==this.id&&J.triggerName==t&&J.queued&&J.destroy()});let N=s.matchTransition(p.value,y.value,e,y.params),B=!1;if(!N){if(!i)return;N=s.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:N,fromState:p,toState:y,player:l,isFallbackTransition:B}),B||(cl(e,JV),l.onStart(()=>{Ey(e,JV)})),l.onDone(()=>{let J=this.players.indexOf(l);J>=0&&this.players.splice(J,1);const ce=this._engine.playersByElement.get(e);if(ce){let Be=ce.indexOf(l);Be>=0&&ce.splice(Be,1)}}),this.players.push(l),k.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,hT,!0);r.forEach(i=>{if(i[ll])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),l=new Map;if(s){const h=[];if(s.forEach((p,y)=>{if(l.set(y,p.value),this._triggers.has(y)){const E=this.trigger(e,y,hw,i);E&&h.push(E)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&Af(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const l=s.name;if(i.has(l))return;i.add(l);const p=this._triggers.get(l).fallbackTransition,y=r.get(l)||yR,E=new _R(hw),D=new vR(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:p,fromState:y,toState:E,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[ll];(!s||s===eB)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){cl(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,l=this._elementListeners.get(s);l&&l.forEach(h=>{if(h.name==r.triggerName){const p=eR(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,Xk(r.player,h.phase,p,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class O4{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new R4(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,h=this.driver.getParentElement(t);for(;h;){const p=i.get(h);if(p){const y=r.indexOf(p);r.splice(y+1,0,e),l=!0;break}h=this.driver.getParentElement(h)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(IT(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!IT(t))return;const s=t[ll];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),cl(e,gR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ey(e,gR))}removeNode(e,t,r,i){if(IT(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[ll]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return IT(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,hT,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,sR,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Af(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ll];if(t&&t.setForRemoval){if(e[ll]=eB,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(gR)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)cl(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Af(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function O6(n){return new u.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new wT,i=[],s=new Map,l=[],h=new Map,p=new Map,y=new Map,E=new Set;this.disabledNodes.forEach(gt=>{E.add(gt);const Ct=this.driver.query(gt,".ng-animate-queued",!0);for(let Pt=0;Pt<Ct.length;Pt++)E.add(Ct[Pt])});const D=this.bodyNode,k=Array.from(this.statesByElement.keys()),N=rB(k,this.collectedEnterElements),B=new Map;let J=0;N.forEach((gt,Ct)=>{const Pt=iR+J++;B.set(Ct,Pt),gt.forEach(bn=>cl(bn,Pt))});const ce=[],Be=new Set,Ke=new Set;for(let gt=0;gt<this.collectedLeaveElements.length;gt++){const Ct=this.collectedLeaveElements[gt],Pt=Ct[ll];Pt&&Pt.setForRemoval&&(ce.push(Ct),Be.add(Ct),Pt.hasAnimation?this.driver.query(Ct,".ng-star-inserted",!0).forEach(bn=>Be.add(bn)):Ke.add(Ct))}const nt=new Map,Qe=rB(k,Array.from(Be));Qe.forEach((gt,Ct)=>{const Pt=uT+J++;nt.set(Ct,Pt),gt.forEach(bn=>cl(bn,Pt))}),e.push(()=>{N.forEach((gt,Ct)=>{const Pt=B.get(Ct);gt.forEach(bn=>Ey(bn,Pt))}),Qe.forEach((gt,Ct)=>{const Pt=nt.get(Ct);gt.forEach(bn=>Ey(bn,Pt))}),ce.forEach(gt=>{this.processLeaveNode(gt)})});const St=[],Ot=[];for(let gt=this._namespaceList.length-1;gt>=0;gt--)this._namespaceList[gt].drainQueuedTransitions(t).forEach(Pt=>{const bn=Pt.player,ji=Pt.element;if(St.push(bn),this.collectedEnterElements.length){const Ds=ji[ll];if(Ds&&Ds.setForMove){if(Ds.previousTriggersValues&&Ds.previousTriggersValues.has(Pt.triggerName)){const yg=Ds.previousTriggersValues.get(Pt.triggerName),hl=this.statesByElement.get(Pt.element);if(hl&&hl.has(Pt.triggerName)){const KS=hl.get(Pt.triggerName);KS.value=yg,hl.set(Pt.triggerName,KS)}}return void bn.destroy()}}const wu=!D||!this.driver.containsElement(D,ji),fa=nt.get(ji),Yf=B.get(ji),Dr=this._buildInstruction(Pt,r,Yf,fa,wu);if(Dr.errors&&Dr.errors.length)return void Ot.push(Dr);if(wu)return bn.onStart(()=>Vm(ji,Dr.fromStyles)),bn.onDestroy(()=>du(ji,Dr.toStyles)),void i.push(bn);if(Pt.isFallbackTransition)return bn.onStart(()=>Vm(ji,Dr.fromStyles)),bn.onDestroy(()=>du(ji,Dr.toStyles)),void i.push(bn);const B$=[];Dr.timelines.forEach(Ds=>{Ds.stretchStartingKeyframe=!0,this.disabledNodes.has(Ds.element)||B$.push(Ds)}),Dr.timelines=B$,r.append(ji,Dr.timelines),l.push({instruction:Dr,player:bn,element:ji}),Dr.queriedElements.forEach(Ds=>oa(h,Ds,[]).push(bn)),Dr.preStyleProps.forEach((Ds,yg)=>{if(Ds.size){let hl=p.get(yg);hl||p.set(yg,hl=new Set),Ds.forEach((KS,xN)=>hl.add(xN))}}),Dr.postStyleProps.forEach((Ds,yg)=>{let hl=y.get(yg);hl||y.set(yg,hl=new Set),Ds.forEach((KS,xN)=>hl.add(xN))})});if(Ot.length){const gt=[];Ot.forEach(Ct=>{gt.push(function P6(n,e){return new u.vHH(3505,!1)}())}),St.forEach(Ct=>Ct.destroy()),this.reportError(gt)}const an=new Map,Ur=new Map;l.forEach(gt=>{const Ct=gt.element;r.has(Ct)&&(Ur.set(Ct,Ct),this._beforeAnimationBuild(gt.player.namespaceId,gt.instruction,an))}),i.forEach(gt=>{const Ct=gt.element;this._getPreviousPlayers(Ct,!1,gt.namespaceId,gt.triggerName,null).forEach(bn=>{oa(an,Ct,[]).push(bn),bn.destroy()})});const ha=ce.filter(gt=>sB(gt,p,y)),$d=new Map;nB($d,this.driver,Ke,y,Md).forEach(gt=>{sB(gt,p,y)&&ha.push(gt)});const EE=new Map;N.forEach((gt,Ct)=>{nB(EE,this.driver,new Set(gt),p,"!")}),ha.forEach(gt=>{const Ct=$d.get(gt),Pt=EE.get(gt);$d.set(gt,new Map([...Array.from(Ct?.entries()??[]),...Array.from(Pt?.entries()??[])]))});const _g=[],L$=[],V$={};l.forEach(gt=>{const{element:Ct,player:Pt,instruction:bn}=gt;if(r.has(Ct)){if(E.has(Ct))return Pt.onDestroy(()=>du(Ct,bn.toStyles)),Pt.disabled=!0,Pt.overrideTotalTime(bn.totalTime),void i.push(Pt);let ji=V$;if(Ur.size>1){let fa=Ct;const Yf=[];for(;fa=fa.parentNode;){const Dr=Ur.get(fa);if(Dr){ji=Dr;break}Yf.push(fa)}Yf.forEach(Dr=>Ur.set(Dr,ji))}const wu=this._buildAnimation(Pt.namespaceId,bn,an,s,EE,$d);if(Pt.setRealPlayer(wu),ji===V$)_g.push(Pt);else{const fa=this.playersByElement.get(ji);fa&&fa.length&&(Pt.parentPlayer=Af(fa)),i.push(Pt)}}else Vm(Ct,bn.fromStyles),Pt.onDestroy(()=>du(Ct,bn.toStyles)),L$.push(Pt),E.has(Ct)&&i.push(Pt)}),L$.forEach(gt=>{const Ct=s.get(gt.element);if(Ct&&Ct.length){const Pt=Af(Ct);gt.setRealPlayer(Pt)}}),i.forEach(gt=>{gt.parentPlayer?gt.syncPlayerEvents(gt.parentPlayer):gt.destroy()});for(let gt=0;gt<ce.length;gt++){const Ct=ce[gt],Pt=Ct[ll];if(Ey(Ct,uT),Pt&&Pt.hasAnimation)continue;let bn=[];if(h.size){let wu=h.get(Ct);wu&&wu.length&&bn.push(...wu);let fa=this.driver.query(Ct,sR,!0);for(let Yf=0;Yf<fa.length;Yf++){let Dr=h.get(fa[Yf]);Dr&&Dr.length&&bn.push(...Dr)}}const ji=bn.filter(wu=>!wu.destroyed);ji.length?L4(this,Ct,ji):this.processLeaveNode(Ct)}return ce.length=0,_g.forEach(gt=>{this.players.push(gt),gt.onDone(()=>{gt.destroy();const Ct=this.players.indexOf(gt);this.players.splice(Ct,1)}),gt.play()}),_g}elementContainsData(e,t){let r=!1;const i=t[ll];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let l=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(l=h)}else{const h=this.playersByElement.get(e);if(h){const p=!s||s==hw;h.forEach(y=>{y.queued||!p&&y.triggerName!=i||l.push(y)})}}return(r||i)&&(l=l.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),l}_beforeAnimationBuild(e,t,r){const s=t.element,l=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,E=y!==s,D=oa(r,y,[]);this._getPreviousPlayers(y,E,l,h,t.toState).forEach(N=>{const B=N.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),N.destroy(),D.push(N)})}Vm(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,l){const h=t.triggerName,p=t.element,y=[],E=new Set,D=new Set,k=t.timelines.map(B=>{const J=B.element;E.add(J);const ce=J[ll];if(ce&&ce.removedBeforeQueried)return new iw(B.duration,B.delay);const Be=J!==p,Ke=function V4(n){const e=[];return iB(n,e),e}((r.get(J)||M4).map(an=>an.getRealPlayer())).filter(an=>!!an.element&&an.element===J),nt=s.get(J),Qe=l.get(J),St=MV(0,this._normalizer,0,B.keyframes,nt,Qe),Ot=this._buildPlayer(B,St,Ke);if(B.subTimeline&&i&&D.add(J),Be){const an=new vR(e,h,J);an.setRealPlayer(Ot),y.push(an)}return Ot});y.forEach(B=>{oa(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function P4(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,B.element,B))}),E.forEach(B=>cl(B,BV));const N=Af(k);return N.onDestroy(()=>{E.forEach(B=>Ey(B,BV)),du(p,t.toStyles)}),D.forEach(B=>{oa(i,B,[]).push(N)}),N}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new iw(e.duration,e.delay)}}class vR{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new iw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Xk(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){oa(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function IT(n){return n&&1===n.nodeType}function tB(n,e){const t=n.style.display;return n.style.display=e??"none",t}function nB(n,e,t,r,i){const s=[];t.forEach(p=>s.push(tB(p)));const l=[];r.forEach((p,y)=>{const E=new Map;p.forEach(D=>{const k=e.computeStyle(y,D,i);E.set(D,k),(!k||0==k.length)&&(y[ll]=k4,l.push(y))}),n.set(y,E)});let h=0;return t.forEach(p=>tB(p,s[h++])),l}function rB(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),s=new Map;function l(h){if(!h)return 1;let p=s.get(h);if(p)return p;const y=h.parentNode;return p=t.has(y)?y:i.has(y)?1:l(y),s.set(h,p),p}return e.forEach(h=>{const p=l(h);1!==p&&t.get(p).push(h)}),t}function cl(n,e){n.classList?.add(e)}function Ey(n,e){n.classList?.remove(e)}function L4(n,e,t){Af(t).onDone(()=>n.processLeaveNode(e))}function iB(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof OF?iB(r.players,e):e.push(r)}}function sB(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class DT{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new O4(e,t,r),this._timelineEngine=new D4(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const l=e+"-"+i;let h=this._triggerCache[l];if(!h){const p=[],E=cR(this._driver,s,p,[]);if(p.length)throw function C6(n,e){return new u.vHH(3404,!1)}();h=function w4(n,e,t){return new E4(n,e,t)}(i,E,this._normalizer),this._triggerCache[l]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,l]=kV(r);this._timelineEngine.command(s,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[l,h]=kV(r);return this._timelineEngine.listen(l,t,h,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let H4=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&du(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(du(this._element,this._initialStyles),this._endStyles&&(du(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Vm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Vm(this._element,this._endStyles),this._endStyles=null),du(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function bR(n){let e=null;return n.forEach((t,r)=>{(function j4(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class oB{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:zV(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class $4{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return NV(e,t)}getParentElement(e){return nR(e)}query(e,t,r){return FV(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,l=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(p.easing=s);const y=new Map,E=l.filter(N=>N instanceof oB);(function W6(n,e){return 0===n||0===e})(r,i)&&E.forEach(N=>{N.currentSnapshot.forEach((B,J)=>y.set(J,B))});let D=function $6(n){return n.length?n[0]instanceof Map?n:n.map(e=>UV(e)):[]}(t).map(N=>Mf(N));D=function K6(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,l)=>{r.has(l)||i.push(l),r.set(l,s)}),i.length)for(let s=1;s<e.length;s++){let l=e[s];i.forEach(h=>l.set(h,zV(n,h)))}}return e}(e,D,y);const k=function U4(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=bR(e[0]),e.length>1&&(r=bR(e[e.length-1]))):e instanceof Map&&(t=bR(e)),t||r?new H4(n,t,r):null}(e,D);return new oB(e,D,p,k)}}let G4=(()=>{class n extends MF{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?kF(t):t;return aB(this._renderer,null,r,"register",[i]),new z4(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(oe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class z4 extends class kz{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new q4(this._id,e,t||{},this._renderer)}}class q4{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return aB(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function aB(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const lB="@.disabled";let W4=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,l)=>{const h=l?.parentNode(s);h&&l.removeChild(h,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let E=this._rendererCache.get(s);return E||(E=new cB("",s,this.engine),this._rendererCache.set(s,E)),E}const l=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=E=>{Array.isArray(E)?E.forEach(p):this.engine.registerTrigger(l,h,t,E.name,E)};return r.data.animation.forEach(p),new K4(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,h]=s;l(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(DT),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class cB{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==lB?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class K4 extends cB{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==lB?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Z4(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),l="";return"@"!=s.charAt(0)&&([s,l]=function Y4(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,l,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let Q4=(()=>{class n extends DT{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oe),u.LFG(rR),u.LFG(pR),u.LFG(u.z2F))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const uB=[{provide:MF,useClass:G4},{provide:pR,useFactory:function X4(){return new _4}},{provide:DT,useClass:Q4},{provide:u.FYo,useFactory:function J4(n,e,t){return new W4(n,e,t)},deps:[ks,DT,u.R0b]}],dB=[{provide:rR,useFactory:()=>new $4},{provide:u.QbO,useValue:"BrowserAnimations"},...uB],e8=[{provide:rR,useClass:LV},{provide:u.QbO,useValue:"NoopAnimations"},...uB];let t8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?e8:dB}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:dB,imports:[hn]}),n})(),n8=(()=>{class n{constructor(){this.title="agroceries"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},dependencies:[Tp]}),n})();const hB="firebasestorage.googleapis.com",fB="storageBucket";class kr extends F.ZR{constructor(e,t){super(wR(e),`Firebase Storage: ${t} (${wR(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kr.prototype)}_codeEquals(e){return wR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function wR(n){return"storage/"+n}function ER(){return new kr("unknown","An unknown error occurred, please check the error payload for server response.")}function pB(){return new kr("canceled","User canceled the upload/download.")}function mB(){return new kr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Cy(n){return new kr("invalid-argument",n)}function gB(){return new kr("app-deleted","The Firebase app was deleted.")}function _B(n){return new kr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fw(n,e){return new kr("invalid-format","String does not match format '"+n+"': "+e)}function pw(n){throw new kr("internal-error","Internal error: "+n)}class Es{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Es.makeFromUrl(e,t)}catch{return new Es(e,"")}if(""===r.path)return r;throw function h8(n){return new kr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Qe){Qe.path_=decodeURIComponent(Qe.path)}const D=t.replace(/[.]/g,"\\."),nt=[{regex:h,indices:{bucket:1,path:3},postModify:function s(Qe){"/"===Qe.path.charAt(Qe.path.length-1)&&(Qe.path_=Qe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===hB?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Qe=0;Qe<nt.length;Qe++){const St=nt[Qe],Ot=St.regex.exec(e);if(Ot){let Ur=Ot[St.indices.path];Ur||(Ur=""),r=new Es(Ot[St.indices.bucket],Ur),St.postModify(r);break}}if(null==r)throw function d8(n){return new kr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class g8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ST(n){return"string"==typeof n||n instanceof String}function yB(n){return CR()&&n instanceof Blob}function CR(){return typeof Blob<"u"}function IR(n,e,t,r){if(r<e)throw Cy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Cy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Rd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function vB(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var kf=(()=>{return(n=kf||(kf={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",kf;var n})();class E8{constructor(e,t,r,i,s,l,h,p,y,E,D){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=E,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,N)=>{this.resolve_=k,this.reject_=N,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function v8(n){return void 0!==n}(p)?s():s(p)}catch(p){l(p)}else if(null!==h){const p=ER();p.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,p):p)}else l(i.canceled?this.appDelete_?gB():pB():function u8(){return new kr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new AT(!1,null,!0)):this.backoffId_=function _8(n,e,t){let r=1,i=null,s=null,l=!1,h=0;function p(){return 2===h}let y=!1;function E(...ce){y||(y=!0,e.apply(null,ce))}function D(ce){i=setTimeout(()=>{i=null,n(N,p())},ce)}function k(){s&&clearTimeout(s)}function N(ce,...Be){if(y)return void k();if(ce)return k(),void E.call(null,ce,...Be);if(p()||l)return k(),void E.call(null,ce,...Be);let nt;r<64&&(r*=2),1===h?(h=2,nt=0):nt=1e3*(r+Math.random()),D(nt)}let B=!1;function J(ce){B||(B=!0,k(),!y&&(null!==i?(ce||(h=2),clearTimeout(i),D(0)):ce||(h=1)))}return D(0),s=setTimeout(()=>{l=!0,J(!0)},t),J}((r,i)=>{if(i)return void r(!1,new AT(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const h=s.getErrorCode()===kf.NO_ERROR,p=s.getStatus();if(!h||this.isRetryStatusCode_(p)){const E=s.getErrorCode()===kf.ABORT;return void r(!1,new AT(!1,null,E))}const y=-1!==this.successCodes_.indexOf(p);r(!0,new AT(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function y8(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||s}}class AT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function x8(...n){const e=function A8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(CR())return new Blob(n);throw new kr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const la={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class DR{constructor(e,t){this.data=e,this.contentType=t||null}}function TR(n,e){switch(n){case la.RAW:return new DR(bB(e));case la.BASE64:case la.BASE64URL:return new DR(wB(n,e));case la.DATA_URL:return new DR(function O8(n){const e=new EB(n);return e.base64?wB(la.BASE64,e.rest):function R8(n){let e;try{e=decodeURIComponent(n)}catch{throw fw(la.DATA_URL,"Malformed data URL.")}return bB(e)}(e.rest)}(e),function P8(n){return new EB(n).contentType}(e))}throw ER()}function bB(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function wB(n,e){switch(n){case la.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw fw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case la.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw fw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function k8(n){return atob(n)}(e)}catch{throw fw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class EB{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw fw(la.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function N8(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class hu{constructor(e,t){let r=0,i="";yB(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(yB(this.data_)){const i=function M8(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new hu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new hu(r,!0)}}static getBlob(...e){if(CR()){const t=e.map(r=>r instanceof hu?r.data_:r);return new hu(x8.apply(null,t))}{const t=e.map(l=>ST(l)?TR(la.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[s++]=l[h]}),new hu(i,!0)}}uploadData(){return this.data_}}function SR(n){let e;try{e=JSON.parse(n)}catch{return null}return function w8(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function CB(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function V8(n,e){return e}class Ks{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||V8}}let xT=null;function mw(){if(xT)return xT;const n=[];n.push(new Ks("bucket")),n.push(new Ks("generation")),n.push(new Ks("metageneration")),n.push(new Ks("name","fullPath",!0));const t=new Ks("name");t.xform=function e(s,l){return function B8(n){return!ST(n)||n.length<2?n:CB(n)}(l)},n.push(t);const i=new Ks("size");return i.xform=function r(s,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Ks("timeCreated")),n.push(new Ks("updated")),n.push(new Ks("md5Hash",null,!0)),n.push(new Ks("cacheControl",null,!0)),n.push(new Ks("contentDisposition",null,!0)),n.push(new Ks("contentEncoding",null,!0)),n.push(new Ks("contentLanguage",null,!0)),n.push(new Ks("contentType",null,!0)),n.push(new Ks("metadata","customMetadata",!0)),xT=n,xT}function IB(n,e,t){const r=SR(e);return null===r?null:function H8(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const l=t[s];r[l.local]=l.xform(r,e[l.server])}return function U8(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Es(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function AR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const DB="prefixes";class fu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function pu(n){if(!n)throw ER()}function MT(n,e){return function t(r,i){const s=IB(n,i,e);return pu(null!==s),s}}function Iy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function l8(){return new kr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function a8(){return new kr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function o8(n){return new kr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function c8(n){return new kr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function gw(n){const e=Iy(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function s8(n){return new kr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function SB(n,e,t){const i=Rd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new fu(i,"GET",MT(n,t),l);return h.errorHandler=gw(e),h}function W8(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const h=Rd(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,E=new fu(h,"GET",function z8(n,e){return function t(r,i){const s=function G8(n,e,t){const r=SR(t);return null===r?null:function $8(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[DB])for(const i of t[DB]){const s=i.replace(/\/$/,""),l=n._makeStorageReference(new Es(e,s));r.prefixes.push(l)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new Es(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return pu(null!==s),s}}(n,e.bucket),y);return E.urlParams=s,E.errorHandler=Iy(e),E}function xB(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Q8(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class kT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function xR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{pu(!1)}return pu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const tK={STATE_CHANGED:"state_changed"},Zs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function MR(n){switch(n){case"running":case"pausing":case"canceling":return Zs.RUNNING;case"paused":return Zs.PAUSED;case"success":return Zs.SUCCESS;case"canceled":return Zs.CANCELED;default:return Zs.ERROR}}class nK{constructor(e,t,r){if(function b8(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Dy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class iK extends class rK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=kf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=kf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=kf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw pw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw pw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function rc(){return new iK}class OB{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=mw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function X8(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l=xB(e,r,i),h={name:l.fullPath},p=Rd(s,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=AR(l,t),B=new fu(p,"POST",function N(J){let ce;xR(J);try{ce=J.getResponseHeader("X-Goog-Upload-URL")}catch{pu(!1)}return pu(ST(ce)),ce},n.maxUploadRetryTime);return B.urlParams=h,B.headers=E,B.body=D,B.errorHandler=Iy(e),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,rc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function J8(n,e,t,r){const p=new fu(t,"POST",function s(y){const E=xR(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{pu(!1)}D||pu(!1);const k=Number(D);return pu(!isNaN(k)),new kT(k,r.size(),"final"===E)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=Iy(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,rc,t,r);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new kT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let l;try{l=function eK(n,e,t,r,i,s,l,h){const p=new kT(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function p8(){return new kr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let E=y;i>0&&(E=Math.min(E,i));const D=p.current,B={"X-Goog-Upload-Command":E===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},J=r.slice(D,D+E);if(null===J)throw mB();const nt=new fu(t,"POST",function ce(Qe,St){const Ot=xR(Qe,["active","final"]),an=p.current+E,Ur=r.size();let ha;return ha="final"===Ot?MT(e,s)(Qe,St):null,new kT(an,Ur,"final"===Ot,ha)},e.maxUploadRetryTime);return nt.headers=B,nt.body=J.uploadData(),nt.progressCallback=h||null,nt.errorHandler=Iy(n),nt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(l,rc,i,s);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=SB(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,rc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function MB(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let nt="";for(let Qe=0;Qe<2;Qe++)nt+=Math.random().toString().slice(2);return nt}();l["Content-Type"]="multipart/related; boundary="+p;const y=xB(e,r,i),E=AR(y,t),N=hu.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===N)throw mB();const B={name:y.fullPath},J=Rd(s,n.host,n._protocol),Be=n.maxUploadRetryTime,Ke=new fu(J,"POST",MT(n,t),Be);return Ke.urlParams=B,Ke.headers=l,Ke.body=N.uploadData(),Ke.errorHandler=Iy(e),Ke}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,rc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=pB(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=MR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new nK(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(MR(this._state)){case Zs.SUCCESS:Dy(this._resolve.bind(null,this.snapshot))();break;case Zs.CANCELED:case Zs.ERROR:Dy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(MR(this._state)){case Zs.RUNNING:case Zs.PAUSED:e.next&&Dy(e.next.bind(e,this.snapshot))();break;case Zs.SUCCESS:e.complete&&Dy(e.complete.bind(e))();break;default:e.error&&Dy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Um{constructor(e,t){this._service=e,this._location=t instanceof Es?t:Es.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Um(e,t)}get root(){const e=new Es(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CB(this._location.path)}get storage(){return this._service}get parent(){const e=function F8(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Es(this._location.bucket,e);return new Um(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw _B(e)}}function NB(n,e,t){return kR.apply(this,arguments)}function kR(){return(kR=(0,we.Z)(function*(n,e,t){const i=yield FB(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield NB(n,e,i.nextPageToken))})).apply(this,arguments)}function FB(n,e){null!=e&&"number"==typeof e.maxResults&&IR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=W8(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,rc)}function gK(n){n._throwIfRoot("getDownloadURL");const e=function K8(n,e,t){const i=Rd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new fu(i,"GET",function q8(n,e){return function t(r,i){const s=IB(n,i,e);return pu(null!==s),function j8(n,e,t,r){const i=SR(e);if(null===i||!ST(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(y=>{const D=n.fullPath;return Rd("/b/"+l(n.bucket)+"/o/"+l(D),t,r)+vB({alt:"media",token:y})})[0]}(s,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=gw(e),h}(n.storage,n._location,mw());return n.storage.makeRequestWithTokens(e,rc).then(t=>{if(null===t)throw function m8(){return new kr("no-download-url","The given file does not have any download URLs.")}();return t})}function LB(n,e){const t=function L8(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Es(n._location.bucket,t);return new Um(n.storage,r)}function VB(n,e){if(n instanceof RR){const t=n;if(null==t._bucket)throw function f8(){return new kr("no-default-bucket","No default bucket found. Did you set the '"+fB+"' property when initializing the app?")}();const r=new Um(t,t._bucket);return null!=e?VB(r,e):r}return void 0!==e?LB(n,e):n}function bK(n,e){if(e&&function yK(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof RR)return function vK(n,e){return new Um(n,e)}(n,e);throw Cy("To use ref(service, url), the first argument must be a Storage instance.")}return VB(n,e)}function BB(n,e){const t=e?.[fB];return null==t?null:Es.makeFromBucketSpec(t,n)}class RR{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=hB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Es.makeFromBucketSpec(i,this._host):BB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Es.makeFromBucketSpec(this._url,e):BB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){IR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){IR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,we.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,we.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Um(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new g8(gB());{const s=function S8(n,e,t,r,i,s){const l=vB(n.urlParams),h=n.url+l,p=Object.assign({},n.headers);return function D8(n,e){e&&(n["X-Firebase-GMPID"]=e)}(p,e),function C8(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(p,t),function I8(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(p,s),function T8(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(p,r),new E8(h,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var r=this;return(0,we.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const UB="@firebase/storage";function $B(n,e){return bK(n=(0,F.m9)(n),e)}function kK(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new RR(t,r,i,e,Ji.SDK_VERSION)}!function RK(){(0,Ji._registerComponent)(new Gs.wA("storage",kK,"PUBLIC").setMultipleInstances(!0)),(0,Ji.registerVersion)(UB,"0.9.9",""),(0,Ji.registerVersion)(UB,"0.9.9","esm2017")}();class RT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class GB{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new RT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new RT(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?l=>t(new RT(l,this,this._ref)):{next:t.next?l=>t.next(new RT(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class zB{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Od(e,this._service))}get items(){return this._delegate.items.map(e=>new Od(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Od{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function xK(n,e){return LB(n,e)}(this._delegate,e);return new Od(t,this.storage)}get root(){return new Od(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Od(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new GB(function EK(n,e,t){return function dK(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new OB(n,new hu(e),t)}(n=(0,F.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=la.RAW,r){this._throwIfRoot("putString");const i=TR(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new GB(new OB(this._delegate,new hu(i.data,!0),s),this)}listAll(){return function TK(n){return function fK(n){const e={prefixes:[],items:[]};return NB(n,e).then(()=>e)}(n=(0,F.m9)(n))}(this._delegate).then(e=>new zB(e,this.storage))}list(e){return function DK(n,e){return FB(n=(0,F.m9)(n),e)}(this._delegate,e||void 0).then(t=>new zB(t,this.storage))}getMetadata(){return function CK(n){return function pK(n){n._throwIfRoot("getMetadata");const e=SB(n.storage,n._location,mw());return n.storage.makeRequestWithTokens(e,rc)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(e){return function IK(n,e){return function mK(n,e){n._throwIfRoot("updateMetadata");const t=function Z8(n,e,t,r){const s=Rd(e.fullServerUrl(),n.host,n._protocol),h=AR(t,r),y=n.maxOperationRetryTime,E=new fu(s,"PATCH",MT(n,r),y);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=h,E.errorHandler=gw(e),E}(n.storage,n._location,e,mw());return n.storage.makeRequestWithTokens(t,rc)}(n=(0,F.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function SK(n){return gK(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function AK(n){return function _K(n){n._throwIfRoot("deleteObject");const e=function Y8(n,e){const r=Rd(e.fullServerUrl(),n.host,n._protocol),h=new fu(r,"DELETE",function l(p,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=gw(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,rc)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw _B(e)}}class qB{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(WB(e))throw Cy("ref() expected a child path but got a URL, use refFromURL instead.");return new Od($B(this._delegate,e),this)}refFromURL(e){if(!WB(e))throw Cy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Es.makeFromUrl(e,this._delegate.host)}catch{throw Cy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Od($B(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function MK(n,e,t,r={}){!function wK(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,F.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function WB(n){return/^[A-Za-z]+:\/\//.test(n)}function FK(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new qB(t,r)}function KB(n){const e=function VK(n){return new Wn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const s=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){s()}}).pipe(hk(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ot.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function OT(n){return{getDownloadURL:()=>Ue(void 0).pipe(cn.fc,Cr(()=>n.getDownloadURL()),cn.iC),getMetadata:()=>Ue(void 0).pipe(cn.fc,Cr(()=>n.getMetadata()),cn.iC),delete:()=>(0,nn.D)(n.delete()),child:e=>OT(n.child(e)),updateMetadata:e=>(0,nn.D)(n.updateMetadata(e)),put:(e,t)=>KB(n.put(e,t)),putString:(e,t,r)=>KB(n.putString(e,t,r)),list:e=>(0,nn.D)(n.list(e)),listAll:()=>(0,nn.D)(n.listAll())}}!function LK(n){const e={TaskState:Zs,TaskEvent:tK,StringFormat:la,Storage:qB,Reference:Od};n.INTERNAL.registerComponent(new Gs.wA("storage-compat",FK,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(a_.Z);const BK=new u.OlP("angularfire2.storageBucket"),UK=new u.OlP("angularfire2.storage.maxUploadRetryTime"),HK=new u.OlP("angularfire2.storage.maxOperationRetryTime"),jK=new u.OlP("angularfire2.storage.use-emulator");let $K=(()=>{class n{constructor(t,r,i,s,l,h,p,y,E,D){const k=(0,Mr.on)(t,l,r);this.storage=(0,Mr.cc)(`${k.name}.storage.${i}`,"AngularFireStorage",k.name,()=>{const N=l.runOutsideAngular(()=>k.storage(i||void 0)),B=E;return B&&N.useEmulator(...B),p&&N.setMaxUploadRetryTime(p),y&&N.setMaxOperationRetryTime(y),N},[p,y])}ref(t){return OT(this.storage.ref(t))}refFromURL(t){return OT(this.storage.refFromURL(t))}upload(t,r,i){return OT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Mr.Dh),u.LFG(Mr.xv,8),u.LFG(BK,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(cn.HU),u.LFG(UK,8),u.LFG(HK,8),u.LFG(jK,8),u.LFG(sd,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),GK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),zK=(()=>{class n{constructor(){Gp.Z.registerVersion("angularfire",cn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[$K],imports:[GK]}),n})();function OR(){return(0,yn.e)((n,e)=>{let t,r=!1;n.subscribe((0,In.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var ut,qK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pd={},PR=PR||{},Bt=qK||self;function PT(){}function NR(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function _w(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var FR="closure_uid_"+(1e9*Math.random()>>>0),KK=0;function ZK(n,e,t){return n.call.apply(n.bind,arguments)}function YK(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function is(n,e,t){return(is=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ZK:YK).apply(null,arguments)}function NT(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ss(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Rf(){this.s=this.s,this.o=this.o}var XK={};Rf.prototype.s=!1,Rf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function WK(n){return Object.prototype.hasOwnProperty.call(n,FR)&&n[FR]||(n[FR]=++KK)}(this);delete XK[n]}},Rf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ZB=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},YB=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function QB(n){return Array.prototype.concat.apply([],arguments)}function LR(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function FT(n){return/^[\s\xa0]*$/.test(n)}var Qs,XB=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ys(n,e){return-1!=n.indexOf(e)}function VR(n,e){return n<e?-1:n>e?1:0}e:{var JB=Bt.navigator;if(JB){var eU=JB.userAgent;if(eU){Qs=eU;break e}}Qs=""}function BR(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function tU(n){const e={};for(const t in n)e[t]=n[t];return e}var nU="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rU(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<nU.length;s++)t=nU[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function UR(n){return UR[" "](n),n}UR[" "]=PT;var LT,n,t5=Ys(Qs,"Opera"),Ty=Ys(Qs,"Trident")||Ys(Qs,"MSIE"),iU=Ys(Qs,"Edge"),HR=iU||Ty,sU=Ys(Qs,"Gecko")&&!(Ys(Qs.toLowerCase(),"webkit")&&!Ys(Qs,"Edge"))&&!(Ys(Qs,"Trident")||Ys(Qs,"MSIE"))&&!Ys(Qs,"Edge"),n5=Ys(Qs.toLowerCase(),"webkit")&&!Ys(Qs,"Edge");function oU(){var n=Bt.document;return n?n.documentMode:void 0}e:{var jR="",$R=(n=Qs,sU?/rv:([^\);]+)(\)|;)/.exec(n):iU?/Edge\/([\d\.]+)/.exec(n):Ty?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):n5?/WebKit\/(\S+)/.exec(n):t5?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if($R&&(jR=$R?$R[1]:""),Ty){var GR=oU();if(null!=GR&&GR>parseFloat(jR)){LT=String(GR);break e}}LT=jR}var r5={};var o5=Bt.document&&Ty&&(oU()||parseInt(LT,10))||void 0,a5=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Bt.addEventListener("test",PT,e),Bt.removeEventListener("test",PT,e)}catch{}return n}();function Cs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function yw(n,e){if(Cs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(sU){e:{try{UR(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:l5[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&yw.Z.h.call(this)}}Cs.prototype.h=function(){this.defaultPrevented=!0},ss(yw,Cs);var l5={2:"touch",3:"pen",4:"mouse"};yw.prototype.h=function(){yw.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var vw="closure_listenable_"+(1e6*Math.random()|0),c5=0;function u5(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++c5,this.ca=this.fa=!1}function VT(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function BT(n){this.src=n,this.g={},this.h=0}function qR(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=ZB(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(VT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function WR(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}BT.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=WR(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new u5(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var KR="closure_lm_"+(1e6*Math.random()|0),ZR={};function lU(n,e,t,r,i){if(r&&r.once)return uU(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)lU(n,e[s],t,r,i);return null}return t=JR(t),n&&n[vw]?n.N(e,t,_w(r)?!!r.capture:!!r,i):cU(n,e,t,!1,r,i)}function cU(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var l=_w(i)?!!i.capture:!!i,h=QR(n);if(h||(n[KR]=h=new BT(n)),(t=h.add(e,t,r,l,s)).proxy)return t;if(r=function d5(){var e=h5;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)a5||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(hU(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function uU(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)uU(n,e[s],t,r,i);return null}return t=JR(t),n&&n[vw]?n.O(e,t,_w(r)?!!r.capture:!!r,i):cU(n,e,t,!0,r,i)}function dU(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)dU(n,e[s],t,r,i);else r=_w(r)?!!r.capture:!!r,t=JR(t),n&&n[vw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=WR(s=n.g[e],t,r,i))&&(VT(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=QR(n))&&(e=n.g[e.toString()],n=-1,e&&(n=WR(e,t,r,i)),(t=-1<n?e[n]:null)&&YR(t))}function YR(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[vw])qR(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(hU(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=QR(e))?(qR(t,n),0==t.h&&(t.src=null,e[KR]=null)):VT(n)}}}function hU(n){return n in ZR?ZR[n]:ZR[n]="on"+n}function h5(n,e){if(n.ca)n=!0;else{e=new yw(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&YR(n),n=t.call(r,e)}return n}function QR(n){return(n=n[KR])instanceof BT?n:null}var XR="__closure_events_fn_"+(1e9*Math.random()>>>0);function JR(n){return"function"==typeof n?n:(n[XR]||(n[XR]=function(e){return n.handleEvent(e)}),n[XR])}function Fi(){Rf.call(this),this.i=new BT(this),this.P=this,this.I=null}function os(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Cs(e,n);else if(e instanceof Cs)e.target=e.target||n;else{var i=e;rU(e=new Cs(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];i=UT(l,r,!0,e)&&i}if(i=UT(l=e.g=n,r,!0,e)&&i,i=UT(l,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=UT(l=e.g=t[s],r,!1,e)&&i}function UT(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.ca&&l.capture==t){var h=l.listener,p=l.ia||l.src;l.fa&&qR(n.i,l),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}ss(Fi,Rf),Fi.prototype[vw]=!0,Fi.prototype.removeEventListener=function(n,e,t,r){dU(this,n,e,t,r)},Fi.prototype.M=function(){if(Fi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)VT(t[r]);delete n.g[e],n.h--}}this.I=null},Fi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Fi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var eO=Bt.JSON.stringify;function f5(){var n=pU;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var nO,fU=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new m5,n=>n.reset());class m5{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function g5(n){Bt.setTimeout(()=>{throw n},0)}function tO(n,e){nO||function _5(){var n=Bt.Promise.resolve(void 0);nO=function(){n.then(y5)}}(),rO||(nO(),rO=!0),pU.add(n,e)}var rO=!1,pU=new class p5{constructor(){this.h=this.g=null}add(e,t){const r=fU.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function y5(){for(var n;n=f5();){try{n.h.call(n.g)}catch(t){g5(t)}var e=fU;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}rO=!1}function HT(n,e){Fi.call(this),this.h=n||1,this.g=e||Bt,this.j=is(this.kb,this),this.l=Date.now()}function iO(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function sO(n,e,t){if("function"==typeof n)t&&(n=is(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=is(n.handleEvent,n)}return 2147483647<Number(e)?-1:Bt.setTimeout(n,e||0)}function mU(n){n.g=sO(()=>{n.g=null,n.i&&(n.i=!1,mU(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ss(HT,Fi),(ut=HT.prototype).da=!1,ut.S=null,ut.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),os(this,"tick"),this.da&&(iO(this),this.start()))}},ut.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){HT.Z.M.call(this),iO(this),delete this.g};class v5 extends Rf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mU(this)}M(){super.M(),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bw(n){Rf.call(this),this.h=n,this.g={}}ss(bw,Rf);var gU=[];function _U(n,e,t,r){Array.isArray(t)||(t&&(gU[0]=t.toString()),t=gU);for(var i=0;i<t.length;i++){var s=lU(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function yU(n){BR(n.g,function(e,t){this.g.hasOwnProperty(t)&&YR(e)},n),n.g={}}function jT(){this.g=!0}function Sy(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function C5(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<i.length;l++)i[l]=""}}}return eO(t)}catch{return e}}(n,t)+(r?" "+r:"")})}bw.prototype.M=function(){bw.Z.M.call(this),yU(this)},bw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jT.prototype.Aa=function(){this.g=!1},jT.prototype.info=function(){};var Hm={},vU=null;function $T(){return vU=vU||new Fi}function bU(n){Cs.call(this,Hm.Ma,n)}function ww(n){const e=$T();os(e,new bU(e,n))}function wU(n,e){Cs.call(this,Hm.STAT_EVENT,n),this.stat=e}function Xs(n){const e=$T();os(e,new wU(e,n))}function EU(n,e){Cs.call(this,Hm.Na,n),this.size=e}function Ew(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Bt.setTimeout(function(){n()},e)}Hm.Ma="serverreachability",ss(bU,Cs),Hm.STAT_EVENT="statevent",ss(wU,Cs),Hm.Na="timingevent",ss(EU,Cs);var GT={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},CU={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function oO(){}function DU(){}oO.prototype.h=null;var cO,Cw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function aO(){Cs.call(this,"d")}function lO(){Cs.call(this,"c")}function zT(){}function Iw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new bw(this),this.P=I5,this.W=new HT(n=HR?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new TU}function TU(){this.i=null,this.g="",this.h=!1}ss(aO,Cs),ss(lO,Cs),ss(zT,oO),zT.prototype.g=function(){return new XMLHttpRequest},zT.prototype.i=function(){return{}},cO=new zT;var I5=45e3,uO={},qT={};function dO(n,e,t){n.K=1,n.v=QT(Nd(e)),n.s=t,n.U=!0,SU(n,null)}function SU(n,e){n.F=Date.now(),Dw(n),n.A=Nd(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),FU(t.h,"t",r),n.C=0,t=n.l.H,n.h=new TU,n.g=o2(n.l,t?e:null,!n.s),0<n.O&&(n.L=new v5(is(n.Ia,n,n.g),n.O)),_U(n.V,n.g,"readystatechange",n.gb),e=n.H?tU(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),ww(1),function b5(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var l="",h=s.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var E=y[0];y=y[1];var D=E.split("_");l=2<=D.length&&"type"==D[1]?l+(E+"=")+y+"&":l+(E+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function AU(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function xU(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=D5(n,t),i==qT){4==e&&(n.o=4,Xs(14),r=!1),Sy(n.j,n.m,null,"[Incomplete Response]");break}if(i==uO){n.o=4,Xs(15),Sy(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Sy(n.j,n.m,i,null),hO(n,i)}AU(n)&&i!=qT&&i!=uO&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Xs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),CO(e),e.L=!0,Xs(11))):(Sy(n.j,n.m,t,"[Invalid Chunked Response]"),jm(n),Tw(n))}function D5(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?qT:(t=Number(e.substring(t,r)),isNaN(t)?uO:(r+=1)+t>e.length?qT:(e=e.substr(r,t),n.C=r+t,e))}function Dw(n){n.Y=Date.now()+n.P,MU(n,n.P)}function MU(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ew(is(n.eb,n),e)}function WT(n){n.B&&(Bt.clearTimeout(n.B),n.B=null)}function Tw(n){0==n.l.G||n.I||t2(n.l,n)}function jm(n){WT(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,iO(n.W),yU(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function hO(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||mO(t.i,n)))if(t.I=n.N,!n.J&&mO(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;rS(t),tS(t)}EO(t),Xs(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Ew(is(t.ab,t),6e3));if(1>=BU(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else zm(t,11)}else if((n.J||t.g==n)&&rS(t),!FT(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const E=y[3];null!=E&&(t.ma=E,t.h.info("VER="+t.ma));const D=y[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const k=y[5];null!=k&&"number"==typeof k&&0<k&&(t.K=r=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const N=n.g;if(N){const B=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var s=r.i;!s.g&&(Ys(B,"spdy")||Ys(B,"quic")||Ys(B,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(gO(s,s.h),s.h=null))}if(r.D){const J=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;J&&(r.sa=J,yr(r.F,r.D,J))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=s2(r,r.H?r.la:null,r.W),l.J){UU(r.i,l);var h=l,p=r.K;p&&h.setTimeout(p),h.B&&(WT(h),Dw(h)),r.g=l}else JU(r);0<t.l.length&&nS(t)}else"stop"!=y[0]&&"close"!=y[0]||zm(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?zm(t,7):bO(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}ww(4)}catch{}}function fO(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(NR(n)||"string"==typeof n)YB(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(NR(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function T5(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(NR(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function Ay(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ay)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function pO(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];$m(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)$m(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function $m(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ut=Iw.prototype).setTimeout=function(n){this.P=n},ut.gb=function(n){n=n.target;const e=this.L;e&&3==Fd(n)?e.l():this.Ia(n)},ut.Ia=function(n){try{if(n==this.g)e:{const E=Fd(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>E)&&(3!=E||HR||this.g&&(this.h.h||this.g.ga()||KU(this.g)))){this.I||4!=E||7==e||ww(8==e||0>=D?3:2),WT(this);var t=this.g.ba();this.N=t;t:if(AU(this)){var r=KU(this.g);n="";var i=r.length,s=4==Fd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){jm(this),Tw(this);var l="";break t}this.h.i=new Bt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function w5(n,e,t,r,i,s,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.X,E,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!FT(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Xs(12),jm(this),Tw(this);break e}Sy(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,hO(this,t)}this.U?(xU(this,E,l),HR&&this.i&&3==E&&(_U(this.V,this.W,"tick",this.fb),this.W.start())):(Sy(this.j,this.m,l,null),hO(this,l)),4==E&&jm(this),this.i&&!this.I&&(4==E?t2(this.l,this):(this.i=!1,Dw(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Xs(12)):(this.o=0,Xs(13)),jm(this),Tw(this)}}}catch{}},ut.fb=function(){if(this.g){var n=Fd(this.g),e=this.g.ga();this.C<e.length&&(WT(this),xU(this,n,e),this.i&&4!=n&&Dw(this))}},ut.cancel=function(){this.I=!0,jm(this)},ut.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function E5(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ww(3),Xs(17)),jm(this),this.o=2,Tw(this)):MU(this,this.Y-n)},(ut=Ay.prototype).R=function(){pO(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ut.T=function(){return pO(this),this.g.concat()},ut.get=function(n,e){return $m(this.h,n)?this.h[n]:e},ut.set=function(n,e){$m(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ut.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var kU=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Gm(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Gm){this.g=void 0!==e?e:n.g,KT(this,n.j),this.s=n.s,ZT(this,n.i),YT(this,n.m),this.l=n.l,e=n.h;var t=new xw;t.i=e.i,e.g&&(t.g=new Ay(e.g),t.h=e.h),RU(this,t),this.o=n.o}else n&&(t=String(n).match(kU))?(this.g=!!e,KT(this,t[1]||"",!0),this.s=Sw(t[2]||""),ZT(this,t[3]||"",!0),YT(this,t[4]),this.l=Sw(t[5]||"",!0),RU(this,t[6]||"",!0),this.o=Sw(t[7]||"")):(this.g=!!e,this.h=new xw(null,this.g))}function Nd(n){return new Gm(n)}function KT(n,e,t){n.j=t?Sw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ZT(n,e,t){n.i=t?Sw(e,!0):e}function YT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function RU(n,e,t){e instanceof xw?(n.h=e,function N5(n,e){e&&!n.j&&(Of(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(PU(this,r),FU(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Aw(e,O5)),n.h=new xw(e,n.g))}function yr(n,e,t){n.h.set(e,t)}function QT(n){return yr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Sw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Aw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,M5),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function M5(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Gm.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Aw(e,OU,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Aw(e,OU,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Aw(t,"/"==t.charAt(0)?R5:k5,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Aw(t,P5)),n.join("")};var OU=/[#\/\?@]/g,k5=/[#\?:]/g,R5=/[#\?]/g,O5=/[#\?@]/g,P5=/#/g;function xw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Of(n){n.g||(n.g=new Ay,n.h=0,n.i&&function S5(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function PU(n,e){Of(n),e=xy(n,e),$m(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,$m((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&pO(n)))}function NU(n,e){return Of(n),e=xy(n,e),$m(n.g.h,e)}function FU(n,e,t){PU(n,e),0<t.length&&(n.i=null,n.g.set(xy(n,e),LR(t)),n.h+=t.length)}function xy(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function LU(n){this.l=n||L5,n=Bt.PerformanceNavigationTiming?0<(n=Bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Bt.g&&Bt.g.Ea&&Bt.g.Ea()&&Bt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=xw.prototype).add=function(n,e){Of(this),this.i=null,n=xy(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){Of(this),this.g.forEach(function(t,r){YB(t,function(i){n.call(e,i,r,this)},this)},this)},ut.T=function(){Of(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},ut.R=function(n){Of(this);var e=[];if("string"==typeof n)NU(this,n)&&(e=QB(e,this.g.get(xy(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=QB(e,n[t])}return e},ut.set=function(n,e){return Of(this),this.i=null,NU(this,n=xy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var l=i;""!==r[s]&&(l+="="+encodeURIComponent(String(r[s]))),n.push(l)}}return this.i=n.join("&")};var L5=10;function VU(n){return!!n.h||!!n.g&&n.g.size>=n.j}function BU(n){return n.h?1:n.g?n.g.size:0}function mO(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function gO(n,e){n.g?n.g.add(e):n.h=e}function UU(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function HU(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return LR(n.i)}function _O(){}function V5(){this.g=new _O}function B5(n,e,t){const r=t||"";try{fO(n,function(i,s){let l=i;_w(i)&&(l=eO(i)),e.push(r+s+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function XT(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Mw(n){this.l=n.$b||null,this.j=n.ib||!1}function JT(n,e){Fi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=yO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}LU.prototype.cancel=function(){if(this.i=HU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},_O.prototype.stringify=function(n){return Bt.JSON.stringify(n,void 0)},_O.prototype.parse=function(n){return Bt.JSON.parse(n,void 0)},ss(Mw,oO),Mw.prototype.g=function(){return new JT(this.l,this.j)},Mw.prototype.i=function(n){return function(){return n}}({}),ss(JT,Fi);var yO=0;function jU(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function kw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Rw(n)}function Rw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=JT.prototype).open=function(n,e){if(this.readyState!=yO)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Rw(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Bt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kw(this)),this.readyState=yO},ut.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Rw(this)),this.g&&(this.readyState=3,Rw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Bt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jU(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ut.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?kw(this):Rw(this),3==this.readyState&&jU(this)}},ut.Ua=function(n){this.g&&(this.response=this.responseText=n,kw(this))},ut.Ta=function(n){this.g&&(this.response=n,kw(this))},ut.ha=function(){this.g&&kw(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(JT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var H5=Bt.JSON.parse;function Xr(n){Fi.call(this),this.headers=new Ay,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$U,this.K=this.L=!1}ss(Xr,Fi);var $U="",j5=/^https?$/i,$5=["POST","PUT"];function z5(n){return"content-type"==n.toLowerCase()}function GU(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,zU(n),eS(n)}function zU(n){n.D||(n.D=!0,os(n,"complete"),os(n,"error"))}function qU(n){if(n.h&&typeof PR<"u"&&(!n.C[1]||4!=Fd(n)||2!=n.ba()))if(n.v&&4==Fd(n))sO(n.Fa,0,n);else if(os(n,"readystatechange"),4==Fd(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(kU)[1]||null;if(!i&&Bt.self&&Bt.self.location){var s=Bt.self.location.protocol;i=s.substr(0,s.length-1)}r=!j5.test(i?i.toLowerCase():"")}t=r}if(t)os(n,"complete"),os(n,"success");else{n.m=6;try{var l=2<Fd(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.ba()+"]",zU(n)}}finally{eS(n)}}}function eS(n,e){if(n.g){WU(n);const t=n.g,r=n.C[0]?PT:null;n.g=null,n.C=null,e||os(n,"ready");try{t.onreadystatechange=r}catch{}}}function WU(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Bt.clearTimeout(n.A),n.A=null)}function Fd(n){return n.g?n.g.readyState:0}function KU(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case $U:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function vO(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function q5(n){let e="";return BR(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):yr(n,e,t))}function Ow(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ZU(n){this.za=0,this.l=[],this.h=new jT,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ow("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ow("baseRetryDelayMs",5e3,n),this.$a=Ow("retryDelaySeedMs",1e4,n),this.Ya=Ow("forwardChannelMaxRetries",2,n),this.ra=Ow("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new LU(n&&n.concurrentRequestLimit),this.Ca=new V5,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function bO(n){if(YU(n),3==n.G){var e=n.V++,t=Nd(n.F);yr(t,"SID",n.J),yr(t,"RID",e),yr(t,"TYPE","terminate"),Pw(n,t),(e=new Iw(n,n.h,e,void 0)).K=2,e.v=QT(Nd(t)),t=!1,Bt.navigator&&Bt.navigator.sendBeacon&&(t=Bt.navigator.sendBeacon(e.v.toString(),"")),!t&&Bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=o2(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Dw(e)}r2(n)}function tS(n){n.g&&(CO(n),n.g.cancel(),n.g=null)}function YU(n){tS(n),n.u&&(Bt.clearTimeout(n.u),n.u=null),rS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Bt.clearTimeout(n.m),n.m=null)}function wO(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&nS(n)}function nS(n){VU(n.i)||n.m||(n.m=!0,tO(n.Ha,n),n.C=0)}function QU(n,e){var t;t=e?e.m:n.V++;const r=Nd(n.F);yr(r,"SID",n.J),yr(r,"RID",t),yr(r,"AID",n.U),Pw(n,r),n.o&&n.s&&vO(r,n.o,n.s),t=new Iw(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=XU(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),gO(n.i,t),dO(t,r,e)}function Pw(n,e){n.j&&fO({},function(t,r){yr(e,r,t)})}function XU(n,e,t){t=Math.min(n.l.length,t);var r=n.j?is(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=i[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let y=i[p].h;const E=i[p].g;if(y-=s,0>y)s=Math.max(0,i[p].h-100),h=!1;else try{B5(E,l,"req"+y+"_")}catch{r&&r(E)}}if(h){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function JU(n){n.g||n.u||(n.Y=1,tO(n.Ga,n),n.A=0)}function EO(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ew(is(n.Ga,n),n2(n,n.A)),n.A++,0))}function CO(n){null!=n.B&&(Bt.clearTimeout(n.B),n.B=null)}function e2(n){n.g=new Iw(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Nd(n.oa);yr(e,"RID","rpc"),yr(e,"SID",n.J),yr(e,"CI",n.N?"0":"1"),yr(e,"AID",n.U),Pw(n,e),yr(e,"TYPE","xmlhttp"),n.o&&n.s&&vO(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=QT(Nd(e)),t.s=null,t.U=!0,SU(t,n)}function rS(n){null!=n.v&&(Bt.clearTimeout(n.v),n.v=null)}function t2(n,e){var t=null;if(n.g==e){rS(n),CO(n),n.g=null;var r=2}else{if(!mO(n.i,e))return;t=e.D,UU(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;os(r=$T(),new EU(r,t,e,i)),nS(n)}else JU(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function W5(n,e){return!(BU(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ew(is(n.Ha,n,e),n2(n,n.C)),n.C++,0)))}(n,e)||2==r&&EO(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:zm(n,5);break;case 4:zm(n,10);break;case 3:zm(n,6);break;default:zm(n,2)}}function n2(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function zm(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=is(n.jb,n);t||(t=new Gm("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||KT(t,"https"),QT(t)),function U5(n,e){const t=new jT;if(Bt.Image){const r=new Image;r.onload=NT(XT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=NT(XT,t,r,"TestLoadImage: error",!1,e),r.onabort=NT(XT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=NT(XT,t,r,"TestLoadImage: timeout",!1,e),Bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Xs(2);n.G=0,n.j&&n.j.va(e),r2(n),YU(n)}function r2(n){n.G=0,n.I=-1,n.j&&((0!=HU(n.i).length||0!=n.l.length)&&(n.i.i.length=0,LR(n.l),n.l.length=0),n.j.ua())}function s2(n,e,t){let r=function A5(n){return n instanceof Gm?Nd(n):new Gm(n,void 0)}(t);if(""!=r.i)e&&ZT(r,e+"."+r.i),YT(r,r.m);else{const i=Bt.location;r=function x5(n,e,t,r){var i=new Gm(null,void 0);return n&&KT(i,n),e&&ZT(i,e),t&&YT(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&BR(n.aa,function(i,s){yr(r,s,i)}),t=n.sa,(e=n.D)&&t&&yr(r,e,t),yr(r,"VER",n.ma),Pw(n,r),r}function o2(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xr(t&&n.Ba&&!n.qa?new Mw({ib:!0}):n.qa)).L=n.H,e}function a2(){}function iS(){if(Ty&&!(10<=Number(o5)))throw Error("Environmental error: no available transport.")}function ca(n,e){Fi.call(this),this.g=new ZU(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!FT(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!FT(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new My(this)}function l2(n){aO.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function c2(){lO.call(this),this.status=1}function My(n){this.g=n}(ut=Xr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():cO.g(),this.C=function IU(n){return n.h||(n.h=n.i())}(this.u?this.u:cO),this.g.onreadystatechange=is(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void GU(this,s)}n=t||"";const i=new Ay(this.headers);r&&fO(r,function(s,l){i.set(l,s)}),r=function JK(n){e:{var e=z5;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Bt.FormData&&n instanceof Bt.FormData,!(0<=ZB($5,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,l){this.g.setRequestHeader(l,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{WU(this),0<this.B&&((this.K=function G5(n){return Ty&&function s5(){return function e5(n){var e=r5;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=XB(String(LT)).split("."),t=XB("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",s=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=VR(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||VR(0==i[2].length,0==s[2].length)||VR(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=is(this.pa,this)):this.A=sO(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){GU(this,s)}},ut.pa=function(){typeof PR<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,os(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,os(this,"complete"),os(this,"abort"),eS(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),eS(this,!0)),Xr.Z.M.call(this)},ut.Fa=function(){this.s||(this.F||this.v||this.l?qU(this):this.cb())},ut.cb=function(){qU(this)},ut.ba=function(){try{return 2<Fd(this)?this.g.status:-1}catch{return-1}},ut.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),H5(e)}},ut.Da=function(){return this.m},ut.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=ZU.prototype).ma=8,ut.G=1,ut.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},ut.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Iw(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=tU(s),rU(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=XU(this,i,e),yr(t=Nd(this.F),"RID",n),yr(t,"CVER",22),this.D&&yr(t,"X-HTTP-Session-Id",this.D),Pw(this,t),this.o&&s&&vO(t,this.o,s),gO(this.i,i),this.Ra&&yr(t,"TYPE","init"),this.ja?(yr(t,"$req",e),yr(t,"SID","null"),i.$=!0,dO(i,t,null)):dO(i,t,e),this.G=2}}else 3==this.G&&(n?QU(this,n):0==this.l.length||VU(this.i)||QU(this))},ut.Ga=function(){if(this.u=null,e2(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ew(is(this.bb,this),n)}},ut.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Xs(10),tS(this),e2(this))},ut.ab=function(){null!=this.v&&(this.v=null,tS(this),EO(this),Xs(19))},ut.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Xs(2)):(this.h.info("Failed to ping google.com"),Xs(1))},(ut=a2.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Oa=function(){},iS.prototype.g=function(n,e){return new ca(n,e)},ss(ca,Fi),ca.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),tO(is(n.hb,n,e))),Xs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=s2(n,null,n.W),nS(n)},ca.prototype.close=function(){bO(this.g)},ca.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,wO(this.g,e)}else this.v?((e={}).__data__=eO(n),wO(this.g,e)):wO(this.g,n)},ca.prototype.M=function(){this.g.j=null,delete this.j,bO(this.g),delete this.g,ca.Z.M.call(this)},ss(l2,aO),ss(c2,lO),ss(My,a2),My.prototype.xa=function(){os(this.g,"a")},My.prototype.wa=function(n){os(this.g,new l2(n))},My.prototype.va=function(n){os(this.g,new c2(n))},My.prototype.ua=function(){os(this.g,"b")},iS.prototype.createWebChannel=iS.prototype.g,ca.prototype.send=ca.prototype.u,ca.prototype.open=ca.prototype.m,ca.prototype.close=ca.prototype.close,GT.NO_ERROR=0,GT.TIMEOUT=8,GT.HTTP_ERROR=6,CU.COMPLETE="complete",DU.EventType=Cw,Cw.OPEN="a",Cw.CLOSE="b",Cw.ERROR="c",Cw.MESSAGE="d",Fi.prototype.listen=Fi.prototype.N,Xr.prototype.listenOnce=Xr.prototype.O,Xr.prototype.getLastError=Xr.prototype.La,Xr.prototype.getLastErrorCode=Xr.prototype.Da,Xr.prototype.getStatus=Xr.prototype.ba,Xr.prototype.getResponseJson=Xr.prototype.Qa,Xr.prototype.getResponseText=Xr.prototype.ga,Xr.prototype.send=Xr.prototype.ea;var K5=Pd.createWebChannelTransport=function(){return new iS},Z5=Pd.getStatEventTarget=function(){return $T()},IO=Pd.ErrorCode=GT,Y5=Pd.EventType=CU,Q5=Pd.Event=Hm,u2=Pd.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},X5=Pd.FetchXmlHttpFactory=Mw,sS=Pd.WebChannel=DU,J5=Pd.XhrIo=Xr;const d2="@firebase/firestore";class Li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Li.UNAUTHENTICATED=new Li(null),Li.GOOGLE_CREDENTIALS=new Li("google-credentials-uid"),Li.FIRST_PARTY=new Li("first-party-uid"),Li.MOCK_USER=new Li("mock-user");let ky="9.9.0";const Pf=new Mi.Yd("@firebase/firestore");function DO(){return Pf.logLevel}function Ve(n,...e){if(Pf.logLevel<=Mi.in.DEBUG){const t=e.map(TO);Pf.debug(`Firestore (${ky}): ${n}`,...t)}}function Jr(n,...e){if(Pf.logLevel<=Mi.in.ERROR){const t=e.map(TO);Pf.error(`Firestore (${ky}): ${n}`,...t)}}function Nw(n,...e){if(Pf.logLevel<=Mi.in.WARN){const t=e.map(TO);Pf.warn(`Firestore (${ky}): ${n}`,...t)}}function TO(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${ky}) INTERNAL ASSERTION FAILED: `+n;throw Jr(e),new Error(e)}function Nt(n,e){n||dt()}function rt(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class h2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Li.UNAUTHENTICATED))}shutdown(){}}class rZ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class iZ{constructor(e){this.t=e,this.currentUser=Li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new Vi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Vi,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=l;e.enqueueRetryable((0,we.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Vi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Nt("string"==typeof r.accessToken),new h2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Nt(null===e||"string"==typeof e),new Li(e)}}class sZ{constructor(e,t,r){this.type="FirstParty",this.user=Li.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class oZ{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new sZ(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class f2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aZ{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.p;return this.p=s.token,Ve("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Nt("string"==typeof t.token),this.p=t.token,new f2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function lZ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class p2{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=lZ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function qt(n,e){return n<e?-1:n>e?1:0}function Ry(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function m2(n){return n+"\0"}class vr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vr.fromMillis(Date.now())}static fromDate(e){return vr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new vr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new vr(0,0))}static max(){return new Rt(new vr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Fw{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Fw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),l=t.get(i);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pn extends Fw{construct(e,t,r){return new pn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new pn(t)}static emptyPath(){return new pn([])}}const cZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Br extends Fw{construct(e,t,r){return new Br(e,t,r)}static isValidIdentifier(e){return cZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Br.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Br(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ne(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ne(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ne(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(s(),i++)}if(s(),l)throw new Ne(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Br(t)}static emptyPath(){return new Br([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(pn.fromString(e))}static fromName(e){return new tt(pn.fromString(e).popFirst(5))}static empty(){return new tt(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new pn(e.slice()))}}class oS{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function SO(n){return n.fields.find(e=>2===e.kind)}function qm(n){return n.fields.filter(e=>2!==e.kind)}oS.UNKNOWN_ID=-1;class aS{constructor(e,t){this.fieldPath=e,this.kind=t}}class Lw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Lw(0,ua.min())}}function g2(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Rt.fromTimestamp(1e9===r?new vr(t+1,0):new vr(t,r));return new ua(i,tt.empty(),e)}function _2(n){return new ua(n.readTime,n.key,-1)}class ua{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ua(Rt.min(),tt.empty(),-1)}static max(){return new ua(Rt.max(),tt.empty(),-1)}}function AO(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:qt(n.largestBatchId,e.largestBatchId))}const y2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Nf(n){return xO.apply(this,arguments)}function xO(){return xO=(0,we.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==y2)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),xO.apply(this,arguments)}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,s=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++s,l&&s===i&&t()},p=>r(p))}),l=!0,s===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new he((r,i)=>{const s=e.length,l=new Array(s);let h=0;for(let p=0;p<s;p++){const y=p;t(e[y]).next(E=>{l[y]=E,++h,h===s&&r(l)},E=>i(E))}})}static doWhile(e,t){return new he((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class lS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Vi,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Vw(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=MO(r.target.error);this.T.reject(new Vw(e,i))}}static open(e,t,r,i){try{return new lS(t,e.transaction(i,r))}catch(s){throw new Vw(t,s)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new dZ(t)}}class ic{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===ic.v((0,F.z$)())&&Jr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Wm(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,F.hl)())return!1;if(ic.S())return!0;const e=(0,F.z$)(),t=ic.v(e),r=0<t&&t<10,i=ic.D(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,we.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{r(l.target.result)},s.onblocked=()=>{i(new Vw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Ne(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ne(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Vw(e,h))},s.onupgradeneeded=l=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.P.O(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,we.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.k(e);const p=lS.open(s.db,e,l?"readonly":"readwrite",r),y=i(p).next(E=>(p.R(),E)).catch(E=>(p.abort(E),he.reject(E))).toPromise();return y.catch(()=>{}),yield p.A,y}catch(p){const y=p,E="FirebaseError"!==y.name&&h<3;if(Ve("SimpleDb","Transaction failed with error:",y.message,"Retrying:",E),s.close(),!E)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class uZ{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Wm(this.$.delete())}}class Vw extends Ne{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ff(n){return"IndexedDbTransactionError"===n.name}class dZ{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Wm(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Wm(this.store.add(e))}get(e){return Wm(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Wm(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Wm(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(l,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new he((s,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((i,s)=>{r.onerror=l=>{s(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}W(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(s,l,h)=>h.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new he((r,i)=>{t.onerror=s=>{const l=MO(s.target.error);i(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}G(e,t){const r=[];return new he((i,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const p=new uZ(h),y=t(h.primaryKey,h.value,p);if(y instanceof he){const E=y.catch(D=>(p.done(),he.reject(D)));r.push(E)}p.isDone?i():null===p.U?h.continue():h.continue(p.U)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Wm(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=MO(r.target.error);t(i)}})}let b2=!1;function MO(n){const e=ic.v((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return b2||(b2=!0,setTimeout(()=>{throw r},0)),r}}return n}class hZ{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Ff(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Nf(r)}yield t.Z(1)}))}}class fZ{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,we.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,s=!0;return he.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ve("IndexBackiller",`Processing collection: ${l}`),this.nt(e,l,i).next(h=>{i-=h,r.add(l)});s=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.st(i,s)).next(h=>(Ve("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}st(e,t){let r=e;return t.changes.forEach((i,s)=>{const l=_2(s);AO(l,r)>0&&(r=l)}),new ua(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ao{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function w2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Km(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function E2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ao.ot=-1;class Rr{constructor(e,t){this.comparator=e,this.root=t||as.EMPTY}insert(e,t){return new Rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,as.BLACK,null,null))}remove(e){return new Rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,as.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cS(this.root,e,this.comparator,!1)}getReverseIterator(){return new cS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cS(this.root,e,this.comparator,!0)}}class cS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class as{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??as.RED,this.left=i??as.EMPTY,this.right=s??as.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new as(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return as.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return as.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,as.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,as.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}as.EMPTY=null,as.RED=!0,as.BLACK=!1,as.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new as(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vn{constructor(e){this.comparator=e,this.data=new Rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new C2(this.data.getIterator())}getIteratorFrom(e){return new C2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vn(this.comparator);return t.data=e,t}}class C2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Oy(n){return n.hasNext()?n.getNext():void 0}class da{constructor(e){this.fields=e,e.sort(Br.comparator)}static empty(){return new da([])}unionWith(e){let t=new Vn(Br.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new da(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ry(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class pi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new pi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new pi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pi.EMPTY_BYTE_STRING=new pi("");const mZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lf(n){if(Nt(!!n),"string"==typeof n){let e=0;const t=mZ.exec(n);if(Nt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Or(n.seconds),nanos:Or(n.nanos)}}function Or(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Zm(n){return"string"==typeof n?pi.fromBase64String(n):pi.fromUint8Array(n)}function kO(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function I2(n){const e=n.mapValue.fields.__previous_value__;return kO(e)?I2(e):e}function Bw(n){const e=Lf(n.mapValue.fields.__local_write_time__.timestampValue);return new vr(e.seconds,e.nanos)}class gZ{constructor(e,t,r,i,s,l,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class Ld{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ld("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ld&&e.projectId===this.projectId&&e.database===this.database}}function Uw(n){return null==n}function Hw(n){return 0===n&&1/n==-1/0}function D2(n){return"number"==typeof n&&Number.isInteger(n)&&!Hw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Vf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},uS={nullValue:"NULL_VALUE"};function Ym(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kO(n)?4:x2(n)?9007199254740991:10:dt()}function mu(n,e){if(n===e)return!0;const t=Ym(n);if(t!==Ym(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bw(n).isEqual(Bw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Lf(r.timestampValue),l=Lf(i.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Zm(n.bytesValue).isEqual(Zm(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Or(r.geoPointValue.latitude)===Or(i.geoPointValue.latitude)&&Or(r.geoPointValue.longitude)===Or(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Or(r.integerValue)===Or(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Or(r.doubleValue),l=Or(i.doubleValue);return s===l?Hw(s)===Hw(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return Ry(n.arrayValue.values||[],e.arrayValue.values||[],mu);case 10:return function(r,i){const s=r.mapValue.fields||{},l=i.mapValue.fields||{};if(w2(s)!==w2(l))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===l[h]||!mu(s[h],l[h])))return!1;return!0}(n,e);default:return dt()}var i}function jw(n,e){return void 0!==(n.values||[]).find(t=>mu(t,e))}function Bf(n,e){if(n===e)return 0;const t=Ym(n),r=Ym(e);if(t!==r)return qt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const l=Or(i.integerValue||i.doubleValue),h=Or(s.integerValue||s.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return T2(n.timestampValue,e.timestampValue);case 4:return T2(Bw(n),Bw(e));case 5:return qt(n.stringValue,e.stringValue);case 6:return function(i,s){const l=Zm(i),h=Zm(s);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const l=i.split("/"),h=s.split("/");for(let p=0;p<l.length&&p<h.length;p++){const y=qt(l[p],h[p]);if(0!==y)return y}return qt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const l=qt(Or(i.latitude),Or(s.latitude));return 0!==l?l:qt(Or(i.longitude),Or(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const l=i.values||[],h=s.values||[];for(let p=0;p<l.length&&p<h.length;++p){const y=Bf(l[p],h[p]);if(y)return y}return qt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Vf.mapValue&&s===Vf.mapValue)return 0;if(i===Vf.mapValue)return 1;if(s===Vf.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),p=s.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let E=0;E<h.length&&E<y.length;++E){const D=qt(h[E],y[E]);if(0!==D)return D;const k=Bf(l[h[E]],p[y[E]]);if(0!==k)return k}return qt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw dt()}}function T2(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return qt(n,e);const t=Lf(n),r=Lf(e),i=qt(t.seconds,r.seconds);return 0!==i?i:qt(t.nanos,r.nanos)}function Py(n){return RO(n)}function RO(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Lf(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Zm(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const l of r.values||[])s?s=!1:i+=",",i+=RO(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",l=!0;for(const h of i)l?l=!1:s+=",",s+=`${h}:${RO(r.fields[h])}`;return s+"}"}(n.mapValue):dt();var e}function Qm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function OO(n){return!!n&&"integerValue"in n}function $w(n){return!!n&&"arrayValue"in n}function S2(n){return!!n&&"nullValue"in n}function A2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dS(n){return!!n&&"mapValue"in n}function Gw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Km(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function x2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function _Z(n){return"nullValue"in n?uS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Qm(Ld.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function yZ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Qm(Ld.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Vf:dt()}function M2(n,e){const t=Bf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function k2(n,e){const t=Bf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ls{constructor(e){this.value=e}static empty(){return new ls({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gw(t)}setAll(e){let t=Br.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Gw(l):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());dS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];dS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Km(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ls(Gw(this.value))}}function R2(n){const e=[];return Km(n.fields,(t,r)=>{const i=new Br([t]);if(dS(r)){const s=R2(r.mapValue).fields;if(0===s.length)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)}),new da(e)}class Xn{constructor(e,t,r,i,s,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Xn(e,0,Rt.min(),Rt.min(),ls.empty(),0)}static newFoundDocument(e,t,r){return new Xn(e,1,t,Rt.min(),r,0)}static newNoDocument(e,t){return new Xn(e,2,t,Rt.min(),ls.empty(),0)}static newUnknownDocument(e,t){return new Xn(e,3,t,Rt.min(),ls.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ls.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ls.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vZ{constructor(e,t=null,r=[],i=[],s=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=l,this.endAt=h,this.ut=null}}function O2(n,e=null,t=[],r=[],i=null,s=null,l=null){return new vZ(n,e,t,r,i,s,l)}function Xm(n){const e=rt(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Py(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Uw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Py(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Py(r)).join(",")),e.ut=t}return e.ut}function zw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!AZ(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!mu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!V2(n.startAt,e.startAt)&&V2(n.endAt,e.endAt)}function hS(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function fS(n,e){return n.filters.filter(t=>t instanceof cs&&t.field.isEqual(e))}function P2(n,e,t){let r=uS,i=!0;for(const s of fS(n,e)){let l=uS,h=!0;switch(s.op){case"<":case"<=":l=_Z(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,h=!1;break;case"!=":case"not-in":l=uS}M2({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];M2({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function N2(n,e,t){let r=Vf,i=!0;for(const s of fS(n,e)){let l=Vf,h=!0;switch(s.op){case">=":case">":l=yZ(s.value),h=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,h=!1;break;case"!=":case"not-in":l=Vf}k2({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];k2({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class cs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new wZ(e,t,r):"array-contains"===t?new IZ(e,r):"in"===t?new DZ(e,r):"not-in"===t?new TZ(e,r):"array-contains-any"===t?new SZ(e,r):new cs(e,t,r)}static ct(e,t,r){return"in"===t?new EZ(e,r):new CZ(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Bf(t,this.value)):null!==t&&Ym(this.value)===Ym(t)&&this.at(Bf(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class wZ extends cs{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.at(t)}}class EZ extends cs{constructor(e,t){super(e,"in",t),this.keys=F2(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class CZ extends cs{constructor(e,t){super(e,"not-in",t),this.keys=F2(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function F2(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}class IZ extends cs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $w(t)&&jw(t.arrayValue,this.value)}}class DZ extends cs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jw(this.value.arrayValue,t)}}class TZ extends cs{constructor(e,t){super(e,"not-in",t)}matches(e){if(jw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jw(this.value.arrayValue,t)}}class SZ extends cs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$w(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jw(this.value.arrayValue,r))}}class Uf{constructor(e,t){this.position=e,this.inclusive=t}}class Ny{constructor(e,t="asc"){this.field=e,this.dir=t}}function AZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function L2(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],l=n.position[i];if(r=s.field.isKeyField()?tt.comparator(tt.fromName(l.referenceValue),t.key):Bf(l,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function V2(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mu(n.position[t],e.position[t]))return!1;return!0}class Vd{constructor(e,t=null,r=[],i=[],s=null,l="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=l,this.startAt=h,this.endAt=p,this.lt=null,this.ft=null}}function B2(n,e,t,r,i,s,l,h){return new Vd(n,e,t,r,i,s,l,h)}function Fy(n){return new Vd(n)}function PO(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function NO(n){for(const e of n.filters)if(e.ht())return e.field;return null}function FO(n){return null!==n.collectionGroup}function Ly(n){const e=rt(n);if(null===e.lt){e.lt=[];const t=NO(e),r=PO(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new Ny(t)),e.lt.push(new Ny(Br.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Ny(Br.keyField(),s))}}}return e.lt}function ul(n){const e=rt(n);if(!e.ft)if("F"===e.limitType)e.ft=O2(e.path,e.collectionGroup,Ly(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Ly(e))t.push(new Ny(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Uf(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Uf(e.startAt.position,e.startAt.inclusive):null;e.ft=O2(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function U2(n,e,t){return new Vd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qw(n,e){return zw(ul(n),ul(e))&&n.limitType===e.limitType}function H2(n){return`${Xm(ul(n))}|lt:${n.limitType}`}function LO(n){return`Query(target=${function bZ(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Py(r.value)}`;var r}).join(", ")}]`),Uw(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Py(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Py(t)).join(",")),`Target(${e})`}(ul(n))}; limitType=${n.limitType})`}function VO(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):tt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,l){const h=L2(i,s,l);return i.inclusive?h<=0:h<0}(t.startAt,Ly(t),r)||t.endAt&&!function(i,s,l){const h=L2(i,s,l);return i.inclusive?h>=0:h>0}(t.endAt,Ly(t),r)));var t,r}function j2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $2(n){return(e,t)=>{let r=!1;for(const i of Ly(n)){const s=MZ(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function MZ(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):function(i,s,l){const h=s.data.field(i),p=l.data.field(i);return null!==h&&null!==p?Bf(h,p):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function G2(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hw(e)?"-0":e}}function z2(n){return{integerValue:""+n}}function q2(n,e){return D2(e)?z2(e):G2(n,e)}class pS{constructor(){this._=void 0}}function kZ(n,e,t){return n instanceof Vy?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Jm?K2(n,e):n instanceof eg?Z2(n,e):function(r,i){const s=W2(r,i),l=Y2(s)+Y2(r._t);return OO(s)&&OO(r._t)?z2(l):G2(r.wt,l)}(n,e)}function RZ(n,e,t){return n instanceof Jm?K2(n,e):n instanceof eg?Z2(n,e):t}function W2(n,e){return n instanceof By?OO(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Vy extends pS{}class Jm extends pS{constructor(e){super(),this.elements=e}}function K2(n,e){const t=Q2(e);for(const r of n.elements)t.some(i=>mu(i,r))||t.push(r);return{arrayValue:{values:t}}}class eg extends pS{constructor(e){super(),this.elements=e}}function Z2(n,e){let t=Q2(e);for(const r of n.elements)t=t.filter(i=>!mu(i,r));return{arrayValue:{values:t}}}class By extends pS{constructor(e,t){super(),this.wt=e,this._t=t}}function Y2(n){return Or(n.integerValue||n.doubleValue)}function Q2(n){return $w(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ww{constructor(e,t){this.field=e,this.transform=t}}class PZ{constructor(e,t){this.version=e,this.transformResults=t}}class Ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ir}static exists(e){return new Ir(void 0,e)}static updateTime(e){return new Ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class gS{}function X2(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Hy(n.key,Ir.none()):new Uy(n.key,n.data,Ir.none());{const t=n.data,r=ls.empty();let i=new Vn(Br.comparator);for(let s of e.fields)if(!i.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?r.delete(s):r.set(s,l),i=i.add(s)}return new Bd(n.key,r,new da(i.toArray()),Ir.none())}}function NZ(n,e,t){n instanceof Uy?function(r,i,s){const l=r.value.clone(),h=tH(r.fieldTransforms,i,s.transformResults);l.setAll(h),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Bd?function(r,i,s){if(!mS(r.precondition,i))return void i.convertToUnknownDocument(s.version);const l=tH(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(eH(r)),h.setAll(l),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Kw(n,e,t,r){return n instanceof Uy?function(i,s,l,h){if(!mS(i.precondition,s))return l;const p=i.value.clone(),y=nH(i.fieldTransforms,h,s);return p.setAll(y),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Bd?function(i,s,l,h){if(!mS(i.precondition,s))return l;const p=nH(i.fieldTransforms,h,s),y=s.data;return y.setAll(eH(i)),y.setAll(p),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(l=t,mS(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function FZ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=W2(r.transform,i||null);null!=s&&(null===t&&(t=ls.empty()),t.set(r.field,s))}return t||null}function J2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ry(t,r,(i,s)=>function OZ(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Jm&&r instanceof Jm||t instanceof eg&&r instanceof eg?Ry(t.elements,r.elements,mu):t instanceof By&&r instanceof By?mu(t._t,r._t):t instanceof Vy&&r instanceof Vy);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Uy extends gS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bd extends gS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function eH(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function tH(n,e,t){const r=new Map;Nt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],l=s.transform,h=e.data.field(s.field);r.set(s.field,RZ(l,h,t[i]))}return r}function nH(n,e,t){const r=new Map;for(const i of n){const s=i.transform,l=t.data.field(i.field);r.set(i.field,kZ(s,l,e))}return r}class Hy extends gS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BO extends gS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class LZ{constructor(e){this.count=e}}var ei,mn;function rH(n){switch(n){default:return dt();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function iH(n){if(void 0===n)return Jr("GRPC error has no .code"),_e.UNKNOWN;switch(n){case ei.OK:return _e.OK;case ei.CANCELLED:return _e.CANCELLED;case ei.UNKNOWN:return _e.UNKNOWN;case ei.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case ei.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case ei.INTERNAL:return _e.INTERNAL;case ei.UNAVAILABLE:return _e.UNAVAILABLE;case ei.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case ei.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case ei.NOT_FOUND:return _e.NOT_FOUND;case ei.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case ei.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case ei.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case ei.ABORTED:return _e.ABORTED;case ei.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case ei.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case ei.DATA_LOSS:return _e.DATA_LOSS;default:return dt()}}(mn=ei||(ei={}))[mn.OK=0]="OK",mn[mn.CANCELLED=1]="CANCELLED",mn[mn.UNKNOWN=2]="UNKNOWN",mn[mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mn[mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mn[mn.NOT_FOUND=5]="NOT_FOUND",mn[mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",mn[mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",mn[mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",mn[mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mn[mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mn[mn.ABORTED=10]="ABORTED",mn[mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",mn[mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",mn[mn.INTERNAL=13]="INTERNAL",mn[mn.UNAVAILABLE=14]="UNAVAILABLE",mn[mn.DATA_LOSS=15]="DATA_LOSS";class Hf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Km(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return E2(this.inner)}size(){return this.innerSize}}const VZ=new Rr(tt.comparator);function xo(){return VZ}const sH=new Rr(tt.comparator);function Zw(...n){let e=sH;for(const t of n)e=e.insert(t.key,t);return e}function oH(n){let e=sH;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function gu(){return Yw()}function aH(){return Yw()}function Yw(){return new Hf(n=>n.toString(),(n,e)=>n.isEqual(e))}const BZ=new Rr(tt.comparator),UZ=new Vn(tt.comparator);function Yt(...n){let e=UZ;for(const t of n)e=e.add(t);return e}const HZ=new Vn(qt);function _S(){return HZ}class Qw{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Xw.createSynthesizedTargetChangeForCurrentChange(e,t)),new Qw(Rt.min(),r,_S(),xo(),Yt())}}class Xw{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Xw(pi.EMPTY_BYTE_STRING,t,Yt(),Yt(),Yt())}}class yS{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class lH{constructor(e,t){this.targetId=e,this.It=t}}class cH{constructor(e,t,r=pi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class uH{constructor(){this.Tt=0,this.Et=hH(),this.At=pi.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Yt(),t=Yt(),r=Yt();return this.Et.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new Xw(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=hH()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class jZ{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=xo(),this.Bt=dH(),this.Lt=new Vn(qt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const s=i.target;if(hS(s))if(0===r){const l=new tt(s.path);this.Kt(t,l,Xn.newNoDocument(l,Rt.min()))}else Nt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((s,l)=>{const h=this.Ht(l);if(h){if(s.current&&hS(h.target)){const p=new tt(h.target.path);null!==this.$t.get(p)||this.Xt(l,p)||this.Kt(l,p,Xn.newNoDocument(p,e))}s.vt&&(t.set(l,s.St()),s.Dt())}});let r=Yt();this.Bt.forEach((s,l)=>{let h=!0;l.forEachWhile(p=>{const y=this.Ht(p);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.$t.forEach((s,l)=>l.setReadTime(e));const i=new Qw(e,t,this.Lt,this.$t,r);return this.$t=xo(),this.Bt=dH(),this.Lt=new Vn(qt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new uH,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Vn(qt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new uH),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function dH(){return new Rr(tt.comparator)}function hH(){return new Rr(tt.comparator)}const $Z={asc:"ASCENDING",desc:"DESCENDING"},GZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class zZ{constructor(e,t){this.databaseId=e,this.dt=t}}function Jw(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fH(n,e){return n.dt?e.toBase64():e.toUint8Array()}function qZ(n,e){return Jw(n,e.toTimestamp())}function Bi(n){return Nt(!!n),Rt.fromTimestamp(function(e){const t=Lf(e);return new vr(t.seconds,t.nanos)}(n))}function UO(n,e){return(t=n,new pn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function pH(n){const e=pn.fromString(n);return Nt(CH(e)),e}function eE(n,e){return UO(n.databaseId,e.path)}function _u(n,e){const t=pH(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(gH(t))}function HO(n,e){return UO(n.databaseId,e)}function mH(n){const e=pH(n);return 4===e.length?pn.emptyPath():gH(e)}function tE(n){return new pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gH(n){return Nt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function _H(n,e,t){return{name:eE(n,e),fields:t.value.mapValue.fields}}function yH(n,e,t){const r=_u(n,e.name),i=Bi(e.updateTime),s=new ls({mapValue:{fields:e.fields}}),l=Xn.newFoundDocument(r,i,s);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function nE(n,e){let t;if(e instanceof Uy)t={update:_H(n,e.key,e.value)};else if(e instanceof Hy)t={delete:eE(n,e.key)};else if(e instanceof Bd)t={update:_H(n,e.key,e.data),updateMask:tY(e.fieldMask)};else{if(!(e instanceof BO))return dt();t={verify:eE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const l=s.transform;if(l instanceof Vy)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Jm)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof eg)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof By)return{fieldPath:s.field.canonicalString(),increment:l._t};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:qZ(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function jO(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Ir.updateTime(Bi(i.updateTime)):void 0!==i.exists?Ir.exists(i.exists):Ir.none():Ir.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,l){let h=null;"setToServerValue"in l?(Nt("REQUEST_TIME"===l.setToServerValue),h=new Vy):"appendMissingElements"in l?h=new Jm(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new eg(l.removeAllFromArray.values||[]):"increment"in l?h=new By(s,l.increment):dt();const p=Br.fromServerFormat(l.fieldPath);return new Ww(p,h)}(n,i)):[];var i;if(e.update){const i=_u(n,e.update.name),s=new ls({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new da((e.updateMask.fieldPaths||[]).map(y=>Br.fromServerFormat(y)));return new Bd(i,s,l,t,r)}return new Uy(i,s,t,r)}if(e.delete){const i=_u(n,e.delete);return new Hy(i,t)}if(e.verify){const i=_u(n,e.verify);return new BO(i,t)}return dt()}function vH(n,e){return{documents:[HO(n,e.path)]}}function bH(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=HO(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=HO(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(E=>function(D){if("=="===D.op){if(A2(D.value))return{unaryFilter:{field:jy(D.field),op:"IS_NAN"}};if(S2(D.value))return{unaryFilter:{field:jy(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(A2(D.value))return{unaryFilter:{field:jy(D.field),op:"IS_NOT_NAN"}};if(S2(D.value))return{unaryFilter:{field:jy(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jy(D.field),op:XZ(D.op),value:D.value}}}(E));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:jy((E=y).field),direction:QZ(E.dir)};var E})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=(y=e.limit,n.dt||Uw(y)?y:{value:y});var y,h,p;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function wH(n){let e=mH(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Nt(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let s=[];t.where&&(s=EH(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(E=>{return new Ny($y((D=E).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;t.limit&&(h=function(E){let D;return D="object"==typeof E?E.value:E,Uw(D)?null:D}(t.limit));let p=null;var E;t.startAt&&(p=new Uf((E=t.startAt).values||[],!!E.before));let y=null;return t.endAt&&(y=function(E){return new Uf(E.values||[],!E.before)}(t.endAt)),B2(e,i,l,s,h,"F",p,y)}function EH(n){return n?void 0!==n.unaryFilter?[eY(n)]:void 0!==n.fieldFilter?[JZ(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>EH(e)).reduce((e,t)=>e.concat(t)):dt():[]}function QZ(n){return $Z[n]}function XZ(n){return GZ[n]}function jy(n){return{fieldPath:n.canonicalString()}}function $y(n){return Br.fromServerFormat(n.fieldPath)}function JZ(n){return cs.create($y(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function eY(n){switch(n.unaryFilter.op){case"IS_NAN":const e=$y(n.unaryFilter.field);return cs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=$y(n.unaryFilter.field);return cs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=$y(n.unaryFilter.field);return cs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=$y(n.unaryFilter.field);return cs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function tY(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function CH(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Js(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=IH(e)),e=nY(n.get(t),e);return IH(e)}function nY(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function IH(n){return n+"\x01\x01"}function yu(n){const e=n.length;if(Nt(e>=2),2===e)return Nt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),pn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&dt(),n.charAt(l+1)){case"\x01":const h=n.substring(s,l);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,l),i+="\0";break;case"\x11":i+=n.substring(s,l+1);break;default:dt()}s=l+2}return new pn(r)}const DH=["userId","batchId"];function vS(n,e){return[n,Js(e)]}function TH(n,e,t){return[n,Js(e),t]}const rY={},iY=["prefixPath","collectionGroup","readTime","documentId"],sY=["prefixPath","collectionGroup","documentId"],oY=["collectionGroup","readTime","prefixPath","documentId"],aY=["canonicalId","targetId"],lY=["targetId","path"],cY=["path","targetId"],uY=["collectionId","parent"],dY=["indexId","uid"],hY=["uid","sequenceNumber"],fY=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pY=["indexId","uid","orderedDocumentKey"],mY=["userId","collectionPath","documentId"],gY=["userId","collectionPath","largestBatchId"],_Y=["userId","collectionGroup","largestBatchId"],SH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yY=[...SH,"documentOverlays"],AH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xH=AH,vY=[...xH,"indexConfiguration","indexState","indexEntries"];class $O extends v2{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Ui(n,e){const t=rt(n);return ic.N(t.ee,e)}class GO{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&NZ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Kw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Kw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=aH();return this.mutations.forEach(i=>{const s=e.get(i.key),l=s.overlayedDocument;let h=this.applyToLocalView(l,s.mutatedFields);h=t.has(i.key)?null:h;const p=X2(l,h);null!==p&&r.set(i.key,p),l.isValidDocument()||l.convertToNoDocument(Rt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&Ry(this.mutations,e.mutations,(t,r)=>J2(t,r))&&Ry(this.baseMutations,e.baseMutations,(t,r)=>J2(t,r))}}class zO{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Nt(e.mutations.length===r.length);let i=BZ;const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,r[l].version);return new zO(e,t,r,i)}}class qO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class jf{constructor(e,t,r,i,s=Rt.min(),l=Rt.min(),h=pi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new jf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new jf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new jf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class MH{constructor(e){this.ne=e}}function kH(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:bS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:eE(i=n.ne,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Jw(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:tg(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:tg(e.version)}}var i,s;return r}function bS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function tg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ng(n){const e=new vr(n.seconds,n.nanoseconds);return Rt.fromTimestamp(e)}function rg(n,e){const t=(e.baseMutations||[]).map(s=>jO(n.ne,s));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(l.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>jO(n.ne,s)),i=vr.fromMillis(e.localWriteTimeMs);return new GO(e.batchId,i,t,r)}function rE(n){const e=ng(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ng(n.lastLimboFreeSnapshotVersion):Rt.min();let r;var i;return void 0!==n.query.documents?(Nt(1===(i=n.query).documents.length),r=ul(Fy(mH(i.documents[0])))):r=ul(wH(n.query)),new jf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,pi.fromBase64String(n.resumeToken))}function RH(n,e){const t=tg(e.snapshotVersion),r=tg(e.lastLimboFreeSnapshotVersion);let i;i=hS(e.target)?vH(n.ne,e.target):bH(n.ne,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xm(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function WO(n){const e=wH({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?U2(e,e.limit,"L"):e}function KO(n,e){return new qO(e.largestBatchId,jO(n.ne,e.overlayMutation))}function OH(n,e){const t=e.path.lastSegment();return[n,Js(e.path.popLast()),t]}function PH(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:tg(r.readTime),documentKey:Js(r.documentKey.path),largestBatchId:r.largestBatchId}}class wY{getBundleMetadata(e,t){return NH(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ng(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return NH(e).put({bundleId:(r=t).id,createTime:tg(Bi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return FH(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:WO(i.bundledQuery),readTime:ng(i.readTime)};var i})}saveNamedQuery(e,t){return FH(e).put({name:(r=t).name,readTime:tg(Bi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function NH(n){return Ui(n,"bundles")}function FH(n){return Ui(n,"namedQueries")}class wS{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new wS(e,t.uid||"")}getOverlay(e,t){return iE(e).get(OH(this.userId,t)).next(r=>r?KO(this.wt,r):null)}getOverlays(e,t){const r=gu();return he.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,l)=>{const h=new qO(t,l);i.push(this.ie(e,h))}),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Js(l.getCollectionPath())));const s=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);s.push(iE(e).W("collectionPathOverlayIndex",h))}),he.waitFor(s)}getOverlaysForCollection(e,t,r){const i=gu(),s=Js(t),l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return iE(e).K("collectionPathOverlayIndex",l).next(h=>{for(const p of h){const y=KO(this.wt,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=gu();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return iE(e).J({index:"collectionGroupOverlayIndex",range:h},(p,y,E)=>{const D=KO(this.wt,y);s.size()<i||D.largestBatchId===l?(s.set(D.getKey(),D),l=D.largestBatchId):E.done()}).next(()=>s)}ie(e,t){return iE(e).put(function(r,i,s){const[l,h,p]=OH(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:nE(r.ne,s.mutation)}}(this.wt,this.userId,t))}}function iE(n){return Ui(n,"documentOverlays")}class ig{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Or(e.integerValue));else if("doubleValue"in e){const r=Or(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),Hw(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Zm(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?x2(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):dt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),tt.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function EY(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function LH(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=EY(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}ig.ye=new ig;class CY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=LH(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=LH(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class IY{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class DY{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class sE{constructor(){this.Me=new CY,this.Fe=new IY(this.Me),this.$e=new DY(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class sg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new sg(this.indexId,this.documentKey,this.arrayValue,r)}}function og(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=VH(n.arrayValue,e.arrayValue),0!==t?t:(t=VH(n.directionalValue,e.directionalValue),0!==t?t:tt.comparator(n.documentKey,e.documentKey)))}function VH(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class TY{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=SO(e);if(void 0!==t&&!this.Qe(t))return!1;const r=qm(e);let i=0,s=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const l=r[i];if(!this.je(this.Ke,l)||!this.We(this.Ue[s++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(s>=this.Ue.length||!this.We(this.Ue[s++],l))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class SY{constructor(){this.ze=new ZO}addToCollectionParentIndex(e,t){return this.ze.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(ua.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(ua.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class ZO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Vn(pn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vn(pn.comparator)).toArray()}}const ES=new Uint8Array(0);class AY{constructor(e,t){this.user=e,this.databaseId=t,this.He=new ZO,this.Je=new Hf(r=>Xm(r),(r,i)=>zw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const s={collectionId:r,parent:Js(i)};return BH(e).put(s)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[m2(t),""],!1,!0);return BH(e).K(i).next(s=>{for(const l of s){if(l.collectionId!==t)break;r.push(yu(l.parent))}return r})}addFieldIndex(e,t){const r=CS(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const s=r.add(i);if(t.indexState){const l=aE(e);return s.next(h=>{l.put(PH(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=CS(e),i=aE(e),s=oE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=oE(e);let i=!0;const s=new Map;return he.forEach(this.Ye(t),l=>this.Xe(e,l).next(h=>{i&&(i=!!h),s.set(l,h)})).next(()=>{if(i){let l=Yt();const h=[];return he.forEach(s,(p,y)=>{var E;Ve("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(nt=>`${nt.fieldPath}:${nt.kind}`).join(",")}`} to execute ${Xm(t)}`);const D=function(nt,Qe){const St=SO(Qe);if(void 0===St)return null;for(const Ot of fS(nt,St.fieldPath))switch(Ot.op){case"array-contains-any":return Ot.value.arrayValue.values||[];case"array-contains":return[Ot.value]}return null}(y,p),k=function(nt,Qe){const St=new Map;for(const Ot of qm(Qe))for(const an of fS(nt,Ot.fieldPath))switch(an.op){case"==":case"in":St.set(Ot.fieldPath.canonicalString(),an.value);break;case"not-in":case"!=":return St.set(Ot.fieldPath.canonicalString(),an.value),Array.from(St.values())}return null}(y,p),N=function(nt,Qe){const St=[];let Ot=!0;for(const an of qm(Qe)){const Ur=0===an.kind?P2(nt,an.fieldPath,nt.startAt):N2(nt,an.fieldPath,nt.startAt);St.push(Ur.value),Ot&&(Ot=Ur.inclusive)}return new Uf(St,Ot)}(y,p),B=function(nt,Qe){const St=[];let Ot=!0;for(const an of qm(Qe)){const Ur=0===an.kind?N2(nt,an.fieldPath,nt.endAt):P2(nt,an.fieldPath,nt.endAt);St.push(Ur.value),Ot&&(Ot=Ur.inclusive)}return new Uf(St,Ot)}(y,p),J=this.Ze(p,y,N),ce=this.Ze(p,y,B),Be=this.tn(p,y,k),Ke=this.en(p.indexId,D,J,N.inclusive,ce,B.inclusive,Be);return he.forEach(Ke,nt=>r.j(nt,t.limit).next(Qe=>{Qe.forEach(St=>{const Ot=tt.fromSegments(St.documentKey);l.has(Ot)||(l=l.add(Ot),h.push(Ot))})}))}).next(()=>h)}return he.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,s,l,h){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),y=p/(null!=t?t.length:1),E=[];for(let D=0;D<p;++D){const k=t?this.nn(t[D/y]):ES,N=this.sn(e,k,r[D%y],i),B=this.rn(e,k,s[D%y],l),J=h.map(ce=>this.sn(e,k,ce,!0));E.push(...this.createRange(N,B,J))}return E}sn(e,t,r,i){const s=new sg(e,tt.empty(),t,r);return i?s:s.Le()}rn(e,t,r,i){const s=new sg(e,tt.empty(),t,r);return i?s.Le():s}Xe(e,t){const r=new TY(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let l=null;for(const h of s)r.Ge(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return he.forEach(this.Ye(t),i=>this.Xe(e,i).next(s=>{s?0!==r&&s.fields.length<function(l){let h=new Vn(Br.comparator),p=!1;for(const y of l.filters){const E=y;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?p=!0:h=h.add(E.field))}for(const y of l.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new sE;for(const i of qm(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const l=r.Be(i.kind);ig.ye.re(s,l)}return r.Oe()}nn(e){const t=new sE;return ig.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new sE;return ig.ye.re(Qm(this.databaseId,t),r.Be(function(i){const s=qm(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new sE);let s=0;for(const l of qm(e)){const h=r[s++];for(const p of i)if(this.cn(t,l.fieldPath)&&$w(h))i=this.an(i,l,h);else{const y=p.Be(l.kind);ig.ye.re(h,y)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const i=[...e],s=[];for(const l of r.arrayValue.values||[])for(const h of i){const p=new sE;p.seed(h.Oe()),ig.ye.re(l,p.Be(t.kind)),s.push(p)}return s}cn(e,t){return!!e.filters.find(r=>r instanceof cs&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=CS(e),i=aE(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(s=>{const l=[];return he.forEach(s,h=>i.get([h.indexId,this.uid]).next(p=>{l.push(function(y,E){const D=E?new Lw(E.sequenceNumber,new ua(ng(E.readTime),new tt(yu(E.documentKey)),E.largestBatchId)):Lw.empty(),k=y.fields.map(([N,B])=>new aS(Br.fromServerFormat(N),B));return new oS(y.indexId,y.collectionGroup,k,D)}(h,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:qt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=CS(e),s=aE(e);return this.ln(e).next(l=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>he.forEach(h,p=>s.put(PH(p.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(i,s)=>{const l=r.get(i.collectionGroup);return(l?he.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),he.forEach(h,p=>this.fn(e,i,p).next(y=>{const E=this.dn(s,p);return y.isEqual(E)?he.resolve():this._n(e,s,p,y,E)}))))})}wn(e,t,r,i){return oE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return oE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=oE(e);let s=new Vn(og);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(l,h)=>{s=s.add(new sg(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}dn(e,t){let r=new Vn(og);const i=this.on(t,e);if(null==i)return r;const s=SO(t);if(null!=s){const l=e.data.field(s.fieldPath);if($w(l))for(const h of l.arrayValue.values||[])r=r.add(new sg(t.indexId,e.key,this.nn(h),i))}else r=r.add(new sg(t.indexId,e.key,ES,i));return r}_n(e,t,r,i,s){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,p,y,E,D){const k=h.getIterator(),N=p.getIterator();let B=Oy(k),J=Oy(N);for(;B||J;){let ce=!1,Be=!1;if(B&&J){const Ke=y(B,J);Ke<0?Be=!0:Ke>0&&(ce=!0)}else null!=B?Be=!0:ce=!0;ce?(E(J),J=Oy(N)):Be?(D(B),B=Oy(k)):(B=Oy(k),J=Oy(N))}}(i,s,og,h=>{l.push(this.wn(e,t,r,h))},h=>{l.push(this.mn(e,t,r,h))}),he.waitFor(l)}ln(e){let t=1;return aE(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>og(l,h)).filter((l,h,p)=>!h||0!==og(l,p[h-1]));const i=[];i.push(e);for(const l of r){const h=og(l,e),p=og(l,t);if(0===h)i[0]=e.Le();else if(h>0&&p<0)i.push(l),i.push(l.Le());else if(p>0)break}i.push(t);const s=[];for(let l=0;l<i.length;l+=2)s.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,ES,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,ES,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(UH)}getMinOffset(e,t){return he.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||dt())).next(UH)}}function BH(n){return Ui(n,"collectionParents")}function oE(n){return Ui(n,"indexEntries")}function CS(n){return Ui(n,"indexConfiguration")}function aE(n){return Ui(n,"indexState")}function UH(n){Nt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;AO(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ua(e.readTime,e.documentKey,t)}const HH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Mo(e,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function jH(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let h=0;const p=r.J({range:l},(E,D,k)=>(h++,k.delete()));s.push(p.next(()=>{Nt(1===h)}));const y=[];for(const E of t.mutations){const D=TH(e,E.key.path,t.batchId);s.push(i.delete(D)),y.push(E.key)}return he.waitFor(s).next(()=>y)}function IS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}Mo.DEFAULT_COLLECTION_PERCENTILE=10,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mo.DEFAULT=new Mo(41943040,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mo.DISABLED=new Mo(-1,0,0);class DS{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){Nt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new DS(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $f(e).J({index:"userMutationsIndex",range:r},(i,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Gy(e),l=$f(e);return l.add({}).next(h=>{Nt("number"==typeof h);const p=new GO(h,t,r,i),y=function(k,N,B){const J=B.baseMutations.map(Be=>nE(k.ne,Be)),ce=B.mutations.map(Be=>nE(k.ne,Be));return{userId:N,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:J,mutations:ce}}(this.wt,this.userId,p),E=[];let D=new Vn((k,N)=>qt(k.canonicalString(),N.canonicalString()));for(const k of i){const N=TH(this.userId,k.key.path,h);D=D.add(k.key.path.popLast()),E.push(l.put(y)),E.push(s.put(N,rY))}return D.forEach(k=>{E.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.gn[h]=p.keys()}),he.waitFor(E).next(()=>p)})}lookupMutationBatch(e,t){return $f(e).get(t).next(r=>r?(Nt(r.userId===this.userId),rg(this.wt,r)):null)}yn(e,t){return this.gn[t]?he.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return $f(e).J({index:"userMutationsIndex",range:i},(l,h,p)=>{h.userId===this.userId&&(Nt(h.batchId>=r),s=rg(this.wt,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $f(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,l)=>{r=s.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $f(e).K("userMutationsIndex",t).next(r=>r.map(i=>rg(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=vS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Gy(e).J({range:i},(l,h,p)=>{const[y,E,D]=l,k=yu(E);if(y===this.userId&&t.path.isEqual(k))return $f(e).get(D).next(N=>{if(!N)throw dt();Nt(N.userId===this.userId),s.push(rg(this.wt,N))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn(qt);const i=[];return t.forEach(s=>{const l=vS(this.userId,s.path),h=IDBKeyRange.lowerBound(l),p=Gy(e).J({range:h},(y,E,D)=>{const[k,N,B]=y,J=yu(N);k===this.userId&&s.path.isEqual(J)?r=r.add(B):D.done()});i.push(p)}),he.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=vS(this.userId,r),l=IDBKeyRange.lowerBound(s);let h=new Vn(qt);return Gy(e).J({range:l},(p,y,E)=>{const[D,k,N]=p,B=yu(k);D===this.userId&&r.isPrefixOf(B)?B.length===i&&(h=h.add(N)):E.done()}).next(()=>this.pn(e,h))}pn(e,t){const r=[],i=[];return t.forEach(s=>{i.push($f(e).get(s).next(l=>{if(null===l)throw dt();Nt(l.userId===this.userId),r.push(rg(this.wt,l))}))}),he.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return jH(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),he.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Gy(e).J({range:r},(s,l,h)=>{if(s[0]===this.userId){const p=yu(s[1]);i.push(p)}else h.done()}).next(()=>{Nt(0===i.length)})})}containsKey(e,t){return $H(e,this.userId,t)}Tn(e){return GH(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $H(n,e,t){const r=vS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let l=!1;return Gy(n).J({range:s,H:!0},(h,p,y)=>{const[E,D,k]=h;E===e&&D===i&&(l=!0),y.done()}).next(()=>l)}function $f(n){return Ui(n,"mutations")}function Gy(n){return Ui(n,"documentMutations")}function GH(n){return Ui(n,"mutationQueues")}class ag{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new ag(0)}static Rn(){return new ag(-1)}}class xY{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new ag(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Rt.fromTimestamp(new vr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>zy(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Nt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return zy(e).J((l,h)=>{const p=rE(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>he.waitFor(s)).next(()=>i)}forEachTarget(e,t){return zy(e).J((r,i)=>{const s=rE(i);t(s)})}bn(e){return zH(e).get("targetGlobalKey").next(t=>(Nt(null!==t),t))}Pn(e,t){return zH(e).put("targetGlobalKey",t)}vn(e,t){return zy(e).put(RH(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Xm(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return zy(e).J({range:i,index:"queryTargetsIndex"},(l,h,p)=>{const y=rE(h);zw(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Gf(e);return t.forEach(l=>{const h=Js(l.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=Gf(e);return he.forEach(t,s=>{const l=Js(s.path);return he.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Gf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Gf(e);let s=Yt();return i.J({range:r,H:!0},(l,h,p)=>{const y=yu(l[1]),E=new tt(y);s=s.add(E)}).next(()=>s)}containsKey(e,t){const r=Js(t.path),i=IDBKeyRange.bound([r],[m2(r)],!1,!0);let s=0;return Gf(e).J({index:"documentTargetsIndex",H:!0,range:i},([l,h],p,y)=>{0!==l&&(s++,y.done())}).next(()=>s>0)}te(e,t){return zy(e).get(t).next(r=>r?rE(r):null)}}function zy(n){return Ui(n,"targets")}function zH(n){return Ui(n,"targetGlobal")}function Gf(n){return Ui(n,"targetDocuments")}function qH([n,e],[t,r]){const i=qt(n,t);return 0===i?qt(e,r):i}class MY{constructor(e){this.Sn=e,this.buffer=new Vn(qH),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qH(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kY{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ff(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Nf(r)}yield t.kn(3e5)}))}}class RY{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(Ao.ot);const r=new MY(t);return this.On.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.On.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(HH)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HH):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,i,s,l,h,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,l=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,h=Date.now(),this.removeTargets(e,r,t))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(y=Date.now(),DO()<=Mi.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-E}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${D} documents in `+(y-p)+`ms\nTotal Duration: ${y-E}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:D})))}}class OY{constructor(e,t){this.db=e,this.garbageCollector=new RY(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return TS(e,r)}removeReference(e,t,r){return TS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return TS(e,t)}Un(e,t){return function(r,i){let s=!1;return GH(r).Y(l=>$H(r,l,i).next(h=>(h&&(s=!0),he.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Ln(e,(l,h)=>{if(h<=t){const p=this.Un(e,l).next(y=>{if(!y)return s++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Rt.min()),Gf(e).delete([0,Js(l.path)])))});i.push(p)}}).next(()=>he.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return TS(e,t)}Ln(e,t){const r=Gf(e);let i,s=Ao.ot;return r.J({index:"documentTargetsIndex"},([l,h],{path:p,sequenceNumber:y})=>{0===l?(s!==Ao.ot&&t(new tt(yu(i)),s),s=y,i=p):s=Ao.ot}).next(()=>{s!==Ao.ot&&t(new tt(yu(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function TS(n,e){return Gf(n).put((r=n.currentSequenceNumber,{targetId:0,path:Js(e.path),sequenceNumber:r}));var r}class WH{constructor(){this.changes=new Hf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class PY{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return lg(e).put(r)}removeEntry(e,t,r){return lg(e).delete(function(i,s){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],bS(s),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Xn.newInvalidDocument(t);return lg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lE(t))},(i,s)=>{r=this.Kn(t,s)}).next(()=>r)}Gn(e,t){let r={size:0,document:Xn.newInvalidDocument(t)};return lg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lE(t))},(i,s)=>{r={document:this.Kn(t,s),size:IS(s)}}).next(()=>r)}getEntries(e,t){let r=xo();return this.Qn(e,t,(i,s)=>{const l=this.Kn(i,s);r=r.insert(i,l)}).next(()=>r)}jn(e,t){let r=xo(),i=new Rr(tt.comparator);return this.Qn(e,t,(s,l)=>{const h=this.Kn(s,l);r=r.insert(s,h),i=i.insert(s,IS(l))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return he.resolve();let i=new Vn(QH);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(lE(i.first()),lE(i.last())),l=i.getIterator();let h=l.getNext();return lg(e).J({index:"documentKeyIndex",range:s},(p,y,E)=>{const D=tt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&QH(h,D)<0;)r(h,null),h=l.getNext();h&&h.isEqual(D)&&(r(h,y),h=l.hasNext()?l.getNext():null),h?E.q(lE(h)):E.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),bS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lg(e).K(IDBKeyRange.bound(i,s,!0)).next(l=>{let h=xo();for(const p of l){const y=this.Kn(tt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,r,i){let s=xo();const l=YH(t,r),h=YH(t,ua.max());return lg(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(p,y,E)=>{const D=this.Kn(tt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(D.key,D),s.size===i&&E.done()}).next(()=>s)}newChangeBuffer(e){return new NY(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ZH(e).get("remoteDocumentGlobalKey").next(t=>(Nt(!!t),t))}qn(e,t){return ZH(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function bY(n,e){let t;if(e.document)t=yH(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=ng(e.noDocument.readTime);t=Xn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=tt.fromSegments(e.unknownDocument.path),i=ng(e.unknownDocument.version);t=Xn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new vr(r[0],r[1]);return Rt.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Rt.min()))return r}return Xn.newInvalidDocument(e)}}function KH(n){return new PY(n)}class NY extends WH{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Hf(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Vn((s,l)=>qt(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const h=this.Hn.get(s);if(t.push(this.zn.removeEntry(e,s,h.readTime)),l.isValidDocument()){const p=kH(this.zn.wt,l);i=i.add(s.path.popLast()),r+=IS(p)-h.size,t.push(this.zn.addEntry(e,s,p))}else if(r-=h.size,this.trackRemovals){const p=kH(this.zn.wt,l.convertToNoDocument(Rt.min()));t.push(this.zn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.zn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((s,l)=>{this.Hn.set(s,{size:l,readTime:r.get(s).readTime})}),r))}}function ZH(n){return Ui(n,"remoteDocumentGlobal")}function lg(n){return Ui(n,"remoteDocumentsV14")}function lE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function YH(n,e){const t=e.documentKey.path.toArray();return[n,bS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function QH(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=qt(t[s],r[s]),i)return i;return i=qt(t.length,r.length),i||(i=qt(t[t.length-2],r[r.length-2]),i||qt(t[t.length-1],r[r.length-1]))}class FY{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class XH{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Kw(r.mutation,i,da.empty(),vr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=gu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let l=Zw();return s.forEach((h,p)=>{l=l.insert(h,p.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=gu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let s=xo();const l=Yw(),h=Yw();return t.forEach((p,y)=>{const E=r.get(y.key);i.has(y.key)&&(void 0===E||E.mutation instanceof Bd)?s=s.insert(y.key,y):void 0!==E&&(l.set(y.key,E.mutation.getFieldMask()),Kw(E.mutation,y,E.mutation.getFieldMask(),vr.now()))}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((y,E)=>l.set(y,E)),t.forEach((y,E)=>{var D;return h.set(y,new FY(E,null!==(D=l.get(y))&&void 0!==D?D:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Yw();let i=new Rr((l,h)=>l-h),s=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let E=r.get(p)||da.empty();E=h.applyToLocalView(y,E),r.set(p,E);const D=(i.get(h.batchId)||Yt()).add(p);i=i.insert(h.batchId,D)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,E=p.value,D=aH();E.forEach(k=>{if(!s.has(k)){const N=X2(t.get(k),r.get(k));null!==N&&D.set(k,N),s=s.add(k)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,D))}return he.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return tt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):FO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const l=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):he.resolve(gu());let h=-1,p=s;return l.next(y=>he.forEach(y,(E,D)=>(h<D.largestBatchId&&(h=D.largestBatchId),s.get(E)?he.resolve():this.getBaseDocument(e,E,D).next(k=>{p=p.insert(E,k)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,p,y,Yt())).next(E=>({batchId:h,changes:oH(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next(r=>{let i=Zw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Zw();return this.indexManager.getCollectionParents(e,i).next(l=>he.forEach(l,h=>{const p=(y=t,E=h.child(i),new Vd(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(y=>{y.forEach((E,D)=>{s=s.insert(E,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((h,p)=>{const y=p.getKey();null===i.get(y)&&(i=i.insert(y,Xn.newInvalidDocument(y)))});let l=Zw();return i.forEach((h,p)=>{const y=s.get(h);void 0!==y&&Kw(y.mutation,p,da.empty(),vr.now()),VO(t,p)&&(l=l.insert(h,p))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):he.resolve(Xn.newInvalidDocument(t))}}class LY{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return he.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Bi(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:WO(r.bundledQuery),readTime:Bi(r.readTime)}),he.resolve();var r}}class VY{constructor(){this.overlays=new Rr(tt.comparator),this.Xn=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=gu();return he.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ie(e,t,s)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=gu(),s=t.length+1,l=new tt(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Rr((y,E)=>y-E);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let E=s.get(y.largestBatchId);null===E&&(E=gu(),s=s.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const h=gu(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>h.set(y,E)),!(h.size()>=i)););return he.resolve(h)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new qO(t,r));let s=this.Xn.get(t);void 0===s&&(s=Yt(),this.Xn.set(t,s)),this.Xn.set(t,s.add(r.key))}}class YO{constructor(){this.Zn=new Vn(Hi.ts),this.es=new Vn(Hi.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Hi(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Hi(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new tt(new pn([])),r=new Hi(t,e),i=new Hi(t,e+1),s=[];return this.es.forEachInRange([r,i],l=>{this.rs(l),s.push(l.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new tt(new pn([])),r=new Hi(t,e),i=new Hi(t,e+1);let s=Yt();return this.es.forEachInRange([r,i],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new Hi(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Hi{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return tt.comparator(e.key,t.key)||qt(e.ls,t.ls)}static ns(e,t){return qt(e.ls,t.ls)||tt.comparator(e.key,t.key)}}class BY{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Vn(Hi.ts)}checkEmpty(e){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.fs;this.fs++;const l=new GO(s,t,r,i);this.mutationQueue.push(l);for(const h of i)this.ds=this.ds.add(new Hi(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return he.resolve(l)}lookupMutationBatch(e,t){return he.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),s=i<0?0:i;return he.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Hi(t,0),i=new Hi(t,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([r,i],l=>{const h=this._s(l.ls);s.push(h)}),he.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn(qt);return t.forEach(i=>{const s=new Hi(i,0),l=new Hi(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,l],h=>{r=r.add(h.ls)})}),he.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;tt.isDocumentKey(s)||(s=s.child(""));const l=new Hi(new tt(s),0);let h=new Vn(qt);return this.ds.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(p.ls)),!0)},l),he.resolve(this.gs(h))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Nt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return he.forEach(t.mutations,i=>{const s=new Hi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Hi(t,0),i=this.ds.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return he.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class UY{constructor(e){this.ps=e,this.docs=new Rr(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,l=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Xn.newInvalidDocument(t))}getEntries(e,t){let r=xo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Xn.newInvalidDocument(i))}),he.resolve(r)}getAllFromCollection(e,t,r){let i=xo();const s=new tt(t.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:h,value:{document:p}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||AO(_2(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,t,r,i){dt()}Is(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new HY(this)}getSize(e){return he.resolve(this.size)}}class HY extends WH{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class jY{constructor(e){this.persistence=e,this.Ts=new Hf(t=>Xm(t),zw),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.Es=0,this.As=new YO,this.targetCount=0,this.Rs=ag.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),he.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new ag(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.vn(t),he.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Ts.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Ts.delete(l),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),he.waitFor(s).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(l=>{s.push(i.markPotentiallyOrphaned(e,l))}),he.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.As.containsKey(t))}}class JH{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Ao(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new jY(this),this.indexManager=new SY,this.remoteDocumentCache=new UY(r=>this.referenceDelegate.Ss(r)),this.wt=new MH(t),this.Ds=new LY(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new VY,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new BY(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new $Y(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(s=>this.referenceDelegate.xs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ns(e,t){return he.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class $Y extends v2{constructor(e){super(),this.currentSequenceNumber=e}}class SS{constructor(e){this.persistence=e,this.ks=new YO,this.Os=null}static Ms(e){return new SS(e)}get Fs(){if(this.Os)return this.Os;throw dt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),he.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Fs.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Fs,r=>{const i=tt.fromPath(r);return this.$s(e,i).next(s=>{s||t.removeEntry(i,Rt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return he.or([()=>he.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class GY{constructor(e){this.wt=e}O(e,t,r,i){const s=new lS("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DH,{unique:!0}),h.createObjectStore("documentMutations"),ej(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=he.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),ej(e)),l=l.next(()=>function(h){const p=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Rt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,p){return p.store("mutations").K().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DH,{unique:!0});const E=p.store("mutations"),D=y.map(k=>E.put(k));return he.waitFor(D)})}(e,s))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Bs(s))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(s)))),r<7&&i>=7&&(l=l.next(()=>this.Us(s))),r<8&&i>=8&&(l=l.next(()=>this.qs(e,s))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Ks(s))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:mY});p.createIndex("collectionPathOverlayIndex",gY,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",_Y,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:iY});p.createIndex("documentKeyIndex",sY),p.createIndex("collectionGroupIndex",oY)}(e)).next(()=>this.Gs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.Qs(e,s))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:dY}).createIndex("sequenceNumberIndex",hY,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:fY}).createIndex("documentKeyIndex",pY,{unique:!1})}(e))),l}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=IS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>he.forEach(i,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",l).next(h=>he.forEach(h,p=>{Nt(p.userId===s.userId);const y=rg(this.wt,p);return jH(e,s.userId,y).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((l,h)=>{const p=new pn(l),y=[0,Js(p)];s.push(t.get(y).next(E=>E?he.resolve():t.put({targetId:0,path:Js(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>he.waitFor(s))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:uY});const r=t.store("collectionParents"),i=new ZO,s=l=>{if(i.add(l)){const h=l.lastSegment(),p=l.popLast();return r.put({collectionId:h,parent:Js(p)})}};return t.store("remoteDocuments").J({H:!0},(l,h)=>{const p=new pn(l);return s(p.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,h,p],y)=>{const E=yu(h);return s(E.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const s=rE(i),l=RH(this.wt,s);return t.put(l)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,l)=>{const h=t.store("remoteDocumentsV14"),p=(y=l,y.document?new tt(pn.fromString(y.document.name).popFirst(5)):y.noDocument?tt.fromSegments(y.noDocument.path):y.unknownDocument?tt.fromSegments(y.unknownDocument.path):dt()).path.toArray();var y;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(E))}).next(()=>he.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=KH(this.wt),s=new JH(SS.Ms,this.wt.ne);return r.K().next(l=>{const h=new Map;return l.forEach(p=>{var y;let E=null!==(y=h.get(p.userId))&&void 0!==y?y:Yt();rg(this.wt,p).keys().forEach(D=>E=E.add(D)),h.set(p.userId,E)}),he.forEach(h,(p,y)=>{const E=new Li(y),D=wS.se(this.wt,E),k=s.getIndexManager(E),N=DS.se(E,this.wt,k,s.referenceDelegate);return new XH(i,N,D,k).recalculateAndSaveOverlaysForDocumentKeys(new $O(t,Ao.ot),p).next()})})}}function ej(n){n.createObjectStore("targetDocuments",{keyPath:lY}).createIndex("documentTargetsIndex",cY,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",aY,{unique:!0}),n.createObjectStore("targetGlobal")}const QO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class XO{constructor(e,t,r,i,s,l,h,p,y,E,D=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=s,this.window=l,this.document=h,this.Ws=y,this.zs=E,this.Hs=D,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=k=>Promise.resolve(),!XO.V())throw new Ne(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new OY(this,i),this.ei=t+"main",this.wt=new MH(p),this.ni=new ic(this.ei,this.Hs,new GY(this.wt)),this.Vs=new xY(this.referenceDelegate,this.wt),this.remoteDocumentCache=KH(this.wt),this.Ds=new wY,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===E&&Jr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(_e.FAILED_PRECONDITION,QO);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Ao(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,we.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>AS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Ff(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return cE(e).get("owner").next(t=>he.resolve(this.di(t)))}_i(e){return AS(e).delete(this.clientId)}wi(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ui(r,"clientMetadata");return i.K().next(s=>{const l=e.gi(s,18e5),h=s.filter(p=>-1===l.indexOf(p));return he.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?he.resolve(!0):cE(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Ne(_e.FAILED_PRECONDITION,QO);return!1}}return!(!this.networkEnabled||!this.inForeground)||AS(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new $O(t,Ao.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>AS(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return DS.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new AY(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return wS.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(l=this.Hs)?vY:14===l?xH:13===l?AH:12===l?yY:11===l?SH:void dt();var l;let h;return this.ni.runTransaction(e,i,s,p=>(h=new $O(p,this.Ps?this.Ps.next():Ao.ot),"readwrite-primary"===t?this.ai(h).next(y=>!!y||this.hi(h)).next(y=>{if(!y)throw Jr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Ne(_e.FAILED_PRECONDITION,y2);return r(h)}).next(y=>this.fi(h).next(()=>y)):this.bi(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}bi(e){return cE(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(_e.FAILED_PRECONDITION,QO)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cE(e).put("owner",t)}static V(){return ic.V()}li(e){const t=cE(e);return t.get("owner").next(r=>this.di(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Jr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Jr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Jr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cE(n){return Ui(n,"owner")}function AS(n){return Ui(n,"clientMetadata")}function JO(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class eP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=Yt(),i=Yt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new eP(e,t.fromCache,r,i)}}class tj{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(s=>s||this.xi(e,t,i,r)).next(s=>s||this.Ni(e,t))}Ci(e,t){return he.resolve(null)}xi(e,t,r,i){return function xZ(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Rt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(s=>{const l=this.ki(t,s);return this.Oi(t,l,r,i)?this.Ni(e,t):(DO()<=Mi.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),LO(t)),this.Mi(e,l,t,g2(i,-1)))})}ki(e,t){let r=new Vn($2(e));return t.forEach((i,s)=>{VO(e,s)&&(r=r.add(s))}),r}Oi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ni(e,t){return DO()<=Mi.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",LO(t)),this.Di.getDocumentsMatchingQuery(e,t,ua.min())}Mi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class zY{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new Rr(qt),this.Bi=new Hf(s=>Xm(s),zw),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XH(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function nj(n,e,t,r){return new zY(n,e,t,r)}function rj(n,e){return tP.apply(this,arguments)}function tP(){return tP=(0,we.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const l=[],h=[];let p=Yt();for(const y of i){l.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of s){h.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(r,p).next(y=>({Ki:y,removedBatchIds:l,addedBatchIds:h}))})})}),tP.apply(this,arguments)}function qY(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Ui.newChangeBuffer({trackRemovals:!0});return function(l,h,p,y){const E=p.batch,D=E.keys();let k=he.resolve();return D.forEach(N=>{k=k.next(()=>y.getEntry(h,N)).next(B=>{const J=p.docVersions.get(N);Nt(null!==J),B.version.compareTo(J)<0&&(E.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),y.addEntry(B)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(h,E))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Yt();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(h=h.add(l.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ij(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function WY(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const h=[];e.targetChanges.forEach((E,D)=>{const k=i.get(D);if(!k)return;h.push(t.Vs.removeMatchingKeys(s,E.removedDocuments,D).next(()=>t.Vs.addMatchingKeys(s,E.addedDocuments,D)));let N=k.withSequenceNumber(s.currentSequenceNumber);var B,J,ce;e.targetMismatches.has(D)?N=N.withResumeToken(pi.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,r)),i=i.insert(D,N),J=N,ce=E,(0===(B=k).resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0)&&h.push(t.Vs.updateTargetData(s,N))});let p=xo(),y=Yt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,E))}),h.push(sj(s,l,e.documentUpdates).next(E=>{p=E.Gi,y=E.Qi})),!r.isEqual(Rt.min())){const E=t.Vs.getLastRemoteSnapshotVersion(s).next(D=>t.Vs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(E)}return he.waitFor(h).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(t.$i=i,s))}function sj(n,e,t){let r=Yt(),i=Yt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let l=xo();return t.forEach((h,p)=>{const y=s.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(Rt.min())?(e.removeEntry(h,p.readTime),l=l.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),l=l.insert(h,p)):Ve("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)}),{Gi:l,Qi:i}})}function KY(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qy(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(s=>s?(i=s,he.resolve(i)):t.Vs.allocateTargetId(r).next(l=>(i=new jf(e,l,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Wy(n,e,t){return nP.apply(this,arguments)}function nP(){return nP=(0,we.Z)(function*(n,e,t){const r=rt(n),i=r.$i.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Ff(l))throw l;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),nP.apply(this,arguments)}function xS(n,e,t){const r=rt(n);let i=Rt.min(),s=Yt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,p,y){const E=rt(h),D=E.Bi.get(y);return void 0!==D?he.resolve(E.$i.get(D)):E.Vs.getTargetData(p,y)}(r,l,ul(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(l,h.targetId).next(p=>{s=p})}).next(()=>r.Fi.getDocumentsMatchingQuery(l,e,t?i:Rt.min(),t?s:Yt())).next(h=>(lj(r,j2(e),h),{documents:h,ji:s})))}function oj(n,e){const t=rt(n),r=rt(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.te(s,e).next(l=>l?l.target:null))}function aj(n,e){const t=rt(n),r=t.Li.get(e)||Rt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,g2(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(lj(t,e,i),i))}function lj(n,e,t){let r=Rt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Li.set(e,r)}function rP(){return rP=(0,we.Z)(function*(n,e,t,r){const i=rt(n);let s=Yt(),l=xo();for(const y of t){const E=e.Wi(y.metadata.name);y.document&&(s=s.add(E));const D=e.zi(y);D.setReadTime(e.Hi(y.metadata.readTime)),l=l.insert(E,D)}const h=i.Ui.newChangeBuffer({trackRemovals:!0}),p=yield qy(i,(y=r,ul(Fy(pn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>sj(y,h,l).next(E=>(h.apply(y),E)).next(E=>i.Vs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.Vs.addMatchingKeys(y,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,E.Gi,E.Qi)).next(()=>E.Gi)))}),rP.apply(this,arguments)}function YY(n,e){return iP.apply(this,arguments)}function iP(){return iP=(0,we.Z)(function*(n,e,t=Yt()){const r=yield qy(n,ul(WO(e.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const l=Bi(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ds.saveNamedQuery(s,e);const h=r.withResumeToken(pi.EMPTY_BYTE_STRING,l);return i.$i=i.$i.insert(h.targetId,h),i.Vs.updateTargetData(s,h).next(()=>i.Vs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Vs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(s,e))})}),iP.apply(this,arguments)}function cj(n,e){return`firestore_clients_${n}_${e}`}function uj(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function sP(n,e){return`firestore_targets_${n}_${e}`}class MS{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let s,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(s=new Ne(i.error.code,i.error.message))),l?new MS(e,t,i.state,s):(Jr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ne(r.error.code,r.error.message))),s?new uE(e,r.state,i):(Jr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=_S();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=D2(r.activeTargetIds[l]),s=s.add(r.activeTargetIds[l]);return i?new kS(e,s):(Jr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class oP{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new oP(t.clientId,t.onlineState):(Jr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class aP{constructor(){this.activeTargetIds=_S()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lP{constructor(e,t,r,i,s){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Rr(qt),this.started=!1,this.ir=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=cj(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new aP),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const s=e.getItem(cj(e.persistenceKey,i));if(s){const l=kS.Ji(i,s);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(sP(this.persistenceKey,e));if(r){const i=uE.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sP(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Jr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(s){let l=Ao.ot;if(null!=s)try{const h=JSON.parse(s);Nt("number"==typeof h),l=h}catch(h){Jr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Ao.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Nr(s)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new MS(this.currentUser,e,t,r),s=uj(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Yi())}pr(e){const t=uj(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=sP(this.persistenceKey,e),s=new uE(e,t,r);this.setItem(i,s.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return kS.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return MS.Ji(new Li(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return uE.Ji(i,t)}wr(e){return oP.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),s=this.gr(r),l=[],h=[];return s.forEach(p=>{i.has(p)||l.push(p)}),i.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Mr(l,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=_S();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class dj{constructor(){this.Fr=new aP,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new aP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class QY{Br(e){}shutdown(){}}class hj{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const XY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class JY{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class e7 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,s){const l=this.oo(e,t);Ve("RestConnection","Sending: ",l,r);const h={};return this.uo(h,i,s),this.co(e,l,h,r).then(p=>(Ve("RestConnection","Received: ",p),p),p=>{throw Nw("RestConnection",`${e} failed with error: `,p,"url: ",l,"request:",r),p})}ao(e,t,r,i,s,l){return this.ro(e,t,r,i,s)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ky,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,t){return`${this.so}/v1/${t}:${XY[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((s,l)=>{const h=new J5;h.listenOnce(Y5.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case IO.NO_ERROR:const y=h.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(y)),s(y);break;case IO.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),l(new Ne(_e.DEADLINE_EXCEEDED,"Request time out"));break;case IO.HTTP_ERROR:const E=h.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',E,"response text:",h.getResponseText()),E>0){const D=h.getResponseJson().error;if(D&&D.status&&D.message){const k=function(N){const B=N.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(B)>=0?B:_e.UNKNOWN}(D.status);l(new Ne(k,D.message))}else l(new Ne(_e.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Ne(_e.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);h.send(t,"POST",p,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=K5(),l=Z5(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new X5({})),this.uo(h.initMessageHeaders,t,r),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=i.join("");Ve("Connection","Creating WebChannel: "+p,h);const y=s.createWebChannel(p,h);let E=!1,D=!1;const k=new JY({jr:B=>{D?Ve("Connection","Not sending because WebChannel is closed:",B):(E||(Ve("Connection","Opening WebChannel transport."),y.open(),E=!0),Ve("Connection","WebChannel sending:",B),y.send(B))},Wr:()=>y.close()}),N=(B,J,ce)=>{B.listen(J,Be=>{try{ce(Be)}catch(Ke){setTimeout(()=>{throw Ke},0)}})};return N(y,sS.EventType.OPEN,()=>{D||Ve("Connection","WebChannel transport opened.")}),N(y,sS.EventType.CLOSE,()=>{D||(D=!0,Ve("Connection","WebChannel transport closed"),k.eo())}),N(y,sS.EventType.ERROR,B=>{D||(D=!0,Nw("Connection","WebChannel transport errored:",B),k.eo(new Ne(_e.UNAVAILABLE,"The operation could not be completed")))}),N(y,sS.EventType.MESSAGE,B=>{var J;if(!D){const ce=B.data[0];Nt(!!ce);const Be=ce,Ke=Be.error||(null===(J=Be[0])||void 0===J?void 0:J.error);if(Ke){Ve("Connection","WebChannel received error:",Ke);const nt=Ke.status;let Qe=function(Ot){const an=ei[Ot];if(void 0!==an)return iH(an)}(nt),St=Ke.message;void 0===Qe&&(Qe=_e.INTERNAL,St="Unknown error status: "+nt+" with message "+Ke.message),D=!0,k.eo(new Ne(Qe,St)),y.close()}else Ve("Connection","WebChannel received:",ce),k.no(ce)}}),N(l,Q5.STAT_EVENT,B=>{B.stat===u2.PROXY?Ve("Connection","Detected buffering proxy"):B.stat===u2.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.Zr()},0),k}}function fj(){return typeof window<"u"?window:null}function RS(){return typeof document<"u"?document:null}function dE(n){return new zZ(n,!0)}class cP{constructor(e,t,r=1e3,i=1.5,s=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class pj{constructor(e,t,r,i,s,l,h,p){this.js=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new cP(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,we.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,we.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(Jr(t.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Ne(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,we.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t7 extends pj{constructor(e,t,r,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.wt=s}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function KZ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:dt(),i=e.targetChange.targetIds||[],s=function(p,y){return p.dt?(Nt(void 0===y||"string"==typeof y),pi.fromBase64String(y||"")):(Nt(void 0===y||y instanceof Uint8Array),pi.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const y=void 0===p.code?_e.UNKNOWN:iH(p.code);return new Ne(y,p.message||"")}(l);t=new cH(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=_u(n,r.document.name),s=Bi(r.document.updateTime),l=new ls({mapValue:{fields:r.document.fields}}),h=Xn.newFoundDocument(i,s,l);t=new yS(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=_u(n,r.document),s=r.readTime?Bi(r.readTime):Rt.min(),l=Xn.newNoDocument(i,s);t=new yS([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=_u(n,r.document);t=new yS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,s=new LZ(r.count||0);t=new lH(r.targetId,s)}}var p;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return Rt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Rt.min():s.readTime?Bi(s.readTime):Rt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=tE(this.wt),t.addTarget=function(i,s){let l;const h=s.target;return l=hS(h)?{documents:vH(i,h)}:{query:bH(i,h)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=fH(i,s.resumeToken):s.snapshotVersion.compareTo(Rt.min())>0&&(l.readTime=Jw(i,s.snapshotVersion.toTimestamp())),l}(this.wt,e);const r=function YZ(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=tE(this.wt),t.removeTarget=e,this.Mo(t)}}class n7 extends pj{constructor(e,t,r,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function ZZ(n,e){return n&&n.length>0?(Nt(void 0!==e),n.map(t=>function(r,i){let s=Bi(r.updateTime?r.updateTime:i);return s.isEqual(Rt.min())&&(s=Bi(i)),new PZ(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Bi(e.commitTime);return this.listener.Jo(r,t)}return Nt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=tE(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>nE(this.wt,r))};this.Mo(t)}}class r7 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(_e.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.bo.ao(e,t,r,s,l,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ne(_e.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class i7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Jr(t),this.su=!1):Ve("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class s7{constructor(e,t,r,i,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(h=>{r.enqueueAndForget((0,we.Z)(function*(){var p;zf(l)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,we.Z)(function*(y){const E=rt(y);E.lu.add(4),yield Ky(E),E._u.set("Unknown"),E.lu.delete(4),yield hE(E)}),function(y){return p.apply(this,arguments)})(l))}))}),this._u=new i7(r,i)}}function hE(n){return uP.apply(this,arguments)}function uP(){return uP=(0,we.Z)(function*(n){if(zf(n))for(const e of n.fu)yield e(!0)}),uP.apply(this,arguments)}function Ky(n){return dP.apply(this,arguments)}function dP(){return dP=(0,we.Z)(function*(n){for(const e of n.fu)yield e(!1)}),dP.apply(this,arguments)}function OS(n,e){const t=rt(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),pP(t)?fP(t):Yy(t).Co()&&hP(t,e))}function fE(n,e){const t=rt(n),r=Yy(t);t.hu.delete(e),r.Co()&&mj(t,e),0===t.hu.size&&(r.Co()?r.ko():zf(t)&&t._u.set("Unknown"))}function hP(n,e){n.wu.Nt(e.targetId),Yy(n).Qo(e)}function mj(n,e){n.wu.Nt(e),Yy(n).jo(e)}function fP(n){n.wu=new jZ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Yy(n).start(),n._u.iu()}function pP(n){return zf(n)&&!Yy(n).Do()&&n.hu.size>0}function zf(n){return 0===rt(n).lu.size}function gj(n){n.wu=void 0}function o7(n){return mP.apply(this,arguments)}function mP(){return mP=(0,we.Z)(function*(n){n.hu.forEach((e,t)=>{hP(n,e)})}),mP.apply(this,arguments)}function a7(n,e){return gP.apply(this,arguments)}function gP(){return gP=(0,we.Z)(function*(n,e){gj(n),pP(n)?(n._u.uu(e),fP(n)):n._u.set("Unknown")}),gP.apply(this,arguments)}function l7(n,e,t){return _P.apply(this,arguments)}function _P(){return _P=(0,we.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof cH&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(i,s){const l=s.cause;for(const h of s.targetIds)i.hu.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.hu.delete(h),i.wu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield PS(n,r)}else if(e instanceof yS?n.wu.Ut(e):e instanceof lH?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Rt.min()))try{const r=yield ij(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const l=i.wu.Yt(s);return l.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.hu.get(p);y&&i.hu.set(p,y.withResumeToken(h.resumeToken,s))}}),l.targetMismatches.forEach(h=>{const p=i.hu.get(h);if(!p)return;i.hu.set(h,p.withResumeToken(pi.EMPTY_BYTE_STRING,p.snapshotVersion)),mj(i,h);const y=new jf(p.target,h,1,p.sequenceNumber);hP(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield PS(n,r)}var r}),_P.apply(this,arguments)}function PS(n,e,t){return yP.apply(this,arguments)}function yP(){return yP=(0,we.Z)(function*(n,e,t){if(!Ff(e))throw e;n.lu.add(1),yield Ky(n),n._u.set("Offline"),t||(t=()=>ij(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield hE(n)}))}),yP.apply(this,arguments)}function _j(n,e){return e().catch(t=>PS(n,t,e))}function Zy(n){return vP.apply(this,arguments)}function vP(){return vP=(0,we.Z)(function*(n){const e=rt(n),t=qf(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;c7(e);)try{const i=yield KY(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,u7(e,i)}catch(i){yield PS(e,i)}yj(e)&&vj(e)}),vP.apply(this,arguments)}function c7(n){return zf(n)&&n.au.length<10}function u7(n,e){n.au.push(e);const t=qf(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function yj(n){return zf(n)&&!qf(n).Do()&&n.au.length>0}function vj(n){qf(n).start()}function d7(n){return bP.apply(this,arguments)}function bP(){return bP=(0,we.Z)(function*(n){qf(n).Xo()}),bP.apply(this,arguments)}function h7(n){return wP.apply(this,arguments)}function wP(){return wP=(0,we.Z)(function*(n){const e=qf(n);for(const t of n.au)e.Ho(t.mutations)}),wP.apply(this,arguments)}function f7(n,e,t){return EP.apply(this,arguments)}function EP(){return EP=(0,we.Z)(function*(n,e,t){const r=n.au.shift(),i=zO.from(r,e,t);yield _j(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Zy(n)}),EP.apply(this,arguments)}function p7(n,e){return CP.apply(this,arguments)}function CP(){return CP=(0,we.Z)(function*(n,e){var t;e&&qf(n).zo&&(yield(t=(0,we.Z)(function*(r,i){if(rH(s=i.code)&&s!==_e.ABORTED){const l=r.au.shift();qf(r).No(),yield _j(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Zy(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),yj(n)&&vj(n)}),CP.apply(this,arguments)}function bj(n,e){return IP.apply(this,arguments)}function IP(){return IP=(0,we.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=zf(t);t.lu.add(3),yield Ky(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield hE(t)}),IP.apply(this,arguments)}function DP(n,e){return TP.apply(this,arguments)}function TP(){return TP=(0,we.Z)(function*(n,e){const t=rt(n);e?(t.lu.delete(2),yield hE(t)):e||(t.lu.add(2),yield Ky(t),t._u.set("Unknown"))}),TP.apply(this,arguments)}function Yy(n){return n.mu||(n.mu=function(e,t,r){const i=rt(e);return i.tu(),new t7(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:o7.bind(null,n),Jr:a7.bind(null,n),Go:l7.bind(null,n)}),n.fu.push(function(){var e=(0,we.Z)(function*(t){t?(n.mu.No(),pP(n)?fP(n):n._u.set("Unknown")):(yield n.mu.stop(),gj(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function qf(n){return n.gu||(n.gu=function(e,t,r){const i=rt(e);return i.tu(),new n7(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:d7.bind(null,n),Jr:p7.bind(null,n),Yo:h7.bind(null,n),Jo:f7.bind(null,n)}),n.fu.push(function(){var e=(0,we.Z)(function*(t){t?(n.gu.No(),yield Zy(n)):(yield n.gu.stop(),n.au.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class SP{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,s){const l=Date.now()+r,h=new SP(e,t,l,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qy(n,e){if(Jr("AsyncQueue",`${e}: ${n}`),Ff(n))return new Ne(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class Xy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=Zw(),this.sortedSet=new Rr(this.comparator)}static emptySet(e){return new Xy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Xy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class wj{constructor(){this.yu=new Rr(tt.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):dt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Jy{constructor(e,t,r,i,s,l,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(l=>{s.push({type:0,doc:l})}),new Jy(e,t,Xy.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class m7{constructor(){this.Iu=void 0,this.listeners=[]}}class g7{constructor(){this.queries=new Hf(e=>H2(e),qw),this.onlineState="Unknown",this.Tu=new Set}}function AP(n,e){return xP.apply(this,arguments)}function xP(){return xP=(0,we.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new m7),i)try{s.Iu=yield t.onListen(r)}catch(l){const h=Qy(l,`Initialization of query '${LO(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.Eu(t.onlineState),s.Iu&&e.Au(s.Iu)&&RP(t)}),xP.apply(this,arguments)}function MP(n,e){return kP.apply(this,arguments)}function kP(){return kP=(0,we.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),kP.apply(this,arguments)}function _7(n,e){const t=rt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Au(i)&&(r=!0);l.Iu=i}}r&&RP(t)}function y7(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function RP(n){n.Tu.forEach(e=>{e.next()})}class OP{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Jy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Jy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class v7{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Ej{constructor(e){this.wt=e}Wi(e){return _u(this.wt,e)}zi(e){return e.metadata.exists?yH(this.wt,e.document,!1):Xn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Bi(e)}}class b7{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Cj(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=pn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new Ej(this.wt);for(const i of e)if(i.metadata.queries){const s=r.Wi(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||Yt()).add(s);t.set(l,h)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function ZY(n,e,t,r){return rP.apply(this,arguments)}(e.localStore,new Ej(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield YY(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function Cj(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Ij{constructor(e){this.key=e}}class Dj{constructor(e){this.key=e}}class Tj{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Yt(),this.mutatedKeys=Yt(),this.Lu=$2(e),this.Uu=new Xy(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new wj,i=t?t.Uu:this.Uu;let s=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,D)=>{const k=i.get(E),N=VO(this.query,D)?D:null,B=!!k&&this.mutatedKeys.has(k.key),J=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let ce=!1;k&&N?k.data.isEqual(N.data)?B!==J&&(r.track({type:3,doc:N}),ce=!0):this.Qu(k,N)||(r.track({type:2,doc:N}),ce=!0,(p&&this.Lu(N,p)>0||y&&this.Lu(N,y)<0)&&(h=!0)):!k&&N?(r.track({type:0,doc:N}),ce=!0):k&&!N&&(r.track({type:1,doc:k}),ce=!0,(p||y)&&(h=!0)),ce&&(N?(l=l.add(N),s=J?s.add(E):s.delete(E)):(l=l.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const E="F"===this.query.limitType?l.last():l.first();l=l.delete(E.key),s=s.delete(E.key),r.track({type:1,doc:E})}return{Uu:l,Gu:r,Oi:h,mutatedKeys:s}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((y,E)=>function(D,k){const N=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return N(D)-N(k)}(y.type,E.type)||this.Lu(y.doc,E.doc)),this.ju(r);const l=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,p=h!==this.$u;return this.$u=h,0!==s.length||p?{snapshot:new Jy(this.query,e.Uu,i,s,e.mutatedKeys,0===h,p,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new wj,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Yt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new Dj(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new Ij(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Yt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Jy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class w7{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class E7{constructor(e){this.key=e,this.Xu=!1}}class C7{constructor(e,t,r,i,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.Zu={},this.tc=new Hf(h=>H2(h),qw),this.ec=new Map,this.nc=new Set,this.sc=new Rr(tt.comparator),this.ic=new Map,this.rc=new YO,this.oc={},this.uc=new Map,this.cc=ag.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function I7(n,e){return PP.apply(this,arguments)}function PP(){return PP=(0,we.Z)(function*(n,e){const t=rN(n);let r,i;const s=t.tc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const l=yield qy(t.localStore,ul(e));t.isPrimaryClient&&OS(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield NP(t,e,r,"current"===h)}return i}),PP.apply(this,arguments)}function NP(n,e,t,r){return FP.apply(this,arguments)}function FP(){return FP=(0,we.Z)(function*(n,e,t,r){n.hc=(E,D,k)=>{return(N=(0,we.Z)(function*(B,J,ce,Be){let Ke=J.view.Ku(ce);Ke.Oi&&(Ke=yield xS(B.localStore,J.query,!1).then(({documents:St})=>J.view.Ku(St,Ke)));const nt=Be&&Be.targetChanges.get(J.targetId),Qe=J.view.applyChanges(Ke,B.isPrimaryClient,nt);return qP(B,J.targetId,Qe.zu),Qe.snapshot}),function(B,J,ce,Be){return N.apply(this,arguments)})(n,E,D,k);var N};const i=yield xS(n.localStore,e,!0),s=new Tj(e,i.ji),l=s.Ku(i.documents),h=Xw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),p=s.applyChanges(l,n.isPrimaryClient,h);qP(n,t,p.zu);const y=new w7(e,t,s);return n.tc.set(e,y),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),p.snapshot}),FP.apply(this,arguments)}function D7(n,e){return LP.apply(this,arguments)}function LP(){return LP=(0,we.Z)(function*(n,e){const t=rt(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(s=>!qw(s,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),fE(t.remoteStore,r.targetId),ev(t,r.targetId)}).catch(Nf))):(ev(t,r.targetId),yield Wy(t.localStore,r.targetId,!0))}),LP.apply(this,arguments)}function VP(){return VP=(0,we.Z)(function*(n,e,t){const r=iN(n);try{const i=yield function(s,l){const h=rt(s),p=vr.now(),y=l.reduce((k,N)=>k.add(N.key),Yt());let E,D;return h.persistence.runTransaction("Locally write mutations","readwrite",k=>{let N=xo(),B=Yt();return h.Ui.getEntries(k,y).next(J=>{N=J,N.forEach((ce,Be)=>{Be.isValidDocument()||(B=B.add(ce))})}).next(()=>h.localDocuments.getOverlayedDocuments(k,N)).next(J=>{E=J;const ce=[];for(const Be of l){const Ke=FZ(Be,E.get(Be.key).overlayedDocument);null!=Ke&&ce.push(new Bd(Be.key,Ke,R2(Ke.value.mapValue),Ir.exists(!0)))}return h.mutationQueue.addMutationBatch(k,p,ce,l)}).next(J=>{D=J;const ce=J.applyToLocalDocumentSet(E,B);return h.documentOverlayCache.saveOverlays(k,J.batchId,ce)})}).then(()=>({batchId:D.batchId,changes:oH(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,h){let p=s.oc[s.currentUser.toKey()];p||(p=new Rr(qt)),p=p.insert(l,h),s.oc[s.currentUser.toKey()]=p}(r,i.batchId,t),yield Ud(r,i.changes),yield Zy(r.remoteStore)}catch(i){const s=Qy(i,"Failed to persist write");t.reject(s)}}),VP.apply(this,arguments)}function Sj(n,e){return BP.apply(this,arguments)}function BP(){return BP=(0,we.Z)(function*(n,e){const t=rt(n);try{const r=yield WY(t.localStore,e);e.targetChanges.forEach((i,s)=>{const l=t.ic.get(s);l&&(Nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Xu=!0:i.modifiedDocuments.size>0?Nt(l.Xu):i.removedDocuments.size>0&&(Nt(l.Xu),l.Xu=!1))}),yield Ud(t,r,e)}catch(r){yield Nf(r)}}),BP.apply(this,arguments)}function Aj(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((s,l)=>{const h=l.view.Eu(e);h.snapshot&&i.push(h.snapshot)}),function(s,l){const h=rt(s);h.onlineState=l;let p=!1;h.queries.forEach((y,E)=>{for(const D of E.listeners)D.Eu(l)&&(p=!0)}),p&&RP(h)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function S7(n,e,t){return UP.apply(this,arguments)}function UP(){return UP=(0,we.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),s=i&&i.key;if(s){let l=new Rr(tt.comparator);l=l.insert(s,Xn.newNoDocument(s,Rt.min()));const h=Yt().add(s),p=new Qw(Rt.min(),new Map,new Vn(qt),l,h);yield Sj(r,p),r.sc=r.sc.remove(s),r.ic.delete(e),WP(r)}else yield Wy(r.localStore,e,!1).then(()=>ev(r,e,t)).catch(Nf)}),UP.apply(this,arguments)}function A7(n,e){return HP.apply(this,arguments)}function HP(){return HP=(0,we.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const i=yield qY(t.localStore,e);zP(t,r,null),GP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ud(t,i)}catch(i){yield Nf(i)}}),HP.apply(this,arguments)}function x7(n,e,t){return jP.apply(this,arguments)}function jP(){return jP=(0,we.Z)(function*(n,e,t){const r=rt(n);try{const i=yield function(s,l){const h=rt(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.mutationQueue.lookupMutationBatch(p,l).next(E=>(Nt(null!==E),y=E.keys(),h.mutationQueue.removeMutationBatch(p,E))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,y,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>h.localDocuments.getDocuments(p,y))})}(r.localStore,e);zP(r,e,t),GP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ud(r,i)}catch(i){yield Nf(i)}}),jP.apply(this,arguments)}function $P(){return $P=(0,we.Z)(function*(n,e){const t=rt(n);zf(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const l=rt(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=Qy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),$P.apply(this,arguments)}function GP(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function zP(n,e,t){const r=rt(n);let i=r.oc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function ev(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||xj(n,r)})}function xj(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(fE(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),WP(n))}function qP(n,e,t){for(const r of t)r instanceof Ij?(n.rc.addReference(r.key,e),k7(n,r)):r instanceof Dj?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||xj(n,r.key)):dt()}function k7(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.nc.add(r),WP(n))}function WP(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new tt(pn.fromString(e)),r=n.cc.next();n.ic.set(r,new E7(t)),n.sc=n.sc.insert(t,r),OS(n.remoteStore,new jf(ul(Fy(t.path)),r,2,Ao.ot))}}function Ud(n,e,t){return KP.apply(this,arguments)}function KP(){return KP=(0,we.Z)(function*(n,e,t){const r=rt(n),i=[],s=[],l=[];var h;r.tc.isEmpty()||(r.tc.forEach((h,p)=>{l.push(r.hc(p,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),i.push(y);const E=eP.Vi(p.targetId,y);s.push(E)}}))}),yield Promise.all(l),r.Zu.Go(i),yield(h=(0,we.Z)(function*(p,y){const E=rt(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>he.forEach(y,k=>he.forEach(k.Pi,N=>E.persistence.referenceDelegate.addReference(D,k.targetId,N)).next(()=>he.forEach(k.vi,N=>E.persistence.referenceDelegate.removeReference(D,k.targetId,N)))))}catch(D){if(!Ff(D))throw D;Ve("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const k=D.targetId;if(!D.fromCache){const N=E.$i.get(k),J=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);E.$i=E.$i.insert(k,J)}}}),function(p,y){return h.apply(this,arguments)})(r.localStore,s))}),KP.apply(this,arguments)}function R7(n,e){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,we.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield rj(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(l=>{l.forEach(h=>{h.reject(new Ne(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ud(t,r.Ki)}var i}),ZP.apply(this,arguments)}function O7(n,e){const t=rt(n),r=t.ic.get(e);if(r&&r.Xu)return Yt().add(r.key);{let i=Yt();const s=t.ec.get(e);if(!s)return i;for(const l of s){const h=t.tc.get(l);i=i.unionWith(h.view.qu)}return i}}function P7(n,e){return YP.apply(this,arguments)}function YP(){return YP=(0,we.Z)(function*(n,e){const t=rt(n),r=yield xS(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&qP(t,e.targetId,i.zu),i}),YP.apply(this,arguments)}function N7(n,e){return QP.apply(this,arguments)}function QP(){return QP=(0,we.Z)(function*(n,e){const t=rt(n);return aj(t.localStore,e).then(r=>Ud(t,r))}),QP.apply(this,arguments)}function F7(n,e,t,r){return XP.apply(this,arguments)}function XP(){return XP=(0,we.Z)(function*(n,e,t,r){const i=rt(n),s=yield function(l,h){const p=rt(l),y=rt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.yn(E,h).next(D=>D?p.localDocuments.getDocuments(E,D):he.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield Zy(i.remoteStore):"acknowledged"===t||"rejected"===t?(zP(i,e,r||null),GP(i,e),h=e,rt(rt(i.localStore).mutationQueue).In(h)):dt(),yield Ud(i,s)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),XP.apply(this,arguments)}function JP(){return JP=(0,we.Z)(function*(n,e){const t=rt(n);if(rN(t),iN(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Mj(t,r.toArray());t.ac=!0,yield DP(t.remoteStore,!0);for(const s of i)OS(t.remoteStore,s)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(ev(t,l),Wy(t.localStore,l,!0))),fE(t.remoteStore,l)}),yield i,yield Mj(t,r),function(s){const l=rt(s);l.ic.forEach((h,p)=>{fE(l.remoteStore,p)}),l.rc.cs(),l.ic=new Map,l.sc=new Rr(tt.comparator)}(t),t.ac=!1,yield DP(t.remoteStore,!1)}}),JP.apply(this,arguments)}function Mj(n,e,t){return eN.apply(this,arguments)}function eN(){return eN=(0,we.Z)(function*(n,e,t){const r=rt(n),i=[],s=[];for(const l of e){let h;const p=r.ec.get(l);if(p&&0!==p.length){h=yield qy(r.localStore,ul(p[0]));for(const y of p){const E=r.tc.get(y),D=yield P7(r,E);D.snapshot&&s.push(D.snapshot)}}else{const y=yield oj(r.localStore,l);h=yield qy(r.localStore,y),yield NP(r,kj(y),l,!1)}i.push(h)}return r.Zu.Go(s),i}),eN.apply(this,arguments)}function kj(n){return B2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function V7(n){const e=rt(n);return rt(rt(e.localStore).persistence).Ri()}function B7(n,e,t,r){return tN.apply(this,arguments)}function tN(){return tN=(0,we.Z)(function*(n,e,t,r){const i=rt(n);if(i.ac)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const s=i.ec.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield aj(i.localStore,j2(s[0])),h=Qw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ud(i,l,h);break}case"rejected":yield Wy(i.localStore,e,!0),ev(i,e,r);break;default:dt()}}),tN.apply(this,arguments)}function U7(n,e,t){return nN.apply(this,arguments)}function nN(){return nN=(0,we.Z)(function*(n,e,t){const r=rN(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const s=yield oj(r.localStore,i),l=yield qy(r.localStore,s);yield NP(r,kj(s),l.targetId,!1),OS(r.remoteStore,l)}for(const i of t)r.ec.has(i)&&(yield Wy(r.localStore,i,!1).then(()=>{fE(r.remoteStore,i),ev(r,i)}).catch(Nf))}}),nN.apply(this,arguments)}function rN(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=O7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S7.bind(null,e),e.Zu.Go=_7.bind(null,e.eventManager),e.Zu.lc=y7.bind(null,e.eventManager),e}function iN(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x7.bind(null,e),e}class Rj{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.wt=dE(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return nj(this.persistence,new tj,e.initialUser,this.wt)}_c(e){return new JH(SS.Ms,this.wt)}dc(e){return new dj}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Oj extends Rj{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield iN(r.yc.syncEngine),yield Zy(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return nj(this.persistence,new tj,e.initialUser,this.wt)}mc(e,t){return new kY(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new fZ(t,this.persistence);return new hZ(e.asyncQueue,r)}_c(e){const t=JO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Mo.withCacheSize(this.cacheSizeBytes):Mo.DEFAULT;return new XO(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,fj(),RS(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new dj}}class j7 extends Oj{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof lP&&(r.sharedClientState.syncEngine={kr:F7.bind(null,i),Or:B7.bind(null,i),Mr:U7.bind(null,i),Ri:V7.bind(null,i),Nr:N7.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var s=(0,we.Z)(function*(l){yield function L7(n,e){return JP.apply(this,arguments)}(r.yc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}dc(e){const t=fj();if(!lP.V(t))throw new Ne(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=JO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class sN{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Aj(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=R7.bind(null,r.syncEngine),yield DP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new g7}createDatastore(e){const t=dE(e.databaseInfo.databaseId),r=new e7(e.databaseInfo);return new r7(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>Aj(this.syncEngine,h,0),l=hj.V()?new hj:new QY,new s7(t,r,i,s,l);var t,r,i,s,l}createSyncEngine(e,t){return function(r,i,s,l,h,p,y){const E=new C7(r,i,s,l,h,p);return y&&(E.ac=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=rt(t);Ve("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Ky(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Pj(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class NS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class $7{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Vi,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,we.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const s=yield e.vc(i);return new v7(JSON.parse(s),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,we.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class G7{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,we.Z)(function*(s,l){const h=rt(s),p=tE(h.wt)+"/documents",y={documents:l.map(N=>eE(h.wt,N))},E=yield h.ao("BatchGetDocuments",p,y,l.length),D=new Map;E.forEach(N=>{const B=function WZ(n,e){return"found"in e?function(t,r){Nt(!!r.found);const i=_u(t,r.found.name),s=Bi(r.found.updateTime),l=new ls({mapValue:{fields:r.found.fields}});return Xn.newFoundDocument(i,s,l)}(n,e):"missing"in e?function(t,r){Nt(!!r.missing),Nt(!!r.readTime);const i=_u(t,r.missing),s=Bi(r.readTime);return Xn.newNoDocument(i,s)}(n,e):dt()}(h.wt,N);D.set(B.key.toString(),B)});const k=[];return l.forEach(N=>{const B=D.get(N.toString());Nt(!!B),k.push(B)}),k}),function(s,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=tt.fromPath(i);e.mutations.push(new BO(s,e.precondition(s)))}),yield(r=(0,we.Z)(function*(i,s){const l=rt(i),h=tE(l.wt)+"/documents",p={writes:s.map(y=>nE(l.wt,y))};yield l.ro("Commit",h,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=Rt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ir.updateTime(t):Ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Rt.min()))throw new Ne(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ir.updateTime(t)}return Ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class z7{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Dc=r.maxAttempts,this.So=new cP(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,we.Z)(function*(){const t=new G7(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Nc(s)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!Uw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!rH(t)}return!1}}class q7{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Li.UNAUTHENTICATED,this.clientId=p2.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,we.Z)(function*(h){Ve("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ve("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Qy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Nj(n,e){return oN.apply(this,arguments)}function oN(){return oN=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,we.Z)(function*(s){r.isEqual(s)||(yield rj(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),oN.apply(this,arguments)}function Fj(n,e){return aN.apply(this,arguments)}function aN(){return aN=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield lN(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>bj(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>bj(e.remoteStore,s)),n.onlineComponents=e}),aN.apply(this,arguments)}function lN(n){return cN.apply(this,arguments)}function cN(){return cN=(0,we.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield Nj(n,new Rj)),n.offlineComponents}),cN.apply(this,arguments)}function FS(n){return uN.apply(this,arguments)}function uN(){return uN=(0,we.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield Fj(n,new sN)),n.onlineComponents}),uN.apply(this,arguments)}function Lj(n){return lN(n).then(e=>e.persistence)}function dN(n){return lN(n).then(e=>e.localStore)}function Vj(n){return FS(n).then(e=>e.remoteStore)}function hN(n){return FS(n).then(e=>e.syncEngine)}function tv(n){return fN.apply(this,arguments)}function fN(){return fN=(0,we.Z)(function*(n){const e=yield FS(n),t=e.eventManager;return t.onListen=I7.bind(null,e.syncEngine),t.onUnlisten=D7.bind(null,e.syncEngine),t}),fN.apply(this,arguments)}function Bj(n,e,t={}){const r=new Vi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,s,l,h,p){const y=new NS({next:D=>{s.enqueueAndForget(()=>MP(i,E));const k=D.docs.has(l);!k&&D.fromCache?p.reject(new Ne(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&D.fromCache&&h&&"server"===h.source?p.reject(new Ne(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),E=new OP(Fy(l.path),y,{includeMetadataChanges:!0,Du:!0});return AP(i,E)}(yield tv(n),n.asyncQueue,e,t,r)})),r.promise}function Uj(n,e,t={}){const r=new Vi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,s,l,h,p){const y=new NS({next:D=>{s.enqueueAndForget(()=>MP(i,E)),D.fromCache&&"server"===h.source?p.reject(new Ne(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),E=new OP(l,y,{includeMetadataChanges:!0,Du:!0});return AP(i,E)}(yield tv(n),n.asyncQueue,e,t,r)})),r.promise}const Hj=new Map;function pN(n,e,t){if(!t)throw new Ne(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jj(n,e,t,r){if(!0===e&&!0===r)throw new Ne(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $j(n){if(!tt.isDocumentKey(n))throw new Ne(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Gj(n){if(tt.isDocumentKey(n))throw new Ne(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function LS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=LS(n);throw new Ne(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function zj(n,e){if(e<=0)throw new Ne(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class qj{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,jj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qj({}),this._settingsFrozen=!1,e instanceof Ld?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ne(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ld(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ne(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qj(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new nZ;switch(t.type){case"gapi":const r=t.client;return Nt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new oZ(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Hj.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),Hj.delete(e),t.terminate())}(this),Promise.resolve()}}class cr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cr(this.firestore,e,this._key)}}class Is{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class vu extends Is{constructor(e,t,r){super(e,t,Fy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cr(this.firestore,null,new tt(e))}withConverter(e){return new vu(this.firestore,e,this._path)}}function Wj(n,e,...t){if(n=(0,F.m9)(n),pN("collection","path",e),n instanceof pE){const r=pn.fromString(e,...t);return Gj(r),new vu(n,null,r)}{if(!(n instanceof cr||n instanceof vu))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return Gj(r),new vu(n.firestore,null,r)}}function VS(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=p2.I()),pN("doc","path",e),n instanceof pE){const r=pn.fromString(e,...t);return $j(r),new cr(n,null,new tt(r))}{if(!(n instanceof cr||n instanceof vu))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return $j(r),new cr(n.firestore,n instanceof vu?n.converter:null,new tt(r))}}function Kj(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof cr||n instanceof vu)&&(e instanceof cr||e instanceof vu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Zj(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof Is&&e instanceof Is&&n.firestore===e.firestore&&qw(n._query,e._query)&&n.converter===e.converter}class r9{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new cP(this,"async_queue_retry"),this.Kc=()=>{const t=RS();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=RS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=RS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Vi;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,we.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Ff(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Jr("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=SP.createAndSchedule(this,e,t,r,s=>this.Wc(s));return this.$c.push(i),i}Gc(){this.Bc&&dt()}verifyOperationInProgress(){}zc(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function mN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class i9{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class br extends pE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new r9,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Yj(this),this._firestoreClient.terminate()}}function ti(n){return n._firestoreClient||Yj(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Yj(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new gZ(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new q7(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Qj(n,e,t){const r=new Vi;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield Nj(n,t),yield Fj(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(l=s).name?l.code===_e.FAILED_PRECONDITION||l.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var l})).then(()=>r.promise)}function Xj(n){if(n._initialized||n._terminated)throw new Ne(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Hd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Br(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bu(pi.fromBase64String(e))}catch(t){throw new Ne(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bu(pi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cg{constructor(e){this._methodName=e}}class BS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}}const p9=/^__.*__$/;class m9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Bd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uy(e,this.data,t,this.fieldTransforms)}}class Jj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function e$(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class US{constructor(e,t,r,i,s,l){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new US(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return $S(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(e$(this.Zc)&&p9.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class g9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||dE(e)}aa(e,t,r,i=!1){return new US({Zc:e,methodName:t,ca:r,path:Br.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function ug(n){const e=n._freezeSettings(),t=dE(n._databaseId);return new g9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function HS(n,e,t,r,i,s={}){const l=n.aa(s.merge||s.mergeFields?2:0,e,t,i);vN("Data must be an object, but it was:",l,r);const h=r$(r,l);let p,y;if(s.merge)p=new da(l.fieldMask),y=l.fieldTransforms;else if(s.mergeFields){const E=[];for(const D of s.mergeFields){const k=bN(e,D,t);if(!l.contains(k))throw new Ne(_e.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);s$(E,k)||E.push(k)}p=new da(E),y=l.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,y=l.fieldTransforms;return new m9(new ls(h),p,y)}class mE extends cg{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mE}}function t$(n,e,t){return new US({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class gN extends cg{_toFieldTransform(e){return new Ww(e.path,new Vy)}isEqual(e){return e instanceof gN}}class _9 extends cg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=t$(this,e,!0),r=this.ha.map(s=>dg(s,t)),i=new Jm(r);return new Ww(e.path,i)}isEqual(e){return this===e}}class y9 extends cg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=t$(this,e,!0),r=this.ha.map(s=>dg(s,t)),i=new eg(r);return new Ww(e.path,i)}isEqual(e){return this===e}}class v9 extends cg{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new By(e.wt,q2(e.wt,this.la));return new Ww(e.path,t)}isEqual(e){return this===e}}function _N(n,e,t,r){const i=n.aa(1,e,t);vN("Data must be an object, but it was:",i,r);const s=[],l=ls.empty();Km(r,(p,y)=>{const E=jS(e,p,t);y=(0,F.m9)(y);const D=i.ia(E);if(y instanceof mE)s.push(E);else{const k=dg(y,D);null!=k&&(s.push(E),l.set(E,k))}});const h=new da(s);return new Jj(l,h,i.fieldTransforms)}function yN(n,e,t,r,i,s){const l=n.aa(1,e,t),h=[bN(e,r,t)],p=[i];if(s.length%2!=0)throw new Ne(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<s.length;k+=2)h.push(bN(e,s[k])),p.push(s[k+1]);const y=[],E=ls.empty();for(let k=h.length-1;k>=0;--k)if(!s$(y,h[k])){const N=h[k];let B=p[k];B=(0,F.m9)(B);const J=l.ia(N);if(B instanceof mE)y.push(N);else{const ce=dg(B,J);null!=ce&&(y.push(N),E.set(N,ce))}}const D=new da(y);return new Jj(E,D,l.fieldTransforms)}function n$(n,e,t,r=!1){return dg(t,n.aa(r?4:3,e))}function dg(n,e){if(i$(n=(0,F.m9)(n)))return vN("Unsupported field value:",e,n),r$(n,e);if(n instanceof cg)return function(t,r){if(!e$(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const l of t){let h=dg(l,r.ra(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return q2(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=vr.fromDate(t);return{timestampValue:Jw(r.wt,i)}}if(t instanceof vr){const i=new vr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Jw(r.wt,i)}}if(t instanceof BS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bu)return{bytesValue:fH(r.wt,t._byteString)};if(t instanceof cr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:UO(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${LS(t)}`)}(n,e)}function r$(n,e){const t={};return E2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Km(n,(r,i)=>{const s=dg(i,e.ea(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function i$(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof vr||n instanceof BS||n instanceof bu||n instanceof cr||n instanceof cg)}function vN(n,e,t){if(!i$(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=LS(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function bN(n,e,t){if((e=(0,F.m9)(e))instanceof Hd)return e._internalPath;if("string"==typeof e)return jS(n,e);throw $S("Field path arguments must be of type string or ",n,!1,void 0,t)}const b9=new RegExp("[~\\*/\\[\\]]");function jS(n,e,t){if(e.search(b9)>=0)throw $S(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hd(...e.split("."))._internalPath}catch{throw $S(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $S(n,e,t,r,i){const s=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||l)&&(p+=" (found",s&&(p+=` in field ${r}`),l&&(p+=` in document ${i}`),p+=")"),new Ne(_e.INVALID_ARGUMENT,h+n+p)}function s$(n,e){return n.some(t=>t.isEqual(e))}class gE{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new cr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new w9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(GS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class w9 extends gE{data(){return super.data()}}function GS(n,e){return"string"==typeof e?jS(n,e):e instanceof Hd?e._internalPath:e._delegate._internalPath}class hg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jd extends gE{constructor(e,t,r,i,s,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _E(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(GS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class _E extends jd{data(e={}){return super.data(e)}}class Wf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new hg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _E(this._firestore,this._userDataWriter,r.key,r,new hg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new _E(r._firestore,r._userDataWriter,l.doc.key,l.doc,new hg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new _E(r._firestore,r._userDataWriter,l.doc.key,l.doc,new hg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==l.type&&(p=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),y=s.indexOf(l.doc.key)),{type:E9(l.type),doc:h,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function E9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function o$(n,e){return n instanceof jd&&e instanceof jd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Wf&&e instanceof Wf&&n._firestore===e._firestore&&Zj(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function a$(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yE{}function Kf(n,...e){for(const t of e)n=t._apply(n);return n}class C9 extends yE{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=ug(e.firestore),r=function(i,s,l,h,p,y,E){let D;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){f$(E,y);const N=[];for(const B of E)N.push(h$(h,i,B));D={arrayValue:{values:N}}}else D=h$(h,i,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||f$(E,y),D=n$(l,"where",E,"in"===y||"not-in"===y);const k=cs.create(p,y,D);return function(N,B){if(B.ht()){const ce=NO(N);if(null!==ce&&!ce.isEqual(B.field))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ce.toString()}' and '${B.field.toString()}'`);const Be=PO(N);null!==Be&&p$(0,B.field,Be)}const J=function(ce,Be){for(const Ke of ce.filters)if(Be.indexOf(Ke.op)>=0)return Ke.op;return null}(N,function(ce){switch(ce){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==J)throw new Ne(_e.INVALID_ARGUMENT,J===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${J.toString()}' filters.`)}(i,k),k}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Is(e.firestore,e.converter,function(i,s){const l=i.filters.concat([s]);return new Vd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class D9 extends yE{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Ny(i,s);return function(h,p){if(null===PO(h)){const y=NO(h);null!==y&&p$(0,y,p.field)}}(r,l),l}(e._query,this.fa,this.wa);return new Is(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Vd(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class l$ extends yE{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new Is(e.firestore,e.converter,U2(e._query,this.ma,this.ga))}}class c$ extends yE{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=d$(e,this.type,this.ya,this.pa);return new Is(e.firestore,e.converter,(i=t,new Vd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class u$ extends yE{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=d$(e,this.type,this.ya,this.pa);return new Is(e.firestore,e.converter,(i=t,new Vd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function d$(n,e,t,r){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof gE)return function(i,s,l,h,p){if(!h)throw new Ne(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const E of Ly(i))if(E.field.isKeyField())y.push(Qm(s,h.key));else{const D=h.data.field(E.field);if(kO(D))throw new Ne(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const k=E.field.canonicalString();throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}y.push(D)}return new Uf(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ug(n.firestore);return function(s,l,h,p,y,E){const D=s.explicitOrderBy;if(y.length>D.length)throw new Ne(_e.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let N=0;N<y.length;N++){const B=y[N];if(D[N].field.isKeyField()){if("string"!=typeof B)throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof B}`);if(!FO(s)&&-1!==B.indexOf("/"))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${B}' contains a slash.`);const J=s.path.child(pn.fromString(B));if(!tt.isDocumentKey(J))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const ce=new tt(J);k.push(Qm(l,ce))}else{const J=n$(h,p,B);k.push(J)}}return new Uf(k,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function h$(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FO(e)&&-1!==t.indexOf("/"))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pn.fromString(t));if(!tt.isDocumentKey(r))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qm(n,new tt(r))}if(t instanceof cr)return Qm(n,t._key);throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${LS(t)}.`)}function f$(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function p$(n,e,t){if(!t.isEqual(e))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const O9={maxAttempts:5};class wN{convertValue(e,t="none"){switch(Ym(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Or(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return Km(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new BS(Or(e.latitude),Or(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=I2(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bw(e));default:return null}}convertTimestamp(e){const t=Lf(e);return new vr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pn.fromString(e);Nt(CH(r));const i=new Ld(r.get(1),r.get(3)),s=new tt(r.popFirst(5));return i.isEqual(t)||Jr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function zS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class P9 extends wN{constructor(e){super(),this.firestore=e}convertBytes(e){return new bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,t)}}class m${constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ug(e)}set(e,t,r){this._verifyNotCommitted();const i=Zf(e,this._firestore),s=zS(i.converter,t,r),l=HS(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Zf(e,this._firestore);let l;return l="string"==typeof(t=(0,F.m9)(t))||t instanceof Hd?yN(this._dataReader,"WriteBatch.update",s._key,t,r,i):_N(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,Ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Zf(e,this._firestore);return this._mutations=this._mutations.concat(new Hy(t._key,Ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zf(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new Ne(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class fg extends wN{constructor(e){super(),this.firestore=e}convertBytes(e){return new bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,t)}}function g$(n,e,t){n=un(n,cr);const r=un(n.firestore,br),i=zS(n.converter,e,t);return nv(r,[HS(ug(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ir.none())])}function _$(n,e,t,...r){n=un(n,cr);const i=un(n.firestore,br),s=ug(i);let l;return l="string"==typeof(e=(0,F.m9)(e))||e instanceof Hd?yN(s,"updateDoc",n._key,e,t,r):_N(s,"updateDoc",n._key,e),nv(i,[l.toMutation(n._key,Ir.exists(!0))])}function y$(n,...e){var t,r,i;n=(0,F.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||mN(e[l])||(s=e[l],l++);const h={includeMetadataChanges:s.includeMetadataChanges};if(mN(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[l+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let p,y,E;if(n instanceof cr)y=un(n.firestore,br),E=Fy(n._key.path),p={next:D=>{e[l]&&e[l](EN(y,n,D))},error:e[l+1],complete:e[l+2]};else{const D=un(n,Is);y=un(D.firestore,br),E=D._query;const k=new fg(y);p={next:N=>{e[l]&&e[l](new Wf(y,k,D,N))},error:e[l+1],complete:e[l+2]},a$(n._query)}return function(D,k,N,B){const J=new NS(B),ce=new OP(k,J,N);return D.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return AP(yield tv(D),ce)})),()=>{J.Tc(),D.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return MP(yield tv(D),ce)}))}}(ti(y),E,h,p)}function nv(n,e){return function(t,r){const i=new Vi;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function T7(n,e,t){return VP.apply(this,arguments)}(yield hN(t),r,i)})),i.promise}(ti(n),e)}function EN(n,e,t){const r=t.docs.get(e._key),i=new fg(n);return new jd(n,i,e._key,r,new hg(t.hasPendingWrites,t.fromCache),e.converter)}class G9 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ug(e)}get(e){const t=Zf(e,this._firestore),r=new P9(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const s=i[0];if(s.isFoundDocument())return new gE(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new gE(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=Zf(e,this._firestore),s=zS(i.converter,t,r),l=HS(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const s=Zf(e,this._firestore);let l;return l="string"==typeof(t=(0,F.m9)(t))||t instanceof Hd?yN(this._dataReader,"Transaction.update",s._key,t,r,i):_N(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=Zf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Zf(e,this._firestore),r=new fg(this._firestore);return super.get(e).then(i=>new jd(this._firestore,r,t._key,i._document,new hg(!1,!1),t.converter))}}function CN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function b$(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function w$(){if(!function pZ(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ky=Ji.SDK_VERSION,(0,Ji._registerComponent)(new Gs.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new br(i,new iZ(t.getProvider("auth-internal")),new aZ(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),(0,Ji.registerVersion)(d2,"3.4.12",n),(0,Ji.registerVersion)(d2,"3.4.12","esm2017")}();class vE{constructor(e){this._delegate=e}static fromBase64String(e){return w$(),new vE(bu.fromBase64String(e))}static fromUint8Array(e){return b$(),new vE(bu.fromUint8Array(e))}toBase64(){return w$(),this._delegate.toBase64()}toUint8Array(){return b$(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IN(n){return function J9(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class eQ{enableIndexedDbPersistence(e,t){return function o9(n,e){Xj(n=un(n,br));const t=ti(n),r=n._freezeSettings(),i=new sN;return Qj(t,i,new Oj(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function a9(n){Xj(n=un(n,br));const e=ti(n),t=n._freezeSettings(),r=new sN;return Qj(e,r,new j7(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function l9(n){if(n._initialized&&!n._terminated)throw new Ne(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!ic.V())return Promise.resolve();const i=r+"main";yield ic.delete(i)}),function(r){return t.apply(this,arguments)})(JO(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class E${constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ld||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Nw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function t9(n,e,t,r={}){var i;const s=(n=un(n,pE))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Nw("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Li.MOCK_USER;else{l=(0,F.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ne(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Li(p)}n._authCredentials=new rZ(new h2(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function u9(n){return function W7(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield Lj(n),t=yield Vj(n);return e.setNetworkEnabled(!0),function(r){const i=rt(r);return i.lu.delete(0),hE(i)}(t)}))}(ti(n=un(n,br)))}(this._delegate)}disableNetwork(){return function d9(n){return function K7(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield Lj(n),t=yield Vj(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(i){const s=rt(i);s.lu.add(0),yield Ky(s),s._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ti(n=un(n,br)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,jj("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function c9(n){return function(e){const t=new Vi;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function M7(n,e){return $P.apply(this,arguments)}(yield hN(e),t)})),t.promise}(ti(n=un(n,br)))}(this._delegate)}onSnapshotsInSync(e){return function $9(n,e){return function Q7(n,e){const t=new NS(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield tv(n),i=t,rt(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield tv(n),i=t,void rt(r).Tu.delete(i);var r,i}))}}(ti(n=un(n,br)),mN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new rv(this,Wj(this._delegate,e))}catch(t){throw eo(t,"collection()","Firestore.collection()")}}doc(e){try{return new dl(this,VS(this._delegate,e))}catch(t){throw eo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new to(this,function n9(n,e){if(n=un(n,pE),pN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Is(n,null,(t=e,new Vd(pn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw eo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function z9(n,e,t){n=un(n,br);const r=Object.assign(Object.assign({},O9),t);return function(i){if(i.maxAttempts<1)throw new Ne(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function X7(n,e,t){const r=new Vi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const i=yield(s=n,FS(s).then(l=>l.datastore));var s;new z7(n.asyncQueue,i,t,e,r).run()})),r.promise}(ti(n),i=>e(new G9(n,i)),r)}(this._delegate,t=>e(new C$(this,t)))}batch(){return ti(this._delegate),new I$(new m$(this._delegate,e=>nv(this._delegate,e)))}loadBundle(e){return function h9(n,e){const t=ti(n=un(n,br)),r=new i9;return function J7(n,e,t,r){const i=function(s,l){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return Pj(p,y);if(p instanceof ArrayBuffer)return Pj(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new $7(p,l);var p}(t,dE(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function H7(n,e,t){const r=rt(n);var i;(i=(0,we.Z)(function*(s,l,h){try{const p=yield l.getMetadata();if(yield function(k,N){const B=rt(k),J=Bi(N.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",ce=>B.Ds.getBundleMetadata(ce,N.id)).then(ce=>!!ce&&ce.createTime.compareTo(J)>=0)}(s.localStore,p))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(k=p).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);h._updateProgress(Cj(p));const y=new b7(p,s.localStore,l.wt);let E=yield l.fc();for(;E;){const k=yield y.Nu(E);k&&h._updateProgress(k),E=yield l.fc()}const D=yield y.complete();return yield Ud(s,D.Mu,void 0),yield function(k,N){const B=rt(k);return B.persistence.runTransaction("Save bundle","readwrite",J=>B.Ds.saveBundleMetadata(J,N))}(s.localStore,p),h._completeWith(D.progress),Promise.resolve(D.Ou)}catch(p){return Nw("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var k}),function(s,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield hN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function f9(n,e){return function e9(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const i=rt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ds.getNamedQuery(s,r))}(yield dN(n),e)}))}(ti(n=un(n,br)),e).then(t=>t?new Is(n,null,t.query):null)}(this._delegate,e).then(t=>t?new to(this,t):null)}}class qS extends wN{constructor(e){super(),this.firestore=e}convertBytes(e){return new vE(new bu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return dl.forKey(t,this.firestore,null)}}class C${constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qS(e)}get(e){const t=mg(e);return this._delegate.get(t).then(r=>new bE(this._firestore,new jd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=mg(e);return r?(CN("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=mg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=mg(e);return this._delegate.delete(t),this}}class I${constructor(e){this._delegate=e}set(e,t,r){const i=mg(e);return r?(CN("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=mg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=mg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class pg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new _E(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=pg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new pg(e,new qS(e),t),i.set(t,s)),s}}pg.INSTANCES=new WeakMap;class dl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new dl(t,new cr(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new dl(t,new cr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new rv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new rv(this.firestore,Wj(this._delegate,e))}catch(t){throw eo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof cr&&Kj(this._delegate,e)}set(e,t){t=CN("DocumentReference.set",t);try{return t?g$(this._delegate,e,t):g$(this._delegate,e)}catch(r){throw eo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?_$(this._delegate,e):_$(this._delegate,e,t,...r)}catch(i){throw eo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function H9(n){return nv(un(n.firestore,br),[new Hy(n._key,Ir.none())])}(this._delegate)}onSnapshot(...e){const t=D$(e),r=T$(e,i=>new bE(this.firestore,new jd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return y$(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function F9(n){n=un(n,cr);const e=un(n.firestore,br),t=ti(e),r=new fg(e);return function Z7(n,e){const t=new Vi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,s,l){try{const h=yield function(p,y){const E=rt(p);return E.persistence.runTransaction("read document","readonly",D=>E.localDocuments.getDocument(D,y))}(i,s);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Ne(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=Qy(h,`Failed to get document '${s} from cache`);l.reject(p)}}),function(i,s,l){return r.apply(this,arguments)})(yield dN(n),e,t);var r})),t.promise}(t,n._key).then(i=>new jd(e,r,n._key,i,new hg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function L9(n){n=un(n,cr);const e=un(n.firestore,br);return Bj(ti(e),n._key,{source:"server"}).then(t=>EN(e,n,t))}(this._delegate):function N9(n){n=un(n,cr);const e=un(n.firestore,br);return Bj(ti(e),n._key).then(t=>EN(e,n,t))}(this._delegate),t.then(r=>new bE(this.firestore,new jd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new dl(this.firestore,this._delegate.withConverter(e?pg.getInstance(this.firestore,e):null))}}function eo(n,e,t){return n.message=n.message.replace(e,t),n}function D$(n){for(const e of n)if("object"==typeof e&&!IN(e))return e;return{}}function T$(n,e){var t,r;let i;return i=IN(n[0])?n[0]:IN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class bE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new dl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return o$(this._delegate,e._delegate)}}class wE extends bE{data(e){const t=this._delegate.data(e);return function tZ(n,e){n||dt()}(void 0!==t),t}}class to{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qS(e)}where(e,t,r){try{return new to(this.firestore,Kf(this._delegate,function I9(n,e,t){const r=e,i=GS("where",n);return new C9(i,r,t)}(e,t,r)))}catch(i){throw eo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new to(this.firestore,Kf(this._delegate,function T9(n,e="asc"){const t=e,r=GS("orderBy",n);return new D9(r,t)}(e,t)))}catch(r){throw eo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new to(this.firestore,Kf(this._delegate,function S9(n){return zj("limit",n),new l$("limit",n,"F")}(e)))}catch(t){throw eo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new to(this.firestore,Kf(this._delegate,function A9(n){return zj("limitToLast",n),new l$("limitToLast",n,"L")}(e)))}catch(t){throw eo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new to(this.firestore,Kf(this._delegate,function x9(...n){return new c$("startAt",n,!0)}(...e)))}catch(t){throw eo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new to(this.firestore,Kf(this._delegate,function M9(...n){return new c$("startAfter",n,!1)}(...e)))}catch(t){throw eo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new to(this.firestore,Kf(this._delegate,function k9(...n){return new u$("endBefore",n,!1)}(...e)))}catch(t){throw eo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new to(this.firestore,Kf(this._delegate,function R9(...n){return new u$("endAt",n,!0)}(...e)))}catch(t){throw eo(t,"endAt()","Query.endAt()")}}isEqual(e){return Zj(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function B9(n){n=un(n,Is);const e=un(n.firestore,br),t=ti(e),r=new fg(e);return function Y7(n,e){const t=new Vi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,s,l){try{const h=yield xS(i,s,!0),p=new Tj(s,h.ji),y=p.Ku(h.documents),E=p.applyChanges(y,!1);l.resolve(E.snapshot)}catch(h){const p=Qy(h,`Failed to execute query '${s} against cache`);l.reject(p)}}),function(i,s,l){return r.apply(this,arguments)})(yield dN(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Wf(e,r,n,i))}(this._delegate):"server"===e?.source?function U9(n){n=un(n,Is);const e=un(n.firestore,br),t=ti(e),r=new fg(e);return Uj(t,n._query,{source:"server"}).then(i=>new Wf(e,r,n,i))}(this._delegate):function V9(n){n=un(n,Is);const e=un(n.firestore,br),t=ti(e),r=new fg(e);return a$(n._query),Uj(t,n._query).then(i=>new Wf(e,r,n,i))}(this._delegate),t.then(r=>new DN(this.firestore,new Wf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=D$(e),r=T$(e,i=>new DN(this.firestore,new Wf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return y$(this._delegate,t,r)}withConverter(e){return new to(this.firestore,this._delegate.withConverter(e?pg.getInstance(this.firestore,e):null))}}class nQ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new wE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class DN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new to(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nQ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new wE(this._firestore,r))})}isEqual(e){return o$(this._delegate,e._delegate)}}class rv extends to{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new dl(this.firestore,e):null}doc(e){try{return new dl(this.firestore,void 0===e?VS(this._delegate):VS(this._delegate,e))}catch(t){throw eo(t,"doc()","CollectionReference.doc()")}}add(e){return function j9(n,e){const t=un(n.firestore,br),r=VS(n),i=zS(n.converter,e);return nv(t,[HS(ug(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new dl(this.firestore,t))}isEqual(e){return Kj(this._delegate,e._delegate)}withConverter(e){return new rv(this.firestore,this._delegate.withConverter(e?pg.getInstance(this.firestore,e):null))}}function mg(n){return un(n,cr)}class TN{constructor(...e){this._delegate=new Hd(...e)}static documentId(){return new TN(Br.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof Hd&&this._delegate._internalPath.isEqual(e._internalPath)}}class gg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function W9(){return new gN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gg(e)}static delete(){const e=function q9(){return new mE("deleteField")}();return e._methodName="FieldValue.delete",new gg(e)}static arrayUnion(...e){const t=function K9(...n){return new _9("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new gg(t)}static arrayRemove(...e){const t=function Z9(...n){return new y9("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new gg(t)}static increment(e){const t=function Y9(n){return new v9("increment",n)}(e);return t._methodName="FieldValue.increment",new gg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rQ={Firestore:E$,GeoPoint:BS,Timestamp:vr,Blob:vE,Transaction:C$,WriteBatch:I$,DocumentReference:dl,DocumentSnapshot:bE,Query:to,QueryDocumentSnapshot:wE,QuerySnapshot:DN,CollectionReference:rv,FieldPath:TN,FieldValue:gg,setLogLevel:function tQ(n){!function eZ(n){Pf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function S$(n,e){return function oQ(n,e=Zc.z){return new Wn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function SN(n,e){return S$(n,e).pipe((0,ot.U)(t=>({payload:t,type:"query"})))}function WS(n,e){return SN(n,e).pipe(Fs(void 0),OR(),(0,ot.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const p=i.find(E=>E.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(E=>E.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),s}))}function A$(n,e,t){return WS(n,t).pipe(Pa((r,i)=>function lQ(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function cQ(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return AN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return AN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return AN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Hl(),(0,ot.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function AN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function x$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function sQ(n){(function iQ(n,e){n.INTERNAL.registerComponent(new Gs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},rQ)))})(n,(e,t)=>new E$(e,t,new eQ)),n.registerVersion("@firebase/firestore-compat","0.1.21")}(a_.Z);class M${constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=WS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ot.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Fs(void 0),OR(),sr(([r,i])=>i.length>0||!r),(0,ot.U)(([r,i])=>i),cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Pa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=x$(e);return A$(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return SN(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),cn.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(cn.iC)}add(e){return this.ref.add(e)}doc(e){return new k$(this.ref.doc(e),this.afs)}}class k${constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=P$(r,t);return new M$(i,s,this.afs)}snapshotChanges(){return function aQ(n,e){return S$(n,e).pipe(Fs(void 0),OR(),(0,ot.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,nn.D)(this.ref.get(e)).pipe(cn.iC)}}class uQ{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?WS(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),sr(t=>t.length>0),cn.iC):WS(this.query,this.afs.schedulers.outsideAngular).pipe(cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Pa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=x$(e);return A$(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return SN(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),cn.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(cn.iC)}}const R$=new u.OlP("angularfire2.enableFirestorePersistence"),O$=new u.OlP("angularfire2.firestore.persistenceSettings"),dQ=new u.OlP("angularfire2.firestore.settings"),hQ=new u.OlP("angularfire2.firestore.use-emulator");function P$(n,e=(t=>t)){return{query:e(n),ref:n}}let fQ=(()=>{class n{constructor(t,r,i,s,l,h,p,y,E,D,k,N,B,J,ce,Be,Ke){this.schedulers=p;const nt=(0,Mr.on)(t,h,r),Qe=E;D&&s_(nt,h,k,B,J,ce,N,Be),[this.firestore,this.persistenceEnabled$]=(0,Mr.cc)(`${nt.name}.firestore`,"AngularFirestore",nt.name,()=>{const St=h.runOutsideAngular(()=>nt.firestore());if(s&&St.settings(s),Qe&&St.useEmulator(...Qe),i&&!Zd(l)){const Ot=()=>{try{return(0,nn.D)(St.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(an){return typeof console<"u"&&console.warn(an),Ue(!1)}};return[St,h.runOutsideAngular(Ot)]}return[St,Ue(!1)]},[s,Qe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=P$(i,r),h=this.schedulers.ngZone.run(()=>s);return new M$(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),s=this.firestore.collectionGroup(t);return new uQ(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new k$(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Mr.Dh),u.LFG(Mr.xv,8),u.LFG(R$,8),u.LFG(dQ,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(cn.HU),u.LFG(O$,8),u.LFG(hQ,8),u.LFG(Ul,8),u.LFG(Jv,8),u.LFG(Xa,8),u.LFG(i_,8),u.LFG(eb,8),u.LFG(zp,8),u.LFG(tb,8),u.LFG(sd,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pQ=(()=>{class n{constructor(){Gp.Z.registerVersion("angularfire",cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:R$,useValue:!0},{provide:O$,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[fQ]}),n})();const N$_firebaseConfig={apiKey:"AIzaSyAKO8LuJ1BHNKXyl7SjJa_a9uX1o6MoEEs",authDomain:"angulargroceries.firebaseapp.com",databaseURL:"https://angulargroceries-default-rtdb.europe-west1.firebasedatabase.app",projectId:"angulargroceries",storageBucket:"angulargroceries.appspot.com",messagingSenderId:"1074478989562",appId:"1:1074478989562:web:7b3adf0abe204d37b54943"};let mQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Mr.hO.initializeApp(N$_firebaseConfig),Mr.hO,NA,pQ,zK,VM]}),n})(),gQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Qr,Qr]}),n})(),_Q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[rq,iL,_z,JW,gQ,Cz,_W,zz,oL]}),n})(),yQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[n8]}),n.\u0275inj=u.cJS({imports:[hn,t6,mQ,_Q,t8]}),n})();(0,u.G48)(),Mu().bootstrapModule(yQ).catch(n=>console.error(n))},5867:(ft,xe,V)=>{V.d(xe,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=V(9681);(0,u.registerVersion)("firebase","9.9.0","app")},127:(ft,xe,V)=>{V.d(xe,{Z:()=>u.Z});var u=V(3942);u.Z.registerVersion("firebase","9.9.0","app-compat")},1451:(ft,xe,V)=>{V.r(xe);var u=V(5861),re=V(3942),L=V(2090),pe=V(9681),le=V(655),ye=V(1877),oe=V(4859);const ke=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},$e=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new ye.Yd("@firebase/auth");function it(v,...m){Je.logLevel<=ye.in.ERROR&&Je.error(`Auth (${pe.SDK_VERSION}): ${v}`,...m)}function Re(v,...m){throw ze(v,...m)}function Ce(v,...m){return ze(v,...m)}function Te(v,m,_){const w=Object.assign(Object.assign({},$e()),{[m]:_});return new L.LL("auth","Firebase",w).create(m,{appName:v.name})}function je(v,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&Re(v,"argument-error"),Te(v,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(v,...m){if("string"!=typeof v){const _=m[0],w=[...m.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(_,...w)}return ge.create(v,...m)}function q(v,m,..._){if(!v)throw ze(m,..._)}function Ie(v){const m="INTERNAL ASSERTION FAILED: "+v;throw it(m),new Error(m)}function ee(v,m){v||Ie(m)}const ae=new Map;function se(v){ee(v instanceof Function,"Expected a class definition");let m=ae.get(v);return m?(ee(m instanceof v,"Instance stored in cache mismatched with class"),m):(m=new v,ae.set(v,m),m)}function Fe(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function vt(){return"http:"===Xt()||"https:"===Xt()}function Xt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class dn{constructor(m,_){this.shortDelay=m,this.longDelay=_,ee(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Gt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vt()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function $n(v,m){ee(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class gn{static initialize(m,_,w){this.fetchImpl=m,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Hr=new dn(3e4,6e4);function en(v,m){return v.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:v.tenantId}):m}function zt(v,m,_,w){return us.apply(this,arguments)}function us(){return(us=(0,u.Z)(function*(v,m,_,w,M={}){return mi(v,M,(0,u.Z)(function*(){let P={},X={};w&&("GET"===m?X=w:P={body:JSON.stringify(w)});const de=(0,L.xO)(Object.assign({key:v.config.apiKey},X)).slice(1),He=yield v._getAdditionalHeaders();return He["Content-Type"]="application/json",v.languageCode&&(He["X-Firebase-Locale"]=v.languageCode),gn.fetch()(no(v,v.config.apiHost,_,de),Object.assign({method:m,headers:He,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function mi(v,m,_){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,u.Z)(function*(v,m,_){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},rn),m);try{const M=new ri(v),P=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const X=yield P.json();if("needConfirmation"in X)throw $i(v,"account-exists-with-different-credential",X);if(P.ok&&!("errorMessage"in X))return X;{const de=P.ok?X.errorMessage:X.error.message,[He,st]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===He)throw $i(v,"credential-already-in-use",X);if("EMAIL_EXISTS"===He)throw $i(v,"email-already-in-use",X);if("USER_DISABLED"===He)throw $i(v,"user-disabled",X);const Et=w[He]||He.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw Te(v,Et,st);Re(v,Et)}}catch(M){if(M instanceof L.ZR)throw M;Re(v,"network-request-failed")}})).apply(this,arguments)}function ni(v,m,_,w){return ds.apply(this,arguments)}function ds(){return(ds=(0,u.Z)(function*(v,m,_,w,M={}){const P=yield zt(v,m,_,w,M);return"mfaPendingCredential"in P&&Re(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function no(v,m,_,w){const M=`${m}${_}?${w}`;return v.config.emulator?$n(v.config,M):`${v.config.apiScheme}://${M}`}class ri{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(Ce(this.auth,"network-request-failed")),Hr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $i(v,m,_){const w={appName:v.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const M=Ce(v,m,w);return M.customData._tokenResponse=_,M}function ii(){return(ii=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Gn(v,m){return zn.apply(this,arguments)}function zn(){return(zn=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function hs(v,m){return fs.apply(this,arguments)}function fs(){return(fs=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Bn(v){if(v)try{const m=new Date(Number(v));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function ko(){return(ko=(0,u.Z)(function*(v,m=!1){const _=(0,L.m9)(v),w=yield _.getIdToken(m),M=qe(w);q(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const P="object"==typeof M.firebase?M.firebase:void 0,X=P?.sign_in_provider;return{claims:M,token:w,authTime:Bn(Jt(M.auth_time)),issuedAtTime:Bn(Jt(M.iat)),expirationTime:Bn(Jt(M.exp)),signInProvider:X||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function Jt(v){return 1e3*Number(v)}function qe(v){var m;const[_,w,M]=v.split(".");if(void 0===_||void 0===w||void 0===M)return it("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,L.tV)(w);return P?JSON.parse(P):(it("Failed to decode base64 JWT payload"),null)}catch(P){return it("Caught error parsing JWT payload as JSON",null===(m=P)||void 0===m?void 0:m.toString()),null}}function jr(v,m){return ur.apply(this,arguments)}function ur(){return(ur=(0,u.Z)(function*(v,m,_=!1){if(_)return m;try{return yield m}catch(w){throw w instanceof L.ZR&&Mt(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Mt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class _i{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(m);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),w)}iteration(){var m=this;return(0,u.Z)(function*(){var _;try{yield m.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(_=w)||void 0===_?void 0:_.code)&&m.schedule(!0))}m.schedule()})()}}class dr{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bn(this.lastLoginAt),this.creationTime=Bn(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Gi(v){return ln.apply(this,arguments)}function ln(){return(ln=(0,u.Z)(function*(v){var m;const _=v.auth,w=yield v.getIdToken(),M=yield jr(v,hs(_,{idToken:w}));q(M?.users.length,_,"internal-error");const P=M.users[0];v._notifyReloadListener(P);const X=null!==(m=P.providerUserInfo)&&void 0!==m&&m.length?j(P.providerUserInfo):[],de=W(v.providerData,X),Et=!!v.isAnonymous&&!(v.email&&P.passwordHash||de?.length),_t={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:de,metadata:new dr(P.createdAt,P.lastLoginAt),isAnonymous:Et};Object.assign(v,_t)})).apply(this,arguments)}function $(){return($=(0,u.Z)(function*(v){const m=(0,L.m9)(v);yield Gi(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function W(v,m){return[...v.filter(w=>!m.some(M=>M.providerId===w.providerId)),...m]}function j(v){return v.map(m=>{var{providerId:_}=m,w=(0,le._T)(m,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Y(){return(Y=(0,u.Z)(function*(v,m){const _=yield mi(v,{},(0,u.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:M,apiKey:P}=v.config,X=no(v,M,"/v1/token",`key=${P}`),de=yield v._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",gn.fetch()(X,{method:"POST",headers:de,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Oe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){q(m.idToken,"internal-error"),q(typeof m.idToken<"u","internal-error"),q(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function It(v){const m=qe(v);return q(m,"internal-error"),q(typeof m.exp<"u","internal-error"),q(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var w=this;return(0,u.Z)(function*(){return q(!w.accessToken||w.refreshToken,m,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(m,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var w=this;return(0,u.Z)(function*(){const{accessToken:M,refreshToken:P,expiresIn:X}=yield function K(v,m){return Y.apply(this,arguments)}(m,_);w.updateTokensAndExpiration(M,P,Number(X))})()}updateTokensAndExpiration(m,_,w){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(m,_){const{refreshToken:w,accessToken:M,expirationTime:P}=_,X=new Oe;return w&&(q("string"==typeof w,"internal-error",{appName:m}),X.refreshToken=w),M&&(q("string"==typeof M,"internal-error",{appName:m}),X.accessToken=M),P&&(q("number"==typeof P,"internal-error",{appName:m}),X.expirationTime=P),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Oe,this.toJSON())}_performRefresh(){return Ie("not implemented")}}function We(v,m){q("string"==typeof v||typeof v>"u","internal-error",{appName:m})}class pt{constructor(m){var{uid:_,auth:w,stsTokenManager:M}=m,P=(0,le._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _i(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new dr(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,u.Z)(function*(){const w=yield jr(_,_.stsTokenManager.getToken(_.auth,m));return q(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(m){return function gi(v){return ko.apply(this,arguments)}(this,m)}reload(){return function si(v){return $.apply(this,arguments)}(this)}_assign(m){this!==m&&(q(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new pt(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var w=this;return(0,u.Z)(function*(){let M=!1;m.idToken&&m.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(m),M=!0),_&&(yield Gi(w)),yield w.auth._persistUserIfCurrent(w),M&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var m=this;return(0,u.Z)(function*(){const _=yield m.getIdToken();return yield jr(m,function bt(v,m){return ii.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var w,M,P,X,de,He,st,Et;const _t=null!==(w=_.displayName)&&void 0!==w?w:void 0,xr=null!==(M=_.email)&&void 0!==M?M:void 0,gr=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,zc=null!==(X=_.photoURL)&&void 0!==X?X:void 0,Ah=null!==(de=_.tenantId)&&void 0!==de?de:void 0,Np=null!==(He=_._redirectEventId)&&void 0!==He?He:void 0,xh=null!==(st=_.createdAt)&&void 0!==st?st:void 0,vv=null!==(Et=_.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:Za,emailVerified:Fp,isAnonymous:Mh,providerData:qc,stsTokenManager:ed}=_;q(Za&&ed,m,"internal-error");const $g=Oe.fromJSON(this.name,ed);q("string"==typeof Za,m,"internal-error"),We(_t,m.name),We(xr,m.name),q("boolean"==typeof Fp,m,"internal-error"),q("boolean"==typeof Mh,m,"internal-error"),We(gr,m.name),We(zc,m.name),We(Ah,m.name),We(Np,m.name),We(xh,m.name),We(vv,m.name);const kh=new pt({uid:Za,auth:m,email:xr,emailVerified:Fp,displayName:_t,isAnonymous:Mh,photoURL:zc,phoneNumber:gr,tenantId:Ah,stsTokenManager:$g,createdAt:xh,lastLoginAt:vv});return qc&&Array.isArray(qc)&&(kh.providerData=qc.map(Wc=>Object.assign({},Wc))),Np&&(kh._redirectEventId=Np),kh}static _fromIdTokenResponse(m,_,w=!1){return(0,u.Z)(function*(){const M=new Oe;M.updateFromServerResponse(_);const P=new pt({uid:_.localId,auth:m,stsTokenManager:M,isAnonymous:w});return yield Gi(P),P})()}}const tn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,w){var M=this;return(0,u.Z)(function*(){M.storage[_]=w})()}_get(_){var w=this;return(0,u.Z)(function*(){const M=w.storage[_];return void 0===M?null:M})()}_remove(_){var w=this;return(0,u.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return v.type="NONE",v})();function wr(v,m,_){return`firebase:${v}:${m}:${_}`}class jt{constructor(m,_,w){this.persistence=m,this.auth=_,this.userKey=w;const{config:M,name:P}=this.auth;this.fullUserKey=wr(this.userKey,M.apiKey,P),this.fullPersistenceKey=wr("persistence",M.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,u.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?pt._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,u.Z)(function*(){if(_.persistence===m)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,w="authUser"){return(0,u.Z)(function*(){if(!_.length)return new jt(se(tn),m,w);const M=(yield Promise.all(_.map(function(){var st=(0,u.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return st.apply(this,arguments)}}()))).filter(st=>st);let P=M[0]||se(tn);const X=wr(w,m.config.apiKey,m.name);let de=null;for(const st of _)try{const Et=yield st._get(X);if(Et){const _t=pt._fromJSON(m,Et);st!==P&&(de=_t),P=st;break}}catch{}const He=M.filter(st=>st._shouldAllowMigration);return P._shouldAllowMigration&&He.length?(P=He[0],de&&(yield P._set(X,de.toJSON())),yield Promise.all(_.map(function(){var st=(0,u.Z)(function*(Et){if(Et!==P)try{yield Et._remove(X)}catch{}});return function(Et){return st.apply(this,arguments)}}())),new jt(P,m,w)):new jt(P,m,w)})()}}function $t(v){const m=v.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if($r(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(Sn(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(kt(m))return"Blackberry";if(on(m))return"Webos";if(er(m))return"Safari";if((m.includes("chrome/")||Tr(m))&&!m.includes("edge/"))return"Chrome";if(Ze(m))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Sn(v=(0,L.z$)()){return/firefox\//i.test(v)}function er(v=(0,L.z$)()){const m=v.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Tr(v=(0,L.z$)()){return/crios\//i.test(v)}function $r(v=(0,L.z$)()){return/iemobile/i.test(v)}function Ze(v=(0,L.z$)()){return/android/i.test(v)}function kt(v=(0,L.z$)()){return/blackberry/i.test(v)}function on(v=(0,L.z$)()){return/webos/i.test(v)}function Nn(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function An(v=(0,L.z$)()){return Nn(v)||Ze(v)||on(v)||kt(v)||/windows phone/i.test(v)||$r(v)}function zi(v,m=[]){let _;switch(v){case"Browser":_=$t((0,L.z$)());break;case"Worker":_=`${$t((0,L.z$)())}-${v}`;break;default:_=v}const w=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${pe.SDK_VERSION}/${w}`}class Ft{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const w=P=>new Promise((X,de)=>{try{X(m(P))}catch(He){de(He)}});w.onAbort=_,this.queue.push(w);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,u.Z)(function*(){var w;if(_.auth.currentUser===m)return;const M=[];try{for(const P of _.queue)yield P(m),P.onAbort&&M.push(P.onAbort)}catch(P){M.reverse();for(const X of M)try{X()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=P)||void 0===w?void 0:w.message})}})()}}class sc{constructor(m,_,w){this.app=m,this.heartbeatServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ma(this),this.idTokenSubscription=new ma(this),this.beforeStateQueue=new Ft(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(m,_){var w=this;return _&&(this._popupRedirectResolver=se(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var M,P;if(!w._deleted&&(w.persistenceManager=yield jt.create(w,m),!w._deleted)){if(null!==(M=w._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,u.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,u.Z)(function*(){var w;const M=yield _.assertedPersistence.getCurrentUser();let P=M,X=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const de=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,He=P?._redirectEventId,st=yield _.tryRedirectSignIn(m);(!de||de===He)&&st?.user&&(P=st.user,X=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(X)try{yield _.beforeStateQueue.runMiddleware(P)}catch(de){P=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(de))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return q(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(m){var _=this;return(0,u.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,u.Z)(function*(){var w;try{yield Gi(m)}catch(M){if("auth/network-request-failed"!==(null===(w=M)||void 0===w?void 0:w.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Xe(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var m=this;return(0,u.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,u.Z)(function*(){const w=m?(0,L.m9)(m):null;return w&&q(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(m,_=!1){var w=this;return(0,u.Z)(function*(){if(!w._deleted)return m&&q(w.tenantId===m.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(m)),w.queue((0,u.Z)(function*(){yield w.directlySetCurrentUser(m),w.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,u.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(se(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new L.LL("auth","Firebase",m())}onAuthStateChanged(m,_,w){return this.registerStateListener(this.authStateSubscription,m,_,w)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,w){return this.registerStateListener(this.idTokenSubscription,m,_,w)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var w=this;return(0,u.Z)(function*(){const M=yield w.getOrInitRedirectPersistenceManager(_);return null===m?M.removeCurrentUser():M.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const w=m&&se(m)||_._popupRedirectResolver;q(w,_,"argument-error"),_.redirectPersistenceManager=yield jt.create(_,[se(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,u.Z)(function*(){var w,M;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===m?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,u.Z)(function*(){if(m===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,w,M){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),X=this._isInitialized?Promise.resolve():this._initializationPromise;return q(X,this,"internal-error"),X.then(()=>P(this.currentUser)),"function"==typeof _?m.addObserver(_,w,M):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==m&&(_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh()),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=zi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,u.Z)(function*(){var _;const w={"X-Client-Version":m.clientVersion};m.app.options.appId&&(w["X-Firebase-gmpid"]=m.app.options.appId);const M=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return M&&(w["X-Firebase-Client"]=M),w})()}}function xn(v){return(0,L.m9)(v)}class ma{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function tr(v){const m=v.indexOf(":");return m<0?"":v.substr(0,m+1)}function Ts(v){if(!v)return null;const m=Number(v);return isNaN(m)?null:m}class yi{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return Ie("not implemented")}_getIdTokenResponse(m){return Ie("not implemented")}_linkToIdToken(m,_){return Ie("not implemented")}_getReauthenticationResolver(m){return Ie("not implemented")}}function Sr(v,m){return _n.apply(this,arguments)}function _n(){return(_n=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:resetPassword",en(v,m))})).apply(this,arguments)}function Gd(v,m){return oc.apply(this,arguments)}function oc(){return(oc=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function pl(v,m){return _a.apply(this,arguments)}function _a(){return(_a=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:update",en(v,m))})).apply(this,arguments)}function ml(){return(ml=(0,u.Z)(function*(v,m){return ni(v,"POST","/v1/accounts:signInWithPassword",en(v,m))})).apply(this,arguments)}function vi(v,m){return Un.apply(this,arguments)}function Un(){return(Un=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:sendOobCode",en(v,m))})).apply(this,arguments)}function Qf(v,m){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,u.Z)(function*(v,m){return vi(v,m)})).apply(this,arguments)}function oi(v,m){return gl.apply(this,arguments)}function gl(){return(gl=(0,u.Z)(function*(v,m){return vi(v,m)})).apply(this,arguments)}function _l(v,m){return so.apply(this,arguments)}function so(){return(so=(0,u.Z)(function*(v,m){return vi(v,m)})).apply(this,arguments)}function qi(v,m){return ya.apply(this,arguments)}function ya(){return(ya=(0,u.Z)(function*(v,m){return vi(v,m)})).apply(this,arguments)}function ac(){return(ac=(0,u.Z)(function*(v,m){return ni(v,"POST","/v1/accounts:signInWithEmailLink",en(v,m))})).apply(this,arguments)}function zd(){return(zd=(0,u.Z)(function*(v,m){return ni(v,"POST","/v1/accounts:signInWithEmailLink",en(v,m))})).apply(this,arguments)}class lc extends yi{constructor(m,_,w,M=null){super("password",w),this._email=m,this._password=_,this._tenantId=M}static _fromEmailAndPassword(m,_){return new lc(m,_,"password")}static _fromEmailAndCode(m,_,w=null){return new lc(m,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,u.Z)(function*(){switch(_.signInMethod){case"password":return function io(v,m){return ml.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function CE(v,m){return ac.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:Re(m,"internal-error")}})()}_linkToIdToken(m,_){var w=this;return(0,u.Z)(function*(){switch(w.signInMethod){case"password":return Gd(m,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Xf(v,m){return zd.apply(this,arguments)}(m,{idToken:_,email:w._email,oobCode:w._password});default:Re(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Oo(v,m){return bi.apply(this,arguments)}function bi(){return(bi=(0,u.Z)(function*(v,m){return ni(v,"POST","/v1/accounts:signInWithIdp",en(v,m))})).apply(this,arguments)}class Ss extends yi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new Ss(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):Re("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:w,signInMethod:M}=_,P=(0,le._T)(_,["providerId","signInMethod"]);if(!w||!M)return null;const X=new Ss(w,M);return X.idToken=P.idToken||void 0,X.accessToken=P.accessToken||void 0,X.secret=P.secret,X.nonce=P.nonce,X.pendingToken=P.pendingToken||null,X}_getIdTokenResponse(m){return Oo(m,this.buildRequest())}_linkToIdToken(m,_){const w=this.buildRequest();return w.idToken=_,Oo(m,w)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Oo(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,L.xO)(_)}return m}}function bg(v,m){return qd.apply(this,arguments)}function qd(){return(qd=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:sendVerificationCode",en(v,m))})).apply(this,arguments)}function oo(){return(oo=(0,u.Z)(function*(v,m){return ni(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,m))})).apply(this,arguments)}function Wd(){return(Wd=(0,u.Z)(function*(v,m){const _=yield ni(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,m));if(_.temporaryProof)throw $i(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Eg={USER_NOT_FOUND:"user-not-found"};function cc(){return(cc=(0,u.Z)(function*(v,m){return ni(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Eg)})).apply(this,arguments)}class As extends yi{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new As({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new As({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function Eu(v,m){return oo.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function wg(v,m){return Wd.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Cg(v,m){return cc.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:w,verificationCode:M}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:w,code:M}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:w,phoneNumber:M,temporaryProof:P}=m;return w||_||M||P?new As({verificationId:_,verificationCode:w,phoneNumber:M,temporaryProof:P}):null}}class uc{constructor(m){var _,w,M,P,X,de;const He=(0,L.zd)((0,L.pd)(m)),st=null!==(_=He.apiKey)&&void 0!==_?_:null,Et=null!==(w=He.oobCode)&&void 0!==w?w:null,_t=function iv(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=He.mode)&&void 0!==M?M:null);q(st&&Et&&_t,"argument-error"),this.apiKey=st,this.operation=_t,this.code=Et,this.continueUrl=null!==(P=He.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(X=He.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(de=He.tenantId)&&void 0!==de?de:null}static parseLink(m){const _=function Kd(v){const m=(0,L.zd)((0,L.pd)(v)).link,_=m?(0,L.zd)((0,L.pd)(m)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||_||m||v}(m);try{return new uc(_)}catch{return null}}}let Cu=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,w){return lc._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const M=uc.parseLink(w);return q(M,"argument-error"),lc._fromEmailAndCode(_,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class wi{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class lo extends wi{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class va extends lo{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return q("providerId"in _&&"signInMethod"in _,"argument-error"),Ss._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return q(m.idToken||m.accessToken,"argument-error"),Ss._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return va.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return va.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:P,nonce:X,providerId:de}=m;if(!w&&!M&&!_&&!P||!de)return null;try{return new va(de)._credential({idToken:_,accessToken:w,nonce:X,pendingToken:P})}catch{return null}}}let Iu=(()=>{class v extends lo{constructor(){super("facebook.com")}static credential(_){return Ss._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),yl=(()=>{class v extends lo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return Ss._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:M}=_;if(!w&&!M)return null;try{return v.credential(w,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),vl=(()=>{class v extends lo{constructor(){super("github.com")}static credential(_){return Ss._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class ba extends yi{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Oo(m,this.buildRequest())}_linkToIdToken(m,_){const w=this.buildRequest();return w.idToken=_,Oo(m,w)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Oo(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:w,signInMethod:M,pendingToken:P}=_;return w&&M&&P&&w===M?new ba(w,P):null}static _create(m,_){return new ba(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Dn extends wi{constructor(m){q(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Dn.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Dn.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=ba.fromJSON(m);return q(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:w}=m;if(!_||!w)return null;try{return ba._create(w,_)}catch{return null}}}let dc=(()=>{class v extends lo{constructor(){super("twitter.com")}static credential(_,w){return Ss._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:M}=_;if(!w||!M)return null;try{return v.credential(w,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function hc(v,m){return bl.apply(this,arguments)}function bl(){return(bl=(0,u.Z)(function*(v,m){return ni(v,"POST","/v1/accounts:signUp",en(v,m))})).apply(this,arguments)}class ai{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,w,M=!1){return(0,u.Z)(function*(){const P=yield pt._fromIdTokenResponse(m,w,M),X=Zd(w);return new ai({user:P,providerId:X,_tokenResponse:w,operationType:_})})()}static _forOperation(m,_,w){return(0,u.Z)(function*(){yield m._updateTokensIfNecessary(w,!0);const M=Zd(w);return new ai({user:m,providerId:M,_tokenResponse:w,operationType:_})})()}}function Zd(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Yd(){return(Yd=(0,u.Z)(function*(v){var m;const _=xn(v);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new ai({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield hc(_,{returnSecureToken:!0}),M=yield ai._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Qd extends L.ZR{constructor(m,_,w,M){var P;super(_.code,_.message),this.operationType=w,this.user=M,Object.setPrototypeOf(this,Qd.prototype),this.customData={appName:m.name,tenantId:null!==(P=m.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(m,_,w,M){return new Qd(m,_,w,M)}}function wl(v,m,_,w){return("reauthenticate"===m?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Qd._fromErrorAndOperation(v,P,m,w):P})}function nr(v){return new Set(v.map(({providerId:m})=>m).filter(m=>!!m))}function Po(){return(Po=(0,u.Z)(function*(v,m){const _=(0,L.m9)(v);yield No(!0,_,m);const{providerUserInfo:w}=yield Gn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),M=nr(w||[]);return _.providerData=_.providerData.filter(P=>M.has(P.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function co(v,m){return Er.apply(this,arguments)}function Er(){return(Er=(0,u.Z)(function*(v,m,_=!1){const w=yield jr(v,m._linkToIdToken(v.auth,yield v.getIdToken()),_);return ai._forOperation(v,"link",w)})).apply(this,arguments)}function No(v,m,_){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,u.Z)(function*(v,m,_){yield Gi(m);const M=!1===v?"provider-already-linked":"no-such-provider";q(nr(m.providerData).has(_)===v,m.auth,M)})).apply(this,arguments)}function wa(v,m){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,u.Z)(function*(v,m,_=!1){var w;const{auth:M}=v,P="reauthenticate";try{const X=yield jr(v,wl(M,P,m,v),_);q(X.idToken,M,"internal-error");const de=qe(X.idToken);q(de,M,"internal-error");const{sub:He}=de;return q(v.uid===He,M,"user-mismatch"),ai._forOperation(v,P,X)}catch(X){throw"auth/user-not-found"===(null===(w=X)||void 0===w?void 0:w.code)&&Re(M,"user-mismatch"),X}})).apply(this,arguments)}function uo(v,m){return El.apply(this,arguments)}function El(){return(El=(0,u.Z)(function*(v,m,_=!1){const w="signIn",M=yield wl(v,w,m),P=yield ai._fromIdTokenResponse(v,w,M);return _||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function at(v,m){return pc.apply(this,arguments)}function pc(){return(pc=(0,u.Z)(function*(v,m){return uo(xn(v),m)})).apply(this,arguments)}function Du(v,m){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,u.Z)(function*(v,m){const _=(0,L.m9)(v);return yield No(!1,_,m.providerId),co(_,m)})).apply(this,arguments)}function mc(v,m){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,u.Z)(function*(v,m){return wa((0,L.m9)(v),m)})).apply(this,arguments)}function Lo(v,m){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,u.Z)(function*(v,m){return ni(v,"POST","/v1/accounts:signInWithCustomToken",en(v,m))})).apply(this,arguments)}function Se(){return(Se=(0,u.Z)(function*(v,m){const _=xn(v),w=yield Lo(_,{token:m,returnSecureToken:!0}),M=yield ai._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Vt{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Ca._fromServerResponse(m,_):Re(m,"internal-error")}}class Ca extends Vt{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Ca(_)}}function Vo(v,m,_){var w;q((null===(w=_.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),q(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(q(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(q(_.android.packageName.length>0,v,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function Ia(){return(Ia=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v),M={requestType:"PASSWORD_RESET",email:m};_&&Vo(w,M,_),yield oi(w,M)})).apply(this,arguments)}function Ci(){return(Ci=(0,u.Z)(function*(v,m,_){yield Sr((0,L.m9)(v),{oobCode:m,newPassword:_})})).apply(this,arguments)}function Da(){return(Da=(0,u.Z)(function*(v,m){yield pl((0,L.m9)(v),{oobCode:m})})).apply(this,arguments)}function Ta(v,m){return _c.apply(this,arguments)}function _c(){return(_c=(0,u.Z)(function*(v,m){const _=(0,L.m9)(v),w=yield Sr(_,{oobCode:m}),M=w.requestType;switch(q(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(w.mfaInfo,_,"internal-error");default:q(w.email,_,"internal-error")}let P=null;return w.mfaInfo&&(P=Vt._fromServerResponse(xn(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:M}})).apply(this,arguments)}function ks(){return(ks=(0,u.Z)(function*(v,m){const{data:_}=yield Ta((0,L.m9)(v),m);return _.email})).apply(this,arguments)}function Wi(){return(Wi=(0,u.Z)(function*(v,m,_){const w=xn(v),M=yield hc(w,{returnSecureToken:!0,email:m,password:_}),P=yield ai._fromIdTokenResponse(w,"signIn",M);return yield w._updateCurrentUser(P.user),P})).apply(this,arguments)}function Ki(){return(Ki=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v),M={requestType:"EMAIL_SIGNIN",email:m};q(_.handleCodeInApp,w,"argument-error"),_&&Vo(w,M,_),yield _l(w,M)})).apply(this,arguments)}function Sa(){return(Sa=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v),M=Cu.credentialWithLink(m,_||Fe());return q(M._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),at(w,M)})).apply(this,arguments)}function tp(v,m){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:createAuthUri",en(v,m))})).apply(this,arguments)}function yc(){return(yc=(0,u.Z)(function*(v,m){const w={identifier:m,continueUri:vt()?Fe():"http://localhost"},{signinMethods:M}=yield tp((0,L.m9)(v),w);return M||[]})).apply(this,arguments)}function Au(){return(Au=(0,u.Z)(function*(v,m){const _=(0,L.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};m&&Vo(_.auth,M,m);const{email:P}=yield Qf(_.auth,M);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function Dl(){return(Dl=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:m};_&&Vo(w.auth,P,_);const{email:X}=yield qi(w.auth,P);X!==v.email&&(yield v.reload())})).apply(this,arguments)}function xu(v,m){return vc.apply(this,arguments)}function vc(){return(vc=(0,u.Z)(function*(v,m){return zt(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function wc(){return(wc=(0,u.Z)(function*(v,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const w=(0,L.m9)(v),P={idToken:yield w.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},X=yield jr(w,xu(w.auth,P));w.displayName=X.displayName||null,w.photoURL=X.photoUrl||null;const de=w.providerData.find(({providerId:He})=>"password"===He);de&&(de.displayName=w.displayName,de.photoURL=w.photoURL),yield w._updateTokensIfNecessary(X)})).apply(this,arguments)}function Cc(v,m,_){return rr.apply(this,arguments)}function rr(){return(rr=(0,u.Z)(function*(v,m,_){const{auth:w}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};m&&(P.email=m),_&&(P.password=_);const X=yield jr(v,Gd(w,P));yield v._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class hn{constructor(m,_,w={}){this.isNewUser=m,this.providerId=_,this.profile=w}}class eh extends hn{constructor(m,_,w,M){super(m,_,w),this.username=M}}class th extends hn{constructor(m,_){super(m,"facebook.com",_)}}class ku extends eh{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class np extends hn{constructor(m,_){super(m,"google.com",_)}}class Ic extends eh{constructor(m,_,w){super(m,"twitter.com",_,w)}}function rp(v){const{user:m,_tokenResponse:_}=v;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Rs(v){var m,_;if(!v)return null;const{providerId:w}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const X=null===(_=null===(m=qe(v.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(X)return new hn(P,"anonymous"!==X&&"custom"!==X?X:null)}if(!w)return null;switch(w){case"facebook.com":return new th(P,M);case"github.com":return new ku(P,M);case"google.com":return new np(P,M);case"twitter.com":return new Ic(P,M,v.screenName||null);case"custom":case"anonymous":return new hn(P,null);default:return new hn(P,w,M)}}(_)}class Ra{constructor(m,_){this.type=m,this.credential=_}static _fromIdtoken(m){return new Ra("enroll",m)}static _fromMfaPendingCredential(m){return new Ra("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,w;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Ra._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(w=m.multiFactorSession)&&void 0!==w&&w.idToken)return Ra._fromIdtoken(m.multiFactorSession.idToken)}return null}}class $o{constructor(m,_,w){this.session=m,this.hints=_,this.signInResolver=w}static _fromError(m,_){const w=xn(m),M=_.customData._serverResponse,P=(M.mfaInfo||[]).map(de=>Vt._fromServerResponse(w,de));q(M.mfaPendingCredential,w,"internal-error");const X=Ra._fromMfaPendingCredential(M.mfaPendingCredential);return new $o(X,P,function(){var de=(0,u.Z)(function*(He){const st=yield He._process(w,X);delete M.mfaInfo,delete M.mfaPendingCredential;const Et=Object.assign(Object.assign({},M),{idToken:st.idToken,refreshToken:st.refreshToken});switch(_.operationType){case"signIn":const _t=yield ai._fromIdTokenResponse(w,_.operationType,Et);return yield w._updateCurrentUser(_t.user),_t;case"reauthenticate":return q(_.user,w,"internal-error"),ai._forOperation(_.user,_.operationType,Et);default:Re(w,"internal-error")}});return function(He){return de.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,u.Z)(function*(){return _.signInResolver(m)})()}}function ih(v,m){return zt(v,"POST","/v2/accounts/mfaEnrollment:start",en(v,m))}class sp{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>Vt._fromServerResponse(m.auth,w)))})}static _fromUser(m){return new sp(m)}getSession(){var m=this;return(0,u.Z)(function*(){return Ra._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,_){var w=this;return(0,u.Z)(function*(){const M=m,P=yield w.getSession(),X=yield jr(w.user,M._process(w.user.auth,P,_));return yield w.user._updateTokensIfNecessary(X),w.user.reload()})()}unenroll(m){var _=this;return(0,u.Z)(function*(){var w;const M="string"==typeof m?m:m.uid,P=yield _.user.getIdToken(),X=yield jr(_.user,function Dg(v,m){return zt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",en(v,m))}(_.user.auth,{idToken:P,mfaEnrollmentId:M}));_.enrolledFactors=_.enrolledFactors.filter(({uid:de})=>de!==M),yield _.user._updateTokensIfNecessary(X);try{yield _.user.reload()}catch(de){if("auth/user-token-expired"!==(null===(w=de)||void 0===w?void 0:w.code))throw de}})()}}const Go=new WeakMap,zo="__sak";class Sc{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(zo,"1"),this.storage.removeItem(zo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const ho=(()=>{class v extends Sc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ap(){const v=(0,L.z$)();return er(v)||Nn(v)}()&&function fl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=An(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const M=this.storage.getItem(w),P=this.localCache[w];M!==P&&_(w,P,M)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((de,He,st)=>{this.notifyListeners(de,st)});const M=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(M);if(_.newValue!==de)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!w)return}const P=()=>{const de=this.storage.getItem(M);!w&&this.localCache[M]===de||this.notifyListeners(M,de)},X=this.storage.getItem(M);!function ro(){return(0,L.w1)()&&10===document.documentMode}()||X===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,w){this.localCache[_]=w;const M=this.listeners[_];if(M)for(const P of Array.from(M))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var M=()=>super._set,P=this;return(0,u.Z)(function*(){yield M().call(P,_,w),P.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,M=this;return(0,u.Z)(function*(){const P=yield w().call(M,_);return M.localCache[_]=JSON.stringify(P),P})()}_remove(_){var w=()=>super._remove,M=this;return(0,u.Z)(function*(){yield w().call(M,_),delete M.localCache[_]})()}}return v.type="LOCAL",v})(),Yi=(()=>{class v extends Sc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return v.type="SESSION",v})();let cp=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(P=>P.isListeningto(_));if(w)return w;const M=new v(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,u.Z)(function*(){const M=_,{eventId:P,eventType:X,data:de}=M.data,He=w.handlersMap[X];if(!He?.size)return;M.ports[0].postMessage({status:"ack",eventId:P,eventType:X});const st=Array.from(He).map(function(){var _t=(0,u.Z)(function*(xr){return xr(M.origin,de)});return function(xr){return _t.apply(this,arguments)}}()),Et=yield function sh(v){return Promise.all(v.map(function(){var m=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return m.apply(this,arguments)}}()))}(st);M.ports[0].postMessage({status:"done",eventId:P,eventType:X,response:Et})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function nn(v="",m=10){let _="";for(let w=0;w<m;w++)_+=Math.floor(10*Math.random());return v+_}class Os{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,w=50){var M=this;return(0,u.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let X,de;return new Promise((He,st)=>{const Et=nn("",20);P.port1.start();const _t=setTimeout(()=>{st(new Error("unsupported_event"))},w);de={messageChannel:P,onMessage(xr){const gr=xr;if(gr.data.eventId===Et)switch(gr.data.status){case"ack":clearTimeout(_t),X=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),He(gr.data.response);break;default:clearTimeout(_t),clearTimeout(X),st(new Error("invalid_response"))}}},M.handlers.add(de),P.port1.addEventListener("message",de.onMessage),M.target.postMessage({eventType:m,eventId:Et,data:_},[P.port2])}).finally(()=>{de&&M.removeMessageHandler(de)})})()}}function Ue(){return window}function ir(){return typeof Ue().WorkerGlobalScope<"u"&&"function"==typeof Ue().importScripts}function Sl(){return(Sl=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const kc="firebaseLocalStorageDb",qo="firebaseLocalStorage",fo="fbase_key";class ot{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Rc(v,m){return v.transaction([qo],m?"readwrite":"readonly").objectStore(qo)}function Ps(){const v=indexedDB.open(kc,1);return new Promise((m,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(qo,{keyPath:fo})}catch(M){_(M)}}),v.addEventListener("success",(0,u.Z)(function*(){const w=v.result;w.objectStoreNames.contains(qo)?m(w):(w.close(),yield function Oa(){const v=indexedDB.deleteDatabase(kc);return new ot(v).toPromise()}(),m(yield Ps()))}))})}function Al(v,m,_){return In.apply(this,arguments)}function In(){return(In=(0,u.Z)(function*(v,m,_){const w=Rc(v,!0).put({[fo]:m,value:_});return new ot(w).toPromise()})).apply(this,arguments)}function Ii(){return(Ii=(0,u.Z)(function*(v,m){const _=Rc(v,!1).get(m),w=yield new ot(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Pu(v,m){const _=Rc(v,!0).delete(m);return new ot(_).toPromise()}const Ko=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield Ps()),_.db})()}_withRetries(_){var w=this;return(0,u.Z)(function*(){let M=0;for(;;)try{const P=yield w._openDb();return yield _(P)}catch(P){if(M++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return ir()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=cp._getInstance(function Mc(){return ir()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,u.Z)(function*(M,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(M,P){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,u.Z)(function*(M,P){return["keyChanged"]});return function(M,P){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var w,M;if(_.activeServiceWorker=yield function Wn(){return Sl.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Os(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(M=P[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,u.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function xc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ps();return yield Al(_,zo,"1"),yield Pu(_,zo),!0}catch{}return!1})()}_withPendingWrite(_){var w=this;return(0,u.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var M=this;return(0,u.Z)(function*(){return M._withPendingWrite((0,u.Z)(function*(){return yield M._withRetries(P=>Al(P,_,w)),M.localCache[_]=w,M.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,u.Z)(function*(){const M=yield w._withRetries(P=>function Oc(v,m){return Ii.apply(this,arguments)}(P,_));return w.localCache[_]=M,M})()}_remove(_){var w=this;return(0,u.Z)(function*(){return w._withPendingWrite((0,u.Z)(function*(){return yield w._withRetries(M=>Pu(M,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const w=yield _._withRetries(X=>{const de=Rc(X,!1).getAll();return new ot(de).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const M=[],P=new Set;for(const{fbase_key:X,value:de}of w)P.add(X),JSON.stringify(_.localCache[X])!==JSON.stringify(de)&&(_.notifyListeners(X,de),M.push(X));for(const X of Object.keys(_.localCache))_.localCache[X]&&!P.has(X)&&(_.notifyListeners(X,null),M.push(X));return M})()}notifyListeners(_,w){this.localCache[_]=w;const M=this.listeners[_];if(M)for(const P of Array.from(M))P(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Ns(v,m){return zt(v,"POST","/v2/accounts/mfaSignIn:start",en(v,m))}function Ti(){return(Ti=(0,u.Z)(function*(v){return(yield zt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function po(v){return new Promise((m,_)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=m,w.onerror=M=>{const P=Ce("internal-error");P.customData=M,_(P)},w.type="text/javascript",w.charset="UTF-8",function ms(){var v,m;return null!==(m=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==m?m:document}().appendChild(w)})}function Ar(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Qt=1e12;class up{constructor(m){this.auth=m,this.counter=Qt,this._widgets=new Map}render(m,_){const w=this.counter;return this._widgets.set(w,new Cr(m,this.auth.name,_||{})),this.counter++,w}reset(m){var _;const w=m||Qt;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Qt))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,u.Z)(function*(){var w;return null===(w=_._widgets.get(m||Qt))||void 0===w||w.execute(),""})()}}class Cr{constructor(m,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof m?document.getElementById(m):m;q(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function gs(v){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fs=Ar("rcb"),Tg=new dn(3e4,6e4);class sr{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Ue().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return q(function Qi(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Ue().grecaptcha):new Promise((w,M)=>{const P=Ue().setTimeout(()=>{M(Ce(m,"network-request-failed"))},Tg.get());Ue()[Fs]=()=>{Ue().clearTimeout(P),delete Ue()[Fs];const de=Ue().grecaptcha;if(!de)return void M(Ce(m,"internal-error"));const He=de.render;de.render=(st,Et)=>{const _t=He(st,Et);return this.counter++,_t},this.hostLanguage=_,w(de)},po(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Fs,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),M(Ce(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=Ue().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qr{load(m){return(0,u.Z)(function*(){return new up(m)})()}clearedOneInstance(){}}const xl="recaptcha",Kn={theme:"light",type:"image"};class Nu{constructor(m,_=Object.assign({},Kn),w){this.parameters=_,this.type=xl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xn(w),this.isInvisible="invisible"===this.parameters.size,q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof m?document.getElementById(m):m;q(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qr:new sr,this.validateStartingState()}verify(){var m=this;return(0,u.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),w=m.getAssertedRecaptcha();return w.getResponse(_)||new Promise(P=>{const X=de=>{!de||(m.tokenChangeListeners.delete(X),P(de))};m.tokenChangeListeners.add(X),m.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof m)m(_);else if("string"==typeof m){const w=Ue()[m];"function"==typeof w&&w(_)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,u.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,u.Z)(function*(){q(vt()&&!ir(),m.auth,"internal-error"),yield function Ml(){let v=null;return new Promise(m=>{"complete"!==document.readyState?(v=()=>m(),window.addEventListener("load",v)):m()}).catch(m=>{throw v&&window.removeEventListener("load",v),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function zr(v){return Ti.apply(this,arguments)}(m.auth);q(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fu{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=As._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function Mn(){return(Mn=(0,u.Z)(function*(v,m,_){const w=xn(v),M=yield Yo(w,m,(0,L.m9)(_));return new Fu(M,P=>at(w,P))})).apply(this,arguments)}function Nc(){return(Nc=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v);yield No(!1,w,"phone");const M=yield Yo(w.auth,m,(0,L.m9)(_));return new Fu(M,P=>Du(w,P))})).apply(this,arguments)}function Nr(){return(Nr=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v),M=yield Yo(w.auth,m,(0,L.m9)(_));return new Fu(M,P=>mc(w,P))})).apply(this,arguments)}function Yo(v,m,_){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,u.Z)(function*(v,m,_){var w;const M=yield _.verify();try{let P;if(q("string"==typeof M,v,"argument-error"),q(_.type===xl,v,"argument-error"),P="string"==typeof m?{phoneNumber:m}:m,"session"in P){const X=P.session;if("phoneNumber"in P)return q("enroll"===X.type,v,"internal-error"),(yield ih(v,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{q("signin"===X.type,v,"internal-error");const de=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return q(de,v,"missing-multi-factor-info"),(yield Ns(v,{mfaPendingCredential:X.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield bg(v,{phoneNumber:P.phoneNumber,recaptchaToken:M});return X}}finally{_._reset()}})).apply(this,arguments)}function Vu(){return(Vu=(0,u.Z)(function*(v,m){yield co((0,L.m9)(v),m)})).apply(this,arguments)}let Fc=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=xn(_)}verifyPhoneNumber(_,w){return Yo(this.auth,_,(0,L.m9)(w))}static credential(_,w){return As._fromVerification(_,w)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:M}=_;return w&&M?As._fromTokenResponse(w,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Vs(v,m){return m?se(m):(q(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Fr extends yi{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Oo(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Oo(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Oo(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function Bu(v){return uo(v.auth,new Fr(v),v.bypassAuthState)}function go(v){const{auth:m,user:_}=v;return q(_,m,"internal-error"),wa(_,new Fr(v),v.bypassAuthState)}function ah(v){return Na.apply(this,arguments)}function Na(){return(Na=(0,u.Z)(function*(v){const{auth:m,user:_}=v;return q(_,m,"internal-error"),co(_,new Fr(v),v.bypassAuthState)})).apply(this,arguments)}class Lc{constructor(m,_,w,M,P=!1){this.auth=m,this.resolver=w,this.user=M,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,u.Z)(function*(w,M){m.pendingPromise={resolve:w,reject:M};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(P){m.reject(P)}});return function(w,M){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,u.Z)(function*(){const{urlResponse:w,sessionId:M,postBody:P,tenantId:X,error:de,type:He}=m;if(de)return void _.reject(de);const st={auth:_.auth,requestUri:w,sessionId:M,tenantId:X||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(He)(st))}catch(Et){_.reject(Et)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Bu;case"linkViaPopup":case"linkViaRedirect":return ah;case"reauthViaPopup":case"reauthViaRedirect":return go;default:Re(this.auth,"internal-error")}}resolve(m){ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Uu=new dn(2e3,1e4);function kl(){return(kl=(0,u.Z)(function*(v,m,_){const w=xn(v);je(v,m,wi);const M=Vs(w,_);return new Qo(w,"signInViaPopup",m,M).executeNotNull()})).apply(this,arguments)}function lh(){return(lh=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v);je(w.auth,m,wi);const M=Vs(w.auth,_);return new Qo(w.auth,"reauthViaPopup",m,M,w).executeNotNull()})).apply(this,arguments)}function Fa(){return(Fa=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v);je(w.auth,m,wi);const M=Vs(w.auth,_);return new Qo(w.auth,"linkViaPopup",m,M,w).executeNotNull()})).apply(this,arguments)}let Qo=(()=>{class v extends Lc{constructor(_,w,M,P,X){super(_,w,P,X),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const w=yield _.execute();return q(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,u.Z)(function*(){ee(1===_.filter.length,"Popup operations only handle one event");const w=nn();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(Ce(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,M;this.pollId=null!==(M=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Uu.get())};_()}}return v.currentPopupAction=null,v})();const Bs=new Map;class La extends Lc{constructor(m,_,w=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,u.Z)(function*(){let w=Bs.get(_.auth._key());if(!w){try{const P=(yield function hp(v,m){return Us.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;w=()=>Promise.resolve(P)}catch(M){w=()=>Promise.reject(M)}Bs.set(_.auth._key(),w)}return _.bypassAuthState||Bs.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,w=this;return(0,u.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(w,m);if("unknown"!==m.type){if(m.eventId){const M=yield w.auth._redirectUserForId(m.eventId);if(M)return w.user=M,_().call(w,m);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Us(){return(Us=(0,u.Z)(function*(v,m){const _=Zn(m),w=Vc(v);if(!(yield w._isAvailable()))return!1;const M="true"===(yield w._get(_));return yield w._remove(_),M})).apply(this,arguments)}function ju(v,m){return or.apply(this,arguments)}function or(){return(or=(0,u.Z)(function*(v,m){return Vc(v)._set(Zn(m),"true")})).apply(this,arguments)}function Ba(v,m){Bs.set(v._key(),m)}function Vc(v){return se(v._redirectPersistence)}function Zn(v){return wr("pendingRedirect",v.config.apiKey,v.name)}function T(){return(T=(0,u.Z)(function*(v,m,_){const w=xn(v);je(v,m,wi);const M=Vs(w,_);return yield ju(M,w),M._openRedirect(w,m,"signInViaRedirect")})).apply(this,arguments)}function H(){return(H=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v);je(w.auth,m,wi);const M=Vs(w.auth,_);yield ju(M,w.auth);const P=yield lt(w);return M._openRedirect(w.auth,m,"reauthViaRedirect",P)})).apply(this,arguments)}function Ae(){return(Ae=(0,u.Z)(function*(v,m,_){const w=(0,L.m9)(v);je(w.auth,m,wi);const M=Vs(w.auth,_);yield No(!1,w,m.providerId),yield ju(M,w.auth);const P=yield lt(w);return M._openRedirect(w.auth,m,"linkViaRedirect",P)})).apply(this,arguments)}function ht(){return(ht=(0,u.Z)(function*(v,m){return yield xn(v)._initializationPromise,Dt(v,m,!1)})).apply(this,arguments)}function Dt(v,m){return At.apply(this,arguments)}function At(){return(At=(0,u.Z)(function*(v,m,_=!1){const w=xn(v),M=Vs(w,m),X=yield new La(w,M,_).execute();return X&&!_&&(delete X.user._redirectEventId,yield w._persistUserIfCurrent(X.user),yield w._setRedirectUser(null,m)),X})).apply(this,arguments)}function lt(v){return mt.apply(this,arguments)}function mt(){return(mt=(0,u.Z)(function*(v){const m=nn(`${v.uid}:::`);return v._redirectEventId=m,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),m})).apply(this,arguments)}class Rl{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(m,w)&&(_=!0,this.sendToConsumer(m,w),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Ua(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xi(v);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var w;if(m.error&&!xi(m)){const M=(null===(w=m.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(Ce(this.auth,M))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const w=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&w}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ai(m))}saveEventToCache(m){this.cachedEventUids.add(Ai(m)),this.lastProcessedEventTime=Date.now()}}function Ai(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(m=>m).join("-")}function xi({type:v,error:m}){return"unknown"===v&&"auth/no-auth-event"===m?.code}function Ol(v){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,u.Z)(function*(v,m={}){return zt(v,"GET","/v1/projects",m)})).apply(this,arguments)}const Xi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_s=/^https?/;function Bc(){return(Bc=(0,u.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:m}=yield Ol(v);for(const _ of m)try{if(sv(_))return}catch{}Re(v,"unauthorized-domain")})).apply(this,arguments)}function sv(v){const m=Fe(),{protocol:_,hostname:w}=new URL(m);if(v.startsWith("chrome-extension://")){const X=new URL(v);return""===X.hostname&&""===w?"chrome-extension:"===_&&v.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&X.hostname===w}if(!_s.test(_))return!1;if(Xi.test(v))return w===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(w)}const fp=new dn(3e4,6e4);function ja(){const v=Ue().___jsl;if(v?.H)for(const m of Object.keys(v.H))if(v.H[m].r=v.H[m].r||[],v.H[m].L=v.H[m].L||[],v.H[m].r=[...v.H[m].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let $u=null;function Sg(v){return $u=$u||function pp(v){return new Promise((m,_)=>{var w,M,P;function X(){ja(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{ja(),_(Ce(v,"network-request-failed"))},timeout:fp.get()})}if(null!==(M=null===(w=Ue().gapi)||void 0===w?void 0:w.iframes)&&void 0!==M&&M.Iframe)m(gapi.iframes.getContext());else{if(null===(P=Ue().gapi)||void 0===P||!P.load){const de=Ar("iframefcb");return Ue()[de]=()=>{gapi.load?X():_(Ce(v,"network-request-failed"))},po(`https://apis.google.com/js/api.js?onload=${de}`).catch(He=>_(He))}X()}}).catch(m=>{throw $u=null,m})}(v),$u}const IE=new dn(5e3,15e3),gp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ov=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xg(v){const m=v.config;q(m.authDomain,v,"auth-domain-config-required");const _=m.emulator?$n(m,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:m.apiKey,appName:v.name,v:pe.SDK_VERSION},M=ov.get(v.config.apiHost);M&&(w.eid=M);const P=v._getFrameworks();return P.length&&(w.fw=P.join(",")),`${_}?${(0,L.xO)(w).slice(1)}`}function Gu(){return Gu=(0,u.Z)(function*(v){const m=yield Sg(v),_=Ue().gapi;return q(_,v,"internal-error"),m.open({where:document.body,url:xg(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gp,dontclear:!0},w=>new Promise(function(){var M=(0,u.Z)(function*(P,X){yield w.restyle({setHideOnLeave:!1});const de=Ce(v,"network-request-failed"),He=Ue().setTimeout(()=>{X(de)},IE.get());function st(){Ue().clearTimeout(He),P(w)}w.ping(st).then(st,()=>{X(de)})});return function(P,X){return M.apply(this,arguments)}}()))}),Gu.apply(this,arguments)}const Pl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zu{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bp(v,m,_,w,M,P){q(v.config.authDomain,v,"auth-domain-config-required"),q(v.config.apiKey,v,"invalid-api-key");const X={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:w,v:pe.SDK_VERSION,eventId:M};if(m instanceof wi){m.setDefaultLanguage(v.languageCode),X.providerId=m.providerId||"",(0,L.xb)(m.getCustomParameters())||(X.customParameters=JSON.stringify(m.getCustomParameters()));for(const[He,st]of Object.entries(P||{}))X[He]=st}if(m instanceof lo){const He=m.getScopes().filter(st=>""!==st);He.length>0&&(X.scopes=He.join(","))}v.tenantId&&(X.tid=v.tenantId);const de=X;for(const He of Object.keys(de))void 0===de[He]&&delete de[He];return`${function dh({config:v}){return v.emulator?$n(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(de).slice(1)}`}const hh="webStorageSupport";class yo extends class Hs{constructor(m){this.factorId=m}_process(m,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,w);case"signin":return this._finalizeSignIn(m,_.credential);default:return Ie("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new yo(m)}_finalizeEnroll(m,_,w){return function Ig(v,m){return zt(v,"POST","/v2/accounts/mfaEnrollment:finalize",en(v,m))}(m,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function ps(v,m){return zt(v,"POST","/v2/accounts/mfaSignIn:finalize",en(v,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let av=(()=>{class v{constructor(){}static assertion(_){return yo._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var Uc="@firebase/auth";class lv{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(w=>{var M;m((null===(M=w)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function js(){return window}function ph(){return(ph=(0,u.Z)(function*(v,m,_){var w;const{BuildInfo:M}=js();ee(m.sessionId,"AuthEvent did not contain a session ID");const P=yield Ku(m.sessionId),X={};return Nn()?X.ibi=M.packageName:Ze()?X.apn=M.packageName:Re(v,"operation-not-supported-in-this-environment"),M.displayName&&(X.appDisplayName=M.displayName),X.sessionId=P,bp(v,_,m.type,void 0,null!==(w=m.eventId)&&void 0!==w?w:void 0,X)})).apply(this,arguments)}function qu(){return(qu=(0,u.Z)(function*(v){const{BuildInfo:m}=js(),_={};Nn()?_.iosBundleId=m.packageName:Ze()?_.androidPackageName=m.packageName:Re(v,"operation-not-supported-in-this-environment"),yield Ol(v,_)})).apply(this,arguments)}function ys(){return(ys=(0,u.Z)(function*(v,m,_){const{cordova:w}=js();let M=()=>{};try{yield new Promise((P,X)=>{let de=null;function He(){var _t;P();const xr=null===(_t=w.plugins.browsertab)||void 0===_t?void 0:_t.close;"function"==typeof xr&&xr(),"function"==typeof _?.close&&_.close()}function st(){de||(de=window.setTimeout(()=>{X(Ce(v,"redirect-cancelled-by-user"))},2e3))}function Et(){"visible"===document?.visibilityState&&st()}m.addPassiveListener(He),document.addEventListener("resume",st,!1),Ze()&&document.addEventListener("visibilitychange",Et,!1),M=()=>{m.removePassiveListener(He),document.removeEventListener("resume",st,!1),document.removeEventListener("visibilitychange",Et,!1),de&&window.clearTimeout(de)}})}finally{M()}})).apply(this,arguments)}function Ku(v){return mh.apply(this,arguments)}function mh(){return(mh=(0,u.Z)(function*(v){const m=gh(v),_=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(_)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function gh(v){if(ee(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const m=new ArrayBuffer(v.length),_=new Uint8Array(m);for(let w=0;w<v.length;w++)_[w]=v.charCodeAt(w);return _}!function cv(v){(0,pe._registerComponent)(new oe.wA("auth",(m,{options:_})=>{const w=m.getProvider("app").getImmediate(),M=m.getProvider("heartbeat"),{apiKey:P,authDomain:X}=w.options;return((de,He)=>{q(P&&!P.includes(":"),"invalid-api-key",{appName:de.name}),q(!X?.includes(":"),"argument-error",{appName:de.name});const st={apiKey:P,authDomain:X,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zi(v)},Et=new sc(de,He,st);return function fe(v,m){const _=m?.persistence||[],w=(Array.isArray(_)?_:[_]).map(se);m?.errorMap&&v._updateErrorMap(m.errorMap),v._initializeWithPersistence(w,m?.popupRedirectResolver)}(Et,_),Et})(w,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,w)=>{m.getProvider("auth-internal").initialize()})),(0,pe._registerComponent)(new oe.wA("auth-internal",m=>{const _=xn(m.getProvider("auth").getImmediate());return new lv(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,pe.registerVersion)(Uc,"0.20.5",function Cp(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,pe.registerVersion)(Uc,"0.20.5","esm2017")}("Browser");class uv extends Rl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(m)),super.onEvent(m)}initialized(){var m=this;return(0,u.Z)(function*(){yield m.initPromise})()}}function za(v){return qa.apply(this,arguments)}function qa(){return(qa=(0,u.Z)(function*(v){const m=yield _h()._get(yh(v));return m&&(yield _h()._remove(yh(v))),m})).apply(this,arguments)}function SE(){const v=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const w=Math.floor(Math.random()*m.length);v.push(m.charAt(w))}return v.join("")}function _h(){return se(ho)}function yh(v){return wr("authEvent",v.config.apiKey,v.name)}function Sp(v){if(!v?.includes("?"))return{};const[m,..._]=v.split("?");return(0,L.zd)(_.join("?"))}function bh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}function Wa(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Ng(v=(0,L.z$)()){return!("file:"!==Wa()&&"ionic:"!==Wa()&&"capacitor:"!==Wa()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function gv(){try{const v=self.localStorage,m=nn();if(v)return v.setItem(m,"1"),v.removeItem(m),!function Fl(v=(0,L.z$)()){return function wh(){return(0,L.w1)()&&11===document?.documentMode}()||function mv(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch{return Fg()&&(0,L.hl)()}return!1}function Fg(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ll(){return(function Mp(){return"http:"===Wa()||"https:"===Wa()}()||(0,L.ru)()||Ng())&&!function pv(){return(0,L.b$)()||(0,L.UG)()}()&&gv()&&!Fg()}function Eh(){return Ng()&&typeof document<"u"}function Jo(){return(Jo=(0,u.Z)(function*(){return!!Eh()&&new Promise(v=>{const m=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),v(!0)})})})).apply(this,arguments)}const Wr={LOCAL:"local",NONE:"none",SESSION:"session"},Ka=q,Lg="persistence";function kp(v){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,u.Z)(function*(v){yield v._initializationPromise;const m=Op(),_=wr(Lg,v.config.apiKey,v.name);m&&m.setItem(_,v._getPersistence())})).apply(this,arguments)}function Op(){var v;try{return(null===(v=function jc(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Ih=q;class $s{constructor(){this.browserResolver=se(class wp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yi,this._completeRedirectFn=Dt,this._overrideRedirectResult=Ba}_openPopup(m,_,w,M){var P=this;return(0,u.Z)(function*(){var X;ee(null===(X=P.eventManagers[m._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const de=bp(m,_,w,Fe(),M);return function vp(v,m,_,w=500,M=600){const P=Math.max((window.screen.availHeight-M)/2,0).toString(),X=Math.max((window.screen.availWidth-w)/2,0).toString();let de="";const He=Object.assign(Object.assign({},Pl),{width:w.toString(),height:M.toString(),top:P,left:X}),st=(0,L.z$)().toLowerCase();_&&(de=Tr(st)?"_blank":_),Sn(st)&&(m=m||"http://localhost",He.scrollbars="yes");const Et=Object.entries(He).reduce((xr,[gr,zc])=>`${xr}${gr}=${zc},`,"");if(function qn(v=(0,L.z$)()){var m;return Nn(v)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(st)&&"_self"!==de)return function Mg(v,m){const _=document.createElement("a");_.href=v,_.target=m;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(m||"",de),new zu(null);const _t=window.open(m||"",de,Et);q(_t,v,"popup-blocked");try{_t.focus()}catch{}return new zu(_t)}(m,de,nn())})()}_openRedirect(m,_,w,M){var P=this;return(0,u.Z)(function*(){return yield P._originValidation(m),function Wt(v){Ue().location.href=v}(bp(m,_,w,Fe(),M)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:M,promise:P}=this.eventManagers[_];return M?Promise.resolve(M):(ee(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(m);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(m){var _=this;return(0,u.Z)(function*(){const w=yield function uh(v){return Gu.apply(this,arguments)}(m),M=new Rl(m);return w.register("authEvent",P=>(q(P?.authEvent,m,"invalid-auth-event"),{status:M.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:M},_.iframes[m._key()]=w,M})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(hh,{type:hh},M=>{var P;const X=null===(P=M?.[0])||void 0===P?void 0:P[hh];void 0!==X&&_(!!X),Re(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ch(v){return Bc.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return An()||er()||Nn()}}),this.cordovaResolver=se(class Ap{constructor(){this._redirectPersistence=Yi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Dt,this._overrideRedirectResult=Ba}_initialize(m){var _=this;return(0,u.Z)(function*(){const w=m._key();let M=_.eventManagers.get(w);return M||(M=new uv(m),_.eventManagers.set(w,M),_.attachCallbackListeners(m,M)),M})()}_openPopup(m){Re(m,"operation-not-supported-in-this-environment")}_openRedirect(m,_,w,M){var P=this;return(0,u.Z)(function*(){!function Hc(v){var m,_,w,M,P,X,de,He,st,Et;const _t=js();q("function"==typeof(null===(m=_t?.universalLinks)||void 0===m?void 0:m.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof(null===(_=_t?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q("function"==typeof(null===(P=null===(M=null===(w=_t?.cordova)||void 0===w?void 0:w.plugins)||void 0===M?void 0:M.browsertab)||void 0===P?void 0:P.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(He=null===(de=null===(X=_t?.cordova)||void 0===X?void 0:X.plugins)||void 0===de?void 0:de.browsertab)||void 0===He?void 0:He.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(Et=null===(st=_t?.cordova)||void 0===st?void 0:st.InAppBrowser)||void 0===Et?void 0:Et.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const X=yield P._initialize(m);yield X.initialized(),X.resetRedirect(),function Va(){Bs.clear()}(),yield P._originValidation(m);const de=function dv(v,m,_=null){return{type:m,eventId:_,urlResponse:null,sessionId:SE(),postBody:null,tenantId:v.tenantId,error:Ce(v,"no-auth-event")}}(m,w,M);yield function Dp(v,m){return _h()._set(yh(v),m)}(m,de);const He=yield function Rg(v,m,_){return ph.apply(this,arguments)}(m,de,_),st=yield function Wu(v){const{cordova:m}=js();return new Promise(_=>{m.plugins.browsertab.isAvailable(w=>{let M=null;w?m.plugins.browsertab.openUrl(v):M=m.InAppBrowser.open(v,function pa(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(M)})})}(He);return function Og(v,m,_){return ys.apply(this,arguments)}(m,X,st)})()}_isIframeWebStorageSupported(m,_){throw new Error("Method not implemented.")}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function DE(v){return qu.apply(this,arguments)}(m)),this.originValidationPromises[_]}attachCallbackListeners(m,_){const{universalLinks:w,handleOpenURL:M,BuildInfo:P}=js(),X=setTimeout((0,u.Z)(function*(){yield za(m),_.onEvent(bh())}),500),de=function(){var Et=(0,u.Z)(function*(_t){clearTimeout(X);const xr=yield za(m);let gr=null;xr&&_t?.url&&(gr=function Tp(v,m){var _,w;const M=function AE(v){const m=Sp(v),_=m.link?decodeURIComponent(m.link):void 0,w=Sp(_).link,M=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return Sp(M).link||M||w||_||v}(m);if(M.includes("/__/auth/callback")){const P=Sp(M),X=P.firebaseError?function Pg(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,de=null===(w=null===(_=X?.code)||void 0===_?void 0:_.split("auth/"))||void 0===w?void 0:w[1],He=de?Ce(de):null;return He?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:He,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:M,postBody:null}}return null}(xr,_t.url)),_.onEvent(gr||bh())});return function(xr){return Et.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,de);const He=M,st=`${P.packageName.toLowerCase()}://`;js().handleOpenURL=function(){var Et=(0,u.Z)(function*(_t){if(_t.toLowerCase().startsWith(st)&&de({url:_t}),"function"==typeof He)try{He(_t)}catch(xr){console.error(xr)}});return function(_t){return Et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Yi,this._completeRedirectFn=Dt,this._overrideRedirectResult=Ba}_initialize(m){var _=this;return(0,u.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,_,w,M){var P=this;return(0,u.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(m,_,w,M)})()}_openRedirect(m,_,w,M){var P=this;return(0,u.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(m,_,w,M)})()}_isIframeWebStorageSupported(m,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,_)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return Eh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ih(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,u.Z)(function*(){if(m.underlyingResolver)return;const _=yield function Zu(){return Jo.apply(this,arguments)}();m.underlyingResolver=_?m.cordovaResolver:m.browserResolver})()}}function Yu(v){return v.unwrap()}function $c(v){return Hg(v)}function Hg(v){const{_tokenResponse:m}=v instanceof L.ZR?v.customData:v;if(!m)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return Fc.credentialFromResult(v);const _=m.providerId;if(!_||"password"===_)return null;let w;switch(_){case"google.com":w=yl;break;case"facebook.com":w=Iu;break;case"github.com":w=vl;break;case"twitter.com":w=dc;break;default:const{oauthIdToken:M,oauthAccessToken:P,oauthTokenSecret:X,pendingToken:de,nonce:He}=m;return P||X||M||de?de?_.startsWith("saml.")?ba._create(_,de):Ss._fromParams({providerId:_,signInMethod:_,pendingToken:de,idToken:M,accessToken:P}):new va(_).credential({idToken:M,accessToken:P,rawNonce:He}):null}return v instanceof L.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function En(v,m){return m.catch(_=>{throw _ instanceof L.ZR&&function Ug(v,m){var _,w;const M=null===(_=m.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=m)||void 0===w?void 0:w.code))m.resolver=new Pp(v,function fr(v,m){var _;const w=(0,L.m9)(v),M=m;return q(m.customData.operationType,w,"argument-error"),q(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),$o._fromError(w,M)}(v,m));else if(M){const P=Hg(m),X=m;P&&(X.credential=P,X.tenantId=M.tenantId||void 0,X.email=M.email||void 0,X.phoneNumber=M.phoneNumber||void 0)}}(v,_),_}).then(_=>{const M=_.user;return{operationType:_.operationType,credential:$c(_),additionalUserInfo:rp(_),user:Tn.getOrCreate(M)}})}function Qu(v,m){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,u.Z)(function*(v,m){const _=yield m;return{verificationId:_.verificationId,confirm:w=>En(v,_.confirm(w))}})).apply(this,arguments)}class Pp{constructor(m,_){this.resolver=_,this.auth=function Bg(v){return v.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return En(Yu(this.auth),this.resolver.resolveSignIn(m))}}class Tn{constructor(m){this._delegate=m,this.multiFactor=function op(v){const m=(0,L.m9)(v);return Go.has(m)||Go.set(m,sp._fromUser(m)),Go.get(m)}(m)}static getOrCreate(m){return Tn.USER_MAP.has(m)||Tn.USER_MAP.set(m,new Tn(m)),Tn.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var _=this;return(0,u.Z)(function*(){return En(_.auth,Du(_._delegate,m))})()}linkWithPhoneNumber(m,_){var w=this;return(0,u.Z)(function*(){return Qu(w.auth,function vn(v,m,_){return Nc.apply(this,arguments)}(w._delegate,m,_))})()}linkWithPopup(m){var _=this;return(0,u.Z)(function*(){return En(_.auth,function Lt(v,m,_){return Fa.apply(this,arguments)}(_._delegate,m,$s))})()}linkWithRedirect(m){var _=this;return(0,u.Z)(function*(){return yield kp(xn(_.auth)),function te(v,m,_){return function ue(v,m,_){return Ae.apply(this,arguments)}(v,m,_)}(_._delegate,m,$s)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var _=this;return(0,u.Z)(function*(){return En(_.auth,mc(_._delegate,m))})()}reauthenticateWithPhoneNumber(m,_){return Qu(this.auth,function Zo(v,m,_){return Nr.apply(this,arguments)}(this._delegate,m,_))}reauthenticateWithPopup(m){return En(this.auth,function dp(v,m,_){return lh.apply(this,arguments)}(this._delegate,m,$s))}reauthenticateWithRedirect(m){var _=this;return(0,u.Z)(function*(){return yield kp(xn(_.auth)),function S(v,m,_){return function R(v,m,_){return H.apply(this,arguments)}(v,m,_)}(_._delegate,m,$s)})()}sendEmailVerification(m){return function Il(v,m){return Au.apply(this,arguments)}(this._delegate,m)}unlink(m){var _=this;return(0,u.Z)(function*(){return yield function fc(v,m){return Po.apply(this,arguments)}(_._delegate,m),_})()}updateEmail(m){return function Ec(v,m){return Cc((0,L.m9)(v),m,null)}(this._delegate,m)}updatePassword(m){return function Mu(v,m){return Cc((0,L.m9)(v),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function Lu(v,m){return Vu.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function bc(v,m){return wc.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,_){return function Ma(v,m,_){return Dl.apply(this,arguments)}(this._delegate,m,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Tn.USER_MAP=new WeakMap;const ea=q;let Xu=(()=>{class v{constructor(_,w){if(this.app=_,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=_.options;ea(M,"invalid-api-key",{appName:_.name}),ea(M,"invalid-api-key",{appName:_.name});const P=typeof window<"u"?$s:void 0;this._delegate=w.initialize({options:{persistence:_v(M,_.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Tn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,w){!function Ro(v,m,_){const w=xn(v);q(w._canInitEmulator,w,"emulator-config-failed"),q(/^https?:\/\//.test(m),w,"invalid-emulator-scheme");const M=!!_?.disableWarnings,P=tr(m),{host:X,port:de}=function ga(v){const m=tr(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(m.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(w);if(M){const P=M[1];return{host:P,port:Ts(w.substr(P.length+1))}}{const[P,X]=w.split(":");return{host:P,port:Ts(X)}}}(m);w.config.emulator={url:`${P}//${X}${null===de?"":`:${de}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:X,port:de,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Gr(){function v(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,w)}applyActionCode(_){return function Cl(v,m){return Da.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Ta(this._delegate,_)}confirmPasswordReset(_,w){return function Bo(v,m,_){return Ci.apply(this,arguments)}(this._delegate,_,w)}createUserWithEmailAndPassword(_,w){var M=this;return(0,u.Z)(function*(){return En(M._delegate,function hr(v,m,_){return Wi.apply(this,arguments)}(M._delegate,_,w))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function xa(v,m){return yc.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Xd(v,m){return"EMAIL_SIGNIN"===uc.parseLink(m)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,u.Z)(function*(){ea(Ll(),_._delegate,"operation-not-supported-in-this-environment");const w=yield function Ye(v,m){return ht.apply(this,arguments)}(_._delegate,$s);return w?En(_._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function fv(v,m){xn(v)._logFramework(m)}(this._delegate,_)}onAuthStateChanged(_,w,M){const{next:P,error:X,complete:de}=Ju(_,w,M);return this._delegate.onAuthStateChanged(P,X,de)}onIdTokenChanged(_,w,M){const{next:P,error:X,complete:de}=Ju(_,w,M);return this._delegate.onIdTokenChanged(P,X,de)}sendSignInLinkToEmail(_,w){return function Uo(v,m,_){return Ki.apply(this,arguments)}(this._delegate,_,w)}sendPasswordResetEmail(_,w){return function Fn(v,m,_){return Ia.apply(this,arguments)}(this._delegate,_,w||void 0)}setPersistence(_){var w=this;return(0,u.Z)(function*(){let M;switch(function Vg(v,m){Ka(Object.values(Wr).includes(m),v,"invalid-persistence-type"),(0,L.b$)()?Ka(m!==Wr.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?Ka(m===Wr.NONE,v,"unsupported-persistence-type"):Fg()?Ka(m===Wr.NONE||m===Wr.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):Ka(m===Wr.NONE||gv(),v,"unsupported-persistence-type")}(w._delegate,_),_){case Wr.SESSION:M=Yi;break;case Wr.LOCAL:M=(yield se(Ko)._isAvailable())?Ko:ho;break;case Wr.NONE:M=tn;break;default:return Re("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return En(this._delegate,function jn(v){return Yd.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return En(this._delegate,at(this._delegate,_))}signInWithCustomToken(_){return En(this._delegate,function gc(v,m){return Se.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,w){return En(this._delegate,function Su(v,m,_){return at((0,L.m9)(v),Cu.credential(m,_))}(this._delegate,_,w))}signInWithEmailLink(_,w){return En(this._delegate,function Jd(v,m,_){return Sa.apply(this,arguments)}(this._delegate,_,w))}signInWithPhoneNumber(_,w){return Qu(this._delegate,function oh(v,m,_){return Mn.apply(this,arguments)}(this._delegate,_,w))}signInWithPopup(_){var w=this;return(0,u.Z)(function*(){return ea(Ll(),w._delegate,"operation-not-supported-in-this-environment"),En(w._delegate,function Hu(v,m,_){return kl.apply(this,arguments)}(w._delegate,_,$s))})()}signInWithRedirect(_){var w=this;return(0,u.Z)(function*(){return ea(Ll(),w._delegate,"operation-not-supported-in-this-environment"),yield kp(w._delegate),function pr(v,m,_){return function _o(v,m,_){return T.apply(this,arguments)}(v,m,_)}(w._delegate,_,$s)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function ep(v,m){return ks.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Wr,v})();function Ju(v,m,_){let w=v;"function"!=typeof v&&({next:w,error:m,complete:_}=v);const M=w;return{next:X=>M(X&&Tn.getOrCreate(X)),error:m,complete:_}}function _v(v,m){const _=function Ch(v,m){const _=Op();if(!_)return[];const w=wr(Lg,v,m);switch(_.getItem(w)){case Wr.NONE:return[tn];case Wr.LOCAL:return[Ko,Yi];case Wr.SESSION:return[Yi];default:return[]}}(v,m);if(typeof self<"u"&&!_.includes(Ko)&&_.push(Ko),typeof window<"u")for(const w of[ho,Yi])_.includes(w)||_.push(w);return _.includes(tn)||_.push(tn),_}class Th{constructor(){this.providerId="phone",this._delegate=new Fc(Yu(re.Z.auth()))}static credential(m,_){return Fc.credential(m,_)}verifyPhoneNumber(m,_){return this._delegate.verifyPhoneNumber(m,_)}unwrap(){return this._delegate}}Th.PHONE_SIGN_IN_METHOD=Fc.PHONE_SIGN_IN_METHOD,Th.PROVIDER_ID=Fc.PROVIDER_ID;const Sh=q;class Gc{constructor(m,_,w=re.Z.app()){var M;Sh(null===(M=w.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Nu(m,_,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function jg(v){v.INTERNAL.registerComponent(new oe.wA("auth-compat",m=>{const _=m.getProvider("app-compat").getImmediate(),w=m.getProvider("auth");return new Xu(_,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Cu,FacebookAuthProvider:Iu,GithubAuthProvider:vl,GoogleAuthProvider:yl,OAuthProvider:va,SAMLAuthProvider:Dn,PhoneAuthProvider:Th,PhoneMultiFactorGenerator:av,RecaptchaVerifier:Gc,TwitterAuthProvider:dc,Auth:Xu,AuthCredential:yi,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.18")}(re.Z)},8306:(ft,xe,V)=>{V.d(xe,{y:()=>z});var u=V(930),re=V(727),L=V(8822),pe=V(4671);var oe=V(2416),me=V(576),ve=V(2806);let z=(()=>{class Me{constructor($e){$e&&(this._subscribe=$e)}lift($e){const ge=new Me;return ge.source=this,ge.operator=$e,ge}subscribe($e,ge,be){const Je=function Ge(Me){return Me&&Me instanceof u.Lv||function ne(Me){return Me&&(0,me.m)(Me.next)&&(0,me.m)(Me.error)&&(0,me.m)(Me.complete)}(Me)&&(0,re.Nn)(Me)}($e)?$e:new u.Hp($e,ge,be);return(0,ve.x)(()=>{const{operator:it,source:Re}=this;Je.add(it?it.call(Je,Re):Re?this._subscribe(Je):this._trySubscribe(Je))}),Je}_trySubscribe($e){try{return this._subscribe($e)}catch(ge){$e.error(ge)}}forEach($e,ge){return new(ge=G(ge))((be,Je)=>{const it=new u.Hp({next:Re=>{try{$e(Re)}catch(Ce){Je(Ce),it.unsubscribe()}},error:Je,complete:be});this.subscribe(it)})}_subscribe($e){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe($e)}[L.L](){return this}pipe(...$e){return function ye(Me){return 0===Me.length?pe.y:1===Me.length?Me[0]:function($e){return Me.reduce((ge,be)=>be(ge),$e)}}($e)(this)}toPromise($e){return new($e=G($e))((ge,be)=>{let Je;this.subscribe(it=>Je=it,it=>be(it),()=>ge(Je))})}}return Me.create=ke=>new Me(ke),Me})();function G(Me){var ke;return null!==(ke=Me??oe.v.Promise)&&void 0!==ke?ke:Promise}},7579:(ft,xe,V)=>{V.d(xe,{x:()=>oe});var u=V(8306),re=V(727);const pe=(0,V(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=V(8737),ye=V(2806);let oe=(()=>{class ve extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const ne=new me(this,this);return ne.operator=G,ne}_throwIfClosed(){if(this.closed)throw new pe}next(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(G)}})}error(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:ne}=this;for(;ne.length;)ne.shift().error(G)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:ne,isStopped:Ge,observers:Me}=this;return ne||Ge?re.Lc:(this.currentObservers=null,Me.push(G),new re.w0(()=>{this.currentObservers=null,(0,le.P)(Me,G)}))}_checkFinalizedStatuses(G){const{hasError:ne,thrownError:Ge,isStopped:Me}=this;ne?G.error(Ge):Me&&G.complete()}asObservable(){const G=new u.y;return G.source=this,G}}return ve.create=(z,G)=>new me(z,G),ve})();class me extends oe{constructor(z,G){super(),this.destination=z,this.source=G}next(z){var G,ne;null===(ne=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===ne||ne.call(G,z)}error(z){var G,ne;null===(ne=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===ne||ne.call(G,z)}complete(){var z,G;null===(G=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===G||G.call(z)}_subscribe(z){var G,ne;return null!==(ne=null===(G=this.source)||void 0===G?void 0:G.subscribe(z))&&void 0!==ne?ne:re.Lc}}},930:(ft,xe,V)=>{V.d(xe,{Hp:()=>$e,Lv:()=>ne});var u=V(576),re=V(727),L=V(2416),pe=V(7849),le=V(5032);const ye=ve("C",void 0,void 0);function ve(Re,Ce,Te){return{kind:Re,value:Ce,error:Te}}var z=V(3410),G=V(2806);class ne extends re.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,re.Nn)(Ce)&&Ce.add(this)):this.destination=it}static create(Ce,Te,je){return new $e(Ce,Te,je)}next(Ce){this.isStopped?Je(function me(Re){return ve("N",Re,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?Je(function oe(Re){return ve("E",void 0,Re)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?Je(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Me(Re,Ce){return Ge.call(Re,Ce)}class ke{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Ce)}catch(je){ge(je)}}error(Ce){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Ce)}catch(je){ge(je)}else ge(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(Te){ge(Te)}}}class $e extends ne{constructor(Ce,Te,je){let ze;if(super(),(0,u.m)(Ce)||!Ce)ze={next:Ce??void 0,error:Te??void 0,complete:je??void 0};else{let q;this&&L.v.useDeprecatedNextContext?(q=Object.create(Ce),q.unsubscribe=()=>this.unsubscribe(),ze={next:Ce.next&&Me(Ce.next,q),error:Ce.error&&Me(Ce.error,q),complete:Ce.complete&&Me(Ce.complete,q)}):ze=Ce}this.destination=new ke(ze)}}function ge(Re){L.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Re):(0,pe.h)(Re)}function Je(Re,Ce){const{onStoppedNotification:Te}=L.v;Te&&z.z.setTimeout(()=>Te(Re,Ce))}const it={closed:!0,next:le.Z,error:function be(Re){throw Re},complete:le.Z}},727:(ft,xe,V)=>{V.d(xe,{Lc:()=>ye,w0:()=>le,Nn:()=>oe});var u=V(576);const L=(0,V(3888).d)(ve=>function(G){ve(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((ne,Ge)=>`${Ge+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var pe=V(8737);class le{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Me of G)Me.remove(this);else G.remove(this);const{initialTeardown:ne}=this;if((0,u.m)(ne))try{ne()}catch(Me){z=Me instanceof L?Me.errors:[Me]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Me of Ge)try{me(Me)}catch(ke){z=z??[],ke instanceof L?z=[...z,...ke.errors]:z.push(ke)}}if(z)throw new L(z)}}add(z){var G;if(z&&z!==this)if(this.closed)me(z);else{if(z instanceof le){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(z)}}_hasParent(z){const{_parentage:G}=this;return G===z||Array.isArray(G)&&G.includes(z)}_addParent(z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(z),G):G?[G,z]:z}_removeParent(z){const{_parentage:G}=this;G===z?this._parentage=null:Array.isArray(G)&&(0,pe.P)(G,z)}remove(z){const{_finalizers:G}=this;G&&(0,pe.P)(G,z),z instanceof le&&z._removeParent(this)}}le.EMPTY=(()=>{const ve=new le;return ve.closed=!0,ve})();const ye=le.EMPTY;function oe(ve){return ve instanceof le||ve&&"closed"in ve&&(0,u.m)(ve.remove)&&(0,u.m)(ve.add)&&(0,u.m)(ve.unsubscribe)}function me(ve){(0,u.m)(ve)?ve():ve.unsubscribe()}},2416:(ft,xe,V)=>{V.d(xe,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ft,xe,V)=>{V.d(xe,{E:()=>re});const re=new(V(8306).y)(le=>le.complete())},8996:(ft,xe,V)=>{V.d(xe,{D:()=>Ce});var u=V(8421),re=V(5363),L=V(9468),ye=V(8306),me=V(2202),ve=V(576),z=V(9672);function ne(Te,je){if(!Te)throw new Error("Iterable cannot be null");return new ye.y(ze=>{(0,z.f)(ze,je,()=>{const q=Te[Symbol.asyncIterator]();(0,z.f)(ze,je,()=>{q.next().then(Ie=>{Ie.done?ze.complete():ze.next(Ie.value)})},0,!0)})})}var Ge=V(3670),Me=V(8239),ke=V(1144),$e=V(6495),ge=V(2206),be=V(4532),Je=V(3260);function Ce(Te,je){return je?function Re(Te,je){if(null!=Te){if((0,Ge.c)(Te))return function pe(Te,je){return(0,u.Xf)(Te).pipe((0,L.R)(je),(0,re.Q)(je))}(Te,je);if((0,ke.z)(Te))return function oe(Te,je){return new ye.y(ze=>{let q=0;return je.schedule(function(){q===Te.length?ze.complete():(ze.next(Te[q++]),ze.closed||this.schedule())})})}(Te,je);if((0,Me.t)(Te))return function le(Te,je){return(0,u.Xf)(Te).pipe((0,L.R)(je),(0,re.Q)(je))}(Te,je);if((0,ge.D)(Te))return ne(Te,je);if((0,$e.T)(Te))return function G(Te,je){return new ye.y(ze=>{let q;return(0,z.f)(ze,je,()=>{q=Te[me.h](),(0,z.f)(ze,je,()=>{let Ie,ee;try{({value:Ie,done:ee}=q.next())}catch(ae){return void ze.error(ae)}ee?ze.complete():ze.next(Ie)},0,!0)}),()=>(0,ve.m)(q?.return)&&q.return()})}(Te,je);if((0,Je.L)(Te))return function it(Te,je){return ne((0,Je.Q)(Te),je)}(Te,je)}throw(0,be.z)(Te)}(Te,je):(0,u.Xf)(Te)}},8421:(ft,xe,V)=>{V.d(xe,{Xf:()=>Ge});var u=V(655),re=V(1144),L=V(8239),pe=V(8306),le=V(3670),ye=V(2206),oe=V(4532),me=V(6495),ve=V(3260),z=V(576),G=V(7849),ne=V(8822);function Ge(Re){if(Re instanceof pe.y)return Re;if(null!=Re){if((0,le.c)(Re))return function Me(Re){return new pe.y(Ce=>{const Te=Re[ne.L]();if((0,z.m)(Te.subscribe))return Te.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,re.z)(Re))return function ke(Re){return new pe.y(Ce=>{for(let Te=0;Te<Re.length&&!Ce.closed;Te++)Ce.next(Re[Te]);Ce.complete()})}(Re);if((0,L.t)(Re))return function $e(Re){return new pe.y(Ce=>{Re.then(Te=>{Ce.closed||(Ce.next(Te),Ce.complete())},Te=>Ce.error(Te)).then(null,G.h)})}(Re);if((0,ye.D)(Re))return be(Re);if((0,me.T)(Re))return function ge(Re){return new pe.y(Ce=>{for(const Te of Re)if(Ce.next(Te),Ce.closed)return;Ce.complete()})}(Re);if((0,ve.L)(Re))return function Je(Re){return be((0,ve.Q)(Re))}(Re)}throw(0,oe.z)(Re)}function be(Re){return new pe.y(Ce=>{(function it(Re,Ce){var Te,je,ze,q;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Te=(0,u.KL)(Re);!(je=yield Te.next()).done;)if(Ce.next(je.value),Ce.closed)return}catch(Ie){ze={error:Ie}}finally{try{je&&!je.done&&(q=Te.return)&&(yield q.call(Te))}finally{if(ze)throw ze.error}}Ce.complete()})})(Re,Ce).catch(Te=>Ce.error(Te))})}},6451:(ft,xe,V)=>{V.d(xe,{T:()=>ye});var u=V(8189),re=V(8421),L=V(515),pe=V(3269),le=V(8996);function ye(...oe){const me=(0,pe.yG)(oe),ve=(0,pe._6)(oe,1/0),z=oe;return z.length?1===z.length?(0,re.Xf)(z[0]):(0,u.J)(ve)((0,le.D)(z,me)):L.E}},5403:(ft,xe,V)=>{V.d(xe,{x:()=>re});var u=V(930);function re(pe,le,ye,oe,me){return new L(pe,le,ye,oe,me)}class L extends u.Lv{constructor(le,ye,oe,me,ve,z){super(le),this.onFinalize=ve,this.shouldUnsubscribe=z,this._next=ye?function(G){try{ye(G)}catch(ne){le.error(ne)}}:super._next,this._error=me?function(G){try{me(G)}catch(ne){le.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(G){le.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(ft,xe,V)=>{V.d(xe,{U:()=>L});var u=V(4482),re=V(5403);function L(pe,le){return(0,u.e)((ye,oe)=>{let me=0;ye.subscribe((0,re.x)(oe,ve=>{oe.next(pe.call(le,ve,me++))}))})}},8189:(ft,xe,V)=>{V.d(xe,{J:()=>L});var u=V(5577),re=V(4671);function L(pe=1/0){return(0,u.z)(re.y,pe)}},5577:(ft,xe,V)=>{V.d(xe,{z:()=>me});var u=V(4004),re=V(8421),L=V(4482),pe=V(9672),le=V(5403),oe=V(576);function me(ve,z,G=1/0){return(0,oe.m)(z)?me((ne,Ge)=>(0,u.U)((Me,ke)=>z(ne,Me,Ge,ke))((0,re.Xf)(ve(ne,Ge))),G):("number"==typeof z&&(G=z),(0,L.e)((ne,Ge)=>function ye(ve,z,G,ne,Ge,Me,ke,$e){const ge=[];let be=0,Je=0,it=!1;const Re=()=>{it&&!ge.length&&!be&&z.complete()},Ce=je=>be<ne?Te(je):ge.push(je),Te=je=>{Me&&z.next(je),be++;let ze=!1;(0,re.Xf)(G(je,Je++)).subscribe((0,le.x)(z,q=>{Ge?.(q),Me?Ce(q):z.next(q)},()=>{ze=!0},void 0,()=>{if(ze)try{for(be--;ge.length&&be<ne;){const q=ge.shift();ke?(0,pe.f)(z,ke,()=>Te(q)):Te(q)}Re()}catch(q){z.error(q)}}))};return ve.subscribe((0,le.x)(z,Ce,()=>{it=!0,Re()})),()=>{$e?.()}}(ne,Ge,ve,G)))}},5363:(ft,xe,V)=>{V.d(xe,{Q:()=>pe});var u=V(9672),re=V(4482),L=V(5403);function pe(le,ye=0){return(0,re.e)((oe,me)=>{oe.subscribe((0,L.x)(me,ve=>(0,u.f)(me,le,()=>me.next(ve),ye),()=>(0,u.f)(me,le,()=>me.complete(),ye),ve=>(0,u.f)(me,le,()=>me.error(ve),ye)))})}},3099:(ft,xe,V)=>{V.d(xe,{B:()=>le});var u=V(8421),re=V(7579),L=V(930),pe=V(4482);function le(oe={}){const{connector:me=(()=>new re.x),resetOnError:ve=!0,resetOnComplete:z=!0,resetOnRefCountZero:G=!0}=oe;return ne=>{let Ge,Me,ke,$e=0,ge=!1,be=!1;const Je=()=>{Me?.unsubscribe(),Me=void 0},it=()=>{Je(),Ge=ke=void 0,ge=be=!1},Re=()=>{const Ce=Ge;it(),Ce?.unsubscribe()};return(0,pe.e)((Ce,Te)=>{$e++,!be&&!ge&&Je();const je=ke=ke??me();Te.add(()=>{$e--,0===$e&&!be&&!ge&&(Me=ye(Re,G))}),je.subscribe(Te),!Ge&&$e>0&&(Ge=new L.Hp({next:ze=>je.next(ze),error:ze=>{be=!0,Je(),Me=ye(it,ve,ze),je.error(ze)},complete:()=>{ge=!0,Je(),Me=ye(it,z),je.complete()}}),(0,u.Xf)(Ce).subscribe(Ge))})(ne)}}function ye(oe,me,...ve){if(!0===me)return void oe();if(!1===me)return;const z=new L.Hp({next:()=>{z.unsubscribe(),oe()}});return me(...ve).subscribe(z)}},9468:(ft,xe,V)=>{V.d(xe,{R:()=>re});var u=V(4482);function re(L,pe=0){return(0,u.e)((le,ye)=>{ye.add(L.schedule(()=>le.subscribe(ye),pe))})}},8505:(ft,xe,V)=>{V.d(xe,{b:()=>le});var u=V(576),re=V(4482),L=V(5403),pe=V(4671);function le(ye,oe,me){const ve=(0,u.m)(ye)||oe||me?{next:ye,error:oe,complete:me}:ye;return ve?(0,re.e)((z,G)=>{var ne;null===(ne=ve.subscribe)||void 0===ne||ne.call(ve);let Ge=!0;z.subscribe((0,L.x)(G,Me=>{var ke;null===(ke=ve.next)||void 0===ke||ke.call(ve,Me),G.next(Me)},()=>{var Me;Ge=!1,null===(Me=ve.complete)||void 0===Me||Me.call(ve),G.complete()},Me=>{var ke;Ge=!1,null===(ke=ve.error)||void 0===ke||ke.call(ve,Me),G.error(Me)},()=>{var Me,ke;Ge&&(null===(Me=ve.unsubscribe)||void 0===Me||Me.call(ve)),null===(ke=ve.finalize)||void 0===ke||ke.call(ve)}))}):pe.y}},4408:(ft,xe,V)=>{V.d(xe,{o:()=>le});var u=V(727);class re extends u.w0{constructor(oe,me){super()}schedule(oe,me=0){return this}}const L={setInterval(ye,oe,...me){const{delegate:ve}=L;return ve?.setInterval?ve.setInterval(ye,oe,...me):setInterval(ye,oe,...me)},clearInterval(ye){const{delegate:oe}=L;return(oe?.clearInterval||clearInterval)(ye)},delegate:void 0};var pe=V(8737);class le extends re{constructor(oe,me){super(oe,me),this.scheduler=oe,this.work=me,this.pending=!1}schedule(oe,me=0){if(this.closed)return this;this.state=oe;const ve=this.id,z=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(z,ve,me)),this.pending=!0,this.delay=me,this.id=this.id||this.requestAsyncId(z,this.id,me),this}requestAsyncId(oe,me,ve=0){return L.setInterval(oe.flush.bind(oe,this),ve)}recycleAsyncId(oe,me,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return me;L.clearInterval(me)}execute(oe,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(oe,me);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,me){let z,ve=!1;try{this.work(oe)}catch(G){ve=!0,z=G||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:oe,scheduler:me}=this,{actions:ve}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,pe.P)(ve,this),null!=oe&&(this.id=this.recycleAsyncId(me,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(ft,xe,V)=>{V.d(xe,{v:()=>L});var u=V(6063);class re{constructor(le,ye=re.now){this.schedulerActionCtor=le,this.now=ye}schedule(le,ye=0,oe){return new this.schedulerActionCtor(this,le).schedule(oe,ye)}}re.now=u.l.now;class L extends re{constructor(le,ye=re.now){super(le,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:ye}=this;if(this._active)return void ye.push(le);let oe;this._active=!0;do{if(oe=le.execute(le.state,le.delay))break}while(le=ye.shift());if(this._active=!1,oe){for(;le=ye.shift();)le.unsubscribe();throw oe}}}},4986:(ft,xe,V)=>{V.d(xe,{P:()=>pe,z:()=>L});var u=V(4408);const L=new(V(7565).v)(u.o),pe=L},6063:(ft,xe,V)=>{V.d(xe,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(ft,xe,V)=>{V.d(xe,{z:()=>u});const u={setTimeout(re,L,...pe){const{delegate:le}=u;return le?.setTimeout?le.setTimeout(re,L,...pe):setTimeout(re,L,...pe)},clearTimeout(re){const{delegate:L}=u;return(L?.clearTimeout||clearTimeout)(re)},delegate:void 0}},2202:(ft,xe,V)=>{V.d(xe,{h:()=>re});const re=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ft,xe,V)=>{V.d(xe,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ft,xe,V)=>{V.d(xe,{_6:()=>ye,jO:()=>pe,yG:()=>le});var u=V(576),re=V(3532);function L(oe){return oe[oe.length-1]}function pe(oe){return(0,u.m)(L(oe))?oe.pop():void 0}function le(oe){return(0,re.K)(L(oe))?oe.pop():void 0}function ye(oe,me){return"number"==typeof L(oe)?oe.pop():me}},8737:(ft,xe,V)=>{function u(re,L){if(re){const pe=re.indexOf(L);0<=pe&&re.splice(pe,1)}}V.d(xe,{P:()=>u})},3888:(ft,xe,V)=>{function u(re){const pe=re(le=>{Error.call(le),le.stack=(new Error).stack});return pe.prototype=Object.create(Error.prototype),pe.prototype.constructor=pe,pe}V.d(xe,{d:()=>u})},2806:(ft,xe,V)=>{V.d(xe,{O:()=>pe,x:()=>L});var u=V(2416);let re=null;function L(le){if(u.v.useDeprecatedSynchronousErrorHandling){const ye=!re;if(ye&&(re={errorThrown:!1,error:null}),le(),ye){const{errorThrown:oe,error:me}=re;if(re=null,oe)throw me}}else le()}function pe(le){u.v.useDeprecatedSynchronousErrorHandling&&re&&(re.errorThrown=!0,re.error=le)}},9672:(ft,xe,V)=>{function u(re,L,pe,le=0,ye=!1){const oe=L.schedule(function(){pe(),ye?re.add(this.schedule(null,le)):this.unsubscribe()},le);if(re.add(oe),!ye)return oe}V.d(xe,{f:()=>u})},4671:(ft,xe,V)=>{function u(re){return re}V.d(xe,{y:()=>u})},1144:(ft,xe,V)=>{V.d(xe,{z:()=>u});const u=re=>re&&"number"==typeof re.length&&"function"!=typeof re},2206:(ft,xe,V)=>{V.d(xe,{D:()=>re});var u=V(576);function re(L){return Symbol.asyncIterator&&(0,u.m)(L?.[Symbol.asyncIterator])}},576:(ft,xe,V)=>{function u(re){return"function"==typeof re}V.d(xe,{m:()=>u})},3670:(ft,xe,V)=>{V.d(xe,{c:()=>L});var u=V(8822),re=V(576);function L(pe){return(0,re.m)(pe[u.L])}},6495:(ft,xe,V)=>{V.d(xe,{T:()=>L});var u=V(2202),re=V(576);function L(pe){return(0,re.m)(pe?.[u.h])}},8239:(ft,xe,V)=>{V.d(xe,{t:()=>re});var u=V(576);function re(L){return(0,u.m)(L?.then)}},3260:(ft,xe,V)=>{V.d(xe,{L:()=>pe,Q:()=>L});var u=V(655),re=V(576);function L(le){return(0,u.FC)(this,arguments,function*(){const oe=le.getReader();try{for(;;){const{value:me,done:ve}=yield(0,u.qq)(oe.read());if(ve)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(me)}}finally{oe.releaseLock()}})}function pe(le){return(0,re.m)(le?.getReader)}},3532:(ft,xe,V)=>{V.d(xe,{K:()=>re});var u=V(576);function re(L){return L&&(0,u.m)(L.schedule)}},4482:(ft,xe,V)=>{V.d(xe,{A:()=>re,e:()=>L});var u=V(576);function re(pe){return(0,u.m)(pe?.lift)}function L(pe){return le=>{if(re(le))return le.lift(function(ye){try{return pe(ye,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ft,xe,V)=>{function u(){}V.d(xe,{Z:()=>u})},7849:(ft,xe,V)=>{V.d(xe,{h:()=>L});var u=V(2416),re=V(3410);function L(pe){re.z.setTimeout(()=>{const{onUnhandledError:le}=u.v;if(!le)throw pe;le(pe)})}},4532:(ft,xe,V)=>{function u(re){return new TypeError(`You provided ${null!==re&&"object"==typeof re?"an invalid object":`'${re}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(xe,{z:()=>u})},655:(ft,xe,V)=>{function pe(ee,ae){var se={};for(var Ee in ee)Object.prototype.hasOwnProperty.call(ee,Ee)&&ae.indexOf(Ee)<0&&(se[Ee]=ee[Ee]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var fe=0;for(Ee=Object.getOwnPropertySymbols(ee);fe<Ee.length;fe++)ae.indexOf(Ee[fe])<0&&Object.prototype.propertyIsEnumerable.call(ee,Ee[fe])&&(se[Ee[fe]]=ee[Ee[fe]])}return se}function me(ee,ae,se,Ee){return new(se||(se=Promise))(function(Fe,vt){function Xt(dn){try{Xe(Ee.next(dn))}catch($n){vt($n)}}function Gt(dn){try{Xe(Ee.throw(dn))}catch($n){vt($n)}}function Xe(dn){dn.done?Fe(dn.value):function fe(Fe){return Fe instanceof se?Fe:new se(function(vt){vt(Fe)})}(dn.value).then(Xt,Gt)}Xe((Ee=Ee.apply(ee,ae||[])).next())})}function ge(ee){return this instanceof ge?(this.v=ee,this):new ge(ee)}function be(ee,ae,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,Ee=se.apply(ee,ae||[]),Fe=[];return fe={},vt("next"),vt("throw"),vt("return"),fe[Symbol.asyncIterator]=function(){return this},fe;function vt(gn){Ee[gn]&&(fe[gn]=function(rn){return new Promise(function(Hr,en){Fe.push([gn,rn,Hr,en])>1||Xt(gn,rn)})})}function Xt(gn,rn){try{!function Gt(gn){gn.value instanceof ge?Promise.resolve(gn.value.v).then(Xe,dn):$n(Fe[0][2],gn)}(Ee[gn](rn))}catch(Hr){$n(Fe[0][3],Hr)}}function Xe(gn){Xt("next",gn)}function dn(gn){Xt("throw",gn)}function $n(gn,rn){gn(rn),Fe.shift(),Fe.length&&Xt(Fe[0][0],Fe[0][1])}}function it(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,ae=ee[Symbol.asyncIterator];return ae?ae.call(ee):(ee=function ne(ee){var ae="function"==typeof Symbol&&Symbol.iterator,se=ae&&ee[ae],Ee=0;if(se)return se.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&Ee>=ee.length&&(ee=void 0),{value:ee&&ee[Ee++],done:!ee}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),se={},Ee("next"),Ee("throw"),Ee("return"),se[Symbol.asyncIterator]=function(){return this},se);function Ee(Fe){se[Fe]=ee[Fe]&&function(vt){return new Promise(function(Xt,Gt){!function fe(Fe,vt,Xt,Gt){Promise.resolve(Gt).then(function(Xe){Fe({value:Xe,done:Xt})},vt)}(Xt,Gt,(vt=ee[Fe](vt)).done,vt.value)})}}}V.d(xe,{FC:()=>be,KL:()=>it,_T:()=>pe,mG:()=>me,qq:()=>ge})},4650:(ft,xe,V)=>{V.d(xe,{$8M:()=>Ns,$Z:()=>Gv,AFp:()=>B0,AaK:()=>me,AsE:()=>Fb,BQk:()=>es,CHM:()=>Ca,CRH:()=>M0,CZH:()=>km,CqO:()=>Jc,D6c:()=>q1,EJc:()=>DD,EiD:()=>vh,EpF:()=>GC,F$t:()=>eu,F4k:()=>Tb,FYo:()=>ou,FiY:()=>Ae,G48:()=>x1,Gf:()=>A0,GfV:()=>vm,Gpc:()=>G,Hsn:()=>Zt,Ikx:()=>nf,JOm:()=>gr,JVY:()=>Uc,KtG:()=>Vo,L6k:()=>kg,LAX:()=>Cp,LFG:()=>Zn,LSH:()=>Wa,Lbi:()=>MM,MAs:()=>E_,MMx:()=>Cd,NdJ:()=>im,O4$:()=>eh,OlP:()=>Qt,Oqu:()=>Nb,PXZ:()=>C1,Q6J:()=>Ib,QGY:()=>Db,QP$:()=>gf,QbO:()=>ID,Qsj:()=>c0,R0b:()=>hi,RDi:()=>ov,Rgc:()=>Tm,SBq:()=>wd,Sil:()=>FM,Suo:()=>x0,TTD:()=>wi,TgZ:()=>On,Udp:()=>Rb,VKq:()=>XI,WFA:()=>md,X6Q:()=>A1,XFs:()=>bt,Xpm:()=>j,Xts:()=>Fv,Y36:()=>Kc,YKP:()=>o0,YNc:()=>$l,Yjl:()=>jt,Yz7:()=>rn,ZZ4:()=>PD,_Bn:()=>hf,_UZ:()=>ui,_Vd:()=>vd,_c5:()=>G1,_uU:()=>aI,aQg:()=>ND,c2e:()=>RM,cJS:()=>en,cg1:()=>hm,d8E:()=>ql,dDg:()=>Sd,deG:()=>up,dqk:()=>qe,eBb:()=>lv,eFA:()=>WM,ekj:()=>_d,eoX:()=>gy,f3M:()=>_o,g9A:()=>CD,h0i:()=>bd,hGG:()=>z1,hM9:()=>bm,hij:()=>Qh,iGM:()=>S0,ifc:()=>Jt,ip1:()=>V0,kL8:()=>P_,kcU:()=>ku,lG2:()=>wr,lqb:()=>Mi,lri:()=>SD,mCW:()=>Wu,n5z:()=>Pc,oAB:()=>pt,oxw:()=>WC,pB0:()=>cv,q3G:()=>ar,q4F:()=>u0,qLn:()=>jc,qOj:()=>pb,qZA:()=>Ut,qzn:()=>yo,rWj:()=>jM,sBO:()=>M1,sIi:()=>em,s_b:()=>di,soG:()=>uy,tb:()=>U0,tp0:()=>ht,uIk:()=>gb,vHH:()=>ke,vpe:()=>ol,wAp:()=>yt,xp6:()=>Up,ynx:()=>zh,z2F:()=>G0,z3N:()=>Hs,zSh:()=>iC,zs3:()=>Qa});var u=V(7579),re=V(727),L=V(8306),pe=V(6451),le=V(3099);function ye(o){for(let a in o)if(o[a]===ye)return a;throw Error("Could not find renamed property on target object.")}function oe(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function me(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(me).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function ve(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const z=ye({__forward_ref__:ye});function G(o){return o.__forward_ref__=G,o.toString=function(){return me(this())},o}function ne(o){return Ge(o)?o():o}function Ge(o){return"function"==typeof o&&o.hasOwnProperty(z)&&o.__forward_ref__===G}class ke extends Error{constructor(a,c){super(function $e(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,c)),this.code=a}}function ge(o){return"string"==typeof o?o:null==o?"":String(o)}function Ce(o,a){throw new ke(-201,!1)}function Gt(o,a){null==o&&function Xe(o,a,c,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${c} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function rn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function en(o){return{providers:o.providers||[],imports:o.imports||[]}}function zt(o){return us(o,ds)||us(o,ri)}function us(o,a){return o.hasOwnProperty(a)?o[a]:null}function ni(o){return o&&(o.hasOwnProperty(no)||o.hasOwnProperty($i))?o[no]:null}const ds=ye({\u0275prov:ye}),no=ye({\u0275inj:ye}),ri=ye({ngInjectableDef:ye}),$i=ye({ngInjectorDef:ye});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let ii;function zn(o){const a=ii;return ii=o,a}function hs(o,a,c){const d=zt(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&bt.Optional?null:void 0!==a?a:void Ce(me(o))}function Bn(o){return{toString:o}.toString()}var Jn=(()=>((Jn=Jn||{})[Jn.OnPush=0]="OnPush",Jn[Jn.Default=1]="Default",Jn))(),Jt=(()=>{return(o=Jt||(Jt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Jt;var o})();const qe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ur={},Mt=[],_i=ye({\u0275cmp:ye}),dr=ye({\u0275dir:ye}),Gi=ye({\u0275pipe:ye}),ln=ye({\u0275mod:ye}),si=ye({\u0275fac:ye}),$=ye({__NG_ELEMENT_ID__:ye});let W=0;function j(o){return Bn(()=>{const c=!0===o.standalone,d={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Jn.OnPush,directiveDefs:null,pipeDefs:null,standalone:c,dependencies:c&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||Mt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Jt.Emulated,id:"c"+W++,styles:o.styles||Mt,_:null,setInput:null,schemas:o.schemas||null,tView:null},g=o.dependencies,b=o.features;return f.inputs=tn(o.inputs,d),f.outputs=tn(o.outputs),b&&b.forEach(C=>C(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(Y).filter(Oe):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map(er).filter(Oe):null,f})}function Y(o){return $t(o)||Sn(o)}function Oe(o){return null!==o}const We={};function pt(o){return Bn(()=>{const a={type:o.type,bootstrap:o.bootstrap||Mt,declarations:o.declarations||Mt,imports:o.imports||Mt,exports:o.exports||Mt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(We[o.id]=o.type),a})}function tn(o,a){if(null==o)return ur;const c={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),c[f]=d,a&&(a[f]=g)}return c}const wr=j;function jt(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function $t(o){return o[_i]||null}function Sn(o){return o[dr]||null}function er(o){return o[Gi]||null}function Tr(o,a){const c=o[ln]||null;if(!c&&!0===a)throw new Error(`Type ${me(o)} does not have '\u0275mod' property.`);return c}function Hn(o){return Array.isArray(o)&&"object"==typeof o[1]}function oi(o){return Array.isArray(o)&&!0===o[1]}function gl(o){return 0!=(8&o.flags)}function _l(o){return 2==(2&o.flags)}function so(o){return 1==(1&o.flags)}function qi(o){return null!==o.template}function ya(o){return 0!=(256&o[2])}function ao(o,a){return o.hasOwnProperty(si)?o[si]:null}class Cu{constructor(a,c,d){this.previousValue=a,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function wi(){return lo}function lo(o){return o.type.prototype.ngOnChanges&&(o.setInput=Iu),va}function va(){const o=vl(this),a=o?.current;if(a){const c=o.previous;if(c===ur)o.previous=a;else for(let d in a)c[d]=a[d];o.current=null,this.ngOnChanges(a)}}function Iu(o,a,c,d){const f=vl(o)||function Jf(o,a){return o[yl]=a}(o,{previous:ur,current:null}),g=f.current||(f.current={}),b=f.previous,C=this.declaredInputs[c],I=b[C];g[C]=new Cu(I&&I.currentValue,a,b===ur),o[d]=a}wi.ngInherit=!0;const yl="__ngSimpleChanges__";function vl(o){return o[yl]||null}function jn(o){for(;Array.isArray(o);)o=o[0];return o}function wl(o,a){return jn(a[o])}function nr(o,a){return jn(a[o.index])}function Po(o,a){return o.data[a]}function Er(o,a){const c=a[o];return Hn(c)?c:c[0]}function No(o){return 4==(4&o[2])}function Ms(o){return 64==(64&o[2])}function Ei(o,a){return null==a?null:o[a]}function uo(o){o[18]=0}function El(o,a){o[5]+=a;let c=o,d=o[3];for(;null!==d&&(1===a&&1===c[5]||-1===a&&0===c[5]);)d[5]+=a,c=d,d=d[3]}const at={lFrame:vc(null),bindingsEnabled:!0};function Lo(){return at.bindingsEnabled}function Se(){return at.lFrame.lView}function Vt(){return at.lFrame.tView}function Ca(o){return at.lFrame.contextLView=o,o[8]}function Vo(o){return at.lFrame.contextLView=null,o}function Fn(){let o=Ia();for(;null!==o&&64===o.type;)o=o.parent;return o}function Ia(){return at.lFrame.currentTNode}function Ci(o,a){const c=at.lFrame;c.currentTNode=o,c.isParent=a}function Cl(){return at.lFrame.isParent}function Da(){at.lFrame.isParent=!1}function Uo(){return at.lFrame.bindingIndex++}function Ki(o){const a=at.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}function Sa(o,a){const c=at.lFrame;c.bindingIndex=c.bindingRootIndex=o,Aa(a)}function Aa(o){at.lFrame.currentDirectiveIndex=o}function xa(o){const a=at.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function yc(){return at.lFrame.currentQueryIndex}function Il(o){at.lFrame.currentQueryIndex=o}function Au(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Ma(o,a,c){if(c&bt.SkipSelf){let f=a,g=o;for(;!(f=f.parent,null!==f||c&bt.Host||(f=Au(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,o=g}const d=at.lFrame=xu();return d.currentTNode=a,d.lView=o,!0}function Dl(o){const a=xu(),c=o[1];at.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function xu(){const o=at.lFrame,a=null===o?null:o.child;return null===a?vc(o):a}function vc(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function bc(){const o=at.lFrame;return at.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const wc=bc;function Ec(){const o=bc();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function rr(){return at.lFrame.selectedIndex}function Rs(o){at.lFrame.selectedIndex=o}function hn(){const o=at.lFrame;return Po(o.tView,o.selectedIndex)}function eh(){at.lFrame.currentNamespace="svg"}function ku(){!function np(){at.lFrame.currentNamespace=null}()}function nh(o,a){for(let c=a.directiveStart,d=a.directiveEnd;c<d;c++){const g=o.data[c].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:x,ngOnDestroy:O}=g;b&&(o.contentHooks||(o.contentHooks=[])).push(-c,b),C&&((o.contentHooks||(o.contentHooks=[])).push(c,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(c,C)),I&&(o.viewHooks||(o.viewHooks=[])).push(-c,I),x&&((o.viewHooks||(o.viewHooks=[])).push(c,x),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(c,x)),null!=O&&(o.destroyHooks||(o.destroyHooks=[])).push(c,O)}}function ip(o,a,c){Ho(o,a,3,c)}function Dc(o,a,c,d){(3&o[2])===c&&Ho(o,a,c,d)}function rh(o,a){let c=o[2];(3&c)===a&&(c&=2047,c+=1,o[2]=c)}function Ho(o,a,c,d){const g=d??-1,b=a.length-1;let C=0;for(let I=void 0!==d?65535&o[18]:0;I<b;I++)if("number"==typeof a[I+1]){if(C=a[I],null!=d&&C>=d)break}else a[I]<0&&(o[18]+=65536),(C<g||-1==g)&&(Ru(o,c,a,I),o[18]=(4294901760&o[18])+I+2),I++}function Ru(o,a,c,d){const f=c[d]<0,g=c[d+1],C=o[f?-c[d]:c[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{g.call(C)}finally{}}}else try{g.call(C)}finally{}}class ka{constructor(a,c,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Go(o,a,c){let d=0;for(;d<c.length;){const f=c[d];if("number"==typeof f){if(0!==f)break;d++;const g=c[d++],b=c[d++],C=c[d++];o.setAttribute(a,b,C,g)}else{const g=f,b=c[++d];zo(g)?o.setProperty(a,g,b):o.setAttribute(a,g,b),d++}}return d}function op(o){return 3===o||4===o||6===o}function zo(o){return 64===o.charCodeAt(0)}function Sc(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?c=f:0===c||ap(o,c,f,null,-1===c||2===c?a[++d]:null)}}return o}function ap(o,a,c,d,f){let g=0,b=o.length;if(-1===a)b=-1;else for(;g<o.length;){const C=o[g++];if("number"==typeof C){if(C===a){b=-1;break}if(C>a){b=g-1;break}}}for(;g<o.length;){const C=o[g];if("number"==typeof C)break;if(C===c){if(null===d)return void(null!==f&&(o[g+1]=f));if(d===o[g+1])return void(o[g+2]=f)}g++,null!==d&&g++,null!==f&&g++}-1!==b&&(o.splice(b,0,a),g=b+1),o.splice(g++,0,c),null!==d&&o.splice(g++,0,d),null!==f&&o.splice(g++,0,f)}function lp(o){return-1!==o}function Tl(o){return 32767&o}function ho(o,a){let c=function Zi(o){return o>>16}(o),d=a;for(;c>0;)d=d[15],c--;return d}let Ac=!0;function Yi(o){const a=Ac;return Ac=o,a}let Os=0;const Ue={};function ir(o,a){const c=Sl(o,a);if(-1!==c)return c;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,Wn(d.data,o),Wn(a,null),Wn(d.blueprint,null));const f=xc(o,a),g=o.injectorIndex;if(lp(f)){const b=Tl(f),C=ho(f,a),I=C[1].data;for(let x=0;x<8;x++)a[g+x]=C[b+x]|I[b+x]}return a[g+8]=f,g}function Wn(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Sl(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function xc(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,d=null,f=a;for(;null!==f;){if(d=Ko(f),null===d)return-1;if(c++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function Mc(o,a,c){!function Wt(o,a,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty($)&&(d=c[$]),null==d&&(d=c[$]=Os++);const f=255&d;a.data[o+(f>>5)]|=1<<f}(o,a,c)}function Ou(o,a,c){if(c&bt.Optional)return o;Ce()}function qo(o,a,c,d){if(c&bt.Optional&&void 0===d&&(d=null),0==(c&(bt.Self|bt.Host))){const f=o[9],g=zn(void 0);try{return f?f.get(a,d,c&bt.Optional):hs(a,d,c&bt.Optional)}finally{zn(g)}}return Ou(d,0,c)}function fo(o,a,c,d=bt.Default,f){if(null!==o){if(1024&a[2]){const b=function Wo(o,a,c,d,f){let g=o,b=a;for(;null!==g&&null!==b&&1024&b[2]&&!(256&b[2]);){const C=ot(g,b,c,d|bt.Self,Ue);if(C!==Ue)return C;let I=g.parent;if(!I){const x=b[21];if(x){const O=x.get(c,Ue,d);if(O!==Ue)return O}I=Ko(b),b=b[15]}g=I}return f}(o,a,c,d,Ue);if(b!==Ue)return b}const g=ot(o,a,c,d,Ue);if(g!==Ue)return g}return qo(a,c,d,f)}function ot(o,a,c,d,f){const g=function Al(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty($)?o[$]:void 0;return"number"==typeof a?a>=0?255&a:Pu:a}(c);if("function"==typeof g){if(!Ma(a,o,d))return d&bt.Host?Ou(f,0,d):qo(a,c,d,f);try{const b=g(d);if(null!=b||d&bt.Optional)return b;Ce()}finally{wc()}}else if("number"==typeof g){let b=null,C=Sl(o,a),I=-1,x=d&bt.Host?a[16][6]:null;for((-1===C||d&bt.SkipSelf)&&(I=-1===C?xc(o,a):a[C+8],-1!==I&&Oc(d,!1)?(b=a[1],C=Tl(I),a=ho(I,a)):C=-1);-1!==C;){const O=a[1];if(In(g,C,O.data)){const U=Rc(C,a,c,b,d,x);if(U!==Ue)return U}I=a[C+8],-1!==I&&Oc(d,a[1].data[C+8]===x)&&In(g,C,a)?(b=O,C=Tl(I),a=ho(I,a)):C=-1}}return f}function Rc(o,a,c,d,f,g){const b=a[1],C=b.data[o+8],O=Oa(C,b,c,null==d?_l(C)&&Ac:d!=b&&0!=(3&C.type),f&bt.Host&&g===C);return null!==O?Ps(a,b,O,C):Ue}function Oa(o,a,c,d,f){const g=o.providerIndexes,b=a.data,C=1048575&g,I=o.directiveStart,O=g>>20,Q=f?C+O:o.directiveEnd;for(let ie=d?C:C+O;ie<Q;ie++){const De=b[ie];if(ie<I&&c===De||ie>=I&&De.type===c)return ie}if(f){const ie=b[I];if(ie&&qi(ie)&&ie.type===c)return I}return null}function Ps(o,a,c,d){let f=o[c];const g=a.data;if(function Tc(o){return o instanceof ka}(f)){const b=f;b.resolving&&function Je(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new ke(-200,`Circular dependency in DI detected for ${o}${c}`)}(function be(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ge(o)}(g[c]));const C=Yi(b.canSeeViewProviders);b.resolving=!0;const I=b.injectImpl?zn(b.injectImpl):null;Ma(o,d,bt.Default);try{f=o[c]=b.factory(void 0,g,o,d),a.firstCreatePass&&c>=d.directiveStart&&function rp(o,a,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(d){const b=lo(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(o,b),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,b)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-o,f),g&&((c.preOrderHooks||(c.preOrderHooks=[])).push(o,g),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,g))}(c,g[c],a)}finally{null!==I&&zn(I),Yi(C),b.resolving=!1,wc()}}return f}function In(o,a,c){return!!(c[a+(o>>5)]&1<<o)}function Oc(o,a){return!(o&bt.Self||o&bt.Host&&a)}class Ii{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,d){return fo(this._tNode,this._lView,a,d,c)}}function Pu(){return new Ii(Fn(),Se())}function Pc(o){return Bn(()=>{const a=o.prototype.constructor,c=a[si]||Di(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const g=f[si]||Di(f);if(g&&g!==c)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Di(o){return Ge(o)?()=>{const a=Di(ne(o));return a&&a()}:ao(o)}function Ko(o){const a=o[1],c=a.type;return 2===c?a.declTNode:1===c?o[6]:null}function Ns(o){return function kc(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const g=c[f];if(op(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(g===a)return c[f+1];f+=2}}}return null}(Fn(),o)}const zr="__parameters__";function Ar(o,a,c){return Bn(()=>{const d=function po(o){return function(...c){if(o){const d=o(...c);for(const f in d)this[f]=d[f]}}}(a);function f(...g){if(this instanceof f)return d.apply(this,g),this;const b=new f(...g);return C.annotation=b,C;function C(I,x,O){const U=I.hasOwnProperty(zr)?I[zr]:Object.defineProperty(I,zr,{value:[]})[zr];for(;U.length<=O;)U.push(null);return(U[O]=U[O]||[]).push(b),I}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Qt{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=rn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const up=new Qt("AnalyzeForEntryComponents");function Mn(o,a){void 0===a&&(a=o);for(let c=0;c<o.length;c++){let d=o[c];Array.isArray(d)?(a===o&&(a=o.slice(0,c)),Mn(d,a)):a!==o&&a.push(d)}return a}function vn(o,a){o.forEach(c=>Array.isArray(c)?vn(c,a):a(c))}function Nc(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function Zo(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Nr(o,a){const c=[];for(let d=0;d<o;d++)c.push(a);return c}function Fr(o,a,c){let d=go(o,a);return d>=0?o[1|d]=c:(d=~d,function Lu(o,a,c,d){let f=o.length;if(f==a)o.push(c,d);else if(1===f)o.push(d,o[0]),o[0]=c;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=c,o[a+1]=d}}(o,d,a,c)),d}function Bu(o,a){const c=go(o,a);if(c>=0)return o[1|c]}function go(o,a){return function Na(o,a,c){let d=0,f=o.length>>c;for(;f!==d;){const g=d+(f-d>>1),b=o[g<<c];if(a===b)return g<<c;b>a?f=g:d=g+1}return~(f<<c)}(o,a,1)}const Si={},Bs="__NG_DI_FLAG__",La="ngTempTokenPath",Us=/\n/gm,or="__source";let Va;function Ba(o){const a=Va;return Va=o,a}function Vc(o,a=bt.Default){if(void 0===Va)throw new ke(-203,!1);return null===Va?hs(o,void 0,a):Va.get(o,a&bt.Optional?null:void 0,a)}function Zn(o,a=bt.Default){return(function Gn(){return ii}()||Vc)(ne(o),a)}function _o(o,a=bt.Default){return Zn(o,a)}function T(o){const a=[];for(let c=0;c<o.length;c++){const d=ne(o[c]);if(Array.isArray(d)){if(0===d.length)throw new ke(900,!1);let f,g=bt.Default;for(let b=0;b<d.length;b++){const C=d[b],I=R(C);"number"==typeof I?-1===I?f=C.token:g|=I:f=C}a.push(Zn(f,g))}else a.push(Zn(d))}return a}function S(o,a){return o[Bs]=a,o.prototype[Bs]=a,o}function R(o){return o[Bs]}const Ae=S(Ar("Optional"),8),ht=S(Ar("SkipSelf"),4);let gp,uh;function ov(o){gp=o}function Pl(o){return function Gu(){if(void 0===uh&&(uh=null,qe.trustedTypes))try{uh=qe.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return uh}()?.createHTML(o)||o}class Ga{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class bp extends Ga{getTypeName(){return"HTML"}}class dh extends Ga{getTypeName(){return"Style"}}class hh extends Ga{getTypeName(){return"Script"}}class wp extends Ga{getTypeName(){return"URL"}}class Ep extends Ga{getTypeName(){return"ResourceURL"}}function Hs(o){return o instanceof Ga?o.changingThisBreaksApplicationSecurity:o}function yo(o,a){const c=function av(o){return o instanceof Ga&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===a}function Uc(o){return new bp(o)}function kg(o){return new dh(o)}function lv(o){return new hh(o)}function Cp(o){return new wp(o)}function cv(o){return new Ep(o)}class js{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(Pl(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class Ip{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const d=this.inertDocument.createElement("body");c.appendChild(d)}}getInertBodyElement(a){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=Pl(a),c;const d=this.inertDocument.createElement("body");return d.innerHTML=Pl(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const c=a.attributes;for(let f=c.length-1;0<f;f--){const b=c.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const ph=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,qu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wu(o){return(o=String(o)).match(ph)||o.match(qu)?o:"unsafe:"+o}function ys(o){const a={};for(const c of o.split(","))a[c]=!0;return a}function Hc(...o){const a={};for(const c of o)for(const d in c)c.hasOwnProperty(d)&&(a[d]=!0);return a}const Ku=ys("area,br,col,hr,img,wbr"),mh=ys("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gh=ys("rp,rt"),Dp=Hc(Ku,Hc(mh,ys("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Hc(gh,ys("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Hc(gh,mh)),za=ys("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qa=ys("srcset"),_h=Hc(za,qa,ys("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ys("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),yh=ys("script,style,template");class Pg{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let c=a.firstChild,d=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?d=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,d&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let f=this.checkClobberedElement(c,c.nextSibling);if(f){c=f;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(a){const c=a.nodeName.toLowerCase();if(!Dp.hasOwnProperty(c))return this.sanitizedSomething=!0,!yh.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const d=a.attributes;for(let f=0;f<d.length;f++){const g=d.item(f),b=g.name,C=b.toLowerCase();if(!_h.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let I=g.value;za[C]&&(I=Wu(I)),qa[C]&&(o=I,I=(o=String(o)).split(",").map(a=>Wu(a.trim())).join(", ")),this.buf.push(" ",b,'="',hv(I),'"')}var o;return this.buf.push(">"),!0}endElement(a){const c=a.nodeName.toLowerCase();Dp.hasOwnProperty(c)&&!Ku.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(a){this.buf.push(hv(a))}checkClobberedElement(a,c){if(c&&(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return c}}const AE=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sp=/([^\#-~ |!])/g;function hv(o){return o.replace(/&/g,"&amp;").replace(AE,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Sp,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ap;function vh(o,a){let c=null;try{Ap=Ap||function fh(o){const a=new Ip(o);return function Rg(){try{return!!(new window.DOMParser).parseFromString(Pl(""),"text/html")}catch{return!1}}()?new js(a):a}(o);let d=a?String(a):"";c=Ap.getInertBodyElement(d);let f=5,g=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=g,g=c.innerHTML,c=Ap.getInertBodyElement(d)}while(d!==g);return Pl((new Pg).sanitizeChildren(bh(c)||c))}finally{if(c){const d=bh(c)||c;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function bh(o){return"content"in o&&function fv(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var ar=(()=>((ar=ar||{})[ar.NONE=0]="NONE",ar[ar.HTML=1]="HTML",ar[ar.STYLE=2]="STYLE",ar[ar.SCRIPT=3]="SCRIPT",ar[ar.URL=4]="URL",ar[ar.RESOURCE_URL=5]="RESOURCE_URL",ar))();function Wa(o){const a=function Ll(){const o=Se();return o&&o[12]}();return a?a.sanitize(ar.URL,o)||"":yo(o,"URL")?Hs(o):Wu(ge(o))}function Jo(o){return o.ngOriginalError}class jc{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&Jo(a);for(;c&&Jo(c);)c=Jo(c);return c||null}}const Ih=new Map;let $s=0;const Pp="__ngContext__";function Tn(o,a){Hn(a)?(o[Pp]=a[20],function Bg(o){Ih.set(o[20],o)}(a)):o[Pp]=a}function ea(o){const a=o[Pp];return"number"==typeof a?function $c(o){return Ih.get(o)||null}(a):a||null}function Xu(o){const a=ea(o);return a?Hn(a)?a:a.lView:null}const _=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(qe))();function de(o){return o instanceof Function?o():o}var gr=(()=>((gr=gr||{})[gr.Important=1]="Important",gr[gr.DashCase=2]="DashCase",gr))();function Ah(o,a){return undefined(o,a)}function Za(o){const a=o[3];return oi(a)?a[3]:a}function qc(o){return $g(o[13])}function ed(o){return $g(o[4])}function $g(o){for(;null!==o&&!oi(o);)o=o[4];return o}function Wc(o,a,c,d,f){if(null!=d){let g,b=!1;oi(d)?g=d:Hn(d)&&(b=!0,d=d[0]);const C=jn(d);0===o&&null!==c?null==f?Kr(a,c,C):td(a,c,C,f||null,!0):1===o&&null!==c?td(a,c,C,f||null,!0):2===o?function Ya(o,a,c){const d=nd(o,a);d&&function LE(o,a,c,d){o.removeChild(a,c,d)}(o,d,a,c)}(a,C,b):3===o&&a.destroyNode(C),null!=g&&function tA(o,a,c,d,f){const g=c[7];g!==jn(c)&&Wc(a,o,d,g,f);for(let C=10;C<c.length;C++){const I=c[C];rd(I[1],I,o,a,d,g)}}(a,o,g,c,f)}}function wv(o,a,c){return o.createElement(a,c)}function Gg(o,a){const c=o[9],d=c.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,El(f,-1)),c.splice(d,1)}function Lp(o,a){if(o.length<=10)return;const c=10+a,d=o[c];if(d){const f=d[17];null!==f&&f!==o&&Gg(f,d),a>0&&(o[c-1][4]=d[4]);const g=Zo(o,10+a);!function ME(o,a){rd(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const b=g[19];null!==b&&b.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function RE(o,a){if(!(128&a[2])){const c=a[11];c.destroyNode&&rd(o,a,c,3,null,null),function QS(o){let a=o[13];if(!a)return Cv(o[1],o);for(;a;){let c=null;if(Hn(a))c=a[13];else{const d=a[10];d&&(c=d)}if(!c){for(;a&&!a[4]&&a!==o;)Hn(a)&&Cv(a[1],a),a=a[3];null===a&&(a=o),Hn(a)&&Cv(a[1],a),c=a&&a[4]}a=c}}(a)}}function Cv(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function JS(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let d=0;d<c.length;d+=2){const f=a[c[d]];if(!(f instanceof ka)){const g=c[d+1];if(Array.isArray(g))for(let b=0;b<g.length;b+=2){const C=f[g[b]],I=g[b+1];try{I.call(C)}finally{}}else try{g.call(f)}finally{}}}}(o,a),function OE(o,a){const c=o.cleanup,d=a[7];let f=-1;if(null!==c)for(let g=0;g<c.length-1;g+=2)if("string"==typeof c[g]){const b=c[g+1],C="function"==typeof b?b(a):jn(a[b]),I=d[f=c[g+2]],x=c[g+3];"boolean"==typeof x?C.removeEventListener(c[g],I,x):x>=0?d[f=x]():d[f=-x].unsubscribe(),g+=2}else{const b=d[f=c[g+1]];c[g].call(b)}if(null!==d){for(let g=f+1;g<d.length;g++)d[g]();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const c=a[17];if(null!==c&&oi(a[3])){c!==a[3]&&Gg(c,a);const d=a[19];null!==d&&d.detachView(o)}!function Ug(o){Ih.delete(o[20])}(a)}}function PE(o,a,c){return function NE(o,a,c){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return c[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===Jt.None||f===Jt.Emulated)return null}return nr(d,c)}(o,a.parent,c)}function td(o,a,c,d,f){o.insertBefore(a,c,d,f)}function Kr(o,a,c){o.appendChild(a,c)}function FE(o,a,c,d,f){null!==d?td(o,a,c,d,f):Kr(o,a,c)}function nd(o,a){return o.parentNode(a)}function BE(o,a,c){return UE(o,a,c)}let UE=function Iv(o,a,c){return 40&o.type?nr(o,c):null};function Dv(o,a,c,d){const f=PE(o,d,a),g=a[11],C=BE(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(c))for(let I=0;I<c.length;I++)FE(g,f,c[I],C,!1);else FE(g,f,c,C,!1)}function Bp(o,a){if(null!==a){const c=a.type;if(3&c)return nr(a,o);if(4&c)return Sv(-1,o[a.index]);if(8&c){const d=a.child;if(null!==d)return Bp(o,d);{const f=o[a.index];return oi(f)?Sv(-1,f):jn(f)}}if(32&c)return Ah(a,o)()||jn(o[a.index]);{const d=Tv(o,a);return null!==d?Array.isArray(d)?d[0]:Bp(Za(o[16]),d):Bp(o,a.next)}}return null}function Tv(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Sv(o,a){const c=10+o+1;if(c<a.length){const d=a[c],f=d[1].firstChild;if(null!==f)return Bp(d,f)}return a[7]}function HE(o,a,c,d,f,g,b){for(;null!=c;){const C=d[c.index],I=c.type;if(b&&0===a&&(C&&Tn(jn(C),d),c.flags|=4),64!=(64&c.flags))if(8&I)HE(o,a,c.child,d,f,g,!1),Wc(a,o,f,C,g);else if(32&I){const x=Ah(c,d);let O;for(;O=x();)Wc(a,o,f,O,g);Wc(a,o,f,C,g)}else 16&I?Av(o,a,d,c,f,g):Wc(a,o,f,C,g);c=b?c.projectionNext:c.next}}function rd(o,a,c,d,f,g){HE(c,d,o.firstChild,a,f,g,!1)}function Av(o,a,c,d,f,g){const b=c[16],I=b[6].projection[d.projection];if(Array.isArray(I))for(let x=0;x<I.length;x++)Wc(a,o,f,I[x],g);else HE(o,a,I,b[3],f,g,!0)}function xv(o,a,c){o.setAttribute(a,"style",c)}function Mv(o,a,c){""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c)}function $E(o,a,c){let d=o.length;for(;;){const f=o.indexOf(a,c);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=a.length;if(f+g===d||o.charCodeAt(f+g)<=32)return f}c=f+1}}const GE="ng-template";function zE(o,a,c){let d=0;for(;d<o.length;){let f=o[d++];if(c&&"class"===f){if(f=o[d],-1!==$E(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function qE(o){return 4===o.type&&o.value!==GE}function rA(o,a,c){return a===(4!==o.type||c?o.value:GE)}function iA(o,a,c){let d=4;const f=o.attrs||[],g=function ZE(o){for(let a=0;a<o.length;a++)if(op(o[a]))return a;return o.length}(f);let b=!1;for(let C=0;C<a.length;C++){const I=a[C];if("number"!=typeof I){if(!b)if(4&d){if(d=2|1&d,""!==I&&!rA(o,I,c)||""===I&&1===a.length){if(ta(d))return!1;b=!0}}else{const x=8&d?I:a[++C];if(8&d&&null!==o.attrs){if(!zE(o.attrs,x,c)){if(ta(d))return!1;b=!0}continue}const U=WE(8&d?"class":I,f,qE(o),c);if(-1===U){if(ta(d))return!1;b=!0;continue}if(""!==x){let Q;Q=U>g?"":f[U+1].toLowerCase();const ie=8&d?Q:null;if(ie&&-1!==$E(ie,x,0)||2&d&&x!==Q){if(ta(d))return!1;b=!0}}}}else{if(!b&&!ta(d)&&!ta(I))return!1;if(b&&ta(I))continue;b=!1,d=I|1&d}}return ta(d)||b}function ta(o){return 0==(1&o)}function WE(o,a,c,d){if(null===a)return-1;let f=0;if(d||!c){let g=!1;for(;f<a.length;){const b=a[f];if(b===o)return f;if(3===b||6===b)g=!0;else{if(1===b||2===b){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=g?1:2}return-1}return function oA(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const d=o[c];if("number"==typeof d)return-1;if(d===a)return c;c++}return-1}(a,o)}function KE(o,a,c=!1){for(let d=0;d<a.length;d++)if(iA(o,a[d],c))return!0;return!1}function kv(o,a){e:for(let c=0;c<a.length;c++){const d=a[c];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function YE(o,a){return o?":not("+a.trim()+")":a}function aA(o){let a=o[0],c=1,d=2,f="",g=!1;for(;c<o.length;){let b=o[c];if("string"==typeof b)if(2&d){const C=o[++c];f+="["+b+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+b:4&d&&(f+=" "+b);else""!==f&&!ta(b)&&(a+=YE(g,f),f=""),d=b,g=g||!ta(d);c++}return""!==f&&(a+=YE(g,f)),a}const xt={};function Up(o){QE(Vt(),Se(),rr()+o,!1)}function QE(o,a,c,d){if(!d)if(3==(3&a[2])){const g=o.preOrderCheckHooks;null!==g&&ip(a,g,c)}else{const g=o.preOrderHooks;null!==g&&Dc(a,g,0,c)}Rs(c)}const Fv=new Qt("ENVIRONMENT_INITIALIZER"),cA=new Qt("INJECTOR_DEF_TYPES");function uA(...o){return{\u0275providers:qg(0,o)}}function qg(o,...a){const c=[],d=new Set;let f;return vn(a,g=>{const b=g;tC(b,c,[],d)&&(f||(f=[]),f.push(b))}),void 0!==f&&dA(f,c),c}function dA(o,a){for(let c=0;c<o.length;c++){const{providers:f}=o[c];vn(f,g=>{a.push(g)})}}function tC(o,a,c,d){if(!(o=ne(o)))return!1;let f=null,g=ni(o);const b=!g&&$t(o);if(g||b){if(b&&!b.standalone)return!1;f=o}else{const I=o.ngModule;if(g=ni(I),!g)return!1;f=I}const C=d.has(f);if(b){if(C)return!1;if(d.add(f),b.dependencies){const I="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const x of I)tC(x,a,c,d)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let x;d.add(f);try{vn(g.imports,O=>{tC(O,a,c,d)&&(x||(x=[]),x.push(O))})}finally{}void 0!==x&&dA(x,a)}if(!C){const x=ao(f)||(()=>new f);a.push({provide:f,useFactory:x,deps:Mt},{provide:cA,useValue:f,multi:!0},{provide:Fv,useValue:()=>Zn(f),multi:!0})}const I=g.providers;null==I||C||vn(I,O=>{a.push(O)})}}return f!==o&&void 0!==o.providers}const hA=ye({provide:String,useValue:ye});function nC(o){return null!==o&&"object"==typeof o&&hA in o}function Rh(o){return"function"==typeof o}const rC=new Qt("INJECTOR",-1);class mA{get(a,c=Si){if(c===Si){const d=new Error(`NullInjectorError: No provider for ${me(a)}!`);throw d.name="NullInjectorError",d}return c}}const iC=new Qt("Set Injector scope."),we={},Ji={};let Gs;function F(){return void 0===Gs&&(Gs=new mA),Gs}class Mi{}class Lv extends Mi{constructor(a,c,d,f){super(),this.parent=c,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wg(a,b=>this.processProvider(b)),this.records.set(rC,Vl(void 0,this)),f.has("environment")&&this.records.set(Mi,Vl(void 0,this));const g=this.records.get(iC);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(cA.multi,Mt,bt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}get(a,c=Si,d=bt.Default){this.assertNotDestroyed();const f=Ba(this),g=zn(void 0);try{if(!(d&bt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const I=function yA(o){return"function"==typeof o||"object"==typeof o&&o instanceof Qt}(a)&&zt(a);C=I&&this.injectableDefInScope(I)?Vl(Vv(a),we):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(d&bt.Self?F():this.parent).get(a,c=d&bt.Optional&&c===Si?null:c)}catch(b){if("NullInjectorError"===b.name){if((b[La]=b[La]||[]).unshift(me(a)),f)throw b;return function H(o,a,c,d){const f=o[La];throw a[or]&&f.unshift(a[or]),o.message=function te(o,a,c,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=me(a);if(Array.isArray(a))f=a.map(me).join(" -> ");else if("object"==typeof a){let g=[];for(let b in a)if(a.hasOwnProperty(b)){let C=a[b];g.push(b+":"+("string"==typeof C?JSON.stringify(C):me(C)))}f=`{${g.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${o.replace(Us,"\n  ")}`}("\n"+o.message,f,c,d),o.ngTokenPath=f,o[La]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{zn(g),Ba(f)}}resolveInjectorInitializers(){const a=Ba(this),c=zn(void 0);try{const d=this.get(Fv.multi,Mt,bt.Self);for(const f of d)f()}finally{Ba(a),zn(c)}}toString(){const a=[],c=this.records;for(const d of c.keys())a.push(me(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processProvider(a){let c=Rh(a=ne(a))?a:ne(a&&a.provide);const d=function Zr(o){return nC(o)?Vl(void 0,o.useValue):Vl(vo(o),we)}(a);if(Rh(a)||!0!==a.multi)this.records.get(c);else{let f=this.records.get(c);f||(f=Vl(void 0,we,!0),f.factory=()=>T(f.multi),this.records.set(c,f)),c=a,f.multi.push(a)}this.records.set(c,d)}hydrate(a,c){return c.value===we&&(c.value=Ji,c.value=c.factory()),"object"==typeof c.value&&c.value&&function _A(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=ne(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function Vv(o){const a=zt(o),c=null!==a?a.factory:ao(o);if(null!==c)return c;if(o instanceof Qt)throw new ke(204,!1);if(o instanceof Function)return function gA(o){const a=o.length;if(a>0)throw Nr(a,"?"),new ke(204,!1);const c=function mi(o){const a=o&&(o[ds]||o[ri]);if(a){const c=function Pr(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),a}return null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new ke(204,!1)}function vo(o,a,c){let d;if(Rh(o)){const f=ne(o);return ao(f)||Vv(f)}if(nC(o))d=()=>ne(o.useValue);else if(function pA(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...T(o.deps||[]));else if(function fA(o){return!(!o||!o.useExisting)}(o))d=()=>Zn(ne(o.useExisting));else{const f=ne(o&&(o.useClass||o.provide));if(!function Bv(o){return!!o.deps}(o))return ao(f)||Vv(f);d=()=>new f(...T(o.deps))}return d}function Vl(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function vA(o){return!!o.\u0275providers}function Wg(o,a){for(const c of o)Array.isArray(c)?Wg(c,a):vA(c)?Wg(c.\u0275providers,a):a(c)}function sC(o,a=null,c=null,d){const f=oC(o,a,c,d);return f.resolveInjectorInitializers(),f}function oC(o,a=null,c=null,d,f=new Set){const g=[c||Mt,uA(o)];return d=d||("object"==typeof o?void 0:me(o)),new Lv(g,a||F(),d||null,f)}let Qa=(()=>{class o{static create(c,d){if(Array.isArray(c))return sC({name:""},d,c,"");{const f=c.name??"";return sC({name:f},c.parent,c.providers,f)}}}return o.THROW_IF_NOT_FOUND=Si,o.NULL=new mA,o.\u0275prov=rn({token:o,providedIn:"any",factory:()=>Zn(rC)}),o.__NG_ELEMENT_ID__=-1,o})();function Kc(o,a=bt.Default){const c=Se();return null===c?Zn(o,a):fo(Fn(),c,ne(o),a)}function Gv(){throw new Error("invalid")}function Qg(o,a){return o<<17|a<<2}function na(o){return o>>17&32767}function Kv(o){return 2|o}function Bl(o){return(131068&o)>>2}function Vh(o,a){return-131069&o|a<<2}function Xg(o){return 1|o}function s_(o,a){const c=o.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const f=c[d],g=c[d+1];if(-1!==g){const b=o.data[g];Il(f),b.contentQueries(2,a[g],g)}}}function Zc(o,a,c,d,f,g,b,C,I,x,O){const U=a.blueprint.slice();return U[0]=f,U[2]=76|d,(null!==O||o&&1024&o[2])&&(U[2]|=1024),uo(U),U[3]=U[15]=o,U[8]=c,U[10]=b||o&&o[10],U[11]=C||o&&o[11],U[12]=I||o&&o[12]||null,U[9]=x||o&&o[9]||null,U[6]=g,U[20]=function Yu(){return $s++}(),U[21]=O,U[16]=2==a.type?o[16]:U,U}function Hl(o,a,c,d,f){let g=o.data[a];if(null===g)g=function nb(o,a,c,d,f){const g=Ia(),b=Cl(),I=o.data[a]=function Bh(o,a,c,d,f,g){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?g:g&&g.parent,c,a,d,f);return null===o.firstChild&&(o.firstChild=I),null!==g&&(b?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(o,a,c,d,f),function Xd(){return at.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=c,g.value=d,g.attrs=f;const b=function Bo(){const o=at.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===b?-1:b.injectorIndex}return Ci(g,!0),g}function ad(o,a,c,d){if(0===c)return-1;const f=a.length;for(let g=0;g<c;g++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function o_(o,a,c){Dl(a);try{const d=o.viewQuery;null!==d&&g_(1,d,c);const f=o.template;null!==f&&a_(o,a,f,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&s_(o,a),o.staticViewQueries&&g_(2,o.viewQuery,c);const g=o.components;null!==g&&function NA(o,a){for(let c=0;c<a.length;c++)jA(o,a[c])}(a,g)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,Ec()}}function qp(o,a,c,d){const f=a[2];if(128!=(128&f)){Dl(a);try{uo(a),function Su(o){return at.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&a_(o,a,c,2,d);const b=3==(3&f);if(b){const x=o.preOrderCheckHooks;null!==x&&ip(a,x,null)}else{const x=o.preOrderHooks;null!==x&&Dc(a,x,0,null),rh(a,0)}if(function ab(o){for(let a=qc(o);null!==a;a=ed(a)){if(!a[2])continue;const c=a[9];for(let d=0;d<c.length;d++){const f=c[d],g=f[3];0==(512&f[2])&&El(g,1),f[2]|=512}}}(a),function PC(o){for(let a=qc(o);null!==a;a=ed(a))for(let c=10;c<a.length;c++){const d=a[c],f=d[1];Ms(d)&&qp(f,d,f.template,d[8])}}(a),null!==o.contentQueries&&s_(o,a),b){const x=o.contentCheckHooks;null!==x&&ip(a,x)}else{const x=o.contentHooks;null!==x&&Dc(a,x,1),rh(a,1)}!function tb(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)Rs(~f);else{const g=f,b=c[++d],C=c[++d];Sa(b,g),C(2,a[g])}}}finally{Rs(-1)}}(o,a);const C=o.components;null!==C&&function Ul(o,a){for(let c=0;c<a.length;c++)f_(o,a[c])}(a,C);const I=o.viewQuery;if(null!==I&&g_(2,I,d),b){const x=o.viewCheckHooks;null!==x&&ip(a,x)}else{const x=o.viewHooks;null!==x&&Dc(a,x,2),rh(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,El(a[3],-1))}finally{Ec()}}}function ZN(o,a,c,d){const f=a[10],b=No(a);try{!b&&f.begin&&f.begin(),b&&o_(o,a,d),qp(o,a,c,d)}finally{!b&&f.end&&f.end()}}function a_(o,a,c,d,f){const g=rr(),b=2&d;try{Rs(-1),b&&a.length>22&&QE(o,a,22,!1),c(d,f)}finally{Rs(g)}}function rb(o,a,c){if(gl(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const b=o.data[g];b.contentQueries&&b.contentQueries(1,c[g],g)}}}function l_(o,a,c){!Lo()||(function VA(o,a,c,d){const f=c.directiveStart,g=c.directiveEnd;o.firstCreatePass||ir(c,a),Tn(d,a);const b=c.initialInputs;for(let C=f;C<g;C++){const I=o.data[C],x=qi(I);x&&RC(a,c,I);const O=Ps(a,o,C,c);Tn(O,a),null!==b&&UA(0,C-f,O,I,0,b),x&&(Er(c.index,a)[8]=O)}}(o,a,c,nr(c,a)),128==(128&c.flags)&&function u_(o,a,c){const d=c.directiveStart,f=c.directiveEnd,g=c.index,b=function tp(){return at.lFrame.currentDirectiveIndex}();try{Rs(g);for(let C=d;C<f;C++){const I=o.data[C],x=a[C];Aa(C),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&kC(I,x)}}finally{Rs(-1),Aa(b)}}(o,a,c))}function Wp(o,a,c=nr){const d=a.localNames;if(null!==d){let f=a.index+1;for(let g=0;g<d.length;g+=2){const b=d[g+1],C=-1===b?c(a,o):o[b];o[f++]=C}}}function ib(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=sb(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function sb(o,a,c,d,f,g,b,C,I,x){const O=22+d,U=O+f,Q=function FA(o,a){const c=[];for(let d=0;d<a;d++)c.push(d<o?null:xt);return c}(O,U),ie="function"==typeof x?x():x;return Q[1]={type:o,blueprint:Q,template:c,queries:null,viewQuery:C,declTNode:a,data:Q.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:I,consts:ie,incompleteFirstPass:!1}}function c_(o,a,c,d){const f=__(a);null===c?f.push(d):(f.push(c),o.firstCreatePass&&ub(o).push(d,f.length-1))}function ob(o,a,c){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(a,f):c[d]=[a,f]}return c}function Lr(o,a,c,d,f,g,b,C){const I=nr(a,c);let O,x=a.inputs;!C&&null!=x&&(O=x[d])?(FC(o,c,O,d,f),_l(a)&&function xC(o,a){const c=Er(a,o);16&c[2]||(c[2]|=32)}(c,a.index)):3&a.type&&(d=function Kp(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=b?b(f,a.value||"",d):f,g.setProperty(I,d,f))}function Yp(o,a,c,d){let f=!1;if(Lo()){const g=function jl(o,a,c){const d=o.directiveRegistry;let f=null;if(d)for(let g=0;g<d.length;g++){const b=d[g];KE(c,b.selectors,!1)&&(f||(f=[]),Mc(ir(c,a),o,b.type),qi(b)?(ia(o,c),f.unshift(b)):f.push(b))}return f}(o,a,c),b=null===d?null:{"":-1};if(null!==g){f=!0,Uh(c,o.data.length,g.length);for(let O=0;O<g.length;O++){const U=g[O];U.providersResolver&&U.providersResolver(U)}let C=!1,I=!1,x=ad(o,a,g.length,null);for(let O=0;O<g.length;O++){const U=g[O];c.mergedAttrs=Sc(c.mergedAttrs,U.hostAttrs),d_(o,c,a,x,U),BA(x,U,b),null!==U.contentQueries&&(c.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(c.flags|=128);const Q=U.type.prototype;!C&&(Q.ngOnChanges||Q.ngOnInit||Q.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(c.index),C=!0),!I&&(Q.ngOnChanges||Q.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(c.index),I=!0),x++}!function AC(o,a){const d=a.directiveEnd,f=o.data,g=a.attrs,b=[];let C=null,I=null;for(let x=a.directiveStart;x<d;x++){const O=f[x],U=O.inputs,Q=null===g||qE(a)?null:HA(U,g);b.push(Q),C=ob(U,x,C),I=ob(O.outputs,x,I)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=C,a.outputs=I}(o,c)}b&&function cd(o,a,c){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const g=c[a[f+1]];if(null==g)throw new ke(-301,!1);d.push(a[f],g)}}}(c,d,b)}return c.mergedAttrs=Sc(c.mergedAttrs,c.attrs),f}function ra(o,a,c,d,f,g){const b=g.hostBindings;if(b){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const I=~a.index;(function ki(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(C)!=I&&C.push(I),C.push(d,f,b)}}function kC(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function ia(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function BA(o,a,c){if(c){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)c[a.exportAs[d]]=o;qi(a)&&(c[""]=o)}}function Uh(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}function d_(o,a,c,d,f){o.data[d]=f;const g=f.factory||(f.factory=ao(f.type)),b=new ka(g,qi(f),Kc);o.blueprint[d]=b,c[d]=b,ra(o,a,0,d,ad(o,c,f.hostVars,xt),f)}function RC(o,a,c){const d=nr(a,o),f=ib(c),g=o[10],b=p_(o,Zc(o,f,null,c.onPush?32:16,d,a,g,g.createRenderer(d,c),null,null,null));o[a.index]=b}function kn(o,a,c,d,f,g){const b=nr(o,a);!function h_(o,a,c,d,f,g,b){if(null==g)o.removeAttribute(a,f,c);else{const C=null==b?ge(g):b(g,d||"",f);o.setAttribute(a,f,C,c)}}(a[11],b,g,o.value,c,d,f)}function UA(o,a,c,d,f,g){const b=g[a];if(null!==b){const C=d.setInput;for(let I=0;I<b.length;){const x=b[I++],O=b[I++],U=b[I++];null!==C?d.setInput(c,U,x,O):c[O]=U}}}function HA(o,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,o[f],a[d+1])),d+=2}else d+=2;else d+=4}return c}function OC(o,a,c,d){return new Array(o,!0,!1,a,null,0,d,c,null,null)}function f_(o,a){const c=Er(a,o);if(Ms(c)){const d=c[1];48&c[2]?qp(d,c,d.template,c[8]):c[5]>0&&Yc(c)}}function Yc(o){for(let d=qc(o);null!==d;d=ed(d))for(let f=10;f<d.length;f++){const g=d[f];if(512&g[2]){const b=g[1];qp(b,g,b.template,g[8])}else g[5]>0&&Yc(g)}const c=o[1].components;if(null!==c)for(let d=0;d<c.length;d++){const f=Er(c[d],o);Ms(f)&&f[5]>0&&Yc(f)}}function jA(o,a){const c=Er(a,o),d=c[1];(function Qp(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(d,c),o_(d,c,c[8])}function p_(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function lb(o){for(;o;){o[2]|=32;const a=Za(o);if(ya(o)&&!a)return o;o=a}return null}function cb(o){!function Jp(o){for(let a=0;a<o.components.length;a++){const c=o.components[a],d=Xu(c);if(null!==d){const f=d[1];ZN(f,d,f.template,c)}}}(o[8])}function g_(o,a,c){Il(0),a(o,c)}const NC=(()=>Promise.resolve(null))();function __(o){return o[7]||(o[7]=[])}function ub(o){return o.cleanup||(o.cleanup=[])}function db(o,a,c){return(null===o||qi(o))&&(c=function Yd(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(c[a.index])),c[11]}function y_(o,a){const c=o[9],d=c?c.get(jc,null):null;d&&d.handleError(a)}function FC(o,a,c,d,f){for(let g=0;g<c.length;){const b=c[g++],C=c[g++],I=a[b],x=o.data[b];null!==x.setInput?x.setInput(I,f,d,C):I[C]=f}}function Ja(o,a,c){const d=wl(a,o);!function xE(o,a,c){o.setValue(a,c)}(o[11],d,c)}function v_(o,a,c){let d=c?o.styles:null,f=c?o.classes:null,g=0;if(null!==a)for(let b=0;b<a.length;b++){const C=a[b];"number"==typeof C?g=C:1==g?f=ve(f,C):2==g&&(d=ve(d,C+": "+a[++b]+";"))}c?o.styles=d:o.stylesWithoutHost=d,c?o.classes=f:o.classesWithoutHost=f}function WA(){const o=Fn();nh(Se()[1],o)}function pb(o){let a=function VC(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const d=[o];for(;a;){let f;if(qi(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ke(903,!1);f=a.\u0275dir}if(f){if(c){d.push(f);const b=o;b.inputs=b_(o.inputs),b.declaredInputs=b_(o.declaredInputs),b.outputs=b_(o.outputs);const C=f.hostBindings;C&&YA(o,C);const I=f.viewQuery,x=f.contentQueries;if(I&&BC(o,I),x&&UC(o,x),oe(o.inputs,f.inputs),oe(o.declaredInputs,f.declaredInputs),oe(o.outputs,f.outputs),qi(f)&&f.data.animation){const O=o.data;O.animation=(O.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let b=0;b<g.length;b++){const C=g[b];C&&C.ngInherit&&C(o),C===pb&&(c=!1)}}a=Object.getPrototypeOf(a)}!function ZA(o){let a=0,c=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=Sc(f.hostAttrs,c=Sc(c,f.hostAttrs))}}(d)}function b_(o){return o===ur?{}:o===Mt?[]:o}function BC(o,a){const c=o.viewQuery;o.viewQuery=c?(d,f)=>{a(d,f),c(d,f)}:a}function UC(o,a){const c=o.contentQueries;o.contentQueries=c?(d,f,g)=>{a(d,f,g),c(d,f,g)}:a}function YA(o,a){const c=o.hostBindings;o.hostBindings=c?(d,f)=>{a(d,f),c(d,f)}:a}let w_=null;function Qc(){if(!w_){const o=qe.Symbol;if(o&&o.iterator)w_=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<a.length;++c){const d=a[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(w_=d)}}}return w_}function em(o){return!!el(o)&&(Array.isArray(o)||!(o instanceof Map)&&Qc()in o)}function el(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Vr(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function gb(o,a,c,d){const f=Se();return Vr(f,Uo(),a)&&(Vt(),kn(hn(),f,o,a,c,d)),gb}function Xc(o,a,c,d,f,g){const C=function bo(o,a,c,d){const f=Vr(o,a,c);return Vr(o,a+1,d)||f}(o,function Wi(){return at.lFrame.bindingIndex}(),c,f);return Ki(2),C?a+ge(c)+d+ge(f)+g:xt}function $l(o,a,c,d,f,g,b,C){const I=Se(),x=Vt(),O=o+22,U=x.firstCreatePass?function Kt(o,a,c,d,f,g,b,C,I){const x=a.consts,O=Hl(a,o,4,b||null,Ei(x,C));Yp(a,c,O,Ei(x,I)),nh(a,O);const U=O.tViews=sb(2,O,d,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,x);return null!==a.queries&&(a.queries.template(a,O),U.queries=a.queries.embeddedTView(O)),O}(O,x,I,a,c,d,f,g,b):x.data[O];Ci(U,!1);const Q=I[11].createComment("");Dv(x,I,Q,U),Tn(Q,I),p_(I,I[O]=OC(Q,I,Q,U)),so(U)&&l_(x,I,U),null!=b&&Wp(I,U,C)}function E_(o){return function co(o,a){return o[a]}(function _c(){return at.lFrame.contextLView}(),22+o)}function Ib(o,a,c){const d=Se();return Vr(d,Uo(),a)&&Lr(Vt(),hn(),d,o,a,d[11],c,!1),Ib}function pd(o,a,c,d,f){const b=f?"class":"style";FC(o,c,a.inputs[b],b,d)}function On(o,a,c,d){const f=Se(),g=Vt(),b=22+o,C=f[11],I=f[b]=wv(C,a,function Ic(){return at.lFrame.currentNamespace}()),x=g.firstCreatePass?function jC(o,a,c,d,f,g,b){const C=a.consts,x=Hl(a,o,2,f,Ei(C,g));return Yp(a,c,x,Ei(C,b)),null!==x.attrs&&v_(x,x.attrs,!1),null!==x.mergedAttrs&&v_(x,x.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,x),x}(b,g,f,0,a,c,d):g.data[b];Ci(x,!0);const O=x.mergedAttrs;null!==O&&Go(C,I,O);const U=x.classes;null!==U&&Mv(C,I,U);const Q=x.styles;return null!==Q&&xv(C,I,Q),64!=(64&x.flags)&&Dv(g,f,I,x),0===function Tu(){return at.lFrame.elementDepthCount}()&&Tn(I,f),function mc(){at.lFrame.elementDepthCount++}(),so(x)&&(l_(g,f,x),rb(g,x,f)),null!==d&&Wp(f,x),On}function Ut(){let o=Fn();Cl()?Da():(o=o.parent,Ci(o,!1));const a=o;!function Fo(){at.lFrame.elementDepthCount--}();const c=Vt();return c.firstCreatePass&&(nh(c,o),gl(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function ih(o){return 0!=(16&o.flags)}(a)&&pd(c,a,Se(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Ig(o){return 0!=(32&o.flags)}(a)&&pd(c,a,Se(),a.stylesWithoutHost,!1),Ut}function ui(o,a,c,d){return On(o,a,c,d),Ut(),ui}function zh(o,a,c){const d=Se(),f=Vt(),g=o+22,b=f.firstCreatePass?function rx(o,a,c,d,f){const g=a.consts,b=Ei(g,d),C=Hl(a,o,8,"ng-container",b);return null!==b&&v_(C,b,!0),Yp(a,c,C,Ei(g,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(g,f,d,a,c):f.data[g];Ci(b,!0);const C=d[g]=d[11].createComment("");return Dv(f,d,C,b),Tn(C,d),so(b)&&(l_(f,d,b),rb(f,b,d)),null!=c&&Wp(d,b),zh}function es(){let o=Fn();const a=Vt();return Cl()?Da():(o=o.parent,Ci(o,!1)),a.firstCreatePass&&(nh(a,o),gl(o)&&a.queries.elementEnd(o)),es}function GC(){return Se()}function Db(o){return!!o&&"function"==typeof o.then}function Tb(o){return!!o&&"function"==typeof o.subscribe}const Jc=Tb;function im(o,a,c,d){const f=Se(),g=Vt(),b=Fn();return Sb(g,f,f[11],b,o,a,0,d),im}function md(o,a){const c=Fn(),d=Se(),f=Vt();return Sb(f,d,db(xa(f.data),c,d),c,o,a),md}function Sb(o,a,c,d,f,g,b,C){const I=so(d),O=o.firstCreatePass&&ub(o),U=a[8],Q=__(a);let ie=!0;if(3&d.type||C){const et=nr(d,a),ct=C?C(et):et,Tt=Q.length,Pe=C?sn=>C(jn(sn[d.index])):d.index;let wt=null;if(!C&&I&&(wt=function ix(o,a,c,d){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const b=f[g];if(b===c&&f[g+1]===d){const C=a[7],I=f[g+2];return C.length>I?C[I]:null}"string"==typeof b&&(g+=2)}return null}(o,a,f,d.index)),null!==wt)(wt.__ngLastListenerFn__||wt).__ngNextListenerFn__=g,wt.__ngLastListenerFn__=g,ie=!1;else{g=qC(d,a,U,g,!1);const sn=c.listen(ct,f,g);Q.push(g,sn),O&&O.push(f,Pe,Tt,Tt+1)}}else g=qC(d,a,U,g,!1);const De=d.outputs;let Le;if(ie&&null!==De&&(Le=De[f])){const et=Le.length;if(et)for(let ct=0;ct<et;ct+=2){const Qn=a[Le[ct]][Le[ct+1]].subscribe(g),Cf=Q.length;Q.push(g,Qn),O&&O.push(f,d.index,Cf,-(Cf+1))}}}function zC(o,a,c,d){try{return!1!==c(d)}catch(f){return y_(o,f),!1}}function qC(o,a,c,d,f){return function g(b){if(b===Function)return d;lb(2&o.flags?Er(o.index,a):a);let I=zC(a,0,d,b),x=g.__ngNextListenerFn__;for(;x;)I=zC(a,0,x,b)&&I,x=x.__ngNextListenerFn__;return f&&!1===I&&(b.preventDefault(),b.returnValue=!1),I}}function WC(o=1){return function Mu(o){return(at.lFrame.contextLView=function Cc(o,a){for(;o>0;)a=a[15],o--;return a}(o,at.lFrame.contextLView))[8]}(o)}function KC(o,a){let c=null;const d=function sA(o){const a=o.attrs;if(null!=a){const c=a.indexOf(5);if(0==(1&c))return a[c+1]}return null}(o);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===d?KE(o,g,!0):kv(d,g))return f}else c=f}return c}function eu(o){const a=Se()[16][6];if(!a.projection){const d=a.projection=Nr(o?o.length:1,null),f=d.slice();let g=a.child;for(;null!==g;){const b=o?KC(g,o):0;null!==b&&(f[b]?f[b].projectionNext=g:d[b]=g,f[b]=g),g=g.next}}}function Zt(o,a=0,c){const d=Se(),f=Vt(),g=Hl(f,22+o,16,null,c||null);null===g.projection&&(g.projection=a),Da(),64!=(64&g.flags)&&function jE(o,a,c){Av(a[11],0,a,c,PE(o,c,a),BE(c.parent||a[6],c,a))}(f,d,g)}function xb(o,a,c,d,f){const g=o[c+1],b=null===a;let C=d?na(g):Bl(g),I=!1;for(;0!==C&&(!1===I||b);){const O=o[C+1];JC(o[C],a)&&(I=!0,o[C+1]=d?Xg(O):Kv(O)),C=d?na(O):Bl(O)}I&&(o[c+1]=d?Kv(g):Xg(g))}function JC(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&go(o,a)>=0}function Rb(o,a,c){return zs(o,a,c,!1),Rb}function _d(o,a){return zs(o,a,null,!0),_d}function zs(o,a,c,d){const f=Se(),g=Vt(),b=Ki(2);g.firstUpdatePass&&function Pb(o,a,c,d){const f=o.data;if(null===f[c+1]){const g=f[rr()],b=function D_(o,a){return a>=o.expandoStartIndex}(o,c);(function oI(o,a){return 0!=(o.flags&(a?16:32))})(g,d)&&null===a&&!b&&(a=!1),a=function rI(o,a,c,d){const f=xa(o);let g=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(c=il(c=T_(null,o,a,c,d),a.attrs,d),g=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==f)if(c=T_(f,o,a,c,d),null===g){let I=function lx(o,a,c){const d=c?a.classBindings:a.styleBindings;if(0!==Bl(d))return o[na(d)]}(o,a,d);void 0!==I&&Array.isArray(I)&&(I=T_(null,o,a,I[1],d),I=il(I,a.attrs,d),function iI(o,a,c,d){o[na(c?a.classBindings:a.styleBindings)]=d}(o,a,d,I))}else g=function sI(o,a,c){let d;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)d=il(d,o[g].hostAttrs,c);return il(d,a.attrs,c)}(o,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),c}(f,g,a,d),function sx(o,a,c,d,f,g){let b=g?a.classBindings:a.styleBindings,C=na(b),I=Bl(b);o[d]=c;let O,x=!1;if(Array.isArray(c)){const U=c;O=U[1],(null===O||go(U,O)>0)&&(x=!0)}else O=c;if(f)if(0!==I){const Q=na(o[C+1]);o[d+1]=Qg(Q,C),0!==Q&&(o[Q+1]=Vh(o[Q+1],d)),o[C+1]=function xA(o,a){return 131071&o|a<<17}(o[C+1],d)}else o[d+1]=Qg(C,0),0!==C&&(o[C+1]=Vh(o[C+1],d)),C=d;else o[d+1]=Qg(I,0),0===C?C=d:o[I+1]=Vh(o[I+1],d),I=d;x&&(o[d+1]=Kv(o[d+1])),xb(o,O,d,!0),xb(o,O,d,!1),function XC(o,a,c,d,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&go(g,a)>=0&&(c[d+1]=Xg(c[d+1]))}(a,O,o,d,g),b=Qg(C,I),g?a.classBindings=b:a.styleBindings=b}(f,g,a,c,b,d)}}(g,o,b,d),a!==xt&&Vr(f,b,a)&&function S_(o,a,c,d,f,g,b,C){if(!(3&a.type))return;const I=o.data,x=I[C+1];A_(function Zv(o){return 1==(1&o)}(x)?Yh(I,a,c,f,Bl(x),b):void 0)||(A_(g)||function wC(o){return 2==(2&o)}(x)&&(g=Yh(I,null,c,f,C,b)),function nA(o,a,c,d,f){if(a)f?o.addClass(c,d):o.removeClass(c,d);else{let g=-1===d.indexOf("-")?void 0:gr.DashCase;null==f?o.removeStyle(c,d,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=gr.Important),o.setStyle(c,d,f,g))}}(d,b,wl(rr(),c),f,g))}(g,g.data[rr()],f,f[11],o,f[b+1]=function x_(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=me(Hs(o)))),o}(a,c),d,b)}function T_(o,a,c,d,f){let g=null;const b=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<b&&(g=a[C],d=il(d,g.hostAttrs,f),g!==o);)C++;return null!==o&&(c.directiveStylingLast=C),d}function il(o,a,c){const d=c?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const b=a[g];"number"==typeof b?f=b:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Fr(o,b,!!c||a[++g]))}return void 0===o?null:o}function Yh(o,a,c,d,f,g){const b=null===a;let C;for(;f>0;){const I=o[f],x=Array.isArray(I),O=x?I[1]:I,U=null===O;let Q=c[f+1];Q===xt&&(Q=U?Mt:void 0);let ie=U?Bu(Q,d):O===d?Q:void 0;if(x&&!A_(ie)&&(ie=Bu(I,d)),A_(ie)&&(C=ie,b))return C;const De=o[f+1];f=b?na(De):Bl(De)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(C=Bu(I,d))}return C}function A_(o){return void 0!==o}function aI(o,a=""){const c=Se(),d=Vt(),f=o+22,g=d.firstCreatePass?Hl(d,f,1,a,null):d.data[f],b=c[f]=function bv(o,a){return o.createText(a)}(c[11],a);Dv(d,c,b,g),Ci(g,!1)}function Nb(o){return Qh("",o,""),Nb}function Qh(o,a,c){const d=Se(),f=function jh(o,a,c,d){return Vr(o,Uo(),c)?a+ge(c)+d:xt}(d,o,a,c);return f!==xt&&Ja(d,rr(),f),Qh}function Fb(o,a,c,d,f){const g=Se(),b=Xc(g,o,a,c,d,f);return b!==xt&&Ja(g,rr(),b),Fb}function nf(o,a,c){const d=Se();return Vr(d,Uo(),a)&&Lr(Vt(),hn(),d,o,a,d[11],c,!0),nf}function ql(o,a,c){const d=Se();if(Vr(d,Uo(),a)){const g=Vt(),b=hn();Lr(g,b,d,o,a,db(xa(g.data),b,d),c,!0)}return ql}const Wl=void 0;var Ln=["en",[["a","p"],["AM","PM"],Wl],[["AM","PM"],Wl,Wl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wl,"{1} 'at' {0}",Wl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function mx(o){const c=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let Oi={};function hm(o){const a=function zb(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=tu(a);if(c)return c;const d=a.split("-")[0];if(c=tu(d),c)return c;if("en"===d)return Ln;throw new ke(701,!1)}function P_(o){return hm(o)[yt.PluralCase]}function tu(o){return o in Oi||(Oi[o]=qe.ng&&qe.ng.common&&qe.ng.common.locales&&qe.ng.common.locales[o]),Oi[o]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const Kl="en-US";let gI=Kl;function K_(o,a,c,d,f){if(o=ne(o),Array.isArray(o))for(let g=0;g<o.length;g++)K_(o[g],a,c,d,f);else{const g=Vt(),b=Se();let C=Rh(o)?o:ne(o.provide),I=vo(o);const x=Fn(),O=1048575&x.providerIndexes,U=x.directiveStart,Q=x.providerIndexes>>20;if(Rh(o)||!o.multi){const ie=new ka(I,f,Kc),De=df(C,a,f?O:O+Q,U);-1===De?(Mc(ir(x,b),g,C),Z_(g,o,a.length),a.push(C),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),c.push(ie),b.push(ie)):(c[De]=ie,b[De]=ie)}else{const ie=df(C,a,O+Q,U),De=df(C,a,O,O+Q),Le=ie>=0&&c[ie],et=De>=0&&c[De];if(f&&!et||!f&&!Le){Mc(ir(x,b),g,C);const ct=function jx(o,a,c,d,f){const g=new ka(o,c,Kc);return g.multi=[],g.index=a,g.componentProviders=0,uf(g,f,d&&!c),g}(f?r0:n0,c.length,f,d,I);!f&&et&&(c[De].providerFactory=ct),Z_(g,o,a.length,0),a.push(C),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),c.push(ct),b.push(ct)}else Z_(g,o,ie>-1?ie:De,uf(c[f?De:ie],I,!f&&d));!f&&d&&et&&c[De].componentProviders++}}}function Z_(o,a,c,d){const f=Rh(a),g=function ON(o){return!!o.useClass}(a);if(f||g){const I=(g?ne(a.useClass):a).prototype.ngOnDestroy;if(I){const x=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const O=x.indexOf(c);-1===O?x.push(c,[d,I]):x[O+1].push(d,I)}else x.push(c,I)}}}function uf(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function df(o,a,c,d){for(let f=c;f<d;f++)if(a[f]===o)return f;return-1}function n0(o,a,c,d){return ym(this.multi,[])}function r0(o,a,c,d){const f=this.multi;let g;if(this.providerFactory){const b=this.providerFactory.componentProviders,C=Ps(c,c[1],this.providerFactory.index,d);g=C.slice(0,b),ym(f,g);for(let I=b;I<C.length;I++)g.push(C[I])}else g=[],ym(f,g);return g}function ym(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function hf(o,a=[]){return c=>{c.providersResolver=(d,f)=>function BI(o,a,c){const d=Vt();if(d.firstCreatePass){const f=qi(o);K_(c,d.data,d.blueprint,f,!0),K_(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class s0{resolveComponentFactory(a){throw function $x(o){const a=Error(`No component factory found for ${me(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let vd=(()=>{class o{}return o.NULL=new s0,o})();class bd{}class o0{}class HI{}function jI(){return su(Fn(),Se())}function su(o,a){return new wd(nr(o,a))}let wd=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=jI,o})();function a0(o){return o instanceof wd?o.nativeElement:o}class ou{}let c0=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function $I(){const o=Se(),c=Er(Fn().index,o);return(Hn(c)?c:o)[11]}(),o})(),zx=(()=>{class o{}return o.\u0275prov=rn({token:o,providedIn:"root",factory:()=>null}),o})();class vm{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const u0=new vm("14.0.6"),d0={};function au(o,a,c,d,f=!1){for(;null!==c;){const g=a[c.index];if(null!==g&&d.push(jn(g)),oi(g))for(let C=10;C<g.length;C++){const I=g[C],x=I[1].firstChild;null!==x&&au(I[1],I,x,d)}const b=c.type;if(8&b)au(o,a,c.child,d);else if(32&b){const C=Ah(c,a);let I;for(;I=C();)d.push(I)}else if(16&b){const C=Tv(a,c);if(Array.isArray(C))d.push(...C);else{const I=Za(a[16]);au(I[1],I,C,d,!0)}}c=f?c.projectionNext:c.next}return d}class Ed{constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,c=a[1];return au(c,a,c.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(oi(a)){const c=a[8],d=c?c.indexOf(this):-1;d>-1&&(Lp(a,d),Zo(c,d))}this._attachedToViewContainer=!1}RE(this._lView[1],this._lView)}onDestroy(a){c_(this._lView[1],this._lView,null,a)}markForCheck(){lb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function m_(o,a,c){const d=a[10];d.begin&&d.begin();try{qp(o,a,o.template,c)}catch(f){throw y_(a,f),f}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function YS(o,a){rd(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ke(902,!1);this._appRef=a}}class qx extends Ed{constructor(a){super(a),this._view=a}detectChanges(){cb(this._view)}checkNoChanges(){}get context(){return null}}class h0 extends vd{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=$t(a);return new Q_(c,this.ngModule)}}function GI(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class Y_{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,d){const f=this.injector.get(a,d0,d);return f!==d0||c===d0?f:this.parentInjector.get(a,c,d)}}class Q_ extends HI{constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function lA(o){return o.map(aA).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return GI(this.componentDef.inputs)}get outputs(){return GI(this.componentDef.outputs)}create(a,c,d,f){let g=(f=f||this.ngModule)instanceof Mi?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const b=g?new Y_(a,g):a,C=b.get(ou,null);if(null===C)throw new ke(407,!1);const I=b.get(zx,null),x=C.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",U=d?function ld(o,a,c){return o.selectRootElement(a,c===Jt.ShadowDom)}(x,d,this.componentDef.encapsulation):wv(C.createRenderer(null,this.componentDef),O,function f0(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(O)),Q=this.componentDef.onPush?288:272,ie=function qA(o,a){return{components:[],scheduler:o||_,clean:NC,playerHandler:a||null,flags:0}}(),De=sb(0,null,null,1,0,null,null,null,null,null),Le=Zc(null,De,ie,Q,null,null,C,x,I,b,null);let et,ct;Dl(Le);try{const Tt=function hb(o,a,c,d,f,g){const b=c[1];c[22]=o;const I=Hl(b,22,2,"#host",null),x=I.mergedAttrs=a.hostAttrs;null!==x&&(v_(I,x,!0),null!==o&&(Go(f,o,x),null!==I.classes&&Mv(f,o,I.classes),null!==I.styles&&xv(f,o,I.styles)));const O=d.createRenderer(o,a),U=Zc(c,ib(a),null,a.onPush?32:16,c[22],I,d,O,g||null,null,null);return b.firstCreatePass&&(Mc(ir(I,c),b,a.type),ia(b,I),Uh(I,c.length,1)),p_(c,U),c[22]=U}(U,this.componentDef,Le,C,x);if(U)if(d)Go(x,U,["ng-version",u0.full]);else{const{attrs:Pe,classes:wt}=function kN(o){const a=[],c=[];let d=1,f=2;for(;d<o.length;){let g=o[d];if("string"==typeof g)2===f?""!==g&&a.push(g,o[++d]):8===f&&c.push(g);else{if(!ta(f))break;f=g}d++}return{attrs:a,classes:c}}(this.componentDef.selectors[0]);Pe&&Go(x,U,Pe),wt&&wt.length>0&&Mv(x,U,wt.join(" "))}if(ct=Po(De,22),void 0!==c){const Pe=ct.projection=[];for(let wt=0;wt<this.ngContentSelectors.length;wt++){const sn=c[wt];Pe.push(null!=sn?Array.from(sn):null)}}et=function fb(o,a,c,d,f){const g=c[1],b=function Zp(o,a,c){const d=Fn();o.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),d_(o,d,a,ad(o,a,1,null),c));const f=Ps(a,o,d.directiveStart,d);Tn(f,a);const g=nr(d,a);return g&&Tn(g,a),f}(g,c,a);if(d.components.push(b),o[8]=b,null!==f)for(const I of f)I(b,a);if(a.contentQueries){const I=Fn();a.contentQueries(1,b,I.directiveStart)}const C=Fn();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Rs(C.index),ra(c[1],C,0,C.directiveStart,C.directiveEnd,a),kC(a,b)),b}(Tt,this.componentDef,Le,ie,[WA]),o_(De,Le,null)}finally{Ec()}return new sl(this.componentType,et,su(ct,Le),Le,ct)}}class sl extends class Gx{}{constructor(a,c,d,f,g){super(),this.location=d,this._rootLView=f,this._tNode=g,this.instance=c,this.hostView=this.changeDetectorRef=new qx(f),this.componentType=a}get injector(){return new Ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function bm(o,a){return new zI(o,a??null)}class zI extends bd{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new h0(this);const d=Tr(a);this._bootstrapComponents=de(d.bootstrap),this._r3Injector=oC(a,c,[{provide:bd,useValue:this},{provide:vd,useValue:this.componentFactoryResolver}],me(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(a)}get(a,c=Qa.THROW_IF_NOT_FOUND,d=bt.Default){return a===Qa||a===bd||a===rC?this:this._r3Injector.get(a,c,d)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class J_ extends o0{constructor(a){super(),this.moduleType=a}create(a){return new zI(this.moduleType,a)}}class p0 extends bd{constructor(a,c,d){super(),this.componentFactoryResolver=new h0(this),this.instance=null;const f=new Lv([...a,{provide:bd,useValue:this},{provide:vd,useValue:this.componentFactoryResolver}],c||F(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Cd(o,a=null,c=null){return new p0(o,a,c).injector}function XI(o,a,c,d){return function v0(o,a,c,d,f,g){const b=a+c;return Vr(o,b,f)?function tl(o,a,c){return o[a]=c}(o,b+1,g?d.call(g,f):d(f)):function Id(o,a){const c=o[a];return c===xt?void 0:c}(o,b+1)}(Se(),function hr(){const o=at.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}(),o,a,c,d)}function Im(o){return a=>{setTimeout(o,void 0,a)}}const ol=class w0 extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,d){let f=a,g=c||(()=>null),b=d;if(a&&"object"==typeof a){const I=a;f=I.next?.bind(I),g=I.error?.bind(I),b=I.complete?.bind(I)}this.__isAsync&&(g=Im(g),f&&(f=Im(f)),b&&(b=Im(b)));const C=super.subscribe({next:f,error:g,complete:b});return a instanceof re.w0&&a.add(C),C}};function oM(){return this._results[Qc()]()}class Dm{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Qc(),d=Dm.prototype;d[c]||(d[c]=oM)}get changes(){return this._changes||(this._changes=new ol)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const d=this;d.dirty=!1;const f=Mn(a);(this._changesDetected=!function oh(o,a,c){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],g=a[d];if(c&&(f=c(f),g=c(g)),g!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Tm=(()=>{class o{}return o.__NG_ELEMENT_ID__=aD,o})();const sD=Tm,oD=class extends sD{constructor(a,c,d){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(a,c){const d=this._declarationTContainer.tViews,f=Zc(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,c||null);f[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(f[19]=b.createEmbeddedView(d)),o_(d,f,a),new Ed(f)}};function aD(){return Sm(Fn(),Se())}function Sm(o,a){return 4&o.type?new oD(a,o,su(o,a)):null}let di=(()=>{class o{}return o.__NG_ELEMENT_ID__=ny,o})();function ny(){return E0(Fn(),Se())}const uu=di,Am=class extends uu{constructor(a,c,d){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=d}get element(){return su(this._hostTNode,this._hostLView)}get injector(){return new Ii(this._hostTNode,this._hostLView)}get parentInjector(){const a=xc(this._hostTNode,this._hostLView);if(lp(a)){const c=ho(a,this._hostLView),d=Tl(a);return new Ii(c[1].data[d+8],c)}return new Ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=qs(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,c,d){let f,g;"number"==typeof d?f=d:null!=d&&(f=d.index,g=d.injector);const b=a.createEmbeddedView(c||{},g);return this.insert(b,f),b}createComponent(a,c,d,f,g){const b=a&&!function Ml(o){return"function"==typeof o}(a);let C;if(b)C=c;else{const U=c||{};C=U.index,d=U.injector,f=U.projectableNodes,g=U.environmentInjector||U.ngModuleRef}const I=b?a:new Q_($t(a)),x=d||this.parentInjector;if(!g&&null==I.ngModule){const Q=(b?x:this.parentInjector).get(Mi,null);Q&&(g=Q)}const O=I.create(x,f,void 0,g);return this.insert(O.hostView,C),O}insert(a,c){const d=a._lView,f=d[1];if(function wa(o){return oi(o[3])}(d)){const O=this.indexOf(a);if(-1!==O)this.detach(O);else{const U=d[3],Q=new Am(U,U[6],U[3]);Q.detach(Q.indexOf(a))}}const g=this._adjustIndex(c),b=this._lContainer;!function XS(o,a,c,d){const f=10+d,g=c.length;d>0&&(c[f-1][4]=a),d<g-10?(a[4]=c[f],Nc(c,10+d,a)):(c.push(a),a[4]=null),a[3]=c;const b=a[17];null!==b&&c!==b&&function kE(o,a){const c=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===c?o[9]=[a]:c.push(a)}(b,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=64}(f,d,b,g);const C=Sv(g,b),I=d[11],x=nd(I,b[7]);return null!==x&&function Ev(o,a,c,d,f,g){d[0]=f,d[6]=a,rd(o,d,c,1,f,g)}(f,b[6],I,d,x,C),a.attachToViewContainerRef(),Nc(Ql(b),g,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=qs(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),d=Lp(this._lContainer,c);d&&(Zo(Ql(this._lContainer),c),RE(d[1],d))}detach(a){const c=this._adjustIndex(a,-1),d=Lp(this._lContainer,c);return d&&null!=Zo(Ql(this._lContainer),c)?new Ed(d):null}_adjustIndex(a,c=0){return a??this.length+c}};function qs(o){return o[8]}function Ql(o){return o[8]||(o[8]=[])}function E0(o,a){let c;const d=a[o.index];if(oi(d))c=d;else{let f;if(8&o.type)f=jn(d);else{const g=a[11];f=g.createComment("");const b=nr(o,a);td(g,nd(g,b),f,function VE(o,a){return o.nextSibling(a)}(g,b),!1)}a[o.index]=c=OC(d,a,f,o),p_(a,c)}return new Am(c,o,a)}class C0{constructor(a){this.queryList=a,this.matches=null}clone(){return new C0(this.queryList)}setDirty(){this.queryList.setDirty()}}class I0{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const d=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let g=0;g<d;g++){const b=c.getByIndex(g);f.push(this.queries[b.indexInDeclarationView].clone())}return new I0(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==uD(a,c).matches&&this.queries[c].setDirty()}}class ry{constructor(a,c,d=null){this.predicate=a,this.flags=c,this.read=d}}class D0{constructor(a=[]){this.queries=a}elementStart(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,g=this.getByIndex(d).embeddedTView(a,f);g&&(g.indexInDeclarationView=d,null!==c?c.push(g):c=[g])}return null!==c?new D0(c):null}template(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class T0{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new T0(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const g=d[f];this.matchTNodeWithReadOption(a,c,aM(c,g)),this.matchTNodeWithReadOption(a,c,Oa(c,a,g,!1,!1))}else d===Tm?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,Oa(c,a,d,!1,!1))}matchTNodeWithReadOption(a,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===wd||f===di||f===Tm&&4&c.type)this.addMatch(c.index,-2);else{const g=Oa(c,a,f,!1,!1);null!==g&&this.addMatch(c.index,g)}else this.addMatch(c.index,d)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function aM(o,a){const c=o.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===a)return c[d+1];return null}function iy(o,a,c,d){return-1===c?function lM(o,a){return 11&o.type?su(o,a):4&o.type?Sm(o,a):null}(a,o):-2===c?function sy(o,a,c){return c===wd?su(a,o):c===Tm?Sm(a,o):c===di?E0(a,o):void 0}(o,a,d):Ps(o,o[1],c,a)}function pf(o,a,c,d){const f=a[19].queries[d];if(null===f.matches){const g=o.data,b=c.matches,C=[];for(let I=0;I<b.length;I+=2){const x=b[I];C.push(x<0?null:iy(a,g[x],b[I+1],c.metadata.read))}f.matches=C}return f.matches}function xm(o,a,c,d){const f=o.queries.getByIndex(c),g=f.matches;if(null!==g){const b=pf(o,a,f,c);for(let C=0;C<g.length;C+=2){const I=g[C];if(I>0)d.push(b[C/2]);else{const x=g[C+1],O=a[-I];for(let U=10;U<O.length;U++){const Q=O[U];Q[17]===Q[3]&&xm(Q[1],Q,x,d)}if(null!==O[9]){const U=O[9];for(let Q=0;Q<U.length;Q++){const ie=U[Q];xm(ie[1],ie,x,d)}}}}}return d}function S0(o){const a=Se(),c=Vt(),d=yc();Il(d+1);const f=uD(c,d);if(o.dirty&&No(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?xm(c,a,d,[]):pf(c,a,f,d);o.reset(g,a0),o.notifyOnChanges()}return!0}return!1}function A0(o,a,c){const d=Vt();d.firstCreatePass&&(k0(d,new ry(o,a,c),-1),2==(2&a)&&(d.staticViewQueries=!0)),Do(d,Se(),a)}function x0(o,a,c,d){const f=Vt();if(f.firstCreatePass){const g=Fn();k0(f,new ry(a,c,d),g.index),function cM(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(f,o),2==(2&c)&&(f.staticContentQueries=!0)}Do(f,Se(),c)}function M0(){return function cD(o,a){return o[19].queries[a].queryList}(Se(),yc())}function Do(o,a,c){const d=new Dm(4==(4&c));c_(o,a,d,d.destroy),null===a[19]&&(a[19]=new I0),a[19].queries.push(new C0(d))}function k0(o,a,c){null===o.queries&&(o.queries=new D0),o.queries.track(new T0(a,c))}function uD(o,a){return o.queries.getByIndex(a)}function gf(o){const a=$t(o)||Sn(o)||er(o);return null!==a&&a.standalone}function ly(...o){}const V0=new Qt("Application Initializer");let km=(()=>{class o{constructor(c){this.appInits=c,this.resolve=ly,this.reject=ly,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(Db(g))c.push(g);else if(Jc(g)){const b=new Promise((C,I)=>{g.subscribe({complete:C,error:I})});c.push(b)}}Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(Zn(V0,8))},o.\u0275prov=rn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const B0=new Qt("AppId",{providedIn:"root",factory:function vf(){return`${cy()}${cy()}${cy()}`}});function cy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const CD=new Qt("Platform Initializer"),MM=new Qt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),U0=new Qt("appBootstrapListener"),ID=new Qt("AnimationModuleType");let RM=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=rn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const uy=new Qt("LocaleId",{providedIn:"root",factory:()=>_o(uy,bt.Optional|bt.SkipSelf)||function OM(){return typeof $localize<"u"&&$localize.locale||Kl}()}),DD=new Qt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class NM{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let FM=(()=>{class o{compileModuleSync(c){return new J_(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),g=de(Tr(c).declarations).reduce((b,C)=>{const I=$t(C);return I&&b.push(new Q_(I)),b},[]);return new NM(d,g)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=rn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const bf=(()=>Promise.resolve(0))();function fy(o){typeof Zone>"u"?bf.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class hi{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ol(!1),this.onMicrotaskEmpty=new ol(!1),this.onStable=new ol(!1),this.onError=new ol(!1),typeof Zone>"u")throw new ke(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function TD(){let o=qe.requestAnimationFrame,a=qe.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Td(o){const a=()=>{!function py(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(qe,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,j0(o),o.isCheckStableRunning=!0,wf(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),j0(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,g,b,C)=>{try{return UM(o),c.invokeTask(f,g,b,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),my(o)}},onInvoke:(c,d,f,g,b,C,I)=>{try{return UM(o),c.invoke(f,g,b,C,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),my(o)}},onHasTask:(c,d,f,g)=>{c.hasTask(f,g),d===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,j0(o),wf(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(c,d,f,g)=>(c.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hi.isInAngularZone())throw new ke(909,!1)}static assertNotInAngularZone(){if(hi.isInAngularZone())throw new ke(909,!1)}run(a,c,d){return this._inner.run(a,c,d)}runTask(a,c,d,f){const g=this._inner,b=g.scheduleEventTask("NgZoneEvent: "+f,a,BM,ly,ly);try{return g.runTask(b,c,d)}finally{g.cancelTask(b)}}runGuarded(a,c,d){return this._inner.runGuarded(a,c,d)}runOutsideAngular(a){return this._outer.run(a)}}const BM={};function wf(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function j0(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function UM(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function my(o){o._nesting--,wf(o)}class HM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ol,this.onMicrotaskEmpty=new ol,this.onStable=new ol,this.onError=new ol}run(a,c,d){return a.apply(c,d)}runGuarded(a,c,d){return a.apply(c,d)}runOutsideAngular(a){return a()}runTask(a,c,d,f){return a.apply(c,d)}}const SD=new Qt(""),jM=new Qt("");let AD,Sd=(()=>{class o{constructor(c,d,f){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,AD||(function b1(o){AD=o}(f),f.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hi.assertNotInAngularZone(),fy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fy(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==g),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:g,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,f){return[]}}return o.\u0275fac=function(c){return new(c||o)(Zn(hi),Zn(gy),Zn(jM))},o.\u0275prov=rn({token:o,factory:o.\u0275fac}),o})(),gy=(()=>{class o{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return AD?.findTestabilityInTree(this,c,d)??null}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=rn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Ad=null;const $M=new Qt("AllowMultipleToken"),$0=new Qt("PlatformDestroyListeners");class C1{constructor(a,c){this.name=a,this.token=c}}function WM(o,a,c=[]){const d=`Platform: ${a}`,f=new Qt(d);return(g=[])=>{let b=xD();if(!b||b.injector.get($M,!1)){const C=[...c,...g,{provide:f,useValue:!0}];o?o(C):function I1(o){if(Ad&&!Ad.get($M,!1))throw new ke(400,!1);Ad=o;const a=o.get(ZM);(function qM(o){const a=o.get(CD,null);a&&a.forEach(c=>c())})(o)}(function KM(o=[],a){return Qa.create({name:a,providers:[{provide:iC,useValue:"platform"},{provide:$0,useValue:new Set([()=>Ad=null])},...o]})}(C,d))}return function D1(o){const a=xD();if(!a)throw new ke(401,!1);return a}()}}function xD(){return Ad?.get(ZM)??null}let ZM=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const f=function T1(o,a){let c;return c="noop"===o?new HM:("zone.js"===o?void 0:o)||new hi(a),c}(d?.ngZone,function YM(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(d)),g=[{provide:hi,useValue:f}];return f.run(()=>{const b=Qa.create({providers:g,parent:this.injector,name:c.moduleType.name}),C=c.create(b),I=C.injector.get(jc,null);if(!I)throw new ke(402,!1);return f.runOutsideAngular(()=>{const x=f.onError.subscribe({next:O=>{I.handleError(O)}});C.onDestroy(()=>{z0(this._modules,C),x.unsubscribe()})}),function QM(o,a,c){try{const d=c();return Db(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(I,f,()=>{const x=C.injector.get(km);return x.runInitializers(),x.donePromise.then(()=>(function _I(o){Gt(o,"Expected localeId to be defined"),"string"==typeof o&&(gI=o.toLowerCase().replace(/_/g,"-"))}(C.injector.get(uy,Kl)||Kl),this._moduleDoBootstrap(C),C))})})}bootstrapModule(c,d=[]){const f=XM({},d);return function GM(o,a,c){const d=new J_(c);return Promise.resolve(d)}(0,0,c).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(c){const d=c.injector.get(G0);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new ke(403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get($0,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(Zn(Qa))},o.\u0275prov=rn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function XM(o,a){return Array.isArray(a)?a.reduce(XM,o):{...o,...a}}let G0=(()=>{class o{constructor(c,d,f){this._zone=c,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new L.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),b=new L.y(C=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{hi.assertNotInAngularZone(),fy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{hi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{I.unsubscribe(),x.unsubscribe()}});this.isStable=(0,pe.T)(g,b.pipe((0,le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const f=c instanceof HI;if(!this._injector.get(km).done)throw!f&&gf(c),new ke(405,false);let b;b=f?c:this._injector.get(vd).resolveComponentFactory(c),this.componentTypes.push(b.componentType);const C=function E1(o){return o.isBoundToModule}(b)?void 0:this._injector.get(bd),x=b.create(Qa.NULL,[],d||b.selector,C),O=x.location.nativeElement,U=x.injector.get(SD,null);return U?.registerApplication(O),x.onDestroy(()=>{this.detachView(x.hostView),z0(this.components,x),U?.unregisterApplication(O)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new ke(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;z0(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(U0,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>z0(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new ke(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(c){return new(c||o)(Zn(hi),Zn(Qa),Zn(jc))},o.\u0275prov=rn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function z0(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}let ek=!0,tk=!1;function A1(){return tk=!0,ek}function x1(){if(tk)throw new Error("Cannot enable prod mode after platform setup.");ek=!1}let M1=(()=>{class o{}return o.__NG_ELEMENT_ID__=k1,o})();function k1(o){return function R1(o,a,c){if(_l(o)&&!c){const d=Er(o.index,a);return new Ed(d,d)}return 47&o.type?new Ed(a[16],a):null}(Fn(),Se(),16==(16&o))}class sk{constructor(){}supports(a){return em(a)}create(a){return new V1(a)}}const L1=(o,a)=>a;class V1{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||L1}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,d=this._removalsHead,f=0,g=null;for(;c||d;){const b=!d||c&&c.currentIndex<lk(d,f,g)?c:d,C=lk(b,f,g),I=b.currentIndex;if(b===d)f--,d=d._nextRemoved;else if(c=c._next,null==b.previousIndex)f++;else{g||(g=[]);const x=C-f,O=I-f;if(x!=O){for(let Q=0;Q<x;Q++){const ie=Q<g.length?g[Q]:g[Q]=0,De=ie+Q;O<=De&&De<x&&(g[Q]=ie+1)}g[b.previousIndex]=O-x}}C!==I&&a(b,C,I)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!em(a))throw new ke(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,b,c=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)g=a[C],b=this._trackByFn(C,g),null!==c&&Object.is(c.trackById,b)?(d&&(c=this._verifyReinsertion(c,g,b,C)),Object.is(c.item,g)||this._addIdentityChange(c,g)):(c=this._mismatch(c,g,b,C),d=!0),c=c._next}else f=0,function nx(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[Qc()]();let d;for(;!(d=c.next()).done;)a(d.value)}}(a,C=>{b=this._trackByFn(f,C),null!==c&&Object.is(c.trackById,b)?(d&&(c=this._verifyReinsertion(c,C,b,f)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,b,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,d,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,g,f)):a=this._addAfter(new B1(c,d),g,f),a}_verifyReinsertion(a,c,d,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,c,d),this._addToMoves(a,d),a}_moveAfter(a,c,d){return this._unlink(a),this._insertAfter(a,c,d),this._addToMoves(a,d),a}_addAfter(a,c,d){return this._insertAfter(a,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,d){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new ak),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,d=a._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ak),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class B1{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ok{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const c=a._prevDup,d=a._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class ak{constructor(){this.map=new Map}put(a){const c=a.trackById;let d=this.map.get(c);d||(d=new ok,this.map.set(c,d)),d.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lk(o,a,c){const d=o.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+a+f}class ck{constructor(){}supports(a){return a instanceof Map||el(a)}create(){return new U1}}class U1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||el(a)))throw new ke(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const g=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,g)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const d=a._prev;return c._next=a,c._prev=d,a._prev=c,d&&(d._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const g=f._prev,b=f._next;return g&&(g._next=b),b&&(b._prev=g),f._next=null,f._prev=null,f}const d=new H1(a);return this._records.set(a,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(d=>c(a[d],d))}}class H1{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function uk(){return new PD([new sk])}let PD=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||uk()),deps:[[o,new ht,new Ae]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new ke(901,!1)}}return o.\u0275prov=rn({token:o,providedIn:"root",factory:uk}),o})();function dk(){return new ND([new ck])}let ND=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||dk()),deps:[[o,new ht,new Ae]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new ke(901,!1)}}return o.\u0275prov=rn({token:o,providedIn:"root",factory:dk}),o})();const G1=WM(null,"core",[]);let z1=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(Zn(G0))},o.\u0275mod=pt({type:o}),o.\u0275inj=en({}),o})();function q1(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(ft,xe,V)=>{V.d(xe,{Z:()=>ke});var u=V(2090),re=V(4859),L=V(9681),pe=V(1877);class le{constructor(ge,be){this._delegate=ge,this.firebase=be,(0,L._addComponent)(ge,new re.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(ge,be=L._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const it=this._delegate.container.getProvider(ge);return!it.isInitialized()&&"EXPLICIT"===(null===(Je=it.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&it.initialize(),it.getImmediate({identifier:be})}_removeServiceInstance(ge,be=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(be)}_addComponent(ge){(0,L._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,L._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ve(){const $e=function me($e){const ge={},be={__esModule:!0,initializeApp:function Re(ze,q={}){const Ie=L.initializeApp(ze,q);if((0,u.r3)(ge,Ie.name))return ge[Ie.name];const ee=new $e(Ie,be);return ge[Ie.name]=ee,ee},app:it,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Te(ze){const q=ze.name,Ie=q.replace("-compat","");if(L._registerComponent(ze)&&"PUBLIC"===ze.type){const ee=(ae=it())=>{if("function"!=typeof ae[Ie])throw oe.create("invalid-app-argument",{appName:q});return ae[Ie]()};void 0!==ze.serviceProps&&(0,u.ZB)(ee,ze.serviceProps),be[Ie]=ee,$e.prototype[Ie]=function(...ae){return this._getService.bind(this,q).apply(this,ze.multipleInstances?ae:[])}}return"PUBLIC"===ze.type?be[Ie]:null},removeApp:function Je(ze){delete ge[ze]},useAsService:function je(ze,q){return"serverAuth"===q?null:q},modularAPIs:L}};function it(ze){if(!(0,u.r3)(ge,ze=ze||L._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:ze});return ge[ze]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ce(){return Object.keys(ge).map(ze=>ge[ze])}}),it.App=$e,be}(le);return $e.INTERNAL=Object.assign(Object.assign({},$e.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function ge(be){(0,u.ZB)($e,be)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),$e}(),G=new pe.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const $e=self.firebase.SDK_VERSION;$e&&$e.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=z;!function Me($e){(0,L.registerVersion)("@firebase/app-compat","0.1.29",$e)}()},9681:(ft,xe,V)=>{V.r(xe),V.d(xe,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>ds,_DEFAULT_ENTRY_NAME:()=>Gt,_addComponent:()=>gn,_addOrOverwriteComponent:()=>rn,_apps:()=>dn,_clearComponents:()=>us,_components:()=>$n,_getProvider:()=>en,_registerComponent:()=>Hr,_removeServiceInstance:()=>zt,deleteApp:()=>bt,getApp:()=>ri,getApps:()=>$i,initializeApp:()=>no,onLog:()=>zn,registerVersion:()=>Gn,setLogLevel:()=>hs});var u=V(5861),re=V(4859),L=V(1877),pe=V(2090),le=V(8766);class ye{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map(Y=>{if(function oe(j){return"VERSION"===j.getComponent()?.type}(Y)){const Oe=Y.getImmediate();return`${Oe.library}/${Oe.version}`}return null}).filter(Y=>Y).join(" ")}}const me="@firebase/app",z=new L.Yd("@firebase/app"),Gt="[DEFAULT]",Xe={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dn=new Map,$n=new Map;function gn(j,K){try{j.container.addComponent(K)}catch(Y){z.debug(`Component ${K.name} failed to register with FirebaseApp ${j.name}`,Y)}}function rn(j,K){j.container.addOrOverwriteComponent(K)}function Hr(j){const K=j.name;if($n.has(K))return z.debug(`There were multiple attempts to register component ${K}.`),!1;$n.set(K,j);for(const Y of dn.values())gn(Y,j);return!0}function en(j,K){const Y=j.container.getProvider("heartbeat").getImmediate({optional:!0});return Y&&Y.triggerHeartbeat(),j.container.getProvider(K)}function zt(j,K,Y=Gt){en(j,K).clearInstance(Y)}function us(){$n.clear()}const Pr=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ni{constructor(K,Y,Oe){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},Y),this._name=Y.name,this._automaticDataCollectionEnabled=Y.automaticDataCollectionEnabled,this._container=Oe,this.container.addComponent(new re.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw Pr.create("app-deleted",{appName:this._name})}}const ds="9.9.0";function no(j,K={}){"object"!=typeof K&&(K={name:K});const Y=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},K),Oe=Y.name;if("string"!=typeof Oe||!Oe)throw Pr.create("bad-app-name",{appName:String(Oe)});const We=dn.get(Oe);if(We){if((0,pe.vZ)(j,We.options)&&(0,pe.vZ)(Y,We.config))return We;throw Pr.create("duplicate-app",{appName:Oe})}const pt=new re.H0(Oe);for(const tn of $n.values())pt.addComponent(tn);const wn=new ni(j,Y,pt);return dn.set(Oe,wn),wn}function ri(j=Gt){const K=dn.get(j);if(!K)throw Pr.create("no-app",{appName:j});return K}function $i(){return Array.from(dn.values())}function bt(j){return ii.apply(this,arguments)}function ii(){return(ii=(0,u.Z)(function*(j){const K=j.name;dn.has(K)&&(dn.delete(K),yield Promise.all(j.container.getProviders().map(Y=>Y.delete())),j.isDeleted=!0)})).apply(this,arguments)}function Gn(j,K,Y){var Oe;let We=null!==(Oe=Xe[j])&&void 0!==Oe?Oe:j;Y&&(We+=`-${Y}`);const pt=We.match(/\s|\//),wn=K.match(/\s|\//);if(pt||wn){const tn=[`Unable to register library "${We}" with version "${K}":`];return pt&&tn.push(`library name "${We}" contains illegal characters (whitespace or "/")`),pt&&wn&&tn.push("and"),wn&&tn.push(`version name "${K}" contains illegal characters (whitespace or "/")`),void z.warn(tn.join(" "))}Hr(new re.wA(`${We}-version`,()=>({library:We,version:K}),"VERSION"))}function zn(j,K){if(null!==j&&"function"!=typeof j)throw Pr.create("invalid-log-argument");(0,L.Am)(j,K)}function hs(j){(0,L.Ub)(j)}const Jn="firebase-heartbeat-store";let gi=null;function ko(){return gi||(gi=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(j,K)=>{0===K&&j.createObjectStore(Jn)}}).catch(j=>{throw Pr.create("storage-open",{originalErrorMessage:j.message})})),gi}function qe(){return(qe=(0,u.Z)(function*(j){var K;try{return(yield ko()).transaction(Jn).objectStore(Jn).get(ur(j))}catch(Y){throw Pr.create("storage-get",{originalErrorMessage:null===(K=Y)||void 0===K?void 0:K.message})}})).apply(this,arguments)}function It(j,K){return jr.apply(this,arguments)}function jr(){return(jr=(0,u.Z)(function*(j,K){var Y;try{const We=(yield ko()).transaction(Jn,"readwrite");return yield We.objectStore(Jn).put(K,ur(j)),We.done}catch(Oe){throw Pr.create("storage-set",{originalErrorMessage:null===(Y=Oe)||void 0===Y?void 0:Y.message})}})).apply(this,arguments)}function ur(j){return`${j.name}!${j.options.appId}`}class dr{constructor(K){this.container=K,this._heartbeatsCache=null;const Y=this.container.getProvider("app").getImmediate();this._storage=new si(Y),this._heartbeatsCachePromise=this._storage.read().then(Oe=>(this._heartbeatsCache=Oe,Oe))}triggerHeartbeat(){var K=this;return(0,u.Z)(function*(){const Oe=K.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),We=Gi();if(null===K._heartbeatsCache&&(K._heartbeatsCache=yield K._heartbeatsCachePromise),K._heartbeatsCache.lastSentHeartbeatDate!==We&&!K._heartbeatsCache.heartbeats.some(pt=>pt.date===We))return K._heartbeatsCache.heartbeats.push({date:We,agent:Oe}),K._heartbeatsCache.heartbeats=K._heartbeatsCache.heartbeats.filter(pt=>{const wn=new Date(pt.date).valueOf();return Date.now()-wn<=2592e6}),K._storage.overwrite(K._heartbeatsCache)})()}getHeartbeatsHeader(){var K=this;return(0,u.Z)(function*(){if(null===K._heartbeatsCache&&(yield K._heartbeatsCachePromise),null===K._heartbeatsCache||0===K._heartbeatsCache.heartbeats.length)return"";const Y=Gi(),{heartbeatsToSend:Oe,unsentEntries:We}=function ln(j,K=1024){const Y=[];let Oe=j.slice();for(const We of j){const pt=Y.find(wn=>wn.agent===We.agent);if(pt){if(pt.dates.push(We.date),$(Y)>K){pt.dates.pop();break}}else if(Y.push({agent:We.agent,dates:[We.date]}),$(Y)>K){Y.pop();break}Oe=Oe.slice(1)}return{heartbeatsToSend:Y,unsentEntries:Oe}}(K._heartbeatsCache.heartbeats),pt=(0,pe.L)(JSON.stringify({version:2,heartbeats:Oe}));return K._heartbeatsCache.lastSentHeartbeatDate=Y,We.length>0?(K._heartbeatsCache.heartbeats=We,yield K._storage.overwrite(K._heartbeatsCache)):(K._heartbeatsCache.heartbeats=[],K._storage.overwrite(K._heartbeatsCache)),pt})()}}function Gi(){return(new Date).toISOString().substring(0,10)}class si{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,pe.hl)()&&(0,pe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var K=this;return(0,u.Z)(function*(){return(yield K._canUseIndexedDBPromise)&&(yield function Jt(j){return qe.apply(this,arguments)}(K.app))||{heartbeats:[]}})()}overwrite(K){var Y=this;return(0,u.Z)(function*(){var Oe;if(yield Y._canUseIndexedDBPromise){const pt=yield Y.read();return It(Y.app,{lastSentHeartbeatDate:null!==(Oe=K.lastSentHeartbeatDate)&&void 0!==Oe?Oe:pt.lastSentHeartbeatDate,heartbeats:K.heartbeats})}})()}add(K){var Y=this;return(0,u.Z)(function*(){var Oe;if(yield Y._canUseIndexedDBPromise){const pt=yield Y.read();return It(Y.app,{lastSentHeartbeatDate:null!==(Oe=K.lastSentHeartbeatDate)&&void 0!==Oe?Oe:pt.lastSentHeartbeatDate,heartbeats:[...pt.heartbeats,...K.heartbeats]})}})()}}function $(j){return(0,pe.L)(JSON.stringify({version:2,heartbeats:j})).length}!function W(j){Hr(new re.wA("platform-logger",K=>new ye(K),"PRIVATE")),Hr(new re.wA("heartbeat",K=>new dr(K),"PRIVATE")),Gn(me,"0.7.28",j),Gn(me,"0.7.28","esm2017"),Gn("fire-js","")}("")},4859:(ft,xe,V)=>{V.d(xe,{H0:()=>me,wA:()=>L,zt:()=>le});var u=V(5861),re=V(2090);class L{constructor(z,G,ne){this.name=z,this.instanceFactory=G,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const pe="[DEFAULT]";class le{constructor(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){const ne=new re.BH;if(this.instancesDeferred.set(G,ne),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:G});Ge&&ne.resolve(Ge)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(z){var G;const ne=this.normalizeInstanceIdentifier(z?.identifier),Ge=null!==(G=z?.optional)&&void 0!==G&&G;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Me){if(Ge)return null;throw Me}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function oe(ve){return"EAGER"===ve.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:pe})}catch{}for(const[G,ne]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(G);try{const Me=this.getOrInitializeService({instanceIdentifier:Ge});ne.resolve(Me)}catch{}}}}clearInstance(z=pe){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,u.Z)(function*(){const G=Array.from(z.instances.values());yield Promise.all([...G.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...G.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=pe){return this.instances.has(z)}getOptions(z=pe){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:G={}}=z,ne=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ne,options:G});for(const[Me,ke]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Me)&&ke.resolve(Ge);return Ge}onInit(z,G){var ne;const Ge=this.normalizeInstanceIdentifier(G),Me=null!==(ne=this.onInitCallbacks.get(Ge))&&void 0!==ne?ne:new Set;Me.add(z),this.onInitCallbacks.set(Ge,Me);const ke=this.instances.get(Ge);return ke&&z(ke,Ge),()=>{Me.delete(z)}}invokeOnInitCallbacks(z,G){const ne=this.onInitCallbacks.get(G);if(ne)for(const Ge of ne)try{Ge(z,G)}catch{}}getOrInitializeService({instanceIdentifier:z,options:G={}}){let ne=this.instances.get(z);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=z,ve===pe?void 0:ve),options:G}),this.instances.set(z,ne),this.instancesOptions.set(z,G),this.invokeOnInitCallbacks(ne,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ne)}catch{}var ve;return ne||null}normalizeInstanceIdentifier(z=pe){return this.component?this.component.multipleInstances?z:pe:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const G=this.getProvider(z.name);if(G.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);G.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const G=new le(z,this);return this.providers.set(z,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(ft,xe,V)=>{V.d(xe,{Am:()=>ve,Ub:()=>me,Yd:()=>oe,in:()=>re});const u=[];var re=(()=>{return(z=re||(re={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",re;var z})();const L={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},pe=re.INFO,le={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},ye=(z,G,...ne)=>{if(G<z.logLevel)return;const Ge=(new Date).toISOString(),Me=le[G];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Me](`[${Ge}]  ${z.name}:`,...ne)};class oe{constructor(G){this.name=G,this._logLevel=pe,this._logHandler=ye,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in re))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...G),this._logHandler(this,re.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...G),this._logHandler(this,re.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,re.INFO,...G),this._logHandler(this,re.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,re.WARN,...G),this._logHandler(this,re.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...G),this._logHandler(this,re.ERROR,...G)}}function me(z){u.forEach(G=>{G.setLogLevel(z)})}function ve(z,G){for(const ne of u){let Ge=null;G&&G.level&&(Ge=L[G.level]),ne.userLogHandler=null===z?null:(Me,ke,...$e)=>{const ge=$e.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch{return null}}).filter(be=>be).join(" ");ke>=(Ge??Me.logLevel)&&z({level:re[ke].toLowerCase(),message:ge,args:$e,type:Me.name})}}}},8766:(ft,xe,V)=>{V.d(xe,{Lj:()=>Re,X3:()=>it});var u=V(5861);let L,pe;const oe=new WeakMap,me=new WeakMap,ve=new WeakMap,z=new WeakMap,G=new WeakMap;let Me={get(q,Ie,ee){if(q instanceof IDBTransaction){if("done"===Ie)return me.get(q);if("objectStoreNames"===Ie)return q.objectStoreNames||ve.get(q);if("store"===Ie)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return be(q[Ie])},set:(q,Ie,ee)=>(q[Ie]=ee,!0),has:(q,Ie)=>q instanceof IDBTransaction&&("done"===Ie||"store"===Ie)||Ie in q};function ge(q){return"function"==typeof q?function $e(q){return q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(q)?function(...Ie){return q.apply(Je(this),Ie),be(oe.get(this))}:function(...Ie){return be(q.apply(Je(this),Ie))}:function(Ie,...ee){const ae=q.call(Je(this),Ie,...ee);return ve.set(ae,Ie.sort?Ie.sort():[Ie]),be(ae)}}(q):(q instanceof IDBTransaction&&function Ge(q){if(me.has(q))return;const Ie=new Promise((ee,ae)=>{const se=()=>{q.removeEventListener("complete",Ee),q.removeEventListener("error",fe),q.removeEventListener("abort",fe)},Ee=()=>{ee(),se()},fe=()=>{ae(q.error||new DOMException("AbortError","AbortError")),se()};q.addEventListener("complete",Ee),q.addEventListener("error",fe),q.addEventListener("abort",fe)});me.set(q,Ie)}(q),((q,Ie)=>Ie.some(ee=>q instanceof ee))(q,function le(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(q,Me):q)}function be(q){if(q instanceof IDBRequest)return function ne(q){const Ie=new Promise((ee,ae)=>{const se=()=>{q.removeEventListener("success",Ee),q.removeEventListener("error",fe)},Ee=()=>{ee(be(q.result)),se()},fe=()=>{ae(q.error),se()};q.addEventListener("success",Ee),q.addEventListener("error",fe)});return Ie.then(ee=>{ee instanceof IDBCursor&&oe.set(ee,q)}).catch(()=>{}),G.set(Ie,q),Ie}(q);if(z.has(q))return z.get(q);const Ie=ge(q);return Ie!==q&&(z.set(q,Ie),G.set(Ie,q)),Ie}const Je=q=>G.get(q);function it(q,Ie,{blocked:ee,upgrade:ae,blocking:se,terminated:Ee}={}){const fe=indexedDB.open(q,Ie),Fe=be(fe);return ae&&fe.addEventListener("upgradeneeded",vt=>{ae(be(fe.result),vt.oldVersion,vt.newVersion,be(fe.transaction))}),ee&&fe.addEventListener("blocked",()=>ee()),Fe.then(vt=>{Ee&&vt.addEventListener("close",()=>Ee()),se&&vt.addEventListener("versionchange",()=>se())}).catch(()=>{}),Fe}function Re(q,{blocked:Ie}={}){const ee=indexedDB.deleteDatabase(q);return Ie&&ee.addEventListener("blocked",()=>Ie()),be(ee).then(()=>{})}const Ce=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],je=new Map;function ze(q,Ie){if(!(q instanceof IDBDatabase)||Ie in q||"string"!=typeof Ie)return;if(je.get(Ie))return je.get(Ie);const ee=Ie.replace(/FromIndex$/,""),ae=Ie!==ee,se=Te.includes(ee);if(!(ee in(ae?IDBIndex:IDBObjectStore).prototype)||!se&&!Ce.includes(ee))return;const Ee=function(){var fe=(0,u.Z)(function*(Fe,...vt){const Xt=this.transaction(Fe,se?"readwrite":"readonly");let Gt=Xt.store;return ae&&(Gt=Gt.index(vt.shift())),(yield Promise.all([Gt[ee](...vt),se&&Xt.done]))[0]});return function(vt){return fe.apply(this,arguments)}}();return je.set(Ie,Ee),Ee}!function ke(q){Me=q(Me)}(q=>({...q,get:(Ie,ee,ae)=>ze(Ie,ee)||q.get(Ie,ee,ae),has:(Ie,ee)=>!!ze(Ie,ee)||q.has(Ie,ee)}))},5861:(ft,xe,V)=>{function u(L,pe,le,ye,oe,me,ve){try{var z=L[me](ve),G=z.value}catch(ne){return void le(ne)}z.done?pe(G):Promise.resolve(G).then(ye,oe)}function re(L){return function(){var pe=this,le=arguments;return new Promise(function(ye,oe){var me=L.apply(pe,le);function ve(G){u(me,ye,oe,ve,z,"next",G)}function z(G){u(me,ye,oe,ve,z,"throw",G)}ve(void 0)})}}V.d(xe,{Z:()=>re})}},ft=>{ft(ft.s=5215)}]);